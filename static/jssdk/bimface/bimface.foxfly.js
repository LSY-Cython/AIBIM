"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_get=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}function t(e,t){this.key=e,this.value=t,this[l]=void 0,this[u]=void 0}function i(e){this.entry=e}function r(e){this.entry=e}function n(e){this.entry=e}function a(e,t,i){v.setFromMatrixPosition(t.matrixWorld),g.setFromMatrixPosition(i.matrixWorld);var r=v.distanceTo(g),n=t.projectionMatrix.elements,a=i.projectionMatrix.elements,o=n[14]/(n[10]-1),s=n[14]/(n[10]+1),l=(n[9]+1)/n[5],u=(n[9]-1)/n[5],c=(n[8]-1)/n[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=r/(-c+h),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var y=o+p,M=s+p,E=d-m,b=f+(r-m),x=l*s/M*y,I=u*s/M*y;e.projectionMatrix.makePerspective(E,b,x,I,y,M)}function o(e,t){return new Promise(function(i,r){t.loadArrayBufferImmediately(e,function(e){i(e)},function(e){r(e)})})}var s=window.CLOUD=window.CLOUD||{};!function(e,t,i){!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){i(1),i(50),i(51),i(52),i(54),i(55),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(68),i(70),i(72),i(74),i(77),i(78),i(79),i(83),i(86),i(87),i(88),i(89),i(91),i(92),i(93),i(94),i(95),i(97),i(99),i(100),i(101),i(103),i(104),i(105),i(107),i(108),i(109),i(111),i(112),i(113),i(114),i(115),i(116),i(117),i(118),i(119),i(120),i(121),i(122),i(123),i(124),i(126),i(130),i(131),i(132),i(133),i(137),i(139),i(140),i(141),i(142),i(143),i(144),i(145),i(146),i(147),i(148),i(149),i(150),i(151),i(152),i(158),i(159),i(161),i(162),i(163),i(167),i(168),i(169),i(170),i(171),i(173),i(174),i(175),i(176),i(179),i(181),i(182),i(183),i(185),i(187),i(189),i(190),i(191),i(193),i(194),i(195),i(196),i(203),i(206),i(207),i(209),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(231),i(234),i(235),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(258),i(259),i(261),i(262),i(263),i(264),i(267),i(268),i(269),i(270),i(271),i(272),i(273),i(274),i(276),i(277),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(291),i(156),i(293),i(292),i(294),i(295),i(296),i(297),i(298),i(300),i(301),i(302),i(304),e.exports=i(305)},function(e,t,r){var n=r(2),a=r(3),o=r(4),s=r(6),l=r(16),u=r(20).KEY,c=r(5),h=r(21),d=r(22),f=r(17),p=r(23),m=r(24),v=r(25),g=r(27),y=r(40),M=r(43),E=r(10),b=r(30),x=r(14),I=r(15),T=r(44),w=r(47),C=r(49),S=r(9),A=r(28),k=C.f,R=S.f,B=w.f,L=n.Symbol,O=n.JSON,P=O&&O.stringify,D="prototype",N=p("_hidden"),_=p("toPrimitive"),H={}.propertyIsEnumerable,F=h("symbol-registry"),U=h("symbols"),G=h("op-symbols"),z=Object[D],j="function"==typeof L,V=n.QObject,W=!V||!V[D]||!V[D].findChild,Y=o&&c(function(){return 7!=T(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,i){var r=k(z,t);r&&delete z[t],R(e,t,i),r&&e!==z&&R(z,t,r)}:R,Z=function(e){var t=U[e]=T(L[D]);return t._k=e,t},Q=j&&"symbol"==_typeof(L.iterator)?function(e){return"symbol"==(void 0===e?"undefined":_typeof(e))}:function(e){return e instanceof L},X=function(e,t,i){return e===z&&X(G,t,i),E(e),t=x(t,!0),E(i),a(U,t)?(i.enumerable?(a(e,N)&&e[N][t]&&(e[N][t]=!1),i=T(i,{enumerable:I(0,!1)})):(a(e,N)||R(e,N,I(1,{})),e[N][t]=!0),Y(e,t,i)):R(e,t,i)},J=function(e,t){E(e);for(var i,r=y(t=b(t)),n=0,a=r.length;a>n;)X(e,i=r[n++],t[i]);return e},K=function(e,t){return t===i?T(e):J(T(e),t)},q=function(e){var t=H.call(this,e=x(e,!0));return!(this===z&&a(U,e)&&!a(G,e))&&(!(t||!a(this,e)||!a(U,e)||a(this,N)&&this[N][e])||t)},$=function(e,t){if(e=b(e),t=x(t,!0),e!==z||!a(U,t)||a(G,t)){var i=k(e,t);return!i||!a(U,t)||a(e,N)&&e[N][t]||(i.enumerable=!0),i}},ee=function(e){for(var t,i=B(b(e)),r=[],n=0;i.length>n;)a(U,t=i[n++])||t==N||t==u||r.push(t);return r},te=function(e){for(var t,i=e===z,r=B(i?G:b(e)),n=[],o=0;r.length>o;)!a(U,t=r[o++])||i&&!a(z,t)||n.push(U[t]);return n};j||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:i),t=function t(i){this===z&&t.call(G,i),a(this,N)&&a(this[N],e)&&(this[N][e]=!1),Y(this,e,I(1,i))};return o&&W&&Y(z,e,{configurable:!0,set:t}),Z(e)},l(L[D],"toString",function(){return this._k}),C.f=$,S.f=X,r(48).f=w.f=ee,r(42).f=q,r(41).f=te,o&&!r(26)&&l(z,"propertyIsEnumerable",q,!0),m.f=function(e){return Z(p(e))}),s(s.G+s.W+s.F*!j,{Symbol:L});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ie.length>re;)p(ie[re++]);for(var ie=A(p.store),re=0;ie.length>re;)v(ie[re++]);s(s.S+s.F*!j,"Symbol",{for:function(e){return a(F,e+="")?F[e]:F[e]=L(e)},keyFor:function(e){if(Q(e))return g(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!j,"Object",{create:K,defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),O&&s(s.S+s.F*(!j||c(function(){var e=L();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){if(e!==i&&!Q(e)){for(var t,r,n=[e],a=1;arguments.length>a;)n.push(arguments[a++]);return t=n[1],"function"==typeof t&&(r=t),!r&&M(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!Q(t))return t}),n[1]=t,P.apply(O,n)}}}),L[D][_]||r(8)(L[D],_,L[D].valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,i){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof t&&(t=r)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){e.exports=!i(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(2),a=r(7),o=r(8),s=r(16),l=r(18),u="prototype",c=function e(t,r,c){var h,d,f,p,m=t&e.F,v=t&e.G,g=t&e.S,y=t&e.P,M=t&e.B,E=v?n:g?n[r]||(n[r]={}):(n[r]||{})[u],b=v?a:a[r]||(a[r]={}),x=b[u]||(b[u]={});v&&(c=r);for(h in c)d=!m&&E&&E[h]!==i,f=(d?E:c)[h],p=M&&d?l(f,n):y&&"function"==typeof f?l(Function.call,f):f,E&&s(E,h,f,t&e.U),b[h]!=f&&o(b,h,p),y&&x[h]!=f&&(x[h]=f)};n.core=a,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(t,i){var r=t.exports={version:"2.4.0"};"number"==typeof e&&(e=r)},function(e,t,i){var r=i(9),n=i(15);e.exports=i(4)?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var r=i(10),n=i(12),a=i(14),o=Object.defineProperty;t.f=i(4)?Object.defineProperty:function(e,t,i){if(r(e),t=a(t,!0),r(i),n)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var r=i(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==(void 0===e?"undefined":_typeof(e))?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(4)&&!i(5)(function(){return 7!=Object.defineProperty(i(13)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var r=i(11),n=i(2).document,a=r(n)&&r(n.createElement);e.exports=function(e){return a?n.createElement(e):{}}},function(e,t,i){var r=i(11);e.exports=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var r=i(2),n=i(8),a=i(3),o=i(17)("src"),s="toString",l=Function[s],u=(""+l).split(s);i(7).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,i,s){var l="function"==typeof i;l&&(a(i,"name")||n(i,"name",t)),e[t]!==i&&(l&&(a(i,o)||n(i,o,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=i:s?e[t]?e[t]=i:n(e,t,i):(delete e[t],n(e,t,i)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||l.call(this)})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(e===i?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(19);e.exports=function(e,t,r){if(n(e),t===i)return e;switch(r){case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var r=i(17)("meta"),n=i(11),a=i(3),o=i(9).f,s=0,l=Object.isExtensible||function(){return!0},u=!i(5)(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!n(e))return"symbol"==(void 0===e?"undefined":_typeof(e))?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},d=function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},f=function(e){return u&&p.NEED&&l(e)&&!a(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:h,getWeak:d,onFreeze:f}},function(e,t,i){var r=i(2),n="__core-js_shared__",a=r[n]||(r[n]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,i){var r=i(9).f,n=i(3),a=i(23)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,i){var r=i(21)("wks"),n=i(17),a=i(2).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:n)("Symbol."+e))}).store=r},function(e,t,i){t.f=i(23)},function(e,t,i){var r=i(2),n=i(7),a=i(26),o=i(24),s=i(9).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){e.exports=!1},function(e,t,i){var r=i(28),n=i(30);e.exports=function(e,t){for(var i,a=n(e),o=r(a),s=o.length,l=0;s>l;)if(a[i=o[l++]]===t)return i}},function(e,t,i){var r=i(29),n=i(39);e.exports=Object.keys||function(e){return r(e,n)}},function(e,t,i){var r=i(3),n=i(30),a=i(34)(!1),o=i(38)("IE_PROTO");e.exports=function(e,t){var i,s=n(e),l=0,u=[];for(i in s)i!=o&&r(s,i)&&u.push(i);for(;t.length>l;)r(s,i=t[l++])&&(~a(u,i)||u.push(i));return u}},function(e,t,i){var r=i(31),n=i(33);e.exports=function(e){return r(n(e))}},function(e,t,i){var r=i(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==i)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var r=i(30),n=i(35),a=i(37);e.exports=function(e){return function(t,i,o){var s,l=r(t),u=n(l.length),c=a(o,u);if(e&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}}},function(e,t,i){var r=i(36),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},function(e,t){var i=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},function(e,t,i){var r=i(36),n=Math.max,a=Math.min;e.exports=function(e,t){return e=r(e),e<0?n(e+t,0):a(e,t)}},function(e,t,i){var r=i(21)("keys"),n=i(17);e.exports=function(e){return r[e]||(r[e]=n(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var r=i(28),n=i(41),a=i(42);e.exports=function(e){var t=r(e),i=n.f;if(i)for(var o,s=i(e),l=a.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var r=i(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,r){var n=r(10),a=r(45),o=r(39),s=r(38)("IE_PROTO"),l=function(){},u="prototype",c=function(){var e,t=r(13)("iframe"),i=o.length;for(t.style.display="none",r(46).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c[u][o[i]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(l[u]=n(e),r=new l,l[u]=null,r[s]=e):r=c(),t===i?r:a(r,t)}},function(e,t,i){var r=i(9),n=i(10),a=i(28);e.exports=i(4)?Object.defineProperties:function(e,t){n(e);for(var i,o=a(t),s=o.length,l=0;s>l;)r.f(e,i=o[l++],t[i]);return e}},function(e,t,i){e.exports=i(2).document&&document.documentElement},function(e,t,i){var r=i(30),n=i(48).f,a={}.toString,o="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):n(r(e))}},function(e,t,i){var r=i(29),n=i(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},function(e,t,i){var r=i(42),n=i(15),a=i(30),o=i(14),s=i(3),l=i(12),u=Object.getOwnPropertyDescriptor;t.f=i(4)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},function(e,t,i){var r=i(6);r(r.S+r.F*!i(4),"Object",{defineProperty:i(9).f})},function(e,t,i){var r=i(6);r(r.S+r.F*!i(4),"Object",{defineProperties:i(45)})},function(e,t,i){var r=i(30),n=i(49).f;i(53)("getOwnPropertyDescriptor",function(){return function(e,t){return n(r(e),t)}})},function(e,t,i){var r=i(6),n=i(7),a=i(5);e.exports=function(e,t){var i=(n.Object||{})[e]||Object[e],o={};o[e]=t(i),r(r.S+r.F*a(function(){i(1)}),"Object",o)}},function(e,t,i){var r=i(6);r(r.S,"Object",{create:i(44)})},function(e,t,i){var r=i(56),n=i(57);i(53)("getPrototypeOf",function(){return function(e){return n(r(e))}})},function(e,t,i){var r=i(33);e.exports=function(e){return Object(r(e))}},function(e,t,i){var r=i(3),n=i(56),a=i(38)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,i){var r=i(56),n=i(28);i(53)("keys",function(){return function(e){return n(r(e))}})},function(e,t,i){i(53)("getOwnPropertyNames",function(){return i(47).f})},function(e,t,i){var r=i(11),n=i(20).onFreeze;i(53)("freeze",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},function(e,t,i){var r=i(11),n=i(20).onFreeze;i(53)("seal",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},function(e,t,i){var r=i(11),n=i(20).onFreeze;i(53)("preventExtensions",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},function(e,t,i){var r=i(11);i(53)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,i){var r=i(11);i(53)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,i){var r=i(11);i(53)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,i){var r=i(6);r(r.S+r.F,"Object",{assign:i(67)})},function(e,t,i){var r=i(28),n=i(41),a=i(42),o=i(56),s=i(31),l=Object.assign;e.exports=!l||i(5)(function(){var e={},t={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var i=o(e),l=arguments.length,u=1,c=n.f,h=a.f;l>u;)for(var d,f=s(arguments[u++]),p=c?r(f).concat(c(f)):r(f),m=p.length,v=0;m>v;)h.call(f,d=p[v++])&&(i[d]=f[d]);return i}:l},function(e,t,i){var r=i(6);r(r.S,"Object",{is:i(69)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,i){var r=i(6);r(r.S,"Object",{setPrototypeOf:i(71).set})},function(e,t,r){var n=r(11),a=r(10),o=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=r(18)(Function.call,r(49).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:i(e,r),e}}({},!1):i),check:o}},function(e,t,i){var r=i(73),n={};n[i(23)("toStringTag")]="z",n+""!="[object z]"&&i(16)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,r){var n=r(32),a=r(23)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,l;return e===i?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),a))?r:o?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},function(e,t,i){var r=i(6);r(r.P,"Function",{bind:i(75)})},function(e,t,i){var r=i(19),n=i(11),a=i(76),o=[].slice,s={},l=function(e,t,i){if(!(t in s)){for(var r=[],n=0;n<t;n++)r[n]="a["+n+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,i)};e.exports=Function.bind||function(e){var t=r(this),i=o.call(arguments,1),s=function r(){var n=i.concat(o.call(arguments));return this instanceof r?l(t,n.length,n):a(t,n,e)};return n(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,r){var n=r===i;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,i){var r=i(9).f,n=i(15),a=i(3),o=Function.prototype,s=/^\s*function ([^ (]*)/,l="name",u=Object.isExtensible||function(){return!0};l in o||i(4)&&r(o,l,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return a(e,l)||!u(e)||r(e,l,n(5,t)),t}catch(e){return""}}})},function(e,t,i){var r=i(11),n=i(57),a=i(23)("hasInstance"),o=Function.prototype;a in o||i(9).f(o,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,i){var r=i(2),n=i(3),a=i(32),o=i(80),s=i(14),l=i(5),u=i(48).f,c=i(49).f,h=i(9).f,d=i(81).trim,f="Number",p=r[f],m=p,v=p.prototype,g=a(i(44)(v))==f,y="trim"in String.prototype,M=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():d(t,3);var i,r,n,a=t.charCodeAt(0);if(43===a||45===a){if(88===(i=t.charCodeAt(2))||120===i)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var o,l=t.slice(2),u=0,c=l.length;u<c;u++)if((o=l.charCodeAt(u))<48||o>n)return NaN;return parseInt(l,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof p&&(g?l(function(){v.valueOf.call(i)}):a(i)!=f)?o(new m(M(t)),i,p):M(t)};for(var E,b=i(4)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)n(m,E=b[x])&&!n(p,E)&&h(p,E,c(m,E));p.prototype=v,v.constructor=p,i(16)(r,f,p)}},function(e,t,i){var r=i(11),n=i(71).set;e.exports=function(e,t,i){var a,o=t.constructor;return o!==i&&"function"==typeof o&&(a=o.prototype)!==i.prototype&&r(a)&&n&&n(e,a),e}},function(e,t,i){var r=i(6),n=i(33),a=i(5),o=i(82),s="["+o+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(e,t,i){var n={},s=a(function(){return!!o[e]()||l[e]()!=l}),u=n[e]=s?t(d):o[e];i&&(n[i]=u),r(r.P+r.F*s,"String",n)},d=h.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,i){var r=i(6),n=i(36),a=i(84),o=i(85),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",d=function(e,t){for(var i=-1,r=t;++i<6;)r+=e*u[i],u[i]=r%1e7,r=l(r/1e7)},f=function(e){for(var t=6,i=0;--t>=0;)i+=u[t],u[t]=l(i/e),i=i%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var i=String(u[e]);t=""===t?i:t+o.call(h,7-i.length)+i}return t},m=function e(t,i,r){return 0===i?r:i%2==1?e(t,i-1,r*t):e(t*t,i/2,r)},v=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(5)(function(){s.call({})})),"Number",{toFixed:function(e){var t,i,r,s,l=a(this,c),u=n(e),g="",y=h;if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(t=v(l*m(2,69,1))-69,i=t<0?l*m(2,-t,1):l/m(2,t,1),i*=4503599627370496,(t=52-t)>0){for(d(0,i),r=u;r>=7;)d(1e7,0),r-=7;for(d(m(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),y=p()}else d(0,i),d(1<<-t,0),y=p()+o.call(h,u);return u>0?(s=y.length,y=g+(s<=u?"0."+o.call(h,u-s)+y:y.slice(0,s-u)+"."+y.slice(s-u))):y=g+y,y}})},function(e,t,i){var r=i(32);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,i){var r=i(36),n=i(33);e.exports=function(e){var t=String(n(this)),i="",a=r(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},function(e,t,r){var n=r(6),a=r(5),o=r(84),s=1..toPrecision;n(n.P+n.F*(a(function(){return"1"!==s.call(1,i)})||!a(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return e===i?s.call(t):s.call(t,e)}})},function(e,t,i){var r=i(6);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,i){var r=i(6),n=i(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},function(e,t,i){var r=i(6);r(r.S,"Number",{isInteger:i(90)})},function(e,t,i){var r=i(11),n=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&n(e)===e}},function(e,t,i){var r=i(6);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,i){var r=i(6),n=i(90),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return n(e)&&a(e)<=9007199254740991}})},function(e,t,i){var r=i(6);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,i){var r=i(6);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,i){var r=i(6),n=i(96);r(r.S+r.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(e,t,i){var r=i(2).parseFloat,n=i(81).trim;e.exports=1/r(i(82)+"-0")!=-1/0?function(e){var t=n(String(e),3),i=r(t);return 0===i&&"-"==t.charAt(0)?-0:i}:r},function(e,t,i){var r=i(6),n=i(98);r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(e,t,i){var r=i(2).parseInt,n=i(81).trim,a=i(82),o=/^[\-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){var i=n(String(e),3);return r(i,t>>>0||(o.test(i)?16:10))}:r},function(e,t,i){var r=i(6),n=i(98);r(r.G+r.F*(parseInt!=n),{parseInt:n})},function(e,t,i){var r=i(6),n=i(96);r(r.G+r.F*(parseFloat!=n),{parseFloat:n})},function(e,t,i){var r=i(6),n=i(102),a=Math.sqrt,o=Math.acosh;r(r.S+r.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:n(e-1+a(e-1)*a(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,i){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var n=i(6),a=Math.asinh;n(n.S+n.F*!(a&&1/a(0)>0),"Math",{asinh:r})},function(e,t,i){var r=i(6),n=Math.atanh;r(r.S+r.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,i){var r=i(6),n=i(106);r(r.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,i){var r=i(6);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,i){var r=i(6),n=Math.exp;r(r.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},function(e,t,i){var r=i(6),n=i(110);r(r.S+r.F*(n!=Math.expm1),"Math",{expm1:n})},function(e,t){var i=Math.expm1;e.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:i},function(e,t,i){var r=i(6),n=i(106),a=Math.pow,o=a(2,-52),s=a(2,-23),l=a(2,127)*(2-s),u=a(2,-126),c=function(e){return e+1/o-1/o};r(r.S,"Math",{fround:function(e){var t,i,r=Math.abs(e),a=n(e);return r<u?a*c(r/u/s)*u*s:(t=(1+s/o)*r,i=t-(t-r),i>l||i!=i?a*(1/0):a*i)}})},function(e,t,i){var r=i(6),n=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var i,r,a=0,o=0,s=arguments.length,l=0;o<s;)i=n(arguments[o++]),l<i?(r=l/i,a=a*r*r+1,l=i):i>0?(r=i/l,a+=r*r):a+=i;return l===1/0?1/0:l*Math.sqrt(a)}})},function(e,t,i){var r=i(6),n=Math.imul;r(r.S+r.F*i(5)(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(e,t){var i=65535,r=+e,n=+t,a=i&r,o=i&n;return 0|a*o+((i&r>>>16)*o+a*(i&n>>>16)<<16>>>0)}})},function(e,t,i){var r=i(6);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,i){var r=i(6);r(r.S,"Math",{log1p:i(102)})},function(e,t,i){var r=i(6);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,i){var r=i(6);r(r.S,"Math",{sign:i(106)})},function(e,t,i){var r=i(6),n=i(110),a=Math.exp;r(r.S+r.F*i(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,i){var r=i(6),n=i(110),a=Math.exp;r(r.S,"Math",{tanh:function(e){var t=n(e=+e),i=n(-e);return t==1/0?1:i==1/0?-1:(t-i)/(a(e)+a(-e))}})},function(e,t,i){var r=i(6);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,i){var r=i(6),n=i(37),a=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,i=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],n(t,1114111)!==t)throw RangeError(t+" is not a valid code point");i.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return i.join("")}})},function(e,t,i){var r=i(6),n=i(30),a=i(35);r(r.S,"String",{raw:function(e){for(var t=n(e.raw),i=a(t.length),r=arguments.length,o=[],s=0;i>s;)o.push(String(t[s++])),s<r&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,i){i(81)("trim",function(e){return function(){return e(this,3)}})},function(e,t,i){var r=i(6),n=i(125)(!1);r(r.P,"String",{codePointAt:function(e){return n(this,e)}})},function(e,t,r){var n=r(36),a=r(33);e.exports=function(e){return function(t,r){var o,s,l=String(a(t)),u=n(r),c=l.length;return u<0||u>=c?e?"":i:(o=l.charCodeAt(u),o<55296||o>56319||u+1===c||(s=l.charCodeAt(u+1))<56320||s>57343?e?l.charAt(u):o:e?l.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(e,t,r){var n=r(6),a=r(35),o=r(127),s="endsWith",l=""[s];n(n.P+n.F*r(129)(s),"String",{endsWith:function(e){var t=o(this,e,s),r=arguments.length>1?arguments[1]:i,n=a(t.length),u=r===i?n:Math.min(a(r),n),c=String(e);return l?l.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,i){var r=i(128),n=i(33);e.exports=function(e,t,i){if(r(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(n(e))}},function(e,t,r){var n=r(11),a=r(32),o=r(23)("match");e.exports=function(e){var t;return n(e)&&((t=e[o])!==i?!!t:"RegExp"==a(e))}},function(e,t,i){var r=i(23)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(6),a=r(127),o="includes";n(n.P+n.F*r(129)(o),"String",{includes:function(e){return!!~a(this,e,o).indexOf(e,arguments.length>1?arguments[1]:i)}})},function(e,t,i){var r=i(6);r(r.P,"String",{repeat:i(85)})},function(e,t,r){var n=r(6),a=r(35),o=r(127),s="startsWith",l=""[s];n(n.P+n.F*r(129)(s),"String",{startsWith:function(e){var t=o(this,e,s),r=a(Math.min(arguments.length>1?arguments[1]:i,t.length)),n=String(e);return l?l.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){var n=r(125)(!0);r(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:i,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(26),a=r(6),o=r(16),s=r(8),l=r(3),u=r(135),c=r(136),h=r(22),d=r(57),f=r(23)("iterator"),p=!([].keys&&"next"in[].keys()),m="keys",v="values",g=function(){return this};e.exports=function(e,t,r,y,M,E,b){c(r,t,y);var x,I,T,w=function(e){if(!p&&e in k)return k[e];switch(e){case m:case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},C=t+" Iterator",S=M==v,A=!1,k=e.prototype,R=k[f]||k["@@iterator"]||M&&k[M],B=R||w(M),L=M?S?w("entries"):B:i,O="Array"==t?k.entries||R:R;if(O&&(T=d(O.call(new e)))!==Object.prototype&&(h(T,C,!0),n||l(T,f)||s(T,f,g)),S&&R&&R.name!==v&&(A=!0,B=function(){return R.call(this)}),n&&!b||!p&&!A&&k[f]||s(k,f,B),u[t]=B,u[C]=g,M)if(x={values:S?B:w(v),keys:E?B:w(m),entries:L},b)for(I in x)I in k||o(k,I,x[I]);else a(a.P+a.F*(p||A),t,x);return x}},function(e,t){e.exports={}},function(e,t,i){var r=i(44),n=i(15),a=i(22),o={};i(8)(o,i(23)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=r(o,{next:n(1,i)}),a(e,t+" Iterator")}},function(e,t,i){i(138)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,i){var r=i(6),n=i(5),a=i(33),o=/"/g,s=function(e,t,i,r){var n=String(a(e)),s="<"+t;return""!==i&&(s+=" "+i+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+n+"</"+t+">"}
;e.exports=function(e,t){var i={};i[e]=t(s),r(r.P+r.F*n(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",i)}},function(e,t,i){i(138)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,i){i(138)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,i){i(138)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,i){i(138)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,i){i(138)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,i){i(138)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,i){i(138)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,i){i(138)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,i){i(138)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,i){i(138)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,i){i(138)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,i){i(138)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,i){var r=i(6);r(r.S,"Array",{isArray:i(43)})},function(e,t,r){var n=r(18),a=r(6),o=r(56),s=r(153),l=r(154),u=r(35),c=r(155),h=r(156);a(a.S+a.F*!r(157)(function(e){}),"Array",{from:function(e){var t,r,a,d,f=o(e),p="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:i,g=v!==i,y=0,M=h(f);if(g&&(v=n(v,m>2?arguments[2]:i,2)),M==i||p==Array&&l(M))for(t=u(f.length),r=new p(t);t>y;y++)c(r,y,g?v(f[y],y):f[y]);else for(d=M.call(f),r=new p;!(a=d.next()).done;y++)c(r,y,g?s(d,v,[a.value,y],!0):a.value);return r.length=y,r}})},function(e,t,r){var n=r(10);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw o!==i&&n(o.call(e)),t}}},function(e,t,r){var n=r(135),a=r(23)("iterator"),o=Array.prototype;e.exports=function(e){return e!==i&&(n.Array===e||o[a]===e)}},function(e,t,i){var r=i(9),n=i(15);e.exports=function(e,t,i){t in e?r.f(e,t,n(0,i)):e[t]=i}},function(e,t,r){var n=r(73),a=r(23)("iterator"),o=r(135);e.exports=r(7).getIteratorMethod=function(e){if(e!=i)return e[a]||e["@@iterator"]||o[n(e)]}},function(e,t,i){var r=i(23)("iterator"),n=!1;try{var a=[7][r]();a.return=function(){n=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:i=!0}},a[r]=function(){return o},e(a)}catch(e){}return i}},function(e,t,i){var r=i(6),n=i(155);r(r.S+r.F*i(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,i=new("function"==typeof this?this:Array)(t);t>e;)n(i,e,arguments[e++]);return i.length=t,i}})},function(e,t,r){var n=r(6),a=r(30),o=[].join;n(n.P+n.F*(r(31)!=Object||!r(160)(o)),"Array",{join:function(e){return o.call(a(this),e===i?",":e)}})},function(e,t,i){var r=i(5);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){var n=r(6),a=r(46),o=r(32),s=r(37),l=r(35),u=[].slice;n(n.P+n.F*r(5)(function(){a&&u.call(a)}),"Array",{slice:function(e,t){var r=l(this.length),n=o(this);if(t=t===i?r:t,"Array"==n)return u.call(this,e,t);for(var a=s(e,r),c=s(t,r),h=l(c-a),d=Array(h),f=0;f<h;f++)d[f]="String"==n?this.charAt(a+f):this[a+f];return d}})},function(e,t,r){var n=r(6),a=r(19),o=r(56),s=r(5),l=[].sort,u=[1,2,3];n(n.P+n.F*(s(function(){u.sort(i)})||!s(function(){u.sort(null)})||!r(160)(l)),"Array",{sort:function(e){return e===i?l.call(o(this)):l.call(o(this),a(e))}})},function(e,t,i){var r=i(6),n=i(164)(0),a=i(160)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},function(e,t,r){var n=r(18),a=r(31),o=r(56),s=r(35),l=r(165);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,h=4==e,d=6==e,f=5==e||d,p=t||l;return function(t,l,m){for(var v,g,y=o(t),M=a(y),E=n(l,m,3),b=s(M.length),x=0,I=r?p(t,b):u?p(t,0):i;b>x;x++)if((f||x in M)&&(v=M[x],g=E(v,x,y),e))if(r)I[x]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:I.push(v)}else if(h)return!1;return d?-1:c||h?h:I}}},function(e,t,i){var r=i(166);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,r){var n=r(11),a=r(43),o=r(23)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=i),n(t)&&null===(t=t[o])&&(t=i)),t===i?Array:t}},function(e,t,i){var r=i(6),n=i(164)(1);r(r.P+r.F*!i(160)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var r=i(6),n=i(164)(2);r(r.P+r.F*!i(160)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var r=i(6),n=i(164)(3);r(r.P+r.F*!i(160)([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var r=i(6),n=i(164)(4);r(r.P+r.F*!i(160)([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},function(e,t,i){var r=i(6),n=i(172);r(r.P+r.F*!i(160)([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},function(e,t,i){var r=i(19),n=i(56),a=i(31),o=i(35);e.exports=function(e,t,i,s,l){r(t);var u=n(e),c=a(u),h=o(u.length),d=l?h-1:0,f=l?-1:1;if(i<2)for(;;){if(d in c){s=c[d],d+=f;break}if(d+=f,l?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=f)d in c&&(s=t(s,c[d],d,u));return s}},function(e,t,i){var r=i(6),n=i(172);r(r.P+r.F*!i(160)([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},function(e,t,i){var r=i(6),n=i(34)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!i(160)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:n(this,e,arguments[1])}})},function(e,t,i){var r=i(6),n=i(30),a=i(36),o=i(35),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!i(160)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=n(this),i=o(t.length),r=i-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=i+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,i){var r=i(6);r(r.P,"Array",{copyWithin:i(177)}),i(178)("copyWithin")},function(e,t,r){var n=r(56),a=r(37),o=r(35);e.exports=[].copyWithin||function(e,t){var r=n(this),s=o(r.length),l=a(e,s),u=a(t,s),c=arguments.length>2?arguments[2]:i,h=Math.min((c===i?s:a(c,s))-u,s-l),d=1;for(u<l&&l<u+h&&(d=-1,u+=h-1,l+=h-1);h-- >0;)u in r?r[l]=r[u]:delete r[l],l+=d,u+=d;return r}},function(e,t,r){var n=r(23)("unscopables"),a=Array.prototype;a[n]==i&&r(8)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t,i){var r=i(6);r(r.P,"Array",{fill:i(180)}),i(178)("fill")},function(e,t,r){var n=r(56),a=r(37),o=r(35);e.exports=function(e){for(var t=n(this),r=o(t.length),s=arguments.length,l=a(s>1?arguments[1]:i,r),u=s>2?arguments[2]:i,c=u===i?r:a(u,r);c>l;)t[l++]=e;return t}},function(e,t,r){var n=r(6),a=r(164)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:i)}}),r(178)(o)},function(e,t,r){var n=r(6),a=r(164)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:i)}}),r(178)(o)},function(e,t,r){var n=r(178),a=r(184),o=r(135),s=r(30);e.exports=r(134)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=i,a(1)):"keys"==t?a(0,r):"values"==t?a(0,e[r]):a(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){i(186)("Array")},function(e,t,i){var r=i(2),n=i(9),a=i(4),o=i(23)("species");e.exports=function(e){var t=r[e];a&&t&&!t[o]&&n.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(2),a=r(80),o=r(9).f,s=r(48).f,l=r(128),u=r(188),c=n.RegExp,h=c,d=c.prototype,f=/a/g,p=/a/g,m=new c(f)!==f;if(r(4)&&(!m||r(5)(function(){return p[r(23)("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")}))){c=function(e,t){var r=this instanceof c,n=l(e),o=t===i;return!r&&n&&e.constructor===c&&o?e:a(m?new h(n&&!o?e.source:e,t):h((n=e instanceof c)?e.source:e,n&&o?u.call(e):t),r?this:d,c)};for(var v=s(h),g=0;v.length>g;)!function(e){e in c||o(c,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})}(v[g++]);d.constructor=c,c.prototype=d,r(16)(n,"RegExp",c)}r(186)("RegExp")},function(e,t,i){var r=i(10);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){r(190);var n=r(10),a=r(188),o=r(4),s="toString",l=/./[s],u=function(e){r(16)(RegExp.prototype,s,e,!0)};r(5)(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?u(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):i)}):l.name!=s&&u(function(){return l.call(this)})},function(e,t,i){i(4)&&"g"!=/./g.flags&&i(9).f(RegExp.prototype,"flags",{configurable:!0,get:i(188)})},function(e,t,r){r(192)("match",1,function(e,t,r){return[function(r){var n=e(this),a=r==i?i:r[t];return a!==i?a.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,i){var r=i(8),n=i(16),a=i(5),o=i(33),s=i(23);e.exports=function(e,t,i){var l=s(e),u=i(o,l,""[e]),c=u[0],h=u[1];a(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(n(String.prototype,e,c),r(RegExp.prototype,l,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,r){r(192)("replace",2,function(e,t,r){return[function(n,a){var o=e(this),s=n==i?i:n[t];return s!==i?s.call(n,o,a):r.call(String(o),n,a)},r]})},function(e,t,r){r(192)("search",1,function(e,t,r){return[function(r){var n=e(this),a=r==i?i:r[t];return a!==i?a.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(192)("split",2,function(e,t,n){var a=r(128),o=n,s=[].push,l="split",u="length",c="lastIndex";if("c"=="abbc"[l](/(b)*/)[1]||4!="test"[l](/(?:)/,-1)[u]||2!="ab"[l](/(?:ab)*/)[u]||4!="."[l](/(.?)(.?)/)[u]||"."[l](/()()/)[u]>1||""[l](/.?/)[u]){var h=/()??/.exec("")[1]===i;n=function(e,t){var r=String(this);if(e===i&&0===t)return[];if(!a(e))return o.call(r,e,t);var n,l,d,f,p,m=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,y=t===i?4294967295:t>>>0,M=new RegExp(e.source,v+"g");for(h||(n=new RegExp("^"+M.source+"$(?!\\s)",v));(l=M.exec(r))&&!((d=l.index+l[0][u])>g&&(m.push(r.slice(g,l.index)),!h&&l[u]>1&&l[0].replace(n,function(){for(p=1;p<arguments[u]-2;p++)arguments[p]===i&&(l[p]=i)}),l[u]>1&&l.index<r[u]&&s.apply(m,l.slice(1)),f=l[0][u],g=d,m[u]>=y));)M[c]===l.index&&M[c]++;return g===r[u]?!f&&M.test("")||m.push(""):m.push(r.slice(g)),m[u]>y?m.slice(0,y):m}}else"0"[l](i,0)[u]&&(n=function(e,t){return e===i&&0===t?[]:o.call(this,e,t)});return[function(r,a){var o=e(this),s=r==i?i:r[t];return s!==i?s.call(r,o,a):n.call(String(o),r,a)},n]})},function(e,t,r){var n,a,o,s=r(26),l=r(2),u=r(18),c=r(73),h=r(6),d=r(11),f=r(19),p=r(197),m=r(198),v=r(199),g=r(200).set,y=r(201)(),M="Promise",E=l.TypeError,b=l.process,x=l[M],b=l.process,I="process"==c(b),T=function(){},w=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[r(23)("species")]=function(e){e(T,T)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),C=function(e,t){return e===t||e===x&&t===o},S=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},A=function(e){return C(x,e)?new k(e):new a(e)},k=a=function(e){var t,r;this.promise=new e(function(e,n){if(t!==i||r!==i)throw E("Bad Promise constructor");t=e,r=n}),this.resolve=f(t),this.reject=f(r)},R=function(e){try{e()}catch(e){return{error:e}}},B=function(e,t){if(!e._n){e._n=!0;var i=e._c;y(function(){for(var r=e._v,n=1==e._s,a=0;i.length>a;)!function(t){var i,a,o=n?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{o?(n||(2==e._h&&P(e),e._h=1),!0===o?i=r:(u&&u.enter(),i=o(r),u&&u.exit()),i===t.promise?l(E("Promise-chain cycle")):(a=S(i))?a.call(i,s,l):s(i)):l(r)}catch(e){l(e)}}(i[a++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){g.call(l,function(){var t,r,n,a=e._v;if(O(e)&&(t=R(function(){I?b.emit("unhandledRejection",a,e):(r=l.onunhandledrejection)?r({promise:e,reason:a}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",a)}),e._h=I||O(e)?2:1),e._a=i,t)throw t.error})},O=function e(t){if(1==t._h)return!1;for(var i,r=t._a||t._c,n=0;r.length>n;)if(i=r[n++],i.fail||!e(i.promise))return!1;return!0},P=function(e){g.call(l,function(){var t;I?b.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),B(t,!0))},N=function e(t){var i,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw E("Promise can't be resolved itself");(i=S(t))?y(function(){var n={_w:r,_d:!1};try{i.call(t,u(e,n,1),u(D,n,1))}catch(e){D.call(n,e)}}):(r._v=t,r._s=1,B(r,!1))}catch(e){D.call({_w:r,_d:!1},e)}}};w||(x=function(e){p(this,x,M,"_h"),f(e),n.call(this);try{e(u(N,this,1),u(D,this,1))}catch(e){D.call(this,e)}},n=function(e){this._c=[],this._a=i,this._s=0,this._d=!1,this._v=i,this._h=0,this._n=!1},n.prototype=r(202)(x.prototype,{then:function(e,t){var r=A(v(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=I?b.domain:i,this._c.push(r),this._a&&this._a.push(r),this._s&&B(this,!1),r.promise},catch:function(e){return this.then(i,e)}}),k=function(){var e=new n;this.promise=e,this.resolve=u(N,e,1),this.reject=u(D,e,1)}),h(h.G+h.W+h.F*!w,{Promise:x}),r(22)(x,M),r(186)(M),o=r(7)[M],h(h.S+h.F*!w,M,{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!w),M,{resolve:function(e){if(e instanceof x&&C(e.constructor,this))return e;var t=A(this);return(0,t.resolve)(e),t.promise}}),h(h.S+h.F*!(w&&r(157)(function(e){x.all(e).catch(T)})),M,{all:function(e){var t=this,r=A(t),n=r.resolve,a=r.reject,o=R(function(){var r=[],o=0,s=1;m(e,!1,function(e){var l=o++,u=!1;r.push(i),s++,t.resolve(e).then(function(e){u||(u=!0,r[l]=e,--s||n(r))},a)}),--s||n(r)});return o&&a(o.error),r.promise},race:function(e){var t=this,i=A(t),r=i.reject,n=R(function(){m(e,!1,function(e){t.resolve(e).then(i.resolve,r)})});return n&&r(n.error),i.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||n!==i&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,i){var r=i(18),n=i(153),a=i(154),o=i(10),s=i(35),l=i(156),u={},c={},t=e.exports=function(e,t,i,h,d){var f,p,m,v,g=d?function(){return e}:l(e),y=r(i,h,t?2:1),M=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(f=s(e.length);f>M;M++)if((v=t?y(o(p=e[M])[0],p[1]):y(e[M]))===u||v===c)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=n(m,y,p.value,t))===u||v===c)return v};t.BREAK=u,t.RETURN=c},function(e,t,r){var n=r(10),a=r(19),o=r(23)("species");e.exports=function(e,t){var r,s=n(e).constructor;return s===i||(r=n(s)[o])==i?t:a(r)}},function(e,t,i){var r,n,a,o=i(18),s=i(76),l=i(46),u=i(13),c=i(2),h=c.process,d=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,m=0,v={},g="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},M=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},f=function(e){delete v[e]},"process"==i(32)(h)?r=function(e){h.nextTick(o(y,e,1))}:p?(n=new p,a=n.port2,n.port1.onmessage=M,r=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",M,!1)):r=g in u("script")?function(e){l.appendChild(u("script"))[g]=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:d,clear:f}},function(e,t,r){var n=r(2),a=r(200).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,l=n.Promise,u="process"==r(32)(s);e.exports=function(){var e,t,r,c=function(){var n,a;for(u&&(n=s.domain)&&n.exit();e;){a=e.fn,e=e.next;try{a()}catch(n){throw e?r():t=i,n}}t=i,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(o){var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),r=function(){d.data=h=!h}}else if(l&&l.resolve){var f=l.resolve();r=function(){f.then(c)}}else r=function(){a.call(n,c)};return function(n){var a={fn:n,next:i};t&&(t.next=a),e||(e=a,r()),t=a}}},function(e,t,i){var r=i(16);e.exports=function(e,t,i){for(var n in t)r(e,n,t[n],i);return e}},function(e,t,r){var n=r(204);e.exports=r(205)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:i)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(9).f,a=r(44),o=r(202),s=r(18),l=r(197),u=r(33),c=r(198),h=r(134),d=r(184),f=r(186),p=r(4),m=r(20).fastKey,v=p?"_s":"size",g=function(e,t){var i,r=m(t);if("F"!==r)return e._i[r];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,r,h){var d=e(function(e,n){l(e,d,t,"_i"),e._i=a(null),e._f=i,e._l=i,e[v]=0,n!=i&&c(n,r,e[h],e)});return o(d.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=i),delete t[r.i];e._f=e._l=i,e[v]=0},delete:function(e){var t=this,i=g(t,e);if(i){var r=i.n,n=i.p;delete t._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),t._f==i&&(t._f=r),t._l==i&&(t._l=n),t[v]--}return!!i},forEach:function(e){l(this,d,"forEach");for(var t,r=s(e,arguments.length>1?arguments[1]:i,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(this,e)}}),p&&n(d.prototype,"size",{get:function(){return u(this[v])}}),d},def:function(e,t,r){var n,a,o=g(e,t);return o?o.v=r:(e._l=o={i:a=m(t,!0),k:t,v:r,p:n=e._l,n:i,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==a&&(e._i[a]=o)),e},getEntry:g,setStrong:function(e,t,r){h(e,t,function(e,t){this._t=e,this._k=t,this._l=i},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?d(0,r.k):"values"==t?d(0,r.v):d(0,[r.k,r.v]):(e._t=i,d(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(2),a=r(6),o=r(16),s=r(202),l=r(20),u=r(198),c=r(197),h=r(11),d=r(5),f=r(157),p=r(22),m=r(80);e.exports=function(e,t,r,v,g,y){var M=n[e],E=M,b=g?"set":"add",x=E&&E.prototype,I={},T=function(e){var t=x[e];o(x,e,"delete"==e?function(e){return!(y&&!h(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!h(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!h(e)?i:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,i){return t.call(this,0===e?0:e,i),this})};if("function"==typeof E&&(y||x.forEach&&!d(function(){(new E).entries().next()}))){var w=new E,C=w[b](y?{}:-0,1)!=w,S=d(function(){w.has(1)}),A=f(function(e){new E(e)}),k=!y&&d(function(){for(var e=new E,t=5;t--;)e[b](t,t);return!e.has(-0)});A||(E=t(function(t,r){c(t,E,e);var n=m(new M,t,E);return r!=i&&u(r,g,n[b],n),n}),E.prototype=x,x.constructor=E),(S||k)&&(T("delete"),T("has"),g&&T("get")),(k||C)&&T(b),y&&x.clear&&delete x.clear}else E=v.getConstructor(t,e,g,b),s(E.prototype,r),l.NEED=!0;return p(E,e),I[e]=E,a(a.G+a.W+a.F*(E!=M),I),y||v.setStrong(E,e,g),E}},function(e,t,r){var n=r(204);e.exports=r(205)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:i)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},function(e,t,r){var n,a=r(164)(0),o=r(16),s=r(20),l=r(67),u=r(208),c=r(11),h=s.getWeak,d=Object.isExtensible,f=u.ufstore,p={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:i)}},v={get:function(e){if(c(e)){var t=h(e);return!0===t?f(this).get(e):t?t[this._i]:i}},set:function(e,t){return u.def(this,e,t)}},g=e.exports=r(205)("WeakMap",m,v,u,!0,!0);7!=(new g).set((Object.freeze||Object)(p),7).get(p)&&(n=u.getConstructor(m),l(n.prototype,v),s.NEED=!0,a(["delete","has","get","set"],function(e){var t=g.prototype,i=t[e];o(t,e,function(t,r){if(c(t)&&!d(t)){this._f||(this._f=new n);var a=this._f[e](t,r);return"set"==e?this:a}return i.call(this,t,r)})}))},function(e,t,r){var n=r(202),a=r(20).getWeak,o=r(10),s=r(11),l=r(197),u=r(198),c=r(164),h=r(3),d=c(5),f=c(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return d(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var i=g(this,e);i?i[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,o){var c=e(function(e,n){l(e,c,t,"_i"),e._i=p++,e._l=i,n!=i&&u(n,r,e[o],e)});return n(c.prototype,{delete:function(e){if(!s(e))return!1;var t=a(e);return!0===t?m(this).delete(e):t&&h(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=a(e);return!0===t?m(this).has(e):t&&h(t,this._i)}}),c},def:function(e,t,i){var r=a(o(t),!0);return!0===r?m(e).set(t,i):r[e._i]=i,e},ufstore:m}},function(e,t,r){var n=r(208);r(205)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:i)}},{add:function(e){return n.def(this,e,!0)}},n,!1,!0)},function(e,t,i){var r=i(6),n=i(19),a=i(10),o=(i(2).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!i(5)(function(){o(function(){})}),"Reflect",{apply:function(e,t,i){var r=n(e),l=a(i);return o?o(r,t,l):s.call(r,t,l)}})},function(e,t,i){var r=i(6),n=i(44),a=i(19),o=i(10),s=i(11),l=i(5),u=i(75),c=(i(2).Reflect||{}).construct,h=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),d=!l(function(){c(function(){})});r(r.S+r.F*(h||d),"Reflect",{construct:function(e,t){a(e),o(t);var i=arguments.length<3?e:a(arguments[2]);if(d&&!h)return c(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var l=i.prototype,f=n(s(l)?l:Object.prototype),p=Function.apply.call(e,f,t);return s(p)?p:f}})},function(e,t,i){var r=i(9),n=i(6),a=i(10),o=i(14);n(n.S+n.F*i(5)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,i){a(e),t=o(t,!0),a(i);try{return r.f(e,t,i),!0}catch(e){return!1}}})},function(e,t,i){var r=i(6),n=i(49).f,a=i(10);r(r.S,"Reflect",{deleteProperty:function(e,t){var i=n(a(e),t);return!(i&&!i.configurable)&&delete e[t]}})},function(e,t,r){var n=r(6),a=r(10),o=function(e){this._t=a(e),this._i=0;var t,i=this._k=[];for(t in e)i.push(t)};r(136)(o,"Object",function(){var e,t=this,r=t._k;do{if(t._i>=r.length)return{value:i,done:!0}}while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,r){function n(e,t){var r,l,h=arguments.length<3?e:arguments[2];return c(e)===h?e[t]:(r=a.f(e,t))?s(r,"value")?r.value:r.get!==i?r.get.call(h):i:u(l=o(e))?n(l,t,h):void 0}var a=r(49),o=r(57),s=r(3),l=r(6),u=r(11),c=r(10);l(l.S,"Reflect",{get:n})},function(e,t,i){var r=i(49),n=i(6),a=i(10);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(a(e),t)}})},function(e,t,i){var r=i(6),n=i(57),a=i(10);r(r.S,"Reflect",{getPrototypeOf:function(e){return n(a(e))}})},function(e,t,i){var r=i(6);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,i){var r=i(6),n=i(10),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return n(e),!a||a(e)}})},function(e,t,i){var r=i(6);r(r.S,"Reflect",{ownKeys:i(221)})},function(e,t,i){var r=i(48),n=i(41),a=i(10),o=i(2).Reflect;e.exports=o&&o.ownKeys||function(e){var t=r.f(a(e)),i=n.f;return i?t.concat(i(e)):t}},function(e,t,i){var r=i(6),n=i(10),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){n(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var u,f,p=arguments.length<4?e:arguments[3],m=o.f(h(e),t);if(!m){if(d(f=s(e)))return n(f,t,r,p);m=c(0)}return l(m,"value")?!(!1===m.writable||!d(p)||(u=o.f(p,t)||c(0),u.value=r,a.f(p,t,u),0)):m.set!==i&&(m.set.call(p,r),!0)}var a=r(9),o=r(49),s=r(57),l=r(3),u=r(6),c=r(15),h=r(10),d=r(11);u(u.S,"Reflect",{set:n})},function(e,t,i){var r=i(6),n=i(71);n&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(e){return!1}}})},function(e,t,i){var r=i(6);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,i){var r=i(6),n=i(56),a=i(14);r(r.P+r.F*i(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=n(this),i=a(t);return"number"!=typeof i||isFinite(i)?t.toISOString():null}})},function(e,t,i){var r=i(6),n=i(5),a=Date.prototype.getTime,o=function(e){return e>9?e:"0"+e};r(r.P+r.F*(n(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!n(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),i=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(i>99?i:"0"+o(i))+"Z"}})},function(e,t,i){var r=Date.prototype,n="Invalid Date",a="toString",o=r[a],s=r.getTime;new Date(NaN)+""!=n&&i(16)(r,a,function(){var e=s.call(this);return e===e?o.call(this):n})},function(e,t,i){var r=i(23)("toPrimitive"),n=Date.prototype;r in n||i(8)(n,r,i(230))},function(e,t,i){var r=i(10),n=i(14),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return n(r(this),e!=a)}},function(e,t,r){var n=r(6),a=r(232),o=r(233),s=r(10),l=r(37),u=r(35),c=r(11),h=r(2).ArrayBuffer,d=r(199),f=o.ArrayBuffer,p=o.DataView,m=a.ABV&&h.isView,v=f.prototype.slice,g=a.VIEW,y="ArrayBuffer";n(n.G+n.W+n.F*(h!==f),{ArrayBuffer:f}),n(n.S+n.F*!a.CONSTR,y,{isView:function(e){return m&&m(e)||c(e)&&g in e}}),n(n.P+n.U+n.F*r(5)(function(){return!new f(2).slice(1,i).byteLength}),y,{slice:function(e,t){if(v!==i&&t===i)return v.call(s(this),e);for(var r=s(this).byteLength,n=l(e,r),a=l(t===i?r:t,r),o=new(d(this,f))(u(a-n)),c=new p(this),h=new p(o),m=0;n<a;)h.setUint8(m++,c.getUint8(n++));return o}}),r(186)(y)},function(e,t,i){for(var r,n=i(2),a=i(8),o=i(17),s=o("typed_array"),l=o("view"),u=!(!n.ArrayBuffer||!n.DataView),c=u,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=n[d[h++]])?(a(r.prototype,s,!0),a(r.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,r){var n=r(2),a=r(4),o=r(26),s=r(232),l=r(8),u=r(202),c=r(5),h=r(197),d=r(36),f=r(35),p=r(48).f,m=r(9).f,v=r(180),g=r(22),y="ArrayBuffer",M="DataView",E="prototype",b="Wrong length!",x="Wrong index!",I=n[y],T=n[M],w=n.Math,C=n.RangeError,S=n.Infinity,A=I,k=w.abs,R=w.pow,B=w.floor,L=w.log,O=w.LN2,P="buffer",D="byteLength",N="byteOffset",_=a?"_b":P,H=a?"_l":D,F=a?"_o":N,U=function(e,t,i){var r,n,a,o=Array(i),s=8*i-t-1,l=(1<<s)-1,u=l>>1,c=23===t?R(2,-24)-R(2,-77):0,h=0,d=e<0||0===e&&1/e<0?1:0;for(e=k(e),e!=e||e===S?(n=e!=e?1:0,r=l):(r=B(L(e)/O),e*(a=R(2,-r))<1&&(r--,a*=2),e+=r+u>=1?c/a:c*R(2,1-u),e*a>=2&&(r++,a/=2),r+u>=l?(n=0,r=l):r+u>=1?(n=(e*a-1)*R(2,t),r+=u):(n=e*R(2,u-1)*R(2,t),r=0));t>=8;o[h++]=255&n,n/=256,t-=8);for(r=r<<t|n,s+=t;s>0;o[h++]=255&r,r/=256,s-=8);return o[--h]|=128*d,o},G=function(e,t,i){var r,n=8*i-t-1,a=(1<<n)-1,o=a>>1,s=n-7,l=i-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[l],l--,s-=8);if(0===c)c=1-o;else{if(c===a)return r?NaN:u?-S:S;r+=R(2,t),c-=o}return(u?-1:1)*r*R(2,c-t)},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},j=function(e){return[255&e]},V=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Y=function(e){return U(e,52,8)},Z=function(e){return U(e,23,4)},Q=function(e,t,i){m(e[E],t,{get:function(){return this[i]}})},X=function(e,t,i,r){var n=+i,a=d(n);if(n!=a||a<0||a+t>e[H])throw C(x);var o=e[_]._b,s=a+e[F],l=o.slice(s,s+t);return r?l:l.reverse()},J=function(e,t,i,r,n,a){var o=+i,s=d(o);if(o!=s||s<0||s+t>e[H])throw C(x);for(var l=e[_]._b,u=s+e[F],c=r(+n),h=0;h<t;h++)l[u+h]=c[a?h:t-h-1]},K=function(e,t){h(e,I,y);var i=+t,r=f(i);if(i!=r)throw C(b);return r};if(s.ABV){if(!c(function(){new I})||!c(function(){new I(.5)})){I=function(e){return new A(K(this,e))};for(var q,$=I[E]=A[E],ee=p(A),te=0;ee.length>te;)(q=ee[te++])in I||l(I,q,A[q]);o||($.constructor=I)}var ie=new T(new I(2)),re=T[E].setInt8;ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||u(T[E],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else I=function(e){var t=K(this,e);this._b=v.call(Array(t),0),this[H]=t},T=function(e,t,r){h(this,T,M),h(e,I,M);var n=e[H],a=d(t);if(a<0||a>n)throw C("Wrong offset!");if(r=r===i?n-a:f(r),a+r>n)throw C(b);this[_]=e,this[F]=a,this[H]=r},a&&(Q(I,D,"_l"),Q(T,P,"_b"),Q(T,D,"_l"),Q(T,N,"_o")),u(T[E],{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return z(X(this,4,e,arguments[1]))},getUint32:function(e){return z(X(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return G(X(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return G(X(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){J(this,1,e,j,t)},setUint8:function(e,t){J(this,1,e,j,t)},setInt16:function(e,t){J(this,2,e,V,t,arguments[2])},setUint16:function(e,t){J(this,2,e,V,t,arguments[2])},setInt32:function(e,t){J(this,4,e,W,t,arguments[2])},setUint32:function(e,t){J(this,4,e,W,t,arguments[2])},setFloat32:function(e,t){J(this,4,e,Z,t,arguments[2])},setFloat64:function(e,t){J(this,8,e,Y,t,arguments[2])}});g(I,y),g(T,M),l(T[E],s.VIEW,!0),t[y]=I,t[M]=T},function(e,t,i){var r=i(6);r(r.G+r.W+r.F*!i(232).ABV,{DataView:i(233).DataView})},function(e,t,i){i(236)("Int8",1,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,r){if(r(4)){var n=r(26),a=r(2),o=r(5),s=r(6),l=r(232),u=r(233),c=r(18),h=r(197),d=r(15),f=r(8),p=r(202),m=r(36),v=r(35),g=r(37),y=r(14),M=r(3),E=r(69),b=r(73),x=r(11),I=r(56),T=r(154),w=r(44),C=r(57),S=r(48).f,A=r(156),k=r(17),R=r(23),B=r(164),L=r(34),O=r(199),P=r(183),D=r(135),N=r(157),_=r(186),H=r(180),F=r(177),U=r(9),G=r(49),z=U.f,j=G.f,V=a.RangeError,W=a.TypeError,Y=a.Uint8Array,Z="ArrayBuffer",Q="Shared"+Z,X="BYTES_PER_ELEMENT",J="prototype",K=Array[J],q=u.ArrayBuffer,$=u.DataView,ee=B(0),te=B(2),ie=B(3),re=B(4),ne=B(5),ae=B(6),oe=L(!0),se=L(!1),le=P.values,ue=P.keys,ce=P.entries,he=K.lastIndexOf,de=K.reduce,fe=K.reduceRight,pe=K.join,me=K.sort,ve=K.slice,ge=K.toString,ye=K.toLocaleString,Me=R("iterator"),Ee=R("toStringTag"),be=k("typed_constructor"),xe=k("def_constructor"),Ie=l.CONSTR,Te=l.TYPED,we=l.VIEW,Ce="Wrong length!",Se=B(1,function(e,t){return Oe(O(e,e[xe]),t)}),Ae=o(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),ke=!!Y&&!!Y[J].set&&o(function(){new Y(1).set({})}),Re=function(e,t){if(e===i)throw W(Ce);var r=+e,n=v(e);if(t&&!E(r,n))throw V(Ce);return n},Be=function(e,t){var i=m(e);if(i<0||i%t)throw V("Wrong offset!");return i},Le=function(e){if(x(e)&&Te in e)return e;throw W(e+" is not a typed array!")},Oe=function(e,t){
if(!(x(e)&&be in e))throw W("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return De(O(e,e[xe]),t)},De=function(e,t){for(var i=0,r=t.length,n=Oe(e,r);r>i;)n[i]=t[i++];return n},Ne=function(e,t,i){z(e,t,{get:function(){return this._d[i]}})},_e=function(e){var t,r,n,a,o,s,l=I(e),u=arguments.length,h=u>1?arguments[1]:i,d=h!==i,f=A(l);if(f!=i&&!T(f)){for(s=f.call(l),n=[],t=0;!(o=s.next()).done;t++)n.push(o.value);l=n}for(d&&u>2&&(h=c(h,arguments[2],2)),t=0,r=v(l.length),a=Oe(this,r);r>t;t++)a[t]=d?h(l[t],t):l[t];return a},He=function(){for(var e=0,t=arguments.length,i=Oe(this,t);t>e;)i[e]=arguments[e++];return i},Fe=!!Y&&o(function(){ye.call(new Y(1))}),Ue=function(){return ye.apply(Fe?ve.call(Le(this)):Le(this),arguments)},Ge={copyWithin:function(e,t){return F.call(Le(this),e,t,arguments.length>2?arguments[2]:i)},every:function(e){return re(Le(this),e,arguments.length>1?arguments[1]:i)},fill:function(e){return H.apply(Le(this),arguments)},filter:function(e){return Pe(this,te(Le(this),e,arguments.length>1?arguments[1]:i))},find:function(e){return ne(Le(this),e,arguments.length>1?arguments[1]:i)},findIndex:function(e){return ae(Le(this),e,arguments.length>1?arguments[1]:i)},forEach:function(e){ee(Le(this),e,arguments.length>1?arguments[1]:i)},indexOf:function(e){return se(Le(this),e,arguments.length>1?arguments[1]:i)},includes:function(e){return oe(Le(this),e,arguments.length>1?arguments[1]:i)},join:function(e){return pe.apply(Le(this),arguments)},lastIndexOf:function(e){return he.apply(Le(this),arguments)},map:function(e){return Se(Le(this),e,arguments.length>1?arguments[1]:i)},reduce:function(e){return de.apply(Le(this),arguments)},reduceRight:function(e){return fe.apply(Le(this),arguments)},reverse:function(){for(var e,t=this,i=Le(t).length,r=Math.floor(i/2),n=0;n<r;)e=t[n],t[n++]=t[--i],t[i]=e;return t},some:function(e){return ie(Le(this),e,arguments.length>1?arguments[1]:i)},sort:function(e){return me.call(Le(this),e)},subarray:function(e,t){var r=Le(this),n=r.length,a=g(e,n);return new(O(r,r[xe]))(r.buffer,r.byteOffset+a*r.BYTES_PER_ELEMENT,v((t===i?n:g(t,n))-a))}},ze=function(e,t){return Pe(this,ve.call(Le(this),e,t))},je=function(e){Le(this);var t=Be(arguments[1],1),i=this.length,r=I(e),n=v(r.length),a=0;if(n+t>i)throw V(Ce);for(;a<n;)this[t+a]=r[a++]},Ve={entries:function(){return ce.call(Le(this))},keys:function(){return ue.call(Le(this))},values:function(){return le.call(Le(this))}},We=function(e,t){return x(e)&&e[Te]&&"symbol"!=(void 0===t?"undefined":_typeof(t))&&t in e&&String(+t)==String(t)},Ye=function(e,t){return We(e,t=y(t,!0))?d(2,e[t]):j(e,t)},Ze=function(e,t,i){return!(We(e,t=y(t,!0))&&x(i)&&M(i,"value"))||M(i,"get")||M(i,"set")||i.configurable||M(i,"writable")&&!i.writable||M(i,"enumerable")&&!i.enumerable?z(e,t,i):(e[t]=i.value,e)};Ie||(G.f=Ye,U.f=Ze),s(s.S+s.F*!Ie,"Object",{getOwnPropertyDescriptor:Ye,defineProperty:Ze}),o(function(){ge.call({})})&&(ge=ye=function(){return pe.call(this)});var Qe=p({},Ge);p(Qe,Ve),f(Qe,Me,Ve.values),p(Qe,{slice:ze,set:je,constructor:function(){},toString:ge,toLocaleString:Ue}),Ne(Qe,"buffer","b"),Ne(Qe,"byteOffset","o"),Ne(Qe,"byteLength","l"),Ne(Qe,"length","e"),z(Qe,Ee,{get:function(){return this[Te]}}),e.exports=function(e,t,r,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",d="Uint8Array"!=c,p="get"+e,m="set"+e,g=a[c],y=g||{},M=g&&C(g),E=!g||!l.ABV,I={},T=g&&g[J],A=function(e,i){var r=e._d;return r.v[p](i*t+r.o,Ae)},k=function(e,i,r){var n=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),n.v[m](i*t+n.o,r,Ae)},R=function(e,t){z(e,t,{get:function(){return A(this,t)},set:function(e){return k(this,t,e)},enumerable:!0})};E?(g=r(function(e,r,n,a){h(e,g,c,"_d");var o,s,l,u,d=0,p=0;if(x(r)){if(!(r instanceof q||(u=b(r))==Z||u==Q))return Te in r?De(g,r):_e.call(g,r);o=r,p=Be(n,t);var m=r.byteLength;if(a===i){if(m%t)throw V(Ce);if((s=m-p)<0)throw V(Ce)}else if((s=v(a)*t)+p>m)throw V(Ce);l=s/t}else l=Re(r,!0),s=l*t,o=new q(s);for(f(e,"_d",{b:o,o:p,l:s,e:l,v:new $(o)});d<l;)R(e,d++)}),T=g[J]=w(Qe),f(T,"constructor",g)):N(function(e){new g(null),new g(e)},!0)||(g=r(function(e,r,n,a){h(e,g,c);var o;return x(r)?r instanceof q||(o=b(r))==Z||o==Q?a!==i?new y(r,Be(n,t),a):n!==i?new y(r,Be(n,t)):new y(r):Te in r?De(g,r):_e.call(g,r):new y(Re(r,d))}),ee(M!==Function.prototype?S(y).concat(S(M)):S(y),function(e){e in g||f(g,e,y[e])}),g[J]=T,n||(T.constructor=g));var B=T[Me],L=!!B&&("values"==B.name||B.name==i),O=Ve.values;f(g,be,!0),f(T,Te,c),f(T,we,!0),f(T,xe,g),(u?new g(1)[Ee]==c:Ee in T)||z(T,Ee,{get:function(){return c}}),I[c]=g,s(s.G+s.W+s.F*(g!=y),I),s(s.S,c,{BYTES_PER_ELEMENT:t,from:_e,of:He}),X in T||f(T,X,t),s(s.P,c,Ge),_(c),s(s.P+s.F*ke,c,{set:je}),s(s.P+s.F*!L,c,Ve),s(s.P+s.F*(T.toString!=ge),c,{toString:ge}),s(s.P+s.F*o(function(){new g(1).slice()}),c,{slice:ze}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!o(function(){T.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),D[c]=L?B:O,n||L||f(T,Me,O)}}else e.exports=function(){}},function(e,t,i){i(236)("Uint8",1,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Uint8",1,function(e){return function(t,i,r){return e(this,t,i,r)}},!0)},function(e,t,i){i(236)("Int16",2,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Uint16",2,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Int32",4,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Uint32",4,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Float32",4,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,i){i(236)("Float64",8,function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t,r){var n=r(6),a=r(34)(!0);n(n.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:i)}}),r(178)("includes")},function(e,t,i){var r=i(6),n=i(125)(!0);r(r.P,"String",{at:function(e){return n(this,e)}})},function(e,t,r){var n=r(6),a=r(248);n(n.P,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:i,!0)}})},function(e,t,r){var n=r(35),a=r(85),o=r(33);e.exports=function(e,t,r,s){var l=String(o(e)),u=l.length,c=r===i?" ":String(r),h=n(t);if(h<=u||""==c)return l;var d=h-u,f=a.call(c,Math.ceil(d/c.length));return f.length>d&&(f=f.slice(0,d)),s?f+l:l+f}},function(e,t,r){var n=r(6),a=r(248);n(n.P,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:i,!1)}})},function(e,t,i){i(81)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,i){i(81)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,i){var r=i(6),n=i(33),a=i(35),o=i(128),s=i(188),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};i(136)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(n(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),i="flags"in l?String(e.flags):s.call(e),r=new RegExp(e.source,~i.indexOf("g")?i:"g"+i);return r.lastIndex=a(e.lastIndex),new u(r,t)}})},function(e,t,i){i(25)("asyncIterator")},function(e,t,i){i(25)("observable")},function(e,t,i){var r=i(6),n=i(221),a=i(30),o=i(49),s=i(155);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,i=a(e),r=o.f,l=n(i),u={},c=0;l.length>c;)s(u,t=l[c++],r(i,t));return u}})},function(e,t,i){var r=i(6),n=i(257)(!1);r(r.S,"Object",{values:function(e){return n(e)}})},function(e,t,i){var r=i(28),n=i(30),a=i(42).f;e.exports=function(e){return function(t){for(var i,o=n(t),s=r(o),l=s.length,u=0,c=[];l>u;)a.call(o,i=s[u++])&&c.push(e?[i,o[i]]:o[i]);return c}}},function(e,t,i){var r=i(6),n=i(257)(!0);r(r.S,"Object",{entries:function(e){return n(e)}})},function(e,t,i){var r=i(6),n=i(56),a=i(19),o=i(9);i(4)&&r(r.P+i(260),"Object",{__defineGetter__:function(e,t){o.f(n(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,i){e.exports=i(26)||!i(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete i(2)[e]})},function(e,t,i){var r=i(6),n=i(56),a=i(19),o=i(9);i(4)&&r(r.P+i(260),"Object",{__defineSetter__:function(e,t){o.f(n(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,i){var r=i(6),n=i(56),a=i(14),o=i(57),s=i(49).f;i(4)&&r(r.P+i(260),"Object",{__lookupGetter__:function(e){var t,i=n(this),r=a(e,!0);do{if(t=s(i,r))return t.get}while(i=o(i))}})},function(e,t,i){var r=i(6),n=i(56),a=i(14),o=i(57),s=i(49).f;i(4)&&r(r.P+i(260),"Object",{__lookupSetter__:function(e){var t,i=n(this),r=a(e,!0);do{if(t=s(i,r))return t.set}while(i=o(i))}})},function(e,t,i){var r=i(6);r(r.P+r.R,"Map",{toJSON:i(265)("Map")})},function(e,t,i){var r=i(73),n=i(266);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,i){var r=i(198);e.exports=function(e,t){var i=[];return r(e,!1,i.push,i,t),i}},function(e,t,i){var r=i(6);r(r.P+r.R,"Set",{toJSON:i(265)("Set")})},function(e,t,i){var r=i(6);r(r.S,"System",{global:i(2)})},function(e,t,i){var r=i(6),n=i(32);r(r.S,"Error",{isError:function(e){return"Error"===n(e)}})},function(e,t,i){var r=i(6);r(r.S,"Math",{iaddh:function(e,t,i,r){var n=e>>>0,a=t>>>0,o=i>>>0;return a+(r>>>0)+((n&o|(n|o)&~(n+o>>>0))>>>31)|0}})},function(e,t,i){var r=i(6);r(r.S,"Math",{isubh:function(e,t,i,r){var n=e>>>0,a=t>>>0,o=i>>>0;return a-(r>>>0)-((~n&o|~(n^o)&n-o>>>0)>>>31)|0}})},function(e,t,i){var r=i(6);r(r.S,"Math",{imulh:function(e,t){var i=65535,r=+e,n=+t,a=r&i,o=n&i,s=r>>16,l=n>>16,u=(s*o>>>0)+(a*o>>>16);return s*l+(u>>16)+((a*l>>>0)+(u&i)>>16)}})},function(e,t,i){var r=i(6);r(r.S,"Math",{umulh:function(e,t){var i=65535,r=+e,n=+t,a=r&i,o=n&i,s=r>>>16,l=n>>>16,u=(s*o>>>0)+(a*o>>>16);return s*l+(u>>>16)+((a*l>>>0)+(u&i)>>>16)}})},function(e,t,i){var r=i(275),n=i(10),a=r.key,o=r.set;r.exp({defineMetadata:function(e,t,i,r){o(e,t,n(i),a(r))}})},function(e,t,r){var n=r(203),a=r(6),o=r(21)("metadata"),s=o.store||(o.store=new(r(207))),l=function(e,t,r){var a=s.get(e);if(!a){if(!r)return i;s.set(e,a=new n)}var o=a.get(t);if(!o){if(!r)return i;a.set(t,o=new n)}return o},u=function(e,t,r){var n=l(t,r,!1);return n!==i&&n.has(e)},c=function(e,t,r){var n=l(t,r,!1);return n===i?i:n.get(e)},h=function(e,t,i,r){l(i,r,!0).set(e,t)},d=function(e,t){var i=l(e,t,!1),r=[];return i&&i.forEach(function(e,t){r.push(t)}),r},f=function(e){return e===i||"symbol"==(void 0===e?"undefined":_typeof(e))?e:String(e)},p=function(e){a(a.S,"Reflect",e)};e.exports={store:s,map:l,has:u,get:c,set:h,keys:d,key:f,exp:p}},function(e,t,r){var n=r(275),a=r(10),o=n.key,s=n.map,l=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?i:o(arguments[2]),n=s(a(t),r,!1);if(n===i||!n.delete(e))return!1;if(n.size)return!0;var u=l.get(t);return u.delete(r),!!u.size||l.delete(t)}})},function(e,t,r){var n=r(275),a=r(10),o=r(57),s=n.has,l=n.get,u=n.key,c=function e(t,r,n){if(s(t,r,n))return l(t,r,n);var a=o(r);return null!==a?e(t,a,n):i};n.exp({getMetadata:function(e,t){return c(e,a(t),arguments.length<3?i:u(arguments[2]))}})},function(e,t,r){var n=r(206),a=r(266),o=r(275),s=r(10),l=r(57),u=o.keys,c=o.key,h=function e(t,i){var r=u(t,i),o=l(t);if(null===o)return r;var s=e(o,i);return s.length?r.length?a(new n(r.concat(s))):s:r};o.exp({getMetadataKeys:function(e){return h(s(e),arguments.length<2?i:c(arguments[1]))}})},function(e,t,r){var n=r(275),a=r(10),o=n.get,s=n.key;n.exp({getOwnMetadata:function(e,t){return o(e,a(t),arguments.length<3?i:s(arguments[2]))}})},function(e,t,r){var n=r(275),a=r(10),o=n.keys,s=n.key;n.exp({getOwnMetadataKeys:function(e){return o(a(e),arguments.length<2?i:s(arguments[1]))}})},function(e,t,r){var n=r(275),a=r(10),o=r(57),s=n.has,l=n.key,u=function e(t,i,r){if(s(t,i,r))return!0;var n=o(i);return null!==n&&e(t,n,r)};n.exp({hasMetadata:function(e,t){return u(e,a(t),arguments.length<3?i:l(arguments[2]))}})},function(e,t,r){var n=r(275),a=r(10),o=n.has,s=n.key;n.exp({hasOwnMetadata:function(e,t){return o(e,a(t),arguments.length<3?i:s(arguments[2]))}})},function(e,t,r){var n=r(275),a=r(10),o=r(19),s=n.key,l=n.set;n.exp({metadata:function(e,t){return function(r,n){l(e,t,(n!==i?a:o)(r),s(n))}}})},function(e,t,i){var r=i(6),n=i(201)(),a=i(2).process,o="process"==i(32)(a);r(r.G,{asap:function(e){var t=o&&a.domain;n(t?t.bind(e):e)}})},function(e,t,r){var n=r(6),a=r(2),o=r(7),s=r(201)(),l=r(23)("observable"),u=r(19),c=r(10),h=r(197),d=r(202),f=r(8),p=r(198),m=p.RETURN,v=function(e){return null==e?i:u(e)},g=function(e){var t=e._c;t&&(e._c=i,t())},y=function(e){return e._o===i},M=function(e){y(e)||(e._o=i,g(e))},E=function(e,t){c(e),this._c=i,this._o=e,e=new b(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(t){return void e.error(t)}y(this)&&g(this)};E.prototype=d({},{unsubscribe:function(){M(this)}});var b=function(e){this._s=e};b.prototype=d({},{next:function(e){var t=this._s;if(!y(t)){var i=t._o;try{var r=v(i.next);if(r)return r.call(i,e)}catch(e){try{M(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var r=t._o;t._o=i;try{var n=v(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!y(t)){var r=t._o;t._o=i;try{var n=v(r.complete);e=n?n.call(r,e):i}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var x=function(e){h(this,x,"Observable","_f")._f=u(e)};d(x.prototype,{subscribe:function(e){return new E(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||a.Promise)(function(i,r){u(e);var n=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:i})})}}),d(x,{from:function(e){var t="function"==typeof this?this:x,i=v(c(e)[l]);if(i){var r=c(i.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var i=!1;return s(function(){if(!i){try{if(p(e,!1,function(e){if(t.next(e),i)return m})===m)return}catch(e){if(i)throw e;return void t.error(e)}t.complete()}}),function(){i=!0}})},of:function(){for(var e=0,t=arguments.length,i=Array(t);e<t;)i[e]=arguments[e++];return new("function"==typeof this?this:x)(function(e){var t=!1;return s(function(){if(!t){for(var r=0;r<i.length;++r)if(e.next(i[r]),t)return;e.complete()}}),function(){t=!0}})}}),f(x.prototype,l,function(){return this}),n(n.G,{Observable:x}),r(186)("Observable")},function(e,t,i){var r=i(6),n=i(200);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(e,t,i){for(var r=i(183),n=i(16),a=i(2),o=i(8),s=i(135),l=i(23),u=l("iterator"),c=l("toStringTag"),h=s.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var p,m=d[f],v=a[m],g=v&&v.prototype;if(g){g[u]||o(g,u,h),g[c]||o(g,c,m),s[m]=h;for(p in r)g[p]||n(g,p,r[p],!0)}}},function(e,t,i){var r=i(2),n=i(6),a=i(76),o=i(289),s=r.navigator,l=!!s&&/MSIE .\./.test(s.userAgent),u=function(e){return l?function(t,i){return e(a(o,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),i)}:e};n(n.G+n.B+n.F*l,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,i){var r=i(290),n=i(76),a=i(19);e.exports=function(){for(var e=a(this),t=arguments.length,i=Array(t),o=0,s=r._,l=!1;t>o;)(i[o]=arguments[o++])===s&&(l=!0);return function(){var r,a=this,o=arguments.length,u=0,c=0;if(!l&&!o)return n(e,i,a);if(r=i.slice(),l)for(;t>u;u++)r[u]===s&&(r[u]=arguments[c++]);for(;o>c;)r.push(arguments[c++]);return n(e,r,a)}}},function(e,t,i){e.exports=i(2)},function(e,t,r){function n(e){var t=p(null);return e!=i&&(b(e)?E(e,!0,function(e,i){t[e]=i}):f(t,e)),t}function a(e,t,i){M(t);var r,n,a=w(e),o=v(a),s=o.length,l=0;if(arguments.length<3){if(!s)throw TypeError("Reduce of empty object with no initial value");r=a[o[l++]]}else r=Object(i);for(;s>l;)S(a,n=o[l++])&&(r=t(r,a[n],n,e));return r}function o(e,t){return(t==t?y(e,t):k(e,function(e){return e!=e}))!==i}function s(e,t){if(S(e,t))return e[t]}function l(e,t,i){return C&&t in Object?g.f(e,t,d(0,i)):e[t]=i,e}function u(e){return T(e)&&m(e)===n.prototype}var c=r(18),h=r(6),d=r(15),f=r(67),p=r(44),m=r(57),v=r(28),g=r(9),y=r(27),M=r(19),E=r(198),b=r(292),x=r(136),I=r(184),T=r(11),w=r(30),C=r(4),S=r(3),A=function(e){var t=1==e,r=4==e;return function(a,o,s){var l,u,h,d=c(o,s,3),f=w(a),p=t||7==e||2==e?new("function"==typeof this?this:n):i;for(l in f)if(S(f,l)&&(u=f[l],h=d(u,l,a),e))if(t)p[l]=h;else if(h)switch(e){case 2:p[l]=u;break;case 3:return!0;case 5:return u;case 6:return l;case 7:p[h[0]]=h[1]}else if(r)return!1;return 3==e||r?r:p}},k=A(6),R=function(e){return function(t){return new B(t,e)}},B=function(e,t){this._t=w(e),this._a=v(e),this._i=0,this._k=t};x(B,"Dict",function(){var e,t=this,r=t._t,n=t._a,a=t._k;do{if(t._i>=n.length)return t._t=i,I(1)}while(!S(r,e=n[t._i++]));return"keys"==a?I(0,e):"values"==a?I(0,r[e]):I(0,[e,r[e]])}),n.prototype=null,h(h.G+h.F,{Dict:n}),h(h.S,"Dict",{keys:R("keys"),values:R("values"),entries:R("entries"),forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findKey:k,mapPairs:A(7),reduce:a,keyOf:y,includes:o,has:S,get:s,set:l,isDict:u})},function(e,t,r){var n=r(73),a=r(23)("iterator"),o=r(135);e.exports=r(7).isIterable=function(e){var t=Object(e);return t[a]!==i||"@@iterator"in t||o.hasOwnProperty(n(t))}},function(e,t,i){var r=i(10),n=i(156);e.exports=i(7).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,i){var r=i(2),n=i(7),a=i(6),o=i(289);a(a.G+a.F,{delay:function(e){return new(n.Promise||r.Promise)(function(t){setTimeout(o.call(t,!0),e)})}})},function(e,t,i){var r=i(290),n=i(6);i(7)._=r._=r._||{},n(n.P+n.F,"Function",{part:i(289)})},function(e,t,i){var r=i(6);r(r.S+r.F,"Object",{isObject:i(11)})},function(e,t,i){var r=i(6);r(r.S+r.F,"Object",{classof:i(73)})},function(e,t,i){var r=i(6),n=i(299);r(r.S+r.F,"Object",{define:n})},function(e,t,i){var r=i(9),n=i(49),a=i(221),o=i(30);e.exports=function(e,t){for(var i,s=a(o(t)),l=s.length,u=0;l>u;)r.f(e,i=s[u++],n.f(t,i));return e}},function(e,t,i){var r=i(6),n=i(299),a=i(44);r(r.S+r.F,"Object",{make:function(e,t){return n(a(e),t)}})},function(e,t,r){r(134)(Number,"Number",function(e){this._l=+e,this._i=0},function(){var e=this._i++,t=!(e<this._l);return{done:t,value:t?i:e}})},function(e,t,i){var r=i(6),n=i(303)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return n(e)}})},function(e,t){e.exports=function(e,t){var i=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,i)}}},function(e,t,i){var r=i(6),n=i(303)(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});r(r.P+r.F,"String",{escapeHTML:function(){return n(this)}})},function(e,t,i){var r=i(6),n=i(303)(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});r(r.P+r.F,"String",{unescapeHTML:function(){return n(this)}})}]),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.core=e}(1,1);var l=Symbol("newer"),u=Symbol("older");e.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[l]&&(e===this.oldest&&(this.oldest=e[l]),e[l][u]=e[u]),e[u]&&(e[u][l]=e[l]),e[l]=void 0,e[u]=this.newest,this.newest&&(this.newest[l]=e),this.newest=e)},e.prototype.assign=function(e){var i=void 0,r=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var n=e[Symbol.iterator](),a=n.next();!a.done;a=n.next()){var o=new t(a.value[0],a.value[1]);if(this._keymap.set(o.key,o),i?(i[l]=o,o[u]=i):this.oldest=o,i=o,0==r--)throw new Error("overflow")}this.newest=i,this.size=this._keymap.size},e.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},e.prototype.set=function(e,i){var r=this._keymap.get(e);return r?(r.value=i,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new t(e,i)),this.newest?(this.newest[l]=r,r[u]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)},e.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[l]?(this.oldest=this.oldest[l],this.oldest[u]=void 0):(this.oldest=void 0,this.newest=void 0),e[l]=e[u]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},e.prototype.find=function(e){var t=this._keymap.get(e);return t?t.value:void 0},e.prototype.has=function(e){return this._keymap.has(e)},e.prototype.delete=function(e){var t=this._keymap.get(e);if(t)return this._keymap.delete(t.key),t[l]&&t[u]?(t[u][l]=t[l],t[l][u]=t[u]):t[l]?(t[l][u]=void 0,this.oldest=t[l]):t[u]?(t[u][l]=void 0,this.newest=t[u]):this.oldest=this.newest=void 0,this.size--,t.value},e.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},i.prototype[Symbol.iterator]=function(){return this},i.prototype.next=function(){var e=this.entry;return e?(this.entry=e[l],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){var e=this.entry;return e?(this.entry=e[l],{done:!1,value:e.key}):{done:!0,value:void 0}},n.prototype[Symbol.iterator]=function(){return this},n.prototype.next=function(){var e=this.entry;return e?(this.entry=e[l],{done:!1,value:e.value}):{done:!0,value:void 0}},e.prototype.keys=function(){return new r(this.oldest)},e.prototype.values=function(){return new n(this.oldest)},e.prototype.entries=function(){return this},e.prototype[Symbol.iterator]=function(){return new i(this.oldest)},e.prototype.forEach=function(e,t){"object"!==(void 0===t?"undefined":_typeof(t))&&(t=this);for(var i=this.oldest;i;)e.call(t,i.value,i.key,this),i=i[l]},e.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,i=this.oldest;i;)e[t++]={key:i.key,value:i.value},i=i[l];return e},e.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t[l])&&(e+=" < ");return e},function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE=e.THREE||{})}(window,function(t){function i(){}function r(e,t){this.x=e||0,this.y=t||0}function n(e,t,i,a,o,s,l,u,c,h){Object.defineProperty(this,"id",{value:Vs++}),this.uuid=js.generateUUID(),this.name="",this.image=void 0!==e?e:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:n.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:mo,this.wrapT=void 0!==a?a:mo,this.magFilter=void 0!==o?o:Eo,this.minFilter=void 0!==s?s:xo,this.anisotropy=void 0!==c?c:1,this.format=void 0!==l?l:_o,this.type=void 0!==u?u:Io,this.offset=new r(0,0),this.repeat=new r(1,1),this.rotateMatrix=new ie,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:Ps,this.version=0,this.onUpdate=null}function a(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1}function o(e,t,i){this.uuid=js.generateUUID(),this.width=e,this.height=t,this.scissor=new a(0,0,e,t),this.scissorTest=!1,this.viewport=new a(0,0,e,t),i=i||{},void 0===i.minFilter&&(i.minFilter=Eo),this.texture=new n(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function s(e,t,i){o.call(this,e,t,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function l(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1}function u(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function c(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,i,r,a,o,s,l,u,c,h,d){n.call(this,null,o,s,l,u,c,r,a,h,d),this.image={data:e,width:t,height:i},this.magFilter=void 0!==u?u:go,this.minFilter=void 0!==c?c:go,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function d(e,t,i,r,a,o,s,l,u,c){e=void 0!==e?e:[],t=void 0!==t?t:oo,n.call(this,e,t,i,r,a,o,s,l,u,c),this.flipY=!1}function f(){this.seq=[],this.map={}}function p(e,t,i){var r=e[0];if(r<=0||r>0)return e;var n=t*i,a=Zs[n];if(void 0===a&&(a=new Float32Array(n),Zs[n]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=i,e[o].toArray(a,s)}return a}function m(e,t){var i=Qs[t];void 0===i&&(i=new Int32Array(t),Qs[t]=i);for(var r=0;r!==t;++r)i[r]=e.allocTextureUnit();return i}function v(e,t){e.uniform1f(this.addr,t)}function g(e,t){e.uniform1i(this.addr,t)}function y(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function M(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function E(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function b(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function x(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Js.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Js))}function I(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Xs.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Xs))}function T(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r),i.setTexture2D(t||Ws,r)}function w(e,t,i){var r=i.allocTextureUnit();e.uniform1i(this.addr,r),i.setTextureCube(t||Ys,r)}function C(e,t){e.uniform2iv(this.addr,t)}function S(e,t){e.uniform3iv(this.addr,t)}function A(e,t){e.uniform4iv(this.addr,t)}function k(e){switch(e){case 5126:return v;case 35664:return y;case 35665:return M;case 35666:return E;case 35674:return b;case 35675:return x;case 35676:return I;case 35678:return T;case 35680:return w;case 5124:case 35670:return g;case 35667:case 35671:return C;case 35668:case 35672:return S;case 35669:case 35673:return A}}function R(e,t){e.uniform1fv(this.addr,t)}function B(e,t){e.uniform1iv(this.addr,t)}function L(e,t){e.uniform2fv(this.addr,p(t,this.size,2))}function O(e,t){e.uniform3fv(this.addr,p(t,this.size,3))}function P(e,t){e.uniform4fv(this.addr,p(t,this.size,4))}function D(e,t){e.uniformMatrix2fv(this.addr,!1,p(t,this.size,4))}function N(e,t){e.uniformMatrix3fv(this.addr,!1,p(t,this.size,9))}function _(e,t){e.uniformMatrix4fv(this.addr,!1,p(t,this.size,16))}function H(e,t,i){var r=t.length,n=m(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a)i.setTexture2D(t[a]||Ws,n[a])}function F(e,t,i){var r=t.length,n=m(i,r);e.uniform1iv(this.addr,n);for(var a=0;a!==r;++a)i.setTextureCube(t[a]||Ys,n[a])}function U(e){switch(e){case 5126:return R;case 35664:return L;case 35665:return O;case 35666:return P;case 35674:return D;case 35675:return N;case 35676:return _;case 35678:return H;case 35680:return F;case 5124:case 35670:return B;case 35667:case 35671:return C;case 35668:case 35672:return S;case 35669:case 35673:return A}}function G(e,t,i){this.id=e,this.addr=i,this.setValue=k(t.type)}function z(e,t,i){this.id=e,this.addr=i,this.size=t.size,this.setValue=U(t.type)}function j(e){this.id=e,f.call(this)}function V(e,t){e.seq.push(t),e.map[t.id]=t}function W(e,t,i){var r=e.name,n=r.length;for(Ks.lastIndex=0;;){var a=Ks.exec(r),o=Ks.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===n){V(i,void 0===u?new G(s,e,t):new z(s,e,t));break}var c=i.map,h=c[s];void 0===h&&(h=new j(s),V(i,h)),i=h}}function Y(e,t,i){f.call(this),this.renderer=i;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;++n){var a=e.getActiveUniform(t,n),o=a.name;W(a,e.getUniformLocation(t,o),this)}}function Z(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}function Q(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function X(e,t){function i(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),d=p.createTexture(),f=p.createTexture(),m.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),m.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=n(s),c={vertex:p.getAttribLocation(l,"position"),uv:p.getAttribLocation(l,"uv")},h={renderType:p.getUniformLocation(l,"renderType"),map:p.getUniformLocation(l,"map"),occlusionMap:p.getUniformLocation(l,"occlusionMap"),opacity:p.getUniformLocation(l,"opacity"),color:p.getUniformLocation(l,"color"),scale:p.getUniformLocation(l,"scale"),rotation:p.getUniformLocation(l,"rotation"),screenPosition:p.getUniformLocation(l,"screenPosition")}}function n(t){var i=p.createProgram(),r=p.createShader(p.FRAGMENT_SHADER),n=p.createShader(p.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return p.shaderSource(r,a+t.fragmentShader),p.shaderSource(n,a+t.vertexShader),p.compileShader(r),p.compileShader(n),p.attachShader(i,r),p.attachShader(i,n),p.linkProgram(i),i}var a,o,s,l,c,h,d,f,p=e.context,m=e.state;this.render=function(n,s,v){if(0!==t.length){var g=new u,y=v.w/v.z,M=.5*v.z,E=.5*v.w,b=16/v.w,x=new r(b*y,b),I=new u(1,1,0),T=new r(1,1),w=new Q;w.min.set(v.x,v.y),w.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===l&&i(),p.useProgram(l),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),p.uniform1i(h.occlusionMap,0),p.uniform1i(h.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(c.vertex,2,p.FLOAT,!1,16,0),
p.vertexAttribPointer(c.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),m.disable(p.CULL_FACE),m.buffers.depth.setMask(!1);for(var C=0,S=t.length;C<S;C++){b=16/v.w,x.set(b*y,b);var A=t[C];if(g.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),g.applyMatrix4(s.matrixWorldInverse),g.applyMatrix4(s.projectionMatrix),I.copy(g),T.x=v.x+I.x*M+M-8,T.y=v.y+I.y*E+E-8,!0===w.containsPoint(T)){m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,null),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,T.x,T.y,16,16,0),p.uniform1i(h.renderType,0),p.uniform2f(h.scale,x.x,x.y),p.uniform3f(h.screenPosition,I.x,I.y,I.z),m.disable(p.BLEND),m.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,T.x,T.y,16,16,0),p.uniform1i(h.renderType,1),m.disable(p.DEPTH_TEST),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,d),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),A.positionScreen.copy(I),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),p.uniform1i(h.renderType,2),m.enable(p.BLEND);for(var k=0,R=A.lensFlares.length;k<R;k++){var B=A.lensFlares[k];B.opacity>.001&&B.scale>.001&&(I.x=B.x,I.y=B.y,I.z=B.z,b=B.size*B.scale/v.w,x.x=b*y,x.y=b,p.uniform3f(h.screenPosition,I.x,I.y,I.z),p.uniform2f(h.scale,x.x,x.y),p.uniform1f(h.rotation,B.rotation),p.uniform1f(h.opacity,B.opacity),p.uniform3f(h.color,B.color.r,B.color.g,B.color.b),m.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),e.setTexture2D(B.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}m.enable(p.CULL_FACE),m.enable(p.DEPTH_TEST),m.buffers.depth.setMask(!0),e.resetGLState()}}}function J(e,t){function i(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),c=r(),h={position:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},d={uvOffset:p.getUniformLocation(c,"uvOffset"),uvScale:p.getUniformLocation(c,"uvScale"),rotation:p.getUniformLocation(c,"rotation"),scale:p.getUniformLocation(c,"scale"),color:p.getUniformLocation(c,"color"),map:p.getUniformLocation(c,"map"),opacity:p.getUniformLocation(c,"opacity"),modelViewMatrix:p.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(c,"projectionMatrix"),fogType:p.getUniformLocation(c,"fogType"),fogDensity:p.getUniformLocation(c,"fogDensity"),fogNear:p.getUniformLocation(c,"fogNear"),fogFar:p.getUniformLocation(c,"fogFar"),fogColor:p.getUniformLocation(c,"fogColor"),alphaTest:p.getUniformLocation(c,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var a=i.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),f=new n(i),f.needsUpdate=!0}function r(){var t=p.createProgram(),i=p.createShader(p.VERTEX_SHADER),r=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(i),p.compileShader(r),p.attachShader(t,i),p.attachShader(t,r),p.linkProgram(t),t}function a(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var o,s,c,h,d,f,p=e.context,m=e.state,v=new u,g=new l,y=new u;this.render=function(r,n){if(0!==t.length){void 0===c&&i(),p.useProgram(c),m.initAttributes(),m.enableAttribute(h.position),m.enableAttribute(h.uv),m.disableUnusedAttributes(),m.disable(p.CULL_FACE),m.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,o),p.vertexAttribPointer(h.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.uniformMatrix4fv(d.projectionMatrix,!1,n.projectionMatrix.elements),m.activeTexture(p.TEXTURE0),p.uniform1i(d.map,0);var l=0,u=0,M=r.fog;M?(p.uniform3f(d.fogColor,M.color.r,M.color.g,M.color.b),M.isFog?(p.uniform1f(d.fogNear,M.near),p.uniform1f(d.fogFar,M.far),p.uniform1i(d.fogType,1),l=1,u=1):M.isFogExp2&&(p.uniform1f(d.fogDensity,M.density),p.uniform1i(d.fogType,2),l=2,u=2)):(p.uniform1i(d.fogType,0),l=0,u=0);for(var E=0,b=t.length;E<b;E++){var x=t[E];x.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,x.matrixWorld),x.z=-x.modelViewMatrix.elements[14]}t.sort(a);for(var I=[],E=0,b=t.length;E<b;E++){var x=t[E],T=x.material;if(!1!==T.visible){p.uniform1f(d.alphaTest,T.alphaTest),p.uniformMatrix4fv(d.modelViewMatrix,!1,x.modelViewMatrix.elements),x.matrixWorld.decompose(v,g,y),I[0]=y.x,I[1]=y.y;var w=0;r.fog&&T.fog&&(w=u),l!==w&&(p.uniform1i(d.fogType,w),l=w),null!==T.map?(p.uniform2f(d.uvOffset,T.map.offset.x,T.map.offset.y),p.uniform2f(d.uvScale,T.map.repeat.x,T.map.repeat.y)):(p.uniform2f(d.uvOffset,0,0),p.uniform2f(d.uvScale,1,1)),p.uniform1f(d.opacity,T.opacity),p.uniform3f(d.color,T.color.r,T.color.g,T.color.b),p.uniform1f(d.rotation,T.rotation),p.uniform2fv(d.scale,I),m.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),m.buffers.depth.setTest(T.depthTest),m.buffers.depth.setMask(T.depthWrite),T.map?e.setTexture2D(T.map,0):e.setTexture2D(f,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}m.enable(p.CULL_FACE),e.resetGLState()}}}function K(){Object.defineProperty(this,"id",{value:rl++}),this.uuid=js.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Ia,this.side=pa,this.shading=ya,this.vertexColors=Ma,this.opacity=1,this.transparent=!1,this.blendSrc=_a,this.blendDst=Ha,this.blendEquation=Aa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Za,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function q(e){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function $(e){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=Gs,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ee(e,t){this.min=void 0!==e?e:new u(1/0,1/0,1/0),this.max=void 0!==t?t:new u(-1/0,-1/0,-1/0)}function te(e,t){this.center=void 0!==e?e:new u,this.radius=void 0!==t?t:0}function ie(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function re(e,t){this.normal=void 0!==e?e:new u(1,0,0),this.constant=void 0!==t?t:0}function ne(e,t,i,r,n,a){this.planes=[void 0!==e?e:new re,void 0!==t?t:new re,void 0!==i?i:new re,void 0!==r?r:new re,void 0!==n?n:new re,void 0!==a?a:new re]}function ae(e,t,i,n){function s(t,i,r,n){var a=t.geometry,o=null,s=I,l=t.customDepthMaterial;if(r&&(s=T,l=t.customDistanceMaterial),l)o=l;else{var u=!1;i.morphTargets&&(a&&a.isBufferGeometry?u=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(u=a.morphTargets&&a.morphTargets.length>0)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var c=t.isSkinnedMesh&&i.skinning,h=0;u&&(h|=E),c&&(h|=b),o=s[h]}if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var d=o.uuid,f=i.uuid,p=w[d];void 0===p&&(p={},w[d]=p);var m=p[f];void 0===m&&(m=o.clone(),p[f]=m),o=m}o.visible=i.visible,o.wireframe=i.wireframe;var v=i.side;return _.renderSingleSided&&v==va&&(v=pa),_.renderReverseSided&&(v===pa?v=ma:v===ma&&(v=pa)),o.side=v,o.clipShadows=i.clipShadows,o.clippingPlanes=e.clippingPlanes,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,r&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(n),o}function l(t,r,n,a){if(!1!==t.visible){if(t.layers.test(r.layers)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!t.frustumCulled||f.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld);var o=i.update(t),u=t.material;if(Array.isArray(u))for(var c=o.groups,h=0,d=c.length;h<d;h++){var p=c[h],m=p.materialIndex;p&&m<0&&(m=Math.abs(2+p.materialIndex));var v=u[m];if(v&&v.visible&&v.opacity>.8){var g=s(t,v,a,M);e.renderBufferDirect(n,null,o,g,t,p)}}else if(u.visible&&u.opacity>.8){var g=s(t,u,a,M);e.renderBufferDirect(n,null,o,g,t,null)}}for(var y=t.children,E=0,b=y.length;E<b;E++)l(y[E],r,n,a)}}var h=e.context,d=e.state,f=new ne,p=new c,m=t.shadows,v=new r,g=new r(n.maxTextureSize,n.maxTextureSize),y=new u,M=new u,E=1,b=2,x=1+(E|b),I=new Array(x),T=new Array(x),w={},C=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],S=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],A=[new a,new a,new a,new a,new a,new a],k=new $;k.depthPacking=zs,k.clipping=!0;for(var R=il.distanceRGBA,B=el.clone(R.uniforms),L=0;L!==x;++L){var O=0!=(L&E),P=0!=(L&b),D=k.clone();D.morphTargets=O,D.skinning=P,I[L]=D;var N=new q({defines:{USE_SHADOWMAP:""},uniforms:B,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:O,skinning:P,clipping:!0});T[L]=N}var _=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=da,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,i){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==m.length){d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var r,n,a=0,s=m.length;a<s;a++){var u=m[a],c=u.shadow;if(void 0!==c){var E=c.camera,b=c.matrix;if(M.setFromMatrixPosition(u.matrixWorld),E.position.copy(M),v.copy(c.mapSize),v.min(g),u&&u.isPointLight){r=6,n=!0;var x=v.x,I=v.y;A[0].set(2*x,I,x,I),A[1].set(0,I,x,I),A[2].set(3*x,I,x,I),A[3].set(x,I,x,I),A[4].set(3*x,0,x,I),A[5].set(x,0,x,I),v.x*=4,v.y*=2,b.makeTranslation(-M.x,-M.y,-M.z)}else r=1,n=!1,y.setFromMatrixPosition(u.target.matrixWorld),E.lookAt(y),E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(E.projectionMatrix),b.multiply(E.matrixWorldInverse);if(null===c.map){var T={minFilter:go,magFilter:go,format:_o};c.map=new o(v.x,v.y,T),c.map.texture.name=u.name+".shadowMap",E.updateProjectionMatrix()}c.isSpotLightShadow&&c.update(u);var w=c.map;e.setRenderTarget(w),e.clear();for(var k=0;k<r;k++){if(n){y.copy(E.position),y.add(C[k]),E.up.copy(S[k]),E.lookAt(y),E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld);var R=A[k];d.viewport(R)}p.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),f.setFromMatrix(p),l(t,i,E,n)}}else console.warn("THREE.WebGLShadowMap:",u,"has no shadow.")}var B=e.getClearColor(),L=e.getClearAlpha();e.setClearColor(B,L),_.needsUpdate=!1}}}function oe(e,t){this.origin=void 0!==e?e:new u,this.direction=void 0!==t?t:new u}function se(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||se.DefaultOrder}function le(){this.mask=1}function ue(){function e(){n.setFromEuler(r,!1)}function t(){r.setFromQuaternion(n,void 0,!1)}Object.defineProperty(this,"id",{value:nl++}),this.uuid=js.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ue.DefaultUp.clone();var i=new u,r=new se,n=new l,a=new u(1,1,1);r.onChange(e),n.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new c},normalMatrix:{value:new ie}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=ue.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new le,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ce(e,t){this.start=void 0!==e?e:new u,this.end=void 0!==t?t:new u}function he(e,t,i){this.a=void 0!==e?e:new u,this.b=void 0!==t?t:new u,this.c=void 0!==i?i:new u}function de(e,t,i,r,n,a){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new u,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new Z,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}function fe(e){K.call(this),this.type="MeshBasicMaterial",this.color=new Z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function pe(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=js.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function me(e,t){pe.call(this,new Int8Array(e),t)}function ve(e,t){pe.call(this,new Uint8Array(e),t)}function ge(e,t){pe.call(this,new Uint8ClampedArray(e),t)}function ye(e,t){pe.call(this,new Int16Array(e),t)}function Me(e,t){pe.call(this,new Uint16Array(e),t)}function Ee(e,t){pe.call(this,new Int32Array(e),t)}function be(e,t){pe.call(this,new Uint32Array(e),t)}function xe(e,t){pe.call(this,new Float32Array(e),t)}function Ie(e,t){pe.call(this,new Float64Array(e),t)}function Te(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function we(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,r=e.length;i<r;++i)e[i]>t&&(t=e[i]);return t}function Ce(){return al++}function Se(){Object.defineProperty(this,"id",{value:Ce()}),this.uuid=js.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ae(){Object.defineProperty(this,"id",{value:Ce()}),this.uuid=js.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function ke(e,t){ue.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ae,this.material=void 0!==t?t:new fe({color:16777215*Math.random()}),this.drawMode=Bs,this.updateMorphTargets()}function Re(e,t,i,r,n,a){Se.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new Be(e,t,i,r,n,a)),this.mergeVertices()}function Be(e,t,i,r,n,a){function o(e,t,i,r,n,a,o,m,v,g,y){var M,E,b=a/v,x=o/g,I=a/2,T=o/2,w=m/2,C=v+1,S=g+1,A=0,k=0,R=new u;for(E=0;E<S;E++){var B=E*x-T;for(M=0;M<C;M++){var L=M*b-I;R[e]=L*r,R[t]=B*n,R[i]=w,c.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[i]=m>0?1:-1,h.push(R.x,R.y,R.z),d.push(M/v),d.push(1-E/g),A+=1}}for(E=0;E<g;E++)for(M=0;M<v;M++){var O=f+M+C*E,P=f+M+C*(E+1),D=f+(M+1)+C*(E+1),N=f+(M+1)+C*E;l.push(O,P,N),l.push(P,D,N),k+=6}s.addGroup(p,k,y),p+=k,f+=A}Ae.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};var s=this;r=Math.floor(r)||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var l=[],c=[],h=[],d=[],f=0,p=0;o("z","y","x",-1,-1,i,t,e,a,n,0),o("z","y","x",1,-1,i,t,-e,a,n,1),o("x","z","y",1,1,e,i,t,r,a,2),o("x","z","y",1,-1,e,i,-t,r,a,3),o("x","y","z",1,-1,e,t,i,r,n,4),o("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(l),this.addAttribute("position",new xe(c,3)),this.addAttribute("normal",new xe(h,3)),this.addAttribute("uv",new xe(d,2))}function Le(e,t,i,r){Se.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new Oe(e,t,i,r)),this.mergeVertices()}function Oe(e,t,i,r){Ae.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};var n,a,o=e/2,s=t/2,l=Math.floor(i)||1,u=Math.floor(r)||1,c=l+1,h=u+1,d=e/l,f=t/u,p=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*f-s;for(n=0;n<c;n++){var M=n*d-o;m.push(M,-y,0),v.push(0,0,1),g.push(n/l),g.push(1-a/u)}}for(a=0;a<u;a++)for(n=0;n<l;n++){var E=n+c*a,b=n+c*(a+1),x=n+1+c*(a+1),I=n+1+c*a;p.push(E,b,I),p.push(b,x,I)}this.setIndex(p),this.addAttribute("position",new xe(m,3)),this.addAttribute("normal",new xe(v,3)),this.addAttribute("uv",new xe(g,2))}function Pe(){ue.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c}function De(e,t,i,r){Pe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ne(e,t,i,r,n,a){Pe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function _e(e){function t(t,i){var r=t.array,n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(i,a),e.bufferData(i,r,n),t.onUploadCallback();var o=e.FLOAT;return r instanceof Float32Array?o=e.FLOAT:r instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):r instanceof Uint16Array?o=e.UNSIGNED_SHORT:r instanceof Int16Array?o=e.SHORT:r instanceof Uint32Array?o=e.UNSIGNED_INT:r instanceof Int32Array?o=e.INT:r instanceof Int8Array?o=e.BYTE:r instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function i(t,i,r){var n=i.array,a=i.updateRange;e.bindBuffer(r,t),!1===i.dynamic?e.bufferData(r,n,e.STATIC_DRAW):-1===a.count?e.bufferSubData(r,0,n):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count)),a.count=0)}function r(e){return e.isInterleavedBufferAttribute&&(e=e.data),o[e.uuid]}function n(t){var i=o[t.uuid];i&&(e.deleteBuffer(i.buffer),delete o[t.uuid])}function a(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var n=o[e.uuid];void 0===n?o[e.uuid]=t(e,r):n.version<e.version&&(i(n.buffer,e,r),n.version=e.version)}var o={};return{get:r,remove:n,update:a}}function He(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Fe(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ue(){function e(){a=-1,s=-1}function t(e,t,i,r,l){var u,c;i.transparent?(u=o,c=++s):(u=n,c=++a);var h=u[c];h?(h.id=e.id,h.object=e,h.geometry=t,h.material=i,h.program=i.program,h.renderOrder=e.renderOrder,h.z=r,h.group=l):(h={id:e.id,object:e,geometry:t,material:i,program:i.program,renderOrder:e.renderOrder,z:r,group:l},u.push(h))}function i(){n.length=a+1,o.length=s+1}function r(){n.sort(He),o.sort(Fe)}var n=[],a=-1,o=[],s=-1;return{opaque:n,transparent:o,init:e,push:t,finish:i,sort:r}}function Ge(){function e(e,t){var r=e.id+","+t.id,n=i[r];return void 0===n&&(n=new Ue,i[r]=n),n}function t(){i={}}var i={};return{get:e,dispose:t}}function ze(e,t,i){function r(e){s=e}function n(i){i.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(l=e.UNSIGNED_INT,u=4):i.array instanceof Uint16Array?(l=e.UNSIGNED_SHORT,u=2):(l=e.UNSIGNED_BYTE,u=1)}function a(t,r){e.drawElements(s,r,l,t*u),i.calls++,i.vertices+=r,s===e.TRIANGLES&&(i.faces+=r/3)}function o(r,n,a){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(s,a,l,n*u,r.maxInstancedCount),i.calls++,i.vertices+=a*r.maxInstancedCount,s===e.TRIANGLES&&(i.faces+=r.maxInstancedCount*a/3)}var s,l,u;this.setMode=r,this.setIndex=n,this.render=a,this.renderInstances=o}function je(e,t,i){function r(e){o=e}function n(t,r){e.drawArrays(o,t,r),i.calls++,i.vertices+=r,o===e.TRIANGLES&&(i.faces+=r/3)}function a(r,n,a){var s=t.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var l=r.attributes.position;l.isInterleavedBufferAttribute?(a=l.data.count,s.drawArraysInstancedANGLE(o,0,a,r.maxInstancedCount)):s.drawArraysInstancedANGLE(o,n,a,r.maxInstancedCount),i.calls++,i.vertices+=a*r.maxInstancedCount,o===e.TRIANGLES&&(i.faces+=r.maxInstancedCount*a/3)}var o;this.setMode=r,this.render=n,this.renderInstances=a}function Ve(e,t,i){function r(e){var n=e.target,a=s[n.id];null!==a.index&&t.remove(a.index);for(var o in a.attributes)t.remove(a.attributes[o]);n.removeEventListener("dispose",r),delete s[n.id];var u=l[n.id];u&&(t.remove(u),delete l[n.id]),u=l[a.id],u&&(t.remove(u),delete l[a.id]),i.geometries--}function n(e,t){var n=s[t.id];return n||(t.addEventListener("dispose",r),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ae).setFromObject(e)),n=t._bufferGeometry),s[t.id]=n,i.geometries++,n)}function a(i){var r=i.index,n=i.attributes;null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER);for(var a in n)t.update(n[a],e.ARRAY_BUFFER);var o=i.morphAttributes;for(var a in o)for(var s=o[a],l=0,u=s.length;l<u;l++)t.update(s[l],e.ARRAY_BUFFER)}function o(i){var r=l[i.id];if(r)return r;var n=[],a=i.index,o=i.attributes;if(null!==a)for(var s=a.array,u=0,c=s.length;u<c;u+=3){var h=s[u+0],d=s[u+1],f=s[u+2];n.push(h,d,d,f,f,h)}else for(var s=o.position.array,u=0,c=s.length/3-1;u<c;u+=3){var h=u+0,d=u+1,f=u+2;n.push(h,d,d,f,f,h)}return r=new(we(n)>65535?be:Me)(n,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),l[i.id]=r,r}var s={},l={};return{get:n,update:a,getWireframeAttribute:o}}function We(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new u,color:new Z,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":i={position:new u,direction:new u,color:new Z,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":i={position:new u,color:new Z,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"HemisphereLight":i={direction:new u,skyColor:new Z,groundColor:new Z};break;case"RectAreaLight":i={color:new Z,position:new u,halfWidth:new u,halfHeight:new u}}return e[t.id]=i,i}}}function Ye(e,t,i){function r(e){var r=i.frame,n=e.geometry,o=t.get(e,n);return a[o.id]!==r&&(n.isGeometry&&o.updateFromObject(e),t.update(o),a[o.id]=r),o}function n(){a={}}var a={};return{update:r,clear:n}}function Ze(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}function Qe(e,t,i){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Ze(i)),r}function Xe(e){switch(e){case Ps:return["Linear","( value )"];case Ds:return["sRGB","( value )"];case _s:return["RGBE","( value )"];case Hs:return["RGBM","( value, 7.0 )"];case Fs:return["RGBM","( value, 16.0 )"];case Us:return["RGBD","( value, 256.0 )"];case Ns:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Je(e,t){var i=Xe(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ke(e,t){var i=Xe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function qe(e,t){var i;switch(t){case io:i="Linear";break;case ro:i="Reinhard";break;case no:i="Uncharted2";break;case ao:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function $e(e,t,i){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(it).join("\n")}function et(e){var t=[];for(var i in e){var r=e[i];!1!==r&&t.push("#define "+i+" "+r)}return t.join("\n")}function tt(e,t,i){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<n;a++){var o=e.getActiveAttrib(t,a),s=o.name;r[s]=e.getAttribLocation(t,s)}return r}function it(e){return""!==e}function rt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function nt(e){function t(e,t){var i=tl[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return nt(i)}var i=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(i,t)}function at(e){function t(e,t,i,r){for(var n="",a=parseInt(t);a<parseInt(i);a++)n+=r.replace(/\[ i \]/g,"[ "+a+" ]");return n}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(i,t)}function ot(e,t,i,r){var n=e.context,a=i.extensions,o=i.defines,s=i.__webglShader.vertexShader,l=i.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";r.shadowMapType===da?u="SHADOWMAP_TYPE_PCF":r.shadowMapType===fa&&(u="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(i.envMap.mapping){case oo:case so:c="ENVMAP_TYPE_CUBE";break;case ho:case fo:c="ENVMAP_TYPE_CUBE_UV";break;case lo:case uo:c="ENVMAP_TYPE_EQUIREC";break;case co:c="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case so:case uo:h="ENVMAP_MODE_REFRACTION"}switch(i.combine){case qa:d="ENVMAP_BLENDING_MULTIPLY";break;case $a:d="ENVMAP_BLENDING_MIX";break;case eo:d="ENVMAP_BLENDING_ADD"}}var f,p,m=e.gammaFactor>0?e.gammaFactor:1,v=$e(a,r,e.extensions),g=et(o),y=n.createProgram();i.isRawShaderMaterial?(f=[g,"\n"].filter(it).join("\n"),
p=[v,g,"\n"].filter(it).join("\n")):(f=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,g,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.useFog&&r.postOnly?"#define USE_POST_ONLY":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.positionOffset?"#define USE_POSITION_OFFSET":"",r.sizeAttribute?"#define USE_ATTRIBUTE_SIZE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif",r.idBuffer?"#define ENABLE_VERTEX_ID":"","\n"].filter(it).join("\n"),p=[v,r.idBuffer?"#extension GL_EXT_draw_buffers : enable":"",r.idBuffer?"#define ID_BUFFER_MRT":"","precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,g,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.useFog&&r.postOnly?"#define USE_POST_ONLY":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==to?"#define TONE_MAPPING":"",r.toneMapping!==to?tl.tonemapping_pars_fragment:"",r.toneMapping!==to?qe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?tl.encodings_pars_fragment:"",r.mapEncoding?Je("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Je("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Je("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?Ke("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(it).join("\n")),s=nt(s,r),s=rt(s,r),l=nt(l,r),l=rt(l,r),i.isShaderMaterial||(s=at(s),l=at(l));var M=f+s,E=p+l,b=Qe(n,n.VERTEX_SHADER,M),x=Qe(n,n.FRAGMENT_SHADER,E);n.attachShader(y,b),n.attachShader(y,x),void 0!==i.index0AttributeName?n.bindAttribLocation(y,0,i.index0AttributeName):!0===r.morphTargets&&n.bindAttribLocation(y,0,"position"),n.linkProgram(y);var I=n.getProgramInfoLog(y),T=n.getShaderInfoLog(b),w=n.getShaderInfoLog(x),C=!0,S=!0;!1===n.getProgramParameter(y,n.LINK_STATUS)?(C=!1,console.error("THREE.WebGLProgram: shader error: ",n.getError(),"gl.VALIDATE_STATUS",n.getProgramParameter(y,n.VALIDATE_STATUS),"gl.getProgramInfoLog",I,T,w)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==T&&""!==w||(S=!1),S&&(this.diagnostics={runnable:C,material:i,programLog:I,vertexShader:{log:T,prefix:f},fragmentShader:{log:w,prefix:p}}),n.deleteShader(b),n.deleteShader(x);var A;this.getUniforms=function(){return void 0===A&&(A=new Y(n,y,e)),A};var k;return this.getAttributes=function(){return void 0===k&&(k=tt(n,y)),k},this.destroy=function(){n.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ol++,this.code=t,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=x,this}function st(e,t){function i(e){var i=e.skeleton,r=i.bones;if(t.floatVertexTextures)return 1024;var n=t.maxVertexUniforms,a=Math.floor((n-20)/4),o=Math.min(a,r.length);return o<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+o+"."),0):o}function r(e,t){var i;return e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=Ps,i===Ps&&t&&(i=Ns),i}var n=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","postOnly","flatShading","sizeAttenuation","positionOffset","sizeAttribute","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(n,o,s,l,u,c){var h=a[n.type],d=c.isSkinnedMesh?i(c):0,f=e.getPrecision();null!==n.precision&&(f=t.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:t.vertexTextures,outputEncoding:r(p?p.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:r(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:r(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===ho||n.envMap.mapping===fo),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:r(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!s,useFog:n.fog,fogExp:s&&s.isFogExp2,postOnly:s&&s.isPostOnly,flatShading:n.shading===ga,sizeAttenuation:n.sizeAttenuation,positionOffset:n.positionOffset,sizeAttribute:n.sizeAttribute,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning&&d>0,maxBones:d,useVertexTexture:t.floatVertexTextures,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:n.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===va,flipSided:n.side===ma,depthPacking:void 0!==n.depthPacking&&n.depthPacking,idBuffer:n.idBuffer}},this.getProgramCode=function(e,t){var i=[];if(t.shaderID?i.push(t.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var n=0;n<o.length;n++)i.push(t[o[n]]);return i.join()},this.acquireProgram=function(t,i,r){for(var a,o=0,s=n.length;o<s;o++){var l=n[o];if(l.code===r){a=l,++a.usedTimes;break}}return void 0===a&&(a=new ot(e,r,t,i),n.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function lt(e,t,i,r,n,a,o){function s(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*i),r.height=Math.floor(e.height*i);return r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function l(e){return js.isPowerOfTwo(e.width)&&js.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=js.nearestPowerOfTwo(e.width),t.height=js.nearestPowerOfTwo(e.height);return t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function c(e){return e.wrapS!==mo||e.wrapT!==mo||e.minFilter!==go&&e.minFilter!==Eo}function h(t){return t===go||t===yo||t===Mo?e.NEAREST:e.LINEAR}function d(e){var t=e.target;t.removeEventListener("dispose",d),p(t),o.textures--}function f(e){var t=e.target;t.removeEventListener("dispose",f),m(t),o.textures--}function p(t){var i=r.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture)}r.remove(t)}function m(t){var i=r.get(t),n=r.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(i.__webglFramebuffer[a]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[a]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function v(t,n){var a=r.get(t);if(t.version>0&&a.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==o.complete)return void E(a,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function g(t,u){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",d),c.__image__webglTextureCube=e.createTexture(),o.textures++),i.activeTexture(e.TEXTURE0+u),i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,p=[],m=0;m<6;m++)p[m]=h||f?f?t.image[m].image:t.image[m]:s(t.image[m],n.maxCubemapSize);var v=p[0],g=l(v),y=a(t.format),E=a(t.type);M(e.TEXTURE_CUBE_MAP,t,g);for(var m=0;m<6;m++)if(h)for(var b,x=p[m].mipmaps,I=0,T=x.length;I<T;I++)b=x[I],t.format!==_o&&t.format!==No?i.getCompressedTextureFormats().indexOf(y)>-1?i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,I,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,I,y,b.width,b.height,0,y,E,b.data);else f?i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,p[m].width,p[m].height,0,y,E,p[m].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,E,p[m]);t.generateMipmaps&&g&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(e.TEXTURE0+u),i.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function y(t,n){i.activeTexture(e.TEXTURE0+n),i.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function M(i,o,s){var l;if(s?(e.texParameteri(i,e.TEXTURE_WRAP_S,a(o.wrapS)),e.texParameteri(i,e.TEXTURE_WRAP_T,a(o.wrapT)),e.texParameteri(i,e.TEXTURE_MAG_FILTER,a(o.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,a(o.minFilter))):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===mo&&o.wrapT===mo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(i,e.TEXTURE_MAG_FILTER,h(o.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,h(o.minFilter)),o.minFilter!==go&&o.minFilter!==Eo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===ko&&null===t.get("OES_texture_float_linear"))return;if(o.type===Ro&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,n.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function E(t,r,h){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),o.textures++),i.activeTexture(e.TEXTURE0+h),i.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var f=s(r.image,n.maxTextureSize);c(r)&&!1===l(f)&&(f=u(f));var p=l(f),m=a(r.format),v=a(r.type);M(e.TEXTURE_2D,r,p);var g,y=r.mipmaps;if(r.isDepthTexture){var E=e.DEPTH_COMPONENT;if(r.type===ko){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");E=e.DEPTH_COMPONENT32F}else A&&(E=e.DEPTH_COMPONENT16);r.format===Go&&E===e.DEPTH_COMPONENT&&r.type!==Co&&r.type!==Ao&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Co,v=a(r.type)),r.format===zo&&(E=e.DEPTH_STENCIL,r.type!==Po&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Po,v=a(r.type))),i.texImage2D(e.TEXTURE_2D,0,E,f.width,f.height,0,m,v,null)}else if(r.isDataTexture)if(y.length>0&&p){for(var b=0,x=y.length;b<x;b++)g=y[b],i.texImage2D(e.TEXTURE_2D,b,m,g.width,g.height,0,m,v,g.data);r.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,m,f.width,f.height,0,m,v,f.data);else if(r.isCompressedTexture)for(var b=0,x=y.length;b<x;b++)g=y[b],r.format!==_o&&r.format!==No?i.getCompressedTextureFormats().indexOf(m)>-1?i.compressedTexImage2D(e.TEXTURE_2D,b,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(e.TEXTURE_2D,b,m,g.width,g.height,0,m,v,g.data);else if(y.length>0&&p){for(var b=0,x=y.length;b<x;b++)g=y[b],i.texImage2D(e.TEXTURE_2D,b,m,m,v,g);r.generateMipmaps=!1}else i.texImage2D(e.TEXTURE_2D,0,m,m,v,f);r.generateMipmaps&&p&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function b(t,n,o,s){var l=a(n.texture.format),u=a(n.texture.type);i.texImage2D(s,0,l,n.width,n.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,r.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function x(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):i.depthBuffer&&i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function I(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),v(i.depthTexture,0);var n=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Go)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n,0);else{if(i.depthTexture.format!==zo)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,n,0)}}function T(t){var i=r.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");I(i.__webglFramebuffer,t)}else if(n){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=e.createRenderbuffer(),x(i.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),x(i.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function w(t){var n=r.get(t),a=r.get(t.texture);t.addEventListener("dispose",f),a.__webglTexture=e.createTexture(),o.textures++;var s=!0===t.isWebGLRenderTargetCube,u=l(t);if(s){n.__webglFramebuffer=[];for(var c=0;c<6;c++)n.__webglFramebuffer[c]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(s){i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),M(e.TEXTURE_CUBE_MAP,t.texture,u);for(var c=0;c<6;c++)b(n.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_CUBE_MAP),i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else i.bindTexture(e.TEXTURE_2D,a.__webglTexture),M(e.TEXTURE_2D,t.texture,u),b(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_2D),i.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&T(t)}function C(i){var n=t.get("WEBGL_draw_buffers"),s=i[0],l=!1;if(s&&!s.__webglFramebuffer){var u=r.get(s);r.get(s.texture);s.__webglFramebuffer=u.__webglFramebuffer=e.createFramebuffer(),void 0===s.depthBuffer&&(s.depthBuffer=!0),void 0===s.stencilBuffer&&(s.stencilBuffer=!0),T(s),l=!0}e.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer);var c;for(c=0;c<i.length;c++){var h=i[c];if(!h.__webglTexture){var d=THREE.Math.isPowerOfTwo(h.width)&&THREE.Math.isPowerOfTwo(h.height),p=a(h.texture.format),m=a(h.texture.type);h.addEventListener("dispose",f);r.get(h.texture).__webglTexture=h.__webglTexture=e.createTexture(),o.textures++,e.bindTexture(e.TEXTURE_2D,h.__webglTexture),M(e.TEXTURE_2D,h.texture,d),e.texImage2D(e.TEXTURE_2D,0,p,h.width,h.height,0,p,m,null),d&&h.generateMipmaps&&e.generateMipmap(e.TEXTURE_2D)}e.framebufferTexture2D(e.FRAMEBUFFER,n.COLOR_ATTACHMENT0_WEBGL+c,e.TEXTURE_2D,h.__webglTexture,0)}for(var v=e.getParameter(n.MAX_COLOR_ATTACHMENTS_WEBGL);c<v;)e.framebufferTexture2D(e.FRAMEBUFFER,n.COLOR_ATTACHMENT0_WEBGL+c,e.TEXTURE_2D,null,0),c++;var g=[n.COLOR_ATTACHMENT0_WEBGL];for(c=1;c<i.length;c++)g.push(n.COLOR_ATTACHMENT0_WEBGL+c);n.drawBuffersWEBGL(g),l&&(e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null))}function S(t){function n(t){var n=t.texture;if(n.generateMipmaps&&l(t)&&n.minFilter!==go&&n.minFilter!==Eo){var a=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(n).__webglTexture;i.bindTexture(a,o),e.generateMipmap(a),i.bindTexture(a,null)}}if(Array.isArray(t))for(var a=0;a<t.length;a++)n(t[a]);else n(t)}var A="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=w,this.setupMultiRenderTarget=C,this.updateRenderTargetMipmap=S}function ut(){function e(e){var t=e.uuid,i=r[t];return void 0===i&&(i={},r[t]=i),i}function t(e){delete r[e.uuid]}function i(){r={}}var r={};return{get:e,remove:t,clear:i}}function ct(e,t,i){function r(){var t=!1,i=new a,r=null,n=new a;return{setMask:function(i){r===i||t||(e.colorMask(i,i,i,i),r=i)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),i.set(t,r,a,o),!1===n.equals(i)&&(e.clearColor(t,r,a,o),n.copy(i))},reset:function(){t=!1,r=null,n.set(0,0,0,1)}}}function n(){var t=!1,i=null,r=null,n=null;return{setTest:function(t){t?f(e.DEPTH_TEST):p(e.DEPTH_TEST)},setMask:function(r){i===r||t||(e.depthMask(r),i=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case Va:e.depthFunc(e.NEVER);break;case Wa:e.depthFunc(e.ALWAYS);break;case Ya:e.depthFunc(e.LESS);break;case Za:e.depthFunc(e.LEQUAL);break;case Qa:e.depthFunc(e.EQUAL);break;case Xa:e.depthFunc(e.GEQUAL);break;case Ja:e.depthFunc(e.GREATER);break;case Ka:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,i=null,r=null,n=null}}}function o(){var t=!1,i=null,r=null,n=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?f(e.STENCIL_TEST):p(e.STENCIL_TEST)},setMask:function(r){i===r||t||(e.stencilMask(r),i=r)},setFunc:function(t,i,o){r===t&&n===i&&a===o||(e.stencilFunc(t,i,o),r=t,n=i,a=o)},setOp:function(t,i,r){o===t&&s===i&&l===r||(e.stencilOp(t,i,r),o=t,s=i,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,i=null,r=null,n=null,a=null,o=null,s=null,l=null,u=null}}}function s(t,i,r){var n=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<r;o++)e.texImage2D(i+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return a}function l(){B.setClear(0,0,0,1),L.setClear(1),O.setClear(0),f(e.DEPTH_TEST),L.setFunc(Za),y(!1),M(ua),f(e.CULL_FACE),f(e.BLEND),v(Ia)}function u(){for(var e=0,t=D.length;e<t;e++)D[e]=0}function c(i){if(D[i]=1,0===N[i]&&(e.enableVertexAttribArray(i),N[i]=1),0!==_[i]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),_[i]=0}}function h(i,r){if(D[i]=1,0===N[i]&&(e.enableVertexAttribArray(i),N[i]=1),_[i]!==r){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,r),_[i]=r}}function d(){for(var t=0,i=N.length;t!==i;++t)N[t]!==D[t]&&(e.disableVertexAttribArray(t),N[t]=0)}function f(t){!0!==H[t]&&(e.enable(t),H[t]=!0)}function p(t){!1!==H[t]&&(e.disable(t),H[t]=!1)}function m(){if(null===F&&(F=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<i.length;r++)F.push(i[r]);return F}function v(t,r,n,a,o,s,l,u){t!==xa?f(e.BLEND):p(e.BLEND),t===U&&u===Z||(t===Ta?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===wa?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Ca?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),U=t,Z=u),t===Sa?(o=o||r,s=s||n,l=l||a,r===G&&o===V||(e.blendEquationSeparate(i(r),i(o)),G=r,V=o),n===z&&a===j&&s===W&&l===Y||(e.blendFuncSeparate(i(n),i(a),i(s),i(l)),z=n,j=a,W=s,Y=l)):(G=null,z=null,j=null,V=null,W=null,Y=null)}function g(t){t.side===va?p(e.CULL_FACE):f(e.CULL_FACE),y(t.side===ma),!0===t.transparent?v(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):v(xa),L.setFunc(t.depthFunc),L.setTest(t.depthTest),L.setMask(t.depthWrite),B.setMask(t.colorWrite),b(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function y(t){Q!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),Q=t)}function M(t){t!==la?(f(e.CULL_FACE),t!==X&&(t===ua?e.cullFace(e.BACK):t===ca?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):p(e.CULL_FACE),X=t}function E(t){t!==J&&(ie&&e.lineWidth(t),J=t)}function b(t,i,r){t?(f(e.POLYGON_OFFSET_FILL),K===i&&q===r||(e.polygonOffset(i,r),K=i,q=r)):p(e.POLYGON_OFFSET_FILL)}function x(){return $}function I(t){$=t,t?f(e.SCISSOR_TEST):p(e.SCISSOR_TEST)}function T(t){void 0===t&&(t=e.TEXTURE0+ee-1),re!==t&&(e.activeTexture(t),re=t)}function w(t,i){null===re&&T();var r=ne[re];void 0===r&&(r={type:void 0,texture:void 0},ne[re]=r),r.type===t&&r.texture===i||(e.bindTexture(t,i||se[t]),r.type=t,r.texture=i)}function C(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}}function S(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}}function A(t){!1===ae.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ae.copy(t))}function k(t){!1===oe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),oe.copy(t))}function R(){for(var t=0;t<N.length;t++)1===N[t]&&(e.disableVertexAttribArray(t),N[t]=0);H={},F=null,re=null,ne={},U=null,Q=null,X=null,B.reset(),L.reset(),O.reset()}var B=new r,L=new n,O=new o,P=e.getParameter(e.MAX_VERTEX_ATTRIBS),D=new Uint8Array(P),N=new Uint8Array(P),_=new Uint8Array(P),H={},F=null,U=null,G=null,z=null,j=null,V=null,W=null,Y=null,Z=!1,Q=null,X=null,J=null,K=null,q=null,$=null,ee=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),te=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),ie=parseFloat(te)>=1,re=null,ne={},ae=new a,oe=new a,se={};return se[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),se[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:B,depth:L,stencil:O},init:l,initAttributes:u,enableAttribute:c,enableAttributeAndDivisor:h,disableUnusedAttributes:d,enable:f,disable:p,getCompressedTextureFormats:m,setBlending:v,setMaterial:g,setFlipSided:y,setCullFace:M,setLineWidth:E,setPolygonOffset:b,getScissorTest:x,setScissorTest:I,activeTexture:T,bindTexture:w,compressedTexImage2D:C,texImage2D:S,scissor:A,viewport:k,reset:R}}function ht(e,t,i){function r(){if(void 0!==a)return a;var i=t.get("EXT_texture_filter_anisotropic");return a=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==i.precision?i.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===i.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,y=!!t.get("OES_texture_float");return{getMaxAnisotropy:r,getMaxPrecision:n,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function dt(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];var r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(i)}return t[i]=r,r}}}function ft(){function e(){u.value!==r&&(u.value=r,u.needsUpdate=n>0),i.numPlanes=n,i.numIntersection=0}function t(e,t,r,n){var a=null!==e?e.length:0,o=null;if(0!==a){if(o=u.value,!0!==n||null===o){var c=r+4*a,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===o||o.length<c)&&(o=new Float32Array(c));for(var d=0,f=r;d!==a;++d,f+=4)s.copy(e[d]).applyMatrix4(h,l),s.normal.toArray(o,f),o[f+3]=s.constant}u.value=o,u.needsUpdate=!0}return i.numPlanes=a,o}
var i=this,r=null,n=0,a=!1,o=!1,s=new re,l=new ie,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var s=0!==e.length||i||0!==n||a;return a=i,r=t(e,o,0),n=e.length,s},this.beginShadows=function(){o=!0,t(null)},this.endShadows=function(){o=!1,e()},this.setState=function(i,s,l,c,h,d){if(!a||null===i||0===i.length||o&&!l)if(o){var f=o?0:n,p=4*f,m=h.clippingState||null;u.value=m,m=t(i,c,p,d);for(var v=0;v!==p;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}else e();else{var f=o?0:n,p=4*f,m=h.clippingState||null;u.value=m,m=t(i,c,p,d);for(var v=0;v!==p;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}}}function pt(e){function t(){return null===re?Me:1}function i(){Ke.init(),Ke.scissor(ce.copy(Ee).multiplyScalar(Me)),Ke.viewport(de.copy(xe).multiplyScalar(Me)),Ke.buffers.color.setClear(me.r,me.g,me.b,ve,z)}function r(){ie=null,ue=null,le="",se=-1,Ke.reset()}function n(e){e.preventDefault(),r(),i(),qe.clear(),it.clear()}function o(e){var t=e.target;t.removeEventListener("dispose",o),s(t)}function s(e){l(e),qe.remove(e)}function l(e){var t=qe.get(e).program;e.program=void 0,void 0!==t&&rt.releaseProgram(t)}function d(e,t,i){e.render(function(e){te.renderBufferImmediate(e,t,i)})}function f(e,t){return Math.abs(t[0])-Math.abs(e[0])}function p(e,t,i,r){if(i&&i.isInstancedBufferGeometry&&null===Xe.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Ke.initAttributes();var n=i.attributes,a=t.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=n[s];if(void 0!==u){var c=u.normalized,h=u.itemSize,d=et.get(u),f=d.buffer,p=d.type,m=d.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data,g=v.stride,y=u.offset;v&&v.isInstancedInterleavedBuffer?(Ke.enableAttributeAndDivisor(l,v.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):Ke.enableAttribute(l),Ze.bindBuffer(Ze.ARRAY_BUFFER,f),Ze.vertexAttribPointer(l,h,p,c,g*m,(r*g+y)*m)}else u.isInstancedBufferAttribute?(Ke.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=u.meshPerAttribute*u.count)):Ke.enableAttribute(l),Ze.bindBuffer(Ze.ARRAY_BUFFER,f),Ze.vertexAttribPointer(l,h,p,c,0,r*h*m)}else if(void 0!==o){var M=o[s];if(void 0!==M)switch(M.length){case 2:Ze.vertexAttrib2fv(l,M);break;case 3:Ze.vertexAttrib3fv(l,M);break;case 4:Ze.vertexAttrib4fv(l,M);break;default:Ze.vertexAttrib1fv(l,M)}}}}Ke.disableUnusedAttributes()}function m(e,t,i){if(e.visible&&!1!==e.alive){if(e.layers.test(t.layers))if(e.isLight)V.push(e);else if(e.isSprite)e.frustumCulled&&!Ie.intersectsSprite(e)||K.push(e);else if(e.isLensFlare)$.push(e);else if(e.isImmediateRenderObject)i&&Re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Se),W.push(e,null,e.material,Re.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Ie.intersectsObject(e))){i&&Re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Se);var r=it.update(e),n=e.material;if(null==e.material){var a="";e.isMesh&&(a="object.isMesh"),e.isLine&&(a="object.isLine"),e.isPoints&&(a="object.isPoints"),console.warn("此模型(",e.name,")的",a,":true,object.material为null.")}else if(Array.isArray(n))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=u.materialIndex<0?n[Math.abs(2+u.materialIndex)]:n[u.materialIndex];c&&c.visible&&W.push(e,r,c,Re.z,u)}else n.visible&&W.push(e,r,n,Re.z,null)}for(var h=e.children,s=0,l=h.length;s<l;s++)m(h[s],t,i)}}function v(e,t,i,r){for(var n=0,a=e.length;n<a;n++){var o=e[n],s=o.object,l=o.geometry,u=o.group;if(t.backFrontStencil){var c=o.material;if(r&&c.side==THREE.DoubleSide)continue;if("LineSegments"==s.type)continue;if(c.transparent&&c.isOverrideOpacity&&c.clippingPlanes)continue;var h=r;if(c.defines&&c.defines.hasOwnProperty("USE_INSTANCE")){if(h=r.side==THREE.FrontSide?t.frontInstanceMaterial:t.backInstanceMaterial,te.localClippingEnabled&&!c.clippingPlanes)continue}else if(u&&u.materialIndex>=0&&!c.clippingPlanes)continue}else var h=void 0===r?o.material:r;if(s.onBeforeRender(te,t,i,l,h,u),i.isArrayCamera&&i.enabled)for(var d=i.cameras,f=0,p=d.length;f<p;f++){var m=d[f];s.layers.test(m.layers)&&(Ke.viewport(de.copy(m.viewport)),g(s,t,m,l,h,u))}else g(s,t,i,l,h,u);s.onAfterRender(te,t,i,l,h,u)}}function g(e,t,i,r,n,a){if(e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){Ke.setMaterial(n);var o=M(i,t.fog,n,e);le="",d(e,o,n)}else te.renderBufferDirect(i,t.fog,r,n,e,a)}function y(e,t,i){var r=qe.get(e),n=rt.getParameters(e,He,t,Te.numPlanes,Te.numIntersection,i),a=rt.getProgramCode(e,n),s=r.program,u=!0;if(void 0===s)e.addEventListener("dispose",o);else if(s.code!==a)l(e);else{if(void 0!==n.shaderID)return;u=!1}if(u){if(n.shaderID){var c=il[n.shaderID];r.__webglShader={name:e.type,uniforms:el.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,s=rt.acquireProgram(e,n,a),r.program=s,e.program=s}var h=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<te.maxMorphTargets;d++)h["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<te.maxMorphNormals;d++)h["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Te.numPlanes,r.numIntersection=Te.numIntersection,f.clippingPlanes=Te.uniform),r.fog=t,r.lightsHash=He.hash,e.lights&&(f.ambientLightColor.value=He.ambient,f.directionalLights.value=He.directional,f.spotLights.value=He.spot,f.rectAreaLights.value=He.rectArea,f.pointLights.value=He.point,f.hemisphereLights.value=He.hemi,f.directionalShadowMap.value=He.directionalShadowMap,f.directionalShadowMatrix.value=He.directionalShadowMatrix,f.spotShadowMap.value=He.spotShadowMap,f.spotShadowMatrix.value=He.spotShadowMatrix,f.pointShadowMap.value=He.pointShadowMap,f.pointShadowMatrix.value=He.pointShadowMatrix);var p=r.program.getUniforms(),m=Y.seqWithValue(p.seq,f);r.uniformsList=m}function M(e,t,i,r){pe=0;var n=qe.get(i);if(we&&(Ce||e!==ue)){var a=e===ue&&i.id===se;Te.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,a)}!1===i.needsUpdate&&(void 0===n.program?i.needsUpdate=!0:i.fog&&n.fog!==t?i.needsUpdate=!0:i.lights&&n.lightsHash!==He.hash?i.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===Te.numPlanes&&n.numIntersection===Te.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(y(i,t,r),i.needsUpdate=!1);var o=!1,s=!1,l=!1,u=n.program,c=u.getUniforms(),d=n.__webglShader.uniforms;if(u.id!==ie&&(Ze.useProgram(u.program),ie=u.id,o=!0,s=!0,l=!0),i.id!==se&&(se=i.id,s=!0),o||e!==ue){if(c.setValue(Ze,"projectionMatrix",e.projectionMatrix),Je.logarithmicDepthBuffer&&c.setValue(Ze,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ue&&(ue=e,s=!0,l=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=c.map.cameraPosition;void 0!==f&&f.setValue(Ze,Re.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(Ze,"viewMatrix",e.matrixWorldInverse),c.setValue(Ze,"toneMappingExposure",te.toneMappingExposure),c.setValue(Ze,"toneMappingWhitePoint",te.toneMappingWhitePoint),i.useCSM&&e.csmCascades&&c.setValue(Ze,"csmCascades",e.csmCascades)}if(i.skinning){c.setOptional(Ze,r,"bindMatrix"),c.setOptional(Ze,r,"bindMatrixInverse");var p=r.skeleton;if(p){var m=p.bones;if(Je.floatVertexTextures){if(void 0===p.boneTexture){var v=Math.sqrt(4*m.length);v=js.nextPowerOfTwo(Math.ceil(v)),v=Math.max(v,4);var g=new Float32Array(v*v*4);g.set(p.boneMatrices);var M=new h(g,v,v,_o,ko);p.boneMatrices=g,p.boneTexture=M,p.boneTextureSize=v}c.setValue(Ze,"boneTexture",p.boneTexture),c.setValue(Ze,"boneTextureSize",p.boneTextureSize)}else c.setOptional(Ze,p,"boneMatrices")}}if(s&&(i.lights&&B(d,l),t&&i.fog&&T(d,t),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&E(d,i),i.isLineBasicMaterial?b(d,i):i.isLineDashedMaterial?(b(d,i),x(d,i)):i.isPointsMaterial?I(d,i):i.isMeshLambertMaterial?w(d,i):i.isMeshToonMaterial?S(d,i):i.isMeshPhongMaterial?C(d,i):i.isMeshPhysicalMaterial?k(d,i):i.isMeshStandardMaterial?A(d,i):i.isMeshDepthMaterial?i.displacementMap&&(d.displacementMap.value=i.displacementMap,d.displacementScale.value=i.displacementScale,d.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&R(d,i),void 0!==d.ltcMat&&(d.ltcMat.value=$s.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=$s.LTC_MAG_TEXTURE),Y.upload(Ze,n.uniformsList,d,te)),c.map.objId){var L=r.originalId;ee.set((L>>16&255)/255,(L>>8&255)/255,(255&L)/255),c.setValue(Ze,"objId",ee)}return c.setValue(Ze,"modelViewMatrix",r.modelViewMatrix),c.setValue(Ze,"normalMatrix",r.normalMatrix),c.setValue(Ze,"modelMatrix",r.matrixWorld),u}function E(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var i;if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var r=i.offset,n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y),e.rotateMatrix.value.copy(i.rotateMatrix)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function b(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function x(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function I(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Me,e.scale.value=.5*ye,e.map.value=t.map,null!==t.map){var i=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}}function T(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far,e.postProcessMap.value=t.postProcessMap,e.postProcessAdditiveMap.value=t.postProcessAdditiveMap,e.postProcessMixRate.value=null==t.postProcessMap?0:1,e.postProcessAdditiveRate.value=null==t.postProcessAdditiveMap?0:1,e.viewportWidth.value=t.viewport.w,e.viewportHeight.value=t.viewport.h):t.isFogExp2&&(e.fogDensity.value=t.density)}function w(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function C(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function S(e,t){C(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function A(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function k(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,A(e,t)}function R(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function B(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function L(e){for(var t=0,i=0,r=e.length;i<r;i++){var n=e[i];n.castShadow&&(He.shadows[t]=n,t++)}He.shadows.length=t}function O(e,t){var i,r,n,a,o,s,l,u,c=0,h=0,d=0,f=t.matrixWorldInverse,p=0,m=0,v=0,g=0,y=0;for(i=0,r=e.length;i<r;i++)if(n=e[i],o=n.color,s=n.intensity,l=n.distance,u=n.shadow&&n.shadow.map?n.shadow.map.texture:null,n.isAmbientLight)c+=o.r*s,h+=o.g*s,d+=o.b*s;else if(n.isDirectionalLight){var M=nt.get(n);M.color.copy(n.color).multiplyScalar(n.intensity),M.direction.setFromMatrixPosition(n.matrixWorld),Re.setFromMatrixPosition(n.target.matrixWorld),M.direction.sub(Re),M.direction.transformDirection(f),M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),He.directionalShadowMap[p]=u,He.directionalShadowMatrix[p]=n.shadow.matrix,He.directional[p]=M,p++}else if(n.isSpotLight){var M=nt.get(n);M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),M.color.copy(o).multiplyScalar(s),M.distance=l,M.direction.setFromMatrixPosition(n.matrixWorld),Re.setFromMatrixPosition(n.target.matrixWorld),M.direction.sub(Re),M.direction.transformDirection(f),M.coneCos=Math.cos(n.angle),M.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),M.decay=0===n.distance?0:n.decay,M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),He.spotShadowMap[v]=u,He.spotShadowMatrix[v]=n.shadow.matrix,He.spot[v]=M,v++}else if(n.isRectAreaLight){var M=nt.get(n);M.color.copy(o).multiplyScalar(s/(n.width*n.height)),M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),Pe.identity(),Le.copy(n.matrixWorld),Le.premultiply(f),Pe.extractRotation(Le),M.halfWidth.set(.5*n.width,0,0),M.halfHeight.set(0,.5*n.height,0),M.halfWidth.applyMatrix4(Pe),M.halfHeight.applyMatrix4(Pe),He.rectArea[g]=M,g++}else if(n.isPointLight){var M=nt.get(n);M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),M.color.copy(n.color).multiplyScalar(n.intensity),M.distance=n.distance,M.decay=0===n.distance?0:n.decay,M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),He.pointShadowMap[m]=u,He.pointShadowMatrix[m]=n.shadow.matrix,He.point[m]=M,m++}else if(n.isHemisphereLight){var M=nt.get(n);M.direction.setFromMatrixPosition(n.matrixWorld),M.direction.transformDirection(f),M.direction.normalize(),M.skyColor.copy(n.color).multiplyScalar(s),M.groundColor.copy(n.groundColor).multiplyScalar(s),He.hemi[y]=M,y++}He.ambient[0]=c,He.ambient[1]=h,He.ambient[2]=d,He.directional.length=p,He.spot.length=v,He.rectArea.length=g,He.point.length=m,He.hemi.length=y,He.hash=p+","+m+","+v+","+g+","+y+","+He.shadows.length}function P(){var e=pe;return e>=Je.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Je.maxTextures),pe+=1,e}function D(e){var t;if(e===po)return Ze.REPEAT;if(e===mo)return Ze.CLAMP_TO_EDGE;if(e===vo)return Ze.MIRRORED_REPEAT;if(e===go)return Ze.NEAREST;if(e===yo)return Ze.NEAREST_MIPMAP_NEAREST;if(e===Mo)return Ze.NEAREST_MIPMAP_LINEAR;if(e===Eo)return Ze.LINEAR;if(e===bo)return Ze.LINEAR_MIPMAP_NEAREST;if(e===xo)return Ze.LINEAR_MIPMAP_LINEAR;if(e===Io)return Ze.UNSIGNED_BYTE;if(e===Bo)return Ze.UNSIGNED_SHORT_4_4_4_4;if(e===Lo)return Ze.UNSIGNED_SHORT_5_5_5_1;if(e===Oo)return Ze.UNSIGNED_SHORT_5_6_5;if(e===To)return Ze.BYTE;if(e===wo)return Ze.SHORT;if(e===Co)return Ze.UNSIGNED_SHORT;if(e===So)return Ze.INT;if(e===Ao)return Ze.UNSIGNED_INT;if(e===ko)return Ze.FLOAT;if(e===Ro&&null!==(t=Xe.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===Do)return Ze.ALPHA;if(e===No)return Ze.RGB;if(e===_o)return Ze.RGBA;if(e===Ho)return Ze.LUMINANCE;if(e===Fo)return Ze.LUMINANCE_ALPHA;if(e===Go)return Ze.DEPTH_COMPONENT;if(e===zo)return Ze.DEPTH_STENCIL;if(e===Aa)return Ze.FUNC_ADD;if(e===ka)return Ze.FUNC_SUBTRACT;if(e===Ra)return Ze.FUNC_REVERSE_SUBTRACT;if(e===Oa)return Ze.ZERO;if(e===Pa)return Ze.ONE;if(e===Da)return Ze.SRC_COLOR;if(e===Na)return Ze.ONE_MINUS_SRC_COLOR;if(e===_a)return Ze.SRC_ALPHA;if(e===Ha)return Ze.ONE_MINUS_SRC_ALPHA;if(e===Fa)return Ze.DST_ALPHA;if(e===Ua)return Ze.ONE_MINUS_DST_ALPHA;if(e===Ga)return Ze.DST_COLOR;if(e===za)return Ze.ONE_MINUS_DST_COLOR;if(e===ja)return Ze.SRC_ALPHA_SATURATE;if((e===jo||e===Vo||e===Wo||e===Yo)&&null!==(t=Xe.get("WEBGL_compressed_texture_s3tc"))){if(e===jo)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Vo)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Wo)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Yo)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Zo||e===Qo||e===Xo||e===Jo)&&null!==(t=Xe.get("WEBGL_compressed_texture_pvrtc"))){if(e===Zo)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Qo)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Xo)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Jo)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Ko&&null!==(t=Xe.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===qo||e===$o)&&null!==(t=Xe.get("WEBGL_compressed_texture_etc"))){if(e===qo)return t.COMPRESSED_RGB8_ETC2;if(e===$o)return t.COMPRESSED_RGBA8_ETC2_EAC}if(e===es||e===ts||e===is||e===rs||e===ns||e===as||e===os||e===ss||e===ls||e===us||e===cs||e===hs||e===ds||e===fs||e===ms||e===vs||e===gs||e===ys||e===Ms||e===Es||e===bs||e===xs||e===Is||e===Ts||e===ws||e===Cs||e===Ss||e===As)return t=Xe.get("WEBGL_compressed_texture_astc"),null!==t?e:null;if(e===ps)return t=Xe.get("EXT_texture_compression_bptc"),null!==t?e:null;if((e===Ba||e===La)&&null!==(t=Xe.get("EXT_blend_minmax"))){if(e===Ba)return t.MIN_EXT;if(e===La)return t.MAX_EXT}return e===Po&&null!==(t=Xe.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",oa),e=e||{};var N=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),_=void 0!==e.context?e.context:null,H=void 0!==e.alpha&&e.alpha,F=void 0===e.depth||e.depth,U=void 0===e.stencil||e.stencil,G=void 0!==e.antialias&&e.antialias,z=void 0===e.premultipliedAlpha||e.premultipliedAlpha,j=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,V=[],W=null,Q=new Float32Array(8),K=[],$=[],ee=new u;this.domElement=N,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=io,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var te=this,ie=null,re=null,oe=null,se=-1,le="",ue=null,ce=new a,he=null,de=new a,pe=0,me=new Z(0),ve=0,ge=N.width,ye=N.height,Me=1,Ee=new a(0,0,ge,ye),be=!1,xe=new a(0,0,ge,ye),Ie=new ne,Te=new ft,we=!1,Ce=!1,Se=new c,Re=new u,Le=new c,Pe=new c,He={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Fe={geometries:0,textures:0},Ue={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ue,memory:Fe,programs:null};var Ze;try{var Qe={alpha:H,depth:F,stencil:U,antialias:G,premultipliedAlpha:z,preserveDrawingBuffer:j};if(null===(Ze=_||N.getContext("webgl",Qe)||N.getContext("experimental-webgl",Qe)))throw null!==N.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Ze.getShaderPrecisionFormat&&(Ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),N.addEventListener("webglcontextlost",n,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Xe=new dt(Ze);Xe.get("WEBGL_depth_texture"),Xe.get("OES_texture_float"),Xe.get("OES_texture_float_linear"),Xe.get("OES_texture_half_float"),Xe.get("OES_texture_half_float_linear"),Xe.get("OES_standard_derivatives"),Xe.get("ANGLE_instanced_arrays"),Xe.get("WEBGL_draw_buffers"),Xe.get("OES_element_index_uint")&&(Ae.MaxIndex=4294967296);var Je=new ht(Ze,Xe,e),Ke=new ct(Ze,Xe,D),qe=new ut,$e=new lt(Ze,Xe,Ke,qe,Je,D,Fe),et=new _e(Ze),tt=new Ve(Ze,et,Fe),it=new Ye(Ze,tt,Ue),rt=new st(this,Je),nt=new We,at=new Ge;this.info.programs=rt.programs;var ot,pt,mt,vt,gt=new je(Ze,Xe,Ue),yt=new ze(Ze,Xe,Ue);i(),this.context=Ze,this.capabilities=Je,this.extensions=Xe,this.properties=qe,this.state=Ke;var Mt=new ae(this,He,it,Je);this.shadowMap=Mt;var Et=new J(this,K),bt=new X(this,$);this.getContext=function(){return Ze},this.getContextAttributes=function(){return Ze.getContextAttributes()},this.forceContextLoss=function(){var e=Xe.get("WEBGL_lose_context");e&&e.loseContext()},this.getMaxAnisotropy=function(){return Je.getMaxAnisotropy()},this.getPrecision=function(){return Je.precision},this.getPixelRatio=function(){return Me},this.setPixelRatio=function(e){void 0!==e&&(Me=e,this.setSize(xe.z,xe.w,!1))},this.getSize=function(){return{width:ge,height:ye}},this.setSize=function(e,t,i){ge=e,ye=t,N.width=e*Me,N.height=t*Me,!1!==i&&(N.style.width=e+"px",N.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){Ke.viewport(xe.set(e,t,i,r))},this.setScissor=function(e,t,i,r){Ke.scissor(Ee.set(e,t,i,r))},this.setScissorTest=function(e){Ke.setScissorTest(be=e)},this.getClearColor=function(){return me},this.setClearColor=function(e,t){me.set(e),ve=void 0!==t?t:1,Ke.buffers.color.setClear(me.r,me.g,me.b,ve,z)},this.getClearAlpha=function(){return ve},this.setClearAlpha=function(e){ve=e,Ke.buffers.color.setClear(me.r,me.g,me.b,ve,z)},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=Ze.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Ze.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Ze.STENCIL_BUFFER_BIT),Ze.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.resetGLState=r,this.dispose=function(){N.removeEventListener("webglcontextlost",n,!1),at.dispose()},this.renderBufferImmediate=function(e,t,i){Ke.initAttributes();var r=qe.get(e);e.hasPositions&&!r.position&&(r.position=Ze.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Ze.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Ze.createBuffer()),e.hasColors&&!r.color&&(r.color=Ze.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(Ze.bindBuffer(Ze.ARRAY_BUFFER,r.position),Ze.bufferData(Ze.ARRAY_BUFFER,e.positionArray,Ze.DYNAMIC_DRAW),Ke.enableAttribute(n.position),Ze.vertexAttribPointer(n.position,3,Ze.FLOAT,!1,0,0)),e.hasNormals){if(Ze.bindBuffer(Ze.ARRAY_BUFFER,r.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===ga)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}Ze.bufferData(Ze.ARRAY_BUFFER,e.normalArray,Ze.DYNAMIC_DRAW),Ke.enableAttribute(n.normal),Ze.vertexAttribPointer(n.normal,3,Ze.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Ze.bindBuffer(Ze.ARRAY_BUFFER,r.uv),Ze.bufferData(Ze.ARRAY_BUFFER,e.uvArray,Ze.DYNAMIC_DRAW),Ke.enableAttribute(n.uv),Ze.vertexAttribPointer(et.uv,2,Ze.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==Ma&&(Ze.bindBuffer(Ze.ARRAY_BUFFER,r.color),Ze.bufferData(Ze.ARRAY_BUFFER,e.colorArray,Ze.DYNAMIC_DRAW),Ke.enableAttribute(n.color),Ze.vertexAttribPointer(n.color,3,Ze.FLOAT,!1,0,0)),Ke.disableUnusedAttributes(),Ze.drawArrays(Ze.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,i,r,n,a,o){Ke.setMaterial(n);var s=M(e,i,n,a),l=r.id;l+="_",l+=s.id,l+="_",l+=!0===n.wireframe;var u=!1;l!==le&&(le=l,u=!0);var c=a.morphTargetInfluences;if(void 0!==c){for(var h=[],d=0,m=c.length;d<m;d++){var v=c[d];h.push([v,d])}h.sort(f),h.length>8&&(h.length=8);for(var g=r.morphAttributes,d=0,m=h.length;d<m;d++){var v=h[d];if(Q[d]=v[0],0!==v[0]){var y=v[1];!0===n.morphTargets&&g.position&&r.addAttribute("morphTarget"+d,g.position[y]),!0===n.morphNormals&&g.normal&&r.addAttribute("morphNormal"+d,g.normal[y])}else!0===n.morphTargets&&r.removeAttribute("morphTarget"+d),!0===n.morphNormals&&r.removeAttribute("morphNormal"+d)}for(var d=h.length,E=Q.length;d<E;d++)Q[d]=0;s.getUniforms().setValue(Ze,"morphTargetInfluences",Q),u=!0}var y=r.index,b=r.attributes.position,x=1;!0===n.wireframe&&(y=tt.getWireframeAttribute(r),x=2);var I=gt;null!==y&&(I=yt,I.setIndex(y)),u&&(p(n,s,r),null!==y&&Ze.bindBuffer(Ze.ELEMENT_ARRAY_BUFFER,et.get(y).buffer));var T=0;null!==y?T=y.count:void 0!==b&&(T=b.count);var w=r.drawRange.start*x,C=r.drawRange.count*x,S=null!==o?o.start*x:0,A=null!==o?o.count*x:1/0,k=Math.max(w,S),R=Math.min(T,w+C,S+A)-1,B=Math.max(0,R-k+1);if(0!==B){if(a.isMesh)if(!0===n.wireframe)Ke.setLineWidth(n.wireframeLinewidth*t()),I.setMode(Ze.LINES);else switch(a.drawMode){case Bs:I.setMode(Ze.TRIANGLES);break;case Ls:I.setMode(Ze.TRIANGLE_STRIP);break;case Os:I.setMode(Ze.TRIANGLE_FAN)}else if(a.isLine){var L=n.linewidth;void 0===L&&(L=1),Ke.setLineWidth(L*t()),a.isLineSegments?I.setMode(Ze.LINES):a.isLineLoop?I.setMode(Ze.LINE_LOOP):I.setMode(Ze.LINE_STRIP)}else a.isPoints&&I.setMode(Ze.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&I.renderInstances(r,k,B):I.render(k,B)}},this.compile=function(e,t){V=[],e.traverse(function(e){e.isLight&&V.push(e)}),O(V,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)y(t.material[i],e.fog,t);else y(t.material,e.fog,t)})},this.render=function(e,t,i,r){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");le="",se=-1,ue=null,!0===e.autoUpdate&&e.updateMatrixWorld(),t.onBeforeRender(te),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),this.vr&&this.vr.enabled&&(t=this.vr.getCamera(t)),Se.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Ie.setFromMatrix(Se),V.length=0,K.length=0,$.length=0,Ce=this.localClippingEnabled,we=Te.init(this.clippingPlanes,Ce,t),W=at.get(e,t),W.init(),m(e,t,te.sortObjects),W.finish(),!0===te.sortObjects&&W.sort(),we&&Te.beginShadows(),L(V),Mt.render(e,t),O(V,t),we&&Te.endShadows(),Ue.frame++,Ue.calls=0,Ue.vertices=0,Ue.faces=0,Ue.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var n=e.background;null===n?Ke.buffers.color.setClear(me.r,me.g,me.b,ve,z):n&&n.isColor&&(Ke.buffers.color.setClear(n.r,n.g,n.b,1,z),r=!0),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),n&&n.isCubeTexture?(void 0===mt&&(mt=new De,vt=new ke(new Be(5,5,5),new q({uniforms:il.cube.uniforms,vertexShader:il.cube.vertexShader,fragmentShader:il.cube.fragmentShader,side:ma,depthTest:!1,depthWrite:!1,fog:!1}))),mt.projectionMatrix.copy(t.projectionMatrix),mt.matrixWorld.extractRotation(t.matrixWorld),mt.matrixWorldInverse.getInverse(mt.matrixWorld),vt.material.uniforms.tCube.value=n,vt.modelViewMatrix.multiplyMatrices(mt.matrixWorldInverse,vt.matrixWorld),it.update(vt),te.renderBufferDirect(mt,null,vt.geometry,vt.material,vt,null)):n&&n.isTexture&&(void 0===ot&&(ot=new Ne(-1,1,1,-1,0,1),pt=new ke(new Oe(2,2),new fe({depthTest:!1,depthWrite:!1,fog:!1}))),pt.material.map=n,it.update(pt),te.renderBufferDirect(ot,null,pt.geometry,pt.material,pt,null),e.background=null);var a=W.opaque,o=W.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&v(a,e,t,s),o.length&&v(o,e,t,s)}else a.length&&v(a,e,t),o.length&&v(o,e,t);Et.render(e,t),bt.render(e,t,de),i&&$e.updateRenderTargetMipmap(i),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),t.isArrayCamera&&t.enabled&&te.setScissorTest(!1),t.onAfterRender(te)},this.setFaceCulling=function(e,t){Ke.setCullFace(e),Ke.setFlipSided(t===ha)},this.allocTextureUnit=P,this.setTexture2D=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),$e.setTexture2D(t,i)}}(),this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),$e.setTexture2D(t,i)}}(),this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?$e.setTextureCube(t,i):$e.setTextureCubeDynamic(t,i)}}(),this.getRenderTarget=function(){return re},this.isMRTSupported=function(){return Xe.get("WEBGL_draw_buffers")},this.setRenderTarget=function(e){if(Array.isArray(e)){if(this.isMRTSupported()){re=e[0],$e.setupMultiRenderTarget(e);var t,i=qe.get(e[0]);t=i.__webglFramebuffer;var r=re;ce.copy(r.scissor),he=r.scissorTest,de.copy(r.viewport),oe!==t&&(Ze.bindFramebuffer(Ze.FRAMEBUFFER,t),oe=t),Ke.scissor(ce),Ke.setScissorTest(he),Ke.viewport(de)}}else{re=e,e&&void 0===qe.get(e).__webglFramebuffer&&$e.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var i=qe.get(e);t=n?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,ce.copy(e.scissor),he=e.scissorTest,de.copy(e.viewport)}else t=null,ce.copy(Ee).multiplyScalar(Me),he=be,de.copy(xe).multiplyScalar(Me);if(oe!==t&&(Ze.bindFramebuffer(Ze.FRAMEBUFFER,t),oe=t),Ke.scissor(ce),Ke.setScissorTest(he),Ke.viewport(de),n){var a=qe.get(e.texture);Ze.framebufferTexture2D(Ze.FRAMEBUFFER,Ze.COLOR_ATTACHMENT0,Ze.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,a.__webglTexture,e.activeMipMapLevel)}}},this.readRenderTargetPixels=function(e,t,i,r,n,a){if(!1===(e&&e.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=qe.get(e).__webglFramebuffer;if(o){var s=!1;o!==oe&&(Ze.bindFramebuffer(Ze.FRAMEBUFFER,o),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==_o&&D(u)!==Ze.getParameter(Ze.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Io||D(c)===Ze.getParameter(Ze.IMPLEMENTATION_COLOR_READ_TYPE)||c===ko&&(Xe.get("OES_texture_float")||Xe.get("WEBGL_color_buffer_float"))||c===Ro&&Xe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")
;Ze.checkFramebufferStatus(Ze.FRAMEBUFFER)===Ze.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&i>=0&&i<=e.height-n&&Ze.readPixels(t,i,r,n,D(u),D(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&Ze.bindFramebuffer(Ze.FRAMEBUFFER,oe)}}}}function mt(e,t){this.name="",this.color=new Z(e),this.density=void 0!==t?t:25e-5}function vt(e,t,i){this.name="",this.color=new Z(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function gt(){ue.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function yt(e,t,i,r,n){ue.call(this),this.lensFlares=[],this.positionScreen=new u,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,r,n)}function Mt(e){K.call(this),this.type="SpriteMaterial",this.color=new Z(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Et(e){ue.call(this),this.type="Sprite",this.material=void 0!==e?e:new Mt}function bt(){ue.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function xt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new c)}}function It(){ue.call(this),this.type="Bone"}function Tt(e,t){ke.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new c,this.bindMatrixInverse=new c;var i=this.initBones(),r=new xt(i);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function wt(e){K.call(this),this.type="LineBasicMaterial",this.color=new Z(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Ct(e,t,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new St(e,t);ue.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ae,this.material=void 0!==t?t:new wt({color:16777215*Math.random()})}function St(e,t){Ct.call(this,e,t),this.type="LineSegments"}function At(e,t){Ct.call(this,e,t),this.type="LineLoop"}function kt(e){K.call(this),this.type="PointsMaterial",this.color=new Z(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.positionOffset=!1,this.sizeAttribute=!1,this.lights=!1,this.setValues(e)}function Rt(e,t){ue.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ae,this.material=void 0!==t?t:new kt({color:16777215*Math.random()})}function Bt(){ue.call(this),this.type="Group"}function Lt(e,t,i,r,a,o,s,l,u){function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}n.call(this,e,t,i,r,a,o,s,l,u),this.generateMipmaps=!1;var h=this;c()}function Ot(e,t,i,r,a,o,s,l,u,c,h,d){n.call(this,null,o,s,l,u,c,r,a,h,d),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Pt(e,t,i,r,a,o,s,l,u){n.call(this,e,t,i,r,a,o,s,l,u),this.needsUpdate=!0}function Dt(e,t,i,r,a,o,s,l,u,c){if((c=void 0!==c?c:Go)!==Go&&c!==zo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Go&&(i=Co),void 0===i&&c===zo&&(i=Po),n.call(this,null,r,a,o,s,l,c,i,u),this.image={width:e,height:t},this.magFilter=void 0!==s?s:go,this.minFilter=void 0!==l?l:go,this.flipY=!1,this.generateMipmaps=!1}function Nt(e){Ae.call(this),this.type="WireframeGeometry";var t,i,r,n,a,o,s,l,c,h,d=[],f=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var g=v[t];for(i=0;i<3;i++)s=g[m[i]],l=g[m[(i+1)%3]],f[0]=Math.min(s,l),f[1]=Math.max(s,l),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)o=p[c],h=e.vertices[o.index1],d.push(h.x,h.y,h.z),h=e.vertices[o.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,M,E,b,x,I,T,w;if(h=new u,null!==e.index){for(y=e.attributes.position,M=e.index,E=e.groups,0===E.length&&(E=[{start:0,count:M.count,materialIndex:0}]),n=0,a=E.length;n<a;++n)for(b=E[n],x=b.start,I=b.count,t=x,r=x+I;t<r;t+=3)for(i=0;i<3;i++)s=M.getX(t+i),l=M.getX(t+(i+1)%3),f[0]=Math.min(s,l),f[1]=Math.max(s,l),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)o=p[c],h.fromBufferAttribute(y,o.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,o.index2),d.push(h.x,h.y,h.z)}else for(y=e.attributes.position,t=0,r=y.count/3;t<r;t++)for(i=0;i<3;i++)T=3*t+i,h.fromBufferAttribute(y,T),d.push(h.x,h.y,h.z),w=3*t+(i+1)%3,h.fromBufferAttribute(y,w),d.push(h.x,h.y,h.z)}this.addAttribute("position",new xe(d,3))}function _t(e,t,i){Se.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Ht(e,t,i)),this.mergeVertices()}function Ht(e,t,i){Ae.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var r,n,a=[],o=[],s=[],l=[],c=new u,h=new u,d=new u,f=new u,p=new u,m=t+1;for(r=0;r<=i;r++){var v=r/i;for(n=0;n<=t;n++){var g=n/t;h=e(g,v,h),o.push(h.x,h.y,h.z),g-1e-5>=0?(d=e(g-1e-5,v,d),f.subVectors(h,d)):(d=e(g+1e-5,v,d),f.subVectors(d,h)),v-1e-5>=0?(d=e(g,v-1e-5,d),p.subVectors(h,d)):(d=e(g,v+1e-5,d),p.subVectors(d,h)),c.crossVectors(f,p).normalize(),s.push(c.x,c.y,c.z),l.push(g,v)}}for(r=0;r<i;r++)for(n=0;n<t;n++){var y=r*m+n,M=r*m+n+1,E=(r+1)*m+n+1,b=(r+1)*m+n;a.push(y,M,b),a.push(M,E,b)}this.setIndex(a),this.addAttribute("position",new xe(o,3)),this.addAttribute("normal",new xe(s,3)),this.addAttribute("uv",new xe(l,2))}function Ft(e,t,i,r){Se.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},this.fromBufferGeometry(new Ut(e,t,i,r)),this.mergeVertices()}function Ut(e,t,i,n){function a(e,t,i,r){var n,a,o=Math.pow(2,r),l=[];for(n=0;n<=o;n++){l[n]=[];var u=e.clone().lerp(i,n/o),c=t.clone().lerp(i,n/o),h=o-n;for(a=0;a<=h;a++)l[n][a]=0===a&&n===o?u:u.clone().lerp(c,a/h)}for(n=0;n<o;n++)for(a=0;a<2*(o-n)-1;a++){var d=Math.floor(a/2);a%2==0?(s(l[n][d+1]),s(l[n+1][d]),s(l[n][d])):(s(l[n][d+1]),s(l[n+1][d+1]),s(l[n+1][d]))}}function o(){for(var e=0;e<m.length;e+=6){var t=m[e+0],i=m[e+2],r=m[e+4],n=Math.max(t,i,r),a=Math.min(t,i,r);n>.9&&a<.1&&(t<.2&&(m[e+0]+=1),i<.2&&(m[e+2]+=1),r<.2&&(m[e+4]+=1))}}function s(e){p.push(e.x,e.y,e.z)}function l(t,i){var r=3*t;i.x=e[r+0],i.y=e[r+1],i.z=e[r+2]}function c(){for(var e=new u,t=new u,i=new u,n=new u,a=new r,o=new r,s=new r,l=0,c=0;l<p.length;l+=9,c+=6){e.set(p[l+0],p[l+1],p[l+2]),t.set(p[l+3],p[l+4],p[l+5]),i.set(p[l+6],p[l+7],p[l+8]),a.set(m[c+0],m[c+1]),o.set(m[c+2],m[c+3]),s.set(m[c+4],m[c+5]),n.copy(e).add(t).add(i).divideScalar(3);var f=d(n);h(a,c+0,e,f),h(o,c+2,t,f),h(s,c+4,i,f)}}function h(e,t,i,r){r<0&&1===e.x&&(m[t]=e.x-1),0===i.x&&0===i.z&&(m[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}Ae.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1,n=n||0;var p=[],m=[];!function(e){for(var i=new u,r=new u,n=new u,o=0;o<t.length;o+=3)l(t[o+0],i),l(t[o+1],r),l(t[o+2],n),a(i,r,n,e)}(n),function(e){for(var t=new u,i=0;i<p.length;i+=3)t.x=p[i+0],t.y=p[i+1],t.z=p[i+2],t.normalize().multiplyScalar(e),p[i+0]=t.x,p[i+1]=t.y,p[i+2]=t.z}(i),function(){for(var e=new u,t=0;t<p.length;t+=3){e.x=p[t+0],e.y=p[t+1],e.z=p[t+2];var i=d(e)/2/Math.PI+.5,r=f(e)/Math.PI+.5;m.push(i,1-r)}c(),o()}(),this.addAttribute("position",new xe(p,3)),this.addAttribute("normal",new xe(p.slice(),3)),this.addAttribute("uv",new xe(m,2)),this.normalizeNormals()}function Gt(e,t){Se.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zt(e,t)),this.mergeVertices()}function zt(e,t){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ut.call(this,i,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jt(e,t){Se.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vt(e,t)),this.mergeVertices()}function Vt(e,t){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ut.call(this,i,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wt(e,t){Se.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Yt(e,t)),this.mergeVertices()}function Yt(e,t){var i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ut.call(this,r,n,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zt(e,t){Se.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){var i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ut.call(this,n,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xt(e,t,i,r,n,a){Se.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Jt(e,t,i,r,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Jt(e,t,i,n,a){function o(r){var a=e.getPointAt(r/t),o=c.normals[r],s=c.binormals[r];for(d=0;d<=n;d++){var l=d/n*Math.PI*2,u=Math.sin(l),h=-Math.cos(l);p.x=h*o.x+u*s.x,p.y=h*o.y+u*s.y,p.z=h*o.z+u*s.z,p.normalize(),g.push(p.x,p.y,p.z),f.x=a.x+i*p.x,f.y=a.y+i*p.y,f.z=a.z+i*p.z,v.push(f.x,f.y,f.z)}}function s(){for(d=1;d<=t;d++)for(h=1;h<=n;h++){var e=(n+1)*(d-1)+(h-1),i=(n+1)*d+(h-1),r=(n+1)*d+h,a=(n+1)*(d-1)+h;M.push(e,i,a),M.push(i,r,a)}}function l(){for(h=0;h<=t;h++)for(d=0;d<=n;d++)m.x=h/t,m.y=d/n,y.push(m.x,m.y)}Ae.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:a},t=t||64,i=i||1,n=n||8,a=a||!1;var c=e.computeFrenetFrames(t,a);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var h,d,f=new u,p=new u,m=new r,v=[],g=[],y=[],M=[];!function(){for(h=0;h<t;h++)o(h);o(!1===a?t:0),l(),s()}(),this.setIndex(M),this.addAttribute("position",new xe(v,3)),this.addAttribute("normal",new xe(g,3)),this.addAttribute("uv",new xe(y,2))}function Kt(e,t,i,r,n,a,o){Se.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new qt(e,t,i,r,n,a)),this.mergeVertices()}function qt(e,t,i,r,n,a){function o(e,t,i,r,n){var a=Math.cos(e),o=Math.sin(e),s=i/t*e,l=Math.cos(s);n.x=r*(2+l)*.5*a,n.y=r*(2+l)*o*.5,n.z=r*Math.sin(s)*.5}Ae.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},e=e||100,t=t||40,i=Math.floor(i)||64,r=Math.floor(r)||8,n=n||2,a=a||3;var s,l,c=[],h=[],d=[],f=[],p=new u,m=new u,v=new u,g=new u,y=new u,M=new u,E=new u;for(s=0;s<=i;++s){var b=s/i*n*Math.PI*2;for(o(b,n,a,e,v),o(b+.01,n,a,e,g),M.subVectors(g,v),E.addVectors(g,v),y.crossVectors(M,E),E.crossVectors(y,M),y.normalize(),E.normalize(),l=0;l<=r;++l){var x=l/r*Math.PI*2,I=-t*Math.cos(x),T=t*Math.sin(x);p.x=v.x+(I*E.x+T*y.x),p.y=v.y+(I*E.y+T*y.y),p.z=v.z+(I*E.z+T*y.z),h.push(p.x,p.y,p.z),m.subVectors(p,v).normalize(),d.push(m.x,m.y,m.z),f.push(s/i),f.push(l/r)}}for(l=1;l<=i;l++)for(s=1;s<=r;s++){var w=(r+1)*(l-1)+(s-1),C=(r+1)*l+(s-1),S=(r+1)*l+s,A=(r+1)*(l-1)+s;c.push(w,C,A),c.push(C,S,A)}this.setIndex(c),this.addAttribute("position",new xe(h,3)),this.addAttribute("normal",new xe(d,3)),this.addAttribute("uv",new xe(f,2))}function $t(e,t,i,r,n){Se.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},this.fromBufferGeometry(new ei(e,t,i,r,n)),this.mergeVertices()}function ei(e,t,i,r,n){Ae.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},e=e||100,t=t||40,i=Math.floor(i)||8,r=Math.floor(r)||6,n=n||2*Math.PI;var a,o,s=[],l=[],c=[],h=[],d=new u,f=new u,p=new u;for(a=0;a<=i;a++)for(o=0;o<=r;o++){var m=o/r*n,v=a/i*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(m),f.y=(e+t*Math.cos(v))*Math.sin(m),f.z=t*Math.sin(v),l.push(f.x,f.y,f.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(o/r),h.push(a/i)}for(a=1;a<=i;a++)for(o=1;o<=r;o++){var g=(r+1)*a+o-1,y=(r+1)*(a-1)+o-1,M=(r+1)*(a-1)+o,E=(r+1)*a+o;s.push(g,y,E),s.push(y,M,E)}this.setIndex(s),this.addAttribute("position",new xe(l,3)),this.addAttribute("normal",new xe(c,3)),this.addAttribute("uv",new xe(h,2))}function ti(e,t){Se.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ii(e,t)),this.mergeVertices()}function ii(e,t){if(void 0===e)return void(e=[]);Ae.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals()}function ri(e,t){Se.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ni(e,t)),this.mergeVertices()}function ni(e,t){t=t||{};var i=t.font;if(!1===(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Se;var r=i.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ii.call(this,r,t),this.type="TextBufferGeometry"}function ai(e,t,i,r,n,a,o){Se.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new oi(e,t,i,r,n,a,o)),this.mergeVertices()}function oi(e,t,i,r,n,a,o){Ae.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,l,c=a+o,h=0,d=[],f=new u,p=new u,m=[],v=[],g=[],y=[];for(l=0;l<=i;l++){var M=[],E=l/i;for(s=0;s<=t;s++){var b=s/t;f.x=-e*Math.cos(r+b*n)*Math.sin(a+E*o),f.y=e*Math.cos(a+E*o),f.z=e*Math.sin(r+b*n)*Math.sin(a+E*o),v.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),g.push(p.x,p.y,p.z),y.push(b,1-E),M.push(h++)}d.push(M)}for(l=0;l<i;l++)for(s=0;s<t;s++){var x=d[l][s+1],I=d[l][s],T=d[l+1][s],w=d[l+1][s+1];(0!==l||a>0)&&m.push(x,I,w),(l!==i-1||c<Math.PI)&&m.push(I,T,w)}this.setIndex(m),this.addAttribute("position",new xe(v,3)),this.addAttribute("normal",new xe(g,3)),this.addAttribute("uv",new xe(y,2))}function si(e,t,i,r,n,a){Se.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new li(e,t,i,r,n,a)),this.mergeVertices()}function li(e,t,i,n,a,o){Ae.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:a,thetaLength:o},e=e||20,t=t||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):1;var s,l,c,h=[],d=[],f=[],p=[],m=e,v=(t-e)/n,g=new u,y=new r;for(l=0;l<=n;l++){for(c=0;c<=i;c++)s=a+c/i*o,g.x=m*Math.cos(s),g.y=m*Math.sin(s),d.push(g.x,g.y,g.z),f.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,p.push(y.x,y.y);m+=v}for(l=0;l<n;l++){var M=l*(i+1);for(c=0;c<i;c++){s=c+M;var E=s,b=s+i+1,x=s+i+2,I=s+1;h.push(E,b,I),h.push(b,x,I)}}this.setIndex(h),this.addAttribute("position",new xe(d,3)),this.addAttribute("normal",new xe(f,3)),this.addAttribute("uv",new xe(p,2))}function ui(e,t,i,r){Se.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},this.fromBufferGeometry(new ci(e,t,i,r)),this.mergeVertices()}function ci(e,t,i,n){Ae.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=js.clamp(n,0,2*Math.PI);var a,o,s,l=[],c=[],h=[],d=1/t,f=new u,p=new r;for(o=0;o<=t;o++){var m=i+o*d*n,v=Math.sin(m),g=Math.cos(m);for(s=0;s<=e.length-1;s++)f.x=e[s].x*v,f.y=e[s].y,f.z=e[s].x*g,c.push(f.x,f.y,f.z),p.x=o/t,p.y=s/(e.length-1),h.push(p.x,p.y)}for(o=0;o<t;o++)for(s=0;s<e.length-1;s++){a=s+o*e.length;var y=a,M=a+e.length,E=a+e.length+1,b=a+1;l.push(y,M,b),l.push(M,E,b)}if(this.setIndex(l),this.addAttribute("position",new xe(c,3)),this.addAttribute("uv",new xe(h,2)),this.computeVertexNormals(),n===2*Math.PI){var x=this.attributes.normal.array,I=new u,T=new u,w=new u;for(a=t*e.length*3,o=0,s=0;o<e.length;o++,s+=3)I.x=x[s+0],I.y=x[s+1],I.z=x[s+2],T.x=x[a+s+0],T.y=x[a+s+1],T.z=x[a+s+2],w.addVectors(I,T).normalize(),x[s+0]=x[a+s+0]=w.x,x[s+1]=x[a+s+1]=w.y,x[s+2]=x[a+s+2]=w.z}}function hi(e,t){Se.call(this),this.type="ShapeGeometry","object"===(void 0===t?"undefined":_typeof(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new di(e,t)),this.mergeVertices()}function di(e,t){function i(e){var i,s,u,c=n.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===sl.isClockWise(d))for(d=d.reverse(),i=0,s=f.length;i<s;i++)u=f[i],!0===sl.isClockWise(u)&&(f[i]=u.reverse());var p=sl.triangulateShape(d,f);for(i=0,s=f.length;i<s;i++)u=f[i],d=d.concat(u);for(i=0,s=d.length;i<s;i++){var m=d[i];n.push(m.x,m.y,0),a.push(0,0,1),o.push(m.x,m.y)}for(i=0,s=p.length;i<s;i++){var v=p[i],g=v[0]+c,y=v[1]+c,M=v[2]+c;r.push(g,y,M),l+=3}}Ae.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(e))i(e);else for(var u=0;u<e.length;u++)i(e[u]),this.addGroup(s,l,u),s+=l,l=0;this.setIndex(r),this.addAttribute("position",new xe(n,3)),this.addAttribute("normal",new xe(a,3)),this.addAttribute("uv",new xe(o,2))}function fi(e,t){Ae.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var i,r,n,a,o=[],s=Math.cos(js.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new Se,a.fromBufferGeometry(e)):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,d=a.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],v=0;v<3;v++)i=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(i,r),l[1]=Math.max(i,r),n=l[0]+","+l[1],void 0===u[n]?u[n]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[n].face2=f;for(n in u){var g=u[n];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new xe(o,3))}function pi(e,t,i,r,n,a,o,s){Se.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new mi(e,t,i,r,n,a,o,s)),this.mergeVertices()}function mi(e,t,i,n,a,o,s,l){function c(i){var a,o,c,g=new r,E=new u,b=0,x=!0===i?e:t,I=!0===i?1:-1;for(o=v,a=1;a<=n;a++)f.push(0,y*I,0),p.push(0,I,0),m.push(.5,.5),v++;for(c=v,a=0;a<=n;a++){var T=a/n,w=T*l+s,C=Math.cos(w),S=Math.sin(w);E.x=x*S,E.y=y*I,E.z=x*C,f.push(E.x,E.y,E.z),p.push(0,I,0),g.x=.5*C+.5,g.y=.5*S*I+.5,m.push(g.x,g.y),v++}for(a=0;a<n;a++){var A=o+a,k=c+a;!0===i?d.push(k,k+1,A):d.push(k+1,k,A),b+=3}h.addGroup(M,b,!0===i?1:2),M+=b}Ae.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};var h=this;e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,n=Math.floor(n)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var d=[],f=[],p=[],m=[],v=0,g=[],y=i/2,M=0;!function(){var r,o,c=new u,E=new u,b=0,x=(t-e)/i;for(o=0;o<=a;o++){var I=[],T=o/a,w=T*(t-e)+e;for(r=0;r<=n;r++){var C=r/n,S=C*l+s,A=Math.sin(S),k=Math.cos(S);E.x=w*A,E.y=-T*i+y,E.z=w*k,f.push(E.x,E.y,E.z),c.set(A,x,k).normalize(),p.push(c.x,c.y,c.z),m.push(C,1-T),I.push(v++)}g.push(I)}for(r=0;r<n;r++)for(o=0;o<a;o++){var R=g[o][r],B=g[o+1][r],L=g[o+1][r+1],O=g[o][r+1];d.push(R,B,O),d.push(B,L,O),b+=6}h.addGroup(M,b,0),M+=b}(),!1===o&&(e>0&&c(!0),t>0&&c(!1)),this.setIndex(d),this.addAttribute("position",new xe(f,3)),this.addAttribute("normal",new xe(p,3)),this.addAttribute("uv",new xe(m,2))}function vi(e,t,i,r,n,a,o){pi.call(this,0,e,t,i,r,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o}}function gi(e,t,i,r,n,a,o){mi.call(this,0,e,t,i,r,n,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o}}function yi(e,t,i,r){Se.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new Mi(e,t,i,r)),this.mergeVertices()}function Mi(e,t,i,n){Ae.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var a,o,s=[],l=[],c=[],h=[],d=new u,f=new r;for(l.push(0,0,0),c.push(0,0,1),h.push(.5,.5),o=0,a=3;o<=t;o++,a+=3){var p=i+o/t*n;d.x=e*Math.cos(p),d.y=e*Math.sin(p),l.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(l[a]/e+1)/2,f.y=(l[a+1]/e+1)/2,h.push(f.x,f.y)}for(a=1;a<=t;a++)s.push(a,a+1,0);this.setIndex(s),this.addAttribute("position",new xe(l,3)),this.addAttribute("normal",new xe(c,3)),this.addAttribute("uv",new xe(h,2))}function Ei(e){q.call(this,{uniforms:el.merge([$s.lights,{opacity:{value:1}}]),vertexShader:tl.shadow_vert,fragmentShader:tl.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}}),this.setValues(e)}function bi(e){q.call(this,e),this.type="RawShaderMaterial"}function xi(e){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Z(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ii(e){xi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ti(e){K.call(this),this.type="MeshPhongMaterial",this.color=new Z(16777215),this.specular=new Z(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function wi(e){Ti.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ci(e){K.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Si(e){K.call(this),this.type="MeshLambertMaterial",this.color=new Z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qa,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ai(e){K.call(this),this.type="LineDashedMaterial",this.color=new Z(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function ki(e,t,i){var r=this,n=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===n&&void 0!==r.onStart&&r.onStart(e,a,o),n=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}function Ri(e){this.manager=void 0!==e?e:hl}function Bi(e){this.manager=void 0!==e?e:hl,this._parser=null}function Li(e){this.manager=void 0!==e?e:hl,this._parser=null}function Oi(e){this.manager=void 0!==e?e:hl}function Pi(e){this.manager=void 0!==e?e:hl}function Di(e){this.manager=void 0!==e?e:hl}function Ni(e,t){ue.call(this),this.type="Light",this.color=new Z(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function _i(e,t,i){Ni.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ue.DefaultUp),this.updateMatrix(),this.groundColor=new Z(t)}function Hi(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new c}function Fi(){Hi.call(this,new De(50,1,.5,500))}function Ui(e,t,i,r,n,a){Ni.call(this,e,t),this.type="SpotLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new Fi}function Gi(e,t,i,r){Ni.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1,this.shadow=new Hi(new De(90,1,.5,500))}function zi(){Hi.call(this,new Ne(-5,5,5,-5,.5,500))}function ji(e,t){Ni.call(this,e,t),this.type="DirectionalLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,this.shadow=new zi}function Vi(e,t){Ni.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Wi(e,t,i,r){Ni.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==i?i:10,this.height=void 0!==r?r:10}function Yi(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function Zi(e,t,i,r){Yi.call(this,e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Qi(e,t,i,r){Yi.call(this,e,t,i,r)}function Xi(e,t,i,r){Yi.call(this,e,t,i,r)}function Ji(e,t,i,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=dl.convertArray(t,this.TimeBufferType),this.values=dl.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Ki(e,t,i,r){Ji.call(this,e,t,i,r)}function qi(e,t,i,r){Yi.call(this,e,t,i,r)}function $i(e,t,i,r){Ji.call(this,e,t,i,r)}function er(e,t,i,r){Ji.call(this,e,t,i,r)}function tr(e,t,i,r){Ji.call(this,e,t,i,r)}function ir(e,t,i){Ji.call(this,e,t,i)}function rr(e,t,i,r){Ji.call(this,e,t,i,r)}function nr(e,t,i,r){Ji.apply(this,arguments)}function ar(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=js.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function or(e){this.manager=void 0!==e?e:hl,this.textures={}}function sr(e){this.manager=void 0!==e?e:hl}function lr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ur(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:hl,this.withCredentials=!1}function cr(e){this.manager=void 0!==e?e:hl,this.texturePath=""}function hr(e,t,i,r,n){var a=.5*(r-t),o=.5*(n-i),s=e*e;return(2*i-2*r+a+o)*(e*s)+(-3*i+3*r-2*a-o)*s+a*e+i}function dr(e,t){var i=1-e;return i*i*t}function fr(e,t){return 2*(1-e)*e*t}function pr(e,t){return e*e*t}function mr(e,t,i,r){return dr(e,t)+fr(e,i)+pr(e,r)}function vr(e,t){var i=1-e;return i*i*i*t}function gr(e,t){var i=1-e;return 3*i*i*e*t}function yr(e,t){return 3*(1-e)*e*e*t}function Mr(e,t){return e*e*e*t}function Er(e,t,i,r,n){return vr(e,t)+gr(e,i)+yr(e,r)+Mr(e,n)}function br(){this.arcLengthDivisions=200}function xr(e,t){br.call(this),this.v1=e,this.v2=t}function Ir(){br.call(this),this.curves=[],this.autoClose=!1}function Tr(e,t,i,r,n,a,o,s){br.call(this),this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function wr(e){br.call(this),this.points=void 0===e?[]:e}function Cr(e,t,i,r){br.call(this),this.v0=e,this.v1=t,this.v2=i,this.v3=r}function Sr(e,t,i){br.call(this),this.v0=e,this.v1=t,this.v2=i}function Ar(e){Ir.call(this),this.currentPoint=new r,e&&this.fromPoints(e)}function kr(){Ar.apply(this,arguments),this.holes=[]}function Rr(){this.subPaths=[],this.currentPath=null}function Br(e){this.data=e}function Lr(e){this.manager=void 0!==e?e:hl}function Or(e){this.manager=void 0!==e?e:hl}function Pr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new De,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new De,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Dr(e,t,i){ue.call(this),this.type="CubeCamera";var r=new De(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new u(1,0,0)),this.add(r);var n=new De(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new u(-1,0,0)),this.add(n);var a=new De(90,1,e,t);a.up.set(0,0,1),a.lookAt(new u(0,1,0)),this.add(a);var o=new De(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new u(0,-1,0)),this.add(o);var l=new De(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new u(0,0,1)),this.add(l);var c=new De(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new u(0,0,-1)),this.add(c);var h={format:No,magFilter:Eo,minFilter:Eo};this.renderTarget=new s(i,i,h),
this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,s=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,r,i),i.activeCubeFace=1,e.render(t,n,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,o,i),i.activeCubeFace=4,e.render(t,l,i),i.texture.generateMipmaps=s,i.activeCubeFace=5,e.render(t,c,i),e.setRenderTarget(null)}}function Nr(e){De.call(this),this.enabled=!1,this.cameras=e||[]}function _r(){ue.call(this),this.type="AudioListener",this.context=El.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Hr(e){ue.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Fr(e){Hr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ur(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Gr(e,t,i){this.binding=e,this.valueSize=i;var r,n=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":n=Array,r=this._select;break;default:r=this._lerp}this.buffer=new n(4*i),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function zr(e,t,i){var r=i||jr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function jr(e,t,i){this.path=t,this.parsedPath=i||jr.parseTrackName(t),this.node=jr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Vr(e){this.uuid=js.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var i=0,r=arguments.length;i!==r;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Wr(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null;for(var r=t.tracks,n=r.length,a=new Array(n),o={endingStart:Rs,endingEnd:Rs},s=0;s!==n;++s){var l=r[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ks,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Yr(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Zr(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Qr(){Ae.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Xr(e,t,i,r){this.uuid=js.generateUUID(),this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}function Jr(e,t){this.uuid=js.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Kr(e,t,i){Jr.call(this,e,t),this.meshPerAttribute=i||1}function qr(e,t,i){pe.call(this,e,t),this.meshPerAttribute=i||1}function $r(e,t,i,r){this.ray=new oe(e,t),this.near=i||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function en(e,t){return e.distance-t.distance}function tn(e,t,i,r){if(!1!==e.visible&&(e.raycast(t,i),!0===r))for(var n=e.children,a=0,o=n.length;a<o;a++)tn(n[a],t,i,!0)}function rn(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function nn(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function an(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function on(e,t){ke.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,r=i-1,n=i/1;this.createAnimation("__default",0,r,n),this.setAnimationWeight("__default",1)}function sn(e){ue.call(this),this.material=e,this.render=function(e){}}function ln(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16711680,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Ae,u=new xe(2*o*3,3);l.addAttribute("position",u),St.call(this,l,new wt({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function un(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Ae,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,n=1;r<32;r++,n++){var a=r/32*Math.PI*2,o=n/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}t.addAttribute("position",new xe(i,3));var s=new wt({fog:!1});this.cone=new St(t,s),this.add(this.cone),this.update()}function cn(e){this.bones=this.getBoneList(e);for(var t=new Ae,i=[],r=[],n=new Z(0,0,1),a=new Z(0,1,0),o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(n.r,n.g,n.b),r.push(a.r,a.g,a.b))}t.addAttribute("position",new xe(i,3)),t.addAttribute("color",new xe(r,3));var l=new wt({vertexColors:ba,depthTest:!1,depthWrite:!1,transparent:!0});St.call(this,t,l),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function hn(e,t){this.light=e,this.light.updateMatrixWorld();var i=new oi(t,4,2),r=new fe({wireframe:!0,fog:!1});r.color.copy(this.light.color),ke.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function dn(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new wt({color:e.color}),i=new Ae;i.addAttribute("position",new pe(new Float32Array(15),3)),this.add(new Ct(i,t)),this.update()}function fn(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var i=new Vt(t);i.rotateY(.5*Math.PI);var r=new fe({vertexColors:ba,wireframe:!0}),n=i.getAttribute("position"),a=new Float32Array(3*n.count);i.addAttribute("color",new pe(a,3)),this.add(new ke(i,r)),this.update()}function pn(e,t,i,r){e=e||10,t=t||10,i=new Z(void 0!==i?i:4473924),r=new Z(void 0!==r?r:8947848);for(var n=t/2,a=e/t,o=e/2,s=[],l=[],u=0,c=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=u===n?i:r;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var f=new Ae;f.addAttribute("position",new xe(s,3)),f.addAttribute("color",new xe(l,3));var p=new wt({vertexColors:ba});St.call(this,f,p)}function mn(e,t,i,r,n,a){e=e||10,t=t||16,i=i||8,r=r||64,n=new Z(void 0!==n?n:4473924),a=new Z(void 0!==a?a:8947848);var o,s,l,u,c,h,d,f=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,f.push(0,0,0),f.push(o,0,s),d=1&u?n:a,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=i;u++)for(d=1&u?n:a,h=e-e/i*u,c=0;c<r;c++)l=c/r*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,f.push(o,0,s),p.push(d.r,d.g,d.b),l=(c+1)/r*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,f.push(o,0,s),p.push(d.r,d.g,d.b);var m=new Ae;m.addAttribute("position",new xe(f,3)),m.addAttribute("color",new xe(p,3));var v=new wt({vertexColors:ba});St.call(this,m,v)}function vn(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16776960,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Ae,u=new xe(2*o*3,3);l.addAttribute("position",u),St.call(this,l,new wt({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function gn(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var i=new Ae;i.addAttribute("position",new xe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new wt({fog:!1});this.add(new Ct(i,r)),i=new Ae,i.addAttribute("position",new xe([0,0,0,0,0,1],3)),this.add(new Ct(i,r)),this.update()}function yn(e){function t(e,t,r){i(e,r),i(t,r)}function i(e,t){a.push(0,0,0),o.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(a.length/3-1)}var r=new Ae,n=new wt({color:16777215,vertexColors:Ea}),a=[],o=[],s={},l=new Z(16755200),u=new Z(16711680),c=new Z(43775),h=new Z(16777215),d=new Z(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",h),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),r.addAttribute("position",new xe(a,3)),r.addAttribute("color",new xe(o,3)),St.call(this,r,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Mn(e,t){this.object=e,void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new Ae;n.setIndex(new pe(i,1)),n.addAttribute("position",new pe(r,3)),St.call(this,n,new wt({color:t})),this.matrixAutoUpdate=!1,this.update()}function En(e,t,i,r,n,a){ue.call(this),void 0===r&&(r=16776960),void 0===i&&(i=1),void 0===n&&(n=.2*i),void 0===a&&(a=.2*n),void 0===bl&&(bl=new Ae,bl.addAttribute("position",new xe([0,0,0,0,1,0],3)),xl=new mi(0,.5,1,5,1),xl.translate(0,-.5,0)),this.position.copy(t),this.line=new Ct(bl,new wt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ke(xl,new fe({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,a)}function bn(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ae;r.addAttribute("position",new xe(t,3)),r.addAttribute("color",new xe(i,3));var n=new wt({vertexColors:ba});St.call(this,r,n)}function xn(){function e(e,a,o,s){t=e,i=o,r=-3*e+3*a-2*o-s,n=2*e-2*a+o+s}var t=0,i=0,r=0,n=0;return{initCatmullRom:function(t,i,r,n,a){e(i,r,a*(r-t),a*(n-i))},initNonuniformCatmullRom:function(t,i,r,n,a,o,s){var l=(i-t)/a-(r-t)/(a+o)+(r-i)/o,u=(r-i)/o-(n-i)/(o+s)+(n-r)/s;l*=o,u*=o,e(i,r,l,u)},calc:function(e){var a=e*e;return t+i*e+r*a+n*(a*e)}}}function In(e){br.call(this),this.points=e||[],this.closed=!1}function Tn(e,t,i,r){br.call(this),this.v0=e,this.v1=t,this.v2=i,this.v3=r}function wn(e,t,i){br.call(this),this.v0=e,this.v1=t,this.v2=i}function Cn(e,t){br.call(this),this.v1=e,this.v2=t}function Sn(e,t,i,r,n,a){Tr.call(this,e,t,i,i,r,n,a)}function An(e,t,i,r,n,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new de(e,t,i,n,a,o)}function kn(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Rn(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Bn(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Rt(e,t)}function Ln(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Et(e)}function On(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Rt(e,t)}function Pn(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new kt(e)}function Dn(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new kt(e)}function Nn(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new kt(e)}function _n(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(e,t,i)}function Hn(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new pe(e,t).setDynamic(!0)}function Fn(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new me(e,t)}function Un(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ve(e,t)}function Gn(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ge(e,t)}function zn(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ye(e,t)}function jn(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Me(e,t)}function Vn(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ee(e,t)}function Wn(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new be(e,t)}function Yn(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new xe(e,t)}function Zn(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ie(e,t)}function Qn(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,e),this.type="catmullrom",this.closed=!0}function Xn(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,e),this.type="catmullrom"}function Jn(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),In.call(this,e),this.type="catmullrom"}function Kn(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Mn(e,t)}function qn(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new St(new fi(e.geometry),new wt({color:void 0!==t?t:16777215}))}function $n(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new St(new Nt(e.geometry),new wt({color:void 0!==t?t:16777215}))}function ea(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ri(e)}function ta(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Li(e)}function ia(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ra(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function na(t,i,r,n){function a(e,t){null!==t.index&&i.remove(t.index);for(var n in t.attributes)i.remove(t.attributes[n]);var a=c[e];a&&(i.remove(a),delete c[e]),a=c[t.id],a&&(i.remove(a),delete c[t.id]),r.geometries--}function o(e,t){var i=t.id;if(u.has(i))return u.get(i);var n;return t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ae).setFromObject(e)),n=t._bufferGeometry),u.set(i,n),r.geometries++,n}function s(e){var r=e.index,n=e.attributes;null!==r&&i.update(r,t.ELEMENT_ARRAY_BUFFER);for(var a in n)i.update(n[a],t.ARRAY_BUFFER);var o=e.morphAttributes;for(var a in o)for(var s=o[a],l=0,u=s.length;l<u;l++)i.update(s[l],t.ARRAY_BUFFER)}function l(e){var r=c[e.id];if(r)return r;var n=[],a=e.index,o=e.attributes;if(null!==a)for(var s=a.array,l=0,u=s.length;l<u;l+=3){var h=s[l+0],d=s[l+1],f=s[l+2];n.push(h,d,d,f,f,h)}else for(var s=o.position.array,l=0,u=s.length/3-1;l<u;l+=3){var h=l+0,d=l+1,f=l+2;n.push(h,d,d,f,f,h)}return r=new(we(n)>65535?be:Me)(n,1),i.update(r,t.ELEMENT_ARRAY_BUFFER),c[e.id]=r,r}var u=new e(n),c={};return u.shift=function(){var t=e.prototype.shift.call(this);a(t[0],t[1])},{get:o,update:s,getWireframeAttribute:l}}function aa(e){function t(){return null===q?fe:1}function i(){Pe.init(),Pe.scissor(re.copy(pe).multiplyScalar(fe)),Pe.viewport(se.copy(ve).multiplyScalar(fe)),Pe.buffers.color.setClear(ue.r,ue.g,ue.b,ce,H)}function r(){K=null,ie=null,te="",ee=-1,Pe.reset()}function n(e){e.preventDefault(),r(),i(),De.clear(),Fe.clear()}function o(e){var t=e.target;t.removeEventListener("dispose",o),s(t)}function s(e){l(e),De.remove(e)}function l(e){var t=De.get(e).program;e.program=void 0,void 0!==t&&Ue.releaseProgram(t)}function d(e,t){return Math.abs(t[0])-Math.abs(e[0])}function f(e,t,i,r){if(i&&i.isInstancedBufferGeometry&&null===Be.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Pe.initAttributes();var n=i.attributes,a=t.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=n[s];if(void 0!==u){var c=u.normalized,h=u.itemSize,d=He.get(u),f=d.buffer,p=d.type,m=d.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data,g=v.stride,y=u.offset;v&&v.isInstancedInterleavedBuffer?(Pe.enableAttributeAndDivisor(l,v.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):Pe.enableAttribute(l),ke.bindBuffer(ke.ARRAY_BUFFER,f),ke.vertexAttribPointer(l,h,p,c,g*m,(r*g+y)*m)}else u.isInstancedBufferAttribute?(Pe.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=u.meshPerAttribute*u.count)):Pe.enableAttribute(l),ke.bindBuffer(ke.ARRAY_BUFFER,f),ke.vertexAttribPointer(l,h,p,c,0,r*h*m)}else if(void 0!==o){var M=o[s];if(void 0!==M)switch(M.length){case 2:ke.vertexAttrib2fv(l,M);break;case 3:ke.vertexAttrib3fv(l,M);break;case 4:ke.vertexAttrib4fv(l,M);break;default:ke.vertexAttrib1fv(l,M)}}}}Pe.disableUnusedAttributes()}function p(e,t,i){var r=De.get(e),n=Ue.getParameters(e,we,t,ye.numPlanes,ye.numIntersection,i),a=Ue.getProgramCode(e,n),s=r.program,u=!0;if(void 0===s)e.addEventListener("dispose",o);else if(s.code!==a)l(e);else{if(void 0!==n.shaderID)return;u=!1}if(u){if(n.shaderID){var c=il[n.shaderID];r.__webglShader={name:e.type,uniforms:el.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,s=Ue.acquireProgram(e,n,a),r.program=s,e.program=s}var h=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<Q.maxMorphTargets;d++)h["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<Q.maxMorphNormals;d++)h["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ye.numPlanes,r.numIntersection=ye.numIntersection,f.clippingPlanes=ye.uniform),r.fog=t,r.lightsHash=we.hash,e.lights&&(f.ambientLightColor.value=we.ambient,f.directionalLights.value=we.directional,f.spotLights.value=we.spot,f.rectAreaLights.value=we.rectArea,f.pointLights.value=we.point,f.hemisphereLights.value=we.hemi,f.directionalShadowMap.value=we.directionalShadowMap,f.directionalShadowMatrix.value=we.directionalShadowMatrix,f.spotShadowMap.value=we.spotShadowMap,f.spotShadowMatrix.value=we.spotShadowMatrix,f.pointShadowMap.value=we.pointShadowMap,f.pointShadowMatrix.value=we.pointShadowMatrix);var p=r.program.getUniforms(),m=Y.seqWithValue(p.seq,f);r.uniformsList=m}function m(e,t,i,r){le=0;var n=De.get(i);if(Me&&(Ee||e!==ie)){var a=e===ie&&i.id===ee;ye.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,a)}!1===i.needsUpdate&&(void 0===n.program?i.needsUpdate=!0:i.fog&&n.fog!==t?i.needsUpdate=!0:i.lights&&n.lightsHash!==we.hash?i.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===ye.numPlanes&&n.numIntersection===ye.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,t,r),i.needsUpdate=!1);var o=!1,s=!1,l=!1,u=n.program,c=u.getUniforms(),d=n.__webglShader.uniforms;if(u.id!==K&&(ke.useProgram(u.program),K=u.id,o=!0,s=!0,l=!0),i.id!==ee&&(ee=i.id,s=!0),o||e!==ie){if(c.setValue(ke,"projectionMatrix",e.projectionMatrix),Oe.logarithmicDepthBuffer&&c.setValue(ke,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ie&&(ie=e,s=!0,l=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=c.map.cameraPosition;void 0!==f&&f.setValue(ke,xe.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(ke,"viewMatrix",e.matrixWorldInverse),c.setValue(ke,"toneMappingExposure",Q.toneMappingExposure),c.setValue(ke,"toneMappingWhitePoint",Q.toneMappingWhitePoint)}if(i.skinning){c.setOptional(ke,r,"bindMatrix"),c.setOptional(ke,r,"bindMatrixInverse");var m=r.skeleton;if(m){var A=m.bones;if(Oe.floatVertexTextures){if(void 0===m.boneTexture){var k=Math.sqrt(4*A.length);k=js.nextPowerOfTwo(Math.ceil(k)),k=Math.max(k,4);var R=new Float32Array(k*k*4);R.set(m.boneMatrices);var B=new h(R,k,k,_o,ko);m.boneMatrices=R,m.boneTexture=B,m.boneTextureSize=k}c.setValue(ke,"boneTexture",m.boneTexture),c.setValue(ke,"boneTextureSize",m.boneTextureSize)}else c.setOptional(ke,m,"boneMatrices")}}if(s&&(i.lights&&S(d,l),t&&i.fog&&E(d,t),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&v(d,i),i.isLineBasicMaterial?g(d,i):i.isLineDashedMaterial?(g(d,i),y(d,i)):i.isPointsMaterial?M(d,i):i.isMeshLambertMaterial?b(d,i):i.isMeshToonMaterial?I(d,i):i.isMeshPhongMaterial?x(d,i):i.isMeshPhysicalMaterial?w(d,i):i.isMeshStandardMaterial?T(d,i):i.isMeshDepthMaterial?i.displacementMap&&(d.displacementMap.value=i.displacementMap,d.displacementScale.value=i.displacementScale,d.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&C(d,i),void 0!==d.ltcMat&&(d.ltcMat.value=$s.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=$s.LTC_MAG_TEXTURE),Y.upload(ke,n.uniformsList,d,Q)),c.map.objId){var L=r.originalId;W.set((L>>16&255)/255,(L>>8&255)/255,(255&L)/255),c.setValue(ke,"objId",W)}return c.setValue(ke,"modelViewMatrix",r.modelViewMatrix),c.setValue(ke,"normalMatrix",r.normalMatrix),c.setValue(ke,"modelMatrix",r.matrixWorld),u}function v(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var i;if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var r=i.offset,n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y),e.rotateMatrix.value.copy(i.rotateMatrix)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function g(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function y(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function M(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*fe,e.scale.value=.5*de,e.map.value=t.map,null!==t.map){var i=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}}function E(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function b(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function x(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function I(e,t){x(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function T(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function w(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,T(e,t)}function C(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function S(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function A(e){for(var t=0,i=0,r=e.length;i<r;i++){var n=e[i];n.castShadow&&(we.shadows[t]=n,t++)}we.shadows.length=t}function k(e,t){var i,r,n,a,o,s,l,u,c=0,h=0,d=0,f=t.matrixWorldInverse,p=0,m=0,v=0,g=0,y=0;for(i=0,r=e.length;i<r;i++)if(n=e[i],o=n.color,s=n.intensity,l=n.distance,u=n.shadow&&n.shadow.map?n.shadow.map.texture:null,n.isAmbientLight)c+=o.r*s,h+=o.g*s,d+=o.b*s;else if(n.isDirectionalLight){var M=Ze.get(n);M.color.copy(n.color).multiplyScalar(n.intensity),M.direction.setFromMatrixPosition(n.matrixWorld),xe.setFromMatrixPosition(n.target.matrixWorld),M.direction.sub(xe),M.direction.transformDirection(f),M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),we.directionalShadowMap[p]=u,we.directionalShadowMatrix[p]=n.shadow.matrix,we.directional[p]=M,p++}else if(n.isSpotLight){var M=Ze.get(n);M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),M.color.copy(o).multiplyScalar(s),M.distance=l,M.direction.setFromMatrixPosition(n.matrixWorld),xe.setFromMatrixPosition(n.target.matrixWorld),M.direction.sub(xe),M.direction.transformDirection(f),M.coneCos=Math.cos(n.angle),M.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),M.decay=0===n.distance?0:n.decay,M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),we.spotShadowMap[v]=u,we.spotShadowMatrix[v]=n.shadow.matrix,we.spot[v]=M,v++}else if(n.isRectAreaLight){var M=Ze.get(n);M.color.copy(o).multiplyScalar(s/(n.width*n.height)),M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),Te.identity(),Ie.copy(n.matrixWorld),Ie.premultiply(f),Te.extractRotation(Ie),M.halfWidth.set(.5*n.width,0,0),M.halfHeight.set(0,.5*n.height,0),M.halfWidth.applyMatrix4(Te),M.halfHeight.applyMatrix4(Te),we.rectArea[g]=M,g++}else if(n.isPointLight){var M=Ze.get(n);M.position.setFromMatrixPosition(n.matrixWorld),M.position.applyMatrix4(f),M.color.copy(n.color).multiplyScalar(n.intensity),M.distance=n.distance,M.decay=0===n.distance?0:n.decay,M.shadow=n.castShadow,n.castShadow&&(a=n.shadow,M.shadowBias=a.bias,M.shadowRadius=a.radius,M.shadowMapSize=a.mapSize),we.pointShadowMap[m]=u,we.pointShadowMatrix[m]=n.shadow.matrix,we.point[m]=M,m++}else if(n.isHemisphereLight){var M=Ze.get(n);M.direction.setFromMatrixPosition(n.matrixWorld),M.direction.transformDirection(f),M.direction.normalize(),M.skyColor.copy(n.color).multiplyScalar(s),M.groundColor.copy(n.groundColor).multiplyScalar(s),we.hemi[y]=M,y++}we.ambient[0]=c,we.ambient[1]=h,we.ambient[2]=d,we.directional.length=p,we.spot.length=v,we.rectArea.length=g,we.point.length=m,we.hemi.length=y,we.hash=p+","+m+","+v+","+g+","+y+","+we.shadows.length}function R(){var e=le;return e>=Oe.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Oe.maxTextures),le+=1,e}function B(e){var t;if(e===po)return ke.REPEAT;if(e===mo)return ke.CLAMP_TO_EDGE;if(e===vo)return ke.MIRRORED_REPEAT;if(e===go)return ke.NEAREST;if(e===yo)return ke.NEAREST_MIPMAP_NEAREST;if(e===Mo)return ke.NEAREST_MIPMAP_LINEAR;if(e===Eo)return ke.LINEAR;if(e===bo)return ke.LINEAR_MIPMAP_NEAREST;if(e===xo)return ke.LINEAR_MIPMAP_LINEAR;if(e===Io)return ke.UNSIGNED_BYTE;if(e===Bo)return ke.UNSIGNED_SHORT_4_4_4_4;if(e===Lo)return ke.UNSIGNED_SHORT_5_5_5_1;if(e===Oo)return ke.UNSIGNED_SHORT_5_6_5;if(e===To)return ke.BYTE;if(e===wo)return ke.SHORT;if(e===Co)return ke.UNSIGNED_SHORT;if(e===So)return ke.INT;if(e===Ao)return ke.UNSIGNED_INT;if(e===ko)return ke.FLOAT;if(e===Ro&&null!==(t=Be.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===Do)return ke.ALPHA;if(e===No)return ke.RGB;if(e===_o)return ke.RGBA;if(e===Ho)return ke.LUMINANCE;if(e===Fo)return ke.LUMINANCE_ALPHA;if(e===Go)return ke.DEPTH_COMPONENT;if(e===zo)return ke.DEPTH_STENCIL;if(e===Aa)return ke.FUNC_ADD;if(e===ka)return ke.FUNC_SUBTRACT;if(e===Ra)return ke.FUNC_REVERSE_SUBTRACT;if(e===Oa)return ke.ZERO;if(e===Pa)return ke.ONE;if(e===Da)return ke.SRC_COLOR;if(e===Na)return ke.ONE_MINUS_SRC_COLOR;if(e===_a)return ke.SRC_ALPHA;if(e===Ha)return ke.ONE_MINUS_SRC_ALPHA;if(e===Fa)return ke.DST_ALPHA;if(e===Ua)return ke.ONE_MINUS_DST_ALPHA;if(e===Ga)return ke.DST_COLOR;if(e===za)return ke.ONE_MINUS_DST_COLOR;if(e===ja)return ke.SRC_ALPHA_SATURATE;if((e===jo||e===Vo||e===Wo||e===Yo)&&null!==(t=Be.get("WEBGL_compressed_texture_s3tc"))){if(e===jo)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Vo)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Wo)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Yo)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Zo||e===Qo||e===Xo||e===Jo)&&null!==(t=Be.get("WEBGL_compressed_texture_pvrtc"))){if(e===Zo)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Qo)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Xo)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Jo)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===jo||e===Vo||e===Wo||e===Yo){
if(null===(t=Be.get("WEBGL_compressed_texture_s3tc")))return null;if(e===jo)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Vo)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Wo)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Yo)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Ko&&null!==(t=Be.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===qo||e===$o)&&null!==(t=Be.get("WEBGL_compressed_texture_etc"))){if(e===qo)return t.COMPRESSED_RGB8_ETC2;if(e===$o)return t.COMPRESSED_RGBA8_ETC2_EAC}if(e===es||e===ts||e===is||e===rs||e===ns||e===as||e===os||e===ss||e===ls||e===us||e===cs||e===hs||e===ds||e===fs||e===ms||e===vs||e===gs||e===ys||e===Ms||e===Es||e===bs||e===xs||e===Is||e===Ts||e===ws||e===Cs||e===Ss||e===As)return t=Be.get("WEBGL_compressed_texture_astc"),null!==t?e:null;if(e===ps)return t=Be.get("EXT_texture_compression_bptc"),null!==t?e:null;if((e===Ba||e===La)&&null!==(t=Be.get("EXT_blend_minmax"))){if(e===Ba)return t.MIN_EXT;if(e===La)return t.MAX_EXT}return e===Po&&null!==(t=Be.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",oa),e=e||{};var L=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),O=void 0!==e.context?e.context:null,P=void 0!==e.alpha&&e.alpha,D=void 0===e.depth||e.depth,N=void 0===e.stencil||e.stencil,_=void 0!==e.antialias&&e.antialias,H=void 0===e.premultipliedAlpha||e.premultipliedAlpha,F=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,U=e.maxDrawCacheNum,G=[],z=new Float32Array(8),j=[],V=[],W=new THREE.Vector3;this.domElement=L,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=io,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Q=this,K=null,q=null,$=null,ee=-1,te="",ie=null,re=new a,oe=null,se=new a,le=0,ue=new Z(0),ce=0,he=L.width,de=L.height,fe=1,pe=new a(0,0,he,de),me=!1,ve=new a(0,0,he,de),ge=new ne,ye=new ft,Me=!1,Ee=!1,be=new c,xe=new u,Ie=new c,Te=new c,we={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ce={geometries:0,textures:0},Se={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Se,memory:Ce,programs:null};var ke;try{var Re={alpha:P,depth:D,stencil:N,antialias:_,premultipliedAlpha:H,preserveDrawingBuffer:F};if(null===(ke=O||L.getContext("webgl",Re)||L.getContext("experimental-webgl",Re)))throw null!==L.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===ke.getShaderPrecisionFormat&&(ke.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),L.addEventListener("webglcontextlost",n,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Be=new dt(ke);Be.get("WEBGL_depth_texture"),Be.get("OES_texture_float"),Be.get("OES_texture_float_linear"),Be.get("OES_texture_half_float"),Be.get("OES_texture_half_float_linear"),Be.get("OES_standard_derivatives"),Be.get("ANGLE_instanced_arrays"),Be.get("OES_element_index_uint")&&(Ae.MaxIndex=4294967296);var Le,Oe=new ht(ke,Be,e),Pe=new ct(ke,Be,B),De=new ut,Ne=new lt(ke,Be,Pe,De,Oe,B,Ce),He=new _e(ke);Le=void 0!==U?new na(ke,He,Ce,U):new Ve(ke,He,Ce);var Fe=new Ye(ke,Le,Se),Ue=new st(this,Oe),Ze=new We,Qe=new Ge;this.info.programs=Ue.programs;var Xe=new je(ke,Be,Se),Je=new ze(ke,Be,Se);i(),this.context=ke,this.capabilities=Oe,this.extensions=Be,this.properties=De,this.state=Pe;var Ke=new ae(this,we,Fe,Oe);this.shadowMap=Ke;new J(this,j),new X(this,V);this.getContext=function(){return ke},this.getContextAttributes=function(){return ke.getContextAttributes()},this.forceContextLoss=function(){var e=Be.get("WEBGL_lose_context");e&&e.loseContext()},this.getMaxAnisotropy=function(){return Oe.getMaxAnisotropy()},this.getPrecision=function(){return Oe.precision},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(e){void 0!==e&&(fe=e,this.setSize(ve.z,ve.w,!1))},this.getSize=function(){return{width:he,height:de}},this.setSize=function(e,t,i){he=e,de=t,L.width=e*fe,L.height=t*fe,!1!==i&&(L.style.width=e+"px",L.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){Pe.viewport(ve.set(e,t,i,r))},this.setScissor=function(e,t,i,r){Pe.scissor(pe.set(e,t,i,r))},this.setScissorTest=function(e){Pe.setScissorTest(me=e)},this.getClearColor=function(){return ue},this.setClearColor=function(e,t){ue.set(e),ce=void 0!==t?t:1,Pe.buffers.color.setClear(ue.r,ue.g,ue.b,ce,H)},this.getClearAlpha=function(){return ce},this.setClearAlpha=function(e){ce=e,Pe.buffers.color.setClear(ue.r,ue.g,ue.b,ce,H)},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=ke.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=ke.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=ke.STENCIL_BUFFER_BIT),ke.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.resetGLState=r,this.dispose=function(){L.removeEventListener("webglcontextlost",n,!1),Qe.dispose()},this.renderBufferImmediate=function(e,t,i){Pe.initAttributes();var r=De.get(e);e.hasPositions&&!r.position&&(r.position=ke.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=ke.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=ke.createBuffer()),e.hasColors&&!r.color&&(r.color=ke.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(ke.bindBuffer(ke.ARRAY_BUFFER,r.position),ke.bufferData(ke.ARRAY_BUFFER,e.positionArray,ke.DYNAMIC_DRAW),Pe.enableAttribute(n.position),ke.vertexAttribPointer(n.position,3,ke.FLOAT,!1,0,0)),e.hasNormals){if(ke.bindBuffer(ke.ARRAY_BUFFER,r.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===ga)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}ke.bufferData(ke.ARRAY_BUFFER,e.normalArray,ke.DYNAMIC_DRAW),Pe.enableAttribute(n.normal),ke.vertexAttribPointer(n.normal,3,ke.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(ke.bindBuffer(ke.ARRAY_BUFFER,r.uv),ke.bufferData(ke.ARRAY_BUFFER,e.uvArray,ke.DYNAMIC_DRAW),Pe.enableAttribute(n.uv),ke.vertexAttribPointer(He.uv,2,ke.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==Ma&&(ke.bindBuffer(ke.ARRAY_BUFFER,r.color),ke.bufferData(ke.ARRAY_BUFFER,e.colorArray,ke.DYNAMIC_DRAW),Pe.enableAttribute(n.color),ke.vertexAttribPointer(n.color,3,ke.FLOAT,!1,0,0)),Pe.disableUnusedAttributes(),ke.drawArrays(ke.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,i,r,n,a,o){Pe.setMaterial(n);var s=m(e,i,n,a),l=r.id;l+="_",l+=s.id,l+="_",l+=!0===n.wireframe;var u=!1;l!==te&&(te=l,u=!0);var c=a.morphTargetInfluences;if(void 0!==c){for(var h=[],p=0,v=c.length;p<v;p++){var g=c[p];h.push([g,p])}h.sort(d),h.length>8&&(h.length=8);for(var y=r.morphAttributes,p=0,v=h.length;p<v;p++){var g=h[p];if(z[p]=g[0],0!==g[0]){var M=g[1];!0===n.morphTargets&&y.position&&r.addAttribute("morphTarget"+p,y.position[M]),!0===n.morphNormals&&y.normal&&r.addAttribute("morphNormal"+p,y.normal[M])}else!0===n.morphTargets&&r.removeAttribute("morphTarget"+p),!0===n.morphNormals&&r.removeAttribute("morphNormal"+p)}for(var p=h.length,E=z.length;p<E;p++)z[p]=0;s.getUniforms().setValue(ke,"morphTargetInfluences",z),u=!0}var M=r.index,b=r.attributes.position,x=1;!0===n.wireframe&&(M=Le.getWireframeAttribute(r),x=2);var I=Xe;null!==M&&(I=Je,I.setIndex(M)),u&&(f(n,s,r),null!==M&&ke.bindBuffer(ke.ELEMENT_ARRAY_BUFFER,He.get(M).buffer));var T=0;null!==M?T=M.count:void 0!==b&&(T=b.count);var w=r.drawRange.start*x,C=r.drawRange.count*x,S=null!==o?o.start*x:0,A=null!==o?o.count*x:1/0,k=Math.max(w,S),R=Math.min(T,w+C,S+A)-1,B=Math.max(0,R-k+1);if(0!==B){if(a.isMesh)if(!0===n.wireframe)Pe.setLineWidth(n.wireframeLinewidth*t()),I.setMode(ke.LINES);else switch(a.drawMode){case Bs:I.setMode(ke.TRIANGLES);break;case Ls:I.setMode(ke.TRIANGLE_STRIP);break;case Os:I.setMode(ke.TRIANGLE_FAN)}else if(a.isLine){var L=n.linewidth;void 0===L&&(L=1),Pe.setLineWidth(L*t()),a.isLineSegments?I.setMode(ke.LINES):a.isLineLoop?I.setMode(ke.LINE_LOOP):I.setMode(ke.LINE_STRIP)}else a.isPoints&&I.setMode(ke.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&I.renderInstances(r,k,B):I.render(k,B)}},this.compile=function(e,t){G=[],e.traverse(function(e){e.isLight&&G.push(e)}),k(G,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)p(t.material[i],e.fog,t);else p(t.material,e.fog,t)})},this.render=function(e,t,i,r){return null===qe?void console.error("THREE.WebGLRenderer.render: OrderedRenderer is not set."):void 0!==t&&!0!==t.isCamera?void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."):(te="",ee=-1,ie=null,!0===e.autoUpdate&&e.updateMatrixWorld(),t.onBeforeRender(Q),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),Ee=this.localClippingEnabled,Me=ye.init(this.clippingPlanes,Ee,t),be.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(be),Se.frame++,Se.calls=0,Se.vertices=0,Se.faces=0,Se.points=0,qe.update(ge,be),Ke.needsUpdate&&qe.projectLights(e,G),Me&&ye.beginShadows(),A(G),Ke.render(e,t),k(G,t),Me&&ye.endShadows(),qe.render(this,e,t,G,i,r,Pe))},this.setFaceCulling=function(e,t){Pe.setCullFace(e),Pe.setFlipSided(t===ha)},this.allocTextureUnit=R,this.setTexture2D=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),Ne.setTexture2D(t,i)}}(),this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Ne.setTexture2D(t,i)}}(),this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Ne.setTextureCube(t,i):Ne.setTextureCubeDynamic(t,i)}}(),this.getRenderTarget=function(){return q},this.isMRTSupported=function(){return Be.get("WEBGL_draw_buffers")},this.setRenderTarget=function(e){if(Array.isArray(e)){if(this.isMRTSupported()){q=e[0],Ne.setupMultiRenderTarget(e);var t,i=De.get(e[0]);t=i.__webglFramebuffer;var r=q;re.copy(r.scissor),oe=r.scissorTest,se.copy(r.viewport),$!==t&&(ke.bindFramebuffer(ke.FRAMEBUFFER,t),$=t),Pe.scissor(re),Pe.setScissorTest(oe),Pe.viewport(se)}}else{q=e,e&&void 0===De.get(e).__webglFramebuffer&&Ne.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var i=De.get(e);t=n?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,re.copy(e.scissor),oe=e.scissorTest,se.copy(e.viewport)}else t=this.framebuffer,re.copy(pe).multiplyScalar(fe),oe=me,se.copy(ve).multiplyScalar(fe);if($!==t&&(ke.bindFramebuffer(ke.FRAMEBUFFER,t),$=t),Pe.scissor(re),Pe.setScissorTest(oe),Pe.viewport(se),n){var a=De.get(e.texture);ke.framebufferTexture2D(ke.FRAMEBUFFER,ke.COLOR_ATTACHMENT0,ke.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,a.__webglTexture,e.activeMipMapLevel)}}},this.readRenderTargetPixels=function(e,t,i,r,n,a){if(!1===(e&&e.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=De.get(e).__webglFramebuffer;if(o){var s=!1;o!==$&&(ke.bindFramebuffer(ke.FRAMEBUFFER,o),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==_o&&B(u)!==ke.getParameter(ke.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Io||B(c)===ke.getParameter(ke.IMPLEMENTATION_COLOR_READ_TYPE)||c===ko&&(Be.get("OES_texture_float")||Be.get("WEBGL_color_buffer_float"))||c===Ro&&Be.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ke.checkFramebufferStatus(ke.FRAMEBUFFER)===ke.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&i>=0&&i<=e.height-n&&ke.readPixels(t,i,r,n,B(u),B(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ke.bindFramebuffer(ke.FRAMEBUFFER,$)}}},this.updateObject=function(e){return Fe.update(e)};var qe=null;this.setRenderer=function(e){qe=e},this.getRenderer=function(){return qe},this.destroy=function(){qe.destroy(),De.clear()},this.resetIncrementRender=function(){qe.restart()},this.setFilterObject=function(e){qe.setFilter(e)},this.setObjectListUpdateState=function(e){qe.updateObjectList(e)},this.computeSelectionBBox=function(){return qe.computeSelectionBBox()},this.computeRenderObjectsBox=function(){return qe.computeRenderObjectsBox()},this.setRenderTicket=function(e){Fe._renderTicket=e},this.setupLights=function(e,t){k(e,t)}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(void 0!==r&&null!==r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}}(),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,r=i[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,i=t[e.type];if(void 0!==i){e.target=this;var r=[],n=0,a=i.length;for(n=0;n<a;n++)r[n]=i[n];for(n=0;n<a;n++)r[n].call(this,e)}}}});var oa="85",sa={LEFT:0,MIDDLE:1,RIGHT:2},la=0,ua=1,ca=2,ha=0,da=1,fa=2,pa=0,ma=1,va=2,ga=1,ya=2,Ma=0,Ea=1,ba=2,xa=0,Ia=1,Ta=2,wa=3,Ca=4,Sa=5,Aa=100,ka=101,Ra=102,Ba=103,La=104,Oa=200,Pa=201,Da=202,Na=203,_a=204,Ha=205,Fa=206,Ua=207,Ga=208,za=209,ja=210,Va=0,Wa=1,Ya=2,Za=3,Qa=4,Xa=5,Ja=6,Ka=7,qa=0,$a=1,eo=2,to=0,io=1,ro=2,no=3,ao=4,oo=301,so=302,lo=303,uo=304,co=305,ho=306,fo=307,po=1e3,mo=1001,vo=1002,go=1003,yo=1004,Mo=1005,Eo=1006,bo=1007,xo=1008,Io=1009,To=1010,wo=1011,Co=1012,So=1013,Ao=1014,ko=1015,Ro=1016,Bo=1017,Lo=1018,Oo=1019,Po=1020,Do=1021,No=1022,_o=1023,Ho=1024,Fo=1025,Uo=_o,Go=1026,zo=1027,jo=33776,Vo=33777,Wo=33778,Yo=33779,Zo=35840,Qo=35841,Xo=35842,Jo=35843,Ko=36196,qo=37492,$o=37496,es=37808,ts=37809,is=37810,rs=37811,ns=37812,as=37813,os=37814,ss=37815,ls=37816,us=37817,cs=37818,hs=37819,ds=37820,fs=37821,ps=36492,ms=37840,vs=37841,gs=37842,ys=37843,Ms=37844,Es=37845,bs=37846,xs=37847,Is=37848,Ts=37849,ws=37850,Cs=37851,Ss=37852,As=37853,ks=2201,Rs=2400,Bs=0,Ls=1,Os=2,Ps=3e3,Ds=3001,Ns=3007,_s=3002,Hs=3004,Fs=3005,Us=3006,Gs=3200,zs=3201,js={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),r=0;return function(){for(var n=0;n<36;n++)8===n||13===n||18===n||23===n?i[n]="-":14===n?i[n]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,i[n]=t[19===n?3&e|8:e]);return i.join("")}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*js.DEG2RAD},radToDeg:function(e){return e*js.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(r.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new r,t=new r;return function(i,r){return e.set(i,i),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*i-a*r+e.x,this.y=n*r+a*i+e.y,this}});var Vs=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,Object.defineProperty(n.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(n.prototype,i.prototype,{constructor:n,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.rotateMatrix.copy(e.rotateMatrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=js.generateUUID()),void 0===e.images[i.uuid]&&(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),t.image=i.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case po:e.x=e.x-Math.floor(e.x);break;case mo:e.x=e.x<0?0:1;break;case vo:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case po:e.y=e.y-Math.floor(e.y);break;case mo:e.y=e.y<0?0:1;break;case vo:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}},setRotateAngle:function(e){var t=THREE.Math.degToRad(e),i=Math.sin(t),r=Math.cos(t);this.rotateMatrix.elements[0]=r,this.rotateMatrix.elements[1]=i,this.rotateMatrix.elements[3]=-i,this.rotateMatrix.elements[4]=r}}),Object.assign(a.prototype,{isVector4:!0,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*n,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*n,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*n,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+u)/4,M=(l+d)/4,E=(h+f)/4;return m>v&&m>g?m<.01?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(m),r=y/i,n=M/i):v>g?v<.01?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(v),i=y/r,n=E/r):g<.01?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(g),i=M/n,r=E/n),this.set(i,r,n,t),this}var b=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(b)<.001&&(b=1),this.x=(f-h)/b,this.y=(l-d)/b,this.z=(u-s)/b,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e=new a,t=new a;return function(i,r){return e.set(i,i,i,i),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(o.prototype,i.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,Object.assign(l,{slerp:function(e,t,i,r){return i.copy(e).slerp(t,r)},slerpFlat:function(e,t,i,r,n,a,o){var s=i[r+0],l=i[r+1],u=i[r+2],c=i[r+3],h=n[a+0],d=n[a+1],f=n[a+2],p=n[a+3];if(c!==p||s!==h||l!==d||u!==f){var m=1-o,v=s*h+l*d+u*f+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var M=Math.sqrt(y),E=Math.atan2(M,v*g);m=Math.sin(m*E)/M,o=Math.sin(o*E)/M}var b=o*g;if(s=s*m+h*b,l=l*m+d*b,u=u*m+f*b,c=c*m+p*b,m===1-o){var x=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=x,l*=x,u*=x,c*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(l.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(l.prototype,{set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,r=e._y,n=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(i/2),u=o(r/2),c=o(n/2),h=s(i/2),d=s(r/2),f=s(n/2);return"XYZ"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"YXZ"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"ZXY"===a?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"ZYX"===a?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"YZX"===a?(this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f):"XZY"===a&&(this._x=h*u*c-l*d*f,
this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],a=i[8],o=i[1],s=i[5],l=i[9],u=i[2],c=i[6],h=i[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-n)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(a+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(a-u)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(o-n)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new u;return function(i,r){return void 0===t&&(t=new u),e=i.dot(r)+1,e<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=i*u+a*o+r*l-n*s,this._y=r*u+a*s+n*o-i*l,this._z=n*u+a*l+i*s-r*o,this._w=a*u-i*o-r*s-n*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,r=this._y,n=this._z,a=this._w,o=a*e._w+i*e._x+r*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=n,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=i*u+this._x*c,this._y=r*u+this._y*c,this._z=n*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(u.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new l;return function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new l;return function(t,i){return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;this.x=n[0]*t+n[4]*i+n[8]*r+n[12],this.y=n[1]*t+n[5]*i+n[9]*r+n[13],this.z=n[2]*t+n[6]*i+n[10]*r+n[14];var a=n[3]*t+n[7]*i+n[11]*r+n[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*i,u=s*i+o*t-n*r,c=s*r+n*i-a*t,h=-n*t-a*i-o*r;return this.x=l*s+h*-n+u*-o-c*-a,this.y=u*s+h*-a+c*-n-l*-o,this.z=c*s+h*-o+l*-a-u*-n,this},project:function(){var e=new c;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new c;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new u,t=new u;return function(i,r){return e.set(i,i,i),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-i*e.z,this.z=i*e.y-r*e.x,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-n*o,this.y=n*a-i*s,this.z=i*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new u;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new u;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(js.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(c.prototype,{isMatrix4:!0,set:function(e,t,i,r,n,a,o,s,l,u,c,h,d,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=n,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new u;return function(t){var i=this.elements,r=t.elements,n=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n,i[4]=r[4]*a,i[5]=r[5]*a,i[6]=r[6]*a,i[8]=r[8]*o,i[9]=r[9]*o,i[10]=r[10]*o,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,r=e.y,n=e.z,a=Math.cos(i),o=Math.sin(i),s=Math.cos(r),l=Math.sin(r),u=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-o*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*o,t[4]=-a*c,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*u,t[9]=y-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var h=a*u,d=a*c,f=o*u,p=o*c;t[0]=s*u,t[4]=f*l-d,t[8]=h*l+p,t[1]=s*c,t[5]=p*l+h,t[9]=d*l-f,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var M=a*s,E=a*l,b=o*s,x=o*l;t[0]=s*u,t[4]=x-M*c,t[8]=b*c+E,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=E*c+b,t[10]=M-x*c}else if("XZY"===e.order){var M=a*s,E=a*l,b=o*s,x=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=M*c+x,t[5]=a*u,t[9]=E*c-b,t[2]=b*c-E,t[6]=o*u,t[10]=x*c+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,i=e._x,r=e._y,n=e._z,a=e._w,o=i+i,s=r+r,l=n+n,u=i*o,c=i*s,h=i*l,d=r*s,f=r*l,p=n*l,m=a*o,v=a*s,g=a*l;return t[0]=1-(d+p),t[4]=c-g,t[8]=h+v,t[1]=c+g,t[5]=1-(u+p),t[9]=f-m,t[2]=h-v,t[6]=f+m,t[10]=1-(u+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new u,t=new u,i=new u;return function(r,n,a){var o=this.elements;return i.subVectors(r,n),0===i.lengthSq()&&(i.z=1),i.normalize(),e.crossVectors(a,i),0===e.lengthSq()&&(i.z+=1e-4,e.crossVectors(a,i)),e.normalize(),t.crossVectors(i,e),o[0]=e.x,o[4]=t.x,o[8]=i.x,o[1]=e.y,o[5]=t.y,o[9]=i.y,o[2]=e.z,o[6]=t.z,o[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,a=i[0],o=i[4],s=i[8],l=i[12],u=i[1],c=i[5],h=i[9],d=i[13],f=i[2],p=i[6],m=i[10],v=i[14],g=i[3],y=i[7],M=i[11],E=i[15],b=r[0],x=r[4],I=r[8],T=r[12],w=r[1],C=r[5],S=r[9],A=r[13],k=r[2],R=r[6],B=r[10],L=r[14],O=r[3],P=r[7],D=r[11],N=r[15];return n[0]=a*b+o*w+s*k+l*O,n[4]=a*x+o*C+s*R+l*P,n[8]=a*I+o*S+s*B+l*D,n[12]=a*T+o*A+s*L+l*N,n[1]=u*b+c*w+h*k+d*O,n[5]=u*x+c*C+h*R+d*P,n[9]=u*I+c*S+h*B+d*D,n[13]=u*T+c*A+h*L+d*N,n[2]=f*b+p*w+m*k+v*O,n[6]=f*x+p*C+m*R+v*P,n[10]=f*I+p*S+m*B+v*D,n[14]=f*T+p*A+m*L+v*N,n[3]=g*b+y*w+M*k+E*O,n[7]=g*x+y*C+M*R+E*P,n[11]=g*I+y*S+M*B+E*D,n[15]=g*T+y*A+M*L+E*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new u;return function(t){for(var i=0,r=t.count;i<r;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+n*s*c-r*l*c-n*o*h+i*l*h+r*o*d-i*s*d)+e[7]*(+t*s*d-t*l*h+n*a*h-r*a*d+r*l*u-n*s*u)+e[11]*(+t*l*c-t*o*d-n*a*c+i*a*d+n*o*u-i*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*a*c-i*a*h+i*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],M=r[15],E=f*y*h-g*p*h+g*c*m-u*y*m-f*c*M+u*p*M,b=v*p*h-d*y*h-v*c*m+l*y*m+d*c*M-l*p*M,x=d*g*h-v*f*h+v*u*m-l*g*m-d*u*M+l*f*M,I=v*f*c-d*g*c-v*u*p+l*g*p+d*u*y-l*f*y,T=n*E+a*b+o*x+s*I;if(0===T){var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var C=1/T;return i[0]=E*C,i[1]=(g*p*s-f*y*s-g*o*m+a*y*m+f*o*M-a*p*M)*C,i[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*M+a*c*M)*C,i[3]=(f*c*s-u*p*s-f*o*h+a*p*h+u*o*m-a*c*m)*C,i[4]=b*C,i[5]=(d*y*s-v*p*s+v*o*m-n*y*m-d*o*M+n*p*M)*C,i[6]=(v*c*s-l*y*s-v*o*h+n*y*h+l*o*M-n*c*M)*C,i[7]=(l*p*s-d*c*s+d*o*h-n*p*h-l*o*m+n*c*m)*C,i[8]=x*C,i[9]=(v*f*s-d*g*s-v*a*m+n*g*m+d*a*M-n*f*M)*C,i[10]=(l*g*s-v*u*s+v*a*h-n*g*h-l*a*M+n*u*M)*C,i[11]=(d*u*s-l*f*s-d*a*h+n*f*h+l*a*m-n*u*m)*C,i[12]=I*C,i[13]=(d*g*o-v*f*o+v*a*p-n*g*p-d*a*y+n*f*y)*C,i[14]=(v*u*o-l*g*o-v*a*c+n*g*c+l*a*y-n*u*y)*C,i[15]=(l*f*o-d*u*o+d*a*c-n*f*c-l*a*p+n*u*p)*C,this},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,a=e.x,o=e.y,s=e.z,l=n*a,u=n*o;return this.set(l*a+i,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+i,u*s-r*a,0,l*s-r*o,u*s+r*a,n*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new u,t=new c;return function(i,r,n){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),l=e.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],t.copy(this);var u=1/o,c=1/s,h=1/l;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),n.x=o,n.y=s,n.z=l,this}}(),makePerspective:function(e,t,i,r,n,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*n/(t-e),l=2*n/(i-r),u=(t+e)/(t-e),c=(i+r)/(i-r),h=-(a+n)/(a-n),d=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,i,r,n,a){var o=this.elements,s=1/(t-e),l=1/(i-r),u=1/(a-n),c=(t+e)*s,h=(i+r)*l,d=(a+n)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.prototype.isDataTexture=!0,d.prototype=Object.create(n.prototype),d.prototype.constructor=d,d.prototype.isCubeTexture=!0,Object.defineProperty(d.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ws=new n,Ys=new d,Zs=[],Qs=[],Xs=new Float32Array(16),Js=new Float32Array(9);j.prototype.setValue=function(e,t){for(var i=this.seq,r=0,n=i.length;r!==n;++r){var a=i[r];a.setValue(e,t[a.id])}};var Ks=/([\w\d_]+)(\])?(\[|\.)?/g;Y.prototype.setValue=function(e,t,i){var r=this.map[t];void 0!==r&&r.setValue(e,i,this.renderer)},Y.prototype.setOptional=function(e,t,i){var r=t[i];void 0!==r&&this.setValue(e,i,r)},Y.upload=function(e,t,i,r){for(var n=0,a=t.length;n!==a;++n){var o=t[n],s=i[o.id];"clippingPlanes"===o.id&&s.value instanceof Float32Array&&s.value[0]!=s.value[0]||!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Y.seqWithValue=function(e,t){for(var i=[],r=0,n=e.length;r!==n;++r){var a=e[r];a.id in t&&i.push(a)}return i};var qs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Z.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,r){if(t=js.euclideanModulo(t,1),i=js.clamp(i,0,1),r=js.clamp(r,0,1),0===i)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+i):r+i-r*i,a=2*r-n;this.r=e(a,n,t+1/3),this.g=e(a,n,t),this.b=e(a,n,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,n=i[1],a=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=i[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=qs[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,i,r=e||{h:0,s:0,l:0},n=this.r,a=this.g,o=this.b,s=Math.max(n,a,o),l=Math.min(n,a,o),u=(l+s)/2;if(l===s)t=0,i=0;else{var c=s-l;switch(i=u<=.5?c/(s+l):c/(2-s-l),s){case n:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-n)/c+2;break;case o:t=(n-a)/c+4}t/=6}return r.h=t,r.s=i,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var $s={common:{diffuse:{value:new Z(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new a(0,0,1,1)},rotateMatrix:{value:new ie},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Z(16777215)},postProcessMap:{value:null},postProcessAdditiveMap:{value:null},postProcessMixRate:{value:0},postProcessAdditiveRate:{value:0},viewportWidth:{value:0},viewportHeight:{value:0}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Z(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new a(0,0,1,1)}}},el={merge:function(e){for(var t={},i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r)t[n]=r[n]}return t},clone:function(e){var t={};for(var i in e){t[i]={};for(var r in e[i]){var n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}},tl={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).a;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",
bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\tuniform mat3 rotateMatrix;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = mat2(rotateMatrix) * vec2(uv.x - 0.5, uv.y - 0.5) + vec2(0.5, 0.5);\n\tvUv = (vUv -  offsetRepeat.xy)* offsetRepeat.zw;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"#ifdef USE_ATTRIBUTE_SIZE\n\tattribute float attrSize;\n\t#endif\n\tuniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_ATTRIBUTE_SIZE\n\tgl_PointSize = attrSize;\n\t#else\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#endif\n\t#ifdef USE_POSITION_OFFSET\n\t\tfloat yPos = gl_Position.y;\n\tfloat w = gl_Position.w;\n\tyPos /= w;\n\tyPos += 0.5 * gl_PointSize / scale;\n\tyPos *= w;\n\tgl_Position.y = yPos;\n\t #endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},il={basic:{uniforms:el.merge([$s.common,$s.aomap,$s.lightmap,$s.fog]),vertexShader:tl.meshbasic_vert,fragmentShader:tl.meshbasic_frag},lambert:{uniforms:el.merge([$s.common,$s.aomap,$s.lightmap,$s.emissivemap,$s.fog,$s.lights,{emissive:{value:new Z(0)}}]),vertexShader:tl.meshlambert_vert,fragmentShader:tl.meshlambert_frag},phong:{uniforms:el.merge([$s.common,$s.aomap,$s.lightmap,$s.emissivemap,$s.bumpmap,$s.normalmap,$s.displacementmap,$s.gradientmap,$s.fog,$s.lights,{emissive:{value:new Z(0)},specular:{value:new Z(1118481)},shininess:{value:30}}]),vertexShader:tl.meshphong_vert,fragmentShader:tl.meshphong_frag},standard:{uniforms:el.merge([$s.common,$s.aomap,$s.lightmap,$s.emissivemap,$s.bumpmap,$s.normalmap,$s.displacementmap,$s.roughnessmap,$s.metalnessmap,$s.fog,$s.lights,{emissive:{value:new Z(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:tl.meshphysical_vert,fragmentShader:tl.meshphysical_frag},points:{uniforms:el.merge([$s.points,$s.fog]),vertexShader:tl.points_vert,fragmentShader:tl.points_frag},dashed:{uniforms:el.merge([$s.common,$s.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tl.linedashed_vert,fragmentShader:tl.linedashed_frag},depth:{uniforms:el.merge([$s.common,$s.displacementmap]),vertexShader:tl.depth_vert,fragmentShader:tl.depth_frag},normal:{uniforms:el.merge([$s.common,$s.bumpmap,$s.normalmap,$s.displacementmap,{opacity:{value:1}}]),vertexShader:tl.normal_vert,fragmentShader:tl.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tl.cube_vert,fragmentShader:tl.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:tl.equirect_vert,fragmentShader:tl.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new u}},vertexShader:tl.distanceRGBA_vert,fragmentShader:tl.distanceRGBA_frag}};il.physical={uniforms:el.merge([il.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:tl.meshphysical_vert,fragmentShader:tl.meshphysical_frag},Object.assign(Q.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new r).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new r).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var rl=0;Object.assign(K.prototype,i.prototype,{isMaterial:!0,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]="overdraw"===t?Number(i):i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}var i=void 0===e;i&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),void 0!==this.positionOffset&&(r.positionOffset=this.positionOffset),void 0!==this.sizeAttribute&&(r.sizeAttribute=this.sizeAttribute),this.blending!==Ia&&(r.blending=this.blending),this.shading!==ya&&(r.shading=this.shading),this.side!==pa&&(r.side=this.side),this.vertexColors!==Ma&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.dithering=this.dithering,i){var n=t(e.textures),a=t(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var r=t.length;i=new Array(r);for(var n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),q.prototype=Object.create(K.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=el.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},q.prototype.toJSON=function(e){var t=K.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},$.prototype=Object.create(K.prototype),$.prototype.constructor=$,$.prototype.isMeshDepthMaterial=!0,$.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Object.assign(ee.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<i&&(i=c),h<r&&(r=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,i,r),this.max.set(n,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<i&&(i=c),h<r&&(r=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,i,r),this.max.set(n,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new u;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new u;return function(t){var i=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var r,n,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(r=0,n=o.length;r<n;r++)e.copy(o[r]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(r=0,n=s.count;r<n;r++)e.fromBufferAttribute(s,r).applyMatrix4(t.matrixWorld),i.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new u).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new u;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=e.constant&&i>=e.constant},clampPoint:function(e,t){return(t||new u).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new u;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new u;return function(t){var i=t||new te;return this.getCenter(i.center),i.radius=.5*this.getSize(e).length(),i}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new u,new u,new u,new u,new u,new u,new u,new u];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(te.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ee;return function(t,i){var r=this.center;void 0!==i?r.copy(i):e.setFromPoints(t).getCenter(r);for(var n=0,a=0,o=t.length;a<o;a++)n=Math.max(n,r.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),r=t||new u;return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new ee;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(ie.prototype,{isMatrix3:!0,set:function(e,t,i,r,n,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=n,u[5]=s,u[6]=i,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new u;return function(t){for(var i=0,r=t.count;i<r;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,a=i[0],o=i[3],s=i[6],l=i[1],u=i[4],c=i[7],h=i[2],d=i[5],f=i[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],M=r[7],E=r[2],b=r[5],x=r[8];return n[0]=a*p+o*g+s*E,n[3]=a*m+o*y+s*b,n[6]=a*v+o*M+s*x,n[1]=l*p+u*g+c*E,n[4]=l*m+u*y+c*b,n[7]=l*v+u*M+c*x,n[2]=h*p+d*g+f*E,n[5]=h*m+d*y+f*b,n[8]=h*v+d*M+f*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-i*n*u+i*o*s+r*n*l-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var i=e.elements,r=this.elements,n=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],f=d*l-u*h,p=u*c-d*s,m=h*s-l*c,v=n*f+a*p+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(o*h-d*a)*y,r[2]=(u*a-o*l)*y,r[3]=p*y,r[4]=(d*n-o*c)*y,r[5]=(o*s-u*n)*y,r[6]=m*y,r[7]=(a*c-h*n)*y,r[8]=(l*n-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}}),Object.assign(re.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new u,t=new u;return function(i,r,n){var a=e.subVectors(n,r).cross(t.subVectors(i,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e);return(t||new u).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var e=new u;return function(t,i){var r=i||new u,n=t.delta(e),a=this.normal.dot(n);if(0!==a){var o=-(t.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return r.copy(n).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new u).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new u,t=new ie;return function(i,r){var n=this.coplanarPoint(e).applyMatrix4(i),a=r||t.getNormalMatrix(i),o=this.normal.applyMatrix3(a).normalize();return this.constant=-n.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ne.prototype,{set:function(e,t,i,r,n,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],l=i[5],u=i[6],c=i[7],h=i[8],d=i[9],f=i[10],p=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return t[0].setComponents(o-r,c-s,p-h,y-m).normalize(),t[1].setComponents(o+r,c+s,p+h,y+m).normalize(),t[2].setComponents(o+n,c+l,p+d,y+v).normalize(),t[3].setComponents(o-n,c-l,p-d,y-v).normalize(),t[4].setComponents(o-a,c-u,p-f,y-g).normalize(),t[5].setComponents(o+a,c+u,p+f,y+g).normalize(),this},intersectsObject:function(){var e=new te;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new te;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;n<6;n++){if(t[n].distanceToPoint(i)<r)return!1}return!0},intersectsBox:function(){var e=new u,t=new u;return function(i){for(var r=this.planes,n=0;n<6;n++){var a=r[n];e.x=a.normal.x>0?i.min.x:i.max.x,t.x=a.normal.x>0?i.max.x:i.min.x,e.y=a.normal.y>0?i.min.y:i.max.y,t.y=a.normal.y>0?i.max.y:i.min.y,e.z=a.normal.z>0?i.min.z:i.max.z,t.z=a.normal.z>0?i.max.z:i.min.z;var o=a.distanceToPoint(e),s=a.distanceToPoint(t);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}}),Object.assign(oe.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new u).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new u;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new u;i.subVectors(e,this.origin);var r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new u;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new u,t=new u,i=new u;return function(r,n,a,o){e.copy(r).add(n).multiplyScalar(.5),t.copy(n).sub(r).normalize(),i.copy(this.origin).sub(e);var s,l,u,c,h=.5*r.distanceTo(n),d=-this.direction.dot(t),f=i.dot(this.direction),p=-i.dot(t),m=i.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*p-f,l=d*f-p,c=h*v,s>=0)if(l>=-c)if(l<=c){var g=1/v;s*=g,l*=g,u=s*(s+d*l+2*f)+l*(d*s+l+2*p)+m}else l=h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;else l=-h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;else l<=-c?(s=Math.max(0,-(-d*h+f)),l=s>0?-h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+m):l<=c?(s=0,l=Math.min(Math.max(-h,-p),h),u=l*(l+2*p)+m):(s=Math.max(0,-(d*h+f)),l=s>0?h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+m);else l=d>0?-h:h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new u;return function(t,i){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),n=e.dot(e)-r*r,a=t.radius*t.radius;if(n>a)return null;var o=Math.sqrt(a-n),s=r-o,l=r+o;return s<0&&l<0?null:s<0?this.at(l,i):this.at(s,i)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i,r,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(n=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(n=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),i>a||n>r?null:((n>i||i!==i)&&(i=n),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),i>s||o>r?null:((o>i||i!==i)&&(i=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(i>=0?i:r,t)))},intersectsBox:function(){var e=new u;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new u,t=new u,i=new u,r=new u;return function(n,a,o,s,l){t.subVectors(a,n),i.subVectors(o,n),r.crossVectors(t,i);var u,c=this.direction.dot(r);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,n);var h=u*this.direction.dot(i.crossVectors(e,i));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>c)return null;var f=-u*e.dot(r);return f<0?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],se.DefaultOrder="XYZ",Object.defineProperties(se.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(se.prototype,{isEuler:!0,set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var r=js.clamp,n=e.elements,a=n[0],o=n[4],s=n[8],l=n[1],u=n[5],c=n[9],h=n[2],d=n[6],f=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,
this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new c;return function(t,i,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new l;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(le.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var nl=0;ue.DefaultUp=new u(0,1,0),ue.DefaultMatrixAutoUpdate=!0,Object.assign(ue.prototype,i.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new l;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new u(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new u(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new u(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new u;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translateX:function(){var e=new u(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new u(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new u(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new c;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new c;return function(t){this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var i=this.children.indexOf(e);-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i],a=n.getObjectByProperty(e,t);if(void 0!==a)return a}},getWorldPosition:function(e){var t=e||new u;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new u,t=new u;return function(i){var r=i||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new l;return function(t){var i=t||new se;return this.getWorldQuaternion(e),i.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new u,t=new l;return function(i){var r=i||new u;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new l;return function(t){var i=t||new u;return this.getWorldQuaternion(e),i.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)},toJSON:function(e){function t(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}function i(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}var r=void 0===e||""===e,n={};r&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),a.matrix=this.matrix.toArray(),void 0!==this.geometry&&(a.geometry=t(e.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var o=[],s=0,l=this.material.length;s<l;s++)o.push(t(e.materials,this.material[s]));a.material=o}else a.material=t(e.materials,this.material);if(this.children.length>0){a.children=[];for(var s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(e).object)}if(r){var u=i(e.geometries),c=i(e.materials),h=i(e.textures),d=i(e.images);u.length>0&&(n.geometries=u),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),d.length>0&&(n.images=d)}return n.object=a,n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var r=e.children[i];this.add(r.clone())}return this}}),Object.assign(ce.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new u).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new u).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new u;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new u,t=new u;return function(i,r){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),a=t.dot(e),o=a/n;return r&&(o=js.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t),n=i||new u;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(he,{normal:function(){var e=new u;return function(t,i,r,n){var a=n||new u;a.subVectors(r,i),e.subVectors(t,i),a.cross(e);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new u,t=new u,i=new u;return function(r,n,a,o,s){e.subVectors(o,n),t.subVectors(a,n),i.subVectors(r,n);var l=e.dot(e),c=e.dot(t),h=e.dot(i),d=t.dot(t),f=t.dot(i),p=l*d-c*c,m=s||new u;if(0===p)return m.set(-2,-1,-1);var v=1/p,g=(d*h-c*f)*v,y=(l*f-c*h)*v;return m.set(1-g-y,y,g)}}(),containsPoint:function(){var e=new u;return function(t,i,r,n){var a=he.barycoordFromPoint(t,i,r,n,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}()}),Object.assign(he.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new u,t=new u;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new u).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return he.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new re).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return he.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return he.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new re,t=[new ce,new ce,new ce],i=new u,r=new u;return function(n,a){var o=a||new u,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(n,i),!0===this.containsPoint(i))o.copy(i);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(i,!0,r);var c=i.distanceToSquared(r);c<s&&(s=c,o.copy(r))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Object.assign(de.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),fe.prototype=Object.create(K.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshBasicMaterial=!0,fe.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(pe.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(pe.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Z),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];t[i++]=a.a,t[i++]=a.b,t[i++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,a=e.length;n<a;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new r),t[i++]=o.x,t[i++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new u),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new a),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),me.prototype=Object.create(pe.prototype),me.prototype.constructor=me,ve.prototype=Object.create(pe.prototype),ve.prototype.constructor=ve,ge.prototype=Object.create(pe.prototype),ge.prototype.constructor=ge,ye.prototype=Object.create(pe.prototype),ye.prototype.constructor=ye,Me.prototype=Object.create(pe.prototype),Me.prototype.constructor=Me,Ee.prototype=Object.create(pe.prototype),Ee.prototype.constructor=Ee,be.prototype=Object.create(pe.prototype),be.prototype.constructor=be,xe.prototype=Object.create(pe.prototype),xe.prototype.constructor=xe,Ie.prototype=Object.create(pe.prototype),Ie.prototype.constructor=Ie,Object.assign(Te.prototype,{computeGroups:function(e){for(var t,i=[],r=void 0,n=e.faces,a=0;a<n.length;a++){var o=n[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,i.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,n=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){h=[];for(var c=0;c<f;c++)h[c]=[];this.morphTargets.normal=h}for(var p=e.skinIndices,m=e.skinWeights,v=p.length===n.length,g=m.length===n.length,c=0;c<i.length;c++){var y=i[c];this.vertices.push(n[y.a],n[y.b],n[y.c]);var M=y.vertexNormals;if(3===M.length)this.normals.push(M[0],M[1],M[2]);else{var E=y.normal;this.normals.push(E,E,E)}var b=y.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===o){var I=a[0][c];void 0!==I?this.uvs.push(I[0],I[1],I[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new r,new r,new r))}if(!0===s){var I=a[1][c];void 0!==I?this.uvs2.push(I[0],I[1],I[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new r,new r,new r))}for(var T=0;T<u;T++){var w=l[T].vertices;t[T].push(w[y.a],w[y.b],w[y.c])}for(var T=0;T<f;T++){var C=d[T].vertexNormals[c];h[T].push(C.a,C.b,C.c)}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var al=0;Object.assign(Se.prototype,i.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new ie).getNormalMatrix(e),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(e)}for(var i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(var a=0,o=n.vertexNormals.length;a<o;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new c;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new c;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new c;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new c;return function(t,i,r){return e.makeTranslation(t,i,r),this.applyMatrix(e),this}}(),scale:function(){var e=new c;return function(t,i,r){return e.makeScale(t,i,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ue;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,n){var a=void 0!==s?[d[e].clone(),d[t].clone(),d[r].clone()]:[],o=void 0!==l?[i.colors[e].clone(),i.colors[t].clone(),i.colors[r].clone()]:[],u=new de(e,t,r,a,o,n);i.faces.push(u),void 0!==c&&i.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[r].clone()]),void 0!==h&&i.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[r].clone()])}var i=this,n=null!==e.index?e.index.array:void 0,a=e.attributes,o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],m=0,v=0;m<o.length;m+=3,v+=2)i.vertices.push(new u(o[m],o[m+1],o[m+2])),void 0!==s&&d.push(new u(s[m],s[m+1],s[m+2])),void 0!==l&&i.colors.push(new Z(l[m],l[m+1],l[m+2])),void 0!==c&&f.push(new r(c[v],c[v+1])),void 0!==h&&p.push(new r(h[v],h[v+1]));var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var y=g[m],M=y.start,E=y.count,v=M,b=M+E;v<b;v+=3)void 0!==n?t(n[v],n[v+1],n[v+2],y.materialIndex):t(v,v+1,v+2,y.materialIndex);else if(void 0!==n)for(var m=0;m<n.length;m+=3)t(n[m],n[m+1],n[m+2]);else for(var m=0;m<o.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,r=new c;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new u,t=new u,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,i,r,n,a,o;for(o=new Array(this.vertices.length),t=0,i=this.vertices.length;t<i;t++)o[t]=new u;if(e){var s,l,c,h=new u,d=new u;for(r=0,n=this.faces.length;r<n;r++)a=this.faces[r],s=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),d.subVectors(s,l),h.cross(d),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),r=0,n=this.faces.length;r<n;r++)a=this.faces[r],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,i=this.vertices.length;t<i;t++)o[t].normalize();for(r=0,n=this.faces.length;r<n;r++){a=this.faces[r];var f=a.vertexNormals;3===f.length?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){i=this.faces[e];var r=i.vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new Se;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o,s,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)o=new u,s={a:new u,b:new u,c:new u},l.push(o),c.push(s)}var h=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,s;for(i=0,r=this.faces.length;i<r;i++)n=this.faces[i],o=h.faceNormals[i],s=h.vertexNormals[i],o.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,r=t.length;i<r;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new te),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!1===(e&&e.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===i&&(i=0),void 0!==t&&(r=(new ie).getNormalMatrix(t));for(var f=0,p=o.length;f<p;f++){var m=o[f],v=m.clone();void 0!==t&&v.applyMatrix4(t),a.push(v)}for(var f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=l.length;f<p;f++){var g,y,M,E=l[f],b=E.vertexNormals,x=E.vertexColors;g=new de(E.a+n,E.b+n,E.c+n),g.normal.copy(E.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var I=0,T=b.length;I<T;I++)y=b[I].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),g.vertexNormals.push(y);g.color.copy(E.color);for(var I=0,T=x.length;I<T;I++)M=x[I],g.vertexColors.push(M.clone());g.materialIndex=E.materialIndex+i,s.push(g)}for(f=0,p=c.length;f<p;f++){var w=c[f],C=[];if(void 0!==w){for(var I=0,T=w.length;I<T;I++)C.push(w[I].clone());u.push(C)}}},mergeMesh:function(e){if(!1===(e&&e.isMesh))return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,i,r,n,a,o,s,l={},u=[],c=[],h=Math.pow(10,4);for(i=0,r=this.vertices.length;i<r;i++)e=this.vertices[i],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===l[t]?(l[t]=i,u.push(this.vertices[i]),c[i]=u.length-1):c[i]=c[l[t]];var d=[];for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],a=[n.a,n.b,n.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){d.push(i);break}}for(i=d.length-1;i>=0;i--){var p=d[i];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,i=t.length,r=0;r<i;r++)t[r]._id=r;t.sort(e);var n,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===i&&(n=[]),s&&s.length===i&&(a=[]);for(var r=0;r<i;r++){var l=t[r]._id;n&&n.push(o[l]),a&&a.push(s[l])}n&&(this.faceVertexUvs[0]=n),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/3,h.push(e.x,e.y,e.z),d[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var n={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(n[o]=a[o]);return n}for(var s=[],l=0;l<this.vertices.length;l++){var u=this.vertices[l];s.push(u.x,u.y,u.z)}for(var c=[],h=[],d={},f=[],p={},m=[],v={},l=0;l<this.faces.length;l++){var g=this.faces[l],y=void 0!==this.faceVertexUvs[0][l],M=g.normal.length()>0,E=g.vertexNormals.length>0,b=1!==g.color.r||1!==g.color.g||1!==g.color.b,x=g.vertexColors.length>0,I=0;if(I=e(I,0,0),I=e(I,1,!0),I=e(I,2,!1),I=e(I,3,y),I=e(I,4,M),I=e(I,5,E),I=e(I,6,b),I=e(I,7,x),c.push(I),c.push(g.a,g.b,g.c),c.push(g.materialIndex),y){var T=this.faceVertexUvs[0][l];c.push(r(T[0]),r(T[1]),r(T[2]))}if(M&&c.push(t(g.normal)),E){var w=g.vertexNormals;c.push(t(w[0]),t(w[1]),t(w[2]))}if(b&&c.push(i(g.color)),x){var C=g.vertexColors;c.push(i(C[0]),i(C[1]),i(C[2]))}}return n.data={},n.data.vertices=s,n.data.normals=h,f.length>0&&(n.data.colors=f),m.length>0&&(n.data.uvs=[m]),n.data.faces=c,n},clone:function(){return(new Se).copy(this)},copy:function(e){var t,i,r,n,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,i=s.length;t<i;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,i=l.length;t<i;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,i=u.length;t<i;t++)this.faces.push(u[t].clone());for(t=0,i=e.faceVertexUvs.length;t<i;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,n=c.length;r<n;r++){var h=c[r],d=[];for(a=0,o=h.length;a<o;a++){var f=h[a];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,i=p.length;t<i;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,n=p[t].vertices.length;r<n;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,n=p[t].normals.length;r<n;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,i=v.length;t<i;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,n=v[t].vertexNormals.length;r<n;r++){var y=v[t].vertexNormals[r],M={};M.a=y.a.clone(),M.b=y.b.clone(),M.c=y.c.clone(),g.vertexNormals.push(M)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,n=v[t].faceNormals.length;r<n;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var E=e.skinWeights;for(t=0,i=E.length;t<i;t++)this.skinWeights.push(E[t].clone());var b=e.skinIndices;for(t=0,i=b.length;t<i;t++)this.skinIndices.push(b[t].clone());var x=e.lineDistances;for(t=0,i=x.length;t<i;t++)this.lineDistances.push(x[t]);var I=e.boundingBox;null!==I&&(this.boundingBox=I.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ae.MaxIndex=65535,Object.assign(Ae.prototype,i.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(we(e)>65535?be:Me)(e,1):this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new pe(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){(new ie).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new c;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new c;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new c;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new c;return function(t,i,r){return e.makeTranslation(t,i,r),this.applyMatrix(e),this}}(),scale:function(){var e=new c;return function(t,i,r){return e.makeScale(t,i,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ue;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new xe(3*t.vertices.length,3),r=new xe(3*t.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){
var n=new xe(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(i=void 0,t.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate,i.normalsNeedUpdate=t.normalsNeedUpdate,i.colorsNeedUpdate=t.colorsNeedUpdate,i.uvsNeedUpdate=t.uvsNeedUpdate,i.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=i}var r;return!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Te).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new pe(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new pe(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new pe(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new pe(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new pe(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=we(e.indices)>65535?Uint32Array:Uint16Array,s=new o(3*e.indices.length);this.setIndex(new pe(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var u=[],c=e.morphTargets[l],h=0,d=c.length;h<d;h++){var f=c[h],p=new xe(3*f.length,3);u.push(p.copyVector3sArray(f))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var m=new xe(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new xe(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ee,t=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new te);var i=this.attributes.position;if(i){var r=this.boundingSphere.center;e.setFromBufferAttribute(i),e.getCenter(r);for(var n=0,a=0,o=i.count;a<o;a++)t.x=i.getX(a),t.y=i.getY(a),t.z=i.getZ(a),n=Math.max(n,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new pe(new Float32Array(r.length),3));else for(var n=t.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;var s,l,c,h=t.normal.array,d=new u,f=new u,p=new u,m=new u,v=new u;if(e){var g=e.array;0===i.length&&this.addGroup(0,g.length);for(var y=0,M=i.length;y<M;++y)for(var E=i[y],b=E.start,x=E.count,a=b,o=b+x;a<o;a+=3)s=3*g[a+0],l=3*g[a+1],c=3*g[a+2],d.fromArray(r,s),f.fromArray(r,l),p.fromArray(r,c),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[s]+=m.x,h[s+1]+=m.y,h[s+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var a=0,o=r.length;a<o;a+=9)d.fromArray(r,a),f.fromArray(r,a+3),p.fromArray(r,a+6),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1===(e&&e.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var i=this.attributes;for(var r in i)if(void 0!==e.attributes[r])for(var n=i[r],a=n.array,o=e.attributes[r],s=o.array,l=o.itemSize,u=0,c=l*t;u<s.length;u++,c++)a[c]=s[u];return this},normalizeNormals:function(){for(var e,t,i,r,n=this.attributes.normal,a=0,o=n.count;a<o;a++)e=n.getX(a),t=n.getY(a),i=n.getZ(a),r=1/Math.sqrt(e*e+t*t+i*i),n.setXYZ(a,e*r,t*r,i*r)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ae,t=this.index.array,i=this.attributes;for(var r in i){for(var n=i[r],a=n.array,o=n.itemSize,s=new a.constructor(t.length*o),l=0,u=0,c=0,h=t.length;c<h;c++){l=t[c]*o;for(var d=0;d<o;d++)s[u++]=a[l++]}e.addAttribute(r,new pe(s,o))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var n=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:n}}var a=this.attributes;for(var i in a){var o=a[i],n=Array.prototype.slice.call(o.array);e.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:n,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Ae).copy(this)},copy:function(e){var t,i,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(i=0,r=u.length;i<r;i++)l.push(u[i].clone());this.morphAttributes[t]=l}var c=e.groups;for(i=0,r=c.length;i<r;i++){var h=c[i];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ke.prototype=Object.assign(Object.create(ue.prototype),{constructor:ke,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ue.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,i=e.length;t<i;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,i,r,n,a,o){return he.barycoordFromPoint(e,t,i,r,y),n.multiplyScalar(y.x),a.multiplyScalar(y.y),o.multiplyScalar(y.z),n.add(a).add(o),n.clone()}function t(e,t,i,r,n,a,o){var s=e.material;if(null===(s.side===ma?i.intersectTriangle(a,n,r,!0,o):i.intersectTriangle(r,n,a,s.side!==va,o)))return null;E.copy(o),E.applyMatrix4(e.matrixWorld);var l=t.ray.origin.distanceTo(E);return l<t.near||l>t.far?null:{distance:l,point:E.clone(),object:e}}function i(i,r,n,a,o,u,c,d){s.fromBufferAttribute(a,u),l.fromBufferAttribute(a,c),h.fromBufferAttribute(a,d);var f=t(i,r,n,s,l,h,M);return f&&(o&&(m.fromBufferAttribute(o,u),v.fromBufferAttribute(o,c),g.fromBufferAttribute(o,d),f.uv=e(M,s,l,h,m,v,g)),f.face=new de(u,c,d,he.normal(s,l,h)),f.faceIndex=u),f}var n=new c,a=new oe,o=new te,s=new u,l=new u,h=new u,d=new u,f=new u,p=new u,m=new r,v=new r,g=new r,y=new u,M=new u,E=new u;return function(r,u){var c=this.geometry,y=this.material,E=this.matrixWorld;if(void 0!==y&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(E),!1!==r.ray.intersectsSphere(o)&&(n.getInverse(E),a.copy(r.ray).applyMatrix4(n),null===c.boundingBox||!1!==a.intersectsBox(c.boundingBox)))){var b;if(c.isBufferGeometry){var x,I,T,w,C,S=c.index,A=c.attributes.position,k=c.attributes.uv;if(null!==S)for(w=0,C=S.count;w<C;w+=3)x=S.getX(w),I=S.getX(w+1),T=S.getX(w+2),(b=i(this,r,a,A,k,x,I,T))&&(b.faceIndex=Math.floor(w/3),u.push(b));else for(w=0,C=A.count;w<C;w+=3)x=w,I=w+1,T=w+2,(b=i(this,r,a,A,k,x,I,T))&&(b.index=x,u.push(b))}else if(c.isGeometry){var R,B,L,O,P=Array.isArray(y),D=c.vertices,N=c.faces,_=c.faceVertexUvs[0];_.length>0&&(O=_);for(var H=0,F=N.length;H<F;H++){var U=N[H],G=P?y[U.materialIndex]:y;if(void 0!==G){if(R=D[U.a],B=D[U.b],L=D[U.c],!0===G.morphTargets){var z=c.morphTargets,j=this.morphTargetInfluences;s.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var V=0,W=z.length;V<W;V++){var Y=j[V];if(0!==Y){var Z=z[V].vertices;s.addScaledVector(d.subVectors(Z[U.a],R),Y),l.addScaledVector(f.subVectors(Z[U.b],B),Y),h.addScaledVector(p.subVectors(Z[U.c],L),Y)}}s.add(R),l.add(B),h.add(L),R=s,B=l,L=h}if(b=t(this,r,a,R,B,L,M)){if(O&&O[H]){var Q=O[H];m.copy(Q[0]),v.copy(Q[1]),g.copy(Q[2]),b.uv=e(M,R,B,L,m,v,g)}b.face=U,b.faceIndex=H,u.push(b)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Re.prototype=Object.create(Se.prototype),Re.prototype.constructor=Re,Be.prototype=Object.create(Ae.prototype),Be.prototype.constructor=Be,Le.prototype=Object.create(Se.prototype),Le.prototype.constructor=Le,Oe.prototype=Object.create(Ae.prototype),Oe.prototype.constructor=Oe,Pe.prototype=Object.assign(Object.create(ue.prototype),{constructor:Pe,isCamera:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new l;return function(t){var i=t||new u;return this.getWorldQuaternion(e),i.set(0,0,-1).applyQuaternion(e)}}(),clone:function(){return(new this.constructor).copy(this)}}),De.prototype=Object.assign(Object.create(Pe.prototype),{constructor:De,isPerspectiveCamera:!0,copy:function(e){return Pe.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*js.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*js.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*js.RAD2DEG*Math.atan(Math.tan(.5*js.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,r,n,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:r,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*js.DEG2RAD*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;n+=a.offsetX*r/o,t-=a.offsetY*i/s,r*=a.width/o,i*=a.height/s}var l=this.filmOffset;0!==l&&(n+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ne.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Ne,isOrthographicCamera:!0,copy:function(e){return Pe.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,r,n,a){this.view={fullWidth:e,fullHeight:t,offsetX:i,offsetY:r,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,a=i+e,o=r+t,s=r-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;n+=c*(this.view.offsetX/l),a=n+c*(this.view.width/l),o-=h*(this.view.offsetY/u),s=o-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var ol=0;mt.prototype.isFogExp2=!0,mt.prototype.clone=function(){return new mt(this.color.getHex(),this.density)},mt.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},vt.prototype.isFog=!0,vt.prototype.clone=function(){return new vt(this.color.getHex(),this.near,this.far)},vt.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},gt.prototype=Object.assign(Object.create(ue.prototype),{constructor:gt,copy:function(e,t){return ue.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),yt.prototype=Object.assign(Object.create(ue.prototype),{constructor:yt,isLensFlare:!0,copy:function(e){ue.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,i=e.lensFlares.length;t<i;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,i,r,n,a){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===a&&(a=1),void 0===n&&(n=new Z(16777215)),void 0===r&&(r=Ia),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:n,blending:r})},updateLensFlares:function(){var e,t,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;e<i;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),Mt.prototype=Object.create(K.prototype),Mt.prototype.constructor=Mt,Mt.prototype.isSpriteMaterial=!0,Mt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Et.prototype=Object.assign(Object.create(ue.prototype),{constructor:Et,isSprite:!0,raycast:function(){var e=new u,t=new u,i=new u;return function(r,n){t.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(t,e),i.setFromMatrixScale(this.matrixWorld);var a=i.x*i.y/4;if(!(t.distanceToSquared(e)>a)){var o=r.ray.origin.distanceTo(e);o<r.near||o>r.far||n.push({distance:o,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),bt.prototype=Object.assign(Object.create(ue.prototype),{constructor:bt,copy:function(e){ue.prototype.copy.call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var n=t[i];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,r=0;r<i.length&&!(t<i[r].distance);r++);i.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object},raycast:function(){var e=new u;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,i)}}(),update:function(){var e=new u,t=new u;return function(i){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);r[0].object.visible=!0;for(var a=1,o=r.length;a<o&&n>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<o;a++)r[a].object.visible=!1}}}(),toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);t.object.levels=[];for(var i=this.levels,r=0,n=i.length;r<n;r++){var a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(xt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new c;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new c,t=new c;return function(){for(var i=this.bones,r=this.boneInverses,n=this.boneMatrices,a=this.boneTexture,o=0,s=i.length;o<s;o++){var l=i[o]?i[o].matrixWorld:t;e.multiplyMatrices(l,r[o]),e.toArray(n,16*o)}void 0!==a&&(a.needsUpdate=!0)}}(),clone:function(){return new xt(this.bones,this.boneInverses)}}),It.prototype=Object.assign(Object.create(ue.prototype),{constructor:It,isBone:!0}),Tt.prototype=Object.assign(Object.create(ke.prototype),{constructor:Tt,isSkinnedMesh:!0,initBones:function(){var e,t,i,r,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],e=new It,n.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],-1!==t.parent&&null!==t.parent&&void 0!==n[t.parent]?n[t.parent].add(n[i]):this.add(n[i])}return this.updateMatrixWorld(!0),n},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];e=1/i.lengthManhattan(),e!==1/0?i.multiplyScalar(e):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new a,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)r.x=n.getX(t),r.y=n.getY(t),r.z=n.getZ(t),r.w=n.getW(t),e=1/r.lengthManhattan(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),n.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){ke.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),wt.prototype=Object.create(K.prototype),wt.prototype.constructor=wt,wt.prototype.isLineBasicMaterial=!0,wt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Ct.prototype=Object.assign(Object.create(ue.prototype),{constructor:Ct,isLine:!0,raycast:function(){var e=new c,t=new oe,i=new te;return function(r,n){var a=r.linePrecision,o=a*a,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),!1!==r.ray.intersectsSphere(i)){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var c=new u,h=new u,d=new u,f=new u,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var m=s.index,v=s.attributes,g=v.position.array;if(null!==m)for(var y=m.array,M=0,E=y.length-1;M<E;M+=p){var b=y[M],x=y[M+1];c.fromArray(g,3*b),h.fromArray(g,3*x);var I=t.distanceSqToSegment(c,h,f,d);if(!(I>o)){f.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(f);T<r.near||T>r.far||n.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else for(var M=0,E=g.length/3-1;M<E;M+=p){c.fromArray(g,3*M),h.fromArray(g,3*M+3);var I=t.distanceSqToSegment(c,h,f,d);if(!(I>o)){f.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(f);T<r.near||T>r.far||n.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var w=s.vertices,C=w.length,M=0;M<C-1;M+=p){var I=t.distanceSqToSegment(w[M],w[M+1],f,d);if(!(I>o)){f.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(f);T<r.near||T>r.far||n.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),St.prototype=Object.assign(Object.create(Ct.prototype),{constructor:St,isLineSegments:!0}),At.prototype=Object.assign(Object.create(Ct.prototype),{constructor:At,isLineLoop:!0}),kt.prototype=Object.create(K.prototype),kt.prototype.constructor=kt,kt.prototype.isPointsMaterial=!0,kt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.positionOffset=e.positionOffset,this.sizeAttribute=e.sizeAttribute,this},Rt.prototype=Object.assign(Object.create(ue.prototype),{constructor:Rt,isPoints:!0,raycast:function(){var e=new c,t=new oe,i=new te;return function(r,n){function a(e,i){var a=t.distanceSqToPoint(e);if(a<d){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var u=r.ray.origin.distanceTo(s);if(u<r.near||u>r.far)return;n.push({distance:u,distanceToRay:Math.sqrt(a),point:s.clone(),index:i,face:null,object:o})}}var o=this,s=this.geometry,l=this.matrixWorld,c=r.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),i.radius+=c,!1!==r.ray.intersectsSphere(i)){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,f=new u;if(s.isBufferGeometry){var p=s.index,m=s.attributes,v=m.position.array;if(null!==p)for(var g=p.array,y=0,M=g.length;y<M;y++){var E=g[y];f.fromArray(v,3*E),a(f,E)}else for(var y=0,b=v.length/3;y<b;y++)f.fromArray(v,3*y),a(f,y)}else for(var x=s.vertices,y=0,b=x.length;y<b;y++)a(x[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Bt.prototype=Object.assign(Object.create(ue.prototype),{constructor:Bt}),Lt.prototype=Object.create(n.prototype),Lt.prototype.constructor=Lt,Ot.prototype=Object.create(n.prototype),Ot.prototype.constructor=Ot,Ot.prototype.isCompressedTexture=!0,Pt.prototype=Object.create(n.prototype),Pt.prototype.constructor=Pt,Dt.prototype=Object.create(n.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isDepthTexture=!0,Nt.prototype=Object.create(Ae.prototype),Nt.prototype.constructor=Nt,_t.prototype=Object.create(Se.prototype),_t.prototype.constructor=_t,Ht.prototype=Object.create(Ae.prototype),Ht.prototype.constructor=Ht,Ft.prototype=Object.create(Se.prototype),Ft.prototype.constructor=Ft,Ut.prototype=Object.create(Ae.prototype),Ut.prototype.constructor=Ut,Gt.prototype=Object.create(Se.prototype),Gt.prototype.constructor=Gt,zt.prototype=Object.create(Ut.prototype),zt.prototype.constructor=zt,jt.prototype=Object.create(Se.prototype),jt.prototype.constructor=jt,Vt.prototype=Object.create(Ut.prototype),Vt.prototype.constructor=Vt,Wt.prototype=Object.create(Se.prototype),Wt.prototype.constructor=Wt,Yt.prototype=Object.create(Ut.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(Se.prototype),Zt.prototype.constructor=Zt,Qt.prototype=Object.create(Ut.prototype),Qt.prototype.constructor=Qt,Xt.prototype=Object.create(Se.prototype),Xt.prototype.constructor=Xt,Jt.prototype=Object.create(Ae.prototype),Jt.prototype.constructor=Jt,Kt.prototype=Object.create(Se.prototype),Kt.prototype.constructor=Kt,qt.prototype=Object.create(Ae.prototype),qt.prototype.constructor=qt,$t.prototype=Object.create(Se.prototype),$t.prototype.constructor=$t,ei.prototype=Object.create(Ae.prototype),ei.prototype.constructor=ei;var sl={area:function(e){for(var t=e.length,i=0,r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},triangulate:function(){function e(e,t,i,r,n,a){var o,s,l,u,c,h,d,f,p;if(s=e[a[t]].x,l=e[a[t]].y,u=e[a[i]].x,c=e[a[i]].y,h=e[a[r]].x,d=e[a[r]].y,(u-s)*(d-l)-(c-l)*(h-s)<=0)return!1;var m,v,g,y,M,E,b,x,I,T,w,C,S,A,k;for(m=h-u,v=d-c,g=s-h,y=l-d,M=u-s,E=c-l,o=0;o<n;o++)if(f=e[a[o]].x,p=e[a[o]].y,!(f===s&&p===l||f===u&&p===c||f===h&&p===d)&&(b=f-s,x=p-l,I=f-u,T=p-c,w=f-h,C=p-d,k=m*T-v*I,S=M*x-E*b,A=g*C-y*w,k>=-Number.EPSILON&&A>=-Number.EPSILON&&S>=-Number.EPSILON))return!1;return!0}return function(t,i){var r=t.length;if(r<3)return null;var n,a,o,s=[],l=[],u=[];if(sl.area(t)>0)for(a=0;a<r;a++)l[a]=a;else for(a=0;a<r;a++)l[a]=r-1-a;var c=r,h=2*c;for(a=c-1;c>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?u:s;if(n=a,c<=n&&(n=0),a=n+1,c<=a&&(a=0),o=a+1,c<=o&&(o=0),e(t,n,a,o,c,l)){var d,f,p,m,v;for(d=l[n],f=l[a],p=l[o],s.push([t[d],t[f],t[p]]),u.push([l[n],l[a],l[o]]),m=a,v=a+1;v<c;m++,v++)l[m]=l[v];c--,h=2*c}}return i?u:s}}(),triangulateShape:function(e,t){function i(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,i){return e.x!==t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function n(e,t,i,n,a){var o=t.x-e.x,s=t.y-e.y,l=n.x-i.x,u=n.y-i.y,c=e.x-i.x,h=e.y-i.y,d=s*l-o*u,f=s*c-o*h;if(Math.abs(d)>Number.EPSILON){var p;if(d>0){if(f<0||f>d)return[];if((p=u*c-l*h)<0||p>d)return[]}else{if(f>0||f<d)return[];if((p=u*c-l*h)>0||p<d)return[]}if(0===p)return!a||0!==f&&f!==d?[e]:[];if(p===d)return!a||0!==f&&f!==d?[t]:[];if(0===f)return[i];if(f===d)return[n];var m=p/d;return[{x:e.x+m*o,y:e.y+m*s}]}if(0!==f||u*c!=l*h)return[];var v=0===o&&0===s,g=0===l&&0===u;if(v&&g)return e.x!==i.x||e.y!==i.y?[]:[e];if(v)return r(i,n,e)?[e]:[];if(g)return r(e,t,i)?[i]:[];var y,M,E,b,x,I,T,w;return 0!==o?(e.x<t.x?(y=e,E=e.x,M=t,b=t.x):(y=t,E=t.x,M=e,b=e.x),i.x<n.x?(x=i,T=i.x,I=n,w=n.x):(x=n,T=n.x,I=i,w=i.x)):(e.y<t.y?(y=e,E=e.y,M=t,b=t.y):(y=t,E=t.y,M=e,b=e.y),i.y<n.y?(x=i,T=i.y,I=n,w=n.y):(x=n,T=n.y,I=i,w=i.y)),E<=T?b<T?[]:b===T?a?[]:[x]:b<=w?[x,M]:[x,I]:E>w?[]:E===w?a?[]:[y]:b<=w?[y,M]:[y,I]}function a(e,t,i,r){var n=t.x-e.x,a=t.y-e.y,o=i.x-e.x,s=i.y-e.y,l=r.x-e.x,u=r.y-e.y,c=n*s-a*o,h=n*u-a*l;if(Math.abs(c)>Number.EPSILON){var d=l*s-u*o;return c>0?h>=0&&d>=0:h>=0||d>=0}return h>0}i(e),t.forEach(i);for(var o,s,l,u,c,h,d={},f=e.concat(),p=0,m=t.length;p<m;p++)Array.prototype.push.apply(f,t[p]);for(o=0,s=f.length;o<s;o++)c=f[o].x+":"+f[o].y,void 0!==d[c]&&console.warn("THREE.ShapeUtils: Duplicate point",c,o),d[c]=o;var v=function(e,t){for(var i,r,o,s,l,u,c,h,d,f,p,m=e.concat(),v=[],g=[],y=0,M=t.length;y<M;y++)v.push(y);for(var E=0,b=2*v.length;v.length>0;){if(--b<0){console.log("Infinite Loop! Holes left:"+v.length+", Probably Hole outside Shape!");break}for(o=E;o<m.length;o++){s=m[o],r=-1;for(var y=0;y<v.length;y++)if(u=v[y],c=s.x+":"+s.y+":"+u,void 0===g[c]){i=t[u];for(var x=0;x<i.length;x++)if(l=i[x],function(e,t){var r=m.length-1,n=e-1;n<0&&(n=r);var o=e+1;o>r&&(o=0);var s=a(m[e],m[n],m[o],i[t]);if(!s)return!1;var l=i.length-1,u=t-1;u<0&&(u=l);var c=t+1;return c>l&&(c=0),!!(s=a(i[t],i[u],i[c],m[e]))}(o,x)&&!function(e,t){var i,r,a;for(i=0;i<m.length;i++)if(r=i+1,r%=m.length,a=n(e,t,m[i],m[r],!0),a.length>0)return!0;return!1}(s,l)&&!function(e,i){var r,a,o,s,l;for(r=0;r<v.length;r++)for(a=t[v[r]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,l=n(e,i,a[o],a[s],!0),l.length>0)return!0;return!1}(s,l)){r=x,v.splice(y,1),h=m.slice(0,o+1),d=m.slice(o),f=i.slice(r),p=i.slice(0,r+1),m=h.concat(f).concat(p).concat(d),E=o;break}if(r>=0)break;g[c]=!0}if(r>=0)break}}return m}(e,t),g=sl.triangulate(v,!1);for(o=0,s=g.length;o<s;o++)for(u=g[o],l=0;l<3;l++)c=u[l].x+":"+u[l].y,void 0!==(h=d[c])&&(u[l]=h);return g.concat()},isClockWise:function(e){return sl.area(e)<0}};ti.prototype=Object.create(Se.prototype),ti.prototype.constructor=ti,ii.prototype=Object.create(Ae.prototype),ii.prototype.constructor=ii,ii.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],i=this.getAttribute("uv"),r=i?Array.prototype.slice.call(i.array):[],n=this.index;return{position:t,uv:r,index:n?Array.prototype.slice.call(n.array):[]}},ii.prototype.addShapeList=function(e,t){var i=e.length;t.arrays=this.getArrays();for(var r=0;r<i;r++){var n=e[r];this.addShape(n,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new xe(t.arrays.position,3)),this.addAttribute("uv",new xe(t.arrays.uv,2))},ii.prototype.addShape=function(e,t){function i(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}function n(e,t,i){var n,a,o=1,s=e.x-t.x,l=e.y-t.y,u=i.x-e.x,c=i.y-e.y,h=s*s+l*l,d=s*c-l*u;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(u*u+c*c),m=t.x-l/f,v=t.y+s/f,g=i.x-c/p,y=i.y+u/p,M=((g-m)*c-(y-v)*u)/(s*c-l*u);n=m+s*M-e.x,a=v+l*M-e.y;var E=n*n+a*a;if(E<=2)return new r(n,a);o=Math.sqrt(E/2)}else{var b=!1;s>Number.EPSILON?u>Number.EPSILON&&(b=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(b=!0):Math.sign(l)===Math.sign(c)&&(b=!0),b?(n=-l,a=s,o=Math.sqrt(h)):(n=s,a=l,o=Math.sqrt(h/2))}return new r(n/o,a/o)}function a(e,t){var i,r;for(K=e.length;--K>=0;){i=K,r=K-1,r<0&&(r=e.length-1);var n=0,a=A+2*w;for(n=0;n<a;n++){var o=Q*n,s=Q*(n+1);l(t+i+o,t+r+o,t+r+s,t+i+s,e,n,a,i,r)}}}function o(e,t,i){b.push(e),b.push(t),b.push(i)}function s(e,t,i){c(e),c(t),c(i)
;var r=y.length/3,n=B.generateTopUV(D,y,r-3,r-2,r-1);h(n[0]),h(n[1]),h(n[2])}function l(e,t,i,r,n,a,o,s,l){c(e),c(t),c(r),c(t),c(i),c(r);var u=y.length/3,d=B.generateSideWallUV(D,y,u-6,u-3,u-2,u-1);h(d[0]),h(d[1]),h(d[3]),h(d[1]),h(d[2]),h(d[3])}function c(e){M.push(y.length/3),y.push(b[3*e+0]),y.push(b[3*e+1]),y.push(b[3*e+2])}function h(e){E.push(e.x),E.push(e.y)}var d,f,p,m,v,g=t.arrays?t.arrays:this.getArrays(),y=g.position,M=g.index,E=g.uv,b=[],x=void 0!==t.amount?t.amount:100,I=void 0!==t.bevelThickness?t.bevelThickness:6,T=void 0!==t.bevelSize?t.bevelSize:I-2,w=void 0!==t.bevelSegments?t.bevelSegments:3,C=void 0===t.bevelEnabled||t.bevelEnabled,S=void 0!==t.curveSegments?t.curveSegments:12,A=void 0!==t.steps?t.steps:1,k=t.extrudePath,R=!1,B=void 0!==t.UVGenerator?t.UVGenerator:ti.WorldUVGenerator;k&&(d=k.getSpacedPoints(A),R=!0,C=!1,f=void 0!==t.frames?t.frames:k.computeFrenetFrames(A,!1),p=new u,m=new u,v=new u),C||(w=0,I=0,T=0);var L,O,P,D=this,N=e.extractPoints(S),_=N.shape,H=N.holes,F=!sl.isClockWise(_);if(F){for(_=_.reverse(),O=0,P=H.length;O<P;O++)L=H[O],sl.isClockWise(L)&&(H[O]=L.reverse());F=!1}var U=sl.triangulateShape(_,H),G=_;for(O=0,P=H.length;O<P;O++)L=H[O],_=_.concat(L);for(var z,j,V,W,Y,Z,Q=_.length,X=U.length,J=[],K=0,q=G.length,$=q-1,ee=K+1;K<q;K++,$++,ee++)$===q&&($=0),ee===q&&(ee=0),J[K]=n(G[K],G[$],G[ee]);var te,ie=[],re=J.concat();for(O=0,P=H.length;O<P;O++){for(L=H[O],te=[],K=0,q=L.length,$=q-1,ee=K+1;K<q;K++,$++,ee++)$===q&&($=0),ee===q&&(ee=0),te[K]=n(L[K],L[$],L[ee]);ie.push(te),re=re.concat(te)}for(z=0;z<w;z++){for(V=z/w,W=I*Math.cos(V*Math.PI/2),j=T*Math.sin(V*Math.PI/2),K=0,q=G.length;K<q;K++)Y=i(G[K],J[K],j),o(Y.x,Y.y,-W);for(O=0,P=H.length;O<P;O++)for(L=H[O],te=ie[O],K=0,q=L.length;K<q;K++)Y=i(L[K],te[K],j),o(Y.x,Y.y,-W)}for(j=T,K=0;K<Q;K++)Y=C?i(_[K],re[K],j):_[K],R?(m.copy(f.normals[0]).multiplyScalar(Y.x),p.copy(f.binormals[0]).multiplyScalar(Y.y),v.copy(d[0]).add(m).add(p),o(v.x,v.y,v.z)):o(Y.x,Y.y,0);var ne;for(ne=1;ne<=A;ne++)for(K=0;K<Q;K++)Y=C?i(_[K],re[K],j):_[K],R?(m.copy(f.normals[ne]).multiplyScalar(Y.x),p.copy(f.binormals[ne]).multiplyScalar(Y.y),v.copy(d[ne]).add(m).add(p),o(v.x,v.y,v.z)):o(Y.x,Y.y,x/A*ne);for(z=w-1;z>=0;z--){for(V=z/w,W=I*Math.cos(V*Math.PI/2),j=T*Math.sin(V*Math.PI/2),K=0,q=G.length;K<q;K++)Y=i(G[K],J[K],j),o(Y.x,Y.y,x+W);for(O=0,P=H.length;O<P;O++)for(L=H[O],te=ie[O],K=0,q=L.length;K<q;K++)Y=i(L[K],te[K],j),R?o(Y.x,Y.y+d[A-1].y,d[A-1].x+W):o(Y.x,Y.y,x+W)}!function(){var e=y.length/3;if(C){var i=0,r=Q*i;for(K=0;K<X;K++)Z=U[K],s(Z[2]+r,Z[1]+r,Z[0]+r);for(i=A+2*w,r=Q*i,K=0;K<X;K++)Z=U[K],s(Z[0]+r,Z[1]+r,Z[2]+r)}else{for(K=0;K<X;K++)Z=U[K],s(Z[2],Z[1],Z[0]);for(K=0;K<X;K++)Z=U[K],s(Z[0]+Q*A,Z[1]+Q*A,Z[2]+Q*A)}D.addGroup(e,y.length/3-e,void 0!==t.material?t.material:0)}(),function(){var e=y.length/3,i=0;for(a(G,i),i+=G.length,O=0,P=H.length;O<P;O++)L=H[O],a(L,i),i+=L.length;D.addGroup(e,y.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}(),t.arrays||(this.setIndex(M),this.addAttribute("position",new xe(y,3)),this.addAttribute("uv",new xe(t.arrays.uv,2)))},ti.WorldUVGenerator={generateTopUV:function(e,t,i,n,a){var o=t[3*i],s=t[3*i+1],l=t[3*n],u=t[3*n+1],c=t[3*a],h=t[3*a+1];return[new r(o,s),new r(l,u),new r(c,h)]},generateSideWallUV:function(e,t,i,n,a,o){var s=t[3*i],l=t[3*i+1],u=t[3*i+2],c=t[3*n],h=t[3*n+1],d=t[3*n+2],f=t[3*a],p=t[3*a+1],m=t[3*a+2],v=t[3*o],g=t[3*o+1],y=t[3*o+2];return Math.abs(l-h)<.01?[new r(s,1-u),new r(c,1-d),new r(f,1-m),new r(v,1-y)]:[new r(l,1-u),new r(h,1-d),new r(p,1-m),new r(g,1-y)]}},ri.prototype=Object.create(Se.prototype),ri.prototype.constructor=ri,ni.prototype=Object.create(ii.prototype),ni.prototype.constructor=ni,ai.prototype=Object.create(Se.prototype),ai.prototype.constructor=ai,oi.prototype=Object.create(Ae.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(Se.prototype),si.prototype.constructor=si,li.prototype=Object.create(Ae.prototype),li.prototype.constructor=li,ui.prototype=Object.create(Se.prototype),ui.prototype.constructor=ui,ci.prototype=Object.create(Ae.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(Se.prototype),hi.prototype.constructor=hi,di.prototype=Object.create(Ae.prototype),di.prototype.constructor=di,fi.prototype=Object.create(Ae.prototype),fi.prototype.constructor=fi,pi.prototype=Object.create(Se.prototype),pi.prototype.constructor=pi,mi.prototype=Object.create(Ae.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(pi.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(mi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(Se.prototype),yi.prototype.constructor=yi,Mi.prototype=Object.create(Ae.prototype),Mi.prototype.constructor=Mi;var ll=Object.freeze({WireframeGeometry:Nt,ParametricGeometry:_t,ParametricBufferGeometry:Ht,TetrahedronGeometry:Gt,TetrahedronBufferGeometry:zt,OctahedronGeometry:jt,OctahedronBufferGeometry:Vt,IcosahedronGeometry:Wt,IcosahedronBufferGeometry:Yt,DodecahedronGeometry:Zt,DodecahedronBufferGeometry:Qt,PolyhedronGeometry:Ft,PolyhedronBufferGeometry:Ut,TubeGeometry:Xt,TubeBufferGeometry:Jt,TorusKnotGeometry:Kt,TorusKnotBufferGeometry:qt,TorusGeometry:$t,TorusBufferGeometry:ei,TextGeometry:ri,TextBufferGeometry:ni,SphereGeometry:ai,SphereBufferGeometry:oi,RingGeometry:si,RingBufferGeometry:li,PlaneGeometry:Le,PlaneBufferGeometry:Oe,LatheGeometry:ui,LatheBufferGeometry:ci,ShapeGeometry:hi,ShapeBufferGeometry:di,ExtrudeGeometry:ti,ExtrudeBufferGeometry:ii,EdgesGeometry:fi,ConeGeometry:vi,ConeBufferGeometry:gi,CylinderGeometry:pi,CylinderBufferGeometry:mi,CircleGeometry:yi,CircleBufferGeometry:Mi,BoxGeometry:Re,BoxBufferGeometry:Be});Ei.prototype=Object.create(q.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isShadowMaterial=!0,bi.prototype=Object.create(q.prototype),bi.prototype.constructor=bi,bi.prototype.isRawShaderMaterial=!0,xi.prototype=Object.create(K.prototype),xi.prototype.constructor=xi,xi.prototype.isMeshStandardMaterial=!0,xi.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ii.prototype=Object.create(xi.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isMeshPhysicalMaterial=!0,Ii.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ti.prototype=Object.create(K.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isMeshPhongMaterial=!0,Ti.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},wi.prototype=Object.create(Ti.prototype),wi.prototype.constructor=wi,wi.prototype.isMeshToonMaterial=!0,wi.prototype.copy=function(e){return Ti.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ci.prototype=Object.create(K.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isMeshNormalMaterial=!0,Ci.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Si.prototype=Object.create(K.prototype),Si.prototype.constructor=Si,Si.prototype.isMeshLambertMaterial=!0,Si.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ai.prototype=Object.create(K.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isLineDashedMaterial=!0,Ai.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ul=Object.freeze({ShadowMaterial:Ei,SpriteMaterial:Mt,RawShaderMaterial:bi,ShaderMaterial:q,PointsMaterial:kt,MeshPhysicalMaterial:Ii,MeshStandardMaterial:xi,MeshPhongMaterial:Ti,MeshToonMaterial:wi,MeshNormalMaterial:Ci,MeshLambertMaterial:Si,MeshDepthMaterial:$,MeshBasicMaterial:fe,LineDashedMaterial:Ai,LineBasicMaterial:wt,Material:K}),cl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},hl=new ki;Object.assign(Ri.prototype,{load:function(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,a=cl.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var l=s[1],u=!!s[2],c=s[3];c=window.decodeURIComponent(c),u&&(c=window.atob(c));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);for(var f=new Uint8Array(h),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);"blob"===d&&(h=new Blob([h],{type:l}));break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),n.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),n.manager.itemEnd(e),n.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(i){var a=i.target.response;cl.add(e,a),200===this.status?(t&&t(a),n.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(a),n.manager.itemEnd(e)):(r&&r(i),n.manager.itemEnd(e),n.manager.itemError(e))},!1),void 0!==i&&v.addEventListener("progress",function(e){i(e)},!1),v.addEventListener("error",function(t){r&&r(t),n.manager.itemEnd(e),n.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return n.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Bi.prototype,{load:function(e,t,i,r){var n=this,a=[],o=new Ot;o.image=a;var s=new Ri(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,c=e.length;u<c;++u)!function(u){s.load(e[u],function(e){var i=n._parser(e,!0);a[u]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(l+=1)&&(1===i.mipmapCount&&(o.minFilter=Eo),o.format=i.format,o.needsUpdate=!0,t&&t(o))},i,r)}(u);else s.load(e,function(e){var i=n._parser(e,!0);if(i.isCubemap)for(var r=i.mipmaps.length/i.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)a[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+l]),a[s].format=i.format,a[s].width=i.width,a[s].height=i.height}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=Eo),o.format=i.format,o.needsUpdate=!0,t&&t(o)},i,r);return o},setPath:function(e){return this.path=e,this}}),Object.assign(Li.prototype,{load:function(e,t,i,r){var n=this,a=new h,o=new Ri(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var i=n._parser(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:mo,a.wrapT=void 0!==i.wrapT?i.wrapT:mo,a.magFilter=void 0!==i.magFilter?i.magFilter:Eo,a.minFilter=void 0!==i.minFilter?i.minFilter:xo,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps),1===i.mipmapCount&&(a.minFilter=Eo),a.needsUpdate=!0,t&&t(a,i))},i,r),a}}),Object.assign(Oi.prototype,{load:function(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,a=cl.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){cl.add(e,this),t&&t(this),n.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){r&&r(t),n.manager.itemEnd(e),n.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Pi.prototype,{load:function(e,t,i,r){var n=new d,a=new Oi(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<e.length;++s)!function(i){a.load(e[i],function(e){n.images[i]=e,6==++o&&(n.needsUpdate=!0,t&&t(n))},void 0,r)}(s);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Di.prototype,{load:function(e,t,i,r){var a=new Oi(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=new n;return o.image=a.load(e,function(){var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);o.format=i?No:_o,o.needsUpdate=!0,void 0!==t&&t(o)},i,r),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Ni.prototype=Object.assign(Object.create(ue.prototype),{constructor:Ni,isLight:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),_i.prototype=Object.assign(Object.create(Ni.prototype),{constructor:_i,isHemisphereLight:!0,copy:function(e){return Ni.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Hi.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Fi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:Fi,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*js.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;i===t.fov&&r===t.aspect&&n===t.far||(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix())}}),Ui.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Ui,isSpotLight:!0,copy:function(e){return Ni.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Gi.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Gi,isPointLight:!0,copy:function(e){return Ni.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),zi.prototype=Object.assign(Object.create(Hi.prototype),{constructor:zi}),ji.prototype=Object.assign(Object.create(Ni.prototype),{constructor:ji,isDirectionalLight:!0,copy:function(e){return Ni.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Vi.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Vi,isAmbientLight:!0}),Wi.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Wi,isRectAreaLight:!0,copy:function(e){return Ni.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ni.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var dl={arraySlice:function(e,t,i){return dl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,i){return e[t]-e[i]}for(var i=e.length,r=new Array(i),n=0;n!==i;++n)r[n]=n;return r.sort(t),r},sortedArray:function(e,t,i){for(var r=e.length,n=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=i[a]*t,l=0;l!==t;++l)n[o++]=e[s+l];return n},flattenJSON:function(e,t,i,r){for(var n=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[n++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),i.push.apply(i,o)),a=e[n++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(i,i.length)),a=e[n++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),i.push(o)),a=e[n++]}while(void 0!==a)}},subclip:function(e,t,i,r,n){n=n||30;var a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var f=l.times[d]*n;if(!(f<i||f>=r)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p])}}0!==c.length&&(l.times=dl.convertArray(c,l.times.constructor),l.values=dl.convertArray(h,l.values.constructor),o.push(l))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a}};Object.assign(Yi.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{var a;i:{r:if(!(e<r)){for(var o=i+2;;){if(void 0===r){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,n)}if(i===o)break;if(n=r,r=t[++i],e<r)break t}a=t.length;break i}{if(e>=n)break e;var s=t[1];e<s&&(i=2,n=s);for(var o=i-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===o)break;if(r=n,n=t[--i-1],e>=n)break t}a=i,i=0}}for(;i<a;){var l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],void 0===(n=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,n,e)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r,a=0;a!==r;++a)t[a]=i[n+a];return t},interpolate_:function(e,t,i,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,i){}}),Object.assign(Yi.prototype,{beforeStart_:Yi.prototype.copySampleValue_,afterEnd_:Yi.prototype.copySampleValue_}),Zi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Zi,DefaultSettings_:{endingStart:Rs,endingEnd:Rs},intervalChanged_:function(e,t,i){var r=this.parameterPositions,n=e-2,a=e+1,o=r[n],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:n=e,o=2*t-i;break;case 2402:n=r.length-2,o=t+r[n]-r[n+1];break;default:n=e,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*i-t;break;case 2402:a=1,s=i+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-i),this._offsetPrev=n*u,this._offsetNext=a*u},interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(i-t)/(r-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,M=d*m-d*p,E=0;E!==o;++E)n[E]=v*a[u+E]+g*a[l+E]+y*a[s+E]+M*a[c+E];return n}}),Qi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Qi,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(i-t)/(r-t),c=1-u,h=0;h!==o;++h)n[h]=a[l+h]*c+a[s+h]*u;return n}}),Xi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Xi,interpolate_:function(e,t,i,r){return this.copySampleValue_(e-1)}});var fl;fl={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Xi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Qi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Zi(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(i)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,r=i.length,n=0,a=r-1;n!==r&&i[n]<e;)++n;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==n||a!==r){n>=a&&(a=Math.max(a,1),n=a-1);var o=this.getValueSize();this.times=dl.arraySlice(i,n,a),this.values=dl.arraySlice(this.values,n*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var i=this.times,r=this.values,n=i.length;0===n&&(console.error("track is empty",this),e=!1);for(var a=null,o=0;o!==n;o++){var s=i[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&dl.isTypedArray(r))for(var o=0,l=r.length;o!==l;++o){var u=r[o];if(isNaN(u)){console.error("value is not a valid number",this,o,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),r=2302===this.getInterpolation(),n=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(r)s=!0;else for(var u=o*i,c=u-i,h=u+i,d=0;d!==i;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==n){e[n]=e[o];for(var p=o*i,m=n*i,d=0;d!==i;++d)t[m+d]=t[p+d]}++n}}if(a>0){e[n]=e[a];for(var p=a*i,m=n*i,d=0;d!==i;++d)t[m+d]=t[p+d];++n}return n!==e.length&&(this.times=dl.arraySlice(e,0,n),this.values=dl.arraySlice(t,0,n*i)),this},clone:function(){var e=dl.arraySlice(this.times,0),t=dl.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}},Ki.prototype=Object.assign(Object.create(fl),{constructor:Ki,ValueTypeName:"vector"}),qi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:qi,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=(i-t)/(r-t),c=s+o;s!==c;s+=4)l.slerpFlat(n,0,a,s-o,a,s,u);return n}}),$i.prototype=Object.assign(Object.create(fl),{constructor:$i,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new qi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),er.prototype=Object.assign(Object.create(fl),{constructor:er,ValueTypeName:"number"}),tr.prototype=Object.assign(Object.create(fl),{constructor:tr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ir.prototype=Object.assign(Object.create(fl),{constructor:ir,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),rr.prototype=Object.assign(Object.create(fl),{constructor:rr,ValueTypeName:"color"}),nr.prototype=fl,fl.constructor=nr,Object.assign(nr,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=nr._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],r=[];dl.flattenJSON(e.keys,i,r,"value"),e.times=i,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,i=e.constructor;if(void 0!==i.toJSON)t=i.toJSON(e);else{t={name:e.name,times:dl.convertArray(e.times,Array),values:dl.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return er;case"vector":case"vector2":case"vector3":case"vector4":return Ki;case"color":return rr;case"quaternion":return $i;case"bool":case"boolean":return ir;case"string":return tr}throw new Error("Unsupported typeName: "+e)}}),Object.assign(ar,{parse:function(e){for(var t=[],i=e.tracks,r=1/(e.fps||1),n=0,a=i.length;n!==a;++n)t.push(nr.parse(i[n]).scale(r));return new ar(e.name,e.duration,t)},toJSON:function(e){for(var t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t},n=0,a=i.length;n!==a;++n)t.push(nr.toJSON(i[n]));return r},CreateFromMorphTargetSequence:function(e,t,i,r){for(var n=t.length,a=[],o=0;o<n;o++){var s=[],l=[];s.push((o+n-1)%n,o,(o+1)%n),l.push(0,1,0);var u=dl.getKeyframeOrder(s);s=dl.sortedArray(s,1,u),l=dl.sortedArray(l,1,u),r||0!==s[0]||(s.push(n),l.push(l[0])),a.push(new er(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/i))}return new ar(e,-1,a)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var r=e;i=r.geometry&&r.geometry.animations||r.animations}for(var n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var r={},n=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(n);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var h=[];for(var u in r)h.push(ar.CreateFromMorphTargetSequence(u,r[u],t,i));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var i=function(e,t,i,r,n){if(0!==i.length){var a=[],o=[];dl.flattenJSON(i,a,o,r),0!==a.length&&n.push(new e(t,a,o))}},r=[],n=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)c[u[h].morphTargets[d]]=-1;for(var f in c){for(var p=[],m=[],d=0;d!==u[h].morphTargets.length;++d){var v=u[h];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new er(".morphTargetInfluence["+f+"]",p,m))}a=c.length*(o||1)}else{var g=".bones["+t[l].name+"]";i(Ki,g+".position",u,"pos",r),i($i,g+".quaternion",u,"rot",r),i(Ki,g+".scale",u,"scl",r)}}return 0===r.length?null:new ar(n,a,r)}}),Object.assign(ar.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,i=0,r=e.length;i!==r;++i){var n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ar(this.name,this.duration,e,this.blendMode)}}),Object.assign(or.prototype,{load:function(e,t,i,r){var n=this,a=new Ri(n.manager);a.setResponseType("json"),a.load(e,function(e){t(n.parse(e))},i,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,n=new ul[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),
void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.shading&&(n.shading=e.shading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.positionOffset&&(n.positionOffset=e.positionOffset),void 0!==e.sizeAttribute&&(n.sizeAttribute=e.sizeAttribute),void 0!==e.map&&(n.map=t(e.map)),void 0!==e.alphaMap&&(n.alphaMap=t(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=t(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),n.normalScale=(new r).fromArray(a)}return void 0!==e.displacementMap&&(n.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=t(e.specularMap)),void 0!==e.envMap&&(n.envMap=t(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=t(e.gradientMap)),n}}),Object.assign(sr.prototype,{load:function(e,t,i,r){var n=this,a=new Ri(n.manager);a.setResponseType("json"),a.load(e,function(e){t(n.parse(e))},i,r)},parse:function(e){var t=new Ae,i=e.data.index;if(void 0!==i){var r=new pl[i.type](i.array);t.setIndex(new pe(r,1))}var n=e.data.attributes;for(var a in n){var o=n[a],r=new pl[o.type](o.array);t.addAttribute(a,new pe(r,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var h=s[l];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new u;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new te(f,d.radius)}return t}});var pl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};lr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,r=t.length;i<r;i+=2){var n=t[i],a=t[i+1];if(n.test(e))return a}return null}},Object.assign(lr.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,i){for(var r=[],n=0;n<e.length;++n)r[n]=this.createMaterial(e[n],t,i);return r},createMaterial:function(){var e={NoBlending:xa,NormalBlending:Ia,AdditiveBlending:Ta,SubtractiveBlending:wa,MultiplyBlending:Ca,CustomBlending:Sa},t=new Z,i=new Di,r=new or;return function(n,a,o){function s(e,t,r,n,s){var u,c=a+e,h=lr.Handlers.get(c);null!==h?u=h.load(c):(i.setCrossOrigin(o),u=i.load(c)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=po),1!==t[1]&&(u.wrapT=po)),void 0!==r&&u.offset.fromArray(r),void 0!==n&&("repeat"===n[0]&&(u.wrapS=po),"mirror"===n[0]&&(u.wrapS=vo),"repeat"===n[1]&&(u.wrapT=po),"mirror"===n[1]&&(u.wrapT=vo)),void 0!==s&&(u.anisotropy=s);var d=js.generateUUID();return l[d]=u,d}var l={},u={uuid:js.generateUUID(),type:"MeshLambertMaterial"};for(var c in n){var h=n[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=s(h,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=s(h,n.mapEmissiveRepeat,n.mapEmissiveOffset,n.mapEmissiveWrap,n.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=s(h,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=s(h,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=s(h,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=s(h,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=s(h,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=s(h,n.mapMetalnessRepeat,n.mapMetalnessOffset,n.mapMetalnessWrap,n.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=s(h,n.mapRoughnessRepeat,n.mapRoughnessOffset,n.mapRoughnessWrap,n.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=s(h,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=ma;break;case"doubleSided":u.side=va;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=h;break;case"vertexColors":!0===h&&(u.vertexColors=ba),"face"===h&&(u.vertexColors=Ea);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(l),r.parse(u)}}()}),Object.assign(ur.prototype,{load:function(e,t,i,r){var n=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:lr.prototype.extractUrlBase(e),o=new Ri(this.manager);o.setResponseType("json"),o.setWithCredentials(this.withCredentials),o.load(e,function(i){var r=i.metadata;if(void 0!==r){var o=r.type;if(void 0!==o){if("object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var s=n.parse(i,a);t(s.geometry,s.materials)},i,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function i(e,t){return e&1<<t}var n,a,o,s,l,c,h,d,f,p,m,v,g,y,M,E,b,x,I,T,w,C,S,A,k,R,B,L=e.faces,O=e.vertices,P=e.normals,D=e.colors,N=e.scale,_=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&_++;for(n=0;n<_;n++)t.faceVertexUvs[n]=[]}for(s=0,l=O.length;s<l;)x=new u,x.x=O[s++]*N,x.y=O[s++]*N,x.z=O[s++]*N,t.vertices.push(x);for(s=0,l=L.length;s<l;)if(p=L[s++],m=i(p,0),v=i(p,1),g=i(p,3),y=i(p,4),M=i(p,5),E=i(p,6),b=i(p,7),m){if(T=new de,T.a=L[s],T.b=L[s+1],T.c=L[s+3],w=new de,w.a=L[s+1],w.b=L[s+2],w.c=L[s+3],s+=4,v&&(f=L[s++],T.materialIndex=f,w.materialIndex=f),o=t.faces.length,g)for(n=0;n<_;n++)for(A=e.uvs[n],t.faceVertexUvs[n][o]=[],t.faceVertexUvs[n][o+1]=[],a=0;a<4;a++)d=L[s++],R=A[2*d],B=A[2*d+1],k=new r(R,B),2!==a&&t.faceVertexUvs[n][o].push(k),0!==a&&t.faceVertexUvs[n][o+1].push(k);if(y&&(h=3*L[s++],T.normal.set(P[h++],P[h++],P[h]),w.normal.copy(T.normal)),M)for(n=0;n<4;n++)h=3*L[s++],S=new u(P[h++],P[h++],P[h]),2!==n&&T.vertexNormals.push(S),0!==n&&w.vertexNormals.push(S);if(E&&(c=L[s++],C=D[c],T.color.setHex(C),w.color.setHex(C)),b)for(n=0;n<4;n++)c=L[s++],C=D[c],2!==n&&T.vertexColors.push(new Z(C)),0!==n&&w.vertexColors.push(new Z(C));t.faces.push(T),t.faces.push(w)}else{if(I=new de,I.a=L[s++],I.b=L[s++],I.c=L[s++],v&&(f=L[s++],I.materialIndex=f),o=t.faces.length,g)for(n=0;n<_;n++)for(A=e.uvs[n],t.faceVertexUvs[n][o]=[],a=0;a<3;a++)d=L[s++],R=A[2*d],B=A[2*d+1],k=new r(R,B),t.faceVertexUvs[n][o].push(k);if(y&&(h=3*L[s++],I.normal.set(P[h++],P[h++],P[h])),M)for(n=0;n<3;n++)h=3*L[s++],S=new u(P[h++],P[h++],P[h]),I.vertexNormals.push(S);if(E&&(c=L[s++],I.color.setHex(D[c])),b)for(n=0;n<3;n++)c=L[s++],I.vertexColors.push(new Z(D[c]));t.faces.push(I)}}function t(e,t){var i=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,n=e.skinWeights.length;r<n;r+=i){var o=e.skinWeights[r],s=i>1?e.skinWeights[r+1]:0,l=i>2?e.skinWeights[r+2]:0,u=i>3?e.skinWeights[r+3]:0;t.skinWeights.push(new a(o,s,l,u))}if(e.skinIndices)for(var r=0,n=e.skinIndices.length;r<n;r+=i){var c=e.skinIndices[r],h=i>1?e.skinIndices[r+1]:0,d=i>2?e.skinIndices[r+2]:0,f=i>3?e.skinIndices[r+3]:0;t.skinIndices.push(new a(c,h,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function i(e,t){var i=e.scale;if(void 0!==e.morphTargets)for(var r=0,n=e.morphTargets.length;r<n;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var a=t.morphTargets[r].vertices,o=e.morphTargets[r].vertices,s=0,l=o.length;s<l;s+=3){var c=new u;c.x=o[s]*i,c.y=o[s+1]*i,c.z=o[s+2]*i,a.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=t.faces,d=e.morphColors[0].colors,r=0,n=h.length;r<n;r++)h[r].color.fromArray(d,3*r)}}function n(e,t){var i=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var n=0;n<r.length;n++){var a=ar.parseAnimation(r[n],t.bones);a&&i.push(a)}if(t.morphTargets){var o=ar.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(o)}i.length>0&&(t.animations=i)}return function(r,a){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var o=new Se;return e(r,o),t(r,o),i(r,o),n(r,o),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:o}:{geometry:o,materials:lr.prototype.initMaterials(r.materials,a,this.crossOrigin)}}}()}),Object.assign(cr.prototype,{load:function(e,t,i,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this;new Ri(n.manager).load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");n.parse(a,t)},i,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(o)}),n=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,n),o=this.parseObject(e.object,i,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new ur,r=new sr,n=0,a=e.length;n<a;n++){var o,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ll[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ll[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ll[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ll[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ll[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ll[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new ll[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ll[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ll[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ll[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ll[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":o=i.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var i={};if(void 0!==e){var r=new or;r.setTextures(t);for(var n=0,a=e.length;n<a;n++){var o=e[n];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++)s.push(r.parse(o.materials[l]));i[o.uuid]=s}else i[o.uuid]=r.parse(o)}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var r=ar.parse(e[i]);t.push(r)}return t},parseImages:function(e,t){var i=this,r={};if(void 0!==e&&e.length>0){var n=new ki(t),a=new Oi(n);a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;r[l.uuid]=function(e){return i.manager.itemStart(e),a.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemEnd(e),i.manager.itemError(e)})}(u)}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new n(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=i(s.mapping,ml)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.wrap&&(l.wrapS=i(s.wrap[0],vl),l.wrapT=i(s.wrap[1],vl)),void 0!==s.minFilter&&(l.minFilter=i(s.minFilter,gl)),void 0!==s.magFilter&&(l.magFilter=i(s.magFilter,gl)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),r[s.uuid]=l}return r},parseObject:function(){var e=new c;return function(t,i,r){function n(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),i[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,n=e.length;i<n;i++){var a=e[i];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(r[a])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}var o;switch(t.type){case"Scene":o=new gt,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new Z(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new vt(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new mt(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new De(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Ne(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new Vi(t.color,t.intensity);break;case"DirectionalLight":o=new ji(t.color,t.intensity);break;case"PointLight":o=new Gi(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new Wi(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Ui(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new _i(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=n(t.geometry),l=a(t.material);o=s.bones&&s.bones.length>0?new Tt(s,l):new ke(s,l);break;case"LOD":o=new bt;break;case"Line":o=new Ct(n(t.geometry),a(t.material),t.mode);break;case"LineLoop":o=new At(n(t.geometry),a(t.material));break;case"LineSegments":o=new St(n(t.geometry),a(t.material));break;case"PointCloud":case"Points":o=new Rt(n(t.geometry),a(t.material));break;case"Sprite":o=new Et(a(t.material));break;case"Group":o=new Bt;break;default:o=new ue}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var u in t.children)o.add(this.parseObject(t.children[u],i,r));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var d=c[h],u=o.getObjectByProperty("uuid",d.object);void 0!==u&&o.addLevel(u,d.distance)}return o}}()});var ml={UVMapping:300,CubeReflectionMapping:oo,CubeRefractionMapping:so,EquirectangularReflectionMapping:lo,EquirectangularRefractionMapping:uo,SphericalReflectionMapping:co,CubeUVReflectionMapping:ho,CubeUVRefractionMapping:fo},vl={RepeatWrapping:po,ClampToEdgeWrapping:mo,MirroredRepeatWrapping:vo},gl={NearestFilter:go,NearestMipMapNearestFilter:yo,NearestMipMapLinearFilter:Mo,LinearFilter:Eo,LinearMipMapNearestFilter:bo,LinearMipMapLinearFilter:xo};Object.assign(br.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),a=0;for(r.push(0),i=1;i<=e;i++)t=this.getPoint(i/e),a+=t.distanceTo(n),r.push(a),n=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i,r=this.getLengths(),n=0,a=r.length;i=t||e*r[a-1];for(var o,s=0,l=a-1;s<=l;)if(n=Math.floor(s+(l-s)/2),(o=r[n]-i)<0)s=n+1;else{if(!(o>0)){l=n;break}l=n-1}if(n=l,r[n]===i)return n/(a-1);var u=r[n];return(n+(i-u)/(r[n+1]-u))/(a-1)},getTangent:function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),i>1&&(i=1);var r=this.getPoint(t);return this.getPoint(i).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i,r,n,a=new u,o=[],s=[],l=[],h=new u,d=new c;for(i=0;i<=e;i++)r=i/e,o[i]=this.getTangentAt(r),o[i].normalize();s[0]=new u,l[0]=new u;var f=Number.MAX_VALUE,p=Math.abs(o[0].x),m=Math.abs(o[0].y),v=Math.abs(o[0].z);for(p<=f&&(f=p,a.set(1,0,0)),m<=f&&(f=m,a.set(0,1,0)),v<=f&&a.set(0,0,1),h.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],h),l[0].crossVectors(o[0],s[0]),i=1;i<=e;i++)s[i]=s[i-1].clone(),l[i]=l[i-1].clone(),h.crossVectors(o[i-1],o[i]),h.length()>Number.EPSILON&&(h.normalize(),n=Math.acos(js.clamp(o[i-1].dot(o[i]),-1,1)),s[i].applyMatrix4(d.makeRotationAxis(h,n))),l[i].crossVectors(o[i],s[i]);if(!0===t)for(n=Math.acos(js.clamp(s[0].dot(s[e]),-1,1)),n/=e,o[0].dot(h.crossVectors(s[0],s[e]))>0&&(n=-n),i=1;i<=e;i++)s[i].applyMatrix4(d.makeRotationAxis(o[i],n*i)),l[i].crossVectors(o[i],s[i]);return{tangents:o,normals:s,binormals:l}}}),xr.prototype=Object.create(br.prototype),xr.prototype.constructor=xr,xr.prototype.isLineCurve=!0,xr.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},xr.prototype.getPointAt=function(e){return this.getPoint(e)},xr.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},Ir.prototype=Object.assign(Object.create(br.prototype),{constructor:Ir,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new xr(t,e))},getPoint:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=t){var n=i[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-n/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],r=0,n=this.curves;r<n.length;r++)for(var a=n[r],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(i.push(u),t=u)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Se,i=0,r=e.length;i<r;i++){var n=e[i];t.vertices.push(new u(n.x,n.y,n.z||0))}return t}}),Tr.prototype=Object.create(br.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isEllipseCurve=!0,Tr.prototype.getPoint=function(e){for(var t=2*Math.PI,i=this.aEndAngle-this.aStartAngle,n=Math.abs(i)<Number.EPSILON;i<0;)i+=t;for(;i>t;)i-=t;i<Number.EPSILON&&(i=n?0:t),!0!==this.aClockwise||n||(i===t?i=-t:i-=t);var a=this.aStartAngle+e*i,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),c=o-this.aX,h=s-this.aY;o=c*l-h*u+this.aX,s=c*u+h*l+this.aY}return new r(o,s)},wr.prototype=Object.create(br.prototype),wr.prototype.constructor=wr,wr.prototype.isSplineCurve=!0,wr.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),a=i-n,o=t[0===n?n:n-1],s=t[n],l=t[n>t.length-2?t.length-1:n+1],u=t[n>t.length-3?t.length-1:n+2];return new r(hr(a,o.x,s.x,l.x,u.x),hr(a,o.y,s.y,l.y,u.y))},Cr.prototype=Object.create(br.prototype),Cr.prototype.constructor=Cr,Cr.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2,a=this.v3;return new r(Er(e,t.x,i.x,n.x,a.x),Er(e,t.y,i.y,n.y,a.y))},Sr.prototype=Object.create(br.prototype),Sr.prototype.constructor=Sr,Sr.prototype.getPoint=function(e){var t=this.v0,i=this.v1,n=this.v2;return new r(mr(e,t.x,i.x,n.x),mr(e,t.y,i.y,n.y))};var yl=Object.assign(Object.create(Ir.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new xr(this.currentPoint.clone(),new r(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){var a=new Sr(this.currentPoint.clone(),new r(e,t),new r(i,n));this.curves.push(a),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,a,o){var s=new Cr(this.currentPoint.clone(),new r(e,t),new r(i,n),new r(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),i=new wr(t);this.curves.push(i),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,r,n,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,i,r,n,a)},absarc:function(e,t,i,r,n,a){this.absellipse(e,t,i,i,r,n,a)},ellipse:function(e,t,i,r,n,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,i,r,n,a,o,s)},absellipse:function(e,t,i,r,n,a,o,s){var l=new Tr(e,t,i,r,n,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});Ar.prototype=yl,yl.constructor=Ar,kr.prototype=Object.assign(Object.create(yl),{constructor:kr,getPointsHoles:function(e){for(var t=[],i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(Rr.prototype,{moveTo:function(e,t){this.currentPath=new Ar,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,r){this.currentPath.quadraticCurveTo(e,t,i,r)},bezierCurveTo:function(e,t,i,r,n,a){this.currentPath.bezierCurveTo(e,t,i,r,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i],a=new kr;a.curves=n.curves,t.push(a)}return t}var r=sl.isClockWise,n=this.subPaths;if(0===n.length)return[];if(!0===t)return i(n);var a,o,s,l=[];if(1===n.length)return o=n[0],s=new kr,s.curves=o.curves,l.push(s),l;var u=!r(n[0].getPoints());u=e?!u:u;var c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var m=0,v=n.length;m<v;m++)o=n[m],c=o.getPoints(),a=r(c),a=e?!a:a,a?(!u&&d[p]&&p++,d[p]={s:new kr,p:c},d[p].s.curves=o.curves,u&&p++,f[p]=[]):f[p].push({h:o,p:c[0]});if(!d[0])return i(n);if(d.length>1){for(var g=!1,y=[],M=0,E=d.length;M<E;M++)h[M]=[];for(var M=0,E=d.length;M<E;M++)for(var b=f[M],x=0;x<b.length;x++){for(var I=b[x],T=!0,w=0;w<d.length;w++)(function(e,t){for(var i=t.length,r=!1,n=i-1,a=0;a<i;n=a++){var o=t[n],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[n],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r})(I.p,d[w].p)&&(M!==w&&y.push({froms:M,tos:w,hole:x}),T?(T=!1,h[w].push(I)):g=!0);T&&h[M].push(I)}y.length>0&&(g||(f=h))}for(var C,m=0,S=d.length;m<S;m++){s=d[m].s,l.push(s),C=f[m];for(var A=0,k=C.length;A<k;A++)s.holes.push(C[A].h)}return l}}),Object.assign(Br.prototype,{isFont:!0,generateShapes:function(e,t,i){function r(e,t,i,r){var a=n.glyphs[e]||n.glyphs["?"];if(a){var o,s,l,u,c,h,d,f,p,m=new Rr,v=[];if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),y=0,M=g.length;y<M;){var E=g[y++];switch(E){case"m":o=g[y++]*t+i,s=g[y++]*t+r,m.moveTo(o,s);break;case"l":o=g[y++]*t+i,s=g[y++]*t+r,m.lineTo(o,s);break;case"q":l=g[y++]*t+i,u=g[y++]*t+r,c=g[y++]*t+i,h=g[y++]*t+r,m.quadraticCurveTo(c,h,l,u),p=v[v.length-1],p&&(p.x,p.y);break;case"b":l=g[y++]*t+i,u=g[y++]*t+r,c=g[y++]*t+i,h=g[y++]*t+r,d=g[y++]*t+i,f=g[y++]*t+r,m.bezierCurveTo(c,h,d,f,l,u),p=v[v.length-1],p&&(p.x,p.y)}}return{offsetX:a.ha*t,path:m}}}void 0===t&&(t=100),void 0===i&&(i=4);for(var n=this.data,a=function(e){for(var i=String(e).split(""),a=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,s=0,l=0,u=[],c=0;c<i.length;c++){var h=i[c];if("\n"===h)s=0,l-=o;else{var d=r(h,a,s,l);s+=d.offsetX,u.push(d.path)}}return u}(e),o=[],s=0,l=a.length;s<l;s++)Array.prototype.push.apply(o,a[s].toShapes());return o}}),Object.assign(Lr.prototype,{load:function(e,t,i,r){var n=this;new Ri(this.manager).load(e,function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}var r=n.parse(i);t&&t(r)},i,r)},parse:function(e){return new Br(e)}});var Ml,El={getContext:function(){return void 0===Ml&&(Ml=new(window.AudioContext||window.webkitAudioContext)),Ml},setContext:function(e){Ml=e}};Object.assign(Or.prototype,{load:function(e,t,i,r){var n=new Ri(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){El.getContext().decodeAudioData(e,function(e){t(e)})},i,r)}}),Object.assign(Pr.prototype,{update:function(){var e,t,i,r,n,a,o,s,l=new c,u=new c;return function(c){if(e!==this||t!==c.focus||i!==c.fov||r!==c.aspect*this.aspect||n!==c.near||a!==c.far||o!==c.zoom||s!==this.eyeSep){e=this,t=c.focus,i=c.fov,r=c.aspect*this.aspect,n=c.near,a=c.far,o=c.zoom;var h=c.projectionMatrix.clone();s=this.eyeSep/2
;var d,f,p=s*n/t,m=n*Math.tan(js.DEG2RAD*i*.5)/o;u.elements[12]=-s,l.elements[12]=s,d=-m*r+p,f=m*r+p,h.elements[0]=2*n/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(h),d=-m*r-p,f=m*r-p,h.elements[0]=2*n/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(l)}}()}),Dr.prototype=Object.create(ue.prototype),Dr.prototype.constructor=Dr,Nr.prototype=Object.assign(Object.create(De.prototype),{constructor:Nr,isArrayCamera:!0}),_r.prototype=Object.assign(Object.create(ue.prototype),{constructor:_r,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new u,t=new l,i=new u,r=new u;return function(n){ue.prototype.updateMatrixWorld.call(this,n);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,i),r.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(r.x,this.context.currentTime),a.forwardY.setValueAtTime(r.y,this.context.currentTime),a.forwardZ.setValueAtTime(r.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z))}}()}),Hr.prototype=Object.assign(Object.create(ue.prototype),{constructor:Hr,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Fr.prototype=Object.assign(Object.create(Hr.prototype),{constructor:Fr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new u;return function(t){ue.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Ur.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(Gr.prototype,{accumulate:function(e,t){var i=this.buffer,r=this.valueSize,n=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)i[n+o]=i[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(i,n,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,n<1){var o=3*t;this._mixBufferRegion(i,r,o,1-n,t)}for(var s=t,l=t+t;s!==l;++s)if(i[s]!==i[s+t]){a.setValue(i,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,i=this.valueSize,r=3*i;e.getValue(t,r);for(var n=i,a=r;n!==a;++n)t[n]=t[r+n%i];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,r,n){if(r>=.5)for(var a=0;a!==n;++a)e[t+a]=e[i+a]},_slerp:function(e,t,i,r){l.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,i,r,n){for(var a=1-r,o=0;o!==n;++o){var s=t+o;e[s]=e[s]*a+e[i+o]*r}}}),Object.assign(zr.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(jr,{Composite:zr,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new jr.Composite(e,t,i):new jr(e,t,i)},parseTrackName:function(){var e="\\[\\]\\.:\\/",t="[^"+e+"]",i="[^"+e.replace("\\.","")+"]",r=/((?:WC+[\/:])*)/.source.replace("WC",t),n=/(WCOD+)?/.source.replace("WCOD",i),a=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),s=new RegExp("^"+r+n+a+o+"$"),l=["material","materials","bones"];return function(e){var t=s.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var n=i.nodeName.substring(r+1);-1!==l.indexOf(n)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=function(e){for(var i=0;i<e.bones.length;i++){var r=e.bones[i];if(r.name===t)return r}return null}(e.skeleton);if(i)return i}if(e.children){var r=function e(i){for(var r=0;r<i.length;r++){var n=i[r];if(n.name===t||n.uuid===t)return n;var a=e(n.children);if(a)return a}return null}(e.children);if(r)return r}return null}}),Object.assign(jr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(e||(e=jr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[i])return void console.error("  can not bind to objectName of node, undefined",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var s=e[r];if(void 0===s){var l=t.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===n){n=o;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(jr.prototype,{_getValue_unbound:jr.prototype.getValue,_setValue_unbound:jr.prototype.setValue}),Object.assign(Vr.prototype,{isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,i=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,l=s.length,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=n[d],p=void 0;if(void 0===f){f=i++,n[d]=f,t.push(h);for(var m=0,v=l;m!==v;++m)s[m].push(new jr(h,a[m],o[m]))}else if(f<r){p=t[f];var g=--r,y=t[g];n[y.uuid]=f,t[f]=y,n[d]=g,t[g]=h;for(var m=0,v=l;m!==v;++m){var M=s[m],E=M[g],b=M[f];M[f]=E,void 0===b&&(b=new jr(h,a[m],o[m])),M[g]=b}}else t[f]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,a=n.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=r[u];if(void 0!==c&&c>=i){var h=i++,d=t[h];r[d.uuid]=c,t[c]=d,r[u]=h,t[h]=l;for(var f=0,p=a;f!==p;++f){var m=n[f],v=m[h],g=m[c];m[c]=v,m[h]=g}}}this.nCachedObjects_=i},uncache:function(e){for(var t=this._objects,i=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,a=this._bindings,o=a.length,s=0,l=arguments.length;s!==l;++s){var u=arguments[s],c=u.uuid,h=n[c];if(void 0!==h)if(delete n[c],h<r){var d=--r,f=t[d],p=--i,m=t[p];n[f.uuid]=h,t[h]=f,n[m.uuid]=d,t[d]=m,t.pop();for(var v=0,g=o;v!==g;++v){var y=a[v],M=y[d],E=y[p];y[h]=M,y[d]=E,y.pop()}}else{var p=--i,m=t[p];n[m.uuid]=h,t[h]=m,t.pop();for(var v=0,g=o;v!==g;++v){var y=a[v];y[h]=y[p],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,r=i[e],n=this._bindings;if(void 0!==r)return n[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=n.length,i[e]=r,a.push(e),o.push(t),n.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new jr(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var r=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=i,a[i]=s,a.pop(),n[i]=n[o],n.pop(),r[i]=r[o],r.pop()}}}),Object.assign(Wr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){var r=this._clip.duration,n=e._clip.duration,a=n/r,o=r/n;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var r=this._mixer,n=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=n,s[1]=n+i,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);var n=this._startTime;if(null!==n){var a=(e-n)*i;if(a<0||0===i)return;this._startTime=null,t=i*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var i=this._clip.duration,r=this.loop,n=this._loopCount;if(2200===r){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=i)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===r;if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=i||t<0){var o=Math.floor(t/i);t-=i*o,n+=Math.abs(o);var s=this.repetitions-n;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&n))return this.time=t,i-t}return this.time=t,t},_setEndings:function(e,t,i){var r=this._interpolantSettings;i?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:Rs:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:Rs:2402)},_scheduleFading:function(e,t,i){var r=this._mixer,n=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=t,o[1]=n+e,s[1]=i,this}}),Object.assign(Yr.prototype,i.prototype,{_bindAction:function(e,t){var i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,o=e._interpolants,s=i.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==n;++c){var h=r[c],d=h.name,f=u[d];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;f=new Gr(jr.create(i,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,t)}for(var n=e._propertyBindings,a=0,o=n.length;a!==o;++a){var s=n[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var r=this._actions,n=this._actionsByClip,a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_addInactiveBinding:function(e,t,i){var r=this._bindingsByRootAndName,n=r[t],a=this._bindings;void 0===n&&(n={},r[t]=n),n[i]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[n];e:{for(var u in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(i=new Qi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r,t[r]=e,n.__cacheIndex=i,t[i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?ar.findByName(i,e):e,a=null!==n?n.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[r];if(void 0!==l)return l;s=o.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var u=new Wr(this,n,t);return this._bindAction(u,s),this._addInactiveAction(u,a,r),u},existingAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?ar.findByName(i,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(var n=0;n!==r;++n)i[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1,o=0;o!==i;++o){t[o]._update(r,e,n,a)}for(var s=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(void 0!==n){for(var a=n.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var r in i){var n=i[r].actionByRoot,a=n[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Zr.prototype.clone=function(){return new Zr(void 0===this.value.clone?this.value:this.value.clone())},Qr.prototype=Object.assign(Object.create(Ae.prototype),{constructor:Qr,isInstancedBufferGeometry:!0,addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i})},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var i=e.attributes;for(var r in i){var n=i[r];this.addAttribute(r,n.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var l=a[o];this.addGroup(l.start,l.count,l.materialIndex)}return this}}),Object.defineProperties(Xr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Xr.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}}),Object.defineProperty(Jr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Jr.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Kr.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Kr,isInstancedInterleavedBuffer:!0,copy:function(e){return Jr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),qr.prototype=Object.assign(Object.create(pe.prototype),{constructor:qr,isInstancedBufferAttribute:!0,copy:function(e){return pe.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign($r.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var i=[];return tn(e,this,i,t),i.sort(en),i},intersectObjects:function(e,t){var i=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,n=e.length;r<n;r++)tn(e[r],this,i,t);return i.sort(en),i}}),Object.assign(rn.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(nn.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(js.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(an.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),on.prototype=Object.create(ke.prototype),on.prototype.constructor=on,on.prototype.createAnimation=function(e,t,i,r){var n={start:t,end:i,length:i-t+1,fps:r,duration:(i-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},on.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)_?(\d+)/i,r={},n=this.geometry,a=0,o=n.morphTargets.length;a<o;a++){var s=n.morphTargets[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1];r[u]||(r[u]={start:1/0,end:-1/0});var c=r[u];a<c.start&&(c.start=a),a>c.end&&(c.end=a),t||(t=u)}}for(var u in r){var c=r[u];this.createAnimation(u,c.start,c.end,e)}this.firstAnimation=t},on.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},on.prototype.setAnimationDirectionBackward=function(e){
var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},on.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},on.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},on.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},on.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},on.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e];return i&&(t=i.time),t},on.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e];return i&&(t=i.duration),t},on.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},on.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},on.prototype.update=function(e){for(var t=0,i=this.animationsList.length;t<i;t++){var r=this.animationsList[t];if(r.active){var n=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.start+js.clamp(Math.floor(r.time/n),0,r.length-1),o=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*o,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var s=r.time%n/n;r.directionBackwards&&(s=1-s),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=s*o,this.morphTargetInfluences[r.lastFrame]=(1-s)*o):this.morphTargetInfluences[r.currentFrame]=o}}},sn.prototype=Object.create(ue.prototype),sn.prototype.constructor=sn,sn.prototype.isImmediateRenderObject=!0,ln.prototype=Object.create(St.prototype),ln.prototype.constructor=ln,ln.prototype.update=function(){var e=new u,t=new u,i=new ie;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,h=l.length;c<h;c++)for(var d=l[c],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[r[f]]],v=d.vertexNormals[f];e.copy(m).applyMatrix4(n),t.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry)for(var g=o.attributes.position,y=o.attributes.normal,u=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(n),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1;a.needsUpdate=!0}}(),un.prototype=Object.create(ue.prototype),un.prototype.constructor=un,un.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},un.prototype.update=function(){var e=new u,t=new u;return function(){var i=this.light.distance?this.light.distance:1e3,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color)}}(),cn.prototype=Object.create(St.prototype),cn.prototype.constructor=cn,cn.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]));return t},cn.prototype.update=function(){var e=new u,t=new c,i=new c;return function(){var r=this.geometry,n=r.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var a=0,o=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(t.multiplyMatrices(i,s.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(o,e.x,e.y,e.z),t.multiplyMatrices(i,s.parent.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(o+1,e.x,e.y,e.z),o+=2)}r.getAttribute("position").needsUpdate=!0}}(),hn.prototype=Object.create(ke.prototype),hn.prototype.constructor=hn,hn.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},hn.prototype.update=function(){this.material.color.copy(this.light.color)},dn.prototype=Object.create(ue.prototype),dn.prototype.constructor=dn,dn.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},dn.prototype.update=function(){var e=this.children[0];e.material.color.copy(this.light.color);var t=.5*this.light.width,i=.5*this.light.height,r=e.geometry.attributes.position,n=r.array;n[0]=t,n[1]=-i,n[2]=0,n[3]=t,n[4]=i,n[5]=0,n[6]=-t,n[7]=i,n[8]=0,n[9]=-t,n[10]=-i,n[11]=0,n[12]=t,n[13]=-i,n[14]=0,r.needsUpdate=!0},fn.prototype=Object.create(ue.prototype),fn.prototype.constructor=fn,fn.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},fn.prototype.update=function(){var e=new u,t=new Z,i=new Z;return function(){var r=this.children[0],n=r.geometry.getAttribute("color");t.copy(this.light.color),i.copy(this.light.groundColor);for(var a=0,o=n.count;a<o;a++){var s=a<o/2?t:i;n.setXYZ(a,s.r,s.g,s.b)}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),n.needsUpdate=!0}}(),pn.prototype=Object.create(St.prototype),pn.prototype.constructor=pn,mn.prototype=Object.create(St.prototype),mn.prototype.constructor=mn,vn.prototype=Object.create(St.prototype),vn.prototype.constructor=vn,vn.prototype.update=function(){var e=new u,t=new u,i=new ie;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,n=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;u<c;u++){var h=s[u],d=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),n.setXYZ(l,e.x,e.y,e.z),l+=1,n.setXYZ(l,t.x,t.y,t.z),l+=1}n.needsUpdate=!0}}(),gn.prototype=Object.create(ue.prototype),gn.prototype.constructor=gn,gn.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},gn.prototype.update=function(){var e=new u,t=new u,i=new u;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e);var r=this.children[0],n=this.children[1];r.lookAt(i),r.material.color.copy(this.light.color),n.lookAt(i),n.scale.z=i.length()}}(),yn.prototype=Object.create(St.prototype),yn.prototype.constructor=yn,yn.prototype.update=function(){function e(e,a,o,s){r.set(a,o,s).unproject(n);var l=i[e];if(void 0!==l)for(var u=t.getAttribute("position"),c=0,h=l.length;c<h;c++)u.setXYZ(l[c],r.x,r.y,r.z)}var t,i,r=new u,n=new Pe;return function(){t=this.geometry,i=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Mn.prototype=Object.create(St.prototype),Mn.prototype.constructor=Mn,Mn.prototype.update=function(){var e=new ee;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var i=e.min,r=e.max,n=this.geometry.attributes.position,a=n.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=i.x,a[4]=r.y,a[5]=r.z,a[6]=i.x,a[7]=i.y,a[8]=r.z,a[9]=r.x,a[10]=i.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=i.z,a[15]=i.x,a[16]=r.y,a[17]=i.z,a[18]=i.x,a[19]=i.y,a[20]=i.z,a[21]=r.x,a[22]=i.y,a[23]=i.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Mn.prototype.setFromObject=function(e){return this.object=e,this.update(),this};var bl,xl;En.prototype=Object.create(ue.prototype),En.prototype.constructor=En,En.prototype.setDirection=function(){var e,t=new u;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),En.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},En.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},bn.prototype=Object.create(St.prototype),bn.prototype.constructor=bn;var Il=new u,Tl=new xn,wl=new xn,Cl=new xn;In.prototype=Object.create(br.prototype),In.prototype.constructor=In,In.prototype.getPoint=function(e){var t=this.points,i=t.length;i<2&&console.log("duh, you need at least 2 points");var r=(i-(this.closed?0:1))*e,n=Math.floor(r),a=r-n;this.closed?n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length:0===a&&n===i-1&&(n=i-2,a=1);var o,s,l,c;if(this.closed||n>0?o=t[(n-1)%i]:(Il.subVectors(t[0],t[1]).add(t[0]),o=Il),s=t[n%i],l=t[(n+1)%i],this.closed||n+2<i?c=t[(n+2)%i]:(Il.subVectors(t[i-1],t[i-2]).add(t[i-1]),c=Il),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var h="chordal"===this.type?.5:.25,d=Math.pow(o.distanceToSquared(s),h),f=Math.pow(s.distanceToSquared(l),h),p=Math.pow(l.distanceToSquared(c),h);f<1e-4&&(f=1),d<1e-4&&(d=f),p<1e-4&&(p=f),Tl.initNonuniformCatmullRom(o.x,s.x,l.x,c.x,d,f,p),wl.initNonuniformCatmullRom(o.y,s.y,l.y,c.y,d,f,p),Cl.initNonuniformCatmullRom(o.z,s.z,l.z,c.z,d,f,p)}else if("catmullrom"===this.type){var m=void 0!==this.tension?this.tension:.5;Tl.initCatmullRom(o.x,s.x,l.x,c.x,m),wl.initCatmullRom(o.y,s.y,l.y,c.y,m),Cl.initCatmullRom(o.z,s.z,l.z,c.z,m)}return new u(Tl.calc(a),wl.calc(a),Cl.calc(a))},Tn.prototype=Object.create(br.prototype),Tn.prototype.constructor=Tn,Tn.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2,n=this.v3;return new u(Er(e,t.x,i.x,r.x,n.x),Er(e,t.y,i.y,r.y,n.y),Er(e,t.z,i.z,r.z,n.z))},wn.prototype=Object.create(br.prototype),wn.prototype.constructor=wn,wn.prototype.getPoint=function(e){var t=this.v0,i=this.v1,r=this.v2;return new u(mr(e,t.x,i.x,r.x),mr(e,t.y,i.y,r.y),mr(e,t.z,i.z,r.z))},Cn.prototype=Object.create(br.prototype),Cn.prototype.constructor=Cn,Cn.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new u;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},Sn.prototype=Object.create(Tr.prototype),Sn.prototype.constructor=Sn;var Sl={createMultiMaterialObject:function(e,t){for(var i=new Bt,r=0,n=t.length;r<n;r++)i.add(new ke(e,t[r]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var r=new c;r.getInverse(i.matrixWorld),e.applyMatrix(r),t.remove(e),i.add(e)}};br.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(br.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Qn.prototype=Object.create(In.prototype),Xn.prototype=Object.create(In.prototype),Jn.prototype=Object.create(In.prototype),Object.assign(Jn.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),pn.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(Q.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ee.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ce.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},js.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(ie.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(c.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new u),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,r,n,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,i,n,a)}}),re.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},l.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(oe.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(kr.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ti(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hi(this,e)}}),Object.assign(r.prototype,{fromAttribute:function(e,t,i){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)}}),Object.assign(a.prototype,{fromAttribute:function(e,t,i){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)}}),Se.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ue.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ue.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(bt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(xt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(br.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),De.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ni.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(pe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Ae.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ae.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Z}}}),Object.defineProperties(Ti.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(pt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(pt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(ae.prototype,{cullFace:{get:function(){return this.renderReverseSided?ca:ua},set:function(e){var t=e!==ua;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Hr.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Or).load(e,function(e){t.setBuffer(e)}),this},Ur.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Al={merge:function(e,t,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r
;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},kl={crossOrigin:void 0,loadTexture:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Di;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,void 0,r);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Pi;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,i,void 0,r);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};Object.assign(aa.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(aa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),t.LRUMap=e,t.WebGLRendererByIncrement=aa,t.WebGLRenderTargetCube=s,t.WebGLRenderTarget=o,t.WebGLRenderer=pt,t.ShaderLib=il,t.UniformsLib=$s,t.UniformsUtils=el,t.ShaderChunk=tl,t.FogExp2=mt,t.Fog=vt,t.Scene=gt,t.LensFlare=yt,t.Sprite=Et,t.LOD=bt,t.SkinnedMesh=Tt,t.Skeleton=xt,t.Bone=It,t.Mesh=ke,t.LineSegments=St,t.LineLoop=At,t.Line=Ct,t.Points=Rt,t.Group=Bt,t.VideoTexture=Lt,t.DataTexture=h,t.CompressedTexture=Ot,t.CubeTexture=d,t.CanvasTexture=Pt,t.DepthTexture=Dt,t.Texture=n,t.CompressedTextureLoader=Bi,t.DataTextureLoader=Li,t.CubeTextureLoader=Pi,t.TextureLoader=Di,t.ObjectLoader=cr,t.MaterialLoader=or,t.BufferGeometryLoader=sr,t.DefaultLoadingManager=hl,t.LoadingManager=ki,t.JSONLoader=ur,t.ImageLoader=Oi,t.FontLoader=Lr,t.FileLoader=Ri,t.Loader=lr,t.Cache=cl,t.AudioLoader=Or,t.SpotLightShadow=Fi,t.SpotLight=Ui,t.PointLight=Gi,t.RectAreaLight=Wi,t.HemisphereLight=_i,t.DirectionalLightShadow=zi,t.DirectionalLight=ji,t.AmbientLight=Vi,t.LightShadow=Hi,t.Light=Ni,t.StereoCamera=Pr,t.PerspectiveCamera=De,t.OrthographicCamera=Ne,t.CubeCamera=Dr,t.ArrayCamera=Nr,t.Camera=Pe,t.AudioListener=_r,t.PositionalAudio=Fr,t.AudioContext=El,t.AudioAnalyser=Ur,t.Audio=Hr,t.VectorKeyframeTrack=Ki,t.StringKeyframeTrack=tr,t.QuaternionKeyframeTrack=$i,t.NumberKeyframeTrack=er,t.ColorKeyframeTrack=rr,t.BooleanKeyframeTrack=ir,t.PropertyMixer=Gr,t.PropertyBinding=jr,t.KeyframeTrack=nr,t.AnimationUtils=dl,t.AnimationObjectGroup=Vr,t.AnimationMixer=Yr,t.AnimationClip=ar,t.Uniform=Zr,t.InstancedBufferGeometry=Qr,t.BufferGeometry=Ae,t.GeometryIdCount=Ce,t.Geometry=Se,t.InterleavedBufferAttribute=Xr,t.InstancedInterleavedBuffer=Kr,t.InterleavedBuffer=Jr,t.InstancedBufferAttribute=qr,t.Face3=de,t.Object3D=ue,t.Raycaster=$r,t.Layers=le,t.EventDispatcher=i,t.Clock=rn,t.QuaternionLinearInterpolant=qi,t.LinearInterpolant=Qi,t.DiscreteInterpolant=Xi,t.CubicInterpolant=Zi,t.Interpolant=Yi,t.Triangle=he,t.Math=js,t.Spherical=nn,t.Cylindrical=an,t.Plane=re,t.Frustum=ne,t.Sphere=te,t.Ray=oe,t.Matrix4=c,t.Matrix3=ie,t.Box3=ee,t.Box2=Q,t.Line3=ce,t.Euler=se,t.Vector4=a,t.Vector3=u,t.Vector2=r,t.Quaternion=l,t.Color=Z,t.MorphBlendMesh=on,t.ImmediateRenderObject=sn,t.VertexNormalsHelper=ln,t.SpotLightHelper=un,t.SkeletonHelper=cn,t.PointLightHelper=hn,t.RectAreaLightHelper=dn,t.HemisphereLightHelper=fn,t.GridHelper=pn,t.PolarGridHelper=mn,t.FaceNormalsHelper=vn,t.DirectionalLightHelper=gn,t.CameraHelper=yn,t.BoxHelper=Mn,t.ArrowHelper=En,t.AxisHelper=bn,t.CatmullRomCurve3=In,t.CubicBezierCurve3=Tn,t.QuadraticBezierCurve3=wn,t.LineCurve3=Cn,t.ArcCurve=Sn,t.EllipseCurve=Tr,t.SplineCurve=wr,t.CubicBezierCurve=Cr,t.QuadraticBezierCurve=Sr,t.LineCurve=xr,t.Shape=kr,t.Path=Ar,t.ShapePath=Rr,t.Font=Br,t.CurvePath=Ir,t.Curve=br,t.ShapeUtils=sl,t.SceneUtils=Sl,t.WebGLExtensions=dt,t.WireframeGeometry=Nt,t.ParametricGeometry=_t,t.ParametricBufferGeometry=Ht,t.TetrahedronGeometry=Gt,t.TetrahedronBufferGeometry=zt,t.OctahedronGeometry=jt,t.OctahedronBufferGeometry=Vt,t.IcosahedronGeometry=Wt,t.IcosahedronBufferGeometry=Yt,t.DodecahedronGeometry=Zt,t.DodecahedronBufferGeometry=Qt,t.PolyhedronGeometry=Ft,t.PolyhedronBufferGeometry=Ut,t.TubeGeometry=Xt,t.TubeBufferGeometry=Jt,t.TorusKnotGeometry=Kt,t.TorusKnotBufferGeometry=qt,t.TorusGeometry=$t,t.TorusBufferGeometry=ei,t.TextGeometry=ri,t.TextBufferGeometry=ni,t.SphereGeometry=ai,t.SphereBufferGeometry=oi,t.RingGeometry=si,t.RingBufferGeometry=li,t.PlaneGeometry=Le,t.PlaneBufferGeometry=Oe,t.LatheGeometry=ui,t.LatheBufferGeometry=ci,t.ShapeGeometry=hi,t.ShapeBufferGeometry=di,t.ExtrudeGeometry=ti,t.ExtrudeBufferGeometry=ii,t.EdgesGeometry=fi,t.ConeGeometry=vi,t.ConeBufferGeometry=gi,t.CylinderGeometry=pi,t.CylinderBufferGeometry=mi,t.CircleGeometry=yi,t.CircleBufferGeometry=Mi,t.BoxGeometry=Re,t.BoxBufferGeometry=Be,t.ShadowMaterial=Ei;t.SpriteMaterial=Mt,t.RawShaderMaterial=bi,t.ShaderMaterial=q,t.PointsMaterial=kt,t.MeshPhysicalMaterial=Ii,t.MeshStandardMaterial=xi,t.MeshPhongMaterial=Ti,t.MeshToonMaterial=wi,t.MeshNormalMaterial=Ci,t.MeshLambertMaterial=Si,t.MeshDepthMaterial=$,t.MeshBasicMaterial=fe,t.LineDashedMaterial=Ai,t.LineBasicMaterial=wt,t.Material=K,t.Float64BufferAttribute=Ie,t.Float32BufferAttribute=xe,t.Uint32BufferAttribute=be,t.Int32BufferAttribute=Ee,t.Uint16BufferAttribute=Me,t.Int16BufferAttribute=ye,t.Uint8ClampedBufferAttribute=ge,t.Uint8BufferAttribute=ve,t.Int8BufferAttribute=me,t.BufferAttribute=pe,t.REVISION=oa,t.MOUSE=sa,t.CullFaceNone=la,t.CullFaceBack=ua,t.CullFaceFront=ca,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=ha,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=da,t.PCFSoftShadowMap=fa,t.FrontSide=pa,t.BackSide=ma,t.DoubleSide=va,t.FlatShading=ga,t.SmoothShading=ya,t.NoColors=Ma,t.FaceColors=Ea,t.VertexColors=ba,t.NoBlending=xa,t.NormalBlending=Ia,t.AdditiveBlending=Ta,t.SubtractiveBlending=wa,t.MultiplyBlending=Ca,t.CustomBlending=Sa,t.AddEquation=Aa,t.SubtractEquation=ka,t.ReverseSubtractEquation=Ra,t.MinEquation=Ba,t.MaxEquation=La,t.ZeroFactor=Oa,t.OneFactor=Pa,t.SrcColorFactor=Da,t.OneMinusSrcColorFactor=Na,t.SrcAlphaFactor=_a,t.OneMinusSrcAlphaFactor=Ha,t.DstAlphaFactor=Fa,t.OneMinusDstAlphaFactor=Ua,t.DstColorFactor=Ga,t.OneMinusDstColorFactor=za,t.SrcAlphaSaturateFactor=ja,t.NeverDepth=Va,t.AlwaysDepth=Wa,t.LessDepth=Ya,t.LessEqualDepth=Za,t.EqualDepth=Qa,t.GreaterEqualDepth=Xa,t.GreaterDepth=Ja,t.NotEqualDepth=Ka,t.MultiplyOperation=qa,t.MixOperation=$a,t.AddOperation=eo,t.NoToneMapping=to,t.LinearToneMapping=io,t.ReinhardToneMapping=ro,t.Uncharted2ToneMapping=no,t.CineonToneMapping=ao,t.UVMapping=300,t.CubeReflectionMapping=oo,t.CubeRefractionMapping=so,t.EquirectangularReflectionMapping=lo,t.EquirectangularRefractionMapping=uo,t.SphericalReflectionMapping=co,t.CubeUVReflectionMapping=ho,t.CubeUVRefractionMapping=fo,t.RepeatWrapping=po,t.ClampToEdgeWrapping=mo,t.MirroredRepeatWrapping=vo,t.NearestFilter=go,t.NearestMipMapNearestFilter=yo,t.NearestMipMapLinearFilter=Mo,t.LinearFilter=Eo,t.LinearMipMapNearestFilter=bo,t.LinearMipMapLinearFilter=xo,t.UnsignedByteType=Io,t.ByteType=To,t.ShortType=wo,t.UnsignedShortType=Co,t.IntType=So,t.UnsignedIntType=Ao,t.FloatType=ko,t.HalfFloatType=Ro,t.UnsignedShort4444Type=Bo,t.UnsignedShort5551Type=Lo,t.UnsignedShort565Type=Oo,t.UnsignedInt248Type=Po,t.AlphaFormat=Do,t.RGBFormat=No,t.RGBAFormat=_o,t.LuminanceFormat=Ho,t.LuminanceAlphaFormat=Fo,t.RGBEFormat=Uo,t.DepthFormat=Go,t.DepthStencilFormat=zo,t.RGB_S3TC_DXT1_Format=jo,t.RGBA_S3TC_DXT1_Format=Vo,t.RGBA_S3TC_DXT3_Format=Wo,t.RGBA_S3TC_DXT5_Format=Yo,t.RGB_PVRTC_4BPPV1_Format=Zo,t.RGB_PVRTC_2BPPV1_Format=Qo,t.RGBA_PVRTC_4BPPV1_Format=Xo,t.RGBA_PVRTC_2BPPV1_Format=Jo,t.RGB_ETC1_Format=Ko,t.RGB_ETC2_Format=qo,t.RGBA_ETC2_EAC_Format=$o,t.RGBA_ASTC_10x10_Format=hs,t.RGBA_ASTC_10x5_Format=ls,t.RGBA_ASTC_10x6_Format=us,t.RGBA_ASTC_10x8_Format=cs,t.RGBA_ASTC_12x10_Format=ds,t.RGBA_ASTC_12x12_Format=fs,t.RGBA_ASTC_4x4_Format=es,t.RGBA_ASTC_5x4_Format=ts,t.RGBA_ASTC_5x5_Format=is,t.RGBA_ASTC_6x5_Format=rs,t.RGBA_ASTC_6x6_Format=ns,t.RGBA_ASTC_8x5_Format=as,t.RGBA_ASTC_8x6_Format=os,t.RGBA_ASTC_8x8_Format=ss,t.RGBA_BPTC_Format=ps,t.SRGB8_ALPHA8_ASTC_4x4_Format=ms,t.SRGB8_ALPHA8_ASTC_5x4_Format=vs,t.SRGB8_ALPHA8_ASTC_5x5_Format=gs,t.SRGB8_ALPHA8_ASTC_6x5_Format=ys,t.SRGB8_ALPHA8_ASTC_6x6_Format=Ms,t.SRGB8_ALPHA8_ASTC_8x5_Format=Es,t.SRGB8_ALPHA8_ASTC_8x6_Format=bs,t.SRGB8_ALPHA8_ASTC_8x8_Format=xs,t.SRGB8_ALPHA8_ASTC_10x10_Format=Cs,t.SRGB8_ALPHA8_ASTC_10x5_Format=Is,t.SRGB8_ALPHA8_ASTC_10x6_Format=Ts,t.SRGB8_ALPHA8_ASTC_10x8_Format=ws,t.SRGB8_ALPHA8_ASTC_12x10_Format=Ss,t.SRGB8_ALPHA8_ASTC_12x12_Format=As,t.LoopOnce=2200,t.LoopRepeat=ks,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=Rs,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=Bs,t.TriangleStripDrawMode=Ls,t.TriangleFanDrawMode=Os,t.LinearEncoding=Ps,t.sRGBEncoding=Ds,t.GammaEncoding=Ns,t.RGBEEncoding=_s,t.LogLuvEncoding=3003,t.RGBM7Encoding=Hs,t.RGBM16Encoding=Fs,t.RGBDEncoding=Us,t.BasicDepthPacking=Gs,t.RGBADepthPacking=zs,t.CubeGeometry=Re,t.Face4=An,t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=kn,t.MultiMaterial=Rn,t.PointCloud=Bn,t.Particle=Ln,t.ParticleSystem=On,t.PointCloudMaterial=Pn,t.ParticleBasicMaterial=Dn,t.ParticleSystemMaterial=Nn,t.Vertex=_n,t.DynamicBufferAttribute=Hn,t.Int8Attribute=Fn,t.Uint8Attribute=Un,t.Uint8ClampedAttribute=Gn,t.Int16Attribute=zn,t.Uint16Attribute=jn;t.Int32Attribute=Vn,t.Uint32Attribute=Wn,t.Float32Attribute=Yn,t.Float64Attribute=Zn,t.ClosedSplineCurve3=Qn,t.SplineCurve3=Xn,t.Spline=Jn,t.BoundingBoxHelper=Kn,t.EdgesHelper=qn,t.WireframeHelper=$n,t.XHRLoader=ea,t.BinaryTextureLoader=ta,t.GeometryUtils=Al,t.ImageUtils=kl,t.Projector=ia,t.CanvasRenderer=ra,Object.defineProperty(t,"__esModule",{value:!0})});var c=function(){function e(){_classCallCheck(this,e),this.condition=[{categoryId:"-2000011"}],this.distance=15}return _createClass(e,[{key:"setCondition",value:function(e){e instanceof Array&&(this.condition=e)}},{key:"getCondition",value:function(){return this.condition}},{key:"getDistance",value:function(){return this.distance}},{key:"setDistance",value:function(e){this.distance=e}},{key:"matchConditions",value:function(e){var t=this.condition;if(0==t.length)return!1;for(var i=!0,r=0,n=t.length;r<n;r++){var a=t[r];for(var o in a)if(!e.hasOwnProperty(o)||e[o]!=a[o]){i=!1;break}if(1==i)break;r<t.length-1&&(i=!0)}return i}},{key:"hasCollision",value:function(e,t){if(!e)return!1;var i=this.matchConditions(e),r=t<=this.distance;return!(!i||!r)}}]),e}();s.CollisionManager=c,function(){s.CameraControl=function(e,t,i,r,n,a){function o(){if(M.viewer.getRotationCenter())return M.viewer.getRotationCenter();var t=M.viewer.modelManager.sceneState;if(t.hasSelection()){var i=M.viewer.getFilter(),r=i.getVisibleComponentSet(t.getSelectionSet()),n=e.getBoundingBoxByIds(r);if(n&&!n.isEmpty())return n.getCenter()}return M.pivot?M.pivot:M.scene.getBoundingBox().getCenter()}function l(){var e=M.camera,t=e.position,i=M.camera.target.clone().sub(t);i.normalize();var r=new THREE.Plane;r.setFromNormalAndCoplanarPoint(i.clone().negate(),o()),r.normalize();var n=r.distanceToPoint(t),a=n*Math.tan(.5*e.fov),s=M.getContainerDimensions();return 2*a/(s.height-s.top)}function u(){M.pivotBallGroup=M.scene.getOrCreateObjectGroup(s.ObjectGroupType.PIVOTBALL,{priority:10,globalSpace:!1});var e=new THREE.SphereBufferGeometry(15,64,64),t=new THREE.Mesh(e,new s.PhongLightingMaterial({color:16777215,depthTest:!1,opacity:.5,transparent:!0,side:THREE.DoubleSide}));e=new THREE.SphereBufferGeometry(1,64,64);var i=new THREE.Mesh(e,new s.PhongLightingMaterial({color:16711680,depthTest:!1,opacity:.5,transparent:!0,side:THREE.DoubleSide}));M.pivotBallGroup.add(t),M.pivotBallGroup.add(i)}function c(e,t,i){if(null==i||void 0===i)return!0;var r=i[0],n=i[1],a=M.camera,o=a.position,s=a.getWorldDirection(),l=a.realUp||a.up,u=s.clone().cross(l).normalize(),c=(new THREE.Quaternion).setFromAxisAngle(u,e);o.clone().sub(t).normalize();var h=s.clone().negate(),d=h.angleTo(m.clone()),f=h.clone().projectOnPlane(m.clone()),p=f.angleTo(v.clone());f.x<0&&(p=2*Math.PI-p),s.applyQuaternion(c).normalize();var g=s.clone().negate(),y=g.angleTo(m.clone()),E=g.clone().projectOnPlane(m.clone()),b=E.angleTo(v.clone());if(E.x<0&&(b=2*Math.PI-b),Math.abs(b-p)>.001)return!1;if(d>r&&d<n){if(y>n||y<r)return!1}else{if((d>n?y-d:d-y)>0)return!1}return!0}function h(e,t,i,r){var n=new THREE.Matrix4;n.getInverse(t);var a=new THREE.Vector3(e.position.x,e.position.y,e.position.z),o=a.clone();o.applyMatrix4(n);var s=new THREE.Vector3(i.x,i.y,i.z);s.add(a),s.applyMatrix4(n),s.sub(o).normalize().multiplyScalar(r);var l=s.clone();return s.add(o),s.applyMatrix4(t),s.sub(a),{stepDiffWorld:l,stepDiffDrawing:s}}function d(e,t,i){var r=s.Tile.TileMath.fromDegreesYUp(t.lng,t.lat,t.height,i.radius),n=e.viewer,a=n.camera.position.angleTo(r),o=e.camera,l=o.position.clone(),u=n.camera.position.clone().cross(r).normalize(),c=new THREE.Vector3(0,1,0);u.y<0&&(c.y=-1);var h=l.applyAxisAngle(c,a),d=o.realUp.clone()||o.up.clone(),f=d.applyAxisAngle(c,a),p={position:h,target:o.target.clone(),up:f,zoom:o.zoom},m={position:o.position.clone(),target:o.target.clone(),up:o.realUp.clone()||o.up.clone(),zoom:o.zoom};return new Promise(function(t,i){n.animator.active(m,p,n,function(t){e.update(!0,!0)},function(){t()})})}function f(e,t,i){var r=s.Tile.TileMath.fromDegreesYUp(t.lng,t.lat,t.height,i.radius),n=e.viewer,a=n.camera.position.angleTo(r),o=e.camera,l=o.position.clone(),u=n.camera.position.clone().cross(r).normalize(),c=new THREE.Vector3(1,0,0);u.x<0&&(c.x=-1);var h=l.applyAxisAngle(c,a),d=o.realUp.clone()||o.up.clone(),f=d.applyAxisAngle(c,a),p={position:h,target:o.target.clone(),up:f,zoom:o.zoom},m={position:o.position.clone(),target:o.target.clone(),up:o.realUp.clone()||o.up.clone(),zoom:o.zoom};return new Promise(function(t,i){n.animator.active(m,p,n,function(t){e.update(!0,!0)},function(){t()})})}this.viewer=e,this.camera=i,this.domElement=r,this.scene=t,this.intersector=new s.IntersectHelper(e),this._ground=new s.Ground;var p,m=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,0,1),g=new THREE.Vector3,y=new THREE.Quaternion,M=this,E=!1;this.collisionManager=new s.CollisionManager,this.pivotBallGroup=null,this.minDollyDistance=.7,this.gravity=0,this.farFactor=2,this.maxPitch=void 0,this.minPitch=void 0,a=s.Utils.defaultValue(a,{}),this._enableDamping=s.Utils.defaultValue(a.enableDamping,!1),this._dynamicDampingFactor=s.Utils.defaultValue(a.dynamicDampingFactor,.1),this._limitWorldScalar=!0,this.lockPan=!1,this.userInputWorking=!1,this.destroy=function(){this.viewer=null,this.camera=null,this.domElement=null,this.scene=null,this.intersector.destroy(),this.intersector=null,this.collisionManager=null,this.pivotBallGroup=null},this.enableDamping=function(){this._enableDamping=!0},this.disableDamping=function(){this._enableDamping=!1},this.isEnableDamping=function(){return this._enableDamping},this.dynamicDampingFactor=function(e){return s.Utils.isDefined(e)&&(this._dynamicDampingFactor=e),this._dynamicDampingFactor},this.enableLimitWorldScalar=function(e){this._limitWorldScalar=e},this.isCameraChanging=function(){return E},this.setCameraChanging=function(e){E=e},this.setCamera=function(e){this.camera=e},this.getCamera=function(){return this.camera.updateMVP(),this.camera},this.dirtyCamera=function(e){this.camera.dirty=e},this.getFrustum=function(){return this.camera.getFrustum()},this.lockAxisZ=function(e){s.EditorConfig.LockAxisZ=e},this.isLockedAxisZ=function(){return s.EditorConfig.LockAxisZ},this.setLockAxisZRange=function(e){s.EditorConfig.LockAxisZRange=e},this.getLockAxisZRange=function(){return s.EditorConfig.LockAxisZRange},this.getClientSize=function(){var e=M.domElement===document?M.domElement.body:M.domElement;return new THREE.Vector2(e.clientWidth,e.clientHeight)},this.delayHandle=function(){function e(){M.update(!0,!0)}this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(e,200),this.needUpdateRenderList(!1)},this.updateMaxPitch=function(e){this.maxPitch=e},this.updateMinPitch=function(e){this.minPitch=e},this.processRotate=function(e,t){var i=this.getClientSize(),r=-2*Math.PI*e.x/i.x,n=-2*Math.PI*e.y/i.y;M.handleRotation(r,n,t)},this.handleRotation=function(e,t,i){var r=this.camera,n=r.position,a=r.target,o=r.getWorldDirection(),l=a.clone().sub(n),u=l.length(),h=null,d=function(e){var t,s,c,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=new THREE.Vector3;if(i){if(t=n.clone().sub(i),s=t.length(),t.normalize(),c=t.clone().applyQuaternion(e).normalize(),h&&null!=r.minimumElevation){var f=n.clone();if(f.copy(i).add(c.clone().multiplyScalar(s)),f.y<r.minimumElevation)return!1}n.copy(i).add(c.multiplyScalar(s)),o.applyQuaternion(e).normalize(),d.copy(n).add(o.multiplyScalar(u)),a.copy(d)}else t=l.clone(),s=u,t.normalize(),c=t.clone().applyQuaternion(e).normalize(),d.copy(n).add(c.multiplyScalar(s)),a.copy(d);return!0},f=r.up,p=o.clone().cross(f).normalize(),v=p.clone().cross(o).normalize();r.realUp.copy(v);var g;if(s.EditorConfig.LockAxisZ){if(Math.abs(e)>Math.abs(t))g=m,h=(new THREE.Quaternion).setFromAxisAngle(g,e),d(h),r.realUp.applyQuaternion(h).normalize(),this.adjustCameraUp();else if(null!=s.EditorConfig.LockAxisZRange&&Math.abs(t)>1e-4){var y=s.EditorConfig.LockAxisZRange;c(t,i,y)&&(g=o.clone().cross(f).normalize(),h=(new THREE.Quaternion).setFromAxisAngle(g,t),d(h),r.realUp.applyQuaternion(h).normalize(),this.adjustCameraUp())}}else if(Math.abs(e)>Math.abs(t))(Math.abs(o.y+1)<1e-4||Math.abs(o.y-1)<1e-4)&&(g=o.clone().cross(r.realUp).normalize(),h=(new THREE.Quaternion).setFromAxisAngle(g,.1),d(h),r.realUp.applyQuaternion(h).normalize(),this.adjustCameraUp()),g=o.y>0&&r.realUp.y<0?new THREE.Vector3(0,-1,0):new THREE.Vector3(0,1,0),h=(new THREE.Quaternion).setFromAxisAngle(g,e),d(h),r.realUp.applyQuaternion(h).normalize();else if(Math.abs(t)>1e-4){if(null!=this.maxPitch&&null!=this.minPitch){var M=r.target.clone().sub(r.position),E=new THREE.Vector2(Math.sqrt(M.x*M.x+M.z*M.z)*(r.realUp.y>0?1:-1),M.y),b=E.angle();if(b-Math.PI>0&&(b-=2*Math.PI),b=-b,t<0){if(b+t*(r.realUp.y>0?1:-1)>=this.maxPitch)return}else if(null!=r.minimumElevation&&r.position.y<r.minimumElevation||b-t<=this.minPitch)return}if(g=o.clone().cross(r.realUp).normalize(),h=(new THREE.Quaternion).setFromAxisAngle(g,t),!d(h,t>0))return;r.realUp.applyQuaternion(h).normalize(),this.adjustCameraUp()}this.dirtyCamera(!0),this.setCameraChanging(!0)},this.adjustCameraForPan=function(e){if(!this.lockPan){var t=this.camera,i=t.position.clone();if(i.add(e),!(null!=t.minimumElevation&&e.y<0&&i.y<t.minimumElevation)){if(this._limitWorldScalar&&this._checkZoomNearBoundary(i,-1)){if(i.x<0&&e.x<0||i.z<0&&e.z<0)return;if(i.x>0&&e.x>0||i.z>0&&e.z>0)return}t.target.add(e),t.position.add(e),this.dirtyCamera(!0),this.setCameraChanging(!0)}}},this.updateCamera=function(){var e=this.camera;e.dirty&&(e.lookAt(e.target),e.updateMVP())},this.update=function(e,t){this.updateCamera();var i=this.camera;e?(void 0!==t&&this.needUpdateRenderList(t),n(),g.copy(i.position),y.copy(i.quaternion)):(g.distanceToSquared(i.position)>1e-6||8*(1-y.dot(i.quaternion))>1e-6)&&(n(),g.copy(i.position),y.copy(i.quaternion))},this.updateView=function(e){void 0!==e&&this.needUpdateRenderList(e),n()},this.updateHighlight=function(){n(!0)},this.needUpdateRenderList=function(e){this.viewer.editorManager.isUpdateRenderList=e},this.pan=function(e,t){function i(e){var t=M.camera.matrix.elements;a.set(t[0],t[1],t[2]),a.multiplyScalar(-e),M.camera.target.add(a),M.camera.position.add(a)}function r(e){var t=M.camera.matrix.elements;a.set(t[4],t[5],t[6]),a.multiplyScalar(e),M.camera.target.add(a),M.camera.position.add(a)}var n=M.domElement===document?M.domElement.body:M.domElement,a=new THREE.Vector3;if(M.camera.isPerspective){var o=M.camera.position,l=o.clone().sub(M.camera.target).length();l*=Math.tan(M.camera.fov/2*Math.PI/180),i(2*e*l/n.clientHeight),r(2*t*l/n.clientHeight)}else void 0!==M.camera.top?(i(e*(M.camera.right-M.camera.left)/n.clientWidth),r(t*(M.camera.top-M.camera.bottom)/n.clientHeight)):s.Logger.warn("WARNING: CloudPickEditor.js encountered an unknown camera type - pan disabled.");this.dirtyCamera(!0),this.setCameraChanging(!0)},this.panOnWorld=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,a,o){var s=M.getContainerDimensions(),l=r.x-s.left,u=r.y-s.top;e.x=l/s.width,e.y=u/s.height,l=n.x-s.left,u=n.y-s.top,t.x=l/s.width,t.y=u/s.height,i.subVectors(t,e);var c=-i.x*o.x,h=i.y*o.y,d=M.getWorldRight().multiplyScalar(c),f=M.getWorldUp().multiplyScalar(h);a.addVectors(d,f),M.dirtyCamera(!0),M.setCameraChanging(!0)}}(),this.adjustCameraForDolly=function(e,t){var i=e-1;if(Math.abs(i)<1e-6)return!1;var r=this.camera,n=r.position,a=this.camera.direction(),o=new THREE.Vector3;t?o.subVectors(t,n):o.copy(a),o.multiplyScalar(i);var s=o.length();r.isPerspective?s<this.minDollyDistance&&o.normalize().multiplyScalar(this.minDollyDistance):(r.orthoScale*=e,r.setZoom(r.orthoScale));var l=new THREE.Vector3;l.addVectors(n,o),this._limitWorldScalar&&this._checkZoomNearBoundary(l,i)||null!=r.minimumElevation&&l.y<r.minimumElevation||(this._goingToDolly(r,l,i)?(r.position.copy(l),r.target.copy(a.add(l)),this.dirtyCamera(!0),this.setCameraChanging(!0)):i<0&&this.resetCameraToMaximumRange())},this.tmpCamPos=new THREE.Vector3,this._checkZoomNearBoundary=function(e,t){if(t<0){this.tmpCamPos.copy(e);var r=this.scene.getOriginalBoundingBoxWorld(),n=r.getSize().length(),a=r.getCenter(),o=.5*n/Math.tan(THREE.Math.degToRad(.5*i.fov)),s=this.scene.getMatrixWorldGlobal(),l=(new THREE.Matrix4).getInverse(s);this.tmpCamPos.applyMatrix4(l);var u=20*o;if(this.tmpCamPos.distanceTo(a)>u)return!0}return!1},this._goingToDolly=function(e,t,i){if(!e.isPerspective||!s.GlobalData.ConstraintZoom)return!0;var r=this.scene.getBoundingBox();if(i>0){return!!e.getFrustum().intersectsBox(r)}var n=r.getSize().length(),a=r.getCenter(),o=.5*n/Math.tan(THREE.Math.degToRad(.5*e.fov)),l=o*this.farFactor;return t.distanceTo(a)<l},this.dolly=function(e,t,i){var r=new THREE.Vector2(e,t),n=this.getIntersectContext(r),a=this.intersector.hitTest(n);null!=a?this.adjustCameraForDolly(i,a):this.adjustCameraForDolly(i,null)},this.dollyByPoint=function(e,t,i){var r=this.getTrackingPoint(e,t);this.adjustCameraForDolly(i,r)},this.endOperation=function(){this.intersector.lastIntersect=null},this.onUserInputFinished=function(){this.userInputWorking=!1,this.viewer.modelManager.setRenderStateChanged(!0),this.viewer.render()},this.zoom=function(e,t,i){var r;r=e>0?1/(1-e):1+e,void 0===t||void 0===i?this.adjustCameraForDolly(r,null):this.dollyByPoint(t,i,r),this.update()},this.zoomWithCenter=function(e,t){var i;i=e>0?1/(1-e):1+e,this.adjustCameraForDolly(i,this.scene.worldToDrawing(t)),this.update()},this.getContainerDimensions=function(){return s.DomUtil.getContainerOffsetToClient(this.domElement)},this.computeFrustum=function(){var e=new THREE.Matrix4,t=new THREE.Matrix4;return function(i,r,n,a,o,s){var l=this,u=this.camera,c=u.near*Math.tan(THREE.Math.degToRad(.5*u.fov)),h=c*u.aspect,d=(i-s.left)/s.width*2-1,f=(r-s.left)/s.width*2-1,p=-(n-s.top)/s.height*2+1,m=-(a-s.top)/s.height*2+1;if(u.isPerspective?e.makePerspective(d*h,f*h,p*c,m*c,u.near,u.far):e.makeOrthographic(d*h,f*h,p*c,m*c,u.near,u.far),u.updateMatrixWorld(),u.matrixWorldInverse.getInverse(u.matrixWorld),t.multiplyMatrices(e,u.matrixWorldInverse),o.setFromMatrix(t),!u.isPerspective){var v=function(e,t,i,r,n){var a,s=[l.viewer.worldToDrawing(l.viewer.clientToWorld({x:t,y:i,z:0})),l.viewer.worldToDrawing(l.viewer.clientToWorld({x:r,y:n,z:0})),l.viewer.worldToDrawing(l.viewer.clientToWorld({x:r,y:n,z:1}))];(a=o.planes[e]).setFromCoplanarPoints.apply(a,s)};v(0,i,n,i,a),v(1,r,a,r,n),v(2,i,a,r,a),v(3,r,n,i,n)}}}(),this.screenToCanvas=function(e,t){var i=this.getContainerDimensions();return{x:e-i.left,y:t-i.top}},this.mapScreenToLocal=function(e,t,i){var r=this.getContainerDimensions();i.set(e-r.left,r.height-(t-r.top))},this.mapWindowToViewport=function(e,t,i){var r=this.getContainerDimensions(),n=i||new THREE.Vector2;return n.x=(e-r.left)/r.width*2-1,n.y=-(t-r.top)/r.height*2+1,n},this.mapViewportToWindow=function(e,t,i){var r=this.getContainerDimensions(),n=i||new THREE.Vector2;return n.x=(e+1)/2*r.width+r.left,n.y=(1-t)/2*r.height+r.top,n},this.getCameraName=function(){return this.camera===e.defaultCamera?this.camera.isPerspective?"persp":"orth":this.camera.name},this.getCameraInfo=function(){var e=new s.CameraInfo(this.getCameraName(),this.camera.position,this.camera.target,this.camera.up);return JSON.stringify(e)},this.isKeepZoom=function(e,t,i){this.dirtyCamera(!0),this.setCameraChanging(!0),void 0===t&&(t=this.minDistance),void 0===i&&(i=this.maxDistance);var r=this.camera.position,n=this.camera.target,a=new THREE.Vector3;a.copy(r).sub(n);var o=a.length()*(2-e);return!(o<t||o>i)},this.computeRotation=function(){var e=new THREE.Matrix4;e.lookAt(this.camera.position,this.camera.target,this.camera.up);var t=new THREE.Quaternion;t.setFromRotationMatrix(e);var i=new THREE.Euler;return i.setFromQuaternion(t,void 0,!1),i},this.adjustCameraUp=function(){this.camera.realUp.y>0?this.camera.up.set(0,1,0):this.camera.realUp.y<0?this.camera.up.set(0,-1,0):this.camera.realUp.x>0?this.camera.up.set(1,0,0):this.camera.realUp.x<0?this.camera.up.set(-1,0,0):this.camera.realUp.z>0?this.camera.up.set(0,0,1):this.camera.realUp.z<0&&this.camera.up.set(0,0,-1)},this.getWorldEye=function(){return this.camera.target.clone().sub(this.camera.position)},this.getWorldRight=function(){var e=new THREE.Vector3,t=this.camera.up,i=this.camera.direction();return e.crossVectors(i,t),0===e.lengthSq()&&(t.z>t.y?i.y-=1e-4:i.z+=1e-4,e.crossVectors(i,t)),e.normalize()},this.getWorldRightByRealUp=function(){var e=new THREE.Vector3,t=this.camera.realUp,i=this.camera.direction();return e.crossVectors(i,t),0===e.lengthSq()&&(t.z>t.y?i.y-=1e-4:i.z+=1e-4,e.crossVectors(i,t)),e.normalize()},this.getWorldUp=function(){var e=this.getWorldRight(),t=this.camera.direction();return e.cross(t).normalize()},this.getWorldDimension=function(e,t){var i=this.camera.position,r=this.camera.direction().normalize(),n=this.getTrackingPoint(e,t),a=n.clone().sub(i),o=Math.abs(r.dot(a)),s=this.getContainerDimensions(),l=s.width/s.height,u=2*o*Math.tan(THREE.Math.degToRad(.5*this.camera.fov)),c=u*l;return new THREE.Vector2(c,u)},this.getWorldPointFromNearPlane=function(e,t){var r=new THREE.Vector3(e,t,0);return r.unproject(i),r},this.getTrackingPoint=function(e,t){var i=new THREE.Vector2(e,t),r=this.getIntersectContext(i),n=this.intersector.hitTest(r);if(!n){var a=r.mouse,o=this.camera.position,l=this.camera.direction(),u=l.clone().normalize(),c=this.getWorldPointFromNearPlane(a.x,a.y),h=this.getRaycaster(e,t).ray;if(p){var d=new THREE.Plane;if(d.setFromNormalAndCoplanarPoint(u,p),n=h.intersectPlane(d)){n.distanceTo(o)<1e-6&&(n=this._getTrackingPointFromBoundingBox(u,h))}else n=this._getTrackingPointFromBoundingBox(u,h)}else n=this._getTrackingPointFromBoundingBox(u,h);n||(s.Logger.log("tracking point is default!"),n=c)}return p=n.clone(),n},this._getTrackingPointFromBoundingBox=function(e,t){var i=this.scene.getBoundingBox(),r=this.camera.position;if(s.Utils.isDefined(i)){return i.getBoundingSphere().containsPoint(r)?this._getTrackingPointFromVisibleLayers(e,t):this._getTrackingPointFromSceneBox(e,t)}},this.getTrackingPointFromBoundingBox=function(e,t){return this.scene.getTrackingPointFromBoundingBox(e,t)},this._getTrackingPointFromSceneBox=function(e,t){var i=this.scene.getBoundingBox();if(s.Utils.isDefined(i)){var r=t.origin,n=i.getBoundingSphere(),a=n.distanceToPoint(r),o=e.clone().multiplyScalar(a),l=r.clone().add(o),u=new THREE.Plane;return u.setFromNormalAndCoplanarPoint(e,l),t.intersectPlane(u)}},this._getTrackingPointFromVisibleLayers=function(e,t){var i=this.viewer.modelManager,r=i.getVisibleLayersBoundingBox(),n=t.origin,a=r.getBoundingSphere(),o=t.intersectSphere(a),l=0;l=s.Utils.isDefined(o)?n.distanceTo(o):a.distanceToPoint(n);var u=e.clone().multiplyScalar(l),c=n.clone().add(u),h=new THREE.Plane;return h.setFromNormalAndCoplanarPoint(e,c),t.intersectPlane(h)},this.setCameraPosition=function(e){var t=this.camera,i=this.camera.direction(),r=i.length(),n=i.clone();n.normalize(),n.setLength(r),t.position.copy(e),t.target.addVectors(t.position,n),this.dirtyCamera(!0),this.setCameraChanging(!0)},this.moveStraight=function(e,t){var i=this.camera.position,r=this.camera.target;if(t){var n=new THREE.Vector3(r.x-i.x,0,r.z-i.z),a=n.length(),o=e/a,s=new THREE.Vector3(n.x*o,0,n.z*o);i.add(s),r.add(s)}else{var l=r.clone().sub(i);this.camera.translateZ(-e),r.addVectors(i,l)}this.dirtyCamera(!0),this.setCameraChanging(!0)},this.getIntersectContext=function(e){var t=new s.IntersectContext,i=this,r=i.viewer.modelManager;return t.scene=i.scene,t.camera=this.camera,null!=e&&i.mapWindowToViewport(e.x,e.y,t.mouse),
t.viewportSize=i.viewer.getViewportSize(),t.octreeRoots=r.getOctreeRoots(),t.octantMap=r.getOctantMap(),t},this.getLastIntersect=function(){return this.intersector.lastIntersect},this.calculatePivot=function(e,t){function i(e){var t=r.getIntersectContext(e),i=r.intersector.hitTest(t);if(e&&i)return i;var n=r.getRaycaster(e.x,e.y).ray;return r._ground.intersect(n)}var r=this,n=this.viewer,a=n.getFilter(),o=this.scene,l=null;if(n.getRotationCenter())return n.getRotationCenter();switch(e){case s.RotatePivotMode.SELECTION:if(o.hasClipPlanes()&&s.ClipPlaneManager.getInstance(o).isEnabled()){var u=s.ClipPlaneManager.getInstance(o).getClipBoundingBox();if(u&&!u.isEmpty()&&s.ClipPlaneManager.getInstance(o).isVisible()){l=u.getCenter();break}}if(o.hasFillClipPlanes()&&s.FillClipPlaneManager.getInstance(o).isEnabled())var c=s.FillClipPlaneManager.getInstance(o).getFillClipBoundingBox();var h=n.modelManager.sceneState,d=a.getVisibleComponentSet(h.getSelectionSet()),f=n.getBoundingBoxByIds(d);!f||f.isEmpty()?l=i(t):(u?f.intersect(u):c&&f.intersect(c),l=f.getCenter());break;case s.RotatePivotMode.CENTER:l=o.getBoundingBox().getCenter();break;case s.RotatePivotMode.CAMERA:l=null;break;default:l=i(t)}return this.dirtyCamera(!0),this.setCameraChanging(!0),this.pivot=l,l},this.touchUpdateRotationInPersonView=function(e,t){this.dirtyCamera(!0),this.setCameraChanging(!0);var i=this,r=this.camera.position,n=this.camera.target.clone().sub(r),a=n.length(),o=this.camera.getWorldDirection(),l=this.camera.realUp||this.camera.up,u=o.clone().cross(l).normalize(),h=u.clone().cross(o).normalize();this.camera.realUp.copy(h);var d,f,p=s.EditorConfig.LockAxisZRange;if(Math.abs(e)>Math.abs(t))d=m,f=e;else{if(s.EditorConfig.LockAxisZ&&!c(t,this.camera.target,p))return;d=u;var v=new THREE.Vector3(0,1,0).clone().cross(l),g=v.dot(u),y=Math.asin(v.length());g<0&&(y=-y),y+t>Math.PI/4-1e-6?t=Math.PI/4-1e-6-y:y+t<-Math.PI/4+1e-6&&(t=-Math.PI/4+1e-6-y),f=t}var M=(new THREE.Quaternion).setFromAxisAngle(d,f);!function(e){var t=new THREE.Vector3;o.applyQuaternion(e).normalize(),t.copy(r).add(o.multiplyScalar(a)),i.camera.target.copy(t)}(M),this.camera.realUp.applyQuaternion(M).normalize()},this.touchUpdateRotationInModelView=function(e,t,i){this.dirtyCamera(!0),this.setCameraChanging(!0);var r=i||this.scene.getBoundingBox().getCenter(),n=this.camera.position,a=this.camera.target.clone().sub(n),h=a.length(),d=n.clone().sub(r),f=d.length(),p=null,v=this.camera.getWorldDirection();d.normalize();var g=function(e){var t=new THREE.Vector3,i=d.clone().applyQuaternion(e).normalize();n.copy(r).add(i.multiplyScalar(f)),v.applyQuaternion(e).normalize(),t.copy(n).add(v.multiplyScalar(h)),M.camera.target.copy(t)},y=this.camera.up,E=v.clone().cross(y).normalize(),b=E.clone().cross(v).normalize();this.camera.realUp.copy(b);var x;if(s.EditorConfig.LockAxisZ){if(Math.abs(e)>Math.abs(t))x=m,p=(new THREE.Quaternion).setFromAxisAngle(x,e),g(p),this.camera.realUp.applyQuaternion(p).normalize();else if(null!=s.EditorConfig.LockAxisZRange&&Math.abs(t)>1e-4){var I=s.EditorConfig.LockAxisZRange;c(t,r,I)&&(x=v.clone().cross(y).normalize(),p=(new THREE.Quaternion).setFromAxisAngle(x,t),g(p),this.camera.realUp.applyQuaternion(p).normalize(),this.adjustCameraUp())}}else if(Math.abs(e)>Math.abs(t))(Math.abs(v.y+1)<1e-4||Math.abs(v.y-1)<1e-4)&&(x=v.clone().cross(this.camera.realUp).normalize(),p=(new THREE.Quaternion).setFromAxisAngle(x,.1),g(p),this.camera.realUp.applyQuaternion(p).normalize(),this.adjustCameraUp()),x=v.y>0&&this.camera.realUp.y<0?new THREE.Vector3(0,-1,0):new THREE.Vector3(0,1,0),p=(new THREE.Quaternion).setFromAxisAngle(x,e),g(p),this.camera.realUp.applyQuaternion(p).normalize();else if(Math.abs(t)>.01){x=v.clone().cross(this.camera.realUp).normalize();var T=new THREE.Vector3(0,1,0).clone().cross(y),w=T.dot(E),C=Math.asin(T.length());w<0&&(C=-C),C+t>Math.PI/2-1e-6?t=Math.PI/2-1e-6-C:C+t<-Math.PI/2+1e-6&&(t=-Math.PI/2+1e-6-C),p=(new THREE.Quaternion).setFromAxisAngle(x,t),g(p),this.camera.realUp.applyQuaternion(p).normalize(),this.adjustCameraUp()}this.pivotBallGroup||u(),this.pivotBallGroup.visible=!0;for(var S=l(),A=o(),k=0;k<this.pivotBallGroup.children.length;k++){var R=this.pivotBallGroup.children[k];R.position.copy(A),R.scale.set(S,S,S),R.updateMatrixWorld()}},this.touchUpdateRotation=function(e,t){var i=this.camera.position;this.scene.getBoundingBox().containsPoint(i)?this.touchUpdateRotationInPersonView(e,t):this.touchUpdateRotationInModelView(e,t,o())},this.clearTouchRotateState=function(){this.pivotBallGroup&&(this.pivotBallGroup.visible=!1)},this.touchEndHandler=function(){this.viewer.editorManager.cameraChange=!1,this.clearTouchRotateState(),this.touchUpdate()},this._adjustCameraForDolly=function(e,t){var i=.5*(t-1);if(Math.abs(i)<1e-6)return!1;var r=this.camera,n=r.position,a=this.camera.direction(),o=new THREE.Vector3;e?o.subVectors(e,n):o.copy(a),o.multiplyScalar(i);var s=o.length();r.isPerspective&&s<this.minDollyDistance&&o.normalize().multiplyScalar(this.minDollyDistance);var l=new THREE.Vector3;return l.addVectors(n,o),r.isPerspective||(r.orthoScale*=t,r.setZoom(r.orthoScale)),r.position.copy(l),r.target.copy(a.add(l)),this.dirtyCamera(!0),this.setCameraChanging(!0),!0},this.touchDolly=function(e,t,i){var r=new THREE.Vector2(e,t),n=this.getIntersectContext(r),a=this.intersector.hitTest(n);null!=a?this._adjustCameraForDolly(a,i):this._adjustCameraForDolly(null,i)},this.touchUpdate=function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(){var i=new THREE.Vector3;i.copy(this.camera.up),this.camera.up.copy(this.camera.realUp),this.camera.lookAt(this.camera.target),this.camera.up.copy(i),this.camera.updateMVP(),(e.distanceToSquared(this.camera.position)>1e-6||8*(1-t.dot(this.camera.quaternion))>1e-6)&&(n(),this.dirtyCamera(!1),e.copy(this.camera.position),t.copy(this.camera.quaternion))}}(),this.goTurnForWalk=function(e){var t=this.getCamera(),i=t.position,r=t.target,n=new THREE.Vector3(r.x-i.x,0,r.z-i.z),a=Math.cos(e),o=Math.sin(e),s=new THREE.Vector3(n.x*a-n.z*o,0,n.x*o+n.z*a);r.x=i.x+s.x,r.z=i.z+s.z,this.dirtyCamera(!0),this.setCameraChanging(!0)},this.goPitchForWalk=function(e){var t=this.getCamera(),i=t.position,r=t.target,n=r.x-i.x,a=r.z-i.z,o=Math.sqrt(n*n+a*a),s=new THREE.Vector3(o,r.y-i.y,0),l=Math.cos(e),u=Math.sin(e),c=new THREE.Vector3(s.x*l-s.y*u,s.x*u+s.y*l,0);r.y=i.y+c.y,this.dirtyCamera(!0),this.setCameraChanging(!0)},this.goUpDownForWalk=function(e,t){var i=this.getCamera(),r=i.position,n=i.target,a=new THREE.Vector3(0,1,0),o=this.scene.getMatrixGlobal(),s=h(i,o,a,e);t&&(t.position.z+=s.stepDiffWorld.z),r.y+=s.stepDiffDrawing.y,n.y+=s.stepDiffDrawing.y,this.dirtyCamera(!0),this.setCameraChanging(!0)},this.stepCameraForWalk=function(e,t,i){function r(e,t){return!(t.x<e.min.x||t.x>e.max.x||t.y<e.min.y||t.y>e.max.y)}var n,a=this.getCamera(),o=a.position,l=a.target,u=new THREE.Vector3(l.x-o.x,0,l.z-o.z).normalize(),c=new THREE.Vector3(0,1,0),d=u.clone().cross(c),f=this.scene.getMatrixGlobal();switch(e){case s.MoveDirection.FORWARD:n=h(a,f,u,t);break;case s.MoveDirection.BACK:u.multiplyScalar(-1),n=h(a,f,u,t);break;case s.MoveDirection.LEFT:d.multiplyScalar(-1),n=h(a,f,d,t);break;case s.MoveDirection.RIGHT:n=h(a,f,d,t)}if(n.stepDiffDrawing.y=0,n.stepDiffWorld.z=0,i){i.box.min.add(n.stepDiffWorld),i.box.max.add(n.stepDiffWorld);var p=this.scene.getBoundingBoxWorld();if(!r(p,i.box.min)||!r(p,i.box.max))return i.box.min.sub(n.stepDiffWorld),void i.box.max.sub(n.stepDiffWorld);i.position.add(n.stepDiffWorld)}o.add(n.stepDiffDrawing),l.add(n.stepDiffDrawing),this.dirtyCamera(!0),this.setCameraChanging(!0)},this.hitTestWithGround=function(e){var t=this.getCamera(),i=t.up.clone().multiplyScalar(-1),r=e?this.scene.worldToDrawing(e.box.getCenter()):t.position.clone(),n=new THREE.Ray(r,i),a=this.getIntersectContext(null),o=this.intersector.byGravity;this.intersector.byGravity=!0;var s=this.intersector.intersect(a,n,!1);return this.intersector.byGravity=o,s},this.hitTestForward=function(e,t){var i=this.getCamera(),r=this.camera.direction();r.normalize(),r=r.multiplyScalar(e);var n=void 0;t?(n=t.box.getCenter(),n=this.scene.worldToDrawing(n)):n=i.position.clone();var a=new THREE.Ray(n,r),o=this.getIntersectContext(null);return this.intersector.intersect(o,a,!1)},this.hitTestRight=function(e,t){var i=this.getCamera(),r=this.camera.direction();r.normalize();var n=i.up,a=r.cross(n).normalize();a=a.multiplyScalar(e);var o=void 0;t?(o=t.box.getCenter(),o=this.scene.worldToDrawing(o)):o=i.position.clone();var s=new THREE.Ray(o,a),l=this.getIntersectContext(null);return this.intersector.intersect(l,s,!1)},this.computeGravity=function(e){this.gravity=0;var t=this.hitTestWithGround(e);if(null==t){var i=this.scene.getMatrixGlobal(),r=new THREE.Matrix4;r.getInverse(i);var n=this.camera.position.clone();n.applyMatrix4(r),n.z=0,n.applyMatrix4(i),this.distanceToGround=Math.abs(this.camera.position.y-n.y),void 0!=this.hitNullCount&&0!=this.hitNullCount||(this.hitNullCount=1)}else this.hitNullCount=0;if(1==this.hitNullCount)return void(this.gravity=0);if(void 0===this.manHeight)this.computeManHeight(e);else{var a=t?t.distance-this.manHeight:this.distanceToGround-this.manHeight;if(a/=this.scene.getGlobalScaleFactor(),Math.abs(a)<.1)return;this.gravity=a}},this.computeManHeight=function(e){var t=void 0;if(t=this.viewer.modelManager.isMeterUnit()?.001:1,!this.manHeight){var i=this.hitTestWithGround(e),r=e?.94*e.box.getSize().z:1650*t,n=this.scene.getMatrixGlobal(),a=new THREE.Matrix4;if(a.getInverse(n),null!=i){var o=i.point.clone();o.applyMatrix4(a),o.z+=r,o.applyMatrix4(n),this.manHeight=Math.abs(i.point.y-o.y)}else{var s=e?e.box.min.clone():this.camera.position.clone();s.applyMatrix4(a),s.z=0;var l=s.clone();l.z+=r,s.applyMatrix4(n),l.applyMatrix4(n),this.manHeight=Math.abs(l.y-s.y)}}},this.walkWithParallelEye=function(){var e=this.camera,t=this.camera.direction(),i=t.length(),r=this.scene,n=r.getBoundingBox().getCenter(),a=new THREE.Vector3;a.subVectors(n,e.position);var o=a.length();a.y=0,a.normalize(),a.multiplyScalar(o),e.position.subVectors(n,a),e.target.addVectors(e.position,a.normalize().multiplyScalar(i));var s=new THREE.Vector3(0,1,0);e.up.copy(s),e.realUp.copy(s),this.dirtyCamera(!0),this.setCameraChanging(!0),this.update(!0)},this.updateFlyMove=function(e,t){var i=this.camera;this.dirtyCamera(!0),this.setCameraChanging(!0);var r=s.MoveDirection;e&r.FORWARD&&i.translateZ(-t),e&r.BACK&&i.translateZ(t),e&r.LEFT&&i.translateX(-t),e&r.RIGHT&&i.translateX(t),e&r.UP&&i.translateY(t),e&r.DOWN&&i.translateY(-t),this.flyOnWorld()},this.flyOnWorld=function(e){var t=this.camera,i=t.up.clone();e=!1!==e,e&&t.realUp&&(t.up.copy(t.realUp),t.lookAt(t.target),t.up.copy(i)),n(),this.dirtyCamera(!1),g.copy(t.position),y.copy(t.quaternion)},this.rotateForFly=function(e,t,i,r){var n=this.camera,a=n.position,o=n.target,l=o.clone().sub(a),u=new THREE.Vector3(0,1,0),c=n.realUp||n.up,h=l.clone().cross(c).normalize();if(this.dirtyCamera(!0),this.setCameraChanging(!0),s.EditorConfig.LockAxisZ&&(t=0),0!=t){var d=(new THREE.Quaternion).setFromAxisAngle(h,-t),f=l.clone();f.applyQuaternion(d);var p=f.angleTo(u);p-=.5*Math.PI,p>=i&&p<=r&&l.applyQuaternion(d)}if(0!=e){var m=(new THREE.Quaternion).setFromAxisAngle(u,-e);l.applyQuaternion(m)}o.addVectors(a,l),this.flyOnWorld()},this.fitAndRotateBySelection=function(){this.viewer.zoomToSelection()},this.flyToPointWithParallelEye=function(e){var t=this.camera.direction(),i=t.length(),r=t.clone();r.y=0,r.normalize(),r.setLength(i);var n=new THREE.Vector3(0,1,0);this.camera.up=n,this.camera.realUp=n.clone(),this.camera.position.copy(e),this.camera.target.addVectors(this.camera.position,r),this.update(!0)},this.flyToPoint=function(e){var t=this.camera.direction();this.camera.position.copy(e),this.camera.target.addVectors(this.camera.position,t),this.update(!0)},this.setCameraHeight=function(e,t){this.cameraAbsoluteHeightEnabled=!1,this.cameraRelativeHeight=t,void 0===this.cameraConstraintHeights?this.cameraConstraintHeights=[]:this.cameraConstraintHeights.length=0;for(var i=0,r=e.length;i<r;++i)this.cameraConstraintHeights[i]=e[i]},this.setCameraAbsoluteHeight=function(e){this.cameraAbsoluteHeightEnabled=!0,this.cameraAbsoluteHeight=e},this.updateCameraHeight=function(){var e,t,i=this.scene,r=this.getCamera(),n=i.drawingToWorld(r.position),a=n.z;if(this.cameraAbsoluteHeightEnabled)void 0===this.cameraAbsoluteHeight&&(this.cameraAbsoluteHeight=a),e=this.cameraAbsoluteHeight;else if(void 0===this.cameraConstraintHeights)e=a;else{var o=s.Utils.findRange(this.cameraConstraintHeights,a);if(e=this.cameraConstraintHeights[o],e+=this.cameraRelativeHeight,o<this.cameraConstraintHeights.length-1){var l=this.cameraConstraintHeights[o+1];e>l&&(e=l)}}e!==a&&(t=i.worldToDrawing({x:n.x,y:n.y,z:e}),this.setCameraPosition(t))},this.getRaycaster=function(e,t){var i=new s.Raycaster,r=new THREE.Vector2;return this.mapWindowToViewport(e,t,r),i.setFromCamera(r,this.camera),i},this.translateCameraForWalk=function(e,t,i){var r=this.collisionManager;if(0!==e.x){if(!1===s.GlobalData.EnableHitDetection)return void this.stepCameraForWalk(s.MoveDirection.RIGHT,e.x*t,i);var n=1;e.x<0&&(n=-1);var a=this.hitTestRight(n,i);if(a){var o=this.viewer.modelManager.getNodeInfosByUserId(a.userId),l=o?o[0].userData:null,u=r.hasCollision(l,a.distance);0==u&&this.stepCameraForWalk(s.MoveDirection.RIGHT,e.x*t,i)}else this.stepCameraForWalk(s.MoveDirection.RIGHT,e.x*t,i)}if(0!==e.y)this.goUpDownForWalk(e.y*t*.5,i);else if(s.GlobalData.WalkingWithGravity){var c=t;if(0!=this.gravity){var h=Math.abs(this.gravity);c=c>=h?h:.2*h}this.gravity>0?this.goUpDownForWalk(-c,i):this.gravity<0&&this.goUpDownForWalk(c,i)}if(0!==e.z){if(!1===s.GlobalData.EnableHitDetection)return void this.stepCameraForWalk(s.MoveDirection.BACK,e.z*t,i);var n=1;e.z>0&&(n=-1);var d=this.hitTestForward(n,i);if(d){var o=this.viewer.modelManager.getNodeInfosByUserId(d.userId),l=o?o[0].userData:null,u=r.hasCollision(l,d.distance);0==u&&this.stepCameraForWalk(s.MoveDirection.BACK,e.z*t,i)}else this.stepCameraForWalk(s.MoveDirection.BACK,e.z*t,i)}},this.rotateCameraForWalk=function(e,t){0!==e.y&&(this.goTurnForWalk(-e.y*Math.PI*t),e.y=0),0!==e.x&&(this.goPitchForWalk(e.x*Math.PI),e.x=0)},this.zoomCameraForWalk=function(e){this.adjustCameraForDolly(e,null)},this.movePlane=function(e,t,i,r,n){if(void 0==n){var a=new THREE.Plane;a.setComponents(e.x,e.y,e.z,e.w),n=new THREE.Vector3,a.coplanarPoint(n)}var o=new THREE.Vector3(e.x,e.y,e.z),s=this.camera,l=s.getWorldDirection(),u=new THREE.Plane;u.setFromNormalAndCoplanarPoint(l,n);var c=this.getRaycaster(t.clientX,t.clientY),h=new THREE.Vector3,d=this.getRaycaster(i.x,i.y),f=new THREE.Vector3;if(c.ray.intersectPlane(u,h)&&d.ray.intersectPlane(u,f)){h.subVectors(h,f),h.projectOnVector(o);var p=h.length();if(h.dot(o)<0&&(p=-p),0!=p)return r&&(o.multiplyScalar(p),p=o.x+o.y+o.z),p}return null},this.getZenith=function(){var e=i.position,t=M.viewer.getBoundingBox().getCenter();return e.clone().sub(t.clone()).clone().angleTo(m.clone())},this.getAzimuth=function(){var e=i.position,t=M.viewer.getBoundingBox().getCenter(),r=e.clone().sub(t.clone()),n=r.clone().projectOnPlane(m.clone()),a=n.angleTo(v.clone());return n.x<0&&(a=360-a),a},this.getCurrentRangeofCamera=function(){var e=this.viewer,t=this.camera,i=e.getBoundingBox(),r=i.getCenter(),n=t.position,a=i.getSize().length(),o=.5*a/Math.tan(THREE.Math.degToRad(.5*t.fov));return r.distanceTo(n)/o},this.setMaximalRangeofCamera=function(e){this.farFactor=e||2},this.getMaximalRangeofCamera=function(){return this.farFactor},this.cameraWithinMaximumRange=function(e){var t=e||this.farFactor;return!(this.getCurrentRangeofCamera()>t)},this.resetCameraToMaximumRange=function(e){var t=this.viewer,i=this.camera,r=t.getBoundingBox(),n=r.getCenter(),a=i.position,o=e||this.farFactor,s=(new THREE.Vector3).subVectors(n,a),l=r.getSize().length(),u=.5*l/Math.tan(THREE.Math.degToRad(.5*i.fov));s.setLength(o*u);var c=n.clone().sub(s),h=this.camera.direction();this.camera.position.copy(c),this.camera.target.copy(h.add(c)),this.updateView(!0)},this.flyToLngLat=function(e){var t=this;e=s.Utils.defaultValue(e,{});var i=e.destination;if(void 0===i)return void console.log("destination is required");var r=this;return new Promise(function(n,a){var o={lng:i.lon,lat:0,height:0};d(r,o,e.globe).then(function(){var a={lng:i.lon,lat:i.lat,height:0};f(r,a,e.globe).then(function(){i.lon,i.lat,i.height;t.zoomToHeight(e).then(function(){n()})})})})},this.backToGlobeHome=function(e){var t=this.camera,i={position:t.position.clone(),target:t.target.clone(),up:t.realUp.clone()||t.up.clone(),zoom:t.zoom},r=this.viewer,n=this;return new Promise(function(t,a){r.animator.active(i,e.homeCameraInfo,r,function(e){n.update(!0,!0)},function(){t()})})},this.zoomToHeight=function(e){var t=e.destination;if(!s.Utils.isDefined(t))return void console.log("destination is required");if(!s.Utils.isDefined(e.globe))return void console.log("globe object is required");var i=s.Tile.TileMath.fromDegreesYUp(t.lon,t.lat,t.height,e.globe.radius),r=this.camera,n={position:r.position.clone(),target:r.target.clone(),up:r.realUp.clone()||r.up.clone(),zoom:r.zoom},a={position:i,target:r.target.clone(),up:r.realUp.clone()||r.up.clone(),zoom:r.zoom},o=this.viewer,l=this;return new Promise(function(e,t){var i=new s.CameraAnimator;i.setDuration(2e3),i.active(n,a,o,function(e){l.update(!0,!0)},function(){e()})})}}}(),s.IntersectContext=function(){this.scene=null,this.camera=null,this.octreeRoots=null,this.octantMap=null,this.mouse=new THREE.Vector2},s.IntersectHelper=function(e){this.viewer=e,this.filter=e.getFilter(),this.raycaster=new s.Raycaster,this.lastIntersect=null,this.highPriorities=[s.ObjectGroupType.EXTRUDEBODYMANAGER],this._ground=null,this._pickedLocalPos=null,this._pickedWorldPos=null,this._inverseSceneMatrix=null},s.IntersectHelper.prototype.destroy=function(){this.viewer=null,this.filter=null,this.raycaster=null,this.lastIntersect=null,this.highPriorities=null,this._ground=null,this._pickedLocalPos=null,this._pickedWorldPos=null,this._inverseSceneMatrix=null},s.IntersectHelper.prototype.defaultIntersect=function(e,t,i,r,n){if(e.visible||n){var a=[];e.raycast(this.raycaster,a);var o=[];if(a.length>0)for(var l=0;l<a.length;l++)a[l].distance<=i.far&&a[l].distance>=i.near&&(e.name==s.GlobalData.TilePlaneGroupName||!this.viewer.clipPoint(a[l].point))&&void 0!=a[l]&&o.push(a[l]);return r?o:(o.sort(function(e,t){return e.distance-t.distance}),o.length>0?o[0]:null)}},s.IntersectHelper.prototype.intersectMeshesWithDistance=function(e,t,i,r,n,a,o){if(!t||!t.mesh)return null;var l,u=s.Utils.MinusEpsilon,c=this.raycaster,h=[],d=this.filter,f=d._hasVisibleFilter(),p=d._hasPickableFilter(),m=this.viewer.modelManager;1==this.byGravity?r.near=0:r.near+=u;var v,g,y=t.info,M=t.mesh,E=[],b=this.viewer.modelManager.getMatrixWorldGlobal();if(n){for(v=0,g=e.length;v<g;v++)!function e(t,i){if(i.push(t),t.childOctants)for(var r=0,n=t.childOctants.length;r<n;r++)e(t.childOctants[r],i)}(e[v],E)}else for(v=0,g=e.length;v<g;v++)c.intersectOctantForNode(e[v],E);for(v=0,g=E.length;v<g;v++){var x=y[E[v].octantId];if(x)for(var I=0,T=x.length;I<T;I++){var w=x[I];if(!function(e,t){var i=m.isHiddenSourceObjectUserId(e.userId);if(t){if(f&&!d._isVisible(e)||p&&!d._isPickable(e)||i)return!0}else if(f&&!d._isVisible(e)||i)return!0;return!1}(w,i)){var C=w.boundingBox.clone();C.applyMatrix4(o),C.applyMatrix4(b),l=c.ray.intersectBoxWithDistance(C);var S=s.ModelView.BaseDescriptor.getMeshIdFromOctantMap(w),A=M[S];if(A)for(var k=0,R=A.length;k<R;k++)h.push({object:A[k],distance:l,nodeInfo:w})}}}h.sort(function(e,t){return e.distance-t.distance});var B=[];for(v=0;v<h.length;v++)h[v].distance>r.far||h[v].distance<r.near||h[v].object.raycast(c,h[v].nodeInfo,r,this.viewer,B,a);if(B.sort(function(e,t){return e.distance-t.distance}),a){var L=[];for(v=0,g=B.length;v<g;v++){var O=B[v];L.push({object:O.object.object,distance:O.distance,matrix:O.object.matrix,userId:O.userId,face:O.face,point:O.point})}return L}return B.length>0?B[0]:null},s.IntersectHelper.prototype.intersect=function(e,t,i){var r=this,n=r.raycaster;if(null===t)n.setFromCamera(e.mouse,e.camera);else{var a=t.origin,o=t.direction;n.set(a,o)}n.camera=e.camera,n.viewportSize=e.viewportSize;var l={near:0,far:1/0};e.scene.shrinkScopeByClipPlane(n,l);var u=[],c=e.scene.getObjectGroups(),h=this.viewer.terrainOperationManager,d=new THREE.Vector2;this.viewer.cameraControl.mapViewportToWindow(e.mouse.x,e.mouse.y,d);for(var f=0;f<c.length;f++)if(c[f].isPickable()&&0!==c[f].children.length&&(c[f].name!=s.GlobalData.TilePlaneGroupName||!h.pickExcavation(d))){var p=null,m=e.scene.getObjectGroupType(c[f].name);if(r.highPriorities.indexOf(m.groupType)>-1)(p=this.defaultIntersect(c[f],i,l,void 0,!0))&&(p.objectType=c[f].pickableType,p.hoverEnabled=c[f].hoverEnabled,u.push(p));else{var v=this.viewer.modelManager,g=v.getModel(m.databagId),y=g?g.getTransformMatrix():new THREE.Matrix4,M=!1;switch(M=!!(g&&g.id&&v.explosionManager.isExploded(g.id)),m.groupType){case s.ObjectGroupType.MODEL:var E=m.databagId;e.octreeRoots[E]&&e.octantMap[E]&&(p=this.intersectMeshesWithDistance(e.octreeRoots[E],e.octantMap[E],i,l,M,!1,y))&&(p.objectType=c[f].pickableType,p.hoverEnabled=c[f].hoverEnabled,u.push(p));break;case s.ObjectGroupType.GEOMETRY:for(var E in e.octreeRoots)(p=this.intersectMeshesWithDistance(e.octreeRoots[E],e.octantMap[E],i,l,M,!1,y))&&(p.objectType=c[f].pickableType,p.hoverEnabled=c[f].hoverEnabled,u.push(p));break;case s.ObjectGroupType.BIMTILESGROUP:if(g){var b=g.config.metadata.content,x=g.config.metadata.enableSelect;if(p=!0===s.TilesUtil.PICK_EFFECT_MODEL_TYPE[b]||x?this.intersectBimTile(g,i,l,M,!1,y):this.defaultIntersect(c[f],i,l)){var I=g.tilesLoader.tileReader,T=I.getUserIdByIndex(p.userId);p.userId=T,p.objectType=c[f].pickableType,p.hoverEnabled=c[f].hoverEnabled,u.push(p)}}break;default:p=this.defaultIntersect(c[f],i,l),p&&(p.objectType=c[f].pickableType,p.hoverEnabled=c[f].hoverEnabled,u.push(p))}}}u.sort(function(e,t){return e.distance-t.distance});var w=u.length;if(w>0)for(var C=null,S=0;S<w;++S){p=u[S];var A=p.object;if(A.geometry){if(p.objectType===s.PICKABLETYPE.Marker3d?p.userId=p.id:void 0===p.userId&&(p.userId=A.userId||A.name),p.databagId=A.databagId,C)return C.intersectWithoutMap=p,C;if(this.lastIntersect={intersect:p,pickable:i},!(p.objectType===s.PICKABLETYPE.Map&&S<w-1))return p;C=p}}return this.lastIntersect=null,null},s.IntersectHelper.prototype.getObjectsByClientCoordinates=function(e){var t=this.viewer.cameraControl.getIntersectContext(e),i=this.raycaster;return i.setFromCamera(t.mouse,t.camera),i.camera=t.camera,i.viewportSize=t.viewportSize,this.getObjectsByRaycaster(t,i)},s.IntersectHelper.prototype.getObjectsByRaycaster=function(e,t,i){this.raycaster=t;var r=i?0:e.camera.near,n={near:r,far:1/0};e.scene.shrinkScopeByClipPlane(t,n);for(var a=[],o=e.scene.getObjectGroups(),l=0;l<o.length;l++)if(o[l].isPickable()&&0!==o[l].children.length){var u=[],c=e.scene.getObjectGroupType(o[l].name),h=this.viewer.modelManager,d=h.getModel(c.databagId),f=d?d.getTransformMatrix():new THREE.Matrix4,p=!1;switch(p=!!(d&&d.id&&h.explosionManager.isExploded(d.id)),c.groupType){case s.ObjectGroupType.MODEL:var m=c.databagId;e.octreeRoots[m]&&e.octantMap[m]&&void 0!=(u=this.intersectMeshesWithDistance(e.octreeRoots[m],e.octantMap[m],!1,n,p,!0,f))&&(a=a.concat(u));break;case s.ObjectGroupType.GEOMETRY:for(var m in e.octreeRoots)void 0!=(u=this.intersectMeshesWithDistance(e.octreeRoots[m],e.octantMap[m],!1,n,p,!0,f))&&(a=a.concat(u));break;case s.ObjectGroupType.BIMTILESGROUP:var v=d.config.metadata.content;if(!0===s.TilesUtil.PICK_EFFECT_MODEL_TYPE[v]){u=this.intersectBimTile(d,!0,n,p,!0,f);for(var g=u.length,y=0;y<g;++y){var M=u[y],E=d.tilesLoader.tileReader,b=E.getUserIdByIndex(M.userId);M.userId=b}}else u=this.defaultIntersect(o[l],!1,n,!0);void 0!=u&&(a=a.concat(u));break;default:u=this.defaultIntersect(o[l],!1,n,!0),void 0!=u&&(a=a.concat(u))}}a.sort(function(e,t){return e.distance-t.distance});var x=new Map,I=!0,T=!1,w=void 0;try{for(var C,S=a[Symbol.iterator]();!(I=(C=S.next()).done);I=!0){var A=C.value;x.has(A.userId)||x.set(A.userId,A)}}catch(e){T=!0,w=e}finally{try{!I&&S.return&&S.return()}finally{if(T)throw w}}return a=[].concat(_toConsumableArray(x.values()))},s.IntersectHelper.prototype.hitTest=function(e){var t=this.intersect(e,null,!1);return null!==t?t.point:null},s.IntersectHelper.prototype.pick=function(e,t){var i=this.intersect(e,null,!0);return t&&t(i),i},s.IntersectHelper.prototype.pickGlobe=function(e,t){var i=this,r=i.raycaster,n=e.scene.getObjectGroup(s.GlobalData.TilePlaneGroupName);if(!n||!n.visible)return null;r.setFromCamera(e.mouse,e.camera),r.camera=e.camera,r.viewportSize=e.viewportSize;var a={near:0,far:e.camera.far};e.scene.shrinkScopeByClipPlane(r,a);var o=[];n.raycast(this.raycaster,o),o.sort(function(e,t){return e.distance-t.distance});var l=o.length>0?o[0]:null;return l&&(l.objectType=n.pickableType,l.hoverEnabled=n.hoverEnabled),l},s.IntersectHelper.prototype.pickGround=function(e,t){var i=e.viewer.ground;if(!i)return null;if(!e.camera)return console.log("camera have not been initialized"),null;var r=this.raycaster;r.setFromCamera(e.mouse,e.camera),r.camera=e.camera,r.viewportSize=e.viewportSize;var n=void 0,a=i.intersect(r.ray);if(a){var o=e.scene.getMatrixGlobal();this._inverseSceneMatrix||(this._inverseSceneMatrix=new THREE.Matrix4),this._pickedWorldPos||(this._pickedWorldPos=new THREE.Vector3),this._inverseSceneMatrix.getInverse(o),this._pickedWorldPos.setX(a.x),this._pickedWorldPos.setY(a.y),this._pickedWorldPos.setZ(a.z),this._pickedWorldPos.applyMatrix4(this._inverseSceneMatrix),n={point:a,worldPosition:this._pickedWorldPos.setZ(i.elevation),pickFromReferencePlane:!0}}return t&&t(n),n},s.IntersectHelper.prototype.getIntersectByRay=function(e,t){return this.intersect(e,t,!0)},s.IntersectHelper.prototype.intersectBimTile=function(e,t,i,r,n,a){function o(e,t,i,r){var n=t.clone();return n.applyMatrix4(i),n.applyMatrix4(r),e.ray.intersectBoxWithDistance(n)}var l=this,u=this.raycaster,c=e.getAllNodeInfos(),h=this.viewer.modelManager.getMatrixWorldGlobal(),d=e.tilesLoader.tileReader.getSearchTreeBuffer(),f=this.viewer.modelManager,p=e.getFilter(),m=p._hasVisibleFilter(),v=p._hasPickableFilter(),g=function(e){return!e||!e.parent||!1===e.visible||!1===e.parent.visible},y={};for(var M in d){(function(e){var t=d[e].searchTreeBlob,i=d[e].box,n=o(u,i,a,h);if(!r&&n<0)return"continue";var l=t.getNodeIdsList(),c=t.getOctreeList(),f=t.getOctreeList()[0];!function e(t,i){var n=s.TilesUtil.getBox(i.getBboxList()),c=o(u,n,a,h);if(r||!(c<0)){for(var d=i.getNodesList(),f=d.length,p=0;p<f;++p){var m=d[p],v=l[m],g=s.TilesUtil.getBox(v.getBboxList()),M=o(u,g,a,h);if(r||!(M<0)){var E=v.getTileId()+"_"+v.getBlockId()+"_"+v.getNodeId();void 0===y[v.getUserId()]?y[v.getUserId()]=[E]:y[v.getUserId()].push(E)}}i.getChildrenList().map(function(i){var r=t[i];e(t,r)})}}(c,f)})(M)}var E=[];for(var b in y){var x=c[b];if(x)for(var I=0,T=x.length;I<T;I++){var w=x[I];if(!function(e,t){var i=f.isHiddenSourceObjectUserId(e.userId);if(t){if(m&&!p._isVisible(e)||v&&!p._isPickable(e)||i)return!0}else if(m&&!p._isVisible(e)||i)return!0;return!1}(w,t)){var C=o(u,w.boundingBox,a,h),S=w.parent||w.nodeId;if(w.instanceOrNot){var A=e.tilesLoader.getInstanceMeshNodeById(S);if(!A)continue;for(var k in A){var R=A[k].matrix,B=A[k].mesh;if(!g(B)){var L=Object.create(w),O=L.matrix.clone();O=O.multiply(R),L.matrix=O,E.push({meshNode:B,distance:C,nodeInfo:L,meshId:S})}}}else{var P=e.tilesLoader.getMeshNodeById(S);if(!g(P)){var D=P.indexGroups;for(var N in D)for(var _=D[N],H=0,F=_.length;H<F;++H){var U=_[H];U.meshId===w.nodeId&&(U.userId=N,E.push({meshNode:P,distance:C,nodeInfo:U,meshId:S}))}}}}}}E.sort(function(e,t){return e.distance-t.distance});for(var G=[],z=0;z<E.length;z++){var j=[],V=E[z].nodeInfo,W=null;V.instanceOrNot&&(W=V.matrix),E[z].meshNode.raycastByIndices(u,j,V,W),j=j.filter(function(e){return!l.viewer.clipPoint(e.point)&&e}),j.sort(function(e,t){return e.distance-t.distance}),0!==j.length&&(j[0].userId=V.userId,j[0].indexInfo=V,j[0].meshId=E[z].meshId,G.push(j[0]))}return G.sort(function(e,t){return e.distance-t.distance}),n?G:G[0]},s.PickUtil={pickByRect:function(e,t,i,r,n,a,o){function l(e,t){var i=[];r.modelManager.traverseModels(function(t){i=i.concat(t.getGeometryBuffersByUserId(e))}),i.sort(function(e,t){return e.index.length-t.index.length});for(var n=new THREE.Vector3(Math.min(a.x,o.x),Math.min(a.y,o.y),0),l=new THREE.Vector3(Math.max(a.x,o.x),Math.max(a.y,o.y),0),u=new THREE.Box3(n,l),c=0;c<i.length;c++)for(var h=i[c].position,d=i[c].index,f=i[c].matrix,p=0;p<d.length;p+=3){var m=new THREE.Vector3(h[3*d[p]],h[3*d[p]+1],h[3*d[p]+2]),v=new THREE.Vector3(h[3*d[p+1]],h[3*d[p+1]+1],h[3*d[p+1]+2]),g=new THREE.Vector3(h[3*d[p+2]],h[3*d[p+2]+1],h[3*d[p+2]+2]);f&&(m.applyMatrix4(f),v.applyMatrix4(f),g.applyMatrix4(f)),t&&(m.applyMatrix4(t),v.applyMatrix4(t),g.applyMatrix4(t));var y=r.worldToClient(m),M=r.worldToClient(v),E=r.worldToClient(g),b=new THREE.Vector3(y.x,y.y,0),x=new THREE.Vector3(M.x,M.y,0),I=new THREE.Vector3(E.x,E.y,0),T=new THREE.Triangle(b,x,I);if(s.GeomUtil.boxIntersectsTriangle(u,T))return!0}return!1}function u(e,i){var n=[],a=[];r.modelManager.traverseModels(function(t){n=n.concat(t.getGeometryBuffersByUserId(e))});for(var o=0;o<n.length;o++)for(var s=n[o].position,l=n[o].matrix,u=0;u<s.length;u+=3){var c=new THREE.Vector3(s[u],s[u+1],s[u+2]);l&&c.applyMatrix4(l),i&&c.applyMatrix4(i),c.applyMatrix4(b),a.push(c)}var h=!0;return a.every(function(e){return t.containsPoint(e)||(h=!1),h}),h}function c(e){for(var t=new THREE.Vector3,i=0;i<8;++i)if(t.x=i<4?e.min.x:e.max.x,t.y=i/2<2?e.min.y:e.max.y,t.z=i%2==0?e.min.z:e.max.z,!r.clipPoint(t))return!1;return!0}function h(e,i){if(x.set(e.min,e.max),t.intersectsBox(x)){i.push(e);for(var r=0,n=e.childOctants.length;r<n;++r){h(e.childOctants[r],i)}}}function d(e,i){if(!p(i)){var r=new THREE.Box3;r.copy(i.boundingBox),r.applyMatrix4(B).applyMatrix4(b),c(r)||("window"!==m||L[i.userId]?"cross"!==m||O[i.userId]||("in"===s.GeomUtil.intersectBox(t,r)||"intersect"===s.GeomUtil.intersectBox(t,r)&&l(i.userId,B))&&(e[i.userId]=!0,O[i.userId]=!0):"in"===s.GeomUtil.intersectBox(t,r)||"intersect"===s.GeomUtil.intersectBox(t,r)&&u(i.userId,B)?e[i.userId]=!0:(L[i.userId]=!0,delete e[i.userId]))}}function f(e,t,r){var a=[];return Object.keys(t).map(function(t){var i=e.getRealUserId(t);i&&a.push(i)}),a.length>0&&!1!==n&&(s.OPSELECTIONTYPE.Remove===i&&r.removeSelection(a),s.OPSELECTIONTYPE.Add===i&&r.addSelection(a)),a}function p(e){var t=g.isHiddenSourceObjectUserId(e.userId);return T&&!I._isVisible(e)||w&&!I._isPickable(e)||t}var m;m=a&&o?o.x>a.x?"window":"cross":"window";var v={},g=r.modelManager,y=g.getOctreeRoots(),M=g.getOctantMap(),E=g.getSceneState(),b=e.getMatrixGlobal(),x=new THREE.Box3,I=g.getFilter(),T=I._hasVisibleFilter(),w=I._hasPickableFilter();if(i===s.OPSELECTIONTYPE.Clear)return void E.clearSelection();var C,S,A;for(var k in y){C=[],A=M[k],S=y[k];var R=r.modelManager.modelCollection.getById(k);if(R){var B=R.transformMatrix.clone(),L={},O={};R.tilesLoader&&function(e){var i=e.getUserIdMapByFrustum(t),r=e.getAllNodeInfos();for(var n in i){var a=r[n];if(a)for(var o=0,s=a.length;o<s;o++){var l=a[o];d(v,l)}}f(e,v,E)}(R);var P,D;for(P=0,D=S.length;P<D;P++)h(S[P],C);for(P=0,D=C.length;P<D;P++){var N=A.info[C[P].octantId];if(N)for(var _=0,H=N.length;_<H;_++){var F=N[_];d(v,F)}}}}return f(R,v,E)},getObjectsInBox:function(e,t,i,r){function n(e){return!(e.max.x<t.min.x||e.min.x>t.max.x||e.max.y<t.min.y||e.min.y>t.max.y||e.max.z<t.min.z||e.min.z>t.max.z)}function a(e,t){if(c.set(e.min,e.max),n(c)){t.push(e);for(var i=0,r=e.childOctants.length;i<r;++i){a(e.childOctants[i],t)}}}
var o={},s=i.getOctreeRoots(),l=i.getOctantMap(),u=e.getMatrixGlobal(),c=new THREE.Box3,h=i.getFilter(),d=h._hasVisibleFilter(),f=h._hasPickableFilter();for(var p in s){var m,v,g=[],y=l[p],M=s[p],E=r.modelManager.modelCollection.getById(p).transformMatrix.clone();for(m=0,v=M.length;m<v;m++)a(M[m],g);for(m=0,v=g.length;m<v;m++){var b=y.info[g[m].octantId];if(b)for(var x=0,I=b.length;x<I;x++){var T=b[x];(function(e){var t=i.isHiddenSourceObjectUserId(e.userId);return d&&!h._isVisible(e)||f&&!h._isPickable(e)||t})(T)||(c.copy(T.boundingBox),c.applyMatrix4(E).applyMatrix4(u),!n(c)||function(e){return e.max.x>=t.max.x&&e.min.x<=t.min.x&&e.max.y>=t.max.y&&e.min.y<=t.min.y&&e.max.z>=t.max.z&&e.min.z<=t.min.z}(c)||function(e){for(var t=new THREE.Vector3,i=0;i<8;++i)if(t.x=i<4?e.min.x:e.max.x,t.y=i/2<2?e.min.y:e.max.y,t.z=i%2==0?e.min.z:e.max.z,!r.clipPoint(t))return!1;return!0}(c)||(o[T.userId]=!0))}}}return Object.keys(o)}},s.PickHelper=function(e){this.cameraControl=e,this.scene=e.scene,this.timerId=null,this.lastIntersected=null,this._pickObjectByHover=!1},s.PickHelper.prototype={constructor:s.PickHelper,destroy:function(){this.cameraControl=null,this.scene=null,this.lastIntersected=null,this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},click:function(e,t){function i(){t&&!1===t.pickable&&(t=null),s.Logger.time("handle mouse pick."),r.handleMousePick(e,!1,t),s.Logger.timeEnd("handle mouse pick.")}var r=this;if(e.button===THREE.MOUSE.RIGHT)return void i();this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(i,500)},doubleClick:function(e){e.preventDefault(),this.timerId&&clearTimeout(this.timerId),this.handleMousePick(e,!0,null)},handleMousePick:function(e,t,i){function r(i,r){var n=null;if(i&&i.objectType==s.PICKABLETYPE.Room){var a=i.face.contourIndex,o=i.object.geometry.contour;n=a?{startPoint:o[a.st],endPoint:o[a.ed]}:null}var l=function(e){return e?{selectedObjectId:s.Utils.isDefined(e.userId)?e.userId:null,objectType:s.Utils.isDefined(e.objectType)?e.objectType:null,selectable:s.Utils.isDefined(e.selectable)?r:null,modelId:s.Utils.isDefined(e.databagId)?e.databagId:null,worldPosition:s.Utils.isDefined(e.worldPosition)?e.worldPosition:null,worldBoundingBox:s.Utils.isDefined(e.worldBoundingBox)?e.worldBoundingBox:null,point:s.Utils.isDefined(e.point)?e.point:null,innnerDebugging:s.Utils.isDefined(e.innnerDebugging)?e.innnerDebugging:null,normal:s.Utils.isDefined(e.face)&&s.Utils.isDefined(e.face.normal)?e.face.normal:null,boundaryPoints:s.Utils.isDefined(e.boundaryPoints)?n:null}:null};c.dispatchEvent({type:i&&i.objectType===s.PICKABLETYPE.Marker3d?s.EVENTS.ON_CLICK_MARKER3D_PICK:s.EVENTS.ON_CLICK_PICK,event:e,doubleClick:t,canvasPos:{x:u.x,y:u.y},intersectInfo:l(i),intersectInfoWithoutMap:i&&l(i.intersectWithoutMap)})}if(this._canPick()||e.button!==THREE.MOUSE.LEFT){var n=this,a=this.cameraControl,o=a.viewer.modelManager.sceneState,l=new THREE.Vector2(e.clientX,e.clientY),u=a.screenToCanvas(e.clientX,e.clientY),c=a.viewer.modelManager,h=null;if(i)i.pickable&&(h=i.intersect);else{var d=a.getIntersectContext(l);h=a.intersector.pick(d,null)}if(h){var f=h.userId;if(s.Utils.isMobileDevice()&&(a.pivot=h.point),n.scene.intersectToWorld(h,a.viewer),h.intersectWithoutMap&&n.scene.intersectToWorld(h.intersectWithoutMap,a.viewer),h.innnerDebugging=e.altKey,h.cx=l.x,h.cy=l.y,h.face&&h.face.normal){var p=h.face.normal;for(var m in p)p[m]=p[m]==-p[m]?Math.abs(p[m]):p[m]}if(e.button===THREE.MOUSE.RIGHT)return void r(h,!1);if(t)s.GlobalData.EnableDemolishByDClick?(o.setSelection([f],h.databagId),r(h,!0),a.updateView(!0)):(o.setSelection([f],h.databagId),a.fitAndRotateBySelection(),r(h,!0));else{var v=o.isSelected(f,h.databagId);e.ctrlKey?v?o.removeSelection([f],h.databagId):o.addSelection([f],h.databagId):v?o.clearSelection():(o.clearSelection(void 0,!1),o.setSelection([f],h.databagId)),r(h,!0),a.updateView(!0)}}else{var g=o.getSelection();if(e.ctrlKey)return;if(e.button!=THREE.MOUSE.RIGHT&&g.length>0&&(o.clearSelection(),a.updateView(!0)),i&&!i.pickable)h=i.intersect,h.cx=l.x,h.cy=l.y,r(h,!1);else{var y=a.getIntersectContext(l);a.viewer.ground?(y.viewer=a.viewer,h=a.intersector.pickGround(y),r(h)):r(null)}}}},handleShiftMeasure:function(e,t,i){function r(i,r,a,o){var l=n.viewer.modelManager;if(null!=i){var u=n.scene.drawingToWorld(i);i.copy(u)}if(null!=r){var c=n.scene.drawingToWorld(r[0]),h=n.scene.drawingToWorld(r[1]);r[0].copy(c),r[1].copy(h)}l.dispatchEvent({type:s.EVENTS.ON_MEASURE_PICK,event:e,pick:t,pickPoint:i,pickLine:r,pickPlane:a,userId:o})}if(this._canPick()){var n=this.cameraControl,a=new THREE.Vector2(e.clientX,e.clientY),o=n.getIntersectContext(a);n.intersector.pick(o,function(e){if(e){var n=new THREE.Vector3;n.subVectors(e.point,i),n.normalize();var a=new THREE.Vector3(1,0,0),o=new THREE.Vector3(0,1,0),s=new THREE.Vector3(0,0,1),l=a.dot(n),u=o.dot(n),c=s.dot(n),h=new THREE.Vector3;h.copy(i),Math.abs(u)>=.707?h.y=e.point.y:Math.abs(c)>=Math.abs(l)?h.z=e.point.z:h.x=e.point.x,t&&i.copy(h),r(h,null,!1,e.userId)}else r(null,null,!1)})}},handleMouseMeasure:function(e,t,i,r){function n(i,r,n,o,s,u){var c=a.viewer.modelManager;if(null!=i){var h=a.scene.drawingToWorld(i);i.copy(h)}if(null!=r){var d=a.scene.drawingToWorld(r[0]),f=a.scene.drawingToWorld(r[1]);r[0].copy(d),r[1].copy(f)}c.dispatchEvent({type:l,event:e,pick:t,pickPoint:i,pickLine:r,pickPlane:n,normal:o,userId:s,modelId:u})}if(this._canPick()){var a=this.cameraControl,o=a.scene,l=r||s.EVENTS.ON_MEASURE_PICK,u={x:e.clientX,y:e.clientY},c=this.pickToPoint(u,5);null!=c?(t&&i.copy(c.pickPoint),n(c.pickPoint,c.pickLine,c.pickPlane,c.face.normal,c.userId,c.modelId)):(o.hasObjectGroup(s.ObjectGroupType.MEASUREPLANE)&&o.removeObjectGroupByName(s.ObjectGroupType.MEASUREPLANE),n(null,null,!1))}},handleMouseMovePick:function(e){function t(t,n,a){if(void 0!==t&&null!==t){var o=i.viewer.modelManager,l={type:s.EVENTS.ON_MOUSE_MOVE_PICK,event:e,selectable:n,canvasPos:{x:r.x,y:r.y},intersectInfo:{}};l.intersectInfo.pickFromReferencePlane=a,void 0!==t.userId&&(l.intersectInfo.selectedObjectId=t.userId),void 0!==t.objectType&&(l.intersectInfo.objectType=t.objectType),void 0!==t.databagId&&(l.intersectInfo.modelId=t.databagId),void 0!==t.worldPosition&&(l.intersectInfo.worldPosition=t.worldPosition),void 0!==t.worldBoundingBox&&(l.intersectInfo.worldBoundingBox=t.worldBoundingBox),void 0!==t.point&&(l.intersectInfo.point=t.point),void 0!==t.innnerDebugging&&(l.intersectInfo.innnerDebugging=t.innnerDebugging),o.dispatchEvent(l)}}if(s.GlobalData.MouseMovePick&&this._canPick()){var i=this.cameraControl,r=i.screenToCanvas(e.clientX,e.clientY),n=this,a=new THREE.Vector2(e.clientX,e.clientY),o=i.getIntersectContext(a);if(o.viewer=i.viewer,this._pickObjectByHover)if(this.lastIntersected)t(this.lastIntersected,!0,!1);else{var l=i.intersector.pickGround(o);t(l,!1,!0)}else i.intersector.pick(o,function(e){if(e)n.scene.intersectToWorld(e,i.viewer),t(e,!0,!1);else{t(i.intersector.pickGround(o),!1,!0)}});this._pickObjectByHover=!1}},handleMouseHover:function(e){function t(t,r){var a=i.viewer.modelManager;null!=t&&n.scene.intersectToWorld(t,i.viewer),a.dispatchEvent({type:s.EVENTS.ON_HOVER_PICK,event:e,canvasPos:{x:f.x,y:f.y},intersectInfo:t?{selectedObjectId:t.userId,objectType:t.objectType,selectable:r,modelId:t.databagId,worldPosition:t.worldPosition,worldBoundingBox:t.worldBoundingBox,point:t.point,innnerDebugging:t.innnerDebugging}:null})}if(this._canPick()){var i=this.cameraControl,r=i.viewer.modelManager.sceneState,n=this;if(function(){if(0==n.scene.hasObjectGroup(s.ObjectGroupType.AXISGRIDMANAGER))return!1;var e=0,t=n.scene.axisGridEnableHover;if(t){for(var i in n.scene.axisGridManagerMap){e+=s.AxisGridManager.getInstance(n.scene,i).getElements().length}0===e&&(t=!1)}return t}()){var a=this.scene.getMatrixGlobal(),o=new THREE.Vector2(e.clientX,e.clientY),l=i.getRaycaster(o.x,o.y),u=[];for(var c in this.scene.axisGridManagerMap){var h=s.AxisGridManager.getInstance(this.scene,c),d=h.getIntersectPoints(l,a);h.snapOnFloors(d).forEach(function(e){e.modelId=c,u.push(e)})}i.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_AXIS_GRID_HOVER,snaps:u})}if(s.GlobalData.Hover||function(){var e=!1;return n.scene.children[0].children.some(function(t){if(t.name&&t.name.indexOf(s.ObjectGroupType.MARKER3D)>=0&&t.children.length>0)return e=!0}),e}()){var f=i.screenToCanvas(e.clientX,e.clientY),p=new THREE.Vector2(e.clientX,e.clientY),m=i.getIntersectContext(p);i.intersector.pick(m,function(e){function a(e){switch(e.objectType){case s.PICKABLETYPE.Marker3d:e.object.setAttributeSize(e.index,e.object.initSize||e.currentSize);break;default:r.clearHover()}}if(n._pickObjectByHover=!0,e){var o=s.GlobalData.Hover||e.hoverEnabled;n.lastIntersected&&(n.lastIntersected.userId!=e.userId&&a(n.lastIntersected),n.lastIntersected.hoverEnabled&&t(null)),o?(n.lastIntersected&&n.lastIntersected.userId==e.userId||(!function(e){switch(e.objectType){case s.PICKABLETYPE.Marker3d:var t=e.object;e.currentSize=t.getAttributeSize(e.index),t.initSize=t.initSize||e.currentSize,t.getAttributeHoverAnimation(e.index)&&e.currentSize===t.initSize&&t.setAttributeSize(e.index,Math.floor(1.5*e.currentSize));break;default:r.setHoverId(e.userId)}}(e),n.lastIntersected=e),t(e,!0)):n.lastIntersected=e,i.updateHighlight()}else n.lastIntersected&&(a(n.lastIntersected),n.lastIntersected=null,t(null),i.updateHighlight())})}}},_canPick:function(){return!!this.cameraControl.viewer.modelManager.hasModelDataReady()},pickToPoint:function(e,t){void 0==t&&(t=5);var i=this.cameraControl,r=i.scene,n=new THREE.Vector2(e.x,e.y),a=i.getIntersectContext(n),o=i.intersector.pick(a);if(o){if(o.object.parent instanceof s.ExtrudeBodyManager)return null;var l,u=o.point,c=o.object.geometry,h=o.object.matrixWorld.clone(),d=i.camera.projScreenMatrix,f=a.mouse,p=a.viewportSize;if(void 0!==o.indexInfo&&(l=o.indexInfo),!c.attributes&&!c._bufferGeometry)return null;var m=c.attributes?c:c._bufferGeometry;if("MeshLineGeometry"===m.type){var v={},g=new THREE.Matrix4;g.getInverse(h);var y=new THREE.Vector3(u.x,u.y,u.z);return y.applyMatrix4(g),v.pickPoint=y,v.pickLine=o.object,v.pickPlane=null,v.type="Line",v.face=o.face,v.userId=o.userId,v.modelId=o.databagId,v}if(!m.index||void 0===m.attributes.normal)return null;var M=m.attributes.position.array,E=m.attributes.normal.array,b=[],x=0,I=0;l?(b=m.index.array,x=l.indexStart,I=l.indexStart+l.indexCount):(s.GlobalData.BatchMergeEnabled&&o.matrix&&h.multiply(o.matrix),b=s.RemoveDuplicateVertex(m.attributes.position.array,m.index.array),I=b.length);for(var T=1/0,e=new THREE.Vector3,w=[],C=[],S=s.Utils.getMin(b.slice(x,I)),A=x;A<I;++A){var k=new THREE.Vector3(M[3*b[A]],M[3*b[A]+1],M[3*b[A]+2]);k.applyMatrix4(h);var n=k.clone();n.applyMatrix4(d);var R=.5*(n.x-f.x)*p.width,B=.5*(n.y-f.y)*p.height,L=Math.sqrt(R*R+B*B);L<T&&(T=L,e.copy(k)),l&&C.push(b[A]-S)}var O=u.clone(),P=null,D=!1;if(T<t)r.hasObjectGroup(s.ObjectGroupType.MEASUREPICKPLANE)&&r.removeObjectGroupByName(s.ObjectGroupType.MEASUREPICKPLANE),O=e.clone();else{var T=1/0,N=new THREE.Vector3,_=new THREE.Vector3,e=new THREE.Vector3,H=[];l?(w=M.slice(l.positionStart,l.positionStart+l.positionCount),H=s.BuildEdge(w,C)):(w=M,H=s.BuildEdge(m.attributes.position.array,m.index.array));for(var A=0;A<H.length;A+=2){var F=new THREE.Vector3(w[3*H[A]],w[3*H[A]+1],w[3*H[A]+2]);F.applyMatrix4(h);var U=new THREE.Vector3(w[3*H[A+1]],w[3*H[A+1]+1],w[3*H[A+1]+2]);U.applyMatrix4(h);var G=function(e,t,i){var r=new THREE.Vector3;r.subVectors(t,e);var n=new THREE.Vector3;n.subVectors(i,e);var a=r.dot(n);if(a<0)return e;var o=r.dot(r);if(a>o)return t;a/=o;var s=e.clone();return s.addScaledVector(r,a),s}(F,U,u),n=G.clone();n.applyMatrix4(d);var R=.5*(n.x-f.x)*p.width,B=.5*(n.y-f.y)*p.height,L=Math.sqrt(R*R+B*B);L<T&&(T=L,N.copy(F),_.copy(U),e.copy(G))}if(w=null,C=null,T<t)r.hasObjectGroup(s.ObjectGroupType.MEASUREPLANE)&&r.removeObjectGroupByName(s.ObjectGroupType.MEASUREPLANE),P=new Array,P.push(N),P.push(_),O=e.clone();else{if(s.GlobalData.MeasureHighlightPlane){b=m.index.array;var g=new THREE.Matrix4;g.getInverse(h);var y=new THREE.Vector3(u.x,u.y,u.z);y.applyMatrix4(g);var z=s.GetFaceIndex(M,E,b,y,o.face.normal),j=new THREE.BufferGeometry;j.setIndex(z),j.addAttribute("position",m.attributes.position,3),j.addAttribute("normal",m.attributes.normal,3);var V=s.BuildEdge(M,z),W=new THREE.BufferGeometry;W.setIndex(V),W.addAttribute("position",m.attributes.position,3),r.hasObjectGroup(s.ObjectGroupType.MEASUREPLANE)&&r.removeObjectGroupByName(s.ObjectGroupType.MEASUREPLANE);var Y=r.getOrCreateObjectGroup(s.ObjectGroupType.MEASUREPLANE,{priority:1,globalSpace:!0}),Z=new THREE.Mesh(j,new THREE.MeshBasicMaterial({color:1170103,opacity:.1,transparent:!0}));Z.applyMatrix(o.object.matrix),Y.add(Z);var Q=new THREE.LineSegments(W,new THREE.LineBasicMaterial({color:1170103}));Q.applyMatrix(o.object.matrix),Y.add(Q),Y.updateMatrixWorld(!0),i.updateHighlight()}D=!0}}var X=null;D?X="Plane":P?X="Line":O&&(X="Point");var v={};return v.pickPoint=O,v.pickLine=P,v.pickPlane=D,v.type=X,v.face=o.face,v.userId=o.userId,v.modelId=o.databagId,v}return null},handleTabs:function(e){var t=this.cameraControl.viewer.modelManager.sceneState;void 0!=e&&void 0!=e.userId&&t.setSelection([e.userId],e.databagId)},pickAllObjectsByPosition:function(e){var t=new THREE.Vector2(e.clientX,e.clientY);return this.cameraControl.intersector.getObjectsByClientCoordinates(t)}},function(){var e=function(){function e(t){_classCallCheck(this,e),this.name=t,this._mousePressed=!1}return _createClass(e,[{key:"getName",value:function(){return this.name}},{key:"onExit",value:function(){}},{key:"destroy",value:function(){}},{key:"processMouseDown",value:function(e){return!1}},{key:"processMouseMove",value:function(e){return!1}},{key:"processMouseUp",value:function(e){return!1}},{key:"processMouseWheel",value:function(e){return!1}},{key:"processMouseDoubleClick",value:function(e){return!1}},{key:"processKeyDown",value:function(e){return!1}},{key:"processKeyUp",value:function(e){switch(e.keyCode){case s.Keys.ESC:this._mousePressed=!1}return!1}},{key:"processTouchstart",value:function(e){return!1}},{key:"processTouchmove",value:function(e){return!1}},{key:"processTouchend",value:function(e){return!1}},{key:"processHover",value:function(e){return!1}},{key:"onEvent",value:function(e){var t=!1;switch(e.type){case"touchmove":t=this.processTouchmove(e);break;case"touchstart":t=this.processTouchstart(e);break;case"touchend":t=this.processTouchend(e);break;case"keydown":t=this.processKeyDown(e);break;case"keyup":t=this.processKeyUp(e);break;case"mousewheel":case"DOMMouseScroll":t=this.processMouseWheel(e);break;case"mousedown":this._mousePressed=!0,t=this.processMouseDown(e);break;case"mousemove":t=this._mousePressed?this.processMouseMove(e):this.processHover(e);break;case"mouseup":this._mousePressed=!1,t=this.processMouseUp(e);break;case"dblclick":t=this.processMouseDoubleClick(e)}return t}}]),e}();s.EditTool=e}(),function(){var e=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cameraControl=i,n.frustum=new THREE.Frustum,n.startPt=new THREE.Vector2,n.endPt=new THREE.Vector2,n.eventDispatcher=r,n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.cameraControl=null,this.frustum=null,this.startPt=null,this.endPt=null,this.eventDispatcher=null}},{key:"onUpdateUI",value:function(e){this.eventDispatcher.dispatchEvent({type:s.EVENTS.ON_EDITOR_UPDATEUI,data:e,editor:this.name})}},{key:"updateFrustum",value:function(e,t){var i=this.startPt.x,r=this.endPt.x,n=this.startPt.y,a=this.endPt.y;if(i>r){var o=i;i=r,r=o}if(n>a){var s=n;n=a,a=s}if(r-i==0||a-n==0)return!1;var l=this.cameraControl,u=l.getContainerDimensions();return e&&l.computeFrustum(i,r,n,a,this.frustum,u),t&&this.onUpdateUI({visible:!0,dir:this.startPt.x<this.endPt.x,left:i-u.left,top:n-u.top,width:r-i,height:a-n}),!0}},{key:"computeFrustum",value:function(){function e(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=e.clientToWorld(l.clone()),c=e.worldToDrawing(u);i.push(new THREE.Vector3(c.x,c.y,c.z))}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}function t(e){return(new THREE.Plane).setFromCoplanarPoints(e[0],e[1],e[2])}var i=this.startPt.x,r=this.endPt.x,n=this.startPt.y,a=this.endPt.y,o=new THREE.Vector3(i,n),s=new THREE.Vector3(i,a),l=new THREE.Vector3(r,a),u=new THREE.Vector3(r,n),c=[];c.push(o,s,l,u);for(var h=this.cameraControl.viewer,d=[],f=0;f<c.length;f++){var p=[];p.push(c[f]),p.push(c[(f+1)%c.length]),p.push(c[f].clone().setZ(1)),d.push(t(e(h,p)))}var m=[];m.push(o,u,l),d.push(t(e(h,m)));var v=[];v.push(o.setZ(1),s.setZ(1),l.setZ(1)),d.push(t(e(h,v)));for(var g=new THREE.Frustum,y=0;y<d.length;y++)g.planes[y].copy(d[y]);return g}}]),t}(s.EditTool);s.RectOpTool=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditToolMode.PICK_BY_RECT,e.cameraControl,e.modelManager));return i.viewer=e,i.scene=e.getScene(),i.pickHelper=new s.PickHelper(i.cameraControl),i.activatePick=!1,i.pickPoint=new THREE.Vector3,i.snapIsEnabled=!1,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.pickHelper.destroy(),this.pickHelper=null,this.viewer=null,this.scene=null,this.pickPoint=null}},{key:"processMouseDown",value:function(e){if(!s.EditorConfig.NoKey){e.preventDefault();var i=["pickByMeasure"],r=this.viewer.editorManager.tools,n=!0;return r.some(function(e){if(i.indexOf(e.name)>=0)return n=!1,!0}),this.activatePick=n&&(e.ctrlKey||e.altKey),this.activatePick&&e.button===THREE.MOUSE.LEFT?(this.startPt.set(e.clientX,e.clientY),!0):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseDown",this).call(this,e)}}},{key:"processMouseMove",value:function(e){if(!s.EditorConfig.NoKey)return this.activatePick&&e.button===THREE.MOUSE.LEFT?(this.endPt.set(e.clientX,e.clientY),this.updateFrustum(!1,!0),!0):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseMove",this).call(this,e)}},{key:"processMouseUp",value:function(e){if(!s.EditorConfig.NoKey){if(this.onUpdateUI({visible:!1}),this.activatePick&&e.button===THREE.MOUSE.LEFT){if(this.activatePick=!1,Math.abs(this.startPt.x-e.clientX)<2&&Math.abs(this.startPt.y-e.clientY)<2)return this.pickHelper.click(e,null),!0;if(this.endPt.set(e.clientX,e.clientY),!this.updateFrustum(!0,!1))return this.pickHelper.click(e),!0;var i=s.OPSELECTIONTYPE.Clear;return e.ctrlKey?i=s.OPSELECTIONTYPE.Add:e.altKey&&(i=s.OPSELECTIONTYPE.Remove),s.PickUtil.pickByRect(this.scene,this.frustum,i,this.viewer,void 0,this.startPt,this.endPt),this.pickHelper.lastPickedUserId="",this.cameraControl.updateView(!0),!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseUp",this).call(this,e)}}},{key:"processHover",value:function(e){if(this.snapIsEnabled)return!!s.GlobalData.IsMobile||(this.pickHelper.handleMouseMeasure(e,!1,this.pickPoint,s.EVENTS.ON_HOVER_SNAP),!0)}},{key:"enableSnap",value:function(e){this.snapIsEnabled=e}}]),t}(s.RectOpTool);s.RectPickTool=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditToolMode.ZOOM_BY_RECT,e.cameraControl,e.modelManager));return i.scene=e.getScene(),i.camera=e.camera,i.activateZoom=!1,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.scene=null}},{key:"processMouseDown",value:function(e){return e.button===THREE.MOUSE.LEFT?(this.startPt.set(e.clientX,e.clientY),this.activateZoom=!0,!0):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseDown",this).call(this,e)}},{key:"processMouseMove",value:function(e){return this.activateZoom?(this.endPt.set(e.clientX,e.clientY),this.updateFrustum(!1,!0),!0):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseMove",this).call(this,e)}},{key:"processMouseUp",value:function(e){if(this.activateZoom){if(this.activateZoom=!1,this.onUpdateUI({visible:!1}),this.endPt.set(e.clientX,e.clientY),this.updateFrustum(!0,!1)){this.zoomToRectangle()&&!0!==this.camera.isPerspective&&this.orthoCameraZoom()}return!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseUp",this).call(this,e)}},{key:"orthoCameraZoom",value:function(){var e=this.cameraControl.getContainerDimensions(),t=e.width/e.height,i=Math.abs(this.endPt.x-this.startPt.x),r=Math.abs(this.endPt.y-this.startPt.y),n=i/r,a=1;a=t<n?i/e.width:r/e.height;var o=this.cameraControl.camera;o.orthoScale/=a,this.cameraControl.dirtyCamera(!0),o.setZoom(o.orthoScale),this.cameraControl.setCameraChanging(!0),this.cameraControl.update(!0,!0)}},{key:"zoomToRectangle",value:function(){var e=this.cameraControl.camera,t=this.cameraControl.camera.target,i=this.cameraControl.getContainerDimensions(),r=this.startPt.x,n=this.startPt.y,a=this.endPt.x,o=this.endPt.y,l=Math.abs(a-r),u=Math.abs(n-o);if(0!==l&&0!==u){var c=new THREE.Vector2((r+a)/2,(n+o)/2),h=this.cameraControl.getIntersectContext(c),d=this.cameraControl.intersector.hitTest(h);if(!d){var f=this.cameraControl.viewer,p=new s.RectPickTool(f);p.startPt.set(r,a),p.endPt.set(n,o);var m=s.PickUtil.pickByRect(this.scene,this.computeFrustum(),s.OPSELECTIONTYPE.Add,f,!1),v=new THREE.Box3,g=!0,y=!1,M=void 0;try{for(var E,b=m[Symbol.iterator]();!(g=(E=b.next()).done);g=!0){var x=E.value,I=f.getComponentInfoByUserId(x).boundingBox;v.expandByPoint(I.min),v.expandByPoint(I.max)}}catch(e){y=!0,M=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw M}}if(!1===v.isEmpty()){var T=f.worldToDrawing(v.getCenter());d=new THREE.Vector3(T.x,T.y,T.z)}}if(!d)return!1;var w=e.position.clone(),C=l/u>i.width/i.height?l/i.width:u/i.height,S=d.distanceTo(w),A=S*C,k=t.clone().sub(w),R=k.length();k.normalize();var B=k.clone().negate().multiplyScalar(A);return w=d.clone().add(B),e.position.copy(w),t.copy(w).sub(B.clone().normalize().multiplyScalar(R)),this.cameraControl.updateView(!0),!0}}},{key:"worldToClient",value:function(e){var t=this.cameraControl.camera,i=new THREE.Vector3(e.x,e.y,e.z);return i.project(t),i}},{key:"clientToWorld",value:function(e){var t=this.cameraControl.getContainerDimensions(),i=this.cameraControl.camera,r=new THREE.Vector3;return r.x=e.x/t.width*2-1,r.y=-e.y/t.height*2+1,r.z=e.z,r.unproject(i),r}}]),t}(s.RectOpTool);s.RectZoomTool=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditToolMode.PICK_BY_MEASURE));return i.editorManager=e.editorManager,i.viewer=e,i.pickHelper=new s.PickHelper(e.cameraControl),i.mouseDown=new THREE.Vector2,i.lastEvent=null,i.pick=!1,i.pickPoint=new THREE.Vector3,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.editorManager=null,this.mouseDown=null,this.lastEvent=null,this.pickPoint=null,this.pickHelper.destroy(),this.pickHelper=null}},{key:"processMouseDown",value:function(e){return!!s.GlobalData.IsMobile||(e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.RIGHT?(this.mouseDown.x=e.clientX,this.mouseDown.y=e.clientY,!1):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseDown",this).call(this,e))}},{key:"processMouseMove",value:function(e){return!1}},{key:"processMouseUp",value:function(e){if(s.GlobalData.IsMobile)return!0;var i=new THREE.Vector2(e.clientX,e.clientY).distanceTo(this.mouseDown);if(e.button===THREE.MOUSE.LEFT){if(i<=2){this.editorManager.isUpdateRenderList=!0;var r=this.pickPoint.clone();e.shiftKey?this.pickHelper.handleShiftMeasure(e,!0,r):this.pickHelper.handleMouseMeasure(e,!0,r),r.equals(this.pickPoint)||(this.pick=!this.pick,this.pickPoint.copy(r))}return this.dispatchEvent({type:s.EVENTS.ON_TOOL_END}),!0}if(e.button===THREE.MOUSE.RIGHT){if(i<=2){var r=this.pickPoint.clone();this.pickHelper.handleMouseMeasure(e,!0,r,s.EVENTS.ON_MEASURE_RESET)}return!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseUp",this).call(this,e)}},{key:"processHover",value:function(e){return!!s.GlobalData.IsMobile||(e.shiftKey?this.pickHelper.handleShiftMeasure(e,!1,this.pickPoint):this.pickHelper.handleMouseMeasure(e,!1,this.pickPoint),!0)}},{key:"processTouchstart",value:function(e){return this.mouseDown.x=e.touches[0].clientX,this.mouseDown.y=e.touches[0].clientY,e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,this.lastEvent=e,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchstart",this).call(this,e)}},{key:"processTouchmove",value:function(e){return this.lastEvent=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchmove",this).call(this,e)}},{key:"processTouchend",value:function(e){return null!=this.lastEvent&&(this.pickHelper.handleMouseMeasure(this.lastEvent,!0,this.pickPoint),this.editorManager.isUpdateRenderList=!0),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchend",this).call(this,e)}},{key:"onExit",value:function(e){var t=this.pickHelper.scene;t.hasObjectGroup(s.ObjectGroupType.MEASUREPICKPLANE)&&t.removeObjectGroupByName(s.ObjectGroupType.MEASUREPICKPLANE)}},{key:"dispatchEvent",value:function(e){this.viewer.modelManager.dispatchEvent(e)}}]),t}(s.EditTool);s.MeasureTool=e}(),function(){s.Keys={ALT:18,BACKSPACE:8,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,D:68,E:69,Q:81,S:83,W:87,PLUS:187,SUB:189,ZERO:48,ESC:27,TAB:9},s.EditorConfig={ReverseWheelDirection:!1,MovementSpeedRate:1,WalkSpeedRate:1,RotatePivotMode:0,NoPan:!1,NoRotate:!1,NoZoom:!1,NoKey:!1,LockAxisZ:!1,LockAxisZRange:null};var e=function(){function e(t,i){_classCallCheck(this,e),this.name=t,this.cameraControl=i,this.mouseButtons={ORBIT:THREE.MOUSE.RIGHT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.LEFT},this.StateType={NONE:-1,ROTATE:0,DOLLY:1,PAN:2},this.state=this.StateType.NONE,this.zoomSpeed=Math.pow(.95,.2),this.defaultMovementSpeed=.005*s.GlobalData.SceneSize,this.movementSpeed=this.defaultMovementSpeed,this.minMovementSpeed=.001,this.defaultKeyPanSpeed=2,this.keyPanSpeed=this.defaultKeyPanSpeed,this.minKeyPanSpeed=.01,this.wheelZoomFactor=45e-5}return _createClass(e,[{key:"getName",value:function(){return this.name}},{key:"destroy",value:function(){this.scene=null,this.cameraControl=null,this.mouseButtons=null,this.StateType=null}},{key:"onExit",value:function(){}},{key:"onEnter",value:function(){}},{key:"processMouseDown",value:function(e){}},{key:"processMouseMove",value:function(e){}},{key:"processMouseUp",value:function(e){}},{key:"processMouseWheel",value:function(e){}},{key:"processMouseDoubleClick",value:function(e){}},{key:"processKeyDown",value:function(e){}},{key:"processKeyUp",value:function(e){}},{key:"processTouchstart",value:function(e){}},{key:"processTouchmove",value:function(e){}},{key:"processTouchend",value:function(e){}},{key:"processHover",value:function(e){}},{key:"moveTo",value:function(e,t,i){}},{key:"rotateTo",value:function(e){}},{key:"dispatchEvent",value:function(e){this.cameraControl.viewer.modelManager.dispatchEvent(e)}},{key:"updateButtons",value:function(e){void 0!==e.ORBIT&&(this.mouseButtons.ORBIT=e.ORBIT),void 0!==e.PAN&&(this.mouseButtons.PAN=e.PAN),void 0!==e.PAN2&&(this.mouseButtons.PAN2=e.PAN2),void 0!==e.ZOOM&&(this.mouseButtons.ZOOM=e.ZOOM)}}]),e}();s.BaseEditor=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.oldMouseX=-1,r.oldMouseY=-1,r.rotatePivot=null,r._rotateStart=new THREE.Vector2,r._rotateEnd=new THREE.Vector2,r._rotateDelta=new THREE.Vector2,r._lastTrackingPoint=null,r.rotateSpeed=.2,r._dollyStart=new THREE.Vector2,r._dollyEnd=new THREE.Vector2,r._dollyDelta=new THREE.Vector2,r._dollyCenter=new THREE.Vector2,r.zoomSpeed=Math.pow(.95,.2),r.touchZoomSpeed=Math.pow(.98,.2),r.modelManager=i.viewer.modelManager,r._panStart=new THREE.Vector2,r._panEnd=new THREE.Vector2,r._panDelta=new THREE.Vector2,r._pan=new THREE.Vector3,r._panOffset=new THREE.Vector3,r._damping=!1,r._worldDimension=new THREE.Vector2,r.pickHelper=new s.PickHelper(i),r.intersectOfMouseDown=null,r.timeId=null,r.longTapFlag=!1,s.Utils.isMobileDevice()?r.selectPad=new s.SelectPad(r):r.selectPad=null,r.startPt=new THREE.Vector2,r._reqid=0,r._animateBinded=r._animate.bind(r),r._clock=new THREE.Clock,r._moving=!1,r.pickObjects=[],r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._stop(),this.modelManager=null,this.intersectOfMouseDown=null,this.rotatePivot=null,this._rotateStart=null,this._rotateEnd=null,this._rotateDelta=null,this._lastTrackingPoint=null,this._dollyStart=null,this._dollyEnd=null,this._dollyDelta=null,this._dollyCenter=null,this._panStart=null,this._panEnd=null,this._panDelta=null,this._pan=null,this._worldDimension=null,this.startPt=null,this._animateBinded=null,this._clock=null,this.pickObjects=[],this.timeId&&(clearTimeout(this.timeId),this.timeId=null),this.pickHelper.destroy(),this.pickHelper=null,this.selectPad&&(this.selectPad.destroy(),this.selectPad=null)}},{key:"longTap",value:function(){this.longTapFlag=!0,s.Logger.log("long tap"),this.selectPad&&this.selectPad.showOverlay(this.startPt)}},{key:"beginPan",value:function(e,t){this._panStart.set(e,t),this._worldDimension.copy(this.getWorldDimension(e,t))}},{key:"processMouseDown",value:function(e){this.oldMouseX=e.clientX,this.oldMouseY=e.clientY;var t=this.cameraControl;this.intersectOfMouseDown=null,e.preventDefault();var i="",r=null;if(e.button===this.mouseButtons.ORBIT){if(s.EditorConfig.NoRotate)return;this.rotatePivot=t.calculatePivot(s.EditorConfig.RotatePivotMode,{x:e.clientX,y:e.clientY}),this.state=this.StateType.ROTATE,this._rotateStart.set(e.clientX,e.clientY),r=this._rotateStart,this._lastTrackingPoint=null,i=s.EditorMode.ORBIT}else if(e.button===this.mouseButtons.ZOOM){if(s.EditorConfig.NoZoom)return;this.state=this.StateType.DOLLY,this._dollyStart.set(e.clientX,e.clientY),r=this._dollyStart,i=s.EditorMode.ZOOM}else if(e.button===this.mouseButtons.PAN||e.button===this.mouseButtons.PAN2){if(s.EditorConfig.NoPan)return;this._panStart.set(e.clientX,e.clientY),this._panEnd.set(e.clientX,e.clientY),this._panOffset.set(0,0,0),this._pan.set(0,0,0),r=this._panStart,this._worldDimension.copy(t.getWorldDimension(e.clientX,e.clientY)),this.state=this.StateType.PAN,this.intersectOfMouseDown=t.getLastIntersect(),this.cameraControl.isEnableDamping()&&(this._damping=!0,this.dampingPanAnimation()),i=s.EditorMode.PAN}this.dispatchEvent({type:s.EVENTS.ON_EDITOR_BEGIN,name:i,editor:this.name,startPt:r})}},{key:"processMouseMove",value:function(e){var t=this.cameraControl;e.preventDefault(),t.userInputWorking||(t.userInputWorking=!0);var i="";switch(this.state){case this.StateType.ROTATE:if(s.EditorConfig.NoRotate)return;if(this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart),0==this._rotateDelta.x&&0==this._rotateDelta.y)return;this._rotateStart.copy(this._rotateEnd),t.processRotate(this._rotateDelta,this.rotatePivot),i=s.EVENTS.ON_EDITOR_ROTATING;break;case this.StateType.DOLLY:if(this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),0===this._dollyDelta.x&&0===this._dollyDelta.y)return
;var r;r=this._dollyDelta.y>0?this.zoomSpeed:1/this.zoomSpeed,this.cameraControl.adjustCameraForDolly(r,null),this._dollyStart.copy(this._dollyEnd);break;case this.StateType.PAN:if(this._panEnd.set(e.clientX,e.clientY),!this.cameraControl.isEnableDamping()){if(this._panDelta.subVectors(this._panEnd,this._panStart),Math.abs(this._panDelta.x)<Math.abs(s.Utils.MinusEpsilon)&&Math.abs(this._panDelta.y)<Math.abs(s.Utils.MinusEpsilon))return;this.cameraControl.panOnWorld(this._panStart,this._panEnd,this._pan,this._worldDimension),this.cameraControl.adjustCameraForPan(this._pan),this._panStart.copy(this._panEnd)}i=s.EVENTS.ON_EDITOR_PANING;break;case this.StateType.NONE:}this.state!==this.StateType.NONE&&this.cameraControl.update(!0),this.dispatchEvent({type:i,editor:this.name}),this.pickObjects=[]}},{key:"dampingPanAnimation",value:function(){function e(){t._panDelta.subVectors(t._panEnd,t._panStart);var i=!1;if((Math.abs(t._panDelta.x)>Math.abs(s.Utils.MinusEpsilon)||Math.abs(t._panDelta.y)>Math.abs(s.Utils.MinusEpsilon))&&(i=!0),t._panOffset.length()>Math.abs(s.Utils.MinusEpsilon)&&(i=!0),i){t._panOffset.add(t._pan);var r=t._panOffset.clone().multiplyScalar(t.cameraControl.dynamicDampingFactor());t.cameraControl.adjustCameraForPan(r),t.cameraControl.panOnWorld(t._panStart,t._panEnd,t._pan,t._worldDimension),t._panStart.copy(t._panEnd),t._panOffset.multiplyScalar(1-t.cameraControl.dynamicDampingFactor()),t.cameraControl.viewer.render()}t._damping&&window.requestAnimationFrame(e)}var t=this;window.requestAnimationFrame(e)}},{key:"processMouseUp",value:function(e){if(this.state===this.StateType.NONE)return!1;this.intersectOfMouseDown=null;var t=this.cameraControl;this.oldMouseX===e.clientX&&this.oldMouseY===e.clientY||t.update(!0),this.state=this.StateType.NONE,this.rotatePivot=null,t.endOperation(),t.onUserInputFinished();var i="";return e.button===this.mouseButtons.ORBIT?i=s.EditorMode.ORBIT:e.button===this.mouseButtons.ZOOM?i=s.EditorMode.ZOOM:e.button!==this.mouseButtons.PAN&&e.button!==this.mouseButtons.PAN2||(i=s.EditorMode.PAN),this.dispatchEvent({type:s.EVENTS.ON_EDITOR_END,name:i,editor:this.name}),!0}},{key:"processMouseWheel",value:function(e){var t=this.cameraControl;if(!s.EditorConfig.NoZoom){e.preventDefault(),e.stopPropagation();var i=0;e.wheelDelta?i=e.wheelDelta:e.detail&&(i=40*-e.detail),Math.abs(i)>720&&(i=i>0?720:-720),i*=this.wheelZoomFactor,s.EditorConfig.ReverseWheelDirection&&(i*=-1),!s.GlobalData.ConstraintZoom||t.cameraWithinMaximumRange()?t.zoom(i,e.clientX,e.clientY):t.resetCameraToMaximumRange(),t.delayHandle(),this.modelManager.dispatchEvent({type:s.EVENTS.ON_EDITOR_ZOOM}),this.pickObjects=[]}}},{key:"processKeyDown",value:function(e){if(!s.EditorConfig.NoKey&&!s.EditorConfig.NoPan){var t,i=this.cameraControl;s.GlobalData.BatchMergeEnabled?(this.animationStarted||(this.animationStarted=!0,this._start()),t=!1):(t=!0,i.delayHandle()),this._moving=!0;var r=!1,n=this.movementSpeed*s.EditorConfig.MovementSpeedRate,a=this.keyPanSpeed*s.EditorConfig.MovementSpeedRate;switch(e.keyCode){case s.Keys.ZERO:this.keyPanSpeed=i.defaultKeyPanSpeed,this.movementSpeed=i.defaultMovementSpeed;break;case s.Keys.PLUS:this.keyPanSpeed*=1.1,this.movementSpeed*=1.1;break;case s.Keys.SUB:this.keyPanSpeed*=.9,this.keyPanSpeed<this.minKeyPanSpeed&&(this.keyPanSpeed=this.minKeyPanSpeed),this.movementSpeed*=.9,this.movementSpeed<this.minMovementSpeed&&(this.movementSpeed=this.minMovementSpeed);break;case s.Keys.Q:i.pan(0,a),r=!0;break;case s.Keys.E:i.pan(0,-a),r=!0;break;case s.Keys.LEFT:case s.Keys.A:i.pan(a,0),r=!0;break;case s.Keys.RIGHT:case s.Keys.D:i.pan(-a,0),r=!0;break;case s.Keys.UP:case s.Keys.W:i.moveStraight(n,!e.shiftKey),r=!0;break;case s.Keys.DOWN:case s.Keys.S:i.moveStraight(-n,!e.shiftKey),r=!0}r&&t&&i.update(!0),r&&!this.cameraControl.userInputWorking&&(this.cameraControl.userInputWorking=!0)}}},{key:"processKeyUp",value:function(e){if(!s.EditorConfig.NoKey&&!s.EditorConfig.NoPan)switch(e.keyCode){case s.Keys.ESC:this.cameraControl.viewer.modelManager.sceneState.clearSelection(),this.pickHelper.lastPickedUserId=void 0,this.cameraControl.updateView(!0);break;case s.Keys.Q:case s.Keys.E:case s.Keys.LEFT:case s.Keys.A:case s.Keys.RIGHT:case s.Keys.D:case s.Keys.UP:case s.Keys.W:case s.Keys.DOWN:case s.Keys.S:this.cameraControl.onUserInputFinished()}}},{key:"processTouchstart",value:function(e){this.startPt.set(e.touches[0].clientX,e.touches[0].clientY),this.timeId&&clearTimeout(this.timeId);var t=this;switch(t.timeId=setTimeout(t.longTap,400),this.selectPad&&this.selectPad.hideOverlay(),e.touches.length){case 1:if(s.EditorConfig.NoRotate)return;this.cameraControl.calculatePivot(s.EditorConfig.RotatePivotMode,{x:e.touches[0].clientX,y:e.touches[0].clientY}),this._rotateStart.set(e.touches[0].clientX,e.touches[0].clientY),this.state=this.StateType.ROTATE;break;case 2:if(!s.EditorConfig.NoZoom){var i=e.touches[0].clientX-e.touches[1].clientX,r=e.touches[0].clientY-e.touches[1].clientY;this._dollyStart.set(0,Math.sqrt(i*i+r*r))}if(!s.EditorConfig.NoPan){var n=.5*(e.touches[0].clientX+e.touches[1].clientX),a=.5*(e.touches[0].clientY+e.touches[1].clientY);this._panStart.set(n,a)}break;default:this.state=this.StateType.NONE}}},{key:"processTouchmove",value:function(e){this.timeId&&clearTimeout(this.timeId);var t=this.cameraControl;switch(e.preventDefault(),e.touches.length){case 1:if(s.EditorConfig.NoRotate)return;this._rotateEnd.set(e.touches[0].clientX,e.touches[0].clientY),this._rotateDelta.subVectors(this._rotateStart,this._rotateEnd);var i=this.cameraControl.getClientSize(),r=2*Math.PI*this._rotateDelta.x/i.x*this.rotateSpeed,n=2*Math.PI*this._rotateDelta.y/i.y*this.rotateSpeed;t.touchUpdateRotation(r,n),this._rotateStart.copy(this._rotateEnd),this.modelManager.dispatchEvent({type:s.EVENTS.ON_EDITOR_ROTATING});break;case 2:if(t.clearTouchRotateState(),!s.EditorConfig.NoZoom){var a=e.touches[0].clientX-e.touches[1].clientX,o=e.touches[0].clientY-e.touches[1].clientY,l=Math.sqrt(a*a+o*o);if(this._dollyEnd.set(0,l),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),Math.abs(this._dollyDelta.y)>3){var u;this._dollyDelta.y>0?u=1/Math.pow(this.touchZoomSpeed,.5*this._dollyDelta.y):this._dollyDelta.y<0&&(u=Math.pow(this.touchZoomSpeed,.5*-this._dollyDelta.y)),console.log(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);var c=.5*(e.touches[0].clientX+e.touches[1].clientX),h=.5*(e.touches[0].clientY+e.touches[1].clientY);t.touchDolly(c,h,u),this.state=this.StateType.DOLLY,this.modelManager.dispatchEvent({type:s.EVENTS.ON_EDITOR_ZOOM})}}if(!s.EditorConfig.NoPan){var d=.5*(e.touches[0].clientX+e.touches[1].clientX),f=.5*(e.touches[0].clientY+e.touches[1].clientY);if(this._panEnd.set(d,f),this._panDelta.subVectors(this._panEnd,this._panStart),Math.abs(this._panDelta.x)<3&&Math.abs(this._panDelta.y)<3)return;this._worldDimension.copy(t.getWorldDimension(d,f)),t.panOnWorld(this._panStart,this._panEnd,this._pan,this._worldDimension),t.adjustCameraForPan(this._pan),this._panStart.copy(this._panEnd),this.state=this.StateType.PAN,this.modelManager.dispatchEvent({type:s.EVENTS.ON_EDITOR_PANING})}}t.touchUpdate()}},{key:"processTouchend",value:function(e){this.timeId&&clearTimeout(this.timeId),this.longTapFlag&&(this.longTapFlag=!1,e.preventDefault());var t=this.cameraControl;switch(e.touches.length){case 0:this.state=this.StateType.NONE,t.touchEndHandler(e);break;case 1:if(s.EditorConfig.NoRotate)return;this._rotateStart.set(e.touches[0].clientX,e.touches[0].clientY),this.state=this.StateType.ROTATE}}},{key:"processHover",value:function(e){this.pickHelper.handleMouseHover(e),this.pickHelper.handleMouseMovePick(e)}},{key:"moveTo",value:function(e){if(void 0!==e){var t=this.cameraControl;if(!s.EditorConfig.NoKey&&!s.EditorConfig.NoPan){var i=this.movementSpeed*s.EditorConfig.MovementSpeedRate,r=this.keyPanSpeed*s.EditorConfig.MovementSpeedRate,n=s.MoveDirection;switch(e){case n.FORWARD:t.moveForward(i,!0);break;case n.BACK:t.moveBackward(i,!0);break;case n.LEFT:t.pan(r,0);break;case n.RIGHT:t.pan(-r,0);break;case n.UP:t.pan(0,r);break;case n.DOWN:t.pan(0,-r);break;default:e=n.NONE}e!==n.NONE&&t.update(!0,!0)}}}},{key:"_updateMove",value:function(){this._moving&&(this._moving=!1,this.cameraControl.update(!0))}},{key:"_animate",value:function(){this._reqid=requestAnimationFrame(this._animateBinded),this._updateMove()}},{key:"_start",value:function(){this._animate()}},{key:"_stop",value:function(){this._reqid&&cancelAnimationFrame(this._reqid)}},{key:"onExit",value:function(){s.GlobalData.BatchMergeEnabled&&this.animationStarted&&(this._stop(),this.animationStarted=!1)}}]),t}(s.BaseEditor);s.NormalEditor=e}(),function(){var e=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.EditorMode.ORBIT;_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,e));return r.mouseButtons={ORBIT:THREE.MOUSE.RIGHT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.LEFT},r}return _inherits(t,e),t}(s.NormalEditor);s.OrbitEditor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s.EditorMode.PICK));return i.tabIndex=0,i}return _inherits(t,e),_createClass(t,[{key:"processMouseUp",value:function(e){this.cameraControl.onUserInputFinished(),e.preventDefault(),this.state=this.StateType.NONE;var t=Math.abs(this.oldMouseX-e.clientX)<=1&&Math.abs(this.oldMouseY-e.clientY)<=1,i=t;if((e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.RIGHT)&&t)return this.pickObjects=this.pickHelper.pickAllObjectsByPosition(e),this.pickHelper.click(e,this.intersectOfMouseDown),this.cameraControl.update(!0),this.intersectOfMouseDown=null,i;t||e.button!==this.mouseButtons.ORBIT&&e.button!==this.mouseButtons.PAN||this.cameraControl.update(!0),this.intersectOfMouseDown=null;var r="";return e.button===this.mouseButtons.ORBIT?r=s.EditorMode.ORBIT:e.button===this.mouseButtons.ZOOM?r=s.EditorMode.ZOOM:e.button!==this.mouseButtons.PAN&&e.button!==this.mouseButtons.PAN2||(r=s.EditorMode.PAN,this._damping&&(this._damping=!1),t||this.dispatchEvent({type:s.EVENTS.ON_MOUSE_DRAGGED,event:e})),this.dispatchEvent({type:s.EVENTS.ON_EDITOR_END,name:r,editor:this.name}),!1}},{key:"processMouseDoubleClick",value:function(e){e.button===THREE.MOUSE.LEFT&&this.pickHelper.doubleClick(e)}},{key:"processKeyDown",value:function(e){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processKeyDown",this).call(this,e),e.preventDefault(),this.state=this.StateType.NONE,!(s.EditorConfig.NoKey||this.pickObjects.length<=0)){var i=s.Keys;switch(e.keyCode){case i.TAB:e.shiftKey?(--this.tabIndex,this.tabIndex<0?(this.tabIndex=this.pickObjects.length+this.tabIndex,this.pickHelper.handleTabs(this.pickObjects[this.tabIndex])):this.pickHelper.handleTabs(this.pickObjects[this.tabIndex])):(++this.tabIndex,this.tabIndex>=this.pickObjects.length&&(this.tabIndex=0),this.pickHelper.handleTabs(this.pickObjects[this.tabIndex]))}this.cameraControl.update(!0)}}}]),t}(s.OrbitEditor);s.PickEditor=e}(),function(){function e(e){var t=this._pickHelper.pickToPoint(e,5);if(!s.Utils.isDefined(t))return null;if(!t.userId||!t.modelId)return null;var i=0,r="volumeMeasureObject_"+t.userId,n=void 0;if(void 0!==this._measuredObject[r])i=this._measuredObject[r].volume,n="m"===this._measuredObject[r].unit?"m³":"mm³";else{var a=this._externalObjectConverter.convertToExternalObject(r,t.userId,!1),o=s.GeomUtil.geometryVolume(a,this._viewer);i=o.volume,this._measuredObject[r]=o,n="m"===o.unit?"m³":"mm³"}return{volume:i,position:t.pickPoint,unit:n,objectId:t.userId,modelId:t.modelId,type:s.EVENTS.ON_VOLUME_MEASURE_END}}var t=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,s.EditToolMode.VOLUME_MEASURE));return t._viewer=e,t._externalObjectConverter=new s.ExternalObjectConverter(t._viewer),t._measuredObject={},t._lastMousePos=new THREE.Vector2,t._pickHelper=new s.PickHelper(e.cameraControl),t._pickPoint=new THREE.Vector3,t._touchMoved=!1,t}return _inherits(i,t),_createClass(i,[{key:"destroy",value:function(){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this._measuredObject=null,this._externalObjectConverter=null,this._viewer=null,this._pickHelper=null}},{key:"processMouseDown",value:function(e){return!!s.GlobalData.IsMobile||(e.button===THREE.MOUSE.LEFT?(this._lastMousePos.x=e.clientX,this._lastMousePos.y=e.clientY,!1):_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"processMouseDown",this).call(this,e))}},{key:"processMouseUp",value:function(t){if(s.GlobalData.IsMobile)return!0;var i=new THREE.Vector2(t.clientX,t.clientY).distanceTo(this._lastMousePos);if(t.button===THREE.MOUSE.LEFT){if(i<=2){var r={x:t.clientX,y:t.clientY},n=e.call(this,r);s.Utils.isDefined(n)&&this.dispatchEvent(n)}return!0}}},{key:"processTouchstart",value:function(e){return this._touchMoved=!1,this._lastMousePos.x=e.touches[0].clientX,this._lastMousePos.y=e.touches[0].clientY,_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"processTouchstart",this).call(this,e)}},{key:"processTouchmove",value:function(e){return this._touchMoved=!0,_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"processTouchmove",this).call(this,e)}},{key:"processTouchend",value:function(t){if(!this._touchMoved){var r=e.call(this,this.s);s.Utils.isDefined(r)&&this.dispatchEvent(r)}return _get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"processTouchend",this).call(this,t)}},{key:"onExit",value:function(e){this.destroy()}},{key:"dispatchEvent",value:function(e){this._viewer.modelManager.dispatchEvent(e)}}]),i}(s.EditTool);s.VolumeMeasureTool=t}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditorMode.ZOOM,e));return i.mouseButtons={ZOOM:THREE.MOUSE.LEFT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},i}return _inherits(t,e),t}(s.NormalEditor);s.ZoomEditor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditorMode.PAN,e));return i.mouseButtons={ORBIT:THREE.MOUSE.RIGHT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.LEFT},i}return _inherits(t,e),t}(s.NormalEditor);s.PanEditor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditorMode.FLY,e));return i.lookSpeed=.001,i.constrainPitch=!0,i.pitchMin=THREE.Math.degToRad(5)-.5*Math.PI,i.pitchMax=.5*Math.PI-i.pitchMin,i.pitchDeltaTotal=0,i.moveState=s.MoveDirection.NONE,i.rotateStart=new THREE.Vector2,i.rotateEnd=new THREE.Vector2,i.rotateDelta=new THREE.Vector2,i._panStart=new THREE.Vector2,i._panEnd=new THREE.Vector2,i._panDelta=new THREE.Vector2,i._pan=new THREE.Vector3,i._worldDimension=new THREE.Vector2,i.lastMousePoint=new THREE.Vector2,i.isLockHeight=!1,i.lockedHeight=0,i.pickHelper=new s.PickHelper(e),i.intersectOfMouseDown=null,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.rotateStart=null,this.rotateEnd=null,this.rotateDelta=null,this._panStart=null,this._panEnd=null,this._panDelta=null,this._pan=null,this._worldDimension=null,this.lastMousePoint=null,this.intersectOfMouseDown=null,this.pickHelper.destroy(),this.pickHelper=null}},{key:"processMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.lastMousePoint.set(e.clientX,e.clientY);var t=this.cameraControl;if(this.intersectOfMouseDown=null,e.button===this.mouseButtons.ORBIT){if(s.EditorConfig.NoRotate)return;this.rotateStart.set(e.clientX,e.clientY),this.state=this.StateType.ROTATE,this.dispatchEvent({type:s.EVENTS.ON_EDITOR_BEGIN,name:"look",editor:this.name})}else if(e.button===this.mouseButtons.PAN||e.button===this.mouseButtons.PAN2){if(s.EditorConfig.NoPan)return;this._panStart.set(e.clientX,e.clientY),this._worldDimension.copy(t.getWorldDimension(e.clientX,e.clientY)),this.intersectOfMouseDown=t.getLastIntersect(),this.state=this.StateType.PAN,this.isLockHeight&&(this.lockedHeight=e.clientY)}}},{key:"doPan",value:function(e,t){var i=this.cameraControl;this._panEnd.set(e,this.isLockHeight?this.lockedHeight:t),this._panDelta.subVectors(this._panEnd,this._panStart),0===this._panDelta.x&&0===this._panDelta.y||(i.panOnWorld(this._panStart,this._panEnd,this._pan,this._worldDimension),i.adjustCameraForPan(this._pan),this._panStart.copy(this._panEnd),i.update(!0))}},{key:"processMouseMove",value:function(e){var t=this.cameraControl;if(e.preventDefault(),this.state===this.StateType.ROTATE){if(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),0!=this.rotateDelta.x||0!=this.rotateDelta.y){var i=this.rotateDelta.x*this.lookSpeed,r=this.rotateDelta.y*this.lookSpeed;t.rotateForFly(i,r,this.pitchMin,this.pitchMax)}}else this.state===this.StateType.PAN&&this.doPan(e.clientX,e.clientY)}},{key:"processMouseUp",value:function(e){if(e.preventDefault(),e.stopPropagation(),e.button===THREE.MOUSE.LEFT&&this.lastMousePoint.x===e.clientX&&this.lastMousePoint.y===e.clientY)return void this.pickHelper.click(e,this.intersectOfMouseDown);this.intersectOfMouseDown=null;var t=this.cameraControl;switch(this.state){case this.StateType.ROTATE:this.rotateDelta.set(0,0);t.rotateForFly(0,0,this.pitchMin,this.pitchMax),this.dispatchEvent({type:s.EVENTS.ON_EDITOR_END,name:"look",editor:this.name});break;case this.StateType.PAN:this.doPan(e.clientX,e.clientY)}t.endOperation(),this.state=this.StateType.NONE}},{key:"processHover",value:function(e){this.pickHelper.handleMouseHover(e)}},{key:"processMouseWheel",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.cameraControl;if(!s.EditorConfig.NoZoom){var i=e.wheelDelta||e.detail;i=Math.abs(i)>10?i:40*-i,i*=5e-4,s.EditorConfig.ReverseWheelDirection&&(i*=-1),this.cameraControl.delayHandle();var r=t.getContainerDimensions(),n=r.left+.5*r.width,a=r.top+.5*r.height;t.zoom(i,n,a)}}},{key:"processKeyDown",value:function(e){if(!s.EditorConfig.NoKey&&!e.altKey){var t=s.MoveDirection,i=t.NONE;switch(e.keyCode){case s.Keys.ZERO:this.movementSpeed=this.defaultMovementSpeed;break;case s.Keys.PLUS:this.movementSpeed*=1.1;break;case s.Keys.SUB:this.movementSpeed*=.9,this.movementSpeed<this.minMovementSpeed&&(this.movementSpeed=this.minMovementSpeed);break;case s.Keys.UP:case s.Keys.W:i=t.FORWARD;break;case s.Keys.DOWN:case s.Keys.S:i=t.BACK;break;case s.Keys.LEFT:case s.Keys.A:i=t.LEFT;break;case s.Keys.RIGHT:case s.Keys.D:i=t.RIGHT;break;case s.Keys.Q:i=t.UP;break;case s.Keys.E:i=t.DOWN}i!==t.NONE&&(this.moveState|=i,this.dispatchEvent({type:s.EVENTS.ON_EDITOR_KEYDOWN,event:e,state:i,direction:t,editor:this.name}),this.cameraControl.delayHandle(),this.cameraControl.updateFlyMove(this.moveState,this.movementSpeed*s.EditorConfig.MovementSpeedRate))}}},{key:"processKeyUp",value:function(e){if(!s.EditorConfig.NoKey){var t=s.MoveDirection,i=t.NONE;switch(e.keyCode){case s.Keys.UP:case s.Keys.W:i=t.FORWARD;break;case s.Keys.DOWN:case s.Keys.S:i=t.BACK;break;case s.Keys.LEFT:case s.Keys.A:i=t.LEFT;break;case s.Keys.RIGHT:case s.Keys.D:i=t.RIGHT;break;case s.Keys.Q:i=t.UP;break;case s.Keys.E:i=t.DOWN}i!==t.NONE&&(this.dispatchEvent({type:s.EVENTS.ON_EDITOR_KEYUP,event:e,state:i,direction:t,editor:this.name}),this.moveState&=~i)}}},{key:"moveTo",value:function(e){this.cameraControl.updateFlyMove(e,this.movementSpeed*s.EditorConfig.MovementSpeedRate)}}]),t}(s.BaseEditor);s.FlyEditor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditorMode.WALK,e));return i.mouseButtons={ORBIT:THREE.MOUSE.LEFT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},i.pickHelper=new s.PickHelper(e),i.lastMousePoint=new THREE.Vector2,i._reqid=0,i._animateBinded=i._animate.bind(i),i._clock=new THREE.Clock,i.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},i.startPt=new THREE.Vector2,i.timeId=null,i.rotateSpeed=1,i._rotateStart=new THREE.Vector2,i._rotateEnd=new THREE.Vector2,i._rotateDelta=new THREE.Vector2,i._dollyStart=new THREE.Vector2,i._dollyEnd=new THREE.Vector2,i._dollyDelta=new THREE.Vector2,i._dollyCenter=new THREE.Vector2,i.zoomSpeed=Math.pow(.95,.2),i._panStart=new THREE.Vector2,i._panEnd=new THREE.Vector2,i._panDelta=new THREE.Vector2,i._pan=new THREE.Vector3,i._worldDimension=new THREE.Vector2,s.Utils.isMobileDevice()?i.selectPad=new s.SelectPad(i):i.selectPad=null,i.moveVector=new THREE.Vector3(0,0,0),i.rotationVector=new THREE.Vector3(0,0,0),i.zoomDelta=0,i.rotateStart=new THREE.Vector2,i.rotateEnd=new THREE.Vector2,i.rotateDelta=new THREE.Vector2,i.firstRotate=!0,i.dragLook=!0,i.lockHeightEnabled=!1,i.isLockHeight=!1,i.lockedHeight=0,i.pickEnabled=!0,i.defaultMovementSpeed=750,i.movementSpeed=i.defaultMovementSpeed,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.pickHelper.destroy(),this.pickHelper=null,this.selectPad&&(this.selectPad.destroy(),this.selectPad=null),this.timeId&&(clearTimeout(this.timeId),this.timeId=null),this._clock=null,this._animateBinded=null,this.mouseButtons=null,this.moveState=null,this.startPt=null,this.lastMousePoint=null,this.rotateStart=null,this.rotateEnd=null,this.rotateDelta=null,this._rotateStart=null,this._rotateEnd=null,this._rotateDelta=null,this._dollyStart=null,this._dollyEnd=null,this._dollyDelta=null,this._dollyCenter=null,this._panStart=null,this._panEnd=null,this._panDelta=null,this._pan=null,this._worldDimension=null,this.moveVector=null,this.rotationVector=null,this.rotateStart=null,this.rotateEnd=null,this.rotateDelta=null}},{key:"_animate",value:function(){this._reqid=requestAnimationFrame(this._animateBinded),this.updateWalkMove()}},{key:"_start",value:function(){this._animate()}},{key:"_stop",value:function(){cancelAnimationFrame(this._reqid)}},{key:"_updateMovement",value:function(){this.moveVector.x=-this.moveState.left+this.moveState.right,this.isLockHeight?this.moveVector.y=0:this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-this.moveState.forward+this.moveState.back}},{key:"_updateRotation",value:function(){s.EditorConfig.LockAxisZ?this.rotationVector.x=0:this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}},{key:"_doRotate",value:function(e){var t=this.cameraControl.getContainerDimensions(),i=t.width/2,r=t.height/2;this.moveState.yawLeft=-e.x/i,this.moveState.pitchDown=e.y/r,this._updateRotation()}},{key:"processMouseDown",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.lastMousePoint.set(e.clientX,e.clientY),this.firstRotate=!1,e.button===this.mouseButtons.ORBIT){if(s.EditorConfig.NoRotate)return;this.rotateStart.set(e.clientX,e.clientY),this.state=this.StateType.ROTATE,this.dispatchEvent({type:s.EVENTS.ON_EDITOR_BEGIN,name:"look",editor:this.name})}}},{key:"processMouseUp",value:function(e){return e.preventDefault(),e.stopPropagation(),this.pickEnabled&&(e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.RIGHT)&&Math.abs(this.lastMousePoint.x-e.clientX)<2&&Math.abs(this.lastMousePoint.y-e.clientY)<2?(this.state=this.StateType.NONE,void this.pickHelper.click(e)):(this.state===this.StateType.ROTATE&&(this.moveState.yawLeft=this.moveState.pitchDown=0,this.dispatchEvent({type:s.EVENTS.ON_EDITOR_END,name:"look",editor:this.name})),this.state=this.StateType.NONE,!0)}},{key:"processMouseMove",value:function(e){e.preventDefault(),this.dragLook&&this.state===this.StateType.ROTATE&&(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),this._doRotate(this.rotateDelta))}},{key:"processTouchstart",value:function(e){this.startPt.set(e.touches[0].clientX,e.touches[0].clientY),this.timeId&&clearTimeout(this.timeId);var t=this;switch(t.timeId=setTimeout(t.longTap,400),this.selectPad&&this.selectPad.hideOverlay(),e.touches.length){case 1:if(s.EditorConfig.NoRotate)return;this._rotateStart.set(e.touches[0].clientX,e.touches[0].clientY),this.state=this.StateType.ROTATE,console.log(this._rotateStart);break;case 2:if(!s.EditorConfig.NoPan){var i=.5*(e.touches[0].clientX+e.touches[1].clientX),r=.5*(e.touches[0].clientY+e.touches[1].clientY);this._panStart.set(i,r)}break;default:this.state=this.StateType.NONE}}},{key:"processTouchmove",value:function(e){this.timeId&&clearTimeout(this.timeId);var t=this.cameraControl;switch(e.preventDefault(),e.touches.length){case 1:this.dragLook&&this.state===this.StateType.ROTATE&&(this._rotateEnd.set(e.touches[0].clientX,e.touches[0].clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart),this._rotateStart.copy(this._rotateEnd),this._doRotate(this._rotateDelta));break;case 2:if(t.clearTouchRotateState(),!s.EditorConfig.NoPan){var i=.5*(e.touches[0].clientX+e.touches[1].clientX),r=.5*(e.touches[0].clientY+e.touches[1].clientY);if(this._panEnd.set(i,r),this._panDelta.subVectors(this._panEnd,this._panStart),Math.abs(this._panDelta.x)<3&&Math.abs(this._panDelta.y)<3)return;this._worldDimension.copy(t.getWorldDimension(i,r)),t.panOnWorld(this._panStart,this._panEnd,this._pan,this._worldDimension),t.adjustCameraForPan(this._pan),this._panStart.copy(this._panEnd),this.state=this.StateType.PAN}}t.touchUpdate()}},{key:"processTouchend",value:function(e){this.timeId&&clearTimeout(this.timeId),this.longTapFlag&&(this.longTapFlag=!1,e.preventDefault());var t=this.cameraControl;switch(e.touches.length){case 0:this.state=this.StateType.NONE,t.touchEndHandler(e);break;case 1:if(s.EditorConfig.NoRotate)return;this._rotateStart.set(e.touches[0].clientX,e.touches[0].clientY),this.state=this.StateType.ROTATE}}},{key:"processHover",value:function(e){e.preventDefault(),this.dragLook||(this.firstRotate&&(this.firstRotate=!1,this.rotateStart.set(e.clientX,e.clientY)),this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),this._doRotate(this.rotateDelta))}},{key:"processKeyDown",value:function(e){if(!s.EditorConfig.NoKey&&!e.altKey){var t=s.MoveDirection.NONE,i=s.Keys;switch(e.keyCode){case i.ZERO:this.movementSpeed=this.defaultMovementSpeed;break;case i.PLUS:this.movementSpeed*=1.1;break;case i.SUB:this.movementSpeed*=.9,this.movementSpeed<this.minMovementSpeed&&(this.movementSpeed=this.minMovementSpeed);break;case i.UP:case i.W:t=s.MoveDirection.FORWARD,this.moveState.forward=1;break;case i.DOWN:case i.S:t=s.MoveDirection.BACK,this.moveState.back=1;break;case i.LEFT:case i.A:t=s.MoveDirection.LEFT,this.moveState.left=1;break;case i.RIGHT:case i.D:t=s.MoveDirection.RIGHT,this.moveState.right=1;break;case i.Q:t=s.MoveDirection.UP,this.moveState.up=1;break;case i.E:t=s.MoveDirection.DOWN,this.moveState.down=1;break;case i.TAB:return this.moveVector.set(0,0,0),this.moveState.forward=0,this.moveState.back=0,this.moveState.left=0,this.moveState.right=0,this.moveState.up=0,void(this.moveState.down=0);default:return}this._updateMovement(),this._updateRotation(),t!==s.MoveDirection.NONE&&this.dispatchEvent({type:s.EVENTS.ON_EDITOR_KEYDOWN,event:e,direction:t,editor:this.name})}}},{key:"processKeyUp",value:function(e){if(!s.EditorConfig.NoKey){var t=s.MoveDirection.NONE,i=s.Keys;switch(e.keyCode){case i.UP:case i.W:t=s.MoveDirection.FORWARD,this.moveState.forward=0;break;case i.DOWN:case i.S:t=s.MoveDirection.BACK,this.moveState.back=0;break;case i.LEFT:case i.A:t=s.MoveDirection.LEFT,this.moveState.left=0;break;case i.RIGHT:case i.D:t=s.MoveDirection.RIGHT,this.moveState.right=0;break;case i.Q:t=s.MoveDirection.UP,this.moveState.up=0;break;case i.E:t=s.MoveDirection.DOWN,this.moveState.down=0;break;default:return}this._updateMovement(),this._updateRotation(),t!==s.MoveDirection.NONE&&this.dispatchEvent({type:s.EVENTS.ON_EDITOR_KEYUP,event:e,direction:t,editor:this.name})}}},{key:"updateWalkMove",value:function(){var e=this._clock.getDelta(),t=this.cameraControl,i=t.camera.position.y;if(0!==this.moveVector.x||0!==this.moveVector.y||0!==this.moveVector.z||0!==this.rotationVector.x||0!==this.rotationVector.y||0!==this.rotationVector.z||0!==this.zoomDelta||0!==t.gravity){var r=this.movementSpeed*s.EditorConfig.WalkSpeedRate*e;if(1==s.GlobalData.WalkingWithGravity&&(this.moveVector.y=0,t.computeManHeight(),t.computeGravity()),t.dirtyCamera(!0),0!==this.zoomDelta){var n=1+this.zoomDelta*e;t.zoomCameraForWalk(n),this.zoomDelta=0}t.translateCameraForWalk(this.moveVector,r),this.dragLook?t.rotateCameraForWalk(this.rotationVector,1):t.rotateCameraForWalk(this.rotationVector,2),t.flyOnWorld(!1);var a=t.viewer.modelManager;i!==t.camera.position.y&&a.dispatchEvent({type:s.EVENTS.ON_CAMERA_HEIGHT_CHANGED,cameraPosition:t.camera.position.clone()}),a.dispatchEvent({type:s.EVENTS.ON_EDITOR_WALKING})}}},{key:"onEnter",value:function(){var e=this.cameraControl.scene,t=this.cameraControl.getCamera();t.isPerspective||(console.log("Current camera is Orthographic"),t.toPerspective()),e.getBoundingBox().containsPoint(t.position)&&t.position.y!=t.target.y&&function(e){var t=e.target.clone().sub(e.position),i=t.length(),r=t.clone();r.y=0,r.normalize(),r.multiplyScalar(i),e.target.addVectors(e.position,r)}(t),this._start()}},{key:"onExit",value:function(){this._stop(),this.moveVector=new THREE.Vector3(0,0,0),this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}}},{key:"rotateTo",value:function(e){this._doRotate(e)}},{key:"moveTo",value:function(e,t,i){if(void 0===i&&(i=!0),void 0===t&&(t=1),i)switch(e){case s.MoveDirection.FORWARD:this.moveState.forward=t;break;case s.MoveDirection.BACK:this.moveState.back=t;break;case s.MoveDirection.LEFT:this.moveState.left=t;break;case s.MoveDirection.RIGHT:this.moveState.right=t;break;case s.MoveDirection.UP:this.moveState.up=t;break;case s.MoveDirection.DOWN:this.moveState.down=t}else switch(e){case s.MoveDirection.FORWARD:this.moveState.forward=0;break;case s.MoveDirection.BACK:this.moveState.back=0;break;case s.MoveDirection.LEFT:this.moveState.left=0;break;case s.MoveDirection.RIGHT:this.moveState.right=0;break;case s.MoveDirection.UP:this.moveState.up=0;break;case s.MoveDirection.DOWN:this.moveState.down=0}this._updateMovement()}},{key:"setHeightLocked",value:function(e){this.lockHeightEnabled&&this.isLockHeight!==e&&(this.isLockHeight=e)}},{key:"setDragLook",value:function(e){this.dragLook!==e&&(this.firstRotate=!0,this.dragLook=e)}}]),t}(s.BaseEditor);s.WalkEditor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.isMeterUnit=e.viewer.modelManager.isMeterUnit(),i.object=null,i.unitRate=i.isMeterUnit?.001:1,i.cameraDis=5e3*i.unitRate,i.minZoomDis=3e3*i.unitRate,i.rotatePivot=new THREE.Vector3,i.objectId=null,i.externalObjectManager=null,i.mixer=null,i.actions=[],i.prepared=!1,i.rotating=!1,i.poseEnum={walk:0,run:1,stand:2},i.poseIndex=0,i.walkIndex=3,i.rotateQuaternion=new THREE.Quaternion,i.tmpVec=new THREE.Vector3,i.objectDirection=new THREE.Vector3(0,-1,0),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.object=null,this.rotatePivot=null,this.objectId=null,
this.externalObjectManager=null,this.mixer=null,this.actions=null}},{key:"_doRotate",value:function(e){this.cameraControl.processRotate(e,this.cameraControl.viewer.worldToDrawing(this.rotatePivot)),this.updateRotateForObject(),this.cameraControl.updateCamera(),this.rotating=!0}},{key:"processMouseUp",value:function(e){return e.preventDefault(),e.stopPropagation(),this.rotating=!1,this.pickEnabled&&(e.button===THREE.MOUSE.LEFT||e.button===THREE.MOUSE.RIGHT)&&Math.abs(this.lastMousePoint.x-e.clientX)<2&&Math.abs(this.lastMousePoint.y-e.clientY)<2?(this.state=this.StateType.NONE,void this.pickHelper.click(e)):(this.state===this.StateType.ROTATE&&(this.moveState.yawLeft=this.moveState.pitchDown=0),this.state=this.StateType.NONE,!0)}},{key:"processMouseWheel",value:function(e){var t=this.cameraControl;if(e.preventDefault(),e.stopPropagation(),!s.EditorConfig.NoZoom){var i=e.wheelDelta||e.detail;if(i=Math.abs(i)>10?i:40*-i,i*=this.wheelZoomFactor,s.EditorConfig.ReverseWheelDirection&&(i*=-1),this.zoomDelta=i,!s.GlobalData.ConstraintZoom||t.cameraWithinMaximumRange())if(this.prepared){var r=this.object.box.getCenter();r.z=.94*this.object.box.max.z,(i<0||i>0&&t.camera.getDistanceByPos(r,t.scene.getMatrixGlobal())>this.minZoomDis)&&t.zoomWithCenter(i,r)}else t.zoom(i,e.clientX,e.clientY);else t.resetCameraToMaximumRange();t.delayHandle(),t.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_EDITOR_ZOOM})}}},{key:"updateWalkMove",value:function(){if(this.prepared){var e=this._clock.getDelta();this.mixer.update(e),this.object.updateMatrixWorld();var t=this.cameraControl,i=t.camera.position.y;if(0===this.moveVector.x&&0===this.moveVector.y&&0===this.moveVector.z&&!this.rotating&&0===t.gravity)return this.changePose(this.poseEnum.stand),void t.flyOnWorld(!1);this.object.visible&&this.changePose(this.walkIndex);var r=this.movementSpeed*s.EditorConfig.WalkSpeedRate*e;1==s.GlobalData.WalkingWithGravity&&(this.moveVector.y=0,t.computeManHeight(this.object),t.computeGravity(this.object)),t.dirtyCamera(!0),t.translateCameraForWalk(this.moveVector,r,this.object);var n=this.object.position;this.rotatePivot.set(n.x,n.y,n.z),this.externalObjectManager.setTransform(this.objectId,void 0,void 0,this.rotateQuaternion),t.flyOnWorld(!1);var a=t.viewer.modelManager;i!==t.camera.position.y&&a.dispatchEvent({type:s.EVENTS.ON_CAMERA_HEIGHT_CHANGED,cameraPosition:t.camera.position.clone()}),a.dispatchEvent({type:s.EVENTS.ON_EDITOR_WALKING})}}},{key:"updateRotateForObject",value:function(e,t){var i=this.cameraControl;this.tmpVec.subVectors(t||i.camera.target,e||i.camera.position);var r=i.viewer.drawingToWorld(this.tmpVec);r.z=0,r.normalize(),this.rotateQuaternion.setFromUnitVectors(this.objectDirection,r)}},{key:"setThirdPerson",value:function(e,t,i,r){this.object=e,this.object.visible=!1,this.object.traverse(function(e){e.frustumCulled=!1}),this.objectId=t,this.externalObjectManager=i,this.mixer=new THREE.AnimationMixer(this.object);var n=THREE.AnimationUtils.subclip(this.object.animations[0],"walk",0,30,30),a=THREE.AnimationUtils.subclip(this.object.animations[0],"run",141,200,30),o=THREE.AnimationUtils.subclip(this.object.animations[0],"stand",65,66,30);this.actions=[],this.actions[this.poseEnum.walk]=this.mixer.clipAction(n),this.actions[this.poseEnum.run]=this.mixer.clipAction(a),this.actions[this.poseEnum.stand]=this.mixer.clipAction(o),this.actions[this.poseEnum.stand].play(),this.prepare(r);var s=new THREE.Vector3(0,.5*e.box.getSize().y,0);this.distanceTol=Math.abs(this.cameraControl.scene.worldToDrawing(s).z)}},{key:"_initializeObject",value:function(){var e=this.cameraControl,t=this.object;t.visible=!0,t.disPickable=!0;var i=e.scene.getMatrixGlobal(),r=e.camera.getPositionByDis(this.cameraDis,i);this.updateRotateForObject();var n=1e3*this.unitRate;this.externalObjectManager.setTransform(this.objectId,r,new THREE.Vector3(n,n,n),this.rotateQuaternion),this.rotatePivot.set(r.x,r.y,r.z),this.changePose(this.poseEnum.stand),this.object.updateMatrixWorld(),e.flyOnWorld(!1)}},{key:"prepare",value:function(e){var t=this;this.object.visible=!1,this._initializeCamera(function(){t.walkIndex=e?t.poseEnum.run:t.poseEnum.walk,t._initializeObject(),t.prepared=!0,t.oldHitDetection=s.GlobalData.EnableHitDetection,t.oldGravity=s.GlobalData.WalkingWithGravity,s.GlobalData.EnableHitDetection=!0,s.GlobalData.WalkingWithGravity=!0,t.oldCollisionDis=t.cameraControl.collisionManager.getDistance(),t.cameraControl.collisionManager.setDistance((e?8:1)+t.distanceTol)})}},{key:"onExit",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onExit",this).call(this),this.prepared=!1,this.object.visible=!1,s.GlobalData.EnableHitDetection=this.oldHitDetection,s.GlobalData.WalkingWithGravity=this.oldGravity,this.cameraControl.collisionManager.setDistance(this.oldCollisionDis),this.cameraControl.flyOnWorld(!1)}},{key:"changePose",value:function(e){if(this.poseIndex!=e){var t=this.actions[this.poseIndex],i=this.actions[e],r=1*this.unitRate/s.EditorConfig.WalkSpeedRate;t.fadeOut(r),i.reset(),i.setEffectiveTimeScale(1),i.setEffectiveWeight(1),i.fadeIn(r),i.play(),this.poseIndex=e}}},{key:"_initializeCamera",value:function(e){if(this.prepared)return void(e&&e());var t=this.cameraControl.camera,i=this.cameraControl.viewer,r=t.position,n=this.cameraControl.scene.getBoundingBox(),a=(this.cameraControl.scene.getBoundingBoxWorld(),new THREE.Vector3(r.x,n.max.y,r.z)),o=function(e,t){var i=e.x<t.min.x?0:1,r=e.x<t.max.x?0:2,n=e.z<t.min.z?0:4,a=e.z<t.max.z?0:8,o=t.max.y,s=i|r|n|a,l=e;switch(s){case 0:l=new THREE.Vector3(t.min.x,o,t.min.z);break;case 1:l=new THREE.Vector3(e.x,o,t.min.z);break;case 3:l=new THREE.Vector3(t.max.x,o,t.min.z);break;case 4:l=new THREE.Vector3(t.min.x,o,e.z);break;case 7:l=new THREE.Vector3(t.max.x,o,e.z);break;case 12:l=new THREE.Vector3(t.min.x,o,t.max.z);break;case 13:l=new THREE.Vector3(e.x,o,t.max.z);break;case 15:l=new THREE.Vector3(t.max.x,o,t.max.z)}return l}(a,n),s=o.equals(a)?t.target.clone():n.getCenter();s.y=o.y;var l=this.cameraControl.scene.getMatrixGlobal(),u=t.getPositionByDis(this.cameraDis,l,o,s);u.z=i.drawingToWorld(o).z,this.updateRotateForObject(o,s);var c=1e3*this.unitRate;this.externalObjectManager.setTransform(this.objectId,u,new THREE.Vector3(c,c,c),this.rotateQuaternion),this.cameraControl.computeManHeight(this.object),this.cameraControl.computeGravity(this.object),o.y-=this.cameraControl.gravity*i.getScene().getGlobalScaleFactor(),s.y=o.y,this.cameraControl.gravity=0;var h={position:t.position.clone(),target:t.target.clone(),up:t.realUp.clone()||t.up.clone(),zoom:t.zoom},d={position:o,target:s,up:new THREE.Vector3(0,1,0),zoom:t.zoom};i.animator.active(h,d,i,function(e){i.cameraControl.update(!0,!0)},function(){e&&e()})}}]),t}(s.WalkEditor);s.ThirdPersonWalkEditor=e}(),s.EditorManager=function(){function e(e){n(),o=!0,l.isUpdateRenderList=!1,l.editor.processMouseDown(e)}function t(e){l.editor.name==s.EditorMode.THIRDPERSONWALK&&n(),o?(l.isUpdateRenderList=!1,l.cameraChange=!0,l.editor.processMouseMove(e)):l.editor.processHover(e)}function i(e){l.isUpdateRenderList=!0,o&&(l.editor.processMouseUp(e),o=!1)}function r(r){if(!l.enabled)return void(l.cameraChange=!1);for(var n=l.tools,a=n.length-1;a>=0;a--)if(n[a].onEvent(r)){switch(r.type){case"mouseup":o=!1;for(var s=n.length-1;s>=0;s--)n[s]._mousePressed=!1}return}switch(r.type){case"touchmove":l.editor.processTouchmove(r);break;case"touchstart":l.editor.processTouchstart(r);break;case"touchend":l.editor.processTouchend(r);break;case"keydown":l.editor.processKeyDown(r);break;case"keyup":l.editor.processKeyUp(r);break;case"mousewheel":case"DOMMouseScroll":l.cameraChange=!0,l.editor.processMouseWheel(r);break;case"mousedown":e(r);break;case"mousemove":t(r);break;case"mouseup":i(r);break;case"dblclick":l.editor.processMouseDoubleClick(r)}}function n(){if(l.domElement){var e=l.domElement.querySelector("#cloud-main-canvas");e&&e.focus&&e.focus()}}function a(e){e.preventDefault()}this.editor=null,this.editors={},this.tools=[],this.domElement=null,this.enabled=!0,this.isUpdateRenderList=!0;var o=!1,l=this;this.registerDomEventListeners=function(e){this.domElement=e,e.addEventListener("touchstart",r,!1),e.addEventListener("touchend",r,!1),e.addEventListener("touchmove",r,!1),e.addEventListener("contextmenu",a,!1),e.addEventListener("mousedown",r,!1),e.addEventListener("mousewheel",r,!1),e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener("dblclick",r,!1),window.addEventListener("mousemove",r,!1),window.addEventListener("mouseup",r,!1),e.addEventListener("keydown",r,!1),e.addEventListener("keyup",r,!1),n()},this.unregisterDomEventListeners=function(e){e.removeEventListener("touchstart",r,!1),e.removeEventListener("touchend",r,!1),e.removeEventListener("touchmove",r,!1),e.removeEventListener("contextmenu",a,!1),e.removeEventListener("mousedown",r,!1),e.removeEventListener("mousewheel",r,!1),e.removeEventListener("DOMMouseScroll",r,!1),e.removeEventListener("dblclick",r,!1),window.removeEventListener("mousemove",r,!1),window.removeEventListener("mouseup",r,!1),e.removeEventListener("keydown",r,!1),e.removeEventListener("keyup",r,!1)}},s.EditorManager.prototype={constructor:s.EditorManager,destroy:function(){for(var e in this.editors){this.editors[e].destroy()}this.editors=null,this.editor=null;for(var t=0,i=this.tools.length;t<i;t++)this.tools[t].destroy();this.tools=null,this.unregisterDomEventListeners(this.domElement),this.domElement=null},getCurrentEditorName:function(){return this.editor?this.editor.name:""},_getEditorByName:function(e,t){var i=this.editors[t];if(i)return i;var r=s.EditorMode;this.viewer=e;var n=e.cameraControl;e.getScene(),e.domElement;switch(t){case r.ORBIT:i=new s.OrbitEditor(n);break;case r.PICK:i=new s.PickEditor(n);break;case r.PAN:i=new s.PanEditor(n);break;case r.ZOOM:i=new s.ZoomEditor(n);break;case r.FLY:i=new s.FlyEditor(n);break;case r.WALK:i=new s.WalkEditor(n);break;case r.THIRDPERSONWALK:i=new s.ThirdPersonWalkEditor(n);break;default:i=null,console.error("invalid editor name")}return i&&(i.name=t,this.editors[t]=i),i},getCurrentEditor:function(){return this.editor},setEditorMode:function(e,t){var i=this._getEditorByName(e,t);i&&this.editor!==i&&(null!==this.editor&&(this.editor.dispatchEvent({type:s.EVENTS.ON_EDITOR_EXIST,name:this.editor.getName()}),this.editor.onExit()),this.editor=i,this.editor.onEnter(),this.editor.dispatchEvent({type:s.EVENTS.ON_EDITOR_ENTER,name:this.editor.getName()}))},getToolByName:function(e){for(var t=this.tools.length,i=0;i<t;++i)if(this.tools[i].name==e)return this.tools[i]},enableTool:function(e,t){for(var i=s.EditToolMode,r=this.tools,n=0,a=r.length;n<a;n++)if(r[n].name==t)return;var o=null;switch(t){case i.PICK_BY_RECT:o=new s.RectPickTool(e);break;case i.ZOOM_BY_RECT:o=new s.RectZoomTool(e);break;case i.CLIP_BY_BOX:o=new s.ClipPlanesTool(e);break;case i.CLIP_FILL:o=new s.FillClipPlaneTool(e);break;case i.PICK_BY_MEASURE:o=new s.MeasureTool(e);break;case i.VIEW_SHED_ANALYSIS:o=new s.ViewshedTool(e);break;case i.VOLUME_MEASURE:o=new s.VolumeMeasureTool(e)}o&&r.push(o)},disableTool:function(e){for(var t=this.tools,i=0,r=t.length;i<r;i++)if(t[i].name==e){t[i].onExit(),t.splice(i,1);break}},setInteractiveState:function(e){this.enabled=e}},function(){var e=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.cameraControl=t.cameraControl,this.dim=this.cameraControl.getContainerDimensions(),this.pad=null,this.padSize=96,this.startPt=new THREE.Vector2,this.position=new THREE.Vector2,this.callback=null,this.intersect=null,this.init(),this.padInitBind=this.padInit.bind(this),this.padOnTouchStartBind=this.onTouchStart.bind(this),this.padOnTouchEndBind=this.onTouchEnd.bind(this),this.padOnTouchMoveBind=this.onTouchMove.bind(this)}return _createClass(e,[{key:"destroy",value:function(){this.editor=null,this.cameraControl=null,this.dim=null,this.pad=null,this.startPt=null,this.position=null,this.callback=null,this.intersect=null}},{key:"init",value:function(){window.addEventListener("resize",this.padInitBind,!1),this.pad=document.createElement("div"),this.padInit(),this.cameraControl.domElement.appendChild(this.pad),this.addEventListener()}},{key:"addEventListener",value:function(){this.pad.addEventListener("touchstart",this.padOnTouchStartBind,!1),this.pad.addEventListener("touchmove",this.padOnTouchMoveBind,!1),this.pad.addEventListener("touchend",this.padOnTouchEndBind,!1)}},{key:"padInit",value:function(){null!=this.pad&&(this.pad.style.backgroundImage="url(images/selectPad.png)",this.pad.style.backgroundSize="100%",this.pad.style.position="absolute",this.pad.style.width=this.padSize.toString()+"px",this.pad.style.height=this.padSize.toString()+"px",this.pad.style.zIndex="10",this.pad.style.display="none")}},{key:"showOverlay",value:function(e){this.position=e,this.pad.style.left=this.position.x.toString()+"px",this.pad.style.top=(this.position.y-this.dim.top).toString()+"px",this.pad.style.display=""}},{key:"hideOverlay",value:function(){this.pad.style.display="none"}},{key:"pick",value:function(){var e=this.position.x,t=this.position.y,i=this.cameraControl,r=(this.editor.pickHelper,i.viewer.modelManager.sceneState),n=this,a=new THREE.Vector2(e,t),o=i.getIntersectContext(a);i.intersector.pick(o,function(e){if(r.clearSelection(),!e)return i.updateView(!0),void(n.intersect=null);var t=e.userId;i.viewer.getScene().intersectToWorld(e,i.viewer),r.addSelection([t]),n.intersect=e,i.updateView(!0)}),null!=n.intersect&&(n.intersect.cx=e,n.intersect.cy=t)}},{key:"onTouchStart",value:function(e){1===e.touches.length&&(e.stopPropagation(),e.preventDefault(),this.startPt.set(e.touches[0].clientX,e.touches[0].clientY))}},{key:"onTouchMove",value:function(e){if(1===e.touches.length){e.stopPropagation(),e.preventDefault();var t=e.touches[0].clientX-this.startPt.x,i=e.touches[0].clientY-this.startPt.y;this.position.x+=t,this.position.y+=i,this.pad.style.left=this.position.x.toString()+"px",this.pad.style.top=(this.position.y-this.dim.top).toString()+"px",this.startPt.set(e.touches[0].clientX,e.touches[0].clientY),this.pick(e)}}},{key:"onTouchEnd",value:function(e){e.stopPropagation(),null!=this.callback?this.callback(this.intersect):console.log("selectPad click",this.intersect)}}]),e}();s.SelectPad=e}(),function(){function e(e,t,i){return t<=e&&e<=i}function t(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){for(var t=String(e),i=t.length,r=0,n=[];r<i;){var a=t.charCodeAt(r);if(a<55296||a>57343)n.push(a);else if(56320<=a&&a<=57343)n.push(65533);else if(55296<=a&&a<=56319)if(r===i-1)n.push(65533);else{var o=e.charCodeAt(r+1);if(56320<=o&&o<=57343){var s=1023&a,l=1023&o;n.push(65536+(s<<10)+l),r+=1}else n.push(65533)}r+=1}return n}function r(e){for(var t="",i=0;i<e.length;++i){var r=e[i];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}function n(e){this.tokens=[].slice.call(e)}function a(e,t){if(e)throw TypeError("Decoder error");return t||65533}function o(e,i){if(!(this instanceof o))return new o(e,i);if((e=void 0!==e?String(e).toLowerCase():f)!==f)throw new Error("Encoding not supported. Only utf-8 is supported");i=t(i),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(i.fatal),this._ignoreBOM=Boolean(i.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function s(e,i){if(!(this instanceof s))return new s(e,i);if((e=void 0!==e?String(e).toLowerCase():f)!==f)throw new Error("Encoding not supported. Only utf-8 is supported");i=t(i),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(i.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(t){var i=t.fatal,r=0,n=0,o=0,s=128,l=191;this.handler=function(t,u){if(u===h&&0!==o)return o=0,a(i);if(u===h)return d;if(0===o){if(e(u,0,127))return u;if(e(u,194,223))o=1,r=u-192;else if(e(u,224,239))224===u&&(s=160),237===u&&(l=159),o=2,r=u-224;else{if(!e(u,240,244))return a(i);240===u&&(s=144),244===u&&(l=143),o=3,r=u-240}return r<<=6*o,null}if(!e(u,s,l))return r=o=n=0,s=128,l=191,t.prepend(u),a(i);if(s=128,l=191,n+=1,r+=u-128<<6*(o-n),n!==o)return null;var c=r;return r=o=n=0,c}}function u(t){t.fatal;this.handler=function(t,i){if(i===h)return d;if(e(i,0,127))return i;var r,n;e(i,128,2047)?(r=1,n=192):e(i,2048,65535)?(r=2,n=224):e(i,65536,1114111)&&(r=3,n=240);for(var a=[(i>>6*r)+n];r>0;){var o=i>>6*(r-1);a.push(128|63&o),r-=1}return a}}function c(){if("undefined"!=typeof self)return self;if("undefined"!=typeof global)return global;throw new Error("No global found")}var h=-1;n.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():h},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var d=-1,f="utf-8";o.prototype={decode:function(e,i){var a;a="object"===(void 0===e?"undefined":_typeof(e))&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===(void 0===e?"undefined":_typeof(e))&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),i=t(i),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(i.stream);for(var o,s=new n(a),u=[];!s.endOfStream()&&(o=this._decoder.handler(s,s.read()))!==d;)null!==o&&(Array.isArray(o)?u.push.apply(u,o):u.push(o));if(!this._streaming){do{if((o=this._decoder.handler(s,s.read()))===d)break;null!==o&&(Array.isArray(o)?u.push.apply(u,o):u.push(o))}while(!s.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),r(u)}},s.prototype={encode:function(e,r){e=e?String(e):"",r=t(r),this._streaming||(this._encoder=new u(this._options)),this._streaming=Boolean(r.stream);for(var a,o=[],s=new n(i(e));!s.endOfStream()&&(a=this._encoder.handler(s,s.read()))!==d;)Array.isArray(a)?o.push.apply(o,a):o.push(a);if(!this._streaming){for(;;){if((a=this._encoder.handler(s,s.read()))===d)break;Array.isArray(a)?o.push.apply(o,a):o.push(a)}this._encoder=null}return new Uint8Array(o)}},"function"!=typeof TextDecoder&&(c().TextDecoder=o),"function"!=typeof TextEncoder&&(c().TextEncoder=s)}();var h=function(){function e(){_classCallCheck(this,e),this.utf8Decoder=new TextDecoder("utf-8")}return _createClass(e,[{key:"parse",value:function(e){if(!e)return Promise.reject(e);var t=new DataView(e),i=0,r={},n={},a={};if(r.magic=this.utf8Decoder.decode(new Uint8Array(e,i,4)),i+=4,r.magic){if(r.version=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.byteLength=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.FTJSONLength=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.FTBinaryLength=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.BTJSONLength=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.BTBinaryLength=t.getUint32(i,!0),i+=Uint32Array.BYTES_PER_ELEMENT,r.FTBinaryLength>0&&(a=this.parseFeatureBinary(e,i,r.FTJSONLength)),r.BTJSONLength>0){var o=28+r.FTJSONLength+r.FTBinaryLength;n=BatchTableParser.parse(e.slice(o,r.BTJSONLength+o))}var s={point:a,batchTable:n};return Promise.resolve(s)}throw new Error("Invalid pnts file.")}},{key:"parseFeatureBinary",value:function(e,t,i){var r=new THREE.BufferGeometry,n=this.utf8Decoder.decode(new Uint8Array(e,t,i)),a=JSON.parse(n),o=void 0;if(a.POINTS_LENGTH&&(o=a.POINTS_LENGTH),a.POSITION){var s=a.POSITION.byteOffset+n.length+t,l=new Float32Array(e,s,3*o);r.addAttribute("position",new THREE.BufferAttribute(l,3))}if(a.RGB){var u=a.RGB.byteOffset+n.length+t,c=new Uint8Array(e,u,3*o);r.addAttribute("color",new THREE.BufferAttribute(c,3,!0))}if(a.POSITION_QUANTIZED)throw new Error("For pnts loader, POSITION_QUANTIZED: not yet managed");if(a.RGBA)throw new Error("For pnts loader, RGBA: not yet managed");if(a.RGB565)throw new Error("For pnts loader, RGB565: not yet managed");if(a.NORMAL){var h=a.RGB.byteOffset+n.length+t,d=new Float32Array(e,h,3*o);r.addAttribute("normal",new THREE.BufferAttribute(d,3))}if(a.NORMAL_OCT16P)throw new Error("For pnts loader, NORMAL_OCT16P: not yet managed");if(a.BATCH_ID)throw new Error("For pnts loader, BATCH_ID: not yet managed");return{geometry:r,offset:a.RTC_CENTER?(new THREE.Vector3).fromArray(a.RTC_CENTER):void 0}}}]),e}();s.PntsParser=h;var d=function(){function e(t,i){_classCallCheck(this,e),this.tileset=t,this.baseURL=i,this.counter=1,this.index={},this.inverseTileTransform=new THREE.Matrix4,this.recurse(t.root,i)}return _createClass(e,[{key:"recurse",value:function(e,t,i){if(e.transform=e.transform?(new THREE.Matrix4).fromArray(e.transform):void 0,e._worldFromLocalTransform=e.transform,i&&i._worldFromLocalTransform&&(e.transform?e._worldFromLocalTransform=(new THREE.Matrix4).multiplyMatrices(i._worldFromLocalTransform,e.transform):e._worldFromLocalTransform=i._worldFromLocalTransform),(e.viewerRequestVolume&&e.viewerRequestVolume.region||e.boundingVolume.region)&&(e._worldFromLocalTransform?this.inverseTileTransform.getInverse(e._worldFromLocalTransform):this.inverseTileTransform.identity()),e.viewerRequestVolume=e.viewerRequestVolume?this.getBox(e.viewerRequestVolume,this.inverseTileTransform):void 0,e.boundingVolume=this.getBox(e.boundingVolume,this.inverseTileTransform),this.index[this.counter]=e,e.tileId=this.counter,e.baseURL=t,e.points=void 0,e.b3dm=void 0,this.counter++,e.children){var r=!0,n=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.recurse(l,t,e)}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}}}},{key:"getBox",value:function(e,t){if(e.region){var i=e.region;extent.set(THREE.Math.radToDeg(i[0]),THREE.Math.radToDeg(i[2]),THREE.Math.radToDeg(i[1]),THREE.Math.radToDeg(i[3]));var r=(new OBB).setFromExtent(extent);return r.matrix.premultiply(t),r.matrix.decompose(r.position,r.quaternion,r.scale),{region:r}}if(e.box){var n=e.box,a=new THREE.Vector3(n[0],n[1],n[2]),o=a.x-n[3],s=a.x+n[3],l=a.y-n[7],u=a.y+n[7],c=a.z-n[11],h=a.z+n[11];return{box:new THREE.Box3(new THREE.Vector3(o,l,c),new THREE.Vector3(s,u,h))}}if(e.sphere){return{sphere:new THREE.Sphere(new THREE.Vector3(e.sphere[0],e.sphere[1],e.sphere[2]),e.sphere[3])}}}}]),e}();s.ExtendTileset=d;var f=function(){function e(t,i){_classCallCheck(this,e),this.unitScale=i,this.pntParser=new h,this.utf8Decoder=new TextDecoder("utf-8"),this.tileIndexMap={},this.rootPntUrl=void 0,this.maximumScreenSpaceError=void 0===t?5:t,this.loadPromises=[],this.camera=void 0,this.globalInverseMatrix=new THREE.Matrix4,this.box=null,this.loadJsonPromises=[],this.pntFileList={}}return _createClass(e,[{key:"loadPntTotalJson",value:function(e,t){var i=this;return i.loadPromises=[],this.rootPntUrl=e.slice(0,e.lastIndexOf("/")+1),new Promise(function(r,n){(new THREE.FileLoader).load(e,function(e){var n=JSON.parse(e);i.box=n.root.boundingVolume.box,t&&t(i.box),i.parseTilesJson(n.root);var a=Promise.all(i.loadJsonPromises.map(function(e){return e.catch(function(e){return e})})),o=new s.TaskManager;a.then(function(e){var t=0;for(var n in i.tileIndexMap){var a=i.tileIndexMap[n],l=n.slice(0,n.lastIndexOf("/")+1);for(var u in a.index){var c=l+a.index[u].content.url;o.addTask(t),i.pntFileList[t]={},i.pntFileList[t].jsonUrl=n,i.pntFileList[t].pntUrl=c,i.pntFileList[t].index=u,t++}}o.processTasks(i.loadPnt.bind(i),void 0,function(e){var t={};for(var n in i.pntFileList){var a=i.pntFileList[n].jsonUrl;if(!(a in t)){var o=new s.ObjectGroup(s.ObjectGroupType.EXTRUDEBODYMANAGER,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0});t[a]=o}i.tileIndexMap[a].index[i.pntFileList[n].index].points=i.pntFileList[n].result,t[a].add(i.pntFileList[n].result)}var l=[];for(var a in t)l.push(t[a]);r(l)})})})})}},{key:"parseTilesJson",value:function(e){var t=this;if(e.content&&e.content.url){var i=this.rootPntUrl+e.content.url;t.loadTileSetJson(i)}if(e.children){var r=!0,n=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.parseTilesJson(l)}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}}}},{key:"loadTileSetJson",value:function(e){var t=this,i=new Promise(function(i,r){var n=new THREE.FileLoader;n.setResponseType("json"),n.load(e,function(n){if(null===n||void 0===n)r(n);else{var a=new d(n,"");t.tileIndexMap[e]=a;a.index[1],e.slice(0,e.lastIndexOf("/")+1);i(a)}},void 0,function(t){r(data),console.error("Load "+e+" failed, "+t)})});return t.loadJsonPromises.push(i),i}},{key:"ProcessTileIndexs",value:function(e,t){this.camera=e,this.globalInverseMatrix=t;for(var i in this.tileIndexMap){var r=this.tileIndexMap[i],n=r.index[1];this.ProcessNode(n,i)}}},{key:"ProcessNode",value:function(e,t,i){e.visible=!1;var r=this.tileIndexMap[t].index[e.tileId].points;if(void 0!=r){r.visible=!1;if(this.$3dTilesSubdivisionControl(this.camera,e)&&(r.visible=!0,e.visible=!0),void 0!=i)if("ADD"===i.refine.toUpperCase());else{i.visible=!1;var n=this.tileIndexMap[t].index[i.tileId];n.visible=!1}if(e.children){var a=!0,o=!1,s=void 0;try{for(var l,u=e.children[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this.ProcessNode(c,t,e)}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}}}}},{key:"$3dTilesSubdivisionControl",value:function(e,t){return this.computeNodeSSE(e,t)>this.maximumScreenSpaceError}},{key:"computeNodeSSE",value:function(e,t){var i=new THREE.Box3,r=new THREE.Sphere,n=e.position.clone();if(n.multiplyScalar(1/this.unitScale),n.applyMatrix4(this.globalInverseMatrix),t.distance=0,t.boundingVolume.region)i.copy(t.boundingVolume.region.box3D),i.applyMatrix4(t.boundingVolume.region.matrixWorld),t.distance=i.distanceToPoint(n);else if(t.boundingVolume.box)i.copy(t.boundingVolume.box),t.matrixWorld&&i.applyMatrix4(t.matrixWorld),t.distance=i.distanceToPoint(n);else{if(!t.boundingVolume.sphere)return 1/0;r.copy(t.boundingVolume.sphere),r.applyMatrix4(t.matrixWorld),t.distance=Math.max(0,r.distanceToPoint(n))}return 0===t.distance?1/0:(t.geometricError-0<1e-4&&(t.geometricError=1),e._preSSE*(t.geometricError/t.distance))}},{key:"updatePreSse",value:function(e,t){var i=e.fov,r=THREE.Math.degToRad(i),n=t/(2*Math.tan(.5*r));e._preSSE=n}},{key:"loadPnt",value:function(e,t){var i=this,r=i.pntFileList[e].pntUrl;return new Promise(function(n,a){var o=new THREE.FileLoader;o.setResponseType("arraybuffer"),o.load(r,function(n){if(void 0!==n){var a=i.utf8Decoder.decode(new Uint8Array(n,0,4));if("{"===a[0]){n=JSON.parse(i.utf8Decoder.decode(new Uint8Array(n)));r.slice(0,r.lastIndexOf("/")+1)}else if("b3dm"==a)console.log("b3dm is load");else{if("pnts"!=a)return Promise.reject("Unsupported magic code "+a);console.log("pnts is load")}i.pntParser.parse(n).then(function(n){var a=new THREE.PointsMaterial({size:.05,vertexColors:THREE.VertexColors}),o=new THREE.Points(n.point.geometry,a);n.point.offset&&o.position.copy(n.point.offset),o.visible=!1,o.name=r,i.pntFileList[e].result=o,t()})}},void 0,function(e){a(void 0)})})}},{key:"loadPntByPromise",value:function(e){var t=this;return new Promise(function(i,r){var n=new THREE.FileLoader;n.setResponseType("arraybuffer"),n.load(e,function(r){if(void 0!==r){var n=t.utf8Decoder.decode(new Uint8Array(r,0,4));if("{"===n[0]){r=JSON.parse(t.utf8Decoder.decode(new Uint8Array(r)));e.slice(0,e.lastIndexOf("/")+1)}else if("b3dm"==n)console.log("b3dm is load");else{if("pnts"!=n)return Promise.reject("Unsupported magic code "+n);console.log("pnts is load")}t.pntParser.parse(r).then(function(t){var r=new THREE.PointsMaterial({size:.05,vertexColors:THREE.VertexColors}),n=new THREE.Points(t.point.geometry,r);t.point.offset&&n.position.copy(t.point.offset),n.visible=!1,n.name=e,i(n)})}},void 0,function(e){r(void 0)})})}},{key:"loadPntTotalJsonByPromise",value:function(e,t){var i=this;return i.loadPromises=[],this.rootPntUrl=e.slice(0,e.lastIndexOf("/")+1),new Promise(function(r,n){(new THREE.FileLoader).load(e,function(e){var n=JSON.parse(e);i.box=n.root.boundingVolume.box,t&&t(i.box),i.parseTilesJson(n.root),Promise.all(i.loadJsonPromises.map(function(e){return e.catch(function(e){return e})})).then(function(e){var t=[];for(var n in i.tileIndexMap)!function(e){i.urlPointGroupMap[e]={};var r=i.tileIndexMap[e],n=e.slice(0,e.lastIndexOf("/")+1);for(var a in r.index)!function(a){var o=n+r.index[a].content.url;t.push(i.loadPnt(o).then(function(t){return{url:e,context:{index:a,result:t}}}))}(a)}(n);Promise.all(t.map(function(e){return e.catch(function(e){return e})})).then(function(e){for(var t in i.urlPointGroupMap){var n=new s.ObjectGroup(s.ObjectGroupType.EXTRUDEBODYMANAGER,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0});i.urlPointGroupMap[t]=n}var a=!0,o=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;void 0!==h&&(i.tileIndexMap[h.url].index[h.context.index].points=h.context.result,i.urlPointGroupMap[h.url].add(h.context.result))}}catch(e){o=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}var d=[];for(var f in i.urlPointGroupMap)d.push(i.urlPointGroupMap[f]);r(d)})}).catch(function(e){console.log("promise reject failed reason",e)})})})}}]),e}();s.PntLoader=f,s.Version="1.0.0.20200210",s.GlobalData={SceneSize:1e3,TextureResRoot:"images/",EnableTextureMapping:!1,EnableTextureLoading:!0,MaxTexturePixels:25e4,EnableLightmap:!1,LightmapIntensity:1,ClippingCaps:!1,SelectionColor:{color:1170103,side:THREE.DoubleSide},DisableAntialias:!1,EnableDemolishByDClick:!1,IsMobile:!1,WorkersRoot:"../libs/",EnableWorker:!1,ZipResourcePostfix:".gz",JsonResourcePostfix:".json",HasLayerData:!1,Instance:!0,InstanceAsyncProcessing:!1,InstanceAsyncProcessingStep:500,InstanceSharedMeshEnabled:!1,InstanceSharedMeshThreshold:100,DataProvider:0,Renderer:0,MaxMemeorySizeToFullRender:1500,BatchMergeEnabled:!1,SegmentedBatchMergeEnable:!1,maxIndicesNumberPerBathSegment:65535,IncrementRender:!0,LimitFrameTime:250,maxObjectNumInPool:6e4,maxDrawCacheNum:4e4,OctantDepth:15,MaximumDepth:0,ConcurrencyRequestCount:8,ShowOctant:!1,EnableOctant:!0,LightPreset:3,IBL:!1,ToneMapping:1,LightIntensityFactor:1.5,Hover:!1,MouseMovePick:!1,OcclusionTranslucentEnabled:!1,OcclusionOpacity:.5,OcclusionDistanceToCamera:1e3,LineSelectRange:30,DrawingStyle:0,DrawingBoardlineEnabled:!0,DrawingBoardlineLimit:!0,DrawingBoardlineLimitThreshold:2e5,CanUseWireframeFromData:!0,BorderLineBatched:!1,BorderLineDelayLoaded:!1,InitWireframeData:!1,SSAO:!1,EnableGlow:!1,GlowCount:0,HighLightOutlineCount:0,EnableShadowMap:!1,MeasureHighlightPlane:!1,WalkingWithGravity:!1,EnableHitDetection:!1,TranslucentDepthDisabled:!1,LoadMpkOnDemand:!1,EnableLoadOnDemand:!0,EnableSnowPass:!1,EnableFogPass:!1,EnableRainPass:!1,EnableSkylinePass:!1,ScanRingCount:0,EnableDisposeBufferAfterVbo:!0,OrganizeNodesByCameraView:!1,CanUseCompressedTexture:!1,CanUseSmallTexture:!0,DEBUG:!1,EnableExplosion:!1,EnableLogarithmicDepthBuffer:!1,ConstraintZoom:!1,PickingEffect:!0,PickingLineWidthEnabled:!1,EnableGisMap:!1,TerrainScale:1,TerrainResourceFileName:"terrain.bin",TilePlaneGroupName:"TilePlaneGroup",TileGlobalGroupName:"TileGlobalGroup",TdTileGroupName:"3dTilesGroup",BimTilesGroupName:"BimTilesGroup",DracoLibUrl:void 0,DynamicScheduling:!1,EnableSplitComponent:!1,DelayLoadTexture:!1,EnableLodDemDom:!1,EnableCSM:!1},s.EnumStandardView={ISO:0,Top:1,Bottom:2,Front:3,Back:4,Right:5,Left:6,SouthEast:7,SouthWest:8,NorthEast:9,NorthWest:10,BottomFront:11,BottomBack:12,BottomRight:13,BottomLeft:14,BottomSouthEast:15,BottomSouthWest:16,BottomNorthEast:17,BottomNorthWest:18,RoofFront:19,RoofBack:20,RoofRight:21,RoofLeft:22,RoofSouthEast:23,RoofSouthWest:24,RoofNorthEast:25,
RoofNorthWest:26,TopTurnRight:27,TopTurnBack:28,TopTurnLeft:29,BottomTurnRight:30,BottomTurnBack:31,BottomTurnLeft:32,FrontTurnRight:33,FrontTurnTop:34,FrontTurnLeft:35,RightTurnBack:36,RightTurnTop:37,RightTurnFront:38,BackTurnRight:39,BackTurnTop:40,BackTurnLeft:41,LeftTurnFront:42,LeftTurnTop:43,LeftTurnBack:44},s.CAMERATYPE={ORTHOGRAPHIC:0,PERSPECTIVE:1},s.OPSELECTIONTYPE={Clear:0,Add:1,Remove:2},s.PICKABLETYPE={Geometry:1,Marker3d:2,Room:3,ExternalComponent:4,Axis:5,Map:6,UnPickable:0},s.LOADERROREVENTS={LOAD_ERROR:1e3,LOAD_SCENE_ERROR:1001,LOAD_MATERIAL_ERROR:1002,LOAD_SYMBOL_ERROR:1003,LOAD_OCTREEINNER_ERROR:1004,LOAD_OCTREEOUTER_ERROR:1005,LOAD_USERID_ERROR:1006,LOAD_USERDATA_ERROR:1007,LOAD_CAMERA_ERROR:1008,LOAD_TEXTURE_ERROR:1009,LOAD_MPK_ERROR:1010,LOAD_IBLCONFIG_ERROR:1011},s.EnumRenderType={RENDER:0,RENDER_FINISHED:1,RESIZE:2},s.PrimitiveCount={vertexCount:0,triangleCount:0},s.RotatePivotMode={MOUSEPOINT:0,SELECTION:1,CENTER:2,CAMERA:3},s.EditorMode={ORBIT:"orbit",PICK:"pick",PAN:"pan",ZOOM:"zoom",FLY:"fly",WALK:"walk",THIRDPERSONWALK:"ThirdPersonWalk"},s.EditToolMode={PICK_BY_RECT:"pickByRect",ZOOM_BY_RECT:"zoomByRect",CLIP_BY_BOX:"clipByBox",CLIP_FILL:"fillClip",PICK_BY_MEASURE:"pickByMeasure",EDIT_CONTROL:"editControl",VIEW_SHED_ANALYSIS:"viewshedAnalysis",VOLUME_MEASURE:"volumeMeasure"},s.MoveDirection={NONE:0,UP:1,DOWN:2,LEFT:4,RIGHT:8,FORWARD:16,BACK:32},s.DrawingStyle={SHADING:0,BOARDLINE:1,SHADINGWITHLINE:2},s.EnumInstanceState={HIDDEN:-1,NONE:0,HOVER:1,SELECTED:2,OVERRIDED:3,TRANSPARENT:4,BLINK:5,CLIPPING:6},s.EnumDataProvider={AUTO:0,DEFAULT:1,MERGED:2,LAYER:3,LAYER_SCENE:4},s.EnumRendererType={AUTO:0,FULL:1,INCREMENT:2},s.EnumShaderColorState={NONE:0,BLINK:1,SELECT:2},s.EnumCesiumImageryLayerType={AUTO:0,BAIDU:1,GAODE:2,MAPBOX:3,ARCGIS:4,GOOGLE:5},s.EnumLayerBaseRenderOrder={MODEL:0,MAP:-100},s.EnumRenderCallbackType=Object.freeze({PRE_RENDER:"preRender",RENDER:"render",POST_RENDER:"postRender",FINISH_RENDER:"renderFinished"}),s.FILLPATTERN={fullFill:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],noFill:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],horizontalLine:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255],verticalLine:[128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128],rightDiagonalLine:[0,128,0,128,0,64,0,64,0,32,0,32,0,16,0,16,0,8,0,8,0,4,0,4,0,2,0,2,0,1,0,1,128,0,128,0,64,0,64,0,32,0,32,0,16,0,16,0,8,0,8,0,4,0,4,0,2,0,2,0,1,0,1,0,0,128,0,128,0,64,0,64,0,32,0,32,0,16,0,16,0,8,0,8,0,4,0,4,0,2,0,2,0,1,0,1,128,0,128,0,64,0,64,0,32,0,32,0,16,0,16,0,8,0,8,0,4,0,4,0,2,0,2,0,1,0,1,0],leftDiagonalLine:[1,0,1,0,2,0,2,0,4,0,4,0,8,0,8,0,16,0,16,0,32,0,32,0,64,0,64,0,128,0,128,0,0,1,0,1,0,2,0,2,0,4,0,4,0,8,0,8,0,16,0,16,0,32,0,32,0,64,0,64,0,128,0,128,1,0,1,0,2,0,2,0,4,0,4,0,8,0,8,0,16,0,16,0,32,0,32,0,64,0,64,0,128,0,128,0,0,1,0,1,0,2,0,2,0,4,0,4,0,8,0,8,0,16,0,16,0,32,0,32,0,64,0,64,0,128,0,128],orthogonalCrossLine:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,255,255,255,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,255,255,255,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,255,255,255,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,255,255,255],skewCrossLine:[65,65,65,65,34,34,34,34,20,20,20,20,8,8,8,8,20,20,20,20,34,34,34,34,65,65,65,65,128,128,128,128,65,65,65,65,34,34,34,34,20,20,20,20,8,8,8,8,20,20,20,20,34,34,34,34,65,65,65,65,128,128,128,128,65,65,65,65,34,34,34,34,20,20,20,20,8,8,8,8,20,20,20,20,34,34,34,34,65,65,65,65,128,128,128,128,65,65,65,65,34,34,34,34,20,20,20,20,8,8,8,8,20,20,20,20,34,34,34,34,65,65,65,65,128,128,128,128],halftone:[136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34,136,136,136,136,34,34,34,34],doubleCross:[65,65,65,65,34,34,34,34,21,21,21,21,9,9,9,9,21,21,21,21,35,35,35,35,66,66,66,66,255,255,255,255,65,65,65,65,34,34,34,34,21,21,21,21,9,9,9,9,21,21,21,21,35,35,35,35,66,66,66,66,255,255,255,255,65,65,65,65,34,34,34,34,21,21,21,21,9,9,9,9,21,21,21,21,35,35,35,35,66,66,66,66,255,255,255,255,65,65,65,65,34,34,34,34,21,21,21,21,9,9,9,9,21,21,21,21,35,35,35,35,66,66,66,66,255,255,255,255]},s.Layer={},function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isAvailable",value:function(t){return("WGS84"===t||"CGCS2000"==t)&&(e.setupCoordinateSystem(t),!0)}},{key:"setupCoordinateSystem",value:function(e){if(!proj4.testDef(e))switch(e){case"WGS84":proj4.defs("WGS84","+proj=longlat +datum=WGS84 +no_defs");break;case"CGCS2000":proj4.defs("CGCS2000","+proj=longlat +ellps=GRS80 +no_defs")}}},{key:"setupMercator",value:function(){proj4.testDef("WEB_MERCATOR")||proj4.defs("WEB_MERCATOR","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs")}}]),e}();e.WGS84="WGS84",e.CGCS2000="CGCS2000",s.geoCoordinateSystem=e}(),function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"lonLatToWebMercator",value:function(e,t,i){if(!s.geoCoordinateSystem.isAvailable(t))return void console.log("unknown coordinate system ");s.geoCoordinateSystem.setupMercator();var r=proj4(proj4(t),proj4("WEB_MERCATOR"),proj4.toPoint([e.x,e.y]));if("object"===(void 0===i?"undefined":_typeof(i)))return i.x=r.x,i.y=r.y,i;var n=new THREE.Vector2;return n.x=r.x,n.y=r.y,n}},{key:"webMercatorToLonLat",value:function(e,t,i){if(!s.geoCoordinateSystem.isAvailable(t))return void console.log("unknown coordinate system ");s.geoCoordinateSystem.setupMercator();var r=proj4(proj4("WEB_MERCATOR"),proj4(t),proj4.toPoint([e.x,e.y]));if("object"===(void 0===i?"undefined":_typeof(i)))return i.x=r.x,i.y=r.y,i;var n=new THREE.Vector2;return n.x=r.x,n.y=r.y,n}},{key:"lonLatToGauss",value:function(t,i,r,n){if(!s.geoCoordinateSystem.isAvailable(i))return void console.log("unknown coordinate system ");var a=void 0!==n.span?n.span:3,o=void 0===n.withLineCode||n.withLineCode,l=e.gaussInfo(t.x,a),u=void 0!==n.lineCode?n.lineCode:l.lineCode,c=void 0;if(o){if(c="CGCS_GAUSS_"+a+"_ZONE_"+u,!proj4.testDef(c)){var h="+proj=tmerc +lat_0=0 +lon_0="+l.centerLng+" +k=1 +x_0="+u+"500000 +y_0=0 +ellps=GRS80 +units=m +no_defs";proj4.defs(c,h)}}else if(c="CGCS_GAUSS_"+a+"_"+l.centerLng+"E",!proj4.testDef(c)){var d="+proj=tmerc +lat_0=0 +lon_0="+l.centerLng+" +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs";proj4.defs(c,d)}var f=proj4(proj4(i),proj4(c),proj4.toPoint([t.x,t.y]));if("object"===(void 0===r?"undefined":_typeof(r)))return r.x=f.x,r.y=f.y,r;var p=new THREE.Vector2;return p.x=f.x,p.y=f.y,p}},{key:"guassToLonLat",value:function(e,t,i,r){if(!s.geoCoordinateSystem.isAvailable(t))return void console.log("unknown coordinate system ");if(void 0===r.span)return void console.log("unknown projection info");var n=Math.floor(e.x/1e6);if(n<0&&!r.lineCode)return void console.log("error projection coordinate");if(r.lineCode&&r.lineCode!=n&&n>0)return void console.log("error projection coordinate");var a=void 0;n<=0?(a=proj4.toPoint([e.x+1e6*r.lineCode,e.y]),n=r.lineCode):a=proj4.toPoint([e.x,e.y]);var o="CGCS_GAUSS_"+r.span+"_ZONE_"+n;if(!proj4.testDef(o)){var l=n*r.span;Math.abs(r.span-6)<Math.abs(s.Utils.MinusEpsilon)&&(l-=6);var u="+proj=tmerc +lat_0=0 +lon_0="+l+" +k=1 +x_0="+n+"500000 +y_0=0 +ellps=GRS80 +units=m +no_defs";proj4.defs(o,u)}var c=proj4(proj4(o),proj4(t),a);if("object"===(void 0===i?"undefined":_typeof(i)))return i.x=c.x,i.y=c.y,i;var h=new THREE.Vector2;return h.x=c.x,h.y=c.y,h}},{key:"gaussInfo",value:function(e,t){var i=0,r=0;return Math.abs(t-3)<Math.abs(s.Utils.MinusEpsilon)?(i=Math.floor((e+t/2)/t),r=3*i):Math.abs(t-6)<Math.abs(s.Utils.MinusEpsilon)&&(i=Math.floor((e+t)/t),r=6*i-3),{lineCode:i,centerLng:r}}}]),e}();s.Projection=e}(),function(e){function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e<<t|e>>>32-t}function r(e,r,n,a,o,s){return t(i(t(t(r,e),t(a,s)),o),n)}function n(e,t,i,n,a,o,s){return r(t&i|~t&n,e,t,a,o,s)}function a(e,t,i,n,a,o,s){return r(t&n|i&~n,e,t,a,o,s)}function o(e,t,i,n,a,o,s){return r(t^i^n,e,t,a,o,s)}function l(e,t,i,n,a,o,s){return r(i^(t|~n),e,t,a,o,s)}function u(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;var r,s,u,c,h,d=1732584193,f=-271733879,p=-1732584194,m=271733878;for(r=0;r<e.length;r+=16)s=d,u=f,c=p,h=m,d=n(d,f,p,m,e[r],7,-680876936),m=n(m,d,f,p,e[r+1],12,-389564586),p=n(p,m,d,f,e[r+2],17,606105819),f=n(f,p,m,d,e[r+3],22,-1044525330),d=n(d,f,p,m,e[r+4],7,-176418897),m=n(m,d,f,p,e[r+5],12,1200080426),p=n(p,m,d,f,e[r+6],17,-1473231341),f=n(f,p,m,d,e[r+7],22,-45705983),d=n(d,f,p,m,e[r+8],7,1770035416),m=n(m,d,f,p,e[r+9],12,-1958414417),p=n(p,m,d,f,e[r+10],17,-42063),f=n(f,p,m,d,e[r+11],22,-1990404162),d=n(d,f,p,m,e[r+12],7,1804603682),m=n(m,d,f,p,e[r+13],12,-40341101),p=n(p,m,d,f,e[r+14],17,-1502002290),f=n(f,p,m,d,e[r+15],22,1236535329),d=a(d,f,p,m,e[r+1],5,-165796510),m=a(m,d,f,p,e[r+6],9,-1069501632),p=a(p,m,d,f,e[r+11],14,643717713),f=a(f,p,m,d,e[r],20,-373897302),d=a(d,f,p,m,e[r+5],5,-701558691),m=a(m,d,f,p,e[r+10],9,38016083),p=a(p,m,d,f,e[r+15],14,-660478335),f=a(f,p,m,d,e[r+4],20,-405537848),d=a(d,f,p,m,e[r+9],5,568446438),m=a(m,d,f,p,e[r+14],9,-1019803690),p=a(p,m,d,f,e[r+3],14,-187363961),f=a(f,p,m,d,e[r+8],20,1163531501),d=a(d,f,p,m,e[r+13],5,-1444681467),m=a(m,d,f,p,e[r+2],9,-51403784),p=a(p,m,d,f,e[r+7],14,1735328473),f=a(f,p,m,d,e[r+12],20,-1926607734),d=o(d,f,p,m,e[r+5],4,-378558),m=o(m,d,f,p,e[r+8],11,-2022574463),p=o(p,m,d,f,e[r+11],16,1839030562),f=o(f,p,m,d,e[r+14],23,-35309556),d=o(d,f,p,m,e[r+1],4,-1530992060),m=o(m,d,f,p,e[r+4],11,1272893353),p=o(p,m,d,f,e[r+7],16,-155497632),f=o(f,p,m,d,e[r+10],23,-1094730640),d=o(d,f,p,m,e[r+13],4,681279174),m=o(m,d,f,p,e[r],11,-358537222),p=o(p,m,d,f,e[r+3],16,-722521979),f=o(f,p,m,d,e[r+6],23,76029189),d=o(d,f,p,m,e[r+9],4,-640364487),m=o(m,d,f,p,e[r+12],11,-421815835),p=o(p,m,d,f,e[r+15],16,530742520),f=o(f,p,m,d,e[r+2],23,-995338651),d=l(d,f,p,m,e[r],6,-198630844),m=l(m,d,f,p,e[r+7],10,1126891415),p=l(p,m,d,f,e[r+14],15,-1416354905),f=l(f,p,m,d,e[r+5],21,-57434055),d=l(d,f,p,m,e[r+12],6,1700485571),m=l(m,d,f,p,e[r+3],10,-1894986606),p=l(p,m,d,f,e[r+10],15,-1051523),f=l(f,p,m,d,e[r+1],21,-2054922799),d=l(d,f,p,m,e[r+8],6,1873313359),m=l(m,d,f,p,e[r+15],10,-30611744),p=l(p,m,d,f,e[r+6],15,-1560198380),f=l(f,p,m,d,e[r+13],21,1309151649),d=l(d,f,p,m,e[r+4],6,-145523070),m=l(m,d,f,p,e[r+11],10,-1120210379),p=l(p,m,d,f,e[r+2],15,718787259),f=l(f,p,m,d,e[r+9],21,-343485551),d=t(d,s),f=t(f,u),p=t(p,c),m=t(m,h);return[d,f,p,m]}function c(e){var t,i="",r=32*e.length;for(t=0;t<r;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function h(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function d(e){return c(u(h(e),8*e.length))}function f(e,t){var i,r,n=h(e),a=[],o=[];for(a[15]=o[15]=void 0,n.length>16&&(n=u(n,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^n[i],o[i]=1549556828^n[i];return r=u(a.concat(h(t)),512+8*t.length),c(u(o.concat(r),640))}function p(e){var t,i,r="0123456789abcdef",n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function m(e){return unescape(encodeURIComponent(e))}function v(e){return d(m(e))}function g(e){return p(v(e))}function y(e,t){return f(m(e),m(t))}function M(e,t){return p(y(e,t))}function E(e,t,i){return t?i?y(t,e):M(t,e):i?v(e):g(e)}s.md5=E}(),s.Utils={TemporaryMatrix:new THREE.Matrix4,MinusEpsilon:-1e-6,isDefined:function(e){return void 0!==e&&null!==e},isDesktop:function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),n=/(?:Firefox)/.test(e),a=(/(?:Chrome|CriOS)/.test(e),/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||n&&/(?:Tablet)/.test(e));return!(/(?:iPhone)/.test(e)&&!a||r||i||a)},supportWorker:function(){return"undefined"!=typeof Worker||(console.log("Sorry! Web Worker is not supported."),!1)},box3FromArray:function(e,t){if(e instanceof Array){var i=t||new THREE.Box3;return i.min.fromArray(e,0),i.max.fromArray(e,3),i}return null},box3FromSize:function(e,t,i){return s.Utils.isDefined(i)||(i=new THREE.Box3),i.min.set(-t.x/2,-t.y/2,-t.z/2),i.max.set(t.x/2,t.y/2,t.z/2),i.translate(e),i},box3FromArrayRange:function(e,t,i){for(var r=new THREE.Box3,n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0,c=t,h=i;c<h;c+=3){var d=e[c],f=e[c+1],p=e[c+2];d<n&&(n=d),f<a&&(a=f),p<o&&(o=p),d>s&&(s=d),f>l&&(l=f),p>u&&(u=p)}return r.min.set(n,a,o),r.max.set(s,l,u),r},computeBBox:function(e){for(var t=new THREE.Box3,i=new THREE.Vector3,r=0,n=e.length;r<n;++r)i.fromArray(e[r],0),t.expandByPoint(i);return t},mergeBBox:function(e){if(e.length<1)return null;for(var t=new THREE.Box3,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Box3,a=0,o=e.length;a<o;a++)i.set(e[a].max.x,e[a].max.y,e[a].max.z),r.set(e[a].min.x,e[a].min.y,e[a].min.z),n.set(r,i),t.union(n);return t},parseTransform:function(e,t,i){var r=!1;if(t.rotation&&(e.rotation.fromArray(t.rotation),r=!0),t.position&&(e.position.fromArray(t.position),r=!0),t.scale&&(e.scale.fromArray(t.scale),r=!0),t.quaternion&&(e.quaternion.fromArray(t.quaternion),r=!0),r&&e.updateMatrix(),t.matrix&&e.matrix.fromArray(t.matrix),i){var n=e.matrix.clone();n.multiplyMatrices(i,e.matrix),e.matrix=n}e.matrixAutoUpdate=!1,void 0!==e.boundingBox&&(e.boundingBox=s.Utils.box3FromArray(t.bbox))},isMobileDevice:function(){var e=navigator.platform;return 0!==e.indexOf("Win")&&0!==e.indexOf("Mac")},findRange:function(e,t){if(t<Math.min.apply(null,e))return 0;if(t>Math.max.apply(null,e))return e.length-1;for(var i=0,r=0,n=e.length;r<n;++r)if(e[r]>t){i=r-1;break}return i},stringToByte:function(e){var t,i,r=new Array;t=e.length;for(var n=0;n<t;n++)i=e.charCodeAt(n),i>=65536&&i<=1114111?(r.push(i>>18&7|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)):i>=2048&&i<=65535?(r.push(i>>12&15|224),r.push(i>>6&63|128),r.push(63&i|128)):i>=128&&i<=2047?(r.push(i>>6&31|192),r.push(63&i|128)):r.push(255&i);return r},byteToString:function(e){if("string"==typeof e)return e;for(var t="",i=e,r=0;r<i.length;r++){var n=i[r].toString(2),a=n.match(/^1+?(?=0)/);if(a&&8==n.length){for(var o=a[0].length,s=i[r].toString(2).slice(7-o),l=1;l<o;l++)s+=i[l+r].toString(2).slice(2);t+=String.fromCharCode(parseInt(s,2)),r+=o-1}else t+=String.fromCharCode(i[r])}return t},strToBinary:function(e){for(var t=[],i=e.split(""),r=0;r<i.length;r++){0!=r&&t.push(" ");var n=i[r],a=n.charCodeAt().toString(2);t.push(a)}return t.join("")},binaryToStr:function(e){for(var t=[],i=e.split(" "),r=0;r<i.length;r++){var n=i[r],a=parseInt(n,2),o=String.fromCharCode(a);t.push(o)}return t.join("")},byteArr2Int:function(e){return(255&e[0])<<24|(255&e[1])<<16|(255&e[2])<<8|(255&e[3])<<0},int2ByteArr:function(e){var t=[];return t[0]=e>>24,t[1]=e>>16,t[2]=e>>8,t[3]=e>>0,t},checkVersionMatch:function(e,t){var i=e.split(".");if(i.length>1){var r=parseInt(i[0]),n=parseInt(i[1]),a=t.toLowerCase();if((a=parseFloat(a))<.04&&0===r&&n<7)return!0;if(a>=.04&&(r>0||0===r&&n>=7))return!0}return!1},isMirror:function(e){var t=new THREE.Vector3(e[0],e[1],e[2]),i=new THREE.Vector3(e[4],e[5],e[6]),r=new THREE.Vector3(e[8],e[9],e[10]);return(new THREE.Vector3).crossVectors(t,i).dot(r)<0},isEmptyObject:function(e){if(!e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isEmptyObjectSimple:function(e){for(var t in e)return!1;return!0},isOwnEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},hexStrToRgb:function(e){var t=e.replace("#",""),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16)/255,g:parseInt(i[2],16)/255,b:parseInt(i[3],16)/255}:null},hexToRgb:function(e){var t={};return t.r=(e>>16&255)/255,t.g=(e>>8&255)/255,t.b=(255&e)/255,t},getMin:function(e){for(var t=e.length,i=1/0;t--;)i=e[t]<i?e[t]:i;return i},getMax:function(e){for(var t=e.length,i=-1/0;t--;)i=e[t]>i?e[t]:i;return i},freezeObject:function(e){return Object.freeze?Object.freeze(e):e},getEncodedId:function(e){return s.md5&&"function"==typeof s.md5?s.md5(e):e},arrayToMap:function(e,t){t=t||{};for(var i=0,r=e.length;i<r;i++)t[e[i]]=!0;return t},getDifferentialIdxs:function(e,t){var i,r={},n={},a={};if(t)if(this.isEmptyObject(e))n=t;else{for(i in t)e[i]&&(a[i]=!0);if(this.isEmptyObject(a))r=e,n=t;else{for(i in t)a[i]||(n[i]=!0);for(i in e)a[i]||(r[i]=!0)}}else this.isEmptyObject(e)||(r=e);return{objCurrUsedIdxs:e,addIdxs:Object.keys(r),removeIdxs:Object.keys(n)}},getCombinedKeyString:function(e,t){return t=t||"&",e.join(t)},splitCombinedKeyString:function(e,t){return t=t||"&",e.split(t)},isGroupObject:function(e){return!(!e.children||!e.children.length)},isMeshObject:function(e){return!!(e.isMesh||e.isLine||e.isPoints)},extendObject:function(e,t,i){if(i)for(var r in t)"object"===_typeof(t[r])?s.Utils.extendObject(e[r],t[r],!0):e[r]=t[r];else for(var r in t)null!==e[r]&&void 0!==e[r]?"object"===_typeof(t[r])&&s.Utils.extendObject(e[r],t[r],!1):e[r]=t[r];return e},computeExplodeTranslation:function(e,t,i){var r=t.getCenter(),n=e.distanceTo(r),a=i*n,o=new THREE.Vector3;return o.subVectors(r,e),0!=o.length()&&o.normalize(),o.multiplyScalar(a),o},minDistanceBetweenTriToMesh:function(e,t,i,r){function n(e,t){return new THREE.Vector3(e.x-t.x,e.y-t.y,e.z-t.z)}function a(e,t){return new THREE.Vector3(e.x+t.x,e.y+t.y,e.z+t.z)}function o(e,t,i){return new THREE.Vector3(e.x+t.x*i,e.y+t.y*i,e.z+t.z*i)}function s(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function l(e,t){return new THREE.Vector3(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)}function u(e,t,i,r){var u,c,h=s(t,r),d=s(t,t),f=s(r,r),p=n(i,e),m=s(t,p),v=s(r,p);u=(m*f-v*h)/(d*f-h*h),u<0||isNaN(u)?u=0:u>1&&(u=1),c=(u*h-v)/f;var g,y,M,E;return c<=0||isNaN(c)?(y=i,u=m/d,u<=0||isNaN(u)?(g=e,M=n(i,e)):u>=1?(g=a(e,t),M=n(i,g)):(g=o(e,t,u),E=l(p,t),M=l(t,E))):c>=1?(y=a(i,r),u=(h+m)/d,u<=0||isNaN(u)?(g=e,M=n(y,e)):u>=1?(g=a(e,t),M=n(y,g)):(g=o(e,t,u),p=n(y,e),E=l(p,t),M=l(t,E))):(y=o(i,r,c),u<=0||isNaN(u)?(g=e,E=l(p,r),M=l(r,E)):u>=1?(g=a(e,t),p=n(i,g),E=l(p,r),M=l(r,E)):(g=o(e,t,u),M=l(t,r),s(M,p)<0&&M.multiplyScalar(-1))),{vec:M,closestP:g,closestQ:y}}for(var c,h,d,f,p=new THREE.Vector3,m=new THREE.Vector3,v=new THREE.Vector3,g={start:null,end:null,minDistance:Number.POSITIVE_INFINITY},y=t.geometry,M=y.attributes.position,E=i?i.indexStart:0,b=y.getIndex().array,x=i?i.indexStart+i.indexCount:b.length,I=E,f=x;I<f;I+=3){c=b[I],h=b[I+1],d=b[I+2];var T=[];!function(e,t,i,r,n,a){p.fromBufferAttribute(t,i),m.fromBufferAttribute(t,r),v.fromBufferAttribute(t,n),a&&(p.applyMatrix4(a),m.applyMatrix4(a),v.applyMatrix4(a)),e.push(p),e.push(m),e.push(v)}(T,M,c,h,d,r);var w=function(e,t){var i,r,a,c=[],h=[];c[0]=n(e[1],e[0]),c[1]=n(e[2],e[1]),c[2]=n(e[0],e[2]),h[0]=n(t[1],t[0]),h[1]=n(t[2],t[1]),h[2]=n(t[0],t[2]);for(var d,f,p,m,v=0,g=e[0].distanceToSquared(t[0])+1,y=0;y<3;y++)for(var M=0;M<3;M++){var E=u(e[y],c[y],t[M],h[M]);a=E.vec,i=E.closestP,r=E.closestQ,d=n(r,i);var b=s(d,d);if(b<=g){p=i.clone(),m=r.clone(),g=b,f=n(e[(y+2)%3],i);var x=s(f,a);f=n(t[(M+2)%3],r);var I=s(f,a);if(x<=0&&I>=0)return{start:i.clone(),end:r.clone(),minDistance:Math.sqrt(b)};var T=s(d,a);x<0&&(x=0),I>0&&(I=0),T-x+I>0&&(v=1)}}var w=l(c[0],c[1]),C=s(w,w);if(C>1e-15){var S=[];d=n(e[0],t[0]),S[0]=s(d,w),d=n(e[0],t[1]),S[1]=s(d,w),d=n(e[0],t[2]),S[2]=s(d,w);var A=-1;if(S[0]>0&&S[1]>0&&S[2]>0?(A=S[0]<S[1]?0:1,S[2]<S[A]&&(A=2)):S[0]<0&&S[1]<0&&S[2]<0&&(A=S[0]>S[1]?0:1,S[2]>S[A]&&(A=2)),A>=0&&(v=1,d=n(t[A],e[0]),f=l(w,c[0]),s(d,f)>0&&(d=n(t[A],e[1]),f=l(w,c[1]),s(d,f)>0&&(d=n(t[A],e[2]),f=l(w,c[2]),s(d,f)>0))))return i=o(t[A],w,S[A]/C),r=t[A].clone(),{start:i.clone(),end:r,minDistance:i.distanceTo(r)}}var k=l(h[0],h[1]),R=s(k,k);if(R>1e-15){var B=[];d=n(t[0],e[0]),B[0]=s(d,k),d=n(t[0],e[1]),B[1]=s(d,k),d=n(t[0],e[2]),B[2]=s(d,k);var A=-1;if(B[0]>0&&B[1]>0&&B[2]>0?(A=B[0]<B[1]?0:1,B[2]<B[A]&&(A=2)):B[0]<0&&B[1]<0&&B[2]<0&&(A=B[0]>B[1]?0:1,B[2]>B[A]&&(A=2)),A>=0&&(v=1,d=n(e[A],t[0]),f=l(k,h[0]),s(d,f)>0&&(d=n(e[A],t[1]),f=l(k,h[1]),s(d,f)>0&&(d=n(e[A],t[2]),f=l(k,h[2]),s(d,f)>0))))return i=e[A].clone(),r=o(e[A],k,B[A]/R),{start:i,end:r.clone(),minDistance:i.distanceTo(r)}}return v?(i=p,r=m,{start:p.clone(),end:m.clone(),minDistance:Math.sqrt(g)}):{start:p.clone(),end:m.clone(),minDistance:0}}(e,T);if(g.minDistance>w.minDistance&&(g.minDistance=w.minDistance,g.start=w.start.clone(),g.end=w.end.clone()),w.minDistance<=0)return g}return g},asyncProcess:function(e,t,i,r,n){function a(o){var s=o;return function(){var o,l;for(l=s+i>t?t:s+i,o=s;o<l;o++){var u=o;r&&r(e,u),o===l-1&&(l!==t?requestAnimationFrame(a(o+1)):n&&n(e))}}}requestAnimationFrame(a(0))},hasSimilarProperty:function(e,t){if(!(e instanceof Object&&t instanceof Object))return!1;for(var i in e)if(e.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;return!0},arrayMax:function(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,r=e.length;i<r;++i)e[i]>t&&(t=e[i]);return t},arrayMin:function(e){if(0===e.length)return 1/0;for(var t=e[0],i=1,r=e.length;i<r;++i)e[i]<t&&(t=e[i]);return t},ab2str:function(e){return(new TextDecoder).decode(new Uint8Array(e))},str2ab:function(e){return(new TextEncoder).encode(e).buffer},getEncodedString:function(e){return s.md5&&"function"==typeof s.md5?s.md5(e):e},toMemoryString:function(e){var t=e/1048576;return t<1?t.toLocaleString(void 0,{maximumFractionDigits:3}):Math.round(t).toLocaleString()},defined:function(e){return void 0!==e&&null!==e},defaultValue:function(e,t){return void 0!==e&&null!==e?e:t},clone:function(e,t){if(null===e||"object"!==(void 0===e?"undefined":_typeof(e)))return e;t=s.Utils.defaultValue(t,!1);var i=new e.constructor;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t&&(n=s.Utils.clone(n,t)),i[r]=n}return i},binarySearch:function(e,t,i){for(var r,n,a=0,o=e.length-1;a<=o;)if(r=~~((a+o)/2),(n=i(e[r],t))<0)a=r+1;else{if(!(n>0))return r;o=r-1}return~(o+1)},unpackRGBAToDepth:function(e){if(!s.Utils.UnpackFactors){var t=new THREE.Vector3(16777216,65536,256);s.Utils.UnpackFactors=new THREE.Vector4(255/256/t.x,255/256/t.y,255/256/t.z,255/256)}return e.dot(s.Utils.UnpackFactors)},computeViewportTransformation:function(e,t,i,r){var n=s.Utils.defaultValue(e.x,0),a=s.Utils.defaultValue(e.y,0),o=s.Utils.defaultValue(e.width,0),l=s.Utils.defaultValue(e.height,0);t=s.Utils.defaultValue(t,0),i=s.Utils.defaultValue(i,1);var u=.5*o,c=.5*l,h=.5*(i-t),d=u,f=c,p=h,m=n+u,v=a+c,g=t+h;return s.Utils.defined(r)||(r=new THREE.Matrix4),r.elements[0]=d,r.elements[1]=0,r.elements[2]=0,r.elements[3]=0,r.elements[4]=0,r.elements[5]=f,r.elements[6]=0,r.elements[7]=0,r.elements[8]=0,r.elements[9]=0,r.elements[10]=p,r.elements[11]=0,r.elements[12]=m,r.elements[13]=v,r.elements[14]=g,r.elements[15]=1,r},computeView:function(e,t,i,r,n){return s.Utils.defined(n)||(n=new THREE.Matrix4),n.elements[0]=r.x,n.elements[1]=i.x,n.elements[2]=-t.x,n.elements[3]=0,n.elements[4]=r.y,n.elements[5]=i.y,n.elements[6]=-t.y,n.elements[7]=0,n.elements[8]=r.z,n.elements[9]=i.z,n.elements[10]=-t.z,n.elements[11]=0,n.elements[12]=-r.dot(e),n.elements[13]=-i.dot(e),n.elements[14]=t.dot(e),n.elements[15]=1,n},getTranslationFromMatrix4:function(e,t){return s.Utils.defined(t)||(t=new THREE.Vector3),t.x=e.elements[12],t.y=e.elements[13],t.z=e.elements[14],t},pointInPolygon:function(e,t){for(var i=e.x,r=e.y,n=!1,a=0,o=t.length-1;a<t.length;o=a++){var s=t[a].x,l=t[a].y,u=t[o].x,c=t[o].y;l>r!=c>r&&i<(u-s)*(r-l)/(c-l)+s&&(n=!n)}return n},area:function(e){for(var t=e.length,i=0,r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},isClockWise:function(e){return s.Utils.area(e)<0},lineLineIntersection:function(e,t,i,r){var n=(r.y-i.y)*(t.x-e.x)-(r.x-i.x)*(t.y-e.y),a=(r.x-i.x)*(e.y-i.y)-(r.y-i.y)*(e.x-i.x),o=(t.x-e.x)*(e.y-i.y)-(t.y-e.y)*(e.x-i.x);if(0==n)return void 0;var s=a/n,l=o/n;return s>=0&&s<=1&&l>=0&&l<=1?new THREE.Vector2(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y)):void 0},lineStartScratch:new THREE.Vector2,lineEndScratch:new THREE.Vector2,linePolygonIntersection:function(e,t,i){for(var r,n=0;n<i.length;n++)if(s.Utils.lineStartScratch.set(i[n].x,i[n].y),s.Utils.lineEndScratch.set(i[(n+1)%i.length].x,i[(n+1)%i.length].y),r=s.Utils.lineLineIntersection(e,t,s.Utils.lineStartScratch,s.Utils.lineEndScratch))return r},linePolygonIntersection2:function(e,t,i){for(var r,n=0;n<i.length;n++)if(s.Utils.lineStartScratch.set(i[n].x,i[n].y),s.Utils.lineEndScratch.set(i[(n+1)%i.length].x,i[(n+1)%i.length].y),r=s.Utils.lineLineIntersection(e,t,s.Utils.lineStartScratch,s.Utils.lineEndScratch))return r.index=n,r}},s.Compatibility={convertAnnotationsToV3:function(e,t){function i(e,t,i){var r;r="string"==typeof e?JSON.parse(window.atob(e)):{position:{x:e.position.x,y:e.position.y,z:e.position.z},target:{x:e.target.x,y:e.target.y,z:e.target.z},up:{x:e.up.x,y:e.up.y,z:e.up.z}};var n=new THREE.Vector3(r.position.x,r.position.y,r.position.z),a=new THREE.Vector3(r.target.x,r.target.y,r.target.z),o=new THREE.Vector3(r.up.x,r.up.y,r.up.z),l=new s.CameraInfo("persp",n,a,o);return l=s.Camera.drawingToWorld(l,t),l=new s.CameraInfo("persp",l.position,l.target,l.up),l=s.Camera.worldToDrawing(l,i),r.position.x=l.position.x,r.position.y=l.position.y,r.position.z=l.position.z,r.target.x=l.target.x,r.target.y=l.target.y,r.target.z=l.target.z,r.up.x=l.up.x,r.up.y=l.up.y,r.up.z=l.up.z,"string"==typeof e&&(r=window.btoa(JSON.stringify(r))),r}var r=JSON.parse(t);if(r.filter){var n=JSON.parse(r.filter);if(n.filter||n.basicIds){var a=e.getScene(),o=a.getTransformMatrixGlobal();(new THREE.Matrix4).getInverse(o);var l=a.getMatrixGlobal();(new THREE.Matrix4).getInverse(l);var u=e.getFilter().getFilterType(),c={};c.state={},n.filter?(n.fileFilter&&(c.state[u.FILE_HIDDEN]=n.fileFilter),n.selectionSet&&(c.state[u.SELECTED]=n.selectionSet),n.filter.visibleIds&&(c.state[u.VISIBLE]=n.filter.visibleIds),n.filter.invisibleIds&&(c.state[u.HIDDEN]=n.filter.invisibleIds),n.filter.conditions&&(c.state[u.CONDITION_HIDDEN_OTHERS]=n.filter.conditions),n.filter.filters&&(c.state[u.USER_HIDDEN]=n.filter.filters),n.frozenSet&&(c.state[u.FROZENFILTER]=n.frozenSet),n.isolateSet&&(c.state[u.ISOLATE_HIDDEN_OTHERS]=n.isolateSet),n.overriderByIds&&(c.state[u.OVERRIDEFILTER]=n.overriderByIds),n.overriderByData&&(c.state[u.USER_OVERRIDE]=n.overriderByData),n.overriderCondition&&(c.state[u.CONDITION_OVERRIDE]=n.overriderCondition),n.isolateCondition&&(c.state[u.ISOLATE_CONDITION_HIDDEN_OTHERS]=n.isolateCondition),c.state.sceneState=n.overriderByScene):n.basicIds&&(n.basicIds[1]&&(c.state[u.FILE_HIDDEN]=n.basicIds[1]),n.basicIds[2]&&(c.state[u.SELECTED]=n.basicIds[2]),n.basicIds[3]&&(c.state[u.VISIBLE]=n.basicIds[3]),n.basicIds[4]&&(c.state[u.HIDDEN]=n.basicIds[4]),n.conditions[0]&&(c.state[u.CONDITION_HIDDEN_OTHERS]=n.conditions[0]),n.userHiddenIds&&(c.state[u.USER_HIDDEN]=n.userHiddenIds),n.frozenIds&&(c.state[u.FROZENFILTER]=n.frozenIds),n.isolateIds&&(c.state[u.ISOLATE_HIDDEN_OTHERS]=n.isolateIds),n.overrideByIds&&(c.state[u.OVERRIDEFILTER]=n.overrideByIds),n.overrideByData&&(c.state[u.USER_OVERRIDE]=n.overrideByData),n.conditions[2]&&(c.state[u.CONDITION_OVERRIDE]=n.conditions[2]),n.isolateConditions&&(n.isolateConditions[0]&&(c.state[u.ISOLATE_CONDITION_HIDDEN]=n.isolateConditions[0]),n.isolateConditions[1]&&(c.state[u.ISOLATE_CONDITION_HIDDEN_OTHERS]=n.isolateConditions[1]),n.isolateConditions[2]&&(c.state[u.ISOLATE_CONDITION_TRANSLUCENT]=n.isolateConditions[2]),n.isolateConditions[3]&&(c.state[u.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=n.isolateConditions[3])),c.state.sceneState=n.sceneState),n.camera?c.camera=i(n.camera,o,l):c.camera=i(r.camera,o,l),n=c,r.filter=JSON.stringify(n)}}return r},isLoadLinesEnabled:function(e){return!(parseFloat(e)<=.12)},isLoadBMpkEnabled:function(e){return!(parseFloat(e)<.13)},isLoadLayerSceneEnabled:function(e){return!(parseFloat(e)<.15)},isUse32MpkData:function(e){return!(parseFloat(e)<.15)},use32MpkData:!1,isUseMergeTexturePkg:function(e){return!(parseFloat(e)<.16)},isUseMergeTextureOptimize:function(e){return parseFloat(e)>.17},useMergeTexturePkg:!1},s.DomUtil={getContainerOffsetToClient:function(e){var t,i=function(e){for(var t=0,i=0;e;)t+=e.offsetTop,i+=e.offsetLeft,e=e.offsetParent;var r=document.body,n=document.documentElement,a=window.pageYOffset||n.scrollTop||r.scrollTop,o=window.pageXOffset||n.scrollLeft||r.scrollLeft;return t-=a,i-=o,{top:t,left:i}},r=function(e){var t=e.getBoundingClientRect(),i=document.body,r=document.documentElement,n=r.clientTop||i.clientTop,a=r.clientLeft||i.clientLeft,o=t.top-n,s=t.left-a;return{top:Math.round(o),left:Math.round(s)}};if(e!=document){var n=function(e){return e.getBoundingClientRect?r(e):i(e)}(e);t={width:e.offsetWidth,height:e.offsetHeight,left:n.left,top:n.top}}else t={width:window.innerWidth,height:window.innerHeight,left:0,top:0};return t},loadXML:function(e,t){var i=void 0;if(window.ActiveXObject)for(var r=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XMLDOM","MSXML.DOMDocument"],n=0,a=r.length;n<a;++n){try{i=new ActiveXObject(r[n])}catch(e){continue}if(i)break}else{if(!document.implementation||!document.implementation.createDocument)return console.log("不能创建 XML DOM对象，请更新你的浏览器……"),null;i=document.implementation.createDocument("","",null)}return i.async=t,i.load(e),i},loadXMLDoc:function(e){var t=void 0;return t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.open("GET",e,!1),t.send(),t.responseXML},getXMLAttributeValues:function(e,t){var i=e.getElementsByTagName(t);if(0!==i.length){for(var r=i[0],n={},a=0,o=r.attributes.length;a<o;++a){var s=r.attributes[a].nodeName;n[s]=r.getAttribute(s)}return n}},getXMLAttributeValuesByAttrName:function(e,t,i){var r=e.getElementsByTagName(t);if(0!==r.length){for(var n=[],a=0,o=r.length;a<o;++a){var s=r[a].getAttribute(i);s&&n.push(s)}return n}}},function(){function e(e){var t=[],i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,l=s.clone();l.z=0,t.push(l)}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}return t}function t(e){var t=[],i=-1/0,r=0;e.forEach(function(e,n){var a=e.clone();a.z>i&&(i=a.z,r=n),t.push(a)});var n=!0,a=!1,o=void 0;try{
for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){s.value.z=i}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return{topPoints:t,maxIndex:r}}function i(e){u.set(0,0,0);var t=!0,i=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;u.add(o)}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}var s=u.angleTo(c);return s>-Math.PI/2&&s<Math.PI/2}function r(e,t){var i=t.getSize();return e>i.x*i.y*i.z||e<s.Math.EPSILON4?null:e}function n(e){var t=e.children;if(t.length<=0)return null;var i=[],r=[],n=[],a=new THREE.Box3,o=0;return t.forEach(function(e){e.matrix.decompose(d,f,p),d.set(0,0,0),h.compose(d,f,p);var t=e.geometry;if(a.union(s.GeomUtil.getBoundingBoxWorldOfMesh(e).applyMatrix4(e.matrix)),s.Utils.isDefined(t.getAttribute("normal"))){var l=t.getAttribute("normal").array;if(s.Utils.isDefined(t.getAttribute("position"))){var c=t.getAttribute("position").array,m=void 0;if(s.Utils.isDefined(t.getIndex()))m=t.getIndex().array,m=Array.from(m),m.forEach(function(e,t){m[t]=e+o});else{m=[];for(var v=0;v<c.length/3;++v)m.push(v+o)}l=Array.from(l),r=r.concat(m),c=Array.from(c);for(var g=0;g<c.length;g+=3)u.set(c[g],c[g+1],c[g+2]),u.applyMatrix4(e.matrix),n.push(u.x),n.push(u.y),n.push(u.z),u.set(l[g],l[g+1],l[g+2]),u.applyMatrix4(h),u.normalize(),i.push(u.x),i.push(u.y),i.push(u.z);o=n.length/3}}}),{position:n,normal:i,index:r,boundingBox:a}}var a=new THREE.Vector3,o=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3(0,0,1),h=new THREE.Matrix4;s.GeomUtil={EmptyGeometry:new THREE.Geometry,UnitCylinderInstance:new THREE.CylinderBufferGeometry(1,1,1,32,1,!1),UnitBoxInstance:new THREE.BoxBufferGeometry(1,1,1),UnitTextureCylinder:null,UnitTextureBox:null,initializeUnitInstances:function(){s.GeomUtil.UnitCylinderInstance.boundingBox||s.GeomUtil.UnitCylinderInstance.computeBoundingBox(),s.GeomUtil.UnitBoxInstance.boundingBox||s.GeomUtil.UnitBoxInstance.computeBoundingBox()},destroyUnitInstances:function(){s.GeomUtil.UnitCylinderInstance.dispose(),s.GeomUtil.UnitBoxInstance.dispose()},getBoxData:function(e){for(var t=[[-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5],[-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5],[-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5],[-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5],[-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,.5,.5,.5],[.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5]],i=[[0,1,2,3,2,1],[2,1,0,1,2,3],[0,1,2,3,2,1],[2,1,0,1,2,3],[0,1,2,3,2,1],[2,1,0,1,2,3]],r=[[],[],[],[],[],[]],n=0;n<4;++n)r[0].push(-1,0,0);for(var n=0;n<4;++n)r[1].push(0,-1,0);for(var n=0;n<4;++n)r[2].push(0,0,-1);for(var n=0;n<4;++n)r[3].push(0,0,1);for(var n=0;n<4;++n)r[4].push(0,1,0);for(var n=0;n<4;++n)r[5].push(1,0,0);var a=[[],[],[],[],[],[]];return a[0]=a[2]=a[4]=[-.5,-.5,-.5,.5,.5,-.5,.5,.5],a[1]=a[3]=a[5]=[-.5,-.5,-.5,.5,.5,-.5,.5,.5],{vertex:t[e],normal:r[e],uv:a[e],index:i[e]}},getPipeData2:function(){var e=[.5,0,.5,.353530875,.353530875,.5,0,.5,.5,-.353530875,.353530875,.5,-.5,0,.5,-.353530875,-.353530875,.5,0,-.5,.5,.353530875,-.353530875,.5,.5,0,.5,.5,0,-.5,.353530875,.353530875,-.5,0,.5,-.5,-.353530875,.353530875,-.5,-.5,0,-.5,-.353530875,-.353530875,-.5,0,-.5,-.5,.353530875,-.353530875,-.5,.5,0,-.5,.5,0,.5,.353530875,.353530875,.5,0,.5,.5,-.353530875,.353530875,.5,-.5,0,.5,-.353530875,-.353530875,.5,0,-.5,.5,.353530875,-.353530875,.5,.5,0,-.5,.353530875,.353530875,-.5,0,.5,-.5,-.353530875,.353530875,-.5,-.5,0,-.5,-.353530875,-.353530875,-.5,0,-.5,-.5,.353530875,-.353530875,-.5],t=[0,9,1,1,9,10,1,10,2,2,10,11,2,11,3,3,11,12,3,12,4,4,12,13,4,13,5,5,13,14,5,14,6,6,14,15,6,15,7,7,15,16,7,16,8,8,16,17,18,19,20,18,20,21,18,21,22,18,22,23,18,23,24,18,24,25,26,28,27,26,29,28,26,30,29,26,31,30,26,32,31,26,33,32],i=[1,0,0,.7,.7,0,0,1,0,-.7,.7,0,-1,0,0,-.7,-.7,0,0,-1,0,.7,-.7,0,1,0,0,1,0,0,.7,.7,0,0,1,0,-.7,.7,0,-1,0,0,-.7,-.7,0,0,-1,0,.7,-.7,0,1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],r=[-.5,.5,-.375,.5,-.25,.5,-.125,.5,0,.5,.125,.5,.25,.5,.375,.5,.5,.5,-.5,-.5,-.375,-.5,-.25,-.5,-.125,-.5,0,-.5,.125,-.5,.25,-.5,.375,-.5,.5,-.5,.5,0,.353530875,.353530875,0,.5,-.353530875,.353530875,-.5,0,-.353530875,-.353530875,0,-.5,.353530875,-.353530875,.5,0,.353530875,.353530875,0,.5,-.353530875,.353530875,-.5,0,-.353530875,-.353530875,0,-.5,.353530875,-.353530875];return function(){return{vertex:e,normal:i,uv:r,index:t}}}(),getPipeData:function(e){(void 0===e||e<8)&&(e=8),e>256&&(e=256);var t,i,r=4*e+2,n=3*(4*e-4),a=e+1,o=1/e,s=6.28318530714/e,l=[];for(t=0;t<e;++t)l.push(.5*Math.cos(t*s)),l.push(.5*Math.sin(t*s));l.push(.5),l.push(0);var u=[];for(i=2*a,t=0;t<i;t+=2)u.push(l[t]),u.push(l[t+1]),u.push(.5);for(t=0;t<i;t+=2)u.push(l[t]),u.push(l[t+1]),u.push(-.5);for(i=2*e,t=0;t<i;t+=2)u.push(l[t]),u.push(l[t+1]),u.push(.5);for(t=i;t>0;t-=2)u.push(l[t]),u.push(l[t+1]),u.push(-.5);var c=[],h=e+1;for(t=0;t<e;++t)c.push(t),c.push(t+h),c.push(t+1),c.push(t+1),c.push(t+h),c.push(t+h+1);var d=2*a;for(t=1;t<e-1;++t)c.push(d),c.push(d+t),c.push(d+t+1);for(d+=e,t=1;t<e-1;++t)c.push(d),c.push(d+t),c.push(d+t+1);var f=[];for(t=e;t>=0;--t)f.push(t*o-.5),f.push(-.5);for(t=e;t>=0;--t)f.push(t*o-.5),f.push(.5);for(i=2*e,t=0;t<i;t+=2)f.push(l[t]),f.push(l[t+1]);for(t=i;t>0;t-=2)f.push(l[t]),f.push(l[t+1]);i=3*r;var p=[];for(t=0;t<i;++t)p.push(0);var m,v,g,y=new THREE.Vector3,M=new THREE.Vector3,E=new THREE.Vector3,b=new THREE.Vector3,x=new THREE.Vector3;for(t=0;t<n;t+=3)m=3*c[t],v=3*c[t+1],g=3*c[t+2],y.fromArray(u,m),M.fromArray(u,v),E.fromArray(u,g),b.subVectors(E,M),x.subVectors(y,M),b.cross(x),p[m]+=b.x,p[m+1]+=b.y,p[m+2]+=b.z,p[v]+=b.x,p[v+1]+=b.y,p[v+2]+=b.z,p[g]+=b.x,p[g+1]+=b.y,p[g+2]+=b.z;var I=new THREE.Vector3;for(i=3*r,t=0;t<i;t+=3)I.fromArray(p,t),I.normalize(),p[t]=I.x,p[t+1]=I.y,p[t+2]=I.z;return{vertex:u,normal:p,uv:f,index:c,edges:e}},getInstancePipeData:function(e,t){var i=this.getPipeData(e);(void 0===e||e<8)&&(e=8),e>256&&(e=256);var r=2*(e+1),n=r+e,a=4*e+2,o=[[],[],[]];o[0]=i.vertex.slice(0,3*r),o[1]=i.vertex.slice(3*r,3*n),o[2]=i.vertex.slice(3*n,3*a);var s=[[],[],[]],l=e+1,u=0;for(u=0;u<e;++u)s[0].push(u),s[0].push(u+l),s[0].push(u+1),s[0].push(u+1),s[0].push(u+l),s[0].push(u+l+1);for(u=1;u<e-1;++u)s[1].push(0),s[1].push(u),s[1].push(u+1);for(u=1;u<e-1;++u)s[2].push(0),s[2].push(u),s[2].push(u+1);var c=[[],[],[]];c[0]=i.uv.slice(0,2*r),c[1]=i.uv.slice(2*r,2*n),c[2]=i.uv.slice(2*n,2*a);var h=[[],[],[]];return h[0]=i.normal.slice(0,3*r),h[1]=i.normal.slice(3*r,3*n),h[2]=i.normal.slice(3*n,3*a),{vertex:o[t],normal:h[t],uv:c[t],index:s[t]}},getUnitTextureCylinder:function(){if(null==s.GeomUtil.UnitTextureCylinder){s.GeomUtil.UnitTextureCylinder=new Array(3);for(var e=0;e<3;++e){var t=s.GeomUtil.getInstancePipeData(32,e);s.GeomUtil.UnitTextureCylinder[e]=new THREE.BufferGeometry,s.GeomUtil.UnitTextureCylinder[e].setIndex(t.index),s.GeomUtil.UnitTextureCylinder[e].addAttribute("position",new THREE.Float32BufferAttribute(t.vertex,3)),s.GeomUtil.UnitTextureCylinder[e].addAttribute("normal",new THREE.Float32BufferAttribute(t.normal,3)),s.GeomUtil.UnitTextureCylinder[e].addAttribute("uv",new THREE.Float32BufferAttribute(t.uv,2))}}return s.GeomUtil.UnitTextureCylinder},getUnitTextureBox:function(){if(null===s.GeomUtil.UnitTextureBox){s.GeomUtil.UnitTextureBox=new Array(6);for(var e=0;e<6;++e){var t=s.GeomUtil.getBoxData(e);s.GeomUtil.UnitTextureBox[e]=new THREE.BufferGeometry,s.GeomUtil.UnitTextureBox[e].setIndex(t.index),s.GeomUtil.UnitTextureBox[e].addAttribute("position",new THREE.Float32BufferAttribute(t.vertex,3)),s.GeomUtil.UnitTextureBox[e].addAttribute("normal",new THREE.Float32BufferAttribute(t.normal,3)),s.GeomUtil.UnitTextureBox[e].addAttribute("uv",new THREE.Float32BufferAttribute(t.uv,2))}}return s.GeomUtil.UnitTextureBox},getBoxBufferGeometryWithUvMatrices:function(e){for(var t,i=[],r=new THREE.Matrix3,n=new THREE.Vector3,a=!!e,o=0;o<6;++o){t=new THREE.BufferGeometry;var l=s.GeomUtil.getBoxData(o);if(a){var u=[];r.set(e[6*o],e[6*o+2],e[6*o+4],e[6*o+1],e[6*o+3],e[6*o+5],0,0,1);for(var c=0,h=l.uv.length;c<h;c+=2)n.set(l.uv[c],l.uv[c+1],1),n.applyMatrix3(r),u.push(n.x),u.push(n.y);t.addAttribute("uv",new THREE.Float32BufferAttribute(u,2))}t.setIndex(new THREE.BufferAttribute(Uint32Array.from(l.index),1)),t.addAttribute("position",new THREE.Float32BufferAttribute(l.vertex,3)),t.addAttribute("normal",new THREE.Float32BufferAttribute(l.normal,3)),i.push(t)}return s.GeomUtil.mergeBufferGeometries2(i)},getPipeBufferGeometryWithUvMatrices:function(e){var t=s.GeomUtil.getPipeData(32),i=t.edges,r=!(!e||18!==e.length),n=new THREE.BufferGeometry;if(r){for(var a=[],o=0,l=e.length;o<l;o+=6){var u=new THREE.Matrix3;u.set(e[6*o],e[6*o+2],e[6*o+4],e[6*o+1],e[6*o+3],e[6*o+5],0,0,1),a.push(u)}for(var c=[],h=new THREE.Vector3,d=4*(i+1),f=d+2*i,p=0,m=t.uv.length;p<m;p+=2)h.set(t.uv[p],t.uv[p+1],1),p<d?h.applyMatrix3(a[0]):p<f?h.applyMatrix3(a[1]):h.applyMatrix3(a[2]),c.push(h.x),c.push(h.y);n.addAttribute("uv",new THREE.Float32BufferAttribute(c,2))}return n.setIndex(new THREE.Uint32BufferAttribute(t.index,1)),n.addAttribute("position",new THREE.Float32BufferAttribute(t.vertex,3)),n.addAttribute("normal",new THREE.Float32BufferAttribute(t.normal,3)),n},getWorldMatrixOfMesh:function(e){for(var t=[],i=e.parent;i;)t.push(i.matrix),i=i.parent;var r=new THREE.Matrix4;if(t.length>0){r=t[t.length-1];for(var n=t.length-2;n>=0;--n)r.multiply(t[n])}var a=new THREE.Matrix4;return a.multiplyMatrices(r,e.matrix),a},getWorldPositionOfMesh:function(e,t){t||(t=new THREE.Matrix4);var i=new THREE.Matrix4;i.getInverse(t);var r=e.clone();return r.applyMatrix4(i),r},getBoundingBoxWorldOfMesh:function(e){var t=e.boundingBox;return t||(e.geometry.boundingBox||e.geometry.computeBoundingBox(),t=e.geometry.boundingBox),t.clone()},getBoundingBoxWorldOfGeometry:function(e){return e.boundingBox||e.computeBoundingBox(),e.boundingBox.clone()},mergeBufferGeometries:function(e,t){for(var i=null!==e[0].geometry.index,r=new Set(Object.keys(e[0].geometry.attributes)),n=new Set(Object.keys(e[0].geometry.morphAttributes)),a={},o={},s=new THREE.BufferGeometry,l=0;l<e.length;++l){var u=e[l].geometry;if(i!==(null!==u.index))return null;for(var c in u.attributes){if(!r.has(c))return console.log("attributes not Used: ",c),null;void 0===a[c]&&(a[c]=[]),a[c].push(u.attributes[c])}for(var c in u.morphAttributes){if(!n.has(c))return null;void 0===o[c]&&(o[c]=[]),o[c].push(u.morphAttributes[c])}void 0!==u.userData&&(s.userData=s.userData||{},s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(u.userData))}if(i){for(var h=0,d=[],f=0,l=0;l<e.length;++l){var p=e[l].geometry.index;if(h>0){p=p.clone();for(var m=0;m<p.count;++m)p.setX(m,p.getX(m)+h)}d.push(p),h+=e[l].geometry.attributes.position.count,void 0===t[e[l].name]&&(t[e[l].name]=[]),t[e[l].name].push({nodeId:e[l].nodeId,indexStart:f,indexCount:p.count}),f+=p.count}var v=this.mergeBufferAttributes(d);if(!v)return null;s.index=v}for(var c in a){var g=this.mergeBufferAttributes(a[c]);if(!g)return null;s.addAttribute(c,g)}for(var c in o){var y=o[c][0].length;if(0===y)break;s.morphAttributes=s.morphAttributes||{},s.morphAttributes[c]=[];for(var l=0;l<y;++l){for(var M=[],m=0;m<o[c].length;++m)M.push(o[c][m][l]);var E=this.mergeBufferAttributes(M);if(!E)return null;s.morphAttributes[c].push(E)}}return s},mergeBufferGeometries2:function(e){for(var t=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r={},n=new THREE.BufferGeometry,a=0;a<e.length;++a){var o=e[a];if(t!==(null!==o.index))return null;for(var s in o.attributes){if(!i.has(s))return null;void 0===r[s]&&(r[s]=[]),r[s].push(o.attributes[s])}}if(t){for(var l=0,u=[],a=0;a<e.length;++a){var c=e[a].index;if(l>0){c=c.clone();for(var h=0;h<c.count;++h)c.setX(h,c.getX(h)+l)}u.push(c),l+=e[a].attributes.position.count}var d=this.mergeBufferAttributes(u);if(!d)return null;n.index=d}for(var s in r){var f=this.mergeBufferAttributes(r[s]);if(!f)return null;n.addAttribute(s,f)}return n},mergeBufferAttributes:function(e){for(var t,i,r,n=0,a=0;a<e.length;++a){var o=e[a];if(o.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return null;if(void 0===i&&(i=o.itemSize),i!==o.itemSize)return null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return null;n+=o.array.length}for(var s=new t(n),l=0,u=0;u<e.length;++u)s.set(e[u].array,l),l+=e[u].array.length;return new THREE.BufferAttribute(s,i,r)},applyMatrix3ToBuffer:function(){var e=new THREE.Vector3;return function(t,i){for(var r=0,n=i.length;r<n;r+=3)e.x=i[r+0],e.y=i[r+1],e.z=i[r+2],e.applyMatrix3(t),i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z;return i}}(),applyMatrix4ToBuffer:function(){var e=new THREE.Vector3;return function(t,i){for(var r=0,n=i.length;r<n;r+=3)e.x=i[r+0],e.y=i[r+1],e.z=i[r+2],e.applyMatrix4(t),i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z;return i}}(),normalizeBuffer:function(e){for(var t,i,r,n,a=0,o=e.length;a<o;a+=3)t=e[a],i=e[a+1],r=e[a+2],n=1/Math.sqrt(t*t+i*i+r*r),e[a+0]=t*n,e[a+1]=i*n,e[a+2]=r*n},disposeBufferFromGeometry:function(e,t){for(var i=0,r=t.length;i<r;i++){var n=e.getAttribute(t[i]);n&&(n.array=null)}},disposeIndexBufferFromGeometry:function(e){e.index&&(e.index.array=null)},copyMeshProperties:function(e,t){e.name=t.name,e.up.copy(t.up),e.position.copy(t.position),e.quaternion.copy(t.quaternion),e.scale.copy(t.scale),e.matrix.copy(t.matrix),e.matrixWorld.copy(t.matrixWorld),e.matrixAutoUpdate=t.matrixAutoUpdate,e.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate},createBufferGeometryWithPosAndSkin:function(e){var t=new THREE.BufferGeometry;if(e.isBufferGeometry||e._bufferGeometry){var i=e.isBufferGeometry?e:e._bufferGeometry;if(!i.getAttribute("position"))return null;t.addAttribute("position",i.getAttribute("position")),i.getAttribute("skinIndex")&&t.addAttribute("skinIndex",i.getAttribute("skinIndex")),i.getAttribute("skinWeight")&&t.addAttribute("skinWeight",i.getAttribute("skinWeight"));var r=i.getIndex();r&&t.setIndex(r)}else if(e.isGeometry){if(0===e.vertices.length)return null;var n=new THREE.Float32BufferAttribute(3*e.vertices.length,3);if(t.addAttribute("position",n.copyVector3sArray(e.vertices)),e.skinIndices.length>0){var a=new THREE.Float32BufferAttribute(4*e.skinIndices.length,4);t.addAttribute("skinIndex",a.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var o=new THREE.Float32BufferAttribute(4*e.skinWeights.length,4);this.addAttribute("skinWeight",o.copyVector4sArray(e.skinWeights))}if(e.faces.length){for(var s=e.faces,l=[],u=0;u<s.length;u++){var c=s[u];l.push(c.a,c.b,c.c)}t.setIndex(l)}}if(!t.getIndex()){for(var h,d=[],f=Math.floor(t.attributes.position.count/3),p=0;p<f;p++)h=3*p,d.push(h,h+1,h+2);t.setIndex(d)}return t},limitGeometryBufferSize:function(e){var t,i,r,n,a,o;if(e.groups.length){var s=e.groups,l=!1;for(i=0,r=s.length;i<r;i++)if(s[i].count>45e6){l=!0;break}if(!l)return;for(e.clearGroups(),i=0,r=s.length;i<r;i++){var u=s[i];if((n=u.count)>45e6){for(a=Math.floor(n/45e6),o=n%45e6,t=0;t<a;t++)e.addGroup(u.start+45e6*t,45e6,u.materialIndex);o&&e.addGroup(u.start+45e6*a,o,u.materialIndex)}else e.addGroup(u.start,u.count,u.materialIndex)}}else if((n=e.index?e.index.count:0)>45e6){for(a=Math.floor(n/45e6),o=n%45e6,t=0;t<a;t++)e.addGroup(45e6*t,45e6,0);o&&e.addGroup(45e6*a,o,0)}},getUnitLightmapBox:function(){if(void 0===s.GeomUtil.UnitLightmapBoxGeometry){for(var e,t,i=[],r=[],n=[],a=[],o=0,l=0;l<6;++l){var u=s.GeomUtil.getBoxData(l);for(e=0,t=u.index.length;e<t;e++){var c=u.index[e];i.push(u.vertex[3*c]),i.push(u.vertex[3*c+1]),i.push(u.vertex[3*c+2]),r.push(u.normal[3*c]),r.push(u.normal[3*c+1]),r.push(u.normal[3*c+2]),n.push(u.uv[2*c]),n.push(u.uv[2*c+1]),a.push(e+o)}o+=u.index.length}s.GeomUtil.UnitLightmapBoxGeometry=new THREE.BufferGeometry,s.GeomUtil.UnitLightmapBoxGeometry.setIndex(a),s.GeomUtil.UnitLightmapBoxGeometry.addAttribute("position",new THREE.Float32BufferAttribute(i,3)),s.GeomUtil.UnitLightmapBoxGeometry.addAttribute("normal",new THREE.Float32BufferAttribute(r,3)),s.GeomUtil.UnitLightmapBoxGeometry.addAttribute("uv",new THREE.Float32BufferAttribute(n,2))}return s.GeomUtil.UnitLightmapBoxGeometry},getUnitLightmapBoxM:function(){if(void 0===s.GeomUtil.UnitLightmapBoxMGeometry){s.GeomUtil.UnitLightmapBoxMGeometry=new Array(6);for(var e=0;e<6;++e){for(var t=s.GeomUtil.getBoxData(e),i=[],r=[],n=[],a=[],o=0,l=t.index.length;o<l;o++){var u=t.index[o];r.push(t.vertex[3*u]),r.push(t.vertex[3*u+1]),r.push(t.vertex[3*u+2]),n.push(t.normal[3*u]),n.push(t.normal[3*u+1]),n.push(t.normal[3*u+2]),a.push(t.uv[2*u]),a.push(t.uv[2*u+1]),i.push(o)}s.GeomUtil.UnitLightmapBoxMGeometry[e]=new THREE.BufferGeometry,s.GeomUtil.UnitLightmapBoxMGeometry[e].setIndex(i),s.GeomUtil.UnitLightmapBoxMGeometry[e].addAttribute("position",new THREE.Float32BufferAttribute(r,3)),s.GeomUtil.UnitLightmapBoxMGeometry[e].addAttribute("normal",new THREE.Float32BufferAttribute(n,3)),s.GeomUtil.UnitLightmapBoxMGeometry[e].addAttribute("uv",new THREE.Float32BufferAttribute(a,2))}}return s.GeomUtil.UnitLightmapBoxMGeometry},getUnitLightmapPipeM:function(){if(void 0===s.GeomUtil.UnitLightmapPipeMGeometry){var e,t,i=[],r=[],n=[],a=[],o=s.GeomUtil.getPipeData(32);for(e=0,t=o.index.length;e<t;e++){var l=o.index[e];i.push(o.vertex[3*l]),i.push(o.vertex[3*l+1]),i.push(o.vertex[3*l+2]),r.push(o.normal[3*l]),r.push(o.normal[3*l+1]),r.push(o.normal[3*l+2]),n.push(o.uv[2*l]),n.push(o.uv[2*l+1]),a.push(e)}s.GeomUtil.UnitLightmapPipeMGeometry=new THREE.BufferGeometry,s.GeomUtil.UnitLightmapPipeMGeometry.setIndex(a),s.GeomUtil.UnitLightmapPipeMGeometry.addAttribute("position",new THREE.Float32BufferAttribute(i,3)),s.GeomUtil.UnitLightmapPipeMGeometry.addAttribute("normal",new THREE.Float32BufferAttribute(r,3)),s.GeomUtil.UnitLightmapPipeMGeometry.addAttribute("uv",new THREE.Float32BufferAttribute(n,2))}return s.GeomUtil.UnitLightmapPipeMGeometry},getUnitLightmapPipe:function(){if(void 0===s.GeomUtil.UnitLightmapPipeGeometry){var e,t,i=[],r=[],n=[],a=[],o=s.GeomUtil.UnitCylinderInstance,l=o.getAttribute("position").array,u=o.getAttribute("normal").array,c=o.getAttribute("uv").array,h=o.getIndex().array;for(e=0,t=h.length;e<t;e++){var d=h[e];i.push(l[3*d]),i.push(l[3*d+1]),i.push(l[3*d+2]),r.push(u[3*d]),r.push(u[3*d+1]),r.push(u[3*d+2]),n.push(c[2*d]),n.push(c[2*d+1]),a.push(e)}s.GeomUtil.UnitLightmapPipeGeometry=new THREE.BufferGeometry,s.GeomUtil.UnitLightmapPipeGeometry.setIndex(a),s.GeomUtil.UnitLightmapPipeGeometry.addAttribute("position",new THREE.Float32BufferAttribute(i,3)),s.GeomUtil.UnitLightmapPipeGeometry.addAttribute("normal",new THREE.Float32BufferAttribute(r,3)),s.GeomUtil.UnitLightmapPipeGeometry.addAttribute("uv",new THREE.Float32BufferAttribute(n,2))}return s.GeomUtil.UnitLightmapPipeGeometry},getGeometrySplitByPlane:function(e,t){var i="front",r="back",n="on",a=["a","b","c"];if("BufferGeometry"!=e.type){var o=new THREE.BufferGeometry;o.fromGeometry(e),e=o}for(var l=new s.SplitGeometryBuilder(e,t),u=[],c=[],h=e.attributes.position.array,d=new THREE.Vector3,f=0;f<h.length;f+=3){d.set(h[f],h[f+1],h[f+2]);var p=function(e,t){return t.distanceToPoint(e)}(d,t),m=function(e){return e<0?r:e>0?i:n}(p);u.push(p),c.push(m)}for(var v=e.index.array,g=0,f=(v.length,0);f<v.length;f+=3){for(var y=[],M=f;M<f+3;M++)y.push(c[v[M]]);if(-1!==y.indexOf(i)||-1===y.indexOf(r)){var E={a:v[f],b:v[f+1],c:v[f+2]};l.startFace(g,E);var b=a[a.length-1],x=v[f+2],I=u[x],T=c[x];a.map(function(e){var t=E[e],a=u[t],o=c[t];o===i&&(T===r?(l.addIntersection(b,e,I,a),l.addVertex(e)):l.addVertex(e)),o===n&&l.addVertex(e),o===r&&T===i&&l.addIntersection(b,e,I,a),b=e,x=t,T=o,I=a}),l.endFace(),g++}}var w=new THREE.BufferGeometry;return w.addAttribute("position",new THREE.Float32BufferAttribute(l.targetPositions,3)),w.addAttribute("normal",new THREE.Float32BufferAttribute(l.targetNormals,3)),w.addAttribute("uv",new THREE.Float32BufferAttribute(l.targetUvs,2)),w.setIndex(new THREE.Uint32BufferAttribute(l.targetIndices,1)),w},intersectBox:function(e,t){for(var i=new THREE.Vector3,r=new THREE.Vector3,n=0,a=e.planes,o=0;o<6;o++){var s=a[o];i.x=s.normal.x>0?t.min.x:t.max.x,r.x=s.normal.x>0?t.max.x:t.min.x,i.y=s.normal.y>0?t.min.y:t.max.y,r.y=s.normal.y>0?t.max.y:t.min.y,i.z=s.normal.z>0?t.min.z:t.max.z,r.z=s.normal.z>0?t.max.z:t.min.z;var l=s.distanceToPoint(i),u=s.distanceToPoint(r);if(l<0&&u<0)return!1;l*u>=0&&++n}return 6===n?"in":"intersect"},satForAxes:function(e,t,i,r,n){var a,o;for(a=0,o=e.length-3;a<=o;a+=3){var s=new THREE.Vector3(e[a],e[a+1],e[a+2]),l=n.x*Math.abs(s.x)+n.y*Math.abs(s.y)+n.z*Math.abs(s.z),u=t.dot(s),c=i.dot(s),h=r.dot(s);if(Math.max(-Math.max(u,c,h),Math.min(u,c,h))>l)return!1}return!0},boxIntersectsTriangle:function(e,t){var i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3,o=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3;u.copy(e.getCenter()),c=e.max.clone().sub(u),i=t.a.clone().sub(u),r=t.b.clone().sub(u),n=t.c.clone().sub(u),a=r.clone().sub(i),o=n.clone().sub(r),l=i.clone().sub(n);var d=[0,-a.z,a.y,0,-o.z,o.y,0,-l.z,l.y,a.z,0,-a.x,o.z,0,-o.x,l.z,0,-l.x,-a.y,a.x,0,-o.y,o.x,0,-l.y,l.x,0];return!!s.GeomUtil.satForAxes(d,i,r,n,c)&&(d=[1,0,0,0,1,0,0,0,1],!!s.GeomUtil.satForAxes(d,i,r,n,c)&&(h=a.clone().cross(o),d=[h.x,h.y,h.z],s.GeomUtil.satForAxes(d,i,r,n,c)))},geometryVolume:function(a,o){var l=o.modelManager.isMeterUnit(),u=l?"m":"mm",c=n(a);if(!s.Utils.isDefined(n))return{volume:null,boundingBox:null,unit:u};var h=c.position,d=c.index,f=c.normal;if(!this.isGeometryClosed(d))return console.log("object is not closed"),0;for(var p=new THREE.Vector3,m=new THREE.Vector3,v=new THREE.Vector3,g=new THREE.Vector3,y=new THREE.Vector3,M=new THREE.Vector3,E=0,b=0;b<d.length;b+=3){var x=3*d[b],I=3*d[b+1],T=3*d[b+2];p.set(h[x],h[x+1],h[x+2]),m.set(h[I],h[I+1],h[I+2]),v.set(h[T],h[T+1],h[T+2]),g.set(f[x],f[x+1],f[x+2]),y.set(f[I],f[I+1],f[I+2]),M.set(f[T],f[T+1],f[T+2]);var w=[p,m,v],C=e(w),S=t(w),A=this.triangleArea(C);if(!(A<s.Math.EPSILON12)){var k=A*S.topPoints[0].z,R=S.maxIndex,B=[].concat(_toConsumableArray(S.topPoints));B.splice(R,1);var L=[].concat(w);L.splice(R,1),B.push(L[0]),B.push(w[R]),L.push(B[1]),L.push(w[R]);var O=this.mitsubishiConeVolume(B);O+=this.mitsubishiConeVolume(L),O=k-O,O=i([g,y,M])?O:-O,E+=O}}var P=c.boundingBox;return E=r(E,P),{volume:E,boundingBox:P,unit:u}},isGeometryClosed:function(e){var t={};return e.forEach(function(i,r){var n=(r+1)%3==0?r-2:r+1;n=e[n];var a=i>n?i+"_"+n:n+"_"+i,o=t[a];s.Utils.isDefined(o)?o&&(t[a]=!1):t[a]=!0}),!0},triangleArea:function(e){return!!Array.isArray(e)&&(3===e.length&&(a.subVectors(e[1],e[0]),o.subVectors(e[2],e[0]),u.crossVectors(a,o),u.length()/2))},mitsubishiConeVolume:function(e){return!!Array.isArray(e)&&(4===e.length&&(a.subVectors(e[1],e[0]),o.subVectors(e[2],e[0]),l.subVectors(e[3],e[0]),u.crossVectors(a,o),Math.abs(u.dot(l))/6))}},s.GeomUtil.getBoxMBuffer=function(){for(var e,t,i=[],r=[],n=[],a=0,o=0;o<6;++o){var l=s.GeomUtil.getBoxData(o);for(e=0,t=l.vertex.length;e<t;e++)i.push(l.vertex[e]);for(e=0,t=l.index.length;e<t;e++)n.push(l.index[e]+a);for(a+=l.vertex.length/3,e=0,t=l.normal.length;e<t;e++)r.push(l.normal[e])}return function(e){var t=null;if(e){var a=new THREE.Matrix3,o=new THREE.Vector3;t=[];for(var l=0;l<6;++l){var u=s.GeomUtil.getBoxData(l);a.set(e[6*l],e[6*l+2],e[6*l+4],e[6*l+1],e[6*l+3],e[6*l+5],0,0,1);for(var c=0,h=u.uv.length;c<h;c+=2)o.set(u.uv[c],u.uv[c+1],1),o.applyMatrix3(a),t.push(o.x),t.push(o.y)}}return{vertex:i,normal:r,uv:t,index:n}}}(),s.GeomUtil.getPipeMBuffer=function(){var e=s.GeomUtil.getPipeData(32),t=e.edges,i=e.vertex,r=e.normal,n=e.index;return function(e){var a=null;if(!(!e||18!==e.length)){a=[];for(var o=[],l=0,u=e.length/6;l<u;l++){var c=new THREE.Matrix3;c.set(e[6*l],e[6*l+2],e[6*l+4],e[6*l+1],e[6*l+3],e[6*l+5],0,0,1),o.push(c)}for(var h=s.GeomUtil.getPipeData(32),d=4*(t+1),f=d+2*t,p=new THREE.Vector3,m=0,v=h.uv.length;m<v;m+=2)p.set(h.uv[m],h.uv[m+1],1),m<d?p.applyMatrix3(o[0]):m<f?p.applyMatrix3(o[1]):p.applyMatrix3(o[2]),a.push(p.x),a.push(p.y)}return{vertex:i,normal:r,uv:a,index:n}}}(),s.GeomUtil.isVector3Equal=function(){return function(e,t,i){return void 0===i?t.x===e.x&&t.y===e.y&&t.z===e.z:Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i&&Math.abs(t.z-e.z)<i}}();var d=new THREE.Vector3,f=new THREE.Quaternion,p=new THREE.Vector3}(),s.Logger={log:function(){s.GlobalData.DEBUG&&console.log.apply(console,arguments)},debug:function(){s.GlobalData.DEBUG&&console.debug.apply(console,arguments)},warn:function(){s.GlobalData.DEBUG&&console.warn.apply(console,arguments)},error:function(){s.GlobalData.DEBUG&&console.error.apply(console,arguments)},time:function(){s.GlobalData.DEBUG&&console.time.apply(console,arguments)},timeEnd:function(){s.GlobalData.DEBUG&&console.timeEnd.apply(console,arguments)}},THREE.BasisTextureLoader=function(e){THREE.Loader.call(this,e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},this.detectedSupport=!1},THREE.BasisTextureLoader.taskCache=new WeakMap,THREE.BasisTextureLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.BasisTextureLoader,setTranscoderPath:function(e){return this.transcoderPath=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},detectSupport:function(e){var t=this.workerConfig;if(t.astcSupported=!!e.extensions.get("WEBGL_compressed_texture_astc"),t.bptcSupported=!!e.extensions.get("EXT_texture_compression_bptc"),t.etcSupported=!!e.extensions.get("WEBGL_compressed_texture_etc1"),t.dxtSupported=!!e.extensions.get("WEBGL_compressed_texture_s3tc"),t.pvrtcSupported=!!e.extensions.get("WEBGL_compressed_texture_pvrtc")||!!e.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),t.astcSupported)t.format=THREE.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4;else if(t.bptcSupported)t.format=THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC7_M5;else if(t.dxtSupported)t.format=THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3;else if(t.pvrtcSupported)t.format=THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!t.etcSupported)throw new Error("THREE.BasisTextureLoader: No suitable compressed texture format found.");t.format=THREE.BasisTextureLoader.BASIS_FORMAT.cTFETC1}return this.detectedSupport=!0,this},load:function(e,t,i,r){var n=this,a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(i){if(THREE.BasisTextureLoader.taskCache.has(i)){return THREE.BasisTextureLoader.taskCache.get(i).promise.then(t).catch(r)}n._createTexture(i,e).then(t).catch(r)},i,r)},_createTexture:function(e,t){var i,r,n=this,a=e.byteLength,o=this._allocateWorker(a).then(function(t){return i=t,r=n.workerNextTaskID++,new Promise(function(t,n){i._callbacks[r]={resolve:t,reject:n},i.postMessage({type:"transcode",id:r,buffer:e},[e])})}).then(function(e){var t,i=n.workerConfig,r=e.width,a=e.height,o=e.mipmaps,s=e.format;switch(s){case THREE.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4:t=new THREE.CompressedTexture(o,r,a,THREE.RGBA_ASTC_4x4_Format);break;case THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC7_M5:t=new THREE.CompressedTexture(o,r,a,THREE.RGBA_BPTC_Format);break;case THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC1:case THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3:t=new THREE.CompressedTexture(o,r,a,THREE.BasisTextureLoader.DXT_FORMAT_MAP[i.format],THREE.UnsignedByteType);break;case THREE.BasisTextureLoader.BASIS_FORMAT.cTFETC1:t=new THREE.CompressedTexture(o,r,a,THREE.RGB_ETC1_Format);break;case THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB:t=new THREE.CompressedTexture(o,r,a,THREE.RGB_PVRTC_4BPPV1_Format);break;case THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA:t=new THREE.CompressedTexture(o,r,a,THREE.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("THREE.BasisTextureLoader: No supported format available.")}return t.minFilter=1===o.length?THREE.LinearFilter:THREE.LinearMipMapLinearFilter,t.magFilter=THREE.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t});return o.catch(function(){return!0}).then(function(){i&&r&&(i._taskLoad-=a,delete i._callbacks[r])}),THREE.BasisTextureLoader.taskCache.set(e,{url:t,promise:o}),o},_initTranscoder:function(){var e=this;if(!this.transcoderPending){var t=new THREE.FileLoader(this.manager);t.setPath(this.transcoderPath);var i=new Promise(function(e,i){t.load("basis_transcoder.js",e,void 0,i)}),r=new THREE.FileLoader(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer");var n=new Promise(function(e,t){r.load("basis_transcoder.wasm",e,void 0,t)});this.transcoderPending=Promise.all([i,n]).then(function(t){var i=_slicedToArray(t,2),r=i[0],n=i[1],a=THREE.BasisTextureLoader.BasisWorker.toString(),o=["/* basis_transcoder.js */",r,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([o])),e.transcoderBinary=n})}return this.transcoderPending},_allocateWorker:function(e){var t=this;return this._initTranscoder().then(function(){if(t.workerPool.length<t.workerLimit){var i=new Worker(t.workerSourceURL);i._callbacks={},i._taskLoad=0,i.postMessage({type:"init",config:t.workerConfig,transcoderBinary:t.transcoderBinary}),i.onmessage=function(e){var t=e.data;switch(t.type){case"transcode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+t.type+'"')}},t.workerPool.push(i)}else t.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});var i=t.workerPool[t.workerPool.length-1];return i._taskLoad+=e,i})},dispose:function(){for(var e=0;e<this.workerPool.length;e++)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),THREE.BasisTextureLoader.BASIS_FORMAT={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},THREE.BasisTextureLoader.DXT_FORMAT={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},THREE.BasisTextureLoader.DXT_FORMAT_MAP={},THREE.BasisTextureLoader.DXT_FORMAT_MAP[THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC1]=THREE.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT,THREE.BasisTextureLoader.DXT_FORMAT_MAP[THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3]=THREE.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT,THREE.BasisTextureLoader.BasisWorker=function(){function e(e){var t;r=new Promise(function(i){t={wasmBinary:e,onRuntimeInitialized:i},BASIS(t)}).then(function(){var e=t,i=e.BasisFile,r=e.initializeBasis;n=i,r()})}function t(e){function t(){r.close(),r.delete()}var r=new n(new Uint8Array(e)),a=r.getImageWidth(0,0),o=r.getImageHeight(0,0),s=r.getNumLevels(0),l=r.getHasAlpha();if(!l)switch(i.format){case 9:i.format=8}if(!a||!o||!s)throw t(),new Error("THREE.BasisTextureLoader:\tInvalid .basis file");if(!r.startTranscoding())throw t(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");for(var u=[],c=0;c<s;c++){var h=r.getImageWidth(0,c),d=r.getImageHeight(0,c),f=new Uint8Array(r.getImageTranscodedSizeInBytes(0,c,i.format));if(!r.transcodeImage(f,0,c,i.format,0,l))throw t(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");u.push({data:f,width:h,height:d})}return t(),{width:a,height:o,hasAlpha:l,mipmaps:u,format:i.format}}var i,r,n;onmessage=function(n){var a=n.data;switch(a.type){case"init":i=a.config,e(a.transcoderBinary);break;case"transcode":r.then(function(){try{
for(var e=t(a.buffer),i=e.width,r=e.height,n=e.hasAlpha,o=e.mipmaps,s=e.format,l=[],u=0;u<o.length;++u)l.push(o[u].data.buffer);self.postMessage({type:"transcode",id:a.id,width:i,height:r,hasAlpha:n,mipmaps:o,format:s},l)}catch(e){console.error(e),self.postMessage({type:"error",id:a.id,error:e.message})}})}}},s.MaterialUtil={DefaultMaterial:new THREE.MeshPhongMaterial({color:255,side:THREE.DoubleSide}),DefaultWireframeColor:{color:new THREE.Color(0,0,0),opacity:.4},getBasisLibUrl:function(){return this.basisLibUrl||(window.BimfaceLoaderConfig&&window.BimfaceLoaderConfig.fullStaticHost?this.basisLibUrl=window.BimfaceLoaderConfig.fullStaticHost+"/lib/basis/":this.basisLibUrl="../../lib/basis/"),this.basisLibUrl},getBasisTextureLoader:function(){return void 0===this.basisTextureLoader&&(this.basisTextureLoader=new THREE.BasisTextureLoader,this.basisTextureLoader.setTranscoderPath(s.MaterialUtil.getBasisLibUrl())),this.basisTextureLoader},getDefaultStandardMaterial:function(){var e=null;return function(){return e||(e=new s.CloudStandardMaterial({color:0,side:THREE.DoubleSide})),e}}(),createInstancePhongMaterial:function(e){return e.clone()},updateBasicMaterial:function(e,t){e.needsUpdate=!0},setMatrixUniform:function(e){s.ShaderMaterial.ShaderLib.base_cust_clip.uniforms.transformMatrix.value=e},createPhongMaterial:function(e){var t=new THREE.MeshPhongMaterial(e);return t.type="FillFacePhong",t.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.fillFacePhong.uniforms]),t.vertexShader=THREE.ShaderLib.fillFacePhong.vertexShader,t.fragmentShader=THREE.ShaderLib.fillFacePhong.fragmentShader,t.side=THREE.DoubleSide,t},createStandardMaterial:function(e,t){var i;return t?(i=new w.IBLMaterial(e),i.type="IBL"):i=new s.CloudStandardMaterial(e),e.fillMap&&(i.defines.USE_FILLPATTERN=""),i},createInstanceMaterial:function(e,t,i){var r=s.MaterialUtil.createStandardMaterial(e,i);return r.defines.USE_INSTANCE="",t&&(r.defines.USE_INSTANCE_NORMAL=""),r.colorState=s.EnumShaderColorState.BLINK,r.refreshUniforms(),r},createNewStyleMaterial:function(e){var t=new THREE.MeshStandardMaterial(e);return t.type="NewStyle",t.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms]),t.vertexShader=THREE.ShaderLib.newStyle.vertexShader,t.fragmentShader=THREE.ShaderLib.newStyle.fragmentShader,t.metalness=0,t},createHighlightMaterial:function(){return this.createStandardMaterial(s.GlobalData.SelectionColor)},getBlinkMaterial:function(e,t){var i=s.MaterialUtil.getMaterialParameters(e),r=s.MaterialUtil.createStandardMaterial(i);return r.blinkColor.copy(t),r.colorState=s.EnumShaderColorState.BLINK,r.refreshUniforms(),r},getMaterialParameters:function(e){var t={};return e.hasOwnProperty("color")&&(t.color=e.color),t.opacity=1,t.transparent=!1,e.hasOwnProperty("opacity")&&(t.opacity=e.opacity,e.opacity<1&&(t.transparent=!0)),e.hasOwnProperty("side")&&(t.side=e.side),e.hasOwnProperty("emissive")&&(t.emissive=e.emissive),e.hasOwnProperty("specular")&&(t.specular=e.specular),e.hasOwnProperty("shininess")&&(t.shininess=e.shininess),e.hasOwnProperty("map")&&(t.map=e.map),e.useAlphaMap&&(t.useAlphaMap=e.useAlphaMap),e.hasOwnProperty("bumpMap")&&(t.bumpMap=e.bumpMap),e.hasOwnProperty("bumpScale")&&(t.bumpScale=e.bumpScale),e.hasOwnProperty("normalMap")&&(t.normalMap=e.normalMap),e.hasOwnProperty("normalScale")&&(t.normalScale=e.normalScale),e.hasOwnProperty("alphaMap")&&(t.alphaMap=e.alphaMap),e.hasOwnProperty("alphaTest")&&(t.alphaTest=e.alphaTest),e.hasOwnProperty("transparent")&&(t.transparent=e.transparent),e.hasOwnProperty("emissiveMap")&&(t.emissiveMap=e.emissiveMap),e.hasOwnProperty("envMap")&&(t.envMap=e.envMap),e.hasOwnProperty("envMapIntensity")&&(t.envMapIntensity=e.envMapIntensity),e.hasOwnProperty("roughness")&&(t.roughness=e.roughness),e.hasOwnProperty("metalness")&&(t.metalness=e.metalness),e.hasOwnProperty("originRoughness")&&(t.originRoughness=e.originRoughness),e.hasOwnProperty("originMetalness")&&(t.originMetalness=e.originMetalness),s.GlobalData.IBL&&e.hasOwnProperty("iblProbe")&&(t.iblProbe=e.iblProbe),e.hasOwnProperty("shift")&&(t.shift=e.shift),e.hasOwnProperty("pureColor")&&(t.pureColor=e.pureColor),e.hasOwnProperty("tag")&&(t.tag=e.tag),e.hasOwnProperty("textureColor")&&(t.textureColor=e.textureColor),e.hasOwnProperty("imageFade")&&(t.imageFade=e.imageFade),"cloudStandard"==e.type&&e.hasOwnProperty("lights")&&(t.lights=e.lights),e.hasOwnProperty("lightMap")&&(t.lightMap=e.lightMap),e.hasOwnProperty("lightMapIntensity")&&(t.lightMapIntensity=e.lightMapIntensity),e.hasOwnProperty("viewportSize")&&(t.viewportSize=e.viewportSize),e.hasOwnProperty("fillMap")&&(t.fillMap=e.fillMap),e.hasOwnProperty("heightLimitSampler")&&(t.heightLimitSampler=e.heightLimitSampler),e.hasOwnProperty("heightColorSampler")&&(t.heightColorSampler=e.heightColorSampler),e.hasOwnProperty("heightLimitOrthoMatrix")&&(t.heightLimitOrthoMatrix=e.heightLimitOrthoMatrix),e.hasOwnProperty("receiveIBL")&&(t.receiveIBL=e.receiveIBL),e.hasOwnProperty("localClipping")&&(t.localClipping=e.localClipping),e.hasOwnProperty("clippingPlanes")&&(t.clippingPlanes=e.clippingPlanes),t},nextHighestPowerOfTwo:function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},getImageByteSize:function(e){return e.width*e.height*4},ensurePowerOfTwo:function(e){if(0==e.width||0==e.height)return e;if(!THREE.Math.isPowerOfTwo(e.width)||!THREE.Math.isPowerOfTwo(e.height)){var t=document.createElement("canvas");t.width=s.MaterialUtil.nextHighestPowerOfTwo(e.width),t.height=s.MaterialUtil.nextHighestPowerOfTwo(e.height);return t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}return e},ensureQuadrate:function(e){var t=e.width,i=e.height;if(0==t||0==i||THREE.Math.isPowerOfTwo(t)&&THREE.Math.isPowerOfTwo(i)&&t===i)return e;THREE.Math.isPowerOfTwo(t)||(t=s.MaterialUtil.nextHighestPowerOfTwo(t)),THREE.Math.isPowerOfTwo(i)||(i=s.MaterialUtil.nextHighestPowerOfTwo(i));var r=0,n=0,a=e.width,o=e.height,l=Math.max(t,i);if(a>=o){o*=l/a,a=l,n=.5*(l-o)}else{a*=l/o,o=l,r=.5*(l-a)}var u=document.createElement("canvas");return u.width=u.height=l,u.getContext("2d").drawImage(e,r,n,a,o),u},getColorParamsByMaterial:function(e){return{rgbaColor:[e.color.r,e.color.g,e.color.b,e.opacity],transparent:e.transparent}},getHoverColorByColor:function(e){var t={};return t.r=e.r,t.g=e.g,t.b=e.b,t.a=s.MaterialUtil.getHoverOpacity(e.a),t},getHoverOpacity:function(e){return e>=.4?e-.3:e+.3},cloneMaterialBaseOnColor:function(e,t){if(!e.color&&!e.diffuse)return e;var i=e.clone();return i.opacity=t.opacity,i.transparent=t.transparent,i.color&&i.color.isColor&&t.color&&t.color.isColor&&i.color.copy(t.color),i.diffuse&&i.diffuse.isColor&&t.diffuse&&t.diffuse.isColor&&i.diffuse.copy(t.diffuse),void 0!==i.map&&t.map&&(i.map=t.map,i.alphaMap=t.alphaMap,i.alphaTest=t.alphaTest),i}},s.UIHelper={debugInfoDiv:null,lastDebugInfoDivShow:null,showPickedInformation:function(e){function t(){var e=n.debugInfoDiv;e&&"none"!==e.style.display&&(e.style.display="none",n.lastDebugInfoDivShow&&(e.removeEventListener("dblclick",t,!1),n.lastDebugInfoDivShow=!1))}var i=340,r=320,n=this;if(!e||!e.intersectInfo)return void t();var a=e.intersectInfo,o=e.canvasPos.x,s=e.canvasPos.y;this.debugInfoDiv||(this.debugInfoDiv=document.createElement("div"),this.debugInfoDiv.id="debugPickedInfo",this.debugInfoDiv.style.display="block",this.debugInfoDiv.style.position="absolute",this.debugInfoDiv.style.width=i+"px",this.debugInfoDiv.style.height=r+"px",this.debugInfoDiv.style.backgroundColor="#ffffdd",this.debugInfoDiv.style.borderWidth="2px",this.debugInfoDiv.style.borderStyle="solid",this.debugInfoDiv.style.opacity="0.8",document.body.appendChild(this.debugInfoDiv)),this.debugInfoDiv.style.display="",this.lastDebugInfoDivShow||(this.lastDebugInfoDivShow=!0,this.debugInfoDiv.addEventListener("dblclick",t,!1));var l=a.axisGridInfo,u=a.worldPosition,c="";c+="<span>&#9830;&nbsp;&nbsp;Base Information</span><ul style='width:340px;list-style:none'>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;border-bottom: 1px solid #ccc;float:left;width:80px;height:66px;text-align:left;line-height:66px'>ID</li>",c+="<li style='border:1px solid #ccc;float:left;width:200px;height:66px;text-align:left;'>"+a.selectedObjectId+"</li>",c+="</ul>",c+="</br><span>&#9830;&nbsp;&nbsp;Position</span><ul style='width:340px;list-style:none'>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px'>X</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px;border-right: 1px solid #ccc'>"+u.x+"</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px'>Y</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px;border-right: 1px solid #ccc'>"+u.y+"</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px;border-bottom: 1px solid #ccc'>Z</li>",c+="<li style='border:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px'>"+u.z+"</li>",c+="</ul>",l?(c+="</br><span>&#9830;&nbsp;&nbsp;Axis Grid Information</span><ul style='width:340px;list-style:none'>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px'>distanceX</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px;border-right: 1px solid #ccc'>("+l.numeralName+", "+l.offsetX+")</li>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px;border-bottom: 1px solid #ccc'>distanceY</li>",c+="<li style='border:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px'>("+l.abcName+", "+l.offsetY+")</li>",c+="</ul>"):(c+="</br><span>&#9830;&nbsp;&nbsp;Axis Grid Information</span><ul style='width:340px;list-style:none'>",c+="<li style='border-left:1px solid #ccc;border-top:1px solid #ccc;float:left;width:80px;height:33px;text-align:left;line-height:33px;border-bottom: 1px solid #ccc'>message</li>",c+="<li style='border:1px solid #ccc;float:left;width:200px;height:33px;text-align:left;line-height:33px'><span style='color: red'> not exist axis grid!!!</span></li>",c+="</ul>"),this.debugInfoDiv.innerHTML=c+"<br /><br />",function(e,t,n){if(e&&"none"!=e.style.display){var a,o,s=t+i,l=n+r;if(void 0!==t&&void 0!==n)if(window.innerWidth)a=s>window.innerWidth?window.pageXOffset+(t-i)+"px":window.pageXOffset+t+"px",o=l>window.innerHeight?window.pageYOffset+(n-r)+"px":window.pageYOffset+n+"px";else{var u=document.documentElement;a=u.scrollLeft+t+"px",o=u.scrollTop+n+"px"}else if(window.innerWidth)a=window.pageXOffset+(window.innerWidth-i)/2+"px",o=window.pageYOffset+(window.innerHeight-r)/2+"px";else{var u=document.documentElement;a=u.scrollLeft+(u.offsetWidth-i)/2+"px",o=u.scrollTop+(u.offsetHeight-r)/2+"px"}e.style.left=a,e.style.top=o}}(this.debugInfoDiv,o,s)}},s.Edge=function(){this.vertexIndex=new Array(2),this.faceIndex=new Array(2)},s.RemoveDuplicateIndex=function(e,t){function i(e,t){var i=a[e],r=a[t];return i.x!=r.x?i.x-r.x:i.y!=r.y?i.y-r.y:i.z-r.z}function r(e,t){var r=i(e,t);return 0==r?e-t:r}for(var n=e.length/3,a=new Array(n),o=new Array(n),s=0;s<n;++s)a[s]=new THREE.Vector3(e[3*s],e[3*s+1],e[3*s+2]),o[s]=s;o.sort(r);for(var l={},u=o[0],s=1;s<n;++s)0==i(u,o[s])?l[o[s]]=u:u=o[s];for(var c=new Array(t.length),s=0;s<t.length;++s)l.hasOwnProperty(t[s])?c[s]=l[t[s]]:c[s]=t[s];return c},s.RemoveDuplicateVertex=function(e,t){function i(e,t){return e-t}var r=s.RemoveDuplicateIndex(e,t);r.sort(i);var n=new Array,a=r[0];n.push(a);for(var o=1;o<r.length;++o)r[o]!=a&&(a=r[o],n.push(a));return n.sort(i)},s.BuildEdge=function(e,t,i){i=void 0==i?Math.PI/4:i;for(var r=s.RemoveDuplicateIndex(e,t),n=r.length,a=e.length/3,o=new Array(a+n),l=a,u=r.length/3,c=0;c<a;++c)o[c]=-1;for(var h=new Array(n),d=0,c=0;c<u;++c)for(var f=r[3*c+2],p=0;p<3;++p){var m=!1,v=r[3*c+p];if(f>v){m=!0;var g=f;f=v,v=g}var y=new s.Edge;y.vertexIndex[0]=f,y.vertexIndex[1]=v,y.faceIndex[0]=c,y.faceIndex[1]=c;var M=o[f];if(-1==M)o[f]=d,h[d]=y,o[l+d]=-1,d++;else for(;;){var E=h[M];if(E.vertexIndex[1]==v){E.faceIndex[1]=c;break}var b=o[l+M];if(-1==b){o[l+M]=d,h[d]=y,o[l+d]=-1,d++;break}M=b}m||(f=v)}for(var x=[],c=0;c<d;++c){var E=h[c];if(E.faceIndex[0]==E.faceIndex[1])x.push(E.vertexIndex[0]),x.push(E.vertexIndex[1]);else{var I=E.faceIndex[0],T=r[3*I],w=r[3*I+1],C=r[3*I+2],S=new THREE.Vector3(e[3*T],e[3*T+1],e[3*T+2]),A=new THREE.Vector3(e[3*w],e[3*w+1],e[3*w+2]),k=new THREE.Vector3(e[3*C],e[3*C+1],e[3*C+2]),R=S.sub(A),B=A.sub(k),L=R.cross(B);L.normalize();var O=E.faceIndex[1];T=r[3*O],w=r[3*O+1],C=r[3*O+2],S=new THREE.Vector3(e[3*T],e[3*T+1],e[3*T+2]),A=new THREE.Vector3(e[3*w],e[3*w+1],e[3*w+2]),k=new THREE.Vector3(e[3*C],e[3*C+1],e[3*C+2]),R=S.sub(A),B=A.sub(k);var P=R.cross(B);P.normalize(),Math.abs(L.dot(P))<i&&(x.push(E.vertexIndex[0]),x.push(E.vertexIndex[1]))}}return x},s.GetFaceIndex=function(e,t,i,r,n){for(var a=i.length/3,o=new Array,s=0;s<a;++s){var l=i[3*s],u=new THREE.Vector3(t[3*l],t[3*l+1],t[3*l+2]),c=u.dot(n);if(Math.abs(c-1)<.001){var h=new THREE.Vector3(e[3*l],e[3*l+1],e[3*l+2]),d=-h.dot(u),f=Math.abs(r.dot(u)+d);Math.abs(f)<3&&o.push(i[3*s],i[3*s+1],i[3*s+2])}}return o},s.BuildRoomEdge=function(e,t,i,r,n){function a(e,t){return Math.abs(e-t)<=.1}var o=e.length;a(e[0].x,e[o-1].x)&&a(e[0].y,e[o-1].y)||e.push(e[0]),o=e.length;for(var s=[],l=[],u=new THREE.BufferGeometry,c=0;c<o;++c)l.push(e[c].x-t,e[c].y-i,e[c].z-r);for(var c=0;c<o;++c)l.push(e[c].x-t,e[c].y-i,e[c].z-r+n);for(var c=0;c<2*o-1;++c)c!=o-1&&s.push(c,c+1);for(var c=0;c<o-1;++c)s.push(c,c+o);return u.setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),u.addAttribute("position",new THREE.BufferAttribute(new Float32Array(l),3)),u.computeBoundingSphere(),u},THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse,this.loadBuffer=THREE.DDSLoader.loadBuffer},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(e,t){function i(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},n=i("DXT1"),a=i("DXT3"),o=i("DXT5"),s=i("ETC1"),l=new Int32Array(e,0,31);if(542327876!==l[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;if(4&!l[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),r;var u,c=l[21],h=!1;switch(c){case n:u=8,r.format=THREE.RGB_S3TC_DXT1_Format;break;case a:u=16,r.format=THREE.RGBA_S3TC_DXT3_Format;break;case o:u=16,r.format=THREE.RGBA_S3TC_DXT5_Format;break;case s:u=8,r.format=THREE.RGB_ETC1_Format;break;default:if(!(32===l[22]&&16711680&l[23]&&65280&l[24]&&255&l[25]&&4278190080&l[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(c)),r;h=!0,u=64,r.format=THREE.RGBAFormat}r.mipmapCount=1,131072&l[2]&&!1!==t&&(r.mipmapCount=Math.max(1,l[7]));var d=l[28];if(r.isCubemap=!!(512&d),r.isCubemap&&(!(1024&d)||!(2048&d)||!(4096&d)||!(8192&d)||!(16384&d)||!(32768&d)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=l[4],r.height=l[3];for(var f=l[1]+4,p=r.isCubemap?6:1,m=0;m<p;m++)for(var v=r.width,g=r.height,y=0;y<r.mipmapCount;y++){if(h)var M=function(e,t,i,r){for(var n=i*r*4,a=new Uint8Array(e,t,n),o=new Uint8Array(n),s=0,l=0,u=0;u<r;u++)for(var c=0;c<i;c++){var h=a[l];l++;var d=a[l];l++;var f=a[l];l++;var p=a[l];l++,o[s]=f,s++,o[s]=d,s++,o[s]=h,s++,o[s]=p,s++}return o}(e,f,v,g),E=M.length;else var E=Math.max(4,v)/4*Math.max(4,g)/4*u,M=new Uint8Array(e,f,E);var b={data:M,width:v,height:g};r.mipmaps.push(b),f+=E,v=Math.max(v>>1,1),g=Math.max(g>>1,1)}return r},THREE.DDSLoader.loadBuffer=function(e,t){var i=[],r=new THREE.CompressedTexture;r.image=i;var n=this._parser(e,!0);if(n.isCubemap)for(var a=n.mipmaps.length/n.mipmapCount,o=0;o<a;o++){i[o]={mipmaps:[]};for(var s=0;s<n.mipmapCount;s++)i[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+s]),i[o].format=n.format,i[o].width=n.width,i[o].height=n.height}else r.image.width=n.width,r.image.height=n.height,r.mipmaps=n.mipmaps;1===n.mipmapCount&&(r.minFilter=THREE.LinearFilter),r.format=n.format,r.needsUpdate=!0,t&&t(r)},function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.sourceGeometry=t,this.slicePlane=i,this.addedVertices=[],this.addedIntersections=[];var r=this.sourceGeometry.getAttribute("uv");this.uvs=r?r.array:null;var n=this.sourceGeometry.getAttribute("normal");this.normals=n?n.array:null;var a=this.sourceGeometry.getAttribute("position");this.positions=a?a.array:null,this.targetIndices=[],this.targetNormals=[],this.targetUvs=[],this.targetPositions=[]}return _createClass(e,[{key:"startFace",value:function(e,t){this.sourceFaceIndex=e,this.sourceFace=t,this.faceIndices=[]}},{key:"endFace",value:function(){this._addFace(this.faceIndices)}},{key:"addVertex",value:function(e){var t,i=this.sourceFace[e];if(this.addedVertices.hasOwnProperty(i))t=this.addedVertices[i];else{var r=3*i;this.targetPositions.push(this.positions[r]),this.targetPositions.push(this.positions[r+1]),this.targetPositions.push(this.positions[r+2]),t=this.targetPositions.length/3-1,this.addedVertices[i]=t,this._addUv(e),this._addNormal(e)}this.faceIndices.push(t)}},{key:"addIntersection",value:function(e,t,i,r){var n,a=Math.abs(i)/(Math.abs(i)+Math.abs(r)),o=this.sourceFace[e],s=this.sourceFace[t],l=this._intersectionId(o,s);if(this.addedIntersections.hasOwnProperty(l))n=this.addedIntersections[l];else{var u=3*o,c=3*s,h=this.positions[u],d=this.positions[u+1],f=this.positions[u+2];this.targetPositions.push(h+(this.positions[c]-h)*a),this.targetPositions.push(d+(this.positions[c+1]-d)*a),this.targetPositions.push(f+(this.positions[c+2]-f)*a),n=this.targetPositions.length/3-1,this.addedIntersections[l]=n,this._addIntersectionUv(e,t,a),this._addIntersectionNormal(e,t,a)}this.faceIndices.push(n)}},{key:"_addUv",value:function(e){if(this.uvs){var t=2*this._keyIndex(e),i=this.uvs[t],r=this.uvs[t+1];this.targetUvs.push(i),this.targetUvs.push(r)}}},{key:"_addIntersectionUv",value:function(e,t,i){if(this.uvs){var r=2*this._keyIndex(e),n=2*this._keyIndex(t),a=this.uvs[r],o=this.uvs[r+1],s=this.uvs[n],l=this.uvs[n+1],u=a+(s-a)*i,c=o+(l-o)*i;this.targetUvs.push(u),this.targetUvs.push(c)}}},{key:"_addNormal",value:function(e){if(this.normals){var t=3*this._keyIndex(e);this.targetNormals.push(this.normals[t]),this.targetNormals.push(this.normals[t+1]),this.targetNormals.push(this.normals[t+2])}}},{key:"_addIntersectionNormal",value:function(e,t,i){if(this.normals){var r=3*this._keyIndex(e),n=3*this._keyIndex(t),a=this.normals[r],o=this.normals[r+1],s=this.normals[r+2];this.targetNormals.push(a+(this.normals[n]-a)*i),this.targetNormals.push(o+(this.normals[n+1]-o)*i),this.targetNormals.push(s+(this.normals[n+2]-s)*i)}}},{key:"_addFace",value:function(e){if(!(e.length<3)){if(3===e.length)return this.targetIndices.push(e[0]),this.targetIndices.push(e[1]),void this.targetIndices.push(e[2]);for(var t=[],i=0;i<e.length;i++)for(var r=i+1;r<e.length;r++){var n=Math.abs(i-r);n>1&&n<e.length-1&&t.push([e[i],e[r]])}t.sort(function(e,t){return this._faceEdgeLength(e[0],e[1])-this._faceEdgeLength(t[0],t[1])}.bind(this));var a=e.indexOf(t[0][0]);e=e.slice(a).concat(e.slice(0,a));var o=e.indexOf(t[0][1]),s=e.slice(0,o+1),l=e.slice(o).concat(e.slice(0,1));this._addFace(s),this._addFace(l)}}},{key:"_faceEdgeLength",value:function(e,t){var i=3*this.faceIndices[e],r=3*this.faceIndices[t],n=this.targetPositions[i],a=this.targetPositions[i+1],o=this.targetPositions[i+2],s=this.targetPositions[r],l=this.targetPositions[r+1],u=this.targetPositions[r+2],c=n-s,h=a-l,d=o-u;return c*c+h*h+d*d}},{key:"_intersectionId",value:function(e,t){return[e,t].sort().join(",")}},{key:"_keyIndex",value:function(e){return this.sourceFace[e]}}]),e}();s.SplitGeometryBuilder=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),t.container||s.Error.throwError(s.ERRORS.DEVELOPE_EXCEPTION,"container is required"),this._container=t.container,this._fpsPanel=document.createElement("div"),this._fpsPanel.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000;background:#002;color:#0ff",this._container.appendChild(this._fpsPanel),this._fpsText=document.createTextNode(""),this._fpsPanel.appendChild(this._fpsText),this._beginTime=this.getTimestamp(),this._prevTime=this._beginTime,this._frames=0,this._minFps=1/0,this._maxFps=0}return _createClass(e,[{key:"destroy",value:function(){this._fpsText.parentNode&&(this._fpsText.parentNode.removeChild(this._fpsText),this._fpsText=null),this._fpsPanel.parentNode&&(this._fpsPanel.parentNode.removeChild(this._fpsPanel),this._fpsPanel=null),this._container=null}},{key:"begin",value:function(){this._beginTime=this.getTimestamp()}},{key:"end",value:function(){++this._frames;var e=this.getTimestamp(),t=e-this._prevTime;if(t>1e3){var i=1e3*this._frames/t|0;this._minFps=Math.min(i,this._minFps),this._maxFps=Math.max(i,this._maxFps),this._fpsText.nodeValue=Math.round(i)+" FPS ("+Math.round(this._minFps)+"-"+Math.round(this._maxFps)+")",this._prevTime=e,this._frames=0}return e}},{key:"update",value:function(){this._beginTime=this.end()}},{key:"getTimestamp",value:function(){return(performance||Date).now()}}]),e}();s.PerformanceStats=e}(),s.SkeletonUtils={parallelTraverse:function(e,t,i){i(e,t);for(var r=0;r<e.children.length;r++)this.parallelTraverse(e.children[r],t.children[r],i)},retarget:function(){var e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Matrix4,n=new THREE.Matrix4,a=new THREE.Matrix4;return function(o,s,l){l=l||{},l.preserveMatrix=void 0===l.preserveMatrix||l.preserveMatrix,l.preservePosition=void 0===l.preservePosition||l.preservePosition,l.preserveHipPosition=void 0!==l.preserveHipPosition&&l.preserveHipPosition,l.useTargetMatrix=void 0!==l.useTargetMatrix&&l.useTargetMatrix,l.hip=void 0!==l.hip?l.hip:"hip",l.names=l.names||{};var u,c,h,d,f,p,m=s.isObject3D?s.skeleton.bones:this.getBones(s),v=o.isObject3D?o.skeleton.bones:this.getBones(o);if(o.isObject3D?o.skeleton.pose():(l.useTargetMatrix=!0,l.preserveMatrix=!1),l.preservePosition)for(f=[],p=0;p<v.length;p++)f.push(v[p].position.clone());if(l.preserveMatrix)for(o.updateMatrixWorld(),o.matrixWorld.identity(),p=0;p<o.children.length;++p)o.children[p].updateMatrixWorld(!0);if(l.offsets)for(u=[],p=0;p<v.length;++p)c=v[p],h=l.names[c.name]||c.name,l.offsets&&l.offsets[h]&&(c.matrix.multiply(l.offsets[h]),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld()),u.push(c.matrixWorld.clone());for(p=0;p<v.length;++p){if(c=v[p],h=l.names[c.name]||c.name,d=this.getBoneByName(h,m),a.copy(c.matrixWorld),d){if(d.updateMatrixWorld(),l.useTargetMatrix?n.copy(d.matrixWorld):(n.getInverse(o.matrixWorld),n.multiply(d.matrixWorld)),i.setFromMatrixScale(n),n.scale(i.set(1/i.x,1/i.y,1/i.z)),a.makeRotationFromQuaternion(t.setFromRotationMatrix(n)),o.isObject3D){var g=v.indexOf(c),y=u?u[g]:r.getInverse(o.skeleton.boneInverses[g]);a.multiply(y)}a.copyPosition(n)}c.parent&&c.parent.isBone?(c.matrix.getInverse(c.parent.matrixWorld),c.matrix.multiply(a)):c.matrix.copy(a),l.preserveHipPosition&&h===l.hip&&c.matrix.setPosition(e.set(0,c.position.y,0)),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld()}if(l.preservePosition)for(p=0;p<v.length;++p)c=v[p],(h=l.names[c.name]||c.name)!==l.hip&&c.position.copy(f[p]);l.preserveMatrix&&o.updateMatrixWorld(!0)}}(),retargetClip:function(e,t,i,r){r=r||{},r.useFirstFramePosition=void 0!==r.useFirstFramePosition&&r.useFirstFramePosition,r.fps=void 0!==r.fps?r.fps:30,r.names=r.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));var n,a,o,s,l,u,c=Math.round(i.duration*(r.fps/1e3)*1e3),h=1/r.fps,d=[],f=new THREE.AnimationMixer(t),p=this.getBones(e.skeleton),m=[];for(f.clipAction(i).play(),f.update(0),t.updateMatrixWorld(),l=0;l<c;++l){var v=l*h;for(this.retarget(e,t,r),u=0;u<p.length;++u)s=r.names[p[u].name]||p[u].name,this.getBoneByName(s,t.skeleton)&&(a=p[u],o=m[u]=m[u]||{bone:a},r.hip===s&&(o.pos||(o.pos={times:new Float32Array(c),values:new Float32Array(3*c)}),r.useFirstFramePosition&&(0===l&&(n=a.position.clone()),a.position.sub(n)),o.pos.times[l]=v,a.position.toArray(o.pos.values,3*l)),o.quat||(o.quat={times:new Float32Array(c),values:new Float32Array(4*c)}),o.quat.times[l]=v,a.quaternion.toArray(o.quat.values,4*l));f.update(h),t.updateMatrixWorld()}for(l=0;l<m.length;++l)(o=m[l])&&(o.pos&&d.push(new THREE.VectorKeyframeTrack(".bones["+o.bone.name+"].position",o.pos.times,o.pos.values)),d.push(new THREE.QuaterQuaternionKeyframeTrackion(".bones["+o.bone.name+"].quaternion",o.quat.times,o.quat.values)));return f.uncacheAction(i),new THREE.AnimationClip(i.name,-1,d)},getHelperFromSkeleton:function(e){var t=new THREE.SkeletonHelper(e.bones[0]);return t.skeleton=e,t},getSkeletonOffsets:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector2,a=new THREE.Vector2;return function(o,s,l){l=l||{},l.hip=void 0!==l.hip?l.hip:"hip",l.names=l.names||{},s.isObject3D||(s=this.getHelperFromSkeleton(s));var u,c,h,d,f=Object.keys(l.names),p=Object.values(l.names),m=s.isObject3D?s.skeleton.bones:this.getBones(s),v=o.isObject3D?o.skeleton.bones:this.getBones(o),g=[];for(o.skeleton.pose(),d=0;d<v.length;++d)if(u=v[d],h=l.names[u.name]||u.name,(c=this.getBoneByName(h,m))&&h!==l.hip){var y=this.getNearestBone(u.parent,f),M=this.getNearestBone(c.parent,p);y.updateMatrixWorld(),M.updateMatrixWorld(),e.setFromMatrixPosition(y.matrixWorld),t.setFromMatrixPosition(u.matrixWorld),i.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(c.matrixWorld),n.subVectors(new THREE.Vector2(t.x,t.y),new THREE.Vector2(e.x,e.y)).normalize(),a.subVectors(new THREE.Vector2(r.x,r.y),new THREE.Vector2(i.x,i.y)).normalize();var E=n.angle()-a.angle(),b=(new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(0,0,E));u.matrix.multiply(b),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld(),g[h]=b}return g}}(),renameBones:function(e,t){for(var i=this.getBones(e),r=0;r<i.length;++r){var n=i[r];t[n.name]&&(n.name=t[n.name])}return this},getBones:function(e){return Array.isArray(e)?e:e.bones},getBoneByName:function(e,t){for(var i=0,r=this.getBones(t);i<r.length;i++)if(e===r[i].name)return r[i]},getNearestBone:function(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}},findBoneTrackData:function(e,t){for(var i=/\[(.*)\]\.(.*)/,r={name:e},n=0;n<t.length;++n){var a=i.exec(t[n].name);a&&e===a[1]&&(r[a[2]]=n)}return r},getEqualsBonesNames:function(e,t){var i=this.getBones(e),r=this.getBones(t),n=[];e:for(var a=0;a<i.length;a++)for(var o=i[a].name,s=0;s<r.length;s++)if(o===r[s].name){n.push(o);continue e}return n},clone:function(e){var t=new Map,i=new Map,r=e.clone();return this.parallelTraverse(e,r,function(e,r){t.set(r,e),i.set(e,r)}),r.traverse(function(e){if(e.isSkinnedMesh){var r=e,n=t.get(e),a=n.skeleton.bones;r.skeleton=n.skeleton.clone(),r.bindMatrix.copy(n.bindMatrix),r.skeleton.bones=a.map(function(e){return i.get(e)}),r.bind(r.skeleton,r.bindMatrix)}}),r}},function(){function e(e,i,n){n=n||2;var a=i&&i.length,o=a?i[0]*n:e.length,s=t(e,0,o,n,!0),l=[];if(!s||s.next===s.prev)return l;var c,h,d,f,p,m,v;if(a&&(s=u(e,i,s,n)),e.length>80*n){c=d=e[0],h=f=e[1];for(var g=n;g<o;g+=n)p=e[g],m=e[g+1],p<c&&(c=p),m<h&&(h=m),p>d&&(d=p),m>f&&(f=m);v=Math.max(d-c,f-h),v=0!==v?1/v:0}return r(s,l,n,c,h,v),l}function t(e,t,i,r,n){var a,o;if(n===L(e,t,i,r)>0)for(a=t;a<i;a+=r)o=k(a,e[a],e[a+1],o);else for(a=i-r;a>=t;a-=r)o=k(a,e[a],e[a+1],o);return o&&b(o,o.next)&&(R(o),o=o.next),o}function i(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!b(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(R(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function r(e,t,s,u,c,h,d){if(e){!d&&h&&p(e,u,c,h);for(var f,m,v=e;e.prev!==e.next;)if(f=e.prev,m=e.next,h?a(e,u,c,h):n(e))t.push(f.i/s),t.push(e.i/s),t.push(m.i/s),R(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?(e=o(i(e),t,s),r(e,t,s,u,c,h,2)):2===d&&l(e,t,s,u,c,h):r(i(e),t,s,u,c,h,1);break}}}function n(e){var t=e.prev,i=e,r=e.next;if(E(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(y(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&E(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function a(e,t,i,r){var n=e.prev,a=e,o=e.next;if(E(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,h=v(s,l,t,i,r),d=v(u,c,t,i,r),f=e.prevZ,p=e.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&y(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&E(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&y(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&y(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&E(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&y(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function o(e,t,r){var n=e;do{var a=n.prev,o=n.next.next;!b(a,o)&&x(a,n,n.next,o)&&C(a,o)&&C(o,a)&&(t.push(a.i/r),t.push(n.i/r),t.push(o.i/r),R(n),R(n.next),n=e=o),n=n.next}while(n!==e);return i(n)}function l(e,t,n,a,o,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&M(l,u)){var c=A(l,u);return l=i(l,l.next),c=i(c,c.next),r(l,t,n,a,o,s),void r(c,t,n,a,o,s)}u=u.next}l=l.next}while(l!==e)}function u(e,r,n,a){var o,s,l,u,d,f=[];for(o=0,s=r.length;o<s;o++)l=r[o]*a,u=o<s-1?r[o+1]*a:e.length,d=t(e,l,u,a,!1),d===d.next&&(d.steiner=!0),f.push(g(d));for(f.sort(c),o=0;o<f.length;o++)h(f[o],n),n=i(n,n.next);return n}function c(e,t){return e.x-t.x}function h(e,t){if(t=d(e,t)){var r=A(t,e);i(t,t.next),i(r,r.next)}}function d(e,t){var i,r=t,n=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){if(o=s,s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;var l,u=i,c=i.x,h=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&y(a<h?n:o,a,c,h,a<h?o:n,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(n-r.x),C(r,e)&&(l<d||l===d&&(r.x>i.x||r.x===i.x&&f(i,r)))&&(i=r,d=l)),r=r.next}while(r!==u);return i}function f(e,t){return E(e.prev,e,t.prev)<0&&E(t.next,e,e.next)<0}function p(e,t,i,r){var n=e;do{null===n.z&&(n.z=v(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,m(n)}function m(e){var t,i,r,n,a,o,s,l,u=1;do{for(i=e,e=null,a=null,o=0;i;){for(o++,r=i,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,u*=2}while(o>1);return e}function v(e,t,i,r,n){return e=32767*(e-i)*n,t=32767*(t-r)*n,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function y(e,t,i,r,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(i-o)*(t-s)>=0&&(i-o)*(a-s)-(n-o)*(r-s)>=0}function M(e,t){
return e.next.i!==t.i&&e.prev.i!==t.i&&!w(e,t)&&(C(e,t)&&C(t,e)&&S(e,t)&&(E(e.prev,e,t.prev)||E(e,t.prev,t))||b(e,t)&&E(e.prev,e,e.next)>0&&E(t.prev,t,t.next)>0)}function E(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,i,r){var n=T(E(e,t,i)),a=T(E(e,t,r)),o=T(E(i,r,e)),s=T(E(i,r,t));return n!==a&&o!==s||(!(0!==n||!I(e,i,t))||(!(0!==a||!I(e,r,t))||(!(0!==o||!I(i,e,r))||!(0!==s||!I(i,t,r)))))}function I(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function T(e){return e>0?1:e<0?-1:0}function w(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&x(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function C(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function S(e,t){var i=e,r=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}function A(e,t){var i=new B(e.i,e.x,e.y),r=new B(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function k(e,t,i,r){var n=new B(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(e,t,i,r){for(var n=0,a=t,o=i-r;a<i;a+=r)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}e.deviation=function(e,t,i,r){var n=t&&t.length,a=n?t[0]*i:e.length,o=Math.abs(L(e,0,a,i));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*i,c=s<l-1?t[s+1]*i:e.length;o-=Math.abs(L(e,u,c,i))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*i,f=r[s+1]*i,p=r[s+2]*i;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)i.vertices.push(e[n][a][o]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i},s.earcut=e}(),function(){var e;s.Math=(e={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,ONE_Megabytes:1048576,ONE_GIGABYTES:1073741824,TWO_PI:2*Math.PI,PI_OVER_TWO:Math.PI/2,RADIANS_PER_DEGREE:Math.PI/180,RADIANS_PER_ARCSECOND:Math.PI/180/3600,mod:function(e,t){return(e%t+t)%t},clamp:function(e,t,i){return e<t?t:e>i?i:e},normalize:function(e,t,i){return i=Math.max(i-t,0),0===i?0:s.Math.clamp((e-t)/i,0,1)},isolateDigits:function(e,t,i){return parseInt(e*Math.pow(10,t))*Math.pow(10,i)},equalsEpsilon:function(e,t,i,r){r=void 0!==r?r:i;var n=Math.abs(e-t);return n<=r||n<=i*Math.max(Math.abs(e),Math.abs(t))},lessThan:function(e,t,i){return e-t<-i},lessThanOrEquals:function(e,t,i){return e-t<i},greaterThan:function(e,t,i){return e-t>i},greaterThanOrEquals:function(e,t,i){return e-t>-i},equalsEpsilonVec3:function(e,t,i){return s.Math.equalsEpsilon(e.x,t.x,i)&&s.Math.equalsEpsilon(e.y,t.y,i)&&s.Math.equalsEpsilon(e.z,t.z,i)},equalsEpsilonMatrix4:function(e,t,i){i=i||0;for(var r=e.elements,n=t.elements,a=0;a<16;a++)if(!s.Math.equalsEpsilon(r[a],n[a],i))return!1;return!0},equalsEpsilonQuaternion:function(e,t,i){return i=i||0,s.Math.equalsEpsilon(e._x,t._x,i)&&s.Math.equalsEpsilon(e._y,t._y,i)&&s.Math.equalsEpsilon(e._z,t._z,i)&&s.Math.equalsEpsilon(e._w,t._w,i)},equalsEpsilonFrustum:function(e,t,i){i=i||0;for(var r=e.planes,n=t.planes,a=0;a<6;a++)if(!s.Math.equalsEpsilonVec3(r[a].normal,n[a].normal,i)||!s.Math.equalsEpsilon(r[a].constant,n[a].constant,i))return!1;return!0},incrementWrap:function(e,t,i){return i=void 0!==i?i:0,++e,e>t&&(e=i),e},isPowerOfTwo:function(e){return 0!==e&&0==(e&e-1)},nextPowerOfTwo:function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},maxComponent:function(e,t){var i=Math.max(Math.abs(e.x),Math.abs(t.x)),r=Math.max(Math.abs(e.y),Math.abs(t.y)),n=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.max(Math.max(i,r),n)},getMatrix3:function(e){var t=e.elements,i=new THREE.Matrix3;return i.elements[0]=t[0],i.elements[1]=t[1],i.elements[2]=t[2],i.elements[3]=t[4],i.elements[4]=t[5],i.elements[5]=t[6],i.elements[6]=t[8],i.elements[7]=t[9],i.elements[8]=t[10],i},bezierCurveFn:function(e,t,i,r){return r>1&&(r=1),(1-r)*(1-r)*e+2*r*(1-r)*t+r*r*i},tweens:function(e,t,i,r){var n=this,a=i%r/r;return a<0&&(a*=-1),a>1&&(a=1),n.linear([e,t],a)},breatheTweens:function(e,t,i,r){var n=this,a=i%r/(.5*r)-1;return a<0&&(a*=-1),a>1&&(a=1),n.linear([e,t],a)},linear:function(e,t){var i=this,r=e.length-1,n=r*t,a=Math.floor(n);return t<0?i.linearFn(e[0],e[1],n):t>1?i.linearFn(e[r],e[r-1],r-n):i.linearFn(e[a],e[a+1>r?r:a+1],n-a)},linearFn:function(e,t,i){return(t-e)*i+e},negativePiToPi:function(e){if(!s.Utils.defined(e))throw new Error("angle is required.");return this.zeroToTwoPi(e+Math.PI)-Math.PI},zeroToTwoPi:function(e){if(!s.Utils.defined(e))throw new Error("angle is required.");var t=this.mod(e,this.TWO_PI);return Math.abs(t)<this.EPSILON14&&Math.abs(e)>this.EPSILON14?TWO_PI:t}},_defineProperty(e,"equalsEpsilon",function(e,t,i,r){if(!s.Utils.defined(e))throw new Error("left is required.");if(!s.Utils.defined(t))throw new Error("right is required.");i=s.Utils.defaultValue(i,0),r=s.Utils.defaultValue(r,i);var n=Math.abs(e-t);return n<=r||n<=i*Math.max(Math.abs(e),Math.abs(t))}),_defineProperty(e,"equalsEpsilonVector3",function(e,t,i,r){return e===t||s.Utils.defined(e)&&s.Utils.defined(t)&&this.equalsEpsilon(e.x,t.x,i,r)&&this.equalsEpsilon(e.y,t.y,i,r)&&this.equalsEpsilon(e.z,t.z,i,r)}),e)}(),function(){s.Debug={INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",EXCEPTION:"EXCEPTION",isActive:!1,DebugColor:{BLACK:0,WHITE:16777215,RED:16711680,GREEN:65280,BLUE:255,YELLOW:16776960,ORANGE:16753920,GRAY:8421504,GOLD:16766720},DebugColorArray:[16776960,16711680,65280,255],activate:function(){s.Debug.isActive=!0},deactivate:function(){s.Debug.isActive=!1},doLog:function(e,t){if(s.Debug.isActive)switch(e){case s.Debug.INFO:console.info(t);break;case s.Debug.WARNING:console.warn(t);break;case s.Debug.ERROR:console.error(t);break;case s.Debug.EXCEPTION:console.debug(t)}},logInfo:function(e){s.Debug.doLog(s.Debug.INFO,e)},logWarning:function(e){s.Debug.doLog(s.Debug.WARNING,e)},logError:function(e){s.Debug.doLog(s.Debug.ERROR,e)},logException:function(e){s.Debug.doLog(s.Debug.EXCEPTION,e)}}}(),function(){s.Runtime=function(){this.config={},this.isReady=!1,this.fps=0,this.states={measurements:[],infos:[]}},s.Runtime.prototype.addMeasurement=function(e,t){this.states.measurements[e]=t},s.Runtime.prototype.removeMeasurement=function(e){this.states.measurements[e]&&delete this.states.measurements[e]},s.Runtime.prototype.addInfo=function(e,t){this.states.infos[e]=t},s.Runtime.prototype.removeInfo=function(e){delete this.states.infos[e]},s.Runtime.prototype.getFPS=function(){return this.fps}}(),function(){function e(e,t){return t-e}var t=function(){function t(){_classCallCheck(this,t),this._listeners=[],this._scopes=[],this._toRemove=[],this._insideFireEvent=!1}return _createClass(t,[{key:"addEventListener",value:function(e,t){this._listeners.push(e),this._scopes.push(t);var i=this;return function(){i.removeEventListener(e,t)}}},{key:"removeEventListener",value:function(e,t){for(var i=this._listeners,r=this._scopes,n=-1,a=0;a<i.length;a++)if(i[a]===e&&r[a]===t){n=a;break}return-1!==n&&(this._insideFireEvent?(this._toRemove.push(n),i[n]=void 0,r[n]=void 0):(i.splice(n,1),r.splice(n,1)),!0)}},{key:"fireEvent",value:function(){this._insideFireEvent=!0;var t,i=this._listeners,r=this._scopes,n=i.length;for(t=0;t<n;t++){i[t]&&i[t].apply(r[t],arguments)}var a=this._toRemove;if((n=a.length)>0){for(a.sort(e),t=0;t<n;t++){var o=a[t];i.splice(o,1),r.splice(o,1)}a.length=0}this._insideFireEvent=!1}}]),t}();s.Event=t}(),function(){var e=0;s.EVENTS={ERROR:e++,WEBGL_CONTEXT_LOST:e++,WEBGL_CONTEXT_RESTORED:e++,ON_LOAD_START:e++,ON_LOAD_PROGRESS:e++,ON_LOAD_COMPLETE:e++,ON_LOAD_EMPTY_SCENE:e++,ON_LOAD_INVALID_SCENE:e++,ON_DEMAND_LOAD_START:e++,ON_DEMAND_LOAD_PROGRESS:e++,ON_DEMAND_LOAD_COMPLETE:e++,ON_EDITOR_ENTER:e++,ON_EDITOR_EXIST:e++,ON_EDITOR_BEGIN:e++,ON_EDITOR_END:e++,ON_TOOL_END:e++,ON_EDITOR_UPDATEUI:e++,ON_EDITOR_ZOOM:e++,ON_EDITOR_PANING:e++,ON_EDITOR_ROTATING:e++,ON_EDITOR_WALKING:e++,ON_VOLUME_MEASURE_END:e++,ON_SELECTION_CHANGED:e++,ON_CLICK_PICK:e++,ON_CLICK_MARKER3D_PICK:e++,ON_HOVER_PICK:e++,ON_MOUSE_MOVE_PICK:e++,ON_MEASURE_PICK:e++,ON_MEASURE_RESET:e++,ON_SELECTION_FAILED:e++,ON_CLIP_HOVER:e++,ON_HOVER_SNAP:e++,ON_CLIP_MOUSE_MOVE:e++,ON_MOUSE_DRAGGED:e++,ON_CAMERA_CHANGED_AND_RENDERED:e++,ON_VERSION_NO_MATCH:e++,ON_AXIS_GRID_HOVER:e++,ON_VIEWER_RESTORED:e++,ON_EARTH_ANIMATION_COMPLETE:e++,ON_CAMERA_HEIGHT_CHANGED:e++,ON_CAMERA_ANIMATION_UPDATE:e++,ON_FLOOR_EXPLOSION:e++,ON_EXPLOSION:e++,ON_PRE_UPDATE:e++,ON_POST_UPDATE:e++,ON_PRE_RENDER:e++,ON_POST_RENDER:e++,ON_MAP_CREATED:e++,ON_MAP_LOAD_ALL:e++}}(),function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._listeners=void 0}}]),t}(THREE.EventDispatcher);s.EventDispatcher=e,s.eventsDispatcher=new s.EventDispatcher}(),function(){var e=0;s.ERRORS={DEVELOPE_EXCEPTION:e++,INVALID_FRAMEBUFFER:e++,WEBGL_NOT_SUPPORTED:e++,WEBGL_CONTEXT_LOST:e++};var t=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name=r._getName(e),r.message=i||"N/A",r.stack=(new Error).stack,r}return _inherits(t,e),_createClass(t,[{key:"_getName",value:function(e){for(var t in s.ERRORS)if(s.ERRORS[t]===e)return t;return null}},{key:"toString",value:function(){var e=this.name+": "+this.message;return this.stack&&(e+="\n"+this.stack.toString()),e}}],[{key:"throwError",value:function(e,i){throw new t(e,i)}}]),t}(Error);s.Error=t}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.canvasId=t||0,this.domContainer=i;var r=document.createElement("div");this.domContainer.appendChild(r),this.canvas=this._createHTMLCanvas(r)}return _createClass(e,[{key:"destroy",value:function(){var e=this.canvas.parentNode;e&&(e.removeChild(this.canvas),this.domContainer.removeChild(e),e=null),this.canvas=null,this.domContainer=null}},{key:"addEventListener",value:function(e,t,i){this.canvas.addEventListener(e,t,i)}},{key:"removeEventListener",value:function(e,t,i){this.canvas.removeEventListener(e,t,i)}},{key:"_createHTMLCanvas",value:function(e){var t=document.createElement("canvas");return t.setAttribute("id","cloud-canvas-"+this.canvasId),t.setAttribute("class","cloud-main-canvas"),t.setAttribute("tabindex","0"),e.appendChild(t),t}},{key:"initWebGL",value:function(){for(var t=e.WEBGL_CONTEXT_NAMES,i=0;!this.gl&&i<t.length;i++)try{this.gl=this.canvas.getContext(t[i],this.contextAttr)}catch(e){}if(!this.gl)throw s.Error.fatalError(s.ErrorTypes.WEBGL_NOT_SUPPORTED,"Failed to get a WebGL context")}},{key:"loseWebGLContext",value:function(){this.canvas.loseContext()}},{key:"getWidth",value:function(){return this.canvas.width}},{key:"getHeight",value:function(){return this.canvas.height}}]),e}();e.WEBGL_CONTEXT_NAMES=["webgl","experimental-webgl","webkit-3d","moz-webgl","moz-glweb20"],s.Canvas=e}(),function(){function e(){this.head=void 0,this.tail=void 0,this._length=0}function t(e,t,i){this.item=e,this.previous=t,this.next=i}function i(e,t){t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=void 0,e.tail=t.previous):t.next?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}Object.defineProperties(e.prototype,{length:{get:function(){return this._length}}}),e.prototype.add=function(e){var i=new t(e,this.tail,void 0);return this.tail?(this.tail.next=i,this.tail=i):(this.head=i,this.tail=i),++this._length,i},e.prototype.remove=function(e){e&&(i(this,e),--this._length)},e.prototype.splice=function(e,t){if(e!==t){i(this,t);var r=e.next;e.next=t,this.tail===e?this.tail=t:r.previous=t,t.next=r,t.previous=e}},s.DoublyLinkedList=e}(),function(){function e(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}var t=function(){function t(e){_classCallCheck(this,t),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}return _createClass(t,[{key:"destroy",value:function(){this._comparator=void 0,this._array=void 0}},{key:"reserve",value:function(e){e=e||this._length,this._array.length=e}},{key:"heapify",value:function(t){t=t||0;for(var i=this._length,r=this._comparator,n=this._array,a=-1,o=!0;o;){var s=2*(t+1),l=s-1;a=l<i&&r(n[l],n[t])<0?l:t,s<i&&r(n[s],n[a])<0&&(a=s),a!==t?(e(n,a,t),t=a):o=!1}}},{key:"resort",value:function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)}},{key:"insert",value:function(t){var i=this._array,r=this._comparator,n=this._maximumLength,a=this._length++;for(a<i.length?i[a]=t:i.push(t);0!==a;){var o=Math.floor((a-1)/2);if(!(r(i[a],i[o])<0))break;e(i,a,o),a=o}var s;return void 0!==n&&null!==n&&this._length>n&&(s=i[n],this._length=n),s}},{key:"pop",value:function(t){if(t=t||0,0!==this._length){var i=this._array,r=i[t];return e(i,t,--this._length),this.heapify(t),i[this._length]=void 0,r}}},{key:"length",get:function(){return this._length}},{key:"internalArray",get:function(){return this._array}},{key:"maximumLength",get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var i=this._array,r=e;r<t;++r)i[r]=void 0;this._length=e,i.length=e}this._maximumLength=e}},{key:"comparator",get:function(){return this._comparator}}]),t}();s.Heap=t}(),function(){var e=function(){function e(){_classCallCheck(this,e);var t,i,r=new Promise(function(e,r){t=function(t){e(t)},i=function(e){r(e)}});this.promise=r,this.resolve=t,this.reject=i,this.resolver={resolve:t,reject:i}}return _createClass(e,[{key:"destroy",value:function(){this.resolver=void 0,this.resolve=void 0,this.reject=void 0,this.promise=void 0}}]),e}();s.Deferred=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.limit=t||5,this.store=[],this.active=0}return _createClass(e,[{key:"next",value:function(){this.store.length&&this.runTask.apply(this,_toConsumableArray(this.store.shift()))}},{key:"runTask",value:function(e,t,i){this.active++;var r=this;e(t,function(e){r.active--,i&&i(e),r.next()})}},{key:"push",value:function(e,t,i){this.active<this.limit?this.runTask(e,t,i):this.store.push([e,t,i])}}]),e}();s.TaskRunner=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.limit=t||5,this.store=[],this.active=0}return _createClass(e,[{key:"next",value:function(){this.store.length&&this.runTask.apply(this,_toConsumableArray(this.store.shift()))}},{key:"runTask",value:function(e,t,i,r){this.active++;var n=this;e.load(t,function(e){n.active--;var t={context:e,paras:i};r&&r(t),n.next()})}},{key:"push",value:function(e,t,i,r){this.active<this.limit?this.runTask(e,t,i,r):this.store.push([e,t,i,r])}}]),e}();s.LoadTaskRunner=e}(),function(){var e=new THREE.Box3,t=new THREE.Matrix4,i=new THREE.Ray,r=new THREE.Sphere,n=function(n){function a(e,t){_classCallCheck(this,a);var i=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return i.type="LineSegmentsEx",i}return _inherits(a,n),_createClass(a,[{key:"init",value:function(e){}},{key:"destroy",value:function(){}},{key:"intersectBoxWithDistance",value:function(t,i){var r=this.geometry,n=this.matrixWorld;return i&&(n=this.matrixWorld.clone(),n.multiplyMatrices(this.matrixWorld,i)),r.boundingBox||r.computeBoundingBox(),e.copy(r.boundingBox),e.applyMatrix4(n),t.ray.intersectBoxWithDistance(e)}},{key:"intersectBoxWithDistanceByIndices",value:function(e,t){var i=this.geometry.attributes.position.array,r=0,n=i.length;t&&t.indexCount>0&&(r=t.positionStart,n=t.positionStart+t.positionCount);var a=s.Utils.box3FromArrayRange(i,r,n);return a.applyMatrix4(this.matrixWorld),e.ray.intersectBoxWithDistance(a)}},{key:"raycastByIndices",value:function(e,n,a,o){var l=e.linePrecision;e.linePrecision=s.GlobalData.LineSelectRange;var u,c=e.linePrecision,h=c*c;o?(u=this.matrixWorld.clone(),u.multiplyMatrices(this.matrixWorld,o)):u=this.matrixWorld;var d=this.geometry;if(null===d.boundingSphere&&d.computeBoundingSphere(),r.copy(d.boundingSphere),r.applyMatrix4(u),!1!==e.ray.intersectsSphere(r)){t.getInverse(u),i.copy(e.ray).applyMatrix4(t);var f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,v=new THREE.Vector3,g=d.attributes.position.array,y=d.index.array,M=0,E=y.length;a&&a.indexCount>0&&(M=a.indexStart,E=a.indexStart+a.indexCount);for(var b=M;b<E-1;b+=2){var x=y[b],I=y[b+1];f.fromArray(g,3*x),p.fromArray(g,3*I);if(!(i.distanceSqToSegment(f,p,v,m)>h)){v.applyMatrix4(u);var T=e.ray.origin.distanceTo(v);T<e.near||T>e.far||n.push({distance:T,point:m.clone().applyMatrix4(u),index:b,face:null,faceIndex:null,object:this})}}e.linePrecision=l}}}]),a}(THREE.LineSegments);s.LineSegmentsEx=n}(),THREE.LineSegmentsGeometry=function(){THREE.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";var e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.addAttribute("position",new THREE.Float32BufferAttribute(e,3)),this.addAttribute("uv",new THREE.Float32BufferAttribute(t,2))},THREE.LineSegmentsGeometry.prototype=Object.assign(Object.create(THREE.InstancedBufferGeometry.prototype),{constructor:THREE.LineSegmentsGeometry,isLineSegmentsGeometry:!0,applyMatrix:function(e){var t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return void 0!==t&&(e.applyToBufferAttribute(t),e.applyToBufferAttribute(i),t.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var i=new THREE.InstancedInterleavedBuffer(t,6,1);return this.addAttribute("instanceStart",new THREE.InterleavedBufferAttribute(i,3,0)),this.addAttribute("instanceEnd",new THREE.InterleavedBufferAttribute(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var i=new THREE.InstancedInterleavedBuffer(t,6,1);return this.addAttribute("instanceColorStart",new THREE.InterleavedBufferAttribute(i,3,0)),this.addAttribute("instanceColorEnd",new THREE.InterleavedBufferAttribute(i,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new THREE.WireframeGeometry(e.geometry)),this},fromLineSegments:function(e){var t=e.geometry;if(t.isGeometry)this.setPositions(t.vertices);else if(t.isBufferGeometry)if(null===t.index)this.setPositions(t.position.array);else{for(var i=t.index.array,r=t.attributes.position.array,n=t.attributes.position.itemSize,a=new r.constructor(i.length*n),o=0,s=0,l=0,u=i.length;l<u;l++){o=i[l]*n;for(var c=0;c<n;c++)a[s++]=r[o++]}this.setPositions(a)}return this},fromLine:function(e){var t,i=e.geometry;i.isGeometry?t=i.vertices:i.isBufferGeometry&&(t=i.attributes.position.array);for(var r=t.length-3,n=new Float32Array(2*r),a=0;a<r;a+=3)n[2*a]=t[a],n[2*a+1]=t[a+1],n[2*a+2]=t[a+2],n[2*a+3]=t[a+3],n[2*a+4]=t[a+4],n[2*a+5]=t[a+5];return this.setPositions(n),this},fromLineLoop:function(e){var t,i=line.geometry;i.isGeometry?t=i.vertices:i.isBufferGeometry&&(t=i.attributes.position.array);for(var r=t.length,n=new Float32Array(2*r),a=0;a<r;a+=3)a<r-3?(n[2*a]=t[a],n[2*a+1]=t[a+1],n[2*a+2]=t[a+2],n[2*a+3]=t[a+3],n[2*a+4]=t[a+4],n[2*a+5]=t[a+5]):(n[2*a]=t[a],n[2*a+1]=t[a+1],n[2*a+2]=t[a+2],n[2*a+3]=t[0],n[2*a+4]=t[1],n[2*a+5]=t[2]);return this.setPositions(n),this},computeBoundingBox:function(){var e=new THREE.Box3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.instanceStart,i=this.attributes.instanceEnd;void 0!==t&&void 0!==i&&(this.boundingBox.setFromBufferAttribute(t),e.setFromBufferAttribute(i),this.boundingBox.union(e))}}(),computeBoundingSphere:function(){var e=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,i=this.attributes.instanceEnd;if(void 0!==t&&void 0!==i){var r=this.boundingSphere.center;this.boundingBox.getCenter(r);for(var n=0,a=0,o=t.count;a<o;a++)e.fromBufferAttribute(t,a),n=Math.max(n,r.distanceToSquared(e)),e.fromBufferAttribute(i,a),n=Math.max(n,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},clone:function(){},copy:function(e){return this}}),THREE.LineGeometry=function(){THREE.LineSegmentsGeometry.call(this),this.type="LineGeometry"},THREE.LineGeometry.prototype=Object.assign(Object.create(THREE.LineSegmentsGeometry.prototype),{constructor:THREE.LineGeometry,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,i=new Float32Array(2*t),r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return THREE.LineSegmentsGeometry.prototype.setPositions.call(this,i),this},setColors:function(e){for(var t=e.length-3,i=new Float32Array(2*t),r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return THREE.LineSegmentsGeometry.prototype.setColors.call(this,i),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.position.array),this},copy:function(e){return this}}),THREE.LineSegments2=function(e,t){THREE.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new THREE.LineSegmentsGeometry,this.material=void 0!==t?t:new THREE.LineMaterial({color:16777215*Math.random()})},THREE.LineSegments2.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.LineSegments2,isLineSegments2:!0,computeLineDistances:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){for(var i=this.geometry,r=i.attributes.instanceStart,n=i.attributes.instanceEnd,a=new Float32Array(2*r.data.count),o=0,s=0,l=r.data.count;o<l;o++,s+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(n,o),a[s]=0===s?0:a[s-1],a[s+1]=a[s]+e.distanceTo(t);var u=new THREE.InstancedInterleavedBuffer(a,2,1);return i.addAttribute("instanceDistanceStart",new THREE.InterleavedBufferAttribute(u,1,0)),i.addAttribute("instanceDistanceEnd",new THREE.InterleavedBufferAttribute(u,1,1)),this}}(),copy:function(e){return this},raycast:function(){var e=new THREE.Vector4,t=new THREE.Vector4,i=new THREE.Vector4,r=new THREE.Vector3,n=new THREE.Matrix4,a=new THREE.Line3,o=new THREE.Vector3;return function(s,l){null===s.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var u=s.ray,c=s.camera,h=c.projectionMatrix,d=this.geometry,f=this.material,p=f.resolution,m=f.linewidth,v=d.attributes.instanceStart,g=d.attributes.instanceEnd;u.at(1,i),i.w=1,i.applyMatrix4(c.matrixWorldInverse),i.applyMatrix4(h),i.multiplyScalar(1/i.w),i.x*=p.x/2,i.y*=p.y/2,i.z=0,r.copy(i);var y=this.matrixWorld;n.multiplyMatrices(c.matrixWorldInverse,y);for(var M=0,E=v.count;M<E;M++){e.fromBufferAttribute(v,M),t.fromBufferAttribute(g,M),e.w=1,t.w=1,e.applyMatrix4(n),t.applyMatrix4(n),e.applyMatrix4(h),t.applyMatrix4(h),e.multiplyScalar(1/e.w),t.multiplyScalar(1/t.w);var b=e.z<-1&&t.z<-1,x=e.z>1&&t.z>1;if(!b&&!x){e.x*=p.x/2,e.y*=p.y/2,t.x*=p.x/2,t.y*=p.y/2,a.start.copy(e),a.start.z=0,a.end.copy(t),a.end.z=0;var I=a.closestPointToPointParameter(r,!0);a.at(I,o);var T=THREE.Math.lerp(e.z,t.z,I),w=T>=-1&&T<=1,C=r.distanceTo(o)<.5*m;if(w&&C){a.start.fromBufferAttribute(v,M),a.end.fromBufferAttribute(g,M),a.start.applyMatrix4(y),a.end.applyMatrix4(y);var S=new THREE.Vector3,A=new THREE.Vector3;u.distanceSqToSegment(a.start,a.end,A,S),l.push({point:A,pointOnLine:S,distance:u.origin.distanceTo(A),object:this,face:null,faceIndex:M,uv:null,uv2:null})}}}}}()}),THREE.Line2=function(e,t){THREE.LineSegments2.call(this),this.type="Line2",this.geometry=void 0!==e?e:new THREE.LineGeometry,this.material=void 0!==t?t:new THREE.LineMaterial({color:16777215*Math.random()}),this.groundCurve=void 0},THREE.Line2.prototype=Object.assign(Object.create(THREE.LineSegments2.prototype),{constructor:THREE.Line2,isLine2:!0,copy:function(e){return this},createGroundCurve:function(e){this.groundCurve=s.GroundPrimitiveManager.getInstance().createGroundCurve(e)}}),THREE.UniformsLib.line={linewidth:{value:1},resolution:{value:new THREE.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},totalSize:{value:1},visibility:{value:1}},THREE.ShaderLib.line={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\t\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tattribute float instanceDistanceStart;//for quick to change style and map\n\t\tattribute float instanceDistanceEnd;\n\n\t\tvarying vec2 vUv;\n\t\tvarying float rate;\n\t\tuniform float totalSize;//v is depend on nowSize/Totalsize\n\t\t#if defined( USE_MAP )\n\n\t\t\tuniform vec4 offsetRepeat;\n\t\t\tuniform mat3 rotateMatrix;\n\n\t\t\tvarying vec2 vUv2;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\t\t\trate = instanceDistanceEnd/totalSize;\n\n\t\t\t#if defined( USE_MAP )\n\t\t\t\t//u: uv.x* 0.5 + 0.5, v: instanceDistanceEnd/totalSize\n\t\t\t\tvUv2 = mat2(rotateMatrix) * vec2((uv.x* 0.5 + 0.5) - 0.5,instanceDistanceEnd/totalSize - 0.5) + vec2(0.5, 0.5);\n\t\t\t\tvUv2 = (vUv2 -  offsetRepeat.xy)* offsetRepeat.zw;\n\t\t\t#endif\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",
fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float visibility;\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\t\tvarying float rate;\n\t\t#include <map_pars_fragment>\n\t\t#include <alphamap_pars_fragment>\n\t\t#if defined( USE_MAP )\n\t\t\tvarying vec2 vUv2;\n\t\t#endif\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\t\t\tif(rate > visibility) discard;\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#ifdef USE_MAP\n\t\t\t   vec4 texelColor = texture2D( map, vUv2 );\n\t\t\t   texelColor = mapTexelToLinear( texelColor );\n\t\t\t   diffuseColor = vec4(texelColor.rgb, opacity);\n\t\t\t#endif\n\n\t\t\t#ifdef USE_ALPHAMAP\n\t\t\t\tdiffuseColor.a *= texture2D( alphaMap, vUv2 ).a;\n\t\t\t#endif\n\t\t\t#include <alphatest_fragment>\n\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\t\t\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}\n\t\t"},THREE.LineMaterial=function(e){THREE.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:THREE.UniformsUtils.clone(THREE.ShaderLib.line.uniforms),vertexShader:THREE.ShaderLib.line.vertexShader,fragmentShader:THREE.ShaderLib.line.fragmentShader}),this.dashed=!1,this.alphaMap=null,this.visibility=1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(e){this.uniforms.map.value=e,this.uniforms.offsetRepeat.value.set(e.offset.x,e.offset.y,e.repeat.x,e.repeat.y),this.uniforms.rotateMatrix.value.copy(e.rotateMatrix)}},totalSize:{enumerable:!0,get:function(){return this.uniforms.totalSize.value},set:function(e){this.uniforms.totalSize.value=e}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(e){this.uniforms.alphaMap.value=e}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(e){this.uniforms.visibility.value=e}}}),this.setValues(e)},THREE.LineMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.LineMaterial.prototype.constructor=THREE.LineMaterial,THREE.LineMaterial.prototype.isLineMaterial=!0,THREE.LineMaterial.prototype.copy=function(e){return THREE.ShaderMaterial.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.resolution=e.resolution,this};var p={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new THREE.Vector2(1,1)},dashArray:{value:0},dashRatio:{value:0},visibility:{value:1},alphaTest:{value:0},glowPower:{value:0},enableColorOverride:{value:!1},sizeAttenuation:{value:!1}}]),vertexShader:"\n    #include <common>\n    #include <logdepthbuf_pars_vertex>\n    #include <fog_pars_vertex>\n    attribute vec3 previous;\n    attribute vec3 next;\n    uniform vec2 resolution;\n    uniform float linewidth;\n    uniform vec3 diffuse;\n    uniform float opacity;\n    uniform bool sizeAttenuation;\n\n    varying vec2 vUv;\n    varying vec4 vColor;\n\n    vec3 fix( vec4 i, float aspect ) {\n        vec2 res = i.xy / i.w;\n        res.x *= aspect;\n        return vec3(res,0.0);\n    }\n\n    vec3 getDir(vec3 currentP, vec3 prevP, vec3 nextP){\n        vec3 dir;\n        if( nextP == currentP ) dir = normalize( currentP - prevP );\n        else if( prevP == currentP ) dir = normalize( nextP - currentP );\n        else {\n            vec3 dir1 = normalize( currentP - prevP );\n            vec3 dir2 = normalize( nextP - currentP );\n            dir = normalize( dir1 + dir2 );\n        }\n        return dir;\n    }\n\n    vec4 getNormalWithWidth(float width, vec4 normal, float side){\n        #if defined(SINGLE_EXPAND)\n            if(side > 0.0){//left expand\n                normal *= 2.0 * width;\n            }\n        #else\n            normal *= width;\n        #endif\n\n        return normal;\n    }\n\n    mat4 inverse_mat4(mat4 m)\n    {\n        float Coef00 = m[2][2] * m[3][3] - m[3][2] * m[2][3];\n        float Coef02 = m[1][2] * m[3][3] - m[3][2] * m[1][3];\n        float Coef03 = m[1][2] * m[2][3] - m[2][2] * m[1][3];\n        \n        float Coef04 = m[2][1] * m[3][3] - m[3][1] * m[2][3];\n        float Coef06 = m[1][1] * m[3][3] - m[3][1] * m[1][3];\n        float Coef07 = m[1][1] * m[2][3] - m[2][1] * m[1][3];\n        \n        float Coef08 = m[2][1] * m[3][2] - m[3][1] * m[2][2];\n        float Coef10 = m[1][1] * m[3][2] - m[3][1] * m[1][2];\n        float Coef11 = m[1][1] * m[2][2] - m[2][1] * m[1][2];\n        \n        float Coef12 = m[2][0] * m[3][3] - m[3][0] * m[2][3];\n        float Coef14 = m[1][0] * m[3][3] - m[3][0] * m[1][3];\n        float Coef15 = m[1][0] * m[2][3] - m[2][0] * m[1][3];\n        \n        float Coef16 = m[2][0] * m[3][2] - m[3][0] * m[2][2];\n        float Coef18 = m[1][0] * m[3][2] - m[3][0] * m[1][2];\n        float Coef19 = m[1][0] * m[2][2] - m[2][0] * m[1][2];\n        \n        float Coef20 = m[2][0] * m[3][1] - m[3][0] * m[2][1];\n        float Coef22 = m[1][0] * m[3][1] - m[3][0] * m[1][1];\n        float Coef23 = m[1][0] * m[2][1] - m[2][0] * m[1][1];\n        \n        const vec4 SignA = vec4( 1.0, -1.0,  1.0, -1.0);\n        const vec4 SignB = vec4(-1.0,  1.0, -1.0,  1.0);\n        \n        vec4 Fac0 = vec4(Coef00, Coef00, Coef02, Coef03);\n        vec4 Fac1 = vec4(Coef04, Coef04, Coef06, Coef07);\n        vec4 Fac2 = vec4(Coef08, Coef08, Coef10, Coef11);\n        vec4 Fac3 = vec4(Coef12, Coef12, Coef14, Coef15);\n        vec4 Fac4 = vec4(Coef16, Coef16, Coef18, Coef19);\n        vec4 Fac5 = vec4(Coef20, Coef20, Coef22, Coef23);\n        \n        vec4 Vec0 = vec4(m[1][0], m[0][0], m[0][0], m[0][0]);\n        vec4 Vec1 = vec4(m[1][1], m[0][1], m[0][1], m[0][1]);\n        vec4 Vec2 = vec4(m[1][2], m[0][2], m[0][2], m[0][2]);\n        vec4 Vec3 = vec4(m[1][3], m[0][3], m[0][3], m[0][3]);\n        \n        vec4 Inv0 = SignA * (Vec1 * Fac0 - Vec2 * Fac1 + Vec3 * Fac2);\n        vec4 Inv1 = SignB * (Vec0 * Fac0 - Vec2 * Fac3 + Vec3 * Fac4);\n        vec4 Inv2 = SignA * (Vec0 * Fac1 - Vec1 * Fac3 + Vec3 * Fac5);\n        vec4 Inv3 = SignB * (Vec0 * Fac2 - Vec1 * Fac4 + Vec2 * Fac5);\n        \n        mat4 Inverse = mat4(Inv0, Inv1, Inv2, Inv3);\n        \n        vec4 Row0 = vec4(Inverse[0][0], Inverse[1][0], Inverse[2][0], Inverse[3][0]);\n        \n        float Determinant = dot(m[0], Row0);\n        \n        Inverse /= Determinant;\n        \n        return Inverse;\n    }\n\n    void main() {\n    \n        float aspect = resolution.x / resolution.y;\n    \n        vColor = vec4( diffuse, opacity );\n        vUv = uv;\n    \n        mat4 m = projectionMatrix * modelViewMatrix;\n        vec4 finalPosition;\n\n        float side = (vUv.x - 0.5) * (-2.0);\n        if( sizeAttenuation == false) {\n            finalPosition = m * vec4( position, 1.0 );\n            vec4 prevPos = m * vec4( previous, 1.0 );\n            vec4 nextPos = m * vec4( next, 1.0 );\n\n            vec3 currentP = fix( finalPosition, aspect );\n            vec3 prevP = fix( prevPos, aspect );\n            vec3 nextP = fix( nextPos, aspect );\n            \n            vec3 dir = getDir(currentP, prevP, nextP);\n            vec4 normal = vec4( -dir.y, dir.x, 0., 1. );\n            normal = getNormalWithWidth(linewidth, normal, side);\n\n            normal *= projectionMatrix;\n            normal.xy *= finalPosition.w;\n            normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;\n            finalPosition.xy += (normal.xy * side);\n\n        }else{\n            vec3 dir = getDir(position, previous, next);\n            vec3 cameraDir = normalize((inverse_mat4(modelMatrix) * vec4(cameraPosition,1.0)).xyz - position);\n            vec4 normal =  vec4(normalize(cross( vec3( dir), cameraDir)), 1.0) ;//vec3( 0., 0., 1. )\n            normal = getNormalWithWidth(0.5 * linewidth, normal, side);\n\n            normal = normal * side* (-1.0) ;//frontSide\n            finalPosition = m * vec4( position + normal.xyz, 1.0 );\n        }\n    \n        gl_Position = finalPosition;\n    \n        #include <logdepthbuf_vertex>\n        #include <fog_vertex>\n    }\n    ",fragmentShader:"\n    #include <fog_pars_fragment>\n    #include <common>\n    #include <logdepthbuf_pars_fragment>\n    \n    #ifdef USE_MAP \n        uniform sampler2D map;\n    #endif\n\n    #if defined(USE_MAP)||defined(USE_DASH)\n        uniform vec4 offsetRepeat;\n        uniform mat3 rotateMatrix;//may be used to dash line flow\n    #endif\n\n    #ifdef USE_GLOW\n        uniform float glowPower;\n    #endif\n\n    #ifdef USE_DASH\n        uniform float dashArray;\n        uniform float dashRatio;\n    #endif\n\n    uniform float visibility;\n    uniform float alphaTest;\n    uniform bool enableColorOverride;\n    \n    varying vec2 vUv;\n    varying vec4 vColor;\n    \n    void main() {\n    \n        #include <logdepthbuf_fragment>\n        vec4 diffuseColor = vColor;\n\n        if(vUv.y > visibility) discard;\n        \n        vec2 uv = vUv;\n        #if defined(USE_MAP)||defined(USE_DASH)\n            uv = mat2(rotateMatrix) * vec2(vUv.x - 0.5, vUv.y - 0.5) + vec2(0.5, 0.5);\n            uv = (uv -  offsetRepeat.xy)* offsetRepeat.zw; \n        #endif\n\n\n        #ifdef USE_DASH\n            float dashoffset = dashArray * dashRatio;\n            if((dashArray * dashRatio) - mod( uv.y, dashArray) < 0.0) discard; //diffuseColor.a = 0.0;\n        #endif\n\n        #ifdef USE_MAP\n            if(!enableColorOverride)\n                diffuseColor.xyz = texture2D( map, uv ).xyz;//*\n            diffuseColor.a = texture2D( map, uv).a * 2.0;\n        #endif\n\n        if( diffuseColor.a < alphaTest ) discard;\n\n        #ifdef USE_GLOW\n            float glow = glowPower / abs(vUv.y - 0.5) - (glowPower / 0.5);\n            // diffuseColor.rgb = max(vec3(glow - 1.0 + diffuseColor.rgb), diffuseColor.rgb);\n            diffuseColor.a = clamp(0.0, 1.0, glow) * diffuseColor.a;\n        #endif\n\n        gl_FragColor = diffuseColor;\n    \n        #include <fog_fragment>\n    }\n    "};!function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{uniforms:THREE.UniformsUtils.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}));return i.type="MeshLineMaterial",i.totalSize=0,i.setValues(e),i}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return THREE.ShaderMaterial.prototype.copy.call(this,e),this.linewidth=e.linewidth,this.map=e.map,this.alphaMap=e.alphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.dashArray=e.dashArray,this.dashRatio=e.dashRatio,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this}},{key:"linewidth",set:function(e){this.uniforms&&this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)},get:function(){return this.uniforms.linewidth.value}},{key:"map",set:function(e){this.uniforms.map.value=e,e&&(this.uniforms.offsetRepeat.value.set(e.offset.x,e.offset.y,e.repeat.x,e.repeat.y),this.uniforms.rotateMatrix.value.copy(e.rotateMatrix))},get:function(){return this.uniforms.map.value}},{key:"color",set:function(e){this.uniforms.diffuse.value=e},get:function(){return this.uniforms.diffuse.value}},{key:"opacity",set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)},get:function(){return this.uniforms.opacity.value}},{key:"resolution",set:function(e){this.uniforms.resolution.value=e},get:function(){return this.uniforms.resolution.value}},{key:"dashArray",set:function(e){this.uniforms.dashArray.value=e,e>0?this.defines.USE_DASH="":delete this.defines.USE_DASH},get:function(){return this.uniforms.dashArray.value}},{key:"dashRatio",set:function(e){this.uniforms.dashRatio.value=e},get:function(){return this.uniforms.dashRatio.value}},{key:"visibility",set:function(e){this.uniforms.visibility.value=e},get:function(){return this.uniforms.visibility.value}},{key:"alphaTest",set:function(e){this.uniforms&&(this.uniforms.alphaTest.value=e)},get:function(){return this.uniforms.alphaTest.value}},{key:"glowPower",set:function(e){this.uniforms.glowPower.value=e,e>0?this.defines.USE_GLOW="":delete this.defines.USE_GLOW},get:function(){return this.uniforms.glowPower.value}},{key:"enableSingleExpand",set:function(e){e?this.defines.SINGLE_EXPAND="":delete this.defines.SINGLE_EXPAND},get:function(){return!!this.defines.SINGLE_EXPAND}},{key:"enableColorOverride",set:function(e){this.uniforms.enableColorOverride.value=e},get:function(){return this.uniforms.enableColorOverride.value}},{key:"sizeAttenuation",set:function(e){this.uniforms.sizeAttenuation.value=e},get:function(){return this.uniforms.sizeAttenuation.value}}]),t}(THREE.ShaderMaterial);s.MeshLineMaterial=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="MeshLineGeometry",e}return _inherits(t,e),_createClass(t,[{key:"setPositions",value:function(e){if(!(e instanceof Float32Array||e instanceof Array))return void console.error("ERROR: The BufferArray of points is not instancied correctly.");var t=[],i=[0];if(e.length&&e[0]instanceof THREE.Vector3)for(var r=0;r<e.length;r++){var n=e[r];if(t.push(n.x,n.y,n.z),t.push(n.x,n.y,n.z),r>0){var a=i[i.length-1]+this._distanceTo(n.x,n.y,n.z,e[r-1].x,e[r-1].y,e[r-1].z);i.push(a)}}else for(var r=0;r<e.length;r+=3)if(t.push(e[r],e[r+1],e[r+2]),t.push(e[r],e[r+1],e[r+2]),r>0){var o=i[i.length-1]+this._distanceTo(e[r-3],e[r-2],e[r-1],e[r],e[r+1],e[r+2]);i.push(o)}var s=t.length/6,l=[],u=[],c=[],h=[],d=void 0;d=this.compareV3(t,0,s-1)?this.copyV3(t,s-2):this.copyV3(t,0),l.push(d[0],d[1],d[2]),l.push(d[0],d[1],d[2]);var f=i[i.length-1];this.totalSize=f;for(var p=0;p<s;p++){var m=i[p]/f;if(h.push(0,m),h.push(1,m),p<s-1){d=this.copyV3(t,p),l.push(d[0],d[1],d[2]),l.push(d[0],d[1],d[2]);var v=2*p;c.push(v,v+1,v+2),c.push(v+2,v+1,v+3)}p>0&&(d=this.copyV3(t,p),u.push(d[0],d[1],d[2]),u.push(d[0],d[1],d[2]))}d=this.compareV3(t,s-1,0)?this.copyV3(t,1):this.copyV3(t,s-1),u.push(d[0],d[1],d[2]),u.push(d[0],d[1],d[2]);var g=new THREE.BufferAttribute(new Float32Array(t),3),y=new THREE.BufferAttribute(new Float32Array(l),3),M=new THREE.BufferAttribute(new Float32Array(u),3),E=new THREE.BufferAttribute(new Float32Array(h),2),b=new THREE.BufferAttribute(new Uint16Array(c),1);this.addAttribute("position",g),this.addAttribute("previous",y),this.addAttribute("next",M),this.addAttribute("uv",E),this.setIndex(b),this.computeBoundingSphere(),this.computeBoundingBox()}},{key:"setPositions2",value:function(e,t){for(var i=[],r=[0],n=0;n<e.length;n+=3)if(i.push(e[n],e[n+1],e[n+2]),i.push(e[n],e[n+1],e[n+2]),n>0){var a=r[r.length-1]+this._distanceTo(e[n-3],e[n-2],e[n-1],e[n],e[n+1],e[n+2]);r.push(a)}var o=i.length/6,s=[],l=[],u=[],c=[],h=void 0,d=0;h=this.compareV3(i,0,o-1)?this.copyV3(i,o-2):this.copyV3(i,0),s.push(h[0],h[1],h[2]),s.push(h[0],h[1],h[2]);var f=r[r.length-1];this.totalSize=f;for(var p=0;p<o;p++){var m=r[p]/f;c.push(0,m),c.push(1,m);var v=!0,g=!0;if(p<o-1){if(t&&(d%2==1&&t[d]!=t[d+1]?(v=!1,d++):d%2==1&&t[d]==t[d+1]?d+=2:(d++,g=!1)),v){var y=2*p;u.push(y,y+1,y+2),u.push(y+2,y+1,y+3)}h=v?this.copyV3(i,p):this.copyV3(i,p+1),s.push(h[0],h[1],h[2]),s.push(h[0],h[1],h[2])}p>0&&(h=g?this.copyV3(i,p):this.copyV3(i,p-1),l.push(h[0],h[1],h[2]),l.push(h[0],h[1],h[2]))}h=this.compareV3(i,o-1,0)?this.copyV3(i,1):this.copyV3(i,o-1),l.push(h[0],h[1],h[2]),l.push(h[0],h[1],h[2]);var M=new THREE.BufferAttribute(new Float32Array(i),3),E=new THREE.BufferAttribute(new Float32Array(s),3),b=new THREE.BufferAttribute(new Float32Array(l),3),x=new THREE.BufferAttribute(new Float32Array(c),2),I=new THREE.BufferAttribute(new Uint32Array(u),1);this.addAttribute("position",M),this.addAttribute("previous",E),this.addAttribute("next",b),this.addAttribute("uv",x),this.setIndex(I),this.computeBoundingSphere(),this.computeBoundingBox()}},{key:"compareV3",value:function(e,t,i){var r=6*t,n=6*i;return e[r]===e[n]&&e[r+1]===e[n+1]&&e[r+2]===e[n+2]}},{key:"copyV3",value:function(e,t){var i=6*t;return[e[i],e[i+1],e[i+2]]}},{key:"_distanceTo",value:function(e,t,i,r,n,a){var o=r-e,s=n-t,l=a-i,u=o*o+s*s+l*l;return Math.sqrt(u)}}]),t}(THREE.BufferGeometry);s.MeshLineGeometry=e}(),s.MeshLine=function(e,t){THREE.Mesh.call(this),this.type="MeshLine",this.geometry=void 0!==e?e:new s.MeshLineGeometry,this.material=void 0!==t?t:new s.MeshLineMaterial({color:16777215*Math.random()}),this.groundCurve=void 0},s.MeshLine.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:s.MeshLine,isMeshLine:!0,copy:function(e){return this},raycast:function(e,t){var i=new THREE.Matrix4,r=new THREE.Ray,n=new THREE.Sphere,a=new THREE.Vector3,o=this.geometry;if(n.copy(o.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==e.ray.intersectSphere(n,a)){i.getInverse(this.matrixWorld),r.copy(e.ray).applyMatrix4(i);var s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=o.index,h=o.attributes;if(null!==c)for(var d=c.array,f=h.position.array,p=0,m=d.length-1;p<m;p+=2){var v=d[p],g=d[p+2];s.fromArray(f,3*v),l.fromArray(f,3*g);var y=e.params.Line.threshold+this.material.linewidth/2,M=y*y,E=r.distanceSqToSegment(s,l,a,u);if(!(E>M)){a.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(a);b<e.near||b>e.far||(t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}),p=m)}}}},createGroundCurve:function(e){this.groundCurve=s.GroundPrimitiveManager.getInstance().createGroundCurve(e)}}),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="BandGeometry",e}return _inherits(t,e),_createClass(t,[{key:"setPositions",value:function(e,t,i,r){if(!(e instanceof Float32Array||e instanceof Array))return void console.error("ERROR: The BufferArray of points is not instancied correctly.");for(var n=[],a=[0],o=[],s=0;s<e.length;s+=3){var l=t[s],u=t[s+1],c=t[s+2];if(n.push(e[s]-l*i,e[s+1]-u*i,e[s+2]-c*i),n.push(e[s]+l*r,e[s+1]+u*r,e[s+2]+c*r),o.push(l,u,c),o.push(l,u,c),s>0){var h=a[a.length-1]+this._distanceTo(e[s-3],e[s-2],e[s-1],e[s],e[s+1],e[s+2]);a.push(h)}}var d=n.length/6,f=[],p=[],m=a[a.length-1];this.totalSize=m;for(var v=0;v<d;v++){var g=a[v]/m;if(p.push(0,g),p.push(1,g),v<d-1){var y=2*v;f.push(y,y+1,y+2),f.push(y+2,y+1,y+3)}}var M=new THREE.BufferAttribute(new Float32Array(n),3),E=new THREE.BufferAttribute(new Float32Array(p),2),b=new THREE.BufferAttribute(new Float32Array(o),3),x=new THREE.BufferAttribute(new Uint16Array(f),1);this.addAttribute("position",M),this.addAttribute("uv",E),this.addAttribute("normal",b),this.setIndex(x),this.computeBoundingSphere(),this.computeBoundingBox(),this.positions=n}},{key:"getWireframe",value:function(){var e=[],t=this.positions,i=t.length,r=0;for(r=0;r<i;r+=6)e.push(t[r],t[r+1],t[r+2]);for(r-=1;r>0;r-=6)e.push(t[r-2],t[r-1],t[r]);return e.push(t[0],t[1],t[2]),e}},{key:"_distanceTo",value:function(e,t,i,r,n,a){var o=r-e,s=n-t,l=a-i,u=o*o+s*s+l*l;return Math.sqrt(u)}}]),t}(THREE.BufferGeometry);s.BandGeometry=e}(),function(){s.GIS=s.GIS||{};var e=function(){function e(t,i,r,n){_classCallCheck(this,e),this.west=t||0,this.south=i||0,this.east=r||0,this.north=n||0}return _createClass(e,[{key:"width",get:function(){return e.computeWidth(this)}},{key:"height",get:function(){return e.computeHeight(this)}}],[{key:"computeWidth",value:function(e){var t=e.east,i=e.west;return t<i&&(t+=s.Math.TWO_PI),t-i}},{key:"computeHeight",value:function(e){return e.north-e.south}},{key:"contains",value:function(e,t){var i=t.longitude,r=t.latitude,n=e.west,a=e.east;return a<n&&(a+=s.Math.TWO_PI,i<0&&(i+=s.Math.TWO_PI)),(i>n||s.Math.equalsEpsilon(i,n,s.Math.EPSILON14))&&(i<a||s.Math.equalsEpsilon(i,a,s.Math.EPSILON14))&&r>=e.south&&r<=e.north}},{key:"fromCartographicArray",value:function(t,i){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0,h=t.length;c<h;c++){var d=t[c];r=Math.min(r,d.longitude),n=Math.max(n,d.longitude),l=Math.min(l,d.latitude),u=Math.max(u,d.latitude);var f=d.longitude>=0?d.longitude:d.longitude+s.Math.TWO_PI;a=Math.min(a,f),o=Math.max(o,f)}return n-r>o-a&&(r=a,n=o,n>Math.PI&&(n-=s.Math.TWO_PI),r>Math.PI&&(r-=s.Math.TWO_PI)),i?(i.west=r,i.south=l,i.east=n,i.north=u,i):new e(r,l,n,u)}}]),e}();e.MAX_VALUE=Object.freeze(new e(-Math.PI,-s.Math.PI_OVER_TWO,Math.PI,s.Math.PI_OVER_TWO)),s.GIS.Rectangle=e}(),function(){s.GIS=s.GIS||{};var e=function(){function e(t,i,r){_classCallCheck(this,e),this.longitude=t||0,this.latitude=i||0,this.height=r||0}return _createClass(e,null,[{key:"fromRadians",value:function(t,i,r,n){return r=r||0,n?(n.longitude=t,n.latitude=i,n.height=r,n):new e(t,i,r)}}]),e}();s.GIS.Cartographic=e}(),function(){s.GIS=s.GIS||{};var e,t,i={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},r={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},n={},a={east:new THREE.Vector3,north:new THREE.Vector3,up:new THREE.Vector3,west:new THREE.Vector3,south:new THREE.Vector3,down:new THREE.Vector3},o=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=new THREE.Vector3,h=function(){function h(){_classCallCheck(this,h)}return _createClass(h,null,[{key:"computeTemeToPseudoFixedMatrix",value:function(i,r){if(!s.Utils.defined(i))throw new Error("date is required.");t||(t=new s.JulianDate),e||(e=s.Math.TWO_PI/86400),t=s.JulianDate.addSeconds(i,-s.JulianDate.computeTaiMinusUtc(i),t);var n,a=t.dayNumber,o=t.secondsOfDay,l=a-2451545;n=o>=43200?(l+.5)/s.TimeConstants.DAYS_PER_JULIAN_CENTURY:(l-.5)/s.TimeConstants.DAYS_PER_JULIAN_CENTURY;var u=24110.54841+n*(8640184.812866+n*(.093104+-62e-7*n)),c=u*e%s.Math.TWO_PI,h=72921158553e-15+1.1772758384668e-19*(a-2451545.5),d=(o+.5*s.TimeConstants.SECONDS_PER_DAY)%s.TimeConstants.SECONDS_PER_DAY,f=c+h*d,p=Math.cos(f),m=Math.sin(f);return s.Utils.defined(r)||(r=new THREE.Matrix3),r.set(p,m,0,-m,p,0,0,0,1)}},{key:"localFrameToFixedFrameGenerator",value:function(e,t){if(!i.hasOwnProperty(e)||!i[e].hasOwnProperty(t))throw new Error("firstAxis and secondAxis must be east, north, up, west, south or down.");var h,d=i[e][t],f=e+t;return s.Utils.defined(n[f])?h=n[f]:(h=function(i,n,h){if(!s.Utils.defined(i))throw new Error("origin is required.");if(s.Utils.defined(h)||(h=new THREE.Matrix4),s.Math.equalsEpsilonVector3(i,c,s.Math.EPSILON14))o.fromArray(r[e],0),l.fromArray(r[t],0),u.fromArray(r[d],0);else if(s.Math.equalsEpsilon(i.x,0,s.Math.EPSILON14)&&s.Math.equalsEpsilon(i.y,0,s.Math.EPSILON14)){var f=Math.sign(i.z);o.fromArray(r[e],0),"east"!==e&&"west"!==e&&o.multiplyScalar(f),l.fromArray(r[t],0),"east"!==t&&"west"!==t&&l.multiplyScalar(f),u.fromArray(r[d],0),"east"!==d&&"west"!==d&&u.multiplyScalar(f)}else{n=s.Utils.defaultValue(n,s.GIS.Ellipsoid.WGS84),n.geodeticSurfaceNormal(i,a.up);var p=a.up,m=a.east;m.x=-i.y,m.y=i.x,m.z=0,a.east.copy(m),a.east.normalize(),a.north.copy(p),a.north.cross(m),a.down.copy(a.up),a.down.multiplyScalar(-1),a.west.copy(a.east),a.west.multiplyScalar(-1),a.south.copy(a.north),a.south.multiplyScalar(-1),o=a[e],l=a[t],u=a[d]}return h.elements[0]=o.x,h.elements[1]=o.y,h.elements[2]=o.z,h.elements[3]=0,h.elements[4]=l.x,h.elements[5]=l.y,h.elements[6]=l.z,h.elements[7]=0,h.elements[8]=u.x,h.elements[9]=u.y,h.elements[10]=u.z,h.elements[11]=0,h.elements[12]=i.x,h.elements[13]=i.y,h.elements[14]=i.z,h.elements[15]=1,h},n[f]=h),h}}]),h}();h.eastNorthUpToFixedFrame=h.localFrameToFixedFrameGenerator("east","north"),s.GIS.Transforms=h}(),function(){function e(e,t,i,r){t=s.Utils.defaultValue(t,0),i=s.Utils.defaultValue(i,0),r=s.Utils.defaultValue(r,0),e._radii=new THREE.Vector3(t,i,r),e._radiiSquared=new THREE.Vector3(t*t,i*i,r*r),e._radiiToTheFourth=new THREE.Vector3(t*t*t*t,i*i*i*i,r*r*r*r),e._oneOverRadii=new THREE.Vector3(0===t?0:1/t,0===i?0:1/i,0===r?0:1/r),e._oneOverRadiiSquared=new THREE.Vector3(0===t?0:1/(t*t),0===i?0:1/(i*i),0===r?0:1/(r*r)),e._minimumRadius=Math.min(t,i,r),e._maximumRadius=Math.max(t,i,r),e._centerToleranceSquared=s.Math.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}s.GIS=s.GIS||{};var t=new THREE.Vector3,i=function(){function i(t,r,n){_classCallCheck(this,i),this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,e(this,t,r,n)}return _createClass(i,[{key:"geodeticSurfaceNormal",value:function(e,i){if(!s.Math.equalsEpsilonVec3(e,t,s.Math.EPSILON14))return s.Utils.defined(i)||(i=new THREE.Vector3),i.copy(e),i.multiply(this._oneOverRadiiSquared),i.normalize()}},{key:"radii",get:function(){return this._radii}},{key:"radiiSquared",get:function(){return this._radiiSquared}},{key:"radiiToTheFourth",get:function(){return this._radiiToTheFourth}},{key:"oneOverRadii",get:function(){return this._oneOverRadii}},{key:"oneOverRadiiSquared",get:function(){return this._oneOverRadiiSquared}},{key:"minimumRadius",get:function(){return this._minimumRadius}},{key:"maximumRadius",get:function(){return this._maximumRadius}}]),i}();i.WGS84=Object.freeze(new i(6378137,6378137,6356752.314245179)),s.GIS.Ellipsoid=i}(),function(){s.GIS=s.GIS||{};var e=function(){function e(){_classCallCheck(this,e),this._numberOfLevelZeroTilesX=2,this._numberOfLevelZeroTilesY=1,this._rectangle=s.GIS.Rectangle.MAX_VALUE}return _createClass(e,[{key:"getNumberOfXTilesAtLevel",value:function(e){return this._numberOfLevelZeroTilesX<<e}},{key:"getNumberOfYTilesAtLevel",value:function(e){return this._numberOfLevelZeroTilesY<<e}},{key:"positionToTileXY",value:function(e,t,i){var r=this._rectangle;if(s.GIS.Rectangle.contains(r,e)){var n=this.getNumberOfXTilesAtLevel(t),a=this.getNumberOfYTilesAtLevel(t),o=r.width/n,l=r.height/a,u=e.longitude;r.east<r.west&&(u+=s.Math.TWO_PI);var c=(u-r.west)/o|0;c>=n&&(c=n-1);var h=(r.north-e.latitude)/l|0;return h>=a&&(h=a-1),i?(i.x=c,i.y=h,i):new THREE.Vector2(c,h)}}}]),e}();s.GIS.GeographicTilingScheme=e}(),function(){s.GIS=s.GIS||{};var e=[new s.GIS.Cartographic,new s.GIS.Cartographic,new s.GIS.Cartographic,new s.GIS.Cartographic],t=new THREE.Vector2,i=new s.GIS.GeographicTilingScheme,r=function(){function r(){_classCallCheck(this,r)}return _createClass(r,null,[{key:"initialize",value:function(){var e=r._initPromise;if(e)return e;var t=new THREE.FileLoader;t.setResponseType("json");var i=r._viewer._staticResourcesHost+"/Earth/approximateTerrainHeights.json";return e=new Promise(function(e,n){t.load(i,function(t){r._terrainHeights=t,e()})}),r._initPromise=e,e}},{key:"getMinimumMaximumHeights",value:function(e){var t=r.getTileXYLevel(e),i=r._defaultMinTerrainHeight,n=r._defaultMaxTerrainHeight;if(t){var a=t.level+"-"+t.x+"-"+t.y,o=r._terrainHeights[a];o&&(i=o[0],n=o[1])}return i=Math.max(r._defaultMinTerrainHeight,i),{minimumTerrainHeight:i,maximumTerrainHeight:n}}},{key:"getTileXYLevel",value:function(n){s.GIS.Cartographic.fromRadians(n.east,n.north,0,e[0]),s.GIS.Cartographic.fromRadians(n.west,n.north,0,e[1]),s.GIS.Cartographic.fromRadians(n.east,n.south,0,e[2]),s.GIS.Cartographic.fromRadians(n.west,n.south,0,e[3]);var a,o=0,l=0,u=0,c=0,h=r._terrainHeightsMaxLevel;for(a=0;a<=h;++a){for(var d=!1,f=0;f<4;++f){var p=e[f];if(i.positionToTileXY(p,a,t),0===f)u=t.x,c=t.y;else if(u!==t.x||c!==t.y){d=!0;break}}if(d)break;o=u,l=c}if(0!==a)return{x:o,y:l,level:a>h?h:a-1}}}]),r}();r._terrainHeightsMaxLevel=6,r._defaultMaxTerrainHeight=9e3,r._defaultMinTerrainHeight=-1e5,r._terrainHeights=void 0,r._initPromise=void 0,r._viewer=void 0,s.GIS.ApproximateTerrainHeights=r}(),s.Object3DEx=function(e,t){THREE.Object3D.call(this),this.type="Object3DEx",this.geometry=e||s.GeomUtil.EmptyGeometry,this.material=t||s.MaterialUtil.getDefaultStandardMaterial(),this.matrixAutoUpdate=!1,this.alive=!1,this.originalId=void 0,this.drawMode=THREE.TrianglesDrawMode},s.Object3DEx.prototype=Object.create(THREE.Mesh.prototype),s.Object3DEx.prototype.constructor=s.Object3DEx,s.Object3DEx.prototype.init=function(e){e&&e.parent&&e.parent.add(this)},s.Object3DEx.prototype.destroy=function(){this.parent&&this.parent.remove(this),this.userData&&(this.userData=null),this.geometry=null,this.material=null},s.Object3DEx.prototype.spawn=function(e){void 0!==e.userId?this.name=e.userId:void 0!==e.nodeId&&(this.name=e.nodeId),void 0!=e.meshId?this.meshId=e.meshId:this.meshId="",e.geometry&&(this.geometry=e.geometry),e.material&&(this.material=e.material),e.matrix?(this.matrix.copy(e.matrix),this.updateMatrixWorld(!0)):(this.matrix.identity(),this.updateMatrixWorld(!0)),e.databagId?this.databagId=e.databagId:this.databagId="",e.userData?this.userData=e.userData:this.userData&&(this.userData=null),e.originalId&&(this.originalId=e.originalId),void 0!=e.visible&&(this.visible=e.visible),void 0!=e.isMesh&&(this.isMesh=e.isMesh),void 0!=e.isLine&&(this.isLine=e.isLine),void 0!=e.isLineSegments&&(this.isLineSegments=e.isLineSegments),void 0!=e.instanceOrNot?this.instanceOrNot=e.instanceOrNot:this.instanceOrNot=!1,this.renderOrder=e.renderOrder||0,this.alive=!0,this.frustumCulled=!1,this.material.visible=!0},s.Object3DEx.prototype.clear=function(){this.geometry=s.GeomUtil.EmptyGeometry,this.material=s.MaterialUtil.DefaultMaterial,this.alive=!1,this.visible=!0,this.frustumCulled=!0,this.material.visible=!1},s.Object3DEx.prototype.isVisible=function(){return this.visible&&this.alive},s.Object3DEx.prototype.intersectBoxWithDistance=function(){var e=new THREE.Box3;return function(t,i){var r=this.geometry,n=this.material,a=this.matrixWorld;return i&&(a=new THREE.Matrix4,a.multiplyMatrices(this.matrixWorld,i)),void 0===n?-1:(r.boundingBox||r.computeBoundingBox(),e.copy(r.boundingBox),
e.applyMatrix4(a),t.ray.intersectBoxWithDistance(e))}}(),s.Object3DEx.prototype.intersectBoxWithDistanceByIndices=function(e,t){var i=this.matrixWorld,r=this.computeBoundingBox(t);return r.applyMatrix4(i),e.ray.intersectBoxWithDistance(r)},s.Object3DEx.prototype.intersectBoxWithClipPlane=function(e,t){var i=this.matrixWorld,r=this.computeBoundingBox(t);return r.applyMatrix4(i),r.intersectsPlane(e)},s.Object3DEx.prototype.raycastByIndices=function(){function e(e,t,i,r,n,a,o){return THREE.Triangle.barycoordFromPoint(e,t,i,r,d),n.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),n.add(a).add(o),n.clone()}function t(e,t,i,r,n,a,o){var s=e.material;if(null===(s instanceof Array?i.intersectTriangle(r,n,a,!1,o):s.side===THREE.BackSide?i.intersectTriangle(a,n,r,!0,o):i.intersectTriangle(r,n,a,s.side!==THREE.DoubleSide,o)))return null;p.copy(o),p.applyMatrix4(m);var l=t.ray.origin.distanceTo(p);return l<t.near||l>t.far?null:{distance:l,point:p.clone(),object:e}}function i(i,r,n,a,d,p,m,v){o.fromBufferAttribute(a,p),s.fromBufferAttribute(a,m),l.fromBufferAttribute(a,v);var g=t(i,r,n,o,s,l,f);if(g){if(d&&d.array&&d.array.length&&(u.fromBufferAttribute(d,p),c.fromBufferAttribute(d,m),h.fromBufferAttribute(d,v),g.uv=e(f,o,s,l,u,c,h)),a.instanceMatrix){var y=o.clone().applyMatrix4(a.instanceMatrix),M=s.clone().applyMatrix4(a.instanceMatrix),E=l.clone().applyMatrix4(a.instanceMatrix);g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(y,M,E))}else g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(o,s,l));g.faceIndex=p}return g}var r=new THREE.Matrix4,n=new THREE.Ray,a=new THREE.Sphere,o=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector2,c=new THREE.Vector2,h=new THREE.Vector2,d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Matrix4;return function(e,t,o,s){var l=this.geometry,u=this.material;if(s){var l=this.geometry,u=this.material;if(m=new THREE.Matrix4,m.multiplyMatrices(this.matrixWorld,s),void 0===u)return;if(null===l.boundingSphere&&l.computeBoundingSphere(),a.copy(l.boundingSphere),a.applyMatrix4(m),!1===e.ray.intersectsSphere(a))return;if(r.getInverse(m),n.copy(e.ray).applyMatrix4(r),null!==l.boundingBox&&!1===n.intersectsBox(l.boundingBox))return;var c,h,d,f,p=l.index,v=l.attributes.position;v.instanceMatrix=s;var g,y,M=l.attributes.uv;if(null!==p)for(g=0,y=p.count;g<y;g+=3)h=p.getX(g),d=p.getX(g+1),f=p.getX(g+2),(c=i(this,e,n,v,M,h,d,f))&&(c.faceIndex=Math.floor(g/3),t.push(c));else for(g=0,y=v.count;g<y;g+=3)h=g,d=g+1,f=g+2,(c=i(this,e,n,v,M,h,d,f))&&(c.index=h,t.push(c))}else{if(m=this.matrixWorld,void 0===u)return;if(a.copy(this.computeBoundingSphere(o)),a.applyMatrix4(m),!1===e.ray.intersectsSphere(a))return;r.getInverse(m),n.copy(e.ray).applyMatrix4(r);var E=this.computeBoundingBox(o);if(!1===n.intersectsBox(E))return;var c,h,d,f,g,b,v=l.attributes.position,M=l.attributes.uv,x=o.indexStart,I=o.indexStart+o.indexCount,T=l.getIndex().array;for(g=x,b=I;g<b;g+=3)h=T[g],d=T[g+1],f=T[g+2],(c=i(this,e,n,v,M,h,d,f))&&(c.faceIndex=Math.floor(g/3),t.push(c))}}}(),s.Object3DEx.prototype.minDistanceToTri=function(e,t,i){function r(e,t){return new THREE.Vector3(e.x-t.x,e.y-t.y,e.z-t.z)}function n(e,t){return new THREE.Vector3(e.x+t.x,e.y+t.y,e.z+t.z)}function a(e,t,i){return new THREE.Vector3(e.x+t.x*i,e.y+t.y*i,e.z+t.z*i)}function o(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function s(e,t){return new THREE.Vector3(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)}function l(e,t,i,l){var u,c,h=o(t,l),d=o(t,t),f=o(l,l),p=r(i,e),m=o(t,p),v=o(l,p);u=(m*f-v*h)/(d*f-h*h),u<0||isNaN(u)?u=0:u>1&&(u=1),c=(u*h-v)/f;var g,y,M,E;return c<=0||isNaN(c)?(y=i,u=m/d,u<=0||isNaN(u)?(g=e,M=r(i,e)):u>=1?(g=n(e,t),M=r(i,g)):(g=a(e,t,u),E=s(p,t),M=s(t,E))):c>=1?(y=n(i,l),u=(h+m)/d,u<=0||isNaN(u)?(g=e,M=r(y,e)):u>=1?(g=n(e,t),M=r(y,g)):(g=a(e,t,u),p=r(y,e),E=s(p,t),M=s(t,E))):(y=a(i,l,c),u<=0||isNaN(u)?(g=e,E=s(p,l),M=s(l,E)):u>=1?(g=n(e,t),p=r(i,g),E=s(p,l),M=s(l,E)):(g=a(e,t,u),M=s(t,l),o(M,p)<0&&M.multiplyScalar(-1))),{vec:M,closestP:g,closestQ:y}}for(var u,c,h,d,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,v={start:null,end:null,minDistance:Number.POSITIVE_INFINITY},g=this.geometry,y=g.attributes.position,M=t?t.indexStart:0,E=g.getIndex().array,b=t?t.indexStart+t.indexCount:E.length,x=M,d=b;x<d;x+=3){u=E[x],c=E[x+1],h=E[x+2];var I=[];!function(e,t,i,r,n,a){f.fromBufferAttribute(t,i),p.fromBufferAttribute(t,r),m.fromBufferAttribute(t,n),a&&(f.applyMatrix4(a),p.applyMatrix4(a),m.applyMatrix4(a)),e.push(f),e.push(p),e.push(m)}(I,y,u,c,h,i);var T=function(e,t){var i,n,u,c=[],h=[];c[0]=r(e[1],e[0]),c[1]=r(e[2],e[1]),c[2]=r(e[0],e[2]),h[0]=r(t[1],t[0]),h[1]=r(t[2],t[1]),h[2]=r(t[0],t[2]);for(var d,f,p,m,v=0,g=e[0].distanceToSquared(t[0])+1,y=0;y<3;y++)for(var M=0;M<3;M++){var E=l(e[y],c[y],t[M],h[M]);u=E.vec,i=E.closestP,n=E.closestQ,d=r(n,i);var b=o(d,d);if(b<=g){p=i.clone(),m=n.clone(),g=b,f=r(e[(y+2)%3],i);var x=o(f,u);f=r(t[(M+2)%3],n);var I=o(f,u);if(x<=0&&I>=0)return{start:i.clone(),end:n.clone(),minDistance:Math.sqrt(b)};var T=o(d,u);x<0&&(x=0),I>0&&(I=0),T-x+I>0&&(v=1)}}var w=s(c[0],c[1]),C=o(w,w);if(C>1e-15){var S=[];d=r(e[0],t[0]),S[0]=o(d,w),d=r(e[0],t[1]),S[1]=o(d,w),d=r(e[0],t[2]),S[2]=o(d,w);var A=-1;if(S[0]>0&&S[1]>0&&S[2]>0?(A=S[0]<S[1]?0:1,S[2]<S[A]&&(A=2)):S[0]<0&&S[1]<0&&S[2]<0&&(A=S[0]>S[1]?0:1,S[2]>S[A]&&(A=2)),A>=0&&(v=1,d=r(t[A],e[0]),f=s(w,c[0]),o(d,f)>0&&(d=r(t[A],e[1]),f=s(w,c[1]),o(d,f)>0&&(d=r(t[A],e[2]),f=s(w,c[2]),o(d,f)>0))))return i=a(t[A],w,S[A]/C),n=t[A].clone(),{start:i.clone(),end:n,minDistance:i.distanceTo(n)}}var k=s(h[0],h[1]),R=o(k,k);if(R>1e-15){var B=[];d=r(t[0],e[0]),B[0]=o(d,k),d=r(t[0],e[1]),B[1]=o(d,k),d=r(t[0],e[2]),B[2]=o(d,k);var A=-1;if(B[0]>0&&B[1]>0&&B[2]>0?(A=B[0]<B[1]?0:1,B[2]<B[A]&&(A=2)):B[0]<0&&B[1]<0&&B[2]<0&&(A=B[0]>B[1]?0:1,B[2]>B[A]&&(A=2)),A>=0&&(v=1,d=r(e[A],t[0]),f=s(k,h[0]),o(d,f)>0&&(d=r(e[A],t[1]),f=s(k,h[1]),o(d,f)>0&&(d=r(e[A],t[2]),f=s(k,h[2]),o(d,f)>0))))return i=e[A].clone(),n=a(e[A],k,B[A]/R),{start:i,end:n.clone(),minDistance:i.distanceTo(n)}}return v?(i=p,n=m,{start:p.clone(),end:m.clone(),minDistance:Math.sqrt(g)}):{start:p.clone(),end:m.clone(),minDistance:0}}(e,I);if(T.minDistance<=0)return v.minDistance=0,v;v.minDistance>T.minDistance&&(v.minDistance=T.minDistance,v.start=T.start.clone(),v.end=T.end.clone())}return v},s.Object3DEx.prototype.computeBoundingBox=function(e){var t,i,r=new THREE.Box3,n=this.geometry,a=n.attributes.position.array;return e?(t=e.positionStart,i=e.positionStart+e.positionCount):(t=0,i=a.length),this.setBoundingBoxFromArray(r,a,t,i),r},s.Object3DEx.prototype.computeBoundingSphere=function(e){var t,i,r=new THREE.Box3,n=new THREE.Vector3,a=this.geometry,o=a.attributes.position.array;e?(t=e.positionStart,i=e.positionStart+e.positionCount):(t=0,i=o.length);var s=new THREE.Sphere,l=s.center;this.setBoundingBoxFromArray(r,o,t,i),r.getCenter(l);for(var u=0,c=t,h=i;c<h;c+=3)n.x=o[c],n.y=o[c+1],n.z=o[c+2],u=Math.max(u,l.distanceToSquared(n));return s.radius=Math.sqrt(u),s},s.Object3DEx.prototype.setBoundingBoxFromArray=function(e,t,i,r){for(var n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0,c=i,h=r;c<h;c+=3){var d=t[c],f=t[c+1],p=t[c+2];d<n&&(n=d),f<a&&(a=f),p<o&&(o=p),d>s&&(s=d),f>l&&(l=f),p>u&&(u=p)}e.min.set(n,a,o),e.max.set(s,l,u)},s.MaterialEx=function(){this.materialDefaultParams={color:14540253,opacity:.5,transparent:!0,side:THREE.DoubleSide},this.material=s.MaterialUtil.createStandardMaterial(this.materialDefaultParams)},s.MaterialEx.prototype.destroy=function(){this.material=null},s.MaterialEx.prototype.resetColor=function(){this.material.color.setHex(this.materialDefaultParams.color)},s.MaterialEx.prototype.resetOpacity=function(){this.material.opacity=this.materialDefaultParams.opacity},s.MaterialEx.prototype.reset=function(){this.material.color.setHex(this.materialDefaultParams.color),this.material.opacity=this.materialDefaultParams.opacity,this.material.transparent=this.materialDefaultParams.transparent,this.material.side=this.materialDefaultParams.side,this.material.needsUpdate=!0},s.PointsEx=function(e,t){THREE.Points.call(this,e,t),this.pointIds=[]},s.PointsEx.prototype=Object.create(THREE.Points.prototype),s.PointsEx.prototype.constructor=s.PointsEx,s.PointsEx.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,i=new THREE.Sphere;return function(r,n){function a(t,i){var r=t.clone();return r.applyMatrix4(u),r.project(h),r.y+=i/d,r.unproject(h),r.applyMatrix4(e),r}function o(e,i,o){var l=a(e,i),c=l.distanceToSquared(e),h=t.distanceSqToPoint(l);if(h<c){var d=t.closestPointToPoint(l);d.applyMatrix4(u);var p=r.ray.origin.distanceTo(d);if(p<r.near||p>r.far)return;n.push({id:f[o],distance:p,distanceToRay:Math.sqrt(h),point:d.clone(),index:o,face:null,object:s})}}var s=this,l=this.geometry,u=this.matrixWorld,c=this.size,h=r.camera,d=r.viewportSize.height,f=this.pointIds;e.getInverse(u),null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere);var p=i.center,m=a(p,c),v=m.distanceToSquared(p);if(i.radius+=v,i.center.copy(m),i.applyMatrix4(u),!1!==r.ray.intersectsSphere(i)){t.copy(r.ray).applyMatrix4(e);var g=new THREE.Vector3,y=c;if(l.isBufferGeometry){var M,E=l.index,b=l.attributes,x=b.position.array,I=!1;if(b.attrSize&&(I=!0,M=b.attrSize.array),null!==E)for(var T=E.array,w=0,C=T.length;w<C;w++){var S=T[w];g.fromArray(x,3*S),I&&(y=M[S]),o(g,y,S)}else for(var w=0,A=x.length/3;w<A;w++)g.fromArray(x,3*w),I&&(y=M[w]),o(g,y,w)}else for(var k=l.vertices,w=0,A=k.length;w<A;w++)o(k[w],y,w)}}}(),s.PointsEx.prototype.setAttributeSize=function(e,t){var i=this.geometry.attributes;i.attrSize&&(i.attrSize.array[e]=t,i.attrSize.needsUpdate=!0)},s.PointsEx.prototype.getAttributeSize=function(e){var t=this.geometry.attributes,i=this.size;return t.attrSize&&(i=t.attrSize.array[e]),i},s.PointsEx.prototype.getAttributeHoverAnimation=function(e){var t=this.geometry.attributes,i=!0;return t.attrHoverAnimation&&(i=t.attrHoverAnimation.array[e]),i},s.MeshEx=function(e,t){e=e||s.GeomUtil.EmptyGeometry,t=t||s.MaterialUtil.getDefaultStandardMaterial(),THREE.Mesh.call(this,e,t),this.type="MeshEx",this.matrixAutoUpdate=!1,this.alive=!1,this.originalId=void 0,this.pickable=!0},s.MeshEx.prototype=Object.create(THREE.Mesh.prototype),s.MeshEx.prototype.constructor=s.MeshEx,s.MeshEx.prototype.init=function(e){e&&e.parent&&e.parent.add(this)},s.MeshEx.prototype.destroy=function(){this.parent&&this.parent.remove(this),this.userData&&(this.userData=null),this.geometry=null,this.material=null},s.MeshEx.prototype.spawn=function(e){void 0!==e.userId?this.name=e.userId:void 0!==e.nodeId&&(this.name=e.nodeId),e.geometry&&(this.geometry=e.geometry),e.material&&(this.material=e.material),e.matrix?(this.matrix.copy(e.matrix),this.updateMatrixWorld(!0)):(this.matrix.identity(),this.updateMatrixWorld(!0)),e.databagId?this.databagId=e.databagId:this.databagId="",e.userData?this.userData=e.userData:this.userData&&(this.userData=null),e.originalId&&(this.originalId=e.originalId),void 0!=e.visible&&(this.visible=e.visible),void 0!=e.isMesh&&(this.isMesh=e.isMesh),void 0!=e.isLine&&(this.isLine=e.isLine),void 0!=e.isLineSegments&&(this.isLineSegments=e.isLineSegments),void 0!=e.pickable?this.pickable=e.pickable:this.pickable=!0,this.renderOrder=e.renderOrder||0,this.alive=!0,this.frustumCulled=!1,this.material.visible=!0},s.MeshEx.prototype.clear=function(){this.geometry=s.GeomUtil.EmptyGeometry,this.material=s.MaterialUtil.DefaultMaterial,this.alive=!1,this.visible=!0,this.frustumCulled=!0,this.material.visible=!1},s.MeshEx.prototype.isVisible=function(){return this.visible&&this.alive},s.MeshEx.prototype.intersectBoxWithDistance=function(){var e=new THREE.Box3;return function(t,i){var r=this.geometry,n=this.material,a=this.matrixWorld;return i&&(a=new THREE.Matrix4,a.multiplyMatrices(this.matrixWorld,i)),void 0===n?-1:(r.boundingBox||r.computeBoundingBox(),e.copy(r.boundingBox),e.applyMatrix4(a),t.ray.intersectBoxWithDistance(e))}}(),s.MeshEx.prototype.intersectBoxWithDistanceByIndices=function(e,t){var i=this.matrixWorld,r=this.computeBoundingBox(t);return r.applyMatrix4(i),e.ray.intersectBoxWithDistance(r)},s.MeshEx.prototype.intersectBoxWithClipPlane=function(e,t){var i=this.matrixWorld,r=t.boundingBox.clone();return r.applyMatrix4(i),r.intersectsPlane(e)},s.MeshEx.prototype.intersectBoxWithPlaneMesh=function(e,t){var i=this.matrixWorld,r=t.boundingBox.clone();r.applyMatrix4(i);for(var n=e.matrixWorld,a=e.geometry.vertices,o=a.map(function(e){return e.clone().applyMatrix4(n)}),l=e.geometry.faces,u=l.length,c=0;c<u;++c){var h=(new THREE.Triangle).setFromPointsAndIndices(o,l[c].a,l[c].b,l[c].c);if(s.GeomUtil.boxIntersectsTriangle(r,h))return!0}return!1},s.MeshEx.prototype._traverIntersectionPoints=function(e,t,i,r){function n(e,t,i){var n=t.intersectLine(e);n&&r&&r(n,i)}var a=new THREE.Matrix4;a.getInverse(this.matrixWorld);var o=e.clone();o.constant*=-1,o=o.applyMatrix4(a);for(var s,l,u,c=this.geometry.getIndex().array,h=this.geometry.getAttribute("position").array,d=i?0:t.indexStart,f=i?c.length:t.indexStart+t.indexCount,p=new THREE.Vector3,m=new THREE.Vector3,v=new THREE.Vector3,g=new THREE.Line3,y=new THREE.Line3,M=new THREE.Line3,E=d,b=f;E<b;E+=3){var x=E/3;s=3*c[E],l=3*c[E+1],u=3*c[E+2],p.set(h[s],h[s+1],h[s+2]),m.set(h[l],h[l+1],h[l+2]),v.set(h[u],h[u+1],h[u+2]),i&&(p.applyMatrix4(t.matrix),m.applyMatrix4(t.matrix),v.applyMatrix4(t.matrix)),g.set(p,m),y.set(m,v),M.set(v,p),n(g,o,x),n(y,o,x),n(M,o,x)}},s.MeshEx.prototype.getIntersectionPoints=function(e,t,i,r){this._traverIntersectionPoints(e,t,r,function(e,t){i.push(e.x,e.y,e.z)})},s.MeshEx.prototype.getIntersectionContours=function(e,t,i,r){var n=[];if(this._traverIntersectionPoints(e,t,r,function(e,t){var i=e.clone();i.faceIndex=t,i.checked=!1,n.push(i)}),0!==n.length){s.ClipPlaneContourManager.getContours(n,[],!0).map(function(e){var t=[];e.map(function(e){t.push(e)}),i.push(t)})}},s.MeshEx.prototype.raycastByIndices=function(){function e(e,t,i,r,n,a,o){return THREE.Triangle.barycoordFromPoint(e,t,i,r,d),n.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),n.add(a).add(o),n.clone()}function t(e,t,i,r,n,a,o){var s=e.material;if(null===(s instanceof Array?i.intersectTriangle(r,n,a,!1,o):s.side===THREE.BackSide?i.intersectTriangle(a,n,r,!0,o):i.intersectTriangle(r,n,a,s.side!==THREE.DoubleSide,o)))return null;p.copy(o),p.applyMatrix4(m);var l=t.ray.origin.distanceTo(p);return l<t.near||l>t.far?null:{distance:l,point:p.clone(),object:e}}function i(i,r,n,a,d,p,m,v){o.fromBufferAttribute(a,p),s.fromBufferAttribute(a,m),l.fromBufferAttribute(a,v);var g=t(i,r,n,o,s,l,f);if(g){if(d&&d.array&&d.array.length&&(u.fromBufferAttribute(d,p),c.fromBufferAttribute(d,m),h.fromBufferAttribute(d,v),g.uv=e(f,o,s,l,u,c,h)),a.instanceMatrix){var y=o.clone().applyMatrix4(a.instanceMatrix),M=s.clone().applyMatrix4(a.instanceMatrix),E=l.clone().applyMatrix4(a.instanceMatrix);g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(y,M,E))}else g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(o,s,l));g.faceIndex=p}return g}var r=new THREE.Matrix4,n=new THREE.Ray,a=new THREE.Sphere,o=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector2,c=new THREE.Vector2,h=new THREE.Vector2,d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Matrix4;return function(e,t,o,s,l){var u=this.geometry,c=this.material;if(s){var u=this.geometry,c=this.material;if(m=new THREE.Matrix4,m.multiplyMatrices(this.matrixWorld,s),void 0===c)return;if(null===u.boundingSphere&&u.computeBoundingSphere(),a.copy(u.boundingSphere),a.applyMatrix4(m),!1===e.ray.intersectsSphere(a))return;if(r.getInverse(m),n.copy(e.ray).applyMatrix4(r),null!==u.boundingBox&&!1===n.intersectsBox(u.boundingBox))return;var h,d,f,p,v=u.index,g=u.attributes.position;g.instanceMatrix=s;var y,M,E=u.attributes.uv;if(null!==v)for(y=0,M=v.count;y<M;y+=3)d=v.getX(y),f=v.getX(y+1),p=v.getX(y+2),(h=i(this,e,n,g,E,d,f,p))&&(h.faceIndex=Math.floor(y/3),t.push(h));else for(y=0,M=g.count;y<M;y+=3)d=y,f=y+1,p=y+2,(h=i(this,e,n,g,E,d,f,p))&&(h.index=d,t.push(h))}else{if(m=this.matrixWorld,void 0===c)return;if(a.copy(this.computeBoundingSphere(o)),a.applyMatrix4(m),!1===e.ray.intersectsSphere(a))return;r.getInverse(m),n.copy(e.ray).applyMatrix4(r);var b=this.computeBoundingBox(o);if(!1===n.intersectsBox(b))return;var h,d,f,p,y,x,g=u.attributes.position,E=u.attributes.uv,I=o.indexStart,T=o.indexStart+o.indexCount,w=u.getIndex().array;for(y=I,x=T;y<x;y+=3)d=w[y],f=w[y+1],p=w[y+2],(h=i(this,e,n,g,E,d,f,p))&&(h.faceIndex=Math.floor(y/3),t.push(h))}}}(),s.MeshEx.prototype.raycastByIndices2=function(){function e(e,t,i,r,n,a,o){return THREE.Triangle.barycoordFromPoint(e,t,i,r,d),n.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),n.add(a).add(o),n.clone()}function t(e,t,i,r,n,a,o){var s=e.material;if(null===(s instanceof Array?i.intersectTriangle(r,n,a,!1,o):s.side===THREE.BackSide?i.intersectTriangle(a,n,r,!0,o):i.intersectTriangle(r,n,a,s.side!==THREE.DoubleSide,o)))return null;p.copy(o),p.applyMatrix4(m);var l=t.ray.origin.distanceTo(p);return l<t.near||l>t.far?null:{distance:l,point:p.clone(),object:e}}function i(i,r,n,a,d,p,m,v){o.fromBufferAttribute(a,p),s.fromBufferAttribute(a,m),l.fromBufferAttribute(a,v);var g=t(i,r,n,o,s,l,f);if(g){if(d&&d.array&&d.array.length&&(u.fromBufferAttribute(d,p),c.fromBufferAttribute(d,m),h.fromBufferAttribute(d,v),g.uv=e(f,o,s,l,u,c,h)),a.instanceMatrix){var y=o.clone().applyMatrix4(a.instanceMatrix),M=s.clone().applyMatrix4(a.instanceMatrix),E=l.clone().applyMatrix4(a.instanceMatrix);g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(y,M,E))}else g.face=new THREE.Face3(p,m,v,THREE.Triangle.normal(o,s,l));g.faceIndex=p}return g}var r=new THREE.Matrix4,n=new THREE.Ray,a=new THREE.Sphere,o=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector2,c=new THREE.Vector2,h=new THREE.Vector2,d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Matrix4;return function(e,t,o,s){var l=this.geometry,u=this.material;if(s=!!s,o.isInstanced){if(void 0===o.matrix)return;if(m.multiplyMatrices(this.matrixWorld,o.matrix),void 0===u)return;if(s&&(null===l.boundingSphere&&l.computeBoundingSphere(),a.copy(l.boundingSphere),a.applyMatrix4(m),!1===e.ray.intersectsSphere(a)))return;if(r.getInverse(m),n.copy(e.ray).applyMatrix4(r),s&&null!==l.boundingBox&&!1===n.intersectsBox(l.boundingBox))return;var c,h,d,f,p=l.index,v=l.attributes.position;v.instanceMatrix=o.matrix;var g,y,M=l.attributes.uv;if(null!==p)for(g=0,y=p.count;g<y;g+=3)h=p.getX(g),d=p.getX(g+1),f=p.getX(g+2),(c=i(this,e,n,v,M,h,d,f))&&(c.faceIndex=Math.floor(g/3),t.push(c));else for(g=0,y=v.count;g<y;g+=3)h=g,d=g+1,f=g+2,(c=i(this,e,n,v,M,h,d,f))&&(c.index=h,t.push(c))}else if(o.matrix?m.multiplyMatrices(this.matrixWorld,o.matrix):m=this.matrixWorld,void 0!==u&&(!s||(a.copy(this.computeBoundingSphere(o)),a.applyMatrix4(m),!1!==e.ray.intersectsSphere(a)))){if(r.getInverse(m),n.copy(e.ray).applyMatrix4(r),s){var E=this.computeBoundingBox(o);if(!1===n.intersectsBox(E))return}var c,h,d,f,g,b,v=l.attributes.position,M=l.attributes.uv,x=o.indexStart,I=o.indexStart+o.indexCount,T=l.getIndex().array;for(g=x,b=I;g<b;g+=3)h=T[g],d=T[g+1],f=T[g+2],(c=i(this,e,n,v,M,h,d,f))&&(c.faceIndex=Math.floor(g/3),t.push(c))}}}(),s.MeshEx.prototype.computeBoundingBox=function(e){var t,i,r=new THREE.Box3,n=this.geometry,a=n.attributes.position.array;return e?(t=e.positionStart,i=e.positionStart+e.positionCount):(t=0,i=a.length),this.setBoundingBoxFromArray(r,a,t,i),r},s.MeshEx.prototype.computeBoundingSphere=function(e){var t,i,r=new THREE.Box3,n=new THREE.Vector3,a=this.geometry,o=a.attributes.position.array;e?(t=e.positionStart,i=e.positionStart+e.positionCount):(t=0,i=o.length);var s=new THREE.Sphere,l=s.center;this.setBoundingBoxFromArray(r,o,t,i),r.getCenter(l);for(var u=0,c=t,h=i;c<h;c+=3)n.x=o[c],n.y=o[c+1],n.z=o[c+2],u=Math.max(u,l.distanceToSquared(n));return s.radius=Math.sqrt(u),s},s.MeshEx.prototype.setBoundingBoxFromArray=function(e,t,i,r){for(var n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0,c=i,h=r;c<h;c+=3){var d=t[c],f=t[c+1],p=t[c+2];d<n&&(n=d),f<a&&(a=f),p<o&&(o=p),d>s&&(s=d),f>l&&(l=f),p>u&&(u=p)}e.min.set(n,a,o),e.max.set(s,l,u)},function(){function e(e,t){THREE.LineSegments.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var i=this.initBones(),r=new THREE.Skeleton(i);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}e.prototype=Object.assign(Object.create(THREE.LineSegments.prototype),{constructor:e,isSkinnedMesh:!0,initBones:function(){var e,t,i,r,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],e=new THREE.Bone,n.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],-1!==t.parent&&null!==t.parent&&void 0!==n[t.parent]?n[t.parent].add(n[i]):this.add(n[i])}return this.updateMatrixWorld(!0),n},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];e=1/i.lengthManhattan(),e!==1/0?i.multiplyScalar(e):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new THREE.Vector4,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)r.x=n.getX(t),r.y=n.getY(t),r.z=n.getZ(t),r.w=n.getW(t),e=1/r.lengthManhattan(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),n.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){THREE.LineSegments.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),s.SkinnedLineEx=e}(),THREE.Wireframe=function(e,t){THREE.Mesh.call(this),this.type="Wireframe",this.geometry=void 0!==e?e:new THREE.LineSegmentsGeometry,this.material=void 0!==t?t:new THREE.LineMaterial({color:16777215*Math.random()})},THREE.Wireframe.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.Wireframe,isWireframe:!0,computeLineDistances:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){for(var i=this.geometry,r=i.attributes.instanceStart,n=i.attributes.instanceEnd,a=new Float32Array(2*r.data.count),o=0,s=0,l=r.data.count;o<l;o++,s+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(n,o),a[s]=0===s?0:a[s-1],a[s+1]=a[s]+e.distanceTo(t);var u=new THREE.InstancedInterleavedBuffer(a,2,1);return i.addAttribute("instanceDistanceStart",new THREE.InterleavedBufferAttribute(u,1,0)),i.addAttribute("instanceDistanceEnd",new THREE.InterleavedBufferAttribute(u,1,1)),this}}(),copy:function(e){return this}}),THREE.WireframeGeometry2=function(e){THREE.LineSegmentsGeometry.call(this),this.type="WireframeGeometry2",this.fromWireframeGeometry(new THREE.WireframeGeometry(e))},THREE.WireframeGeometry2.prototype=Object.assign(Object.create(THREE.LineSegmentsGeometry.prototype),{constructor:THREE.WireframeGeometry2,isWireframeGeometry2:!0,copy:function(e){return this}}),s.BBoxNode=function(e,t){var i=new THREE.BufferGeometry;i.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.LineSegments.call(this,i,new THREE.LineBasicMaterial({color:t})),void 0!==e&&this.updateBBox(e)},s.BBoxNode.prototype=Object.create(THREE.LineSegments.prototype),s.BBoxNode.prototype.constructor=s.BBoxNode,s.BBoxNode.prototype.unload=function(){},s.BBoxNode.prototype.updateBBox=function(e){var t=e.min,i=e.max,r=this.geometry.attributes.position.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=i.y,r[8]=i.z,r[9]=t.x,r[10]=t.y,r[11]=i.z,r[12]=t.x,r[13]=t.y,r[14]=i.z,r[15]=i.x,r[16]=t.y,r[17]=i.z,r[18]=i.x,r[19]=t.y,r[20]=i.z,r[21]=i.x,r[22]=i.y,r[23]=i.z,r[24]=i.x,r[25]=i.y,r[26]=t.z,r[27]=t.x,r[28]=i.y,r[29]=t.z,r[30]=t.x,r[31]=i.y,r[32]=t.z,r[33]=t.x,r[34]=t.y,r[35]=t.z,r[36]=t.x,r[37]=t.y,r[38]=t.z,r[39]=i.x,r[40]=t.y,r[41]=t.z,r[42]=i.x,r[43]=t.y,r[44]=t.z,r[45]=i.x,r[46]=i.y,r[47]=t.z,r[48]=i.x,r[49]=i.y,r[50]=i.z,r[51]=i.x,r[52]=i.y,r[53]=t.z,r[54]=t.x,r[55]=i.y,r[56]=i.z,r[57]=t.x,r[58]=i.y,r[59]=t.z,r[60]=t.x,r[61]=t.y,r[62]=i.z,r[63]=t.x,r[64]=t.y,r[65]=t.z,r[66]=i.x,r[67]=t.y,r[68]=i.z,r[69]=i.x,r[70]=t.y,r[71]=t.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingBox(),this.geometry.computeBoundingSphere(),this.matrixAutoUpdate=!1},THREE.PlaneBufferGeometry2=function(e,t,i){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry2";var r,n,a=e[0],o=e[1],s=e[2],l=o.clone().distanceTo(s),u=a.clone().distanceTo(o),c=s.clone().sub(o).normalize(),h=o.clone().sub(a).normalize(),d=Math.floor(t)||1,f=Math.floor(i)||1,p=d+1,m=f+1,v=l/d,g=u/f,y=[],M=[],E=[],b=[],x=e[0].clone(),I=c.clone().cross(h).normalize();for(n=0;n<m;n++){var T=h.clone().multiplyScalar(n*g);for(r=0;r<p;r++){var w=c.clone().multiplyScalar(r*v),C=x.clone().add(w.add(T));M.push(C.x,C.y,C.z),E.push(I),b.push(r/d),b.push(1-n/f)}}for(n=0;n<f;n++)for(r=0;r<d;r++){var S=r+p*n,A=r+p*(n+1),k=r+1+p*(n+1),R=r+1+p*n;y.push(S,A,R),y.push(A,k,R)}this.setIndex(y),this.addAttribute("position",new THREE.Float32BufferAttribute(M,3)),this.addAttribute("normal",new THREE.Float32BufferAttribute(E,3)),this.addAttribute("uv",new THREE.Float32BufferAttribute(b,2))},THREE.PlaneBufferGeometry2.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry2.prototype.constructor=THREE.PlaneBufferGeometry2,function(){var e=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],t=e.length,i=Math.cos(THREE.Math.degToRad(30)),r=Math.cos(THREE.Math.degToRad(150)),n=new s.GIS.Cartographic,a=new s.GIS.Cartographic,o=[n,a],l=new s.GIS.Rectangle,u=function(u){function c(e){_classCallCheck(this,c);var t=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));t.type="GroundCurveGeometry",t.curve=void 0,t.viewer=void 0,t.tileManager=void 0,t.curveType=void 0,t.minHeight=-1e3,t.maxHeight=1e3,t.lowest=100,t.localPositions=[],t._initialized=!1,t._options=e;var i=t;return s.GIS.ApproximateTerrainHeights.initialize().then(function(){var t=i.createCurve(e),r=i.createGeometry(t),n=i.createAttributes(r);i.setIndex(n.index);for(var a in n.attributes)i.addAttribute(a,new THREE.Float32BufferAttribute(n.attributes[a].array,n.attributes[a].itemSize));i.computeBoundingSphere(),i._initialized||(i._initialized=!0,i.viewer.render())}),t}return _inherits(c,u),_createClass(c,[{key:"createAttributes",value:function(i){for(var r=i.bottomPositionsArray,n=i.topPositionsArray,a=i.normalsArray,o=r.length/3-1,s=8*o,l=2*s,u=3*s,h=36*o,d=new Array(h),f=new Array(u),p=new Array(u),m=new Array(u),v=new Array(u),g=new Array(u),y=new Array(u),M=new Array(l),E=0,b=new THREE.Vector3,x=new THREE.Vector3,I=n.length/3,T=0,w=0;w<I-1;w++)b.fromArray(n,T),x.fromArray(n,T+3),E+=b.distanceTo(x),T+=3;var C=0,S=new THREE.Vector3,A=new THREE.Vector3,k=new THREE.Vector3,R=new THREE.Vector3,B=new THREE.Vector3,L=new THREE.Vector3,O=0,P=0,D=0,N=0,_=0,H=0,F=!1;A.fromArray(r,O),R.fromArray(n,O),L.fromArray(a,O),O=3;for(var w=0;w<o;w++){S.copy(A),k.copy(R),B.copy(L),F&&B.negate(),A.fromArray(r,O),R.fromArray(n,O),L.fromArray(a,O),F=c._breakMiter(L,S,A,R);var U=k.distanceTo(R),G=new THREE.Vector3;G.subVectors(A,S);var z=new THREE.Vector3;z.copy(G),z.normalize();var j=new THREE.Vector3;j.subVectors(k,S),j.normalize();var V=new THREE.Vector3;V.crossVectors(z,j),V.normalize();var W=new THREE.Vector3;W.crossVectors(j,B),W.normalize();var Y=new THREE.Vector3;Y.subVectors(R,A),Y.normalize();var Z=new THREE.Vector3;Z.crossVectors(L,Y),Z.normalize();for(var Q=U/E,X=C/E,J=0;J<8;J++){var D=_+3*J,N=H+2*J,K=J<4?1:-1,q=2===J||3===J||6===J||7===J?1:-1;S.toArray(p,D),W.toArray(m,D),Z.toArray(v,D),G.toArray(y,D),V.toArray(g,D);var $=new THREE.Vector2;$.x=Q*K;var ee=X*q;0===ee&&q<0&&(ee=9),$.y=ee,$.toArray(M,N)}var te=new THREE.Vector3,ie=new THREE.Vector3,re=new THREE.Vector3,ne=new THREE.Vector3;te.copy(S),ie.copy(A),re.copy(k),ne.copy(R);var ae=this._getMinMaxHeight(S,A);ae&&(te.y=ae.minimumTerrainHeight,ie.y=ae.minimumTerrainHeight,re.y=ae.maximumTerrainHeight,ne.y=ae.maximumTerrainHeight,this.lowest=Math.min(this.lowest,te.y),this.lowest=Math.min(this.lowest,ie.y)),te.addScaledVector(V,1e-5),ie.addScaledVector(V,1e-5),ne.addScaledVector(V,1e-5),re.addScaledVector(V,1e-5),te.toArray(f,P),ie.toArray(f,P+3),ne.toArray(f,P+6),re.toArray(f,P+9),te.addScaledVector(V,-2e-5),ie.addScaledVector(V,-2e-5),ne.addScaledVector(V,-2e-5),re.addScaledVector(V,-2e-5),te.toArray(f,P+12),ie.toArray(f,P+15),ne.toArray(f,P+18),re.toArray(f,P+21),O+=3,P+=24,H+=16,_+=24,C+=U}O=0;for(var oe=0,w=0;w<o;w++){for(var J=0;J<t;J++)d[O+J]=e[J]+oe;oe+=8,O+=t}return{index:d,attributes:{position:{array:f,itemSize:3},startPosition:{array:p,itemSize:3},startNormal:{array:m,itemSize:3},endNormal:{array:v,itemSize:3},rightNormal:{array:g,itemSize:3},forwardOffset:{array:y,itemSize:3},texcoordNormalization:{array:M,itemSize:2}}}}},{key:"createCurve",value:function(e){if(!this.viewer){this.viewer=e.viewer;var t=this;this.viewer.modelManager.modelCollection.traverse(function(e){e.isDemLayer&&(t.tileManager=e.tileManager)})}if(e.points){var i=e.points;this.localPositions=[];for(var r=0;r<i.length;r++)this.localPositions.push(this.viewer.worldToDrawing(i[r]));var n=new THREE.CatmullRomCurve3(this.localPositions);this.curve=n}var n=this.curve,a=e.type;this.curveType=a,n.tension=0,n.type="polyline"==a?"catmullrom":"centripetal";for(var o="polyline"==a?e.points.length:30,s="polyline"==a?this.localPositions:n.getPoints(o),r=0;r<s.length;r++){var l=s[r];this.minHeight=Math.min(this.minHeight,l.y),this.maxHeight=Math.max(this.maxHeight,l.y)}return s}},{key:"createGeometry",value:function(e){for(var t=e.length,i=new Array(3*t),r=new Array(3*t),n=new Array(3*t),a=0,o=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Vector3,f=this.minHeight,p=this.maxHeight,m=0;m<t;m++)s.copy(e[m]),s.y=f,o.copy(e[m]),o.y=p,0==m?(d.copy(e[m+1]),d.y=f,l=c._computeRightNormal(s,o,d)):m==e.length-1?(u.copy(e[m-1]),u.y=f,h.copy(e[m-1]),h.y=p,l=c._computeRightNormal(u,h,s)):(u.copy(e[m-1]),u.y=f,d.copy(e[m+1]),d.y=f,l=c._computeVertexMiterNormal(u,s,o,d)),o.toArray(r,a),s.toArray(i,a),l.toArray(n,a),a+=3;return{bottomPositionsArray:i,topPositionsArray:r,normalsArray:n}}},{key:"updateGeometry",value:function(e){var t=this;s.GIS.ApproximateTerrainHeights.initialize().then(function(){var i=e||{};i.type=i.curveType||t.curveType,i.points=i.points||t._options.points;var r=t.createCurve(i),n=t.createGeometry(r),a=t.createAttributes(n);t.setIndex(a.index);for(var o in a.attributes)t.removeAttribute(o),t.addAttribute(o,new THREE.Float32BufferAttribute(a.attributes[o].array,a.attributes[o].itemSize));t.computeBoundingSphere(),t._initialized||(t._initialized=!0,t.viewer.render())})}},{key:"_getMinMaxHeight",value:function(e,t){if(this.tileManager){var i=this.tileManager;if(!i.isUseTerrain())return{maximumTerrainHeight:1e3,minimumTerrainHeight:-1e3};var r=this.viewer.drawingToWorld(e),u=this.viewer.drawingToWorld(t),c=i.worldPositionToLngLat(r),h=i.worldPositionToLngLat(u),d=n;d.height=0,d.longitude=THREE.Math.degToRad(c.x),d.latitude=THREE.Math.degToRad(c.y);var f=a;f.height=0,f.longitude=THREE.Math.degToRad(h.x),f.latitude=THREE.Math.degToRad(h.y)
;var p=s.GIS.Rectangle.fromCartographicArray(o,l),m=s.GIS.ApproximateTerrainHeights.getMinimumMaximumHeights(p);if(m){var v=new THREE.Vector3(0,0,(m.maximumTerrainHeight-i.modelAltitude)*s.Tile.TileMath.unitScale),g=this.viewer.worldToDrawing(v);m.maximumTerrainHeight=g.y,v=new THREE.Vector3(0,0,(m.minimumTerrainHeight-i.modelAltitude)*s.Tile.TileMath.unitScale),g=this.viewer.worldToDrawing(v),m.minimumTerrainHeight=g.y}return m}}}],[{key:"_computeRightNormal",value:function(e,t,i){var r=c._direction(i,e),n=c._direction(t,e),a=new THREE.Vector3;return a.crossVectors(r,n),a.normalize(),a}},{key:"_computeVertexMiterNormal",value:function(e,t,i,r){var n=c._direction(i,t),a=c._tangentDirection(e,t,n),o=c._tangentDirection(r,t,n),s=new THREE.Vector3;if(c._equalsEpsilon(a.dot(o),-1,1e-5))return s.crossVectors(n,a),s.normalize(),s;s.addVectors(o,a),s.normalize();var l=new THREE.Vector3;return l.crossVectors(n,s),o.dot(l)<0&&s.negate(),s}},{key:"_direction",value:function(e,t){var i=new THREE.Vector3;return i.subVectors(e,t),i.normalize(),i}},{key:"_tangentDirection",value:function(e,t,i){var r=c._direction(e,t);return r.cross(i),r.normalize(),r.crossVectors(i,r),r}},{key:"_equalsEpsilon",value:function(e,t,i,r){var n=Math.abs(e-t);return n<=r||n<=i*Math.max(Math.abs(e),Math.abs(t))}},{key:"_breakMiter",value:function(e,t,n,a){var o=c._direction(n,t),l=o.dot(e);if(l>i||l<r){var u=c._direction(a,n),h=l<r?s.Math.PI_OVER_TWO:-s.Math.PI_OVER_TWO;return e.applyAxisAngle(u,h),!0}return!1}}]),c}(THREE.BufferGeometry);s.GroundCurveGeometry=u}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.type="GroundCurveMesh",r.lineType="Continuous",r}return _inherits(t,e),_createClass(t,[{key:"setColor",value:function(e){this.material.color.setRGB(e.red/255,e.green/255,e.blue/255),this.material.opacity=e.alpha,this.material.transparent=e.alpha<1,this.renderOrder=s.GlobalData.IncrementRender?100:-1}},{key:"setOpacity",value:function(e){this.material.opacity=e,this.material.transparent=e<1}},{key:"setWidth",value:function(e){this.material.lineWidth=e}},{key:"setStyle",value:function(e){if(this.lineType!=e.lineType){this.lineType=e.lineType;var t=this.material;"Continuous"==this.lineType?t.dashMode=0:t.dashMode=1}}},{key:"setType",value:function(e){var t=this.geometry;t.curveType=e,t.updateGeometry({curveType:e})}},{key:"setClampMode",value:function(e){this.material.clampMode=e}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"onRemoved",value:function(){s.GroundPrimitiveManager.getInstance().removeGroundCurve(this)}},{key:"onAdded",value:function(){s.GroundPrimitiveManager.getInstance().addGroundCurve(this)}}]),t}(THREE.Mesh);s.GroundCurveMesh=e}(),function(){var e=new s.GIS.Cartographic,t=new s.GIS.Cartographic,i=[e,t],r=new s.GIS.Rectangle,n=function(n){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(t.type="GroundPolygonGeometry",t.viewer=void 0,t.tileManager=void 0,t.minHeight=-1e3,t.maxHeight=1e3,t._initialized=!1,!e.points||e.points.length<3)return console.warn("ground polygon's points.length must >= 3."),_possibleConstructorReturn(t);var i=t;return s.GIS.ApproximateTerrainHeights.initialize().then(function(){if(!i.viewer){i.viewer=e.viewer;i.viewer.modelManager.modelCollection.traverse(function(e){e.isDemLayer&&(i.tileManager=e.tileManager)})}var t=i.createAttributes(e);i.setIndex(t.index);for(var r in t.attributes)i.addAttribute(r,new THREE.Float32BufferAttribute(t.attributes[r].array,t.attributes[r].itemSize));i.computeBoundingSphere(),i._initialized||(i._initialized=!0,i.viewer.render())}),t}return _inherits(a,n),_createClass(a,[{key:"createAttributes",value:function(e){this._getMinMaxHeight(e);for(var t=e.points,i=t.length,r=new Array(2*i),n=[],a=0;a<i;a++){var o=this.viewer.worldToDrawing(t[a]);n.push(o),r[2*a]=o.x,r[2*a+1]=o.z}for(var l=0,u=new THREE.Vector3,c=new THREE.Vector3,h=new Array(3*i),d=new Array(3*i),a=0;a<i;a++)c.copy(n[a]),c.y=this.minHeight,u.copy(n[a]),u.y=this.maxHeight,u.toArray(d,l),c.toArray(h,l),l+=3;var f=new Array;f=f.concat(h).concat(d);var p=new Array,m=s.earcut(r);p=p.concat(m);for(var v=[].concat(_toConsumableArray(m)).reverse(),a=0;a<v.length;a++)v[a]+=i;p=p.concat(v);for(var g=new Array,a=0;a<i;a++)g.push(a),g.push((a+1)%i),g.push(i+(a+1)%i),g.push(a),g.push(i+(a+1)%i),g.push(i+a);return s.Utils.isClockWise(t)&&(g=[].concat(_toConsumableArray(g)).reverse()),p=p.concat(g),{index:p,attributes:{position:{array:f,itemSize:3}}}}},{key:"updateGeometry",value:function(e){var t=this;s.GIS.ApproximateTerrainHeights.initialize().then(function(){var i=t.createAttributes(e);t.setIndex(i.index);for(var r in i.attributes)t.removeAttribute(r),t.addAttribute(r,new THREE.Float32BufferAttribute(i.attributes[r].array,i.attributes[r].itemSize));t.computeBoundingSphere(),t._initialized||(t._initialized=!0,t.viewer.render())})}},{key:"_getMinMaxHeight",value:function(n){if(this.tileManager){var a=n.points,o=this.tileManager;if(!o.isUseTerrain())return{maximumTerrainHeight:1e3,minimumTerrainHeight:-1e3};for(var l=180,u=90,c=-180,h=-90,d=0;d<a.length;d++){var f=a[d],p=o.worldPositionToLngLat(f);l=Math.min(l,p.x),c=Math.max(c,p.x),u=Math.min(u,p.y),h=Math.max(h,p.y)}var m=e;m.height=0,m.longitude=THREE.Math.degToRad(l),m.latitude=THREE.Math.degToRad(u);var v=t;v.height=0,v.longitude=THREE.Math.degToRad(c),v.latitude=THREE.Math.degToRad(h);var g=s.GIS.Rectangle.fromCartographicArray(i,r),y=s.GIS.ApproximateTerrainHeights.getMinimumMaximumHeights(g);if(y){var f=new THREE.Vector3(0,0,(y.maximumTerrainHeight-o.modelAltitude)*s.Tile.TileMath.unitScale),M=this.viewer.worldToDrawing(f);this.maxHeight=M.y,f=new THREE.Vector3(0,0,(y.minimumTerrainHeight-o.modelAltitude)*s.Tile.TileMath.unitScale),M=this.viewer.worldToDrawing(f),this.minHeight=M.y}}}}]),a}(THREE.BufferGeometry);s.GroundPolygonGeometry=n}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.type="GroundPolygonMesh",r}return _inherits(t,e),_createClass(t,[{key:"setColor",value:function(e){this.material.color.setRGB(e.red/255,e.green/255,e.blue/255),this.material.opacity=e.alpha,this.material.transparent=e.alpha<1}},{key:"setOpacity",value:function(e){this.material.opacity=e,this.material.transparent=e<1}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"onRemoved",value:function(){s.GroundPrimitiveManager.getInstance().removeGroundPolygon(this)}},{key:"onAdded",value:function(){s.GroundPrimitiveManager.getInstance().addGroundPolygon(this)}}]),t}(THREE.Mesh);s.GroundPolygonMesh=e}(),function(){var e=new THREE.Matrix4;e.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);var t=function(){function t(){_classCallCheck(this,t),this.viewMatrix=new THREE.Matrix4,this.inverseViewMatrix=new THREE.Matrix4,this.orthoCamera=new THREE.OrthographicCamera,this.positionWC=new THREE.Vector3,this.directionWC=new THREE.Vector3(0,0,1),this.upWC=new THREE.Vector3(0,1,0),this.rightWC=new THREE.Vector3(1,0,0),this.viewProjectionMatrix=new THREE.Matrix4}return _createClass(t,[{key:"clone",value:function(e){this.viewMatrix.copy(e.viewMatrix),this.inverseViewMatrix.copy(e.inverseViewMatrix),this.orthoCamera.copy(e.orthoCamera),this.positionWC.copy(e.positionWC),this.directionWC.copy(e.directionWC),this.upWC.copy(e.upWC),this.rightWC.copy(e.rightWC)}},{key:"getViewProjection",value:function(){var t=this.viewMatrix;this.orthoCamera.updateProjectionMatrix();var i=this.orthoCamera.projectionMatrix;return this.viewProjectionMatrix.multiplyMatrices(i,t),this.viewProjectionMatrix.multiplyMatrices(e,this.viewProjectionMatrix),this.viewProjectionMatrix}}]),t}();s.ShadowMapCamera=t}(),function(){var e=new THREE.Sphere,t=new THREE.Vector2,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Matrix4,a=new THREE.Matrix4,o=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Matrix4,c=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Vector3,f=new Array(8);f[0]=new THREE.Vector4(-1,-1,-1,1),f[1]=new THREE.Vector4(1,-1,-1,1),f[2]=new THREE.Vector4(1,1,-1,1),f[3]=new THREE.Vector4(-1,1,-1,1),f[4]=new THREE.Vector4(-1,-1,1,1),f[5]=new THREE.Vector4(1,-1,1,1),f[6]=new THREE.Vector4(1,1,1,1),f[7]=new THREE.Vector4(-1,1,1,1);for(var p=new Array(8),m=0;m<8;++m)p[m]=new THREE.Vector4;var v=new Array(5),g=new Array(4),y=new THREE.PerspectiveCamera,M=function(){function m(e){_classCallCheck(this,m),e=e||{},this.viewer=e.viewer,this.camera=e.camera,this.scene=e.scene,this.cascades=4,this.shadowMapSize=1024,this.shadowBias=[-.0015,-.0018,-.0022,-.003],this.lights=[],this.extendedBreaks=[new THREE.Vector2(0,.16704173648319734),new THREE.Vector2(.16704173648319734,.34690875474964117),new THREE.Vector2(.34690875474964117,1),new THREE.Vector2(1,1)],this.shadowNear=+Number.MAX_VALUE,this.shadowFar=-Number.MAX_VALUE,this.shadowClosestObjectSize=Number.MAX_VALUE,this.MAXIMUM_DISTANCE=2e4,this.maximumDistance=1e4,this.sceneCamera=new s.Camera(s.CAMERATYPE.PERSPECTIVE),this.shadowMapCamera=new s.ShadowMapCamera,this._maximumCascadeDistances=[25,150,700,Number.MAX_VALUE],this.createLights()}return _createClass(m,[{key:"createLights",value:function(){for(var e=0;e<this.cascades;e++){var t=new THREE.DirectionalLight(16777215,1);t.castShadow=!0,t.shadow.mapSize.width=this.shadowMapSize,t.shadow.mapSize.height=this.shadowMapSize,t.shadow.bias=this.shadowBias[e],this.lights.push(t)}}},{key:"update",value:function(e){this.computeNearFarPlane(this.scene,this.camera),this.shadowMapCamera.directionWC.copy(e),this.shadowMapCamera.directionWC.negate(),this.shadowMapCamera.directionWC.normalize(),this.fitShadowMapToScene(),this.computeCascades();var t=this.camera;this.extendedBreaks[0].set(v[0],v[1]),this.extendedBreaks[1].set(v[1],v[2]),this.extendedBreaks[2].set(v[2],v[3]),this.extendedBreaks[3].set(v[3],v[4]),t.csmCascades=this.extendedBreaks,this.viewer.updateShadowMap()}},{key:"computeCascades",value:function(){var e,t=this.shadowMapCamera,i=this.sceneCamera,r=i.near,a=i.far,o=a-r,s=a/r,l=.9,u=!1;this.shadowClosestObjectSize<200&&(u=!0,l=.9);var m=g,M=v;for(M[0]=r,M[4]=a,e=0;e<4;++e){var E=(e+1)/4,b=r*Math.pow(s,E),x=r+o*E,I=THREE.Math.lerp(x,b,l);M[e+1]=I,m[e]=I-M[e]}if(u){for(e=0;e<4;++e)m[e]=Math.min(m[e],this._maximumCascadeDistances[e]);var T=M[0];for(e=0;e<3;++e)T+=m[e],M[e+1]=T}var w=t.orthoCamera,C=w.left,S=w.right,A=w.bottom,k=w.top,R=w.near,B=w.far,L=t.positionWC,O=t.directionWC,P=t.upWC,D=y;D.fov=i.fov,D.aspect=i.aspect,D.position.copy(i.position),D.up.copy(i.up),D.lookAt(i.target),D.updateMatrixWorld(!0),D.matrixWorldInverse.getInverse(D.matrixWorld);var N=t.getViewProjection();for(e=0;e<4;++e){D.near=M[e],D.far=M[e+1],D.updateProjectionMatrix();for(var _=n.multiplyMatrices(D.projectionMatrix,D.matrixWorldInverse),H=n.getInverse(_),F=n.multiplyMatrices(N,H),U=c.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),G=h.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),z=0;z<8;++z){var j=p[z].copy(f[z]);j.applyMatrix4(F),j.divideScalar(j.w),U.min(j),G.max(j)}U.x=Math.max(U.x,0),U.y=Math.max(U.y,0),U.z=0,G.x=Math.min(G.x,1),G.y=Math.min(G.y,1),G.z=Math.min(G.z,1),d.copy(L),d.add(O);var V=this.lights[e];V.position.copy(L),V.up.copy(P),V.updateMatrixWorld(!0),V.target.position.copy(d),V.target.updateMatrixWorld(!0);var W=V.shadow.camera;W.left=C+U.x*(S-C),W.right=C+G.x*(S-C),W.bottom=A+U.y*(k-A),W.top=A+G.y*(k-A),W.near=R+U.z*(B-R),W.far=R+G.z*(B-R),W.updateProjectionMatrix(),W.position.copy(L),W.up.copy(P),W.lookAt(V.target.position),W.updateMatrixWorld(!0)}}},{key:"fitShadowMapToScene",value:function(){var e=this.shadowMapCamera,t=this.sceneCamera,r=n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),d=a.getInverse(r),m=e.directionWC,v=i;s.Math.equalsEpsilonVector3(m,v,s.Math.EPSILON10)&&(v=t.up),o.copy(m),o.cross(v);var g=o;v.copy(g),v.cross(m),v.normalize(),g.normalize();var y=l;y.set(0,0,0);for(var M=s.Utils.computeView(y,m,v,g,u),E=a.multiplyMatrices(M,d),b=c.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),x=h.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),I=0;I<8;++I){var T=p[I].copy(f[I]);T.applyMatrix4(E),T.divideScalar(T.w),b.min(T),x.max(T)}x.z+=1e3,b.z-=10;var w=l;w.x=-.5*(b.x+x.x),w.y=-.5*(b.y+x.y),w.z=-x.z;var C=n.makeTranslation(w.x,w.y,w.z);M=C.multiplyMatrices(C,M);var S=.5*(x.x-b.x),A=.5*(x.y-b.y),k=x.z-b.z,R=e.orthoCamera;R.left=-S,R.right=S,R.bottom=-A,R.top=A,R.near=.01,R.far=k,e.viewMatrix.copy(M),e.inverseViewMatrix.getInverse(M),s.Utils.getTranslationFromMatrix4(e.inverseViewMatrix,e.positionWC),e.directionWC.copy(m),e.upWC.copy(v),e.rightWC.copy(g)}},{key:"computeNearFarPlane",value:function(e,t){this.shadowNear=+Number.MAX_VALUE,this.shadowFar=-Number.MAX_VALUE,this.shadowClosestObjectSize=Number.MAX_VALUE;var r=t.position,n=t.target;i.subVectors(n,r),i.normalize(),this._computeNearFarPlane(e,t),this.shadowNear=Math.min(Math.max(this.shadowNear,t.near),t.far),this.shadowFar=Math.max(Math.min(this.shadowFar,t.far),this.shadowNear),this.shadowNear=Math.min(this.shadowNear,this.maximumDistance),this.shadowFar=Math.min(this.shadowFar,this.maximumDistance+1),this.sceneCamera.copy(t),this.sceneCamera.near=this.shadowNear,this.sceneCamera.far=this.shadowFar,this.sceneCamera.updateProjectionMatrix()}},{key:"_computePlaneDistances",value:function(e,t,i,n){var a=e.center;r.subVectors(a,t);var o=i.dot(r);return n.x=o-e.radius,n.y=o+e.radius,n}},{key:"_computeNearFarPlane",value:function(r,n){if(r.visible&&!1!==r.alive&&r.name!=s.ObjectGroupType.RECEIVESHADOWPLANE){if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.isSkinnedMesh&&r.skeleton.update(),!r.frustumCulled||n.frustum.intersectsObject(r))){var a=r.geometry;null===a.boundingSphere&&a.computeBoundingSphere(),e.copy(a.boundingSphere).applyMatrix4(r.matrixWorld),this._computePlaneDistances(e,n.position,i,t);var o=t.x,l=t.y;if(r.castShadow&&o<this.MAXIMUM_DISTANCE){var u=l-o;o<100&&(this.shadowClosestObjectSize=Math.min(this.shadowClosestObjectSize,u)),this.shadowNear=Math.min(this.shadowNear,o),this.shadowFar=Math.max(this.shadowFar,l)}}for(var c=r.children,h=0,d=c.length;h<d;h++)this._computeNearFarPlane(c[h],n)}}}]),m}();s.CSM=M}(),function(){var e=new THREE.Box3,t=function(){function t(e){_classCallCheck(this,t),this.scene=e,this.lightHelper=!1,this.shadowLightNum=0,this.shadowBox=new THREE.Box3,this.defaultLightsGroup=new s.ObjectGroup(s.ObjectGroupType.DEFAULTLIGHTS),this.externalDirLightsGroup=new s.ObjectGroup(s.ObjectGroupType.EXTERNALDIRLIGHTS),this.scene.add(this.defaultLightsGroup),this.scene.add(this.externalDirLightsGroup),this.externalSpotLightsGroup=this.scene.getOrCreateObjectGroup(s.ObjectGroupType.EXTERNALSPOTLIGHTS,{globalSpace:!0}),this.lightHelperGroup=this.scene.getOrCreateObjectGroup(s.ObjectGroupType.LIGHTHELPER),this.receivingPlane=null,this.cameraHelper=null,this.csm=null,this.useCSM=!1,this.defaultLightArray=[],this.initDefaultLights(),this.lightPreset()}return _createClass(t,[{key:"initCSM",value:function(e){this.csm||(this.csm=new s.CSM({viewer:e,camera:e.camera,scene:this.scene}))}},{key:"enableCSM",value:function(e){this.useCSM=e,s.GlobalData.EnableCSM=e,this.adjustLightsForCSM(),this.csm&&this.csm.viewer.modelManager.updateMaterialsValue("useCSM",e)}},{key:"adjustLightsForCSM",value:function(){for(var e=!(!this.useCSM||!this.csm),t=0;t<this.defaultLightArray.length;t++)this.defaultLightsGroup.remove(this.defaultLightArray[t]);for(var t=0;t<this.csm.lights.length;t++)this.defaultLightsGroup.remove(this.csm.lights[t]);if(e)for(var t=0;t<this.csm.lights.length;t++)this.defaultLightsGroup.add(this.csm.lights[t]);for(var t=0;t<this.defaultLightArray.length;t++){var i=this.defaultLightArray[t];this.defaultLightsGroup.add(i),i instanceof THREE.DirectionalLight&&e&&(i.castShadow=!1)}for(var t=0;t<this.externalDirLightsGroup.children.length;t++){var i=this.externalDirLightsGroup[t];i instanceof THREE.DirectionalLight&&e&&(i.castShadow=!1)}}},{key:"destroy",value:function(){this.scene.remove(this.defaultLightsGroup),this.defaultLightsGroup=null,this.defaultLightArray=[],this.hemisphereLight=null,this.dirLight=null,this.ambientLight=null,this.sunLight=null,this.fillLight01=null,this.fillLight02=null,this.fillLight03=null,this.light04=null,this.scene.remove(this.externalSpotLightsGroup),this.externalSpotLightsGroup=null,this.scene.remove(this.externalDirLightsGroup),this.externalDirLightsGroup=null,this.scene.remove(this.lightHelperGroup),this.lightHelperGroup=null,this.cameraHelper=null,this.receivingPlane&&(this.scene.objectGroups.remove(this.receivingPlane),this.receivingPlane=null)}},{key:"initDefaultLights",value:function(){var e=.3;this.hemisphereLight||(this.hemisphereLight=new THREE.HemisphereLight(16777215,16777215,e*s.GlobalData.LightIntensityFactor),this.hemisphereLight.initIntensity=e,this.defaultLightsGroup.add(this.hemisphereLight),this.defaultLightArray.push(this.hemisphereLight)),e=.7,this.dirLight||(this.dirLight=new THREE.DirectionalLight(16777215,e*s.GlobalData.LightIntensityFactor),this.dirLight.initIntensity=e,this.defaultLightsGroup.add(this.dirLight),this.defaultLightArray.push(this.dirLight)),this.ambientLight||(this.ambientLight=new THREE.AmbientLight(16777215,.6),this.defaultLightsGroup.add(this.ambientLight),this.defaultLightArray.push(this.ambientLight)),this.sunLight||(this.sunLight=new THREE.DirectionalLight(16777215,1),this.defaultLightsGroup.add(this.sunLight),this.defaultLightArray.push(this.sunLight)),this.fillLight01||(this.fillLight01=new THREE.DirectionalLight(16777215,1),this.defaultLightsGroup.add(this.fillLight01),this.defaultLightArray.push(this.fillLight01)),this.fillLight02||(this.fillLight02=new THREE.DirectionalLight(16777215,1),this.defaultLightsGroup.add(this.fillLight02),this.defaultLightArray.push(this.fillLight02)),this.fillLight03||(this.fillLight03=new THREE.DirectionalLight(16777215,1),this.defaultLightsGroup.add(this.fillLight03),this.defaultLightArray.push(this.fillLight03)),this.light04||(this.light04=new THREE.DirectionalLight(16777215,.15),this.light04.castShadow=!1,this.light04.intensity=.5,this.light04.shadow.mapSize.width=1024,this.light04.shadow.mapSize.height=1024,this.light04.shadow.bias=-9e-4,this.defaultLightsGroup.add(this.light04),this.defaultLightArray.push(this.light04),this.lightCastShadow=this.light04)}},{key:"hideDefaultLights",value:function(){for(var e=0;e<this.defaultLightsGroup.children.length;e++){this.defaultLightsGroup.children[e].visible=!1}if(this.useCSM&&this.csm)for(var e=0;e<this.csm.lights.length;e++)this.csm.lights[e].visible=!0}},{key:"defaultLightPreset",value:function(){this.hideDefaultLights(),this.hemisphereLight.visible=!0,this.hemisphereLight.position.set(0,500,0),this.hemisphereLight.updateMatrixWorld(!0),this.dirLight.visible=!0,this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,.75,1),this.dirLight.position.multiplyScalar(50)}},{key:"updateDefaultLight",value:function(e){var t=this.dirLight;t.intensity=t.initIntensity*s.GlobalData.LightIntensityFactor,t.position.set(e.x,e.y,e.z),t.updateMatrixWorld(!0);var i=this.hemisphereLight;i.intensity=i.initIntensity*s.GlobalData.LightIntensityFactor}},{key:"setupCommonLight",value:function(){this.hideDefaultLights(),this.ambientLight.visible=!0,this.ambientLight.intensity=.6,this.sunLight.visible=!0,this.sunLight.color.setHex(14800580),this.sunLight.position.set(-100,160,100),this.sunLight.intensity=.72,this.sunLight.distance=300,this.sunLight.updateMatrixWorld()}},{key:"lightPreset01",value:function(){this.setupCommonLight(),this.fillLight01.visible=!0,this.fillLight01.color.setHex(16777215),this.fillLight01.position.set(100,100,100),this.fillLight01.intensity=1,this.fillLight01.updateMatrixWorld(),this.fillLight02.visible=!0,this.fillLight02.color.setHex(16777215),this.fillLight02.position.set(-100,100,-100),this.fillLight02.intensity=.24,this.fillLight02.updateMatrixWorld(),this.ambientLight.intensity=.6,this.sunLight.intensity=.9}},{key:"lightPreset02",value:function(){this.setupCommonLight(),this.fillLight01.visible=!0,this.fillLight01.position.set(60,80,130),this.fillLight01.intensity=.28,this.fillLight01.updateMatrixWorld(),this.fillLight02.visible=!0,this.fillLight02.color.setHex(8100788),this.fillLight02.position.set(100,80,-100),this.fillLight02.intensity=.22,this.fillLight02.updateMatrixWorld(),this.fillLight03.visible=!0,this.fillLight03.color.setHex(8100788),this.fillLight03.position.set(-140,80,-50),this.fillLight03.intensity=.18,this.fillLight03.updateMatrixWorld()}},{key:"lightPreset03",value:function(){this.setupCommonLight(),this.fillLight01.visible=!0,this.fillLight01.color.setHex(16777215),this.fillLight01.position.set(100,100,100),this.fillLight01.intensity=.75,this.fillLight01.updateMatrixWorld(),this.fillLight02.visible=!0,this.fillLight02.color.setHex(16777215),this.fillLight02.position.set(-100,100,-100),this.fillLight02.intensity=.21,this.fillLight02.updateMatrixWorld(),this.ambientLight.intensity=.4,this.sunLight.intensity=.56}},{key:"lightPreset04",value:function(){this.setupCommonLight(),this.fillLight01.visible=!0,this.fillLight01.color.setHex(16777215),this.fillLight01.position.set(100,100,100),this.fillLight01.intensity=.4,this.fillLight01.updateMatrixWorld(),this.fillLight02.visible=!0,this.fillLight02.color.setHex(16777215),this.fillLight02.position.set(-100,100,-100),this.fillLight02.intensity=.1,this.fillLight02.updateMatrixWorld(),this.ambientLight.intensity=.3,this.sunLight.intensity=.2,this.light04.visible=!0,this.updateShadowLight()}},{key:"lightPreset",value:function(){var e=s.GlobalData.LightPreset;switch(e){case 0:this.defaultLightPreset();break;case 1:this.lightPreset01();break;case 2:this.lightPreset02();break;case 3:this.lightPreset03();break;case 4:this.lightPreset04();break;default:this.setupCommonLight(),this.sunLight.color.setHex(16777215),this.ambientLight.intensity=.72}this.scene.gisMode||(this.getReceivingPlane(),this.receivingPlane.visible=4==e),this.lightHelper&&this.addLightHelper()}},{key:"addExternalSpotLight",value:function(e){this.externalSpotLightsGroup.add(e)}},{key:"addExternalDirLight",value:function(e){this.externalDirLightsGroup.add(e),this.adjustLightsForCSM()}},{key:"updateLights",value:function(e){var t=new THREE.Vector3(0,1,0),i=Math.PI/4,r=e.position.clone();switch(r.sub(e.target),r.normalize(),s.GlobalData.LightPreset){case 0:this.updateDefaultLight(r);break;case 1:case 3:case 4:var n=r.clone().applyAxisAngle(t,-1.2*i);this.fillLight01.position.copy(n).normalize(),this.fillLight01.position.multiplyScalar(1e3),this.fillLight01.position.y=600,this.fillLight01.updateMatrixWorld(),n=r.clone().applyAxisAngle(t,1*i),this.fillLight02.position.copy(n).normalize(),this.fillLight02.position.multiplyScalar(1e3),this.fillLight02.position.y=600,this.fillLight02.updateMatrixWorld(),this.updateShadowLight();break;case 2:break;default:var n=r.clone().applyAxisAngle(t,-2*i);this.sunLight.position.copy(n).normalize(),this.sunLight.position.multiplyScalar(1e3),this.sunLight.position.y=600,this.sunLight.updateMatrixWorld()}this.lightHelper&&this.updateLightHelper()}},{key:"updateShadowLight",value:function(){if(this.scene.getBoundingBoxWithoutDEM()){e.copy(this.scene.getBoundingBoxWithoutDEM());var t=e,i=t.getCenter(),r=new THREE.Vector3,n=new THREE.Vector3;n.copy(this.scene.sunDirection),n.negate(),n.multiplyScalar(100),r.set(i.x-n.x,i.y-n.y,i.z-n.z);var a=t.getSize();t.min.y=t.min.y-.05*a.y;var o=new THREE.Plane(new THREE.Vector3(0,1,0),-t.min.y),s=o.normal.dot(n),l=new THREE.Vector3(t.max.x,t.max.y,t.min.z),u=-(l.dot(o.normal)+o.constant)/s,c=new THREE.Vector3;if(c.copy(n).multiplyScalar(u).add(l),t.expandByPoint(c),this.shadowBox.copy(t),this.useCSM&&this.csm)this.csm.update(this.scene.sunDirection);else{this.lightCastShadow.position.set(r.x,r.y,r.z),this.lightCastShadow.target.position.set(i.x,i.y,i.z),this.lightCastShadow.target.updateMatrixWorld(!0),this.lightCastShadow.updateMatrixWorld(!0);var h=this.lightCastShadow.shadow.camera;h.position.set(r.x,r.y,r.z);var d=i;h.lookAt(d),h.updateMatrixWorld(),h.matrixWorldInverse.getInverse(h.matrixWorld),t.applyMatrix4(h.matrixWorldInverse),h.left=t.min.x,h.right=t.max.x,h.top=t.max.y,h.bottom=t.min.y,h.far=-t.min.z,h.near=-t.max.z,h.updateProjectionMatrix()}this.updateReceivingPlane()}}},{key:"getReceivingPlane",value:function(){if(!this.receivingPlane){this.receivingPlane=this.scene.getOrCreateObjectGroup(s.ObjectGroupType.RECEIVESHADOWPLANE);var e=new THREE.ShadowMaterial;e.isShaderMaterial=!1,e.transparent=!0,e.opacity=.2,e.side=THREE.DoubleSide;var t=new THREE.PlaneBufferGeometry(1,1),i=new THREE.Mesh(t,e);i.receiveShadow=!0,i.rotateOnAxis(new THREE.Vector3(1,0,0),Math.PI/2),this.receivingPlane.add(i),this.receivingPlane.matrixAutoUpdate=!1}return this.receivingPlane}},{key:"updateReceivingPlane",value:function(){var e=this.shadowBox;if(e&&this.receivingPlane&&this.receivingPlane.visible){var t=e.getCenter(),i=e.getSize(),r=this.receivingPlane.children[0];r.position.y=e.min.y,r.position.x=t.x,r.position.z=t.z,r.scale.x=i.x,r.scale.y=i.z,this.receivingPlane.updateMatrixWorld(!0)}}},{key:"clearLightHelper",value:function(){for(var e=this.lightHelperGroup.children.length-1;e>=0;e--){var t=this.lightHelperGroup.children[e];this.lightHelperGroup.remove(t)}this.cameraHelper=null}},{key:"addLightHelper",value:function(){this.clearLightHelper();for(var e=0;e<this.defaultLightsGroup.children.length;++e){var t=this.defaultLightsGroup.children[e];if(t instanceof THREE.DirectionalLight&&t.visible){var i=new THREE.DirectionalLightHelper(t,200);this.lightHelperGroup.add(i)}}for(var e=0;e<this.externalSpotLightsGroup.children.length;++e){var t=this.externalSpotLightsGroup.children[e];if(t instanceof THREE.DirectionalLight&&t.visible){var i=new THREE.DirectionalLightHelper(t,200);this.lightHelperGroup.add(i)}}for(var e=0;e<this.externalDirLightsGroup.children.length;++e){var t=this.externalDirLightsGroup.children[e];if(t instanceof THREE.DirectionalLight&&t.visible){var i=new THREE.DirectionalLightHelper(t,200);this.lightHelperGroup.add(i)}}if(this.lightCastShadow&&this.lightCastShadow.visible&&(this.cameraHelper=new THREE.CameraHelper(this.lightCastShadow.shadow.camera),this.lightHelperGroup.add(this.cameraHelper)),this.useCSM&&this.csm)for(var e=0;e<this.csm.lights.length;e++){var r=new THREE.CameraHelper(this.csm.lights[e].shadow.camera);this.lightHelperGroup.add(r)}}},{key:"updateLightHelper",value:function(){for(var e=0;e<this.lightHelperGroup.children.length;++e){var t=this.lightHelperGroup.children[e];t.update(),t.updateMatrixWorld(!0)}}},{key:"getShadowBoxWorld",value:function(){if(this.shadowBox){var e=new THREE.Box3;e.copy(this.shadowBox);var t=this.scene.geometryGroup.matrix.clone();return t.getInverse(t),e.applyMatrix4(t),e}return null}},{key:"removeLight",value:function(e){e&&e.parent&&e.parent.remove(e)}}]),t}();s.LightManager=t}(),s.ObjectPool=function(e,t){this.cls=e,this.size=t,this._pool=[],this.counter=0},s.ObjectPool.prototype.init=function(e){for(var t=0,i=this.size;t<i;++t){var r=new this.cls;r.init(e),this._pool[t]=r,s.GlobalData.EnableShadowMap&&(r.castShadow=!0,r.receiveShadow=!0)}},s.ObjectPool.prototype.resize=function(e,t){this.size=e,this.collect(),this.init(t)},s.ObjectPool.prototype.get=function(e){if(this.counter>=this.size)return null;var t=this._pool[this.counter];return t.spawn(e),++this.counter,t},s.ObjectPool.prototype.clear=function(){for(var e=0,t=this.size;e<t;++e)this._pool[e].clear();this.counter=0},s.ObjectPool.prototype.destroy=function(){this.collect()},s.ObjectPool.prototype.collect=function(){this._pool=[],this.counter=0},s.ObjectPool.prototype.getObjects=function(){return this._pool},s.ExpandableObjectPool=function(){this.size=0,this.counter=0,this.expansion=1,this._pool=null},s.ExpandableObjectPool.prototype.init=function(e,t){this.classType=e,this._pool=[],this._expand(t)},s.ExpandableObjectPool.prototype._expand=function(e){this.size+=e;for(var t=0;t<e;t++)this._pool.push(new this.classType)},s.ExpandableObjectPool.prototype.acquire=function(){return this.counter>=this.size&&(this.expansion=Math.round(1.2*this.expansion)+1,this._expand(this.expansion),console.log("_expand")),this._pool[this.counter++]},s.ExpandableObjectPool.prototype.clear=function(){this.counter=0},s.ExpandableObjectPool.prototype.destroy=function(){for(var e=0,t=this.size;e<t;++e)this._pool[e].destroy();this.counter=0,this.size=0,this.expansion=1,this._pool=null},s.ExpandableObjectPool.prototype.getObjects=function(){return this._pool},s.ObjectGroup=function(e,t){THREE.Group.call(this),this.name=e,this.priority=t&&t.priority?t.priority:5,this.pickableType=t&&t.pickableType?t.pickableType:s.PICKABLETYPE.UnPickable,this.globalSpace=!(!t||!t.globalSpace)&&t.globalSpace,this.boundingBox=null,this.hoverEnabled=!(!t||!t.hoverEnabled)&&t.hoverEnabled},s.ObjectGroup.prototype=Object.create(THREE.Group.prototype),s.ObjectGroup.prototype.constructor=s.ObjectGroup,s.ObjectGroup.prototype.removeByName=function(e){for(var t=this.children,i=0,r=t.length;i<r;++i)if(t[i].name===e){t.splice(i,1);break}},s.ObjectGroup.prototype.clear=function(){this.children.length=0},s.ObjectGroup.prototype.isGlobalSpace=function(){return this.globalSpace},s.ObjectGroup.prototype.hasChild=function(e){for(var t=0,i=this.children.length;t<i;t++)if(this.children[t].name==e)return!0;return!1},s.ObjectGroup.prototype.isPickable=function(){return this.pickableType!==s.PICKABLETYPE.UnPickable},s.ObjectGroup.prototype.raycast=function(e,t){for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i];if(s.Utils.isGroupObject(n)){var a=n.name;n.traverseVisible(function(i){s.Utils.isMeshObject(i)&&(void 0===i.userId&&(i.userId=a),i.raycast(e,t))})}else n.visible&&n.raycast(e,t)}t.forEach(function(e){e.userId=e.object.userId})},function(){s.ObjectGroupType={MODEL:"Model",GEOMETRY:"Geometry",LINESEGMENTS:"LineSegments",INSTANCEGEOMETRY:"InstanceGeometry",INSTANCEWIREFRAMEGEOMETRY:"InstanceWireframeGeometry",WIREFRAME:"Wireframe",MARKER3D:"Marker3D",CLIPPLANE:"ClipPlane",FILLCLIPPLANE:"FillClipPlane",CLIPREGION:"ClipRegion",CAPSWIREFRAME:"CapsWireframe",IBLCUBE:"IBLCube",CUSTOMPLANE:"CustomPlane",PIVOTBALL:"PivotBall",MEASUREPICKPOINT:"MeasurePickPoint",MEASUREPICKLINE:"MeasurePickLine",MEASUREPLANE:"MeasurePlane",MEASURELINE:"MeasureLine",OCTREENODE:"OctreeNode",BOUNDARYEDGEMANAGER:"BoundaryEdgeManager",AXISGRIDMANAGER:"AxisGridManager",EXTRUDEBODYMANAGER:"ExtrudeBodyManager",EXTRUDEBODYMANAGERTEST:"EXTRUDEBODYMANAGERTEST",EXTERNALCOMPONENTMANAGER:"ExternalComponentManager",BIMTILESGROUP:"BimTilesGroup",TILEGROUP:"TileGroup",ROADNETWORK:"RoadNetworkGroup",GEOJSONGROUP:"GEOJSONGROUP",RECEIVESHADOWPLANE:"ReceiveShadowPlane",VIEWSHED:"Viewshed",DEFAULTLIGHTS:"DefaultLights",EXTERNALSPOTLIGHTS:"ExternalSpotLights",EXTERNALDIRLIGHTS:"ExternalDirLights",LIGHTHELPER:"LightHelper",GLOBALEARTH:"GlobelEarth"};var e=new THREE.Box3,t=function(t){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),r=s.Utils.defaultValue(e,{});return t.gisMode=r.gisMode,t.type="Scene",t.autoUpdate=!1,t.objectGroups=new s.ObjectGroup,t.add(t.objectGroups),t.fog=new s.PostProcess(16777215),t.geometryGroup=new s.ObjectGroup(s.ObjectGroupType.GEOMETRY,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0}),t.objectGroups.add(t.geometryGroup),t.pool=new s.ObjectPool(s.MeshEx,0),t.expandScalar=1.02,t.clipPlanes=null,t.fillClipPlane=null,t.boundaryEdge=null,t.extrudeBodyManager=null,t.externalComponentManager=null,t.customPlaneManager=null,t.axisGridManager=null,t.IBLMaps=new w.IBLMaps,t.transformMatrix=new THREE.Matrix4,t.lightManager=new s.LightManager(t),t.selectedMeshes=[],t.nonSelectedMeshes=[],
t.selectedInstanceMeshes=[],t.nonSelectedInstanceMeshes=[],t.sunDirection=new THREE.Vector3(-1,1.6,1),t}return _inherits(i,t),_createClass(i,[{key:"changeToWorkSpaceScene",value:function(){for(var e=this.getObjectGroups(),t=0;t<e.length;t++){var i=e[t];i.preVisible=i.visible,i.visible=!0}var r=this.getObjectGroup(s.ObjectGroupType.GLOBALEARTH);void 0!==r&&(r.visible=!1)}},{key:"createCapStencilMaterials",value:function(){this.backMaterial||(this.backMaterial=s.MaterialUtil.createStandardMaterial({color:16711680,colorWrite:!1,depthWrite:!1,side:THREE.BackSide}),this.frontMaterial=s.MaterialUtil.createStandardMaterial({color:255,colorWrite:!1,depthWrite:!1,side:THREE.FrontSide}),this.backInstanceMaterial=s.MaterialUtil.createStandardMaterial({color:16711680,colorWrite:!1,depthWrite:!1,side:THREE.BackSide}),this.backInstanceMaterial.defines.USE_INSTANCE="",this.backInstanceMaterial.defines.USE_INSTANCE_NORMAL="",this.frontInstanceMaterial=s.MaterialUtil.createStandardMaterial({color:255,colorWrite:!1,depthWrite:!1,side:THREE.FrontSide}),this.frontInstanceMaterial.defines.USE_INSTANCE="",this.frontInstanceMaterial.defines.USE_INSTANCE_NORMAL="")}},{key:"destroy",value:function(){this.lightManager.destroy(),this.lightManager=null,this.clearAll(),this.pool.destroy(),this.pool=null,this.geometryGroup=null,this.objectGroups=null,this.clipPlanes=null,this.fillClipPlane=null,this.boundaryEdge=null,this.extrudeBodyManager=null,this.externalComponentManager=null,this.axisGridManager=null,this.IBLMaps=null,this.transformMatrix=null,this.selectedMeshes=null,this.nonSelectedMeshes=null,this.selectedInstanceMeshes=null,this.nonSelectedInstanceMeshes=null}},{key:"resizePool",value:function(e){s.GlobalData.BatchMergeEnabled||(this.geometryGroup.clear(),this.pool.resize(e,{parent:this.geometryGroup}))}},{key:"clearAll",value:function(){this.pool.clear(),this.autoUpdate=!1}},{key:"getRootNode",value:function(){return this.geometryGroup}},{key:"hasBoundingBox",value:function(){return!!this.geometryGroup.boundingBox}},{key:"getBoundingBox",value:function(){if(this.geometryGroup.boundingBox)return e.copy(this.geometryGroup.boundingBox),e.applyMatrix4(this.geometryGroup.matrix),e}},{key:"getOriginalBoundingBoxWorld",value:function(){return this.originalBoundingBoxWorld}},{key:"getBoundingBoxWorld",value:function(){return this.geometryGroup.boundingBox.clone()}},{key:"getMatrixGlobal",value:function(){return this.geometryGroup.matrix.clone()}},{key:"getRawMatrixGlobal",value:function(){return this.geometryGroup.matrix}},{key:"getInverseMatrixGlobal",value:function(){return this.geometryGroup.inverseMatrixGlobal||(this.geometryGroup.inverseMatrixGlobal=new THREE.Matrix4),this.geometryGroup.inverseMatrixGlobal.getInverse(this.geometryGroup.matrix),this.geometryGroup.inverseMatrixGlobal}},{key:"getGlobalScaleFactor",value:function(){return this.geometryGroup.matrix.elements[0]}},{key:"getMatrixWorldGlobal",value:function(){return this.geometryGroup.matrixWorld}},{key:"getRotationGlobal",value:function(){if(this.geometryGroup.matrix){var e=new THREE.Matrix4;e.extractRotation(this.geometryGroup.matrix);var t=new THREE.Euler;return t.setFromRotationMatrix(e),t}return null}},{key:"getTrackingPointFromBoundingBox",value:function(e,t){if(!this.geometryGroup.boundingBox)return null;var i=t.origin,r=this.getBoundingBox(),n=0,a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];a[0].set(r.min.x,r.min.y,r.min.z),a[1].set(r.min.x,r.min.y,r.max.z),a[2].set(r.min.x,r.max.y,r.min.z),a[3].set(r.min.x,r.max.y,r.max.z),a[4].set(r.max.x,r.min.y,r.min.z),a[5].set(r.max.x,r.min.y,r.max.z),a[6].set(r.max.x,r.max.y,r.min.z),a[7].set(r.max.x,r.max.y,r.max.z);for(var o=new THREE.Vector3,s=0;s<8;s++){o.set(0,0,0),o.subVectors(a[s],i);var l=o.distanceTo(e);n<l&&(n=l)}var u=e.clone().multiplyScalar(n),c=i.clone().add(u),h=new THREE.Plane;return h.setFromNormalAndCoplanarPoint(e,c),t.intersectPlane(h)}},{key:"getNearDepthByRect",value:function(t,i){function r(e){u.setFromMatrixPosition(e.matrixWorld),u.applyProjection(l);var t=u.z;t<o&&t>=0&&t<=1&&(o=t)}function n(t,i){if(!i.boundingBox||i instanceof THREE.Mesh){var r=i.geometry;null===r.boundingBox&&r.computeBoundingBox(),e.copy(r.boundingBox),e.applyMatrix4(i.matrixWorld)}else e.copy(i.boundingBox),e.applyMatrix4(i.matrixWorld);return t.intersectsBox(e)}function a(e,t){if(t instanceof s.MeshEx){if(!n(e,t))return;r(t)}else if(t.worldBoundingBox){if(!e.intersectsBox(t.worldBoundingBox))return;r(t)}var i=t.children;if(i)for(var o=0,l=i.length;o<l;o++){var u=i[o];u.visible&&a(e,u)}}var o=1/0,l=new THREE.Matrix4,u=new THREE.Vector3;l.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse);for(var c=this.geometryGroup.children,h=0,d=c.length;h<d;h++){var f=c[h];f.visible&&a(t,f)}return o}},{key:"getExpandScalar",value:function(){return this.expandScalar}},{key:"hasClipPlanes",value:function(){return null!=this.clipPlanes}},{key:"hasFillClipPlanes",value:function(){return null!=this.fillClipPlane}},{key:"shrinkScopeByClipPlane",value:function(e,t){if(this.clipPlanes&&this.clipPlanes.isEnabled()){var i=this.clipPlanes.hitTest(e);if(null==i.distance)return;i.sign?i.distance>t.near&&(t.near=i.distance):i.distance<t.far&&(t.far=i.distance)}}},{key:"updateWorldMatrix",value:function(e,t,i){var r=new THREE.Matrix4;r.compose(e,t,i),this.updateWorldMatrixByMatrix(r)}},{key:"updateWorldMatrixByMatrix",value:function(e){for(var t=this.objectGroups.children,i=0,r=t.length;i<r;i++)if(t[i].globalSpace){var n=t[i].transformMatrix||new THREE.Matrix4;t[i].matrix.copy(n),t[i].matrix.multiplyMatrices(e,t[i].matrix),t[i].matrixAutoUpdate=!1,t[i].updateMatrixWorld(!0)}}},{key:"getShadowBoxWorld",value:function(){return this.lightManager.getShadowBoxWorld()}},{key:"lightPreset",value:function(){this.lightManager.lightPreset()}},{key:"updateLights",value:function(e,t){this.lightManager.useCSM&&this.lightManager.csm,this.lightManager.updateLights(e)}},{key:"getOrCreateObjectGroup",value:function(e,t){for(var i=this.objectGroups.children,r=0,n=i.length;r<n;r++)if(i[r].name==e)return i[r];var a=new s.ObjectGroup(e,t);return a.isGlobalSpace()&&(a.matrix.copy(this.geometryGroup.matrix),a.matrixAutoUpdate=!1,a.updateMatrixWorld(!0)),this.objectGroups.add(a),a}},{key:"getObjectGroup",value:function(e){for(var t=this.objectGroups.children,i=0,r=t.length;i<r;i++)if(t[i].name==e)return t[i];return null}},{key:"getObjectGroupType",value:function(e){var t=e.split("|");return{groupType:t[0],databagId:t.length>1?t[1]:void 0}}},{key:"getObjectGroups",value:function(){return this.objectGroups.children}},{key:"removeObjectGroup",value:function(e){this.objectGroups.remove(e)}},{key:"removeObjectGroupByName",value:function(e){this.objectGroups.removeByName(e)}},{key:"hasObjectGroup",value:function(e){return this.objectGroups.hasChild(e)}},{key:"intersectToWorld",value:function(e,t){var i=this.getMatrixGlobal();e.worldPosition=s.GeomUtil.getWorldPositionOfMesh(e.point,i);var r=t.getComponentInfoByUserId(e.userId);r&&(e.worldBoundingBox=r.boundingBox.clone())}},{key:"worldToDrawing",value:function(e){var t=this.getMatrixGlobal(),i=new THREE.Vector3(e.x,e.y,e.z);return i.applyMatrix4(t),i}},{key:"drawingToWorld",value:function(e){var t=this.getMatrixGlobal(),i=new THREE.Matrix4;i.getInverse(t);var r=new THREE.Vector3(e.x,e.y,e.z);return r.applyMatrix4(i),r}},{key:"getBoundingBoxWorldByMesh",value:function(e){var t=this.getMatrixGlobal(),i=e.boundingBox;i||(e.geometry.boundingBox||e.geometry.computeBoundingBox(),i=e.geometry.boundingBox);var r=i.clone();r.applyMatrix4(e.matrixWorld);var n=new THREE.Matrix4;return n.getInverse(t),r.applyMatrix4(n),r}},{key:"getObjectPool",value:function(){return this.pool}},{key:"setBoundingBoxWorld",value:function(e){this.geometryGroup.boundingBox?this.geometryGroup.boundingBox.copy(e):this.geometryGroup.boundingBox=e,this.originalBoundingBoxWorld=e.clone()}},{key:"updateBoundingBoxWorld",value:function(e){this.geometryGroup.boundingBox=this.geometryGroup.boundingBox||new THREE.Box3,this.originalBoundingBoxWorld=this.originalBoundingBoxWorld||new THREE.Box3,this.geometryGroup.boundingBox.expandByPoint(e.min),this.geometryGroup.boundingBox.expandByPoint(e.max),this.originalBoundingBoxWorld.expandByPoint(e.min),this.originalBoundingBoxWorld.expandByPoint(e.max)}},{key:"setBoundingBoxWorldWithoutDEM",value:function(e){this.boundingBoxWorldWithoutDEM=this.boundingBoxWorldWithoutDEM||new THREE.Box3,this.boundingBoxWorldWithoutDEM.copy(e)}},{key:"updateBoundingBoxWorldWithoutDEM",value:function(e){this.boundingBoxWorldWithoutDEM=this.boundingBoxWorldWithoutDEM||new THREE.Box3,this.boundingBoxWorldWithoutDEM.expandByPoint(e.min),this.boundingBoxWorldWithoutDEM.expandByPoint(e.max)}},{key:"getBoundingBoxWithoutDEM",value:function(){if(this.boundingBoxWorldWithoutDEM)return e.copy(this.boundingBoxWorldWithoutDEM),e.applyMatrix4(this.geometryGroup.matrix),e}},{key:"getBoundingBoxOfGeometries",value:function(e){for(var t=!e,i=new THREE.Box3,r=this.pool._pool,n=0,a=this.pool.counter;n<a;++n){var o=r[n];if(o.isVisible()){var l=o.geometry;if(l){if(t||void 0!==e[o.name]){l.boundingBox||l.computeBoundingBox();var u=l.boundingBox;if(u){var c=u.clone();o.matrixWorld&&c.applyMatrix4(o.matrixWorld),i.expandByPoint(c.min),i.expandByPoint(c.max)}}}else s.Logger.log("empty geometry!")}}return i}},{key:"getTransformMatrixGlobal",value:function(){return this.transformMatrix}},{key:"setTransformMatrixGlobal",value:function(e){this.transformMatrix.copy(e)}},{key:"adjustInstanceVisibility",value:function(e){function t(t){if((t instanceof THREE.Mesh||t instanceof THREE.LineSegments)&&t.geometry instanceof THREE.InstancedBufferGeometry){var i=t.visible;if(i==e)return;e&&!t.bVisible||(t.visible=e),t.bVisible=i}}this.traverse(t)}},{key:"adjustVisibility",value:function(e){function t(t){if((t instanceof THREE.Mesh||t instanceof THREE.LineSegments)&&!(t.geometry instanceof THREE.InstancedBufferGeometry)){var i=t.visible;if(i==e)return;e&&!t.bVisible||(t.visible=e),t.bVisible=i}}this.traverse(t)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){function t(e){if(e._indicesGroup&&e.visible){var t=[],i=e.geometry.groups;if(i&&i.length){for(var r=0,n=i.length;r<n;r++){var a=i[r];a.materialIndex===s.Model.EnumFilterState.SELECTED&&(t.push({idx:r,start:a.start,count:a.count}),a.start=0,a.count=0)}t.length&&l.push({object:e,indices:t})}}}function i(e){for(var t=0,i=o.selectedMeshes.length;t<i;t++){if(e===o.selectedMeshes[t].object)for(var r=o.selectedMeshes[t].indices,n=0,a=r.length;n<a;n++){var s=r[n],l=e.geometry.groups[s.idx];l.start=s.start,l.count=s.count}}}function r(e){if(e.visible){for(var t=[],i=e.geometry.getAttribute("vState").array,r=0;r<i.length;++r)i[r]===s.EnumInstanceState.SELECTED&&(t.push(r),i[r]=s.EnumInstanceState.HIDDEN);t.length&&(e.geometry.getAttribute("vState").needsUpdate=!0,u.push({object:e,indices:t}))}}function n(e){for(var t=0,i=o.selectedInstanceMeshes.length;t<i;t++){if(e===o.selectedInstanceMeshes[t].object){for(var r=o.selectedInstanceMeshes[t].indices,n=e.geometry.getAttribute("vState").array,a=0,l=r.length;a<l;a++)n[r[a]]=s.EnumInstanceState.SELECTED;e.geometry.getAttribute("vState").needsUpdate=!0}}}function a(a){(a instanceof THREE.Mesh||a instanceof THREE.LineSegments)&&(a.geometry instanceof THREE.InstancedBufferGeometry?e?n(a):r(a):e?i(a):t(a))}var o=this;e||(o.selectedMeshes.length=0,o.selectedInstanceMeshes.length=0);var l=o.selectedMeshes,u=o.selectedInstanceMeshes;this.traverse(a)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){function t(e){if(e._indicesGroup&&e.visible){var t=[],i=e.geometry.groups;if(i&&i.length){for(var r=0,n=i.length;r<n;r++){var a=i[r];a.materialIndex!==s.Model.EnumFilterState.SELECTED&&(t.push({idx:r,start:a.start,count:a.count}),a.start=0,a.count=0)}t.length?l.push({object:e,indices:t}):(e.visible=!1,l.push({object:e,indices:null}))}else e.visible=!1,l.push({object:e,indices:null})}}function i(e){for(var t=0,i=o.nonSelectedMeshes.length;t<i;t++){if(e===o.nonSelectedMeshes[t].object){var r=o.nonSelectedMeshes[t].indices;if(null===r)e.visible=!0;else for(var n=0,a=r.length;n<a;n++){var s=r[n],l=e.geometry.groups[s.idx];l.start=s.start,l.count=s.count}}}}function r(e){if(e.visible){for(var t=[],i=e.geometry.getAttribute("vState").array,r=0,n=i.length;r<n;++r)i[r]!==s.EnumInstanceState.SELECTED&&i[r]!==s.EnumInstanceState.HIDDEN&&(t.push({idx:r,state:i[r]}),i[r]=s.EnumInstanceState.HIDDEN);t.length&&(e.geometry.getAttribute("vState").needsUpdate=!0,u.push({object:e,indices:t}))}}function n(e){for(var t=0,i=o.nonSelectedInstanceMeshes.length;t<i;t++){if(e===o.nonSelectedInstanceMeshes[t].object){for(var r=o.nonSelectedInstanceMeshes[t].indices,n=e.geometry.getAttribute("vState").array,a=0,s=r.length;a<s;a++)n[r[a].idx]=r[a].state;e.geometry.getAttribute("vState").needsUpdate=!0}}}function a(a){(a instanceof THREE.Mesh||a instanceof THREE.LineSegments)&&(a.geometry instanceof THREE.InstancedBufferGeometry?e?n(a):r(a):e?i(a):t(a))}var o=this;e||(o.nonSelectedMeshes.length=0,o.nonSelectedInstanceMeshes.length=0);var l=o.nonSelectedMeshes,u=o.nonSelectedInstanceMeshes;this.traverse(a)}},{key:"clearSelectedAndNonSelectedMeshes",value:function(){this.selectedMeshes.length=0,this.nonSelectedMeshes.length=0,this.selectedInstanceMeshes.length=0,this.nonSelectedInstanceMeshes.length=0}},{key:"drawBoundingBox",value:function(e){if(!e)return void this.removeObjectGroupByName("BoundingBox");var t=this.getOrCreateObjectGroup("BoundingBox",{pickable:0,priority:2}),i=this.getBoundingBox();void 0===this.boudingBoxNode?(this.boudingBoxNode=new s.BBoxNode(i,16711680),t.add(this.boudingBoxNode)):this.boudingBoxNode.updateBBox(i),this.boudingBoxNode.updateMatrixWorld(!0)}},{key:"calculateGisMapBox",value:function(e){var t=this.getObjectGroup(s.GlobalData.TileGlobalGroupName)||this.getObjectGroup(s.GlobalData.TilePlaneGroupName),i=this.getBoundingBoxWorld(),r=i.clone();if(t){var n=e.position.clone(),a=this.getMatrixWorldGlobal(),o=(new THREE.Matrix4).getInverse(a);n.applyMatrix4(o);var l=s.Tile.TileMath.earthRadius*s.Tile.TileMath.unitScale,u=n.z-i.min.z;u=Math.abs(u);var c=l*Math.acos(l/(l+u)),h=void 0!==t.altitudeOffset?t.altitudeOffset*s.Tile.TileMath.unitScale:void 0;r.min.x=n.x-c,r.max.x=n.x+c,r.min.y=n.y-c,r.max.y=n.y+c,r.min.z=void 0!==h&&h>0?Math.min(i.min.z,-h):i.min.z,r.max.z=void 0!==h&&h<0?Math.max(i.max.z,-h):i.max.z}return r}}]),i}(THREE.Object3D);s.Scene=t}(),s.Raycaster=function(e,t,i,r){this.ray=new THREE.Ray(e,t),this.near=i||0,this.far=r||1/0,this.params={Sprite:{},Mesh:{},Points:{threshold:1},LOD:{},Line:{threshold:1}}},s.Raycaster.prototype={constructor:s.Raycaster,precision:1e-4,linePrecision:1,descSort:function(e,t){return e.distance-t.distance},set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t instanceof s.CombinedCamera?t.isPerspective?(this.ray.origin.copy(t.position),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(t.position).normalize()):(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):t instanceof THREE.PerspectiveCamera?(this.ray.origin.copy(t.position),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(t.position).normalize()):t instanceof THREE.OrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("CLOUD.Raycaster: Unsupported camera type.")},intersectOctantForNode:function(e,t){function i(e){var a,o;if(n.set(e.min,e.max),r.ray.intersectBox(n)&&(t.push(e),e.childOctants))for(a=0,o=e.childOctants.length;a<o;a++)i(e.childOctants[a])}var r=this,n=new THREE.Box3;i(e)}},THREE.Ray.prototype.intersectBoxWithDistance=function(e){var t,i,r,n,a,o,s=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,c=this.origin;if(s>=0?(t=(e.min.x-c.x)*s,i=(e.max.x-c.x)*s):(t=(e.max.x-c.x)*s,i=(e.min.x-c.x)*s),l>=0?(r=(e.min.y-c.y)*l,n=(e.max.y-c.y)*l):(r=(e.max.y-c.y)*l,n=(e.min.y-c.y)*l),t>n||r>i)return-1;if((r>t||t!==t)&&(t=r),(n<i||i!==i)&&(i=n),u>=0?(a=(e.min.z-c.z)*u,o=(e.max.z-c.z)*u):(a=(e.max.z-c.z)*u,o=(e.min.z-c.z)*u),t>o||a>i)return-1;if((a>t||t!==t)&&(t=a),(o<i||i!==i)&&(i=o),i<0)return-1;if(t<0)return 0;var h=this.at(t>=0?t:i),d=h.x-c.x,f=h.y-c.y,p=h.z-c.z;return Math.sqrt(d*d+f*f+p*p)},function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.id=t,this.object=i}return _createClass(e,[{key:"destroy",value:function(){this.object=null}},{key:"_inDistanceRange",value:function(e,t){return e>=t.near&&e<=t.far}},{key:"raycast",value:function(e,t,i,r,n){}}]),e}();s.CapsuleObject=e}(),function(){var e=function(e){function t(e,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return _inherits(t,e),_createClass(t,[{key:"raycast",value:function(e,t,i,r,n,a){var o=this.object,l=[];if(o.raycast(e,l),l.length>0){l.sort(function(e,t){return e.distance-t.distance});for(var u=0,c=l.length;u<c;u++){var h=l[u];if(this._inDistanceRange(h.distance,i)&&!r.clipPoint(h.point)){a||(i.far=h.distance-s.Utils.MinusEpsilon),n.push(h);break}}}}}]),t}(s.CapsuleObject),t=function(e){function t(e,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return _inherits(t,e),_createClass(t,[{key:"raycast",value:function(e,t,i,r,n){var a=this.object,o=[],l=a.geometry,u={indexStart:l.drawRange.start,indexCount:l.drawRange.count};if(a.raycastByIndices2(e,o,u,!1),o.length>0){o.sort(function(e,t){return e.distance-t.distance});for(var c=0,h=o.length;c<h;c++){var d=o[c];if(this._inDistanceRange(d.distance,i)&&!r.clipPoint(d.point)){i.far=d.distance-s.Utils.MinusEpsilon,d.userId=t.userId,d.indexInfo=u,n.push(d);break}}}}}]),t}(s.CapsuleObject);s.SingleCapsuleObject=e,s.SingleCapsuleObjectWithDrawRange=t}(),function(){var e=function(e){function t(e,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return _inherits(t,e),_createClass(t,[{key:"raycast",value:function(e,t,i,r,n,a){var o=this.object,l=o._indicesGroup;if(l){var u=l[t.userId];if(u){for(var c,h=!1,d=0,f=u.length;d<f;d++)if(u[d].nodeId===t.nodeId){c=u[d],h=!0;break}if(h){var p=[];if(o.raycastByIndices(e,p,c),p.length>0){p.sort(function(e,t){return e.distance-t.distance});for(var m=0,v=p.length;m<v;m++){var g=p[m];if(this._inDistanceRange(g.distance,i)&&!r.clipPoint(g.point)){a||(i.far=g.distance-s.Utils.MinusEpsilon),g.userId=c.userId,g.indexInfo=c,n.push(g);break}}}}}}}}]),t}(s.CapsuleObject);s.BatchedCapsuleObject=e}(),function(){var e=function(e){function t(e,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return _inherits(t,e),_createClass(t,[{key:"raycast",value:function(e,t,i,r,n,a){var o=this.object,l=[];if(o.raycastByIndices(e,l,null,t.matrix),l.length>0){l.sort(function(e,t){return e.distance-t.distance});for(var u=0,c=l.length;u<c;u++){var h=l[u];if(this._inDistanceRange(h.distance,i)&&!r.clipPoint(h.point)){a||(i.far=h.distance-s.Utils.MinusEpsilon),h.userId=t.userId,h.matrix=t.matrix,n.push(h);break}}}}}]),t}(s.CapsuleObject);s.InstancedCapsuleObject=e}(),function(){var e=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.cameraType=e||s.CAMERATYPE.PERSPECTIVE,r.target=new THREE.Vector3,r.name=i.name||"",r.near=i.near||.1,r.far=i.far||2e3,r.fov=i.fov||45,r.cameraType===s.CAMERATYPE.PERSPECTIVE?(i.width&&i.height&&(r.aspect=i.width/i.height,r.left=-i.width/2,r.right=i.width/2,r.top=i.height/2,r.bottom=-i.height/2),r.perspectiveCamera=new s.CloudPerspectiveCamera(r.fov,r.aspect,r.near,r.far),r.orthoCamera=null,r.toPerspective()):(r.left=i.left,r.right=i.right,r.top=i.top,r.bottom=i.bottom,void 0!==i.left&&void 0!==i.right&&void 0!==i.top&&void 0!==i.bottom&&(r.aspect=(r.right-r.left)/(r.top-r.bottom)),r.orthoCamera=new THREE.OrthographicCamera(r.left,r.right,r.top,r.bottom,r.near,r.far),r.perspectiveCamera=null,r.orthoCamera.updateProjectionMatrix(),r.projectionMatrix=r.orthoCamera.projectionMatrix,r.isPerspective=!1),r.zoom=i.zoom||1,r.updateProjectionMatrixByFrustum=!1,r}return _inherits(t,e),_createClass(t,[{key:"toPerspective",value:function(){if(null===this.perspectiveCamera)return void console.log("Can not convert to perspective camera because the camera original type is orthographic.");this.updateProjectionMatrixByFrustum||(this.perspectiveCamera.aspect=this.aspect,this.perspectiveCamera.near=this.near,this.perspectiveCamera.far=this.far,this.perspectiveCamera.fov=this.fov,this.perspectiveCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspectiveCamera.projectionMatrix,this.isPerspective=!0,this.dirty=!0)}},{key:"toOrthographic",value:function(){null===this.orthoCamera&&(this.orthoCamera=new THREE.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far));var e=this.fov,t=this.target.clone().sub(this.position).length(),i=Math.tan(e*Math.PI/180/2)*t,r=i*this.aspect;i/=this.zoom,r/=this.zoom,this.left=this.orthoCamera.left=-r,this.right=this.orthoCamera.right=r,this.top=this.orthoCamera.top=i,this.bottom=this.orthoCamera.bottom=-i,this.orthoCamera.near=this.near,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.isPerspective=!1,this.dirty=!0}},{key:"setSize",value:function(e,t){this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.aspect=e/t,this.dirty=!0}},{key:"setSizeByFrustum",value:function(e,t){var i=2*this.right,r=2*this.top;this.aspect=i/r;var n;i/r<e/t?(n=r/i,this.perspectiveCamera.setProjectOnWidth(!0)):(n=i/r,this.perspectiveCamera.setProjectOnWidth(!1)),this.dirty=!0,this.isPerspective&&(this.perspectiveCamera.aspect=n,this.perspectiveCamera.near=this.near,this.perspectiveCamera.far=this.far,this.perspectiveCamera.fov=this.fov,this.perspectiveCamera.updateProjectionMatrixByFrustum(e,t),this.projectionMatrix=this.perspectiveCamera.projectionMatrix,this.isPerspective=!0,this.dirty=!0)}},{key:"setFov",value:function(e){this.fov=e,this.dirty=!0,this.updateProjectionMatrix()}},{key:"setNearFar",value:function(e,t){this.near=e,this.far=t,this.dirty=!0,this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){this.isPerspective?this.toPerspective():this.toOrthographic()}},{key:"setLens",value:function(e,t){void 0===t&&(t=24);var i=2*THREE.Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(i),this.dirty=!0,i}},{key:"setZoom",value:function(e){this.zoom=e,this.dirty=!0,this.updateProjectionMatrix()}},{key:"copy",value:function(e){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.cameraType=e.cameraType,this.target.copy(e.target),this.aspect=e.aspect,this.fov=e.fov,this.near=e.near,this.far=e.far,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.zoom=e.zoom,this.isPerspective=e.isPerspective,this.updateProjectionMatrixByFrustum=e.updateProjectionMatrixByFrustum,this.orthoCamera&&e.orthoCamera&&this.orthoCamera.copy(e.orthoCamera),this.perspectiveCamera&&e.perspectiveCamera&&this.perspectiveCamera.copy(e.perspectiveCamera),this}},{key:"clone",value:function(){return new this.constructor(this.cameraType).copy(this)}},{key:"isDirty",value:function(){return this.dirty}}]),t}(THREE.Camera);s.CombinedCamera=e}();var m=function(e){function t(e,i,r,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,n));return a.projectOnWidth=!1,a}return _inherits(t,e),_createClass(t,[{key:"updateProjectionMatrixByFrustum",value:function(e,t){var i,r,n,a,o=this.near;this.projectOnWidth?(n=e,r=-.5*n,a=this.aspect*n,i=.5*a):(a=t,i=.5*a,n=this.aspect*a,r=-.5*n);var s=this.view;if(null!==s){var l=s.fullWidth,u=s.fullHeight;r+=s.offsetX*n/l,i-=s.offsetY*a/u,n*=s.width/l,a*=s.height/u}var c=this.filmOffset;0!==c&&(r+=o*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,i,i-a,o,this.far)}},{key:"setProjectOnWidth",value:function(e){this.projectOnWidth=e}}]),t}(THREE.PerspectiveCamera);s.CloudPerspectiveCamera=m,function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.realUp=r.up.clone(),r.dirty=!1,r.orthoScale=1,r.positionPlane=new THREE.Plane,r.projScreenMatrix=new THREE.Matrix4,r.viewProjInverse=new THREE.Matrix4,r.frustum=new THREE.Frustum,r.frustumHeightFactor=r.computeFrustumHeightFactor(),r.minimumElevation=null,r._statusInitialized=!1,r._direction=null,r}return _inherits(t,e),_createClass(t,[{key:"direction",value:function(){return this._direction||(this._direction=new THREE.Vector3),this._direction.subVectors(this.target,this.position),this._direction.clone()}},{key:"_updatePositionPlane",value:function(){this.positionPlane.setFromNormalAndCoplanarPoint(this.getWorldDirection(),this.position)}},{key:"_updateFrustum",value:function(){this.frustum.setFromMatrix(this.projScreenMatrix)}},{key:"updateMVP",value:function(){this.dirty&&(this._statusInitialized||(this._statusInitialized=!0),null===this.parent&&this.updateMatrixWorld(),this.matrixWorldInverse.getInverse(this.matrixWorld),this.projScreenMatrix.multiplyMatrices(this.projectionMatrix,this.matrixWorldInverse),this.viewProjInverse.getInverse(this.projScreenMatrix),this._updateFrustum(),this._updatePositionPlane(),this.frustumHeightFactor=this.computeFrustumHeightFactor(),this.dirty=!1)}},{key:"computeFrustumHeightFactor",value:function(){return 2*Math.tan(.5*THREE.Math.degToRad(this.fov))}},{key:"getFrustum",value:function(){return this.dirty&&this.updateMVP(),this.frustum}},{key:"LookAt",value:function(e,t,i,r){var n=new THREE.Vector3;n.copy(t),void 0!==r&&n.setLength(r),this.position.subVectors(e,n),this.up=i,this.lookAt(e),this.realUp=i.clone(),this.target=e.clone(),this.dirty=!0}},{key:"copy",value:function(e){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),this.realUp.copy(e.realUp),this.orthoScale=e.orthoScale,this.dirty=e.dirty,this.positionPlane.copy(e.positionPlane),this.projScreenMatrix.copy(e.projScreenMatrix),this.viewProjInverse.copy(e.viewProjInverse),this.frustum.copy(e.frustum),this}},{key:"setStandardView",value:function(e,t){var i;i=t?t.getCenter():new THREE.Vector3(0,0,0);var r=s.GlobalData.SceneSize,n=r/2;switch(e){case s.EnumStandardView.ISO:var a=new THREE.Vector3(-r,r,r),o=new THREE.Vector3,l=new THREE.Vector3(0,0,0);o.subVectors(l,a),this.LookAt(i,o,THREE.Object3D.DefaultUp);break;case s.EnumStandardView.Top:this.LookAt(i,new THREE.Vector3(0,-1,0),new THREE.Vector3(0,0,-1),n);break;case s.EnumStandardView.Bottom:this.LookAt(i,new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),n);break;case s.EnumStandardView.Front:this.LookAt(i,new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.Back:this.LookAt(i,new THREE.Vector3(0,0,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.Right:this.LookAt(i,new THREE.Vector3(-1,0,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.Left:this.LookAt(i,new THREE.Vector3(1,0,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.SouthEast:this.LookAt(i,new THREE.Vector3(-1,0,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.SouthWest:this.LookAt(i,new THREE.Vector3(1,0,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.NorthWest:this.LookAt(i,new THREE.Vector3(1,0,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.NorthEast:this.LookAt(i,new THREE.Vector3(-1,0,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomFront:this.LookAt(i,new THREE.Vector3(0,1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomBack:this.LookAt(i,new THREE.Vector3(0,1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomRight:this.LookAt(i,new THREE.Vector3(-1,1,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomLeft:this.LookAt(i,new THREE.Vector3(1,1,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomSouthEast:this.LookAt(i,new THREE.Vector3(-1,1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomSouthWest:this.LookAt(i,new THREE.Vector3(1,1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomNorthWest:this.LookAt(i,new THREE.Vector3(1,1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.BottomNorthEast:this.LookAt(i,new THREE.Vector3(-1,1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofFront:this.LookAt(i,new THREE.Vector3(0,-1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofBack:this.LookAt(i,new THREE.Vector3(0,-1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofRight:this.LookAt(i,new THREE.Vector3(-1,-1,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofLeft:this.LookAt(i,new THREE.Vector3(1,-1,0),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofSouthEast:this.LookAt(i,new THREE.Vector3(-1,-1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofSouthWest:this.LookAt(i,new THREE.Vector3(1,-1,-1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofNorthWest:this.LookAt(i,new THREE.Vector3(1,-1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.RoofNorthEast:this.LookAt(i,new THREE.Vector3(-1,-1,1),new THREE.Vector3(0,1,0),n);break;case s.EnumStandardView.TopTurnRight:this.LookAt(i,new THREE.Vector3(0,-1,0),new THREE.Vector3(-1,0,0),n);break;case s.EnumStandardView.TopTurnBack:this.LookAt(i,new THREE.Vector3(0,-1,0),new THREE.Vector3(0,0,1),n);break;case s.EnumStandardView.TopTurnLeft:this.LookAt(i,new THREE.Vector3(0,-1,0),new THREE.Vector3(1,0,0),n);break;case s.EnumStandardView.BottomTurnRight:this.LookAt(i,new THREE.Vector3(0,1,0),new THREE.Vector3(-1,0,0),n);break;case s.EnumStandardView.BottomTurnBack:this.LookAt(i,new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,-1),n);break;case s.EnumStandardView.BottomTurnLeft:this.LookAt(i,new THREE.Vector3(0,1,0),new THREE.Vector3(1,0,0),n);break;case s.EnumStandardView.FrontTurnTop:this.LookAt(i,new THREE.Vector3(0,0,-1),new THREE.Vector3(0,-1,0),n);break;case s.EnumStandardView.FrontTurnLeft:this.LookAt(i,new THREE.Vector3(0,0,-1),new THREE.Vector3(1,0,0),n);break;case s.EnumStandardView.FrontTurnRight:this.LookAt(i,new THREE.Vector3(0,0,-1),new THREE.Vector3(-1,0,0),n);break;case s.EnumStandardView.RightTurnTop:this.LookAt(i,new THREE.Vector3(-1,0,0),new THREE.Vector3(0,-1,0),n);break;case s.EnumStandardView.RightTurnFront:this.LookAt(i,new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,-1),n);break;case s.EnumStandardView.RightTurnBack:this.LookAt(i,new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),n);break;case s.EnumStandardView.BackTurnTop:this.LookAt(i,new THREE.Vector3(0,0,1),new THREE.Vector3(0,-1,0),n);break;case s.EnumStandardView.BackTurnLeft:this.LookAt(i,new THREE.Vector3(0,0,1),new THREE.Vector3(-1,0,0),n);break;case s.EnumStandardView.BackTurnRight:this.LookAt(i,new THREE.Vector3(0,0,1),new THREE.Vector3(1,0,0),n);break;case s.EnumStandardView.LeftTurnTop:this.LookAt(i,new THREE.Vector3(1,0,0),new THREE.Vector3(0,-1,0),n);break;case s.EnumStandardView.LeftTurnBack:this.LookAt(i,new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,1),n);break;case s.EnumStandardView.LeftTurnFront:this.LookAt(i,new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,-1),n)}return this.updateProjectionMatrix(),i}},{key:"zoomToBBox",value:function(e,t,i,r){i=i||1,t=t||0,t=t<-1?-1:t;var n=new THREE.Box3;if(n.copy(e),0!==t){var a=.5*e.getSize().length(),o=new THREE.Vector3
;o.subVectors(n.max,n.min).normalize(),o.multiplyScalar(a*t),n.expandByVector(o)}var s=r||this.getWorldDirection(),l=this.up,u=this.aspect,c=THREE.Math.degToRad(.5*this.fov),h=n.getSize(),d=n.getCenter(),f=.5*h.length(),p=f/Math.sin(c)*i,m=new THREE.Vector3;m.copy(s),m.setLength(p);var v=new THREE.Vector3;v.subVectors(d,m);var g=new THREE.Vector3;g.crossVectors(s,l),g.normalize();var y=new THREE.Vector3;y.crossVectors(s,g),y.normalize();var M=new THREE.Plane;M.setFromNormalAndCoplanarPoint(g,v);var E=new THREE.Plane;E.setFromNormalAndCoplanarPoint(y,v);var b=0,x=0,I=0,T=0,w=0,C=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];C[0].set(n.min.x,n.min.y,n.min.z),C[1].set(n.min.x,n.min.y,n.max.z),C[2].set(n.min.x,n.max.y,n.min.z),C[3].set(n.min.x,n.max.y,n.max.z),C[4].set(n.max.x,n.min.y,n.min.z),C[5].set(n.max.x,n.min.y,n.max.z),C[6].set(n.max.x,n.max.y,n.min.z),C[7].set(n.max.x,n.max.y,n.max.z);for(var S=0;S<8;S++){var A=new THREE.Vector3;A.subVectors(C[S],v);var k=Math.abs(A.dot(s)),R=Math.abs(E.distanceToPoint(C[S])),B=R*u,L=Math.abs(M.distanceToPoint(C[S])),O=L/u,P=Math.max(R,O),D=Math.max(B,L);b<P&&(b=P),(!x||!I||P>x*k/I)&&(x=P,I=k),(!T||!w||D>T*k/w)&&(T=D,w=k)}var N,_=T/Math.tan(c)+(p-w),H=x/Math.tan(c)+(p-I);if((N=u<1?Math.max(_,H):Math.min(_,H))<this.near){this.near=(N*N+.001*N)/16777.216}if(m.copy(s).normalize().setLength(N),v.subVectors(d,m),this.position.copy(v),this.lookAt(d),this.target.copy(d),!this.isPerspective){var F=Math.tan(this.fov*Math.PI/180/2)*N;this.orthoScale=F/b,this.zoom=this.orthoScale}return this.updateProjectionMatrix(),this.dirty=!0,d}},{key:"calculateNearFar",value:function(e,t){var i=e,r=[new THREE.Vector3(i.min.x,i.min.y,i.min.z),new THREE.Vector3(i.min.x,i.min.y,i.max.z),new THREE.Vector3(i.min.x,i.max.y,i.min.z),new THREE.Vector3(i.min.x,i.max.y,i.max.z),new THREE.Vector3(i.max.x,i.min.y,i.min.z),new THREE.Vector3(i.max.x,i.min.y,i.max.z),new THREE.Vector3(i.max.x,i.max.y,i.min.z),new THREE.Vector3(i.max.x,i.max.y,i.max.z)],n=this.getWorldDirection(),a=(new THREE.Plane).setFromNormalAndCoplanarPoint(n,this.position),o=-1/0,s=1/0;r.forEach(function(e){var t=a.distanceToPoint(e);s>t-10&&(s=t-10),o<t+10&&(o=t+10)});var l=s>0?s:.1,u=o>0?o:2e3;this.isPerspective?void 0!==t&&(l=t):l=-u,this.setNearFar(l,u)}},{key:"calculateNearFar2",value:function(e,t,i){var r=e,n=r.getCenter(),a=this.position,o=a.clone().sub(n),s=o.length(),l=r.getSize().length(),u=void 0,c=void 0;if(t){var h=.5*l;if(c=s+h,this.isPerspective){u=(s*s+.001*s)/16777.216,s<h||i?u=.1:u+h>s&&(u=s-h)}else u=-c}else c=s,u=this.isPerspective?.1:-c;this.setNearFar(u,c)}},{key:"computeRay",value:function(e,t,i){var r=new THREE.Vector2;if(void 0===i)r.x=window.innerWidth,r.y=window.innerHeight;else{var n=i===document?i.body:i;r.x=n.offsetWidth,r.y=n.offsetHeight}var a=new THREE.Vector2;a.x=e/r.x*2-1,a.y=-t/r.y*2+1;var o=new THREE.Ray;return this.isPerspective?(o.origin.copy(this.position),o.direction.set(a.x,a.y,.5).unproject(this).sub(this.position).normalize()):(o.origin.set(a.x,a.y,-1).unproject(this),o.direction.set(0,0,-1).transformDirection(this.matrixWorld)),o}},{key:"screenToWorld",value:function(e,t,i,r){var n=this.computeRay(e,t,i),a=this.getWorldDirection().normalize(),o=new THREE.Plane(a);return o.setFromNormalAndCoplanarPoint(a,r),n.intersectPlane(o,r)}},{key:"getWorldFrustum",value:function(e){var t=new THREE.Matrix4,i=new THREE.Frustum,r=this.clone(),n=this.target,a=n.clone().sub(this.position).length(),o=new THREE.Matrix4;o.getInverse(e);var s=new THREE.Matrix4;s.extractRotation(e);var l=new THREE.Quaternion;l.setFromRotationMatrix(s),l.inverse(),r.position.applyMatrix4(o);var u=n.clone();u.applyMatrix4(o);var c=u.clone().sub(r.position),h=c.length();c.normalize();var d=h/a;return r.far=camera.far*d,r.up.applyQuaternion(l).normalize(),r.realUp.applyQuaternion(l).normalize(),r.updateProjectionMatrix(),r.updateMatrixWorld(),t.getInverse(r.matrixWorld),i.setFromMatrix((new THREE.Matrix4).multiplyMatrices(r.projectionMatrix,t)),r=null,i}},{key:"distanceFromWorldToDrawing",value:function(e,t){var i=this.position.clone(),r=this.target.clone();r.subVectors(this.target,this.position),r.normalize();var n=new THREE.Matrix4;return n.getInverse(e),r.add(i).applyMatrix4(n),i.applyMatrix4(n),r.sub(i),r.normalize().multiplyScalar(t),r.add(i).applyMatrix4(e),r.sub(this.position),r.length()}},{key:"getPositionByDis",value:function(e,t,i,r){var n=i||this.position,a=r||this.target;n=n.clone(),a=a.clone();var o=new THREE.Matrix4;o.getInverse(t),n.applyMatrix4(o),a.applyMatrix4(o);var s=n.distanceTo(a),l=e/s,u=new THREE.Vector3;return u.subVectors(n,a),u.multiplyScalar(l),u.subVectors(n,u),u}},{key:"getDistanceByPos",value:function(e,t){var i=this.position.clone(),r=new THREE.Matrix4;return r.getInverse(t),i.applyMatrix4(r),i.distanceTo(e)}},{key:"statusInitialized",get:function(){return this._statusInitialized}}],[{key:"nearFarDrawingToWorld",value:function(e,t){var i=e.position.clone(),r=e.target.clone(),n=r.sub(i);n.normalize();var a=new THREE.Matrix4;a.getInverse(t);var o=function(e,t,i,r){var n=i.clone().multiplyScalar(e);n.add(t).applyMatrix4(r);var a=t.clone().applyMatrix4(r);return n.sub(a),e>0?n.length():-n.length()};return e.near&&e.far&&(e.near=o(e.near,i,n,a),e.far=o(e.far,i,n,a)),e.left&&e.right&&e.top&&e.bottom&&(e.left=o(e.left,i,n,a),e.right=o(e.right,i,n,a),e.top=o(e.top,i,n,a),e.bottom=o(e.bottom,i,n,a)),e}},{key:"drawingToWorld",value:function(e,t){var i=e.position.clone(),r=e.target.clone(),n=e.up.clone(),a=new THREE.Matrix4;return a.getInverse(t),n.add(i),n.applyMatrix4(a),i.applyMatrix4(a),r.applyMatrix4(a),n.sub(i),n.normalize(),{position:i,target:r,up:n}}},{key:"worldToDrawing",value:function(e,t){var i=e.position.clone(),r=e.target.clone(),n=e.up.clone();return n.add(i),n.applyMatrix4(t),i.applyMatrix4(t),r.applyMatrix4(t),n.sub(i),n.normalize(),{position:i,target:r,up:n}}}]),t}(s.CombinedCamera);s.Camera=e}(),s.Animation=function(){var e=this,t=null,i={},r={},n=1e3,a=null,o=null,s=null,l=!1,u=null,c=null,h=null;this.from=function(e){t=e;for(var r in t)i[r]=t[r];return this},this.to=function(e,t){return void 0!==t&&(n=t),r=e,this},this.onStart=function(e){return u=e,this},this.onUpdate=function(e){return c=e,this},this.onComplete=function(e){return h=e,this},this.start=function(e){function d(){var f,p=i,m=r,v=Date.now();!1===l&&(null!==u&&u.call(t),l=!0),f=(v-a)/n,f=f>1?1:f,t=s(p,m,f),1===f?(cancelAnimationFrame(o),null!==h&&h.call(t)):(requestAnimationFrame(d,e),null!==c&&c.call(t,f))}l=!1,o&&cancelAnimationFrame(o),a=Date.now(),s=this.interpolate,o=requestAnimationFrame(d,e)},this.isAngleGreaterThanPi=function(e,t,i){var r=new THREE.Vector3;return r.crossVectors(e,t),!(r.dot(i)>=0)},this.conicInterpolate=function(e,t,i,r){var n=t.angleTo(e),a=-n*r,o=new THREE.Vector3;o.crossVectors(t,e).normalize();var s=new THREE.Quaternion;s.setFromAxisAngle(o,a),i.copy(e),i.applyQuaternion(s)},this.quaternionInterpolate=function(e,t,i,r,n){var a=new THREE.Quaternion(e.x,e.y,e.z,1).normalize(),o=new THREE.Quaternion(t.x,t.y,t.z,1).normalize(),s=new THREE.Quaternion(0,0,0,1),l=new THREE.Quaternion(0,0,0,1),u=new THREE.Vector3;u.crossVectors(e,i).normalize(),s.set(u.x,u.y,u.z,1).normalize();var c=0;n<.5?(c=2*n,THREE.Quaternion.slerp(a,s,l,c),r.set(l.x,l.y,l.z)):(c=2*(n-.5),THREE.Quaternion.slerp(s,o,l,c),r.set(l.x,l.y,l.z))},this.slerpInterpolate=function(e,t,i,r,n,a){var o=e.dot(t);a<o?r.copy(t):a<Math.abs(o)?this.quaternionInterpolate(e,t,i,r,n):this.conicInterpolate(e,t,r,n),r.normalize()},this.linearInterpolate=function(e,t,i,r,n){if(e.equals(t))return void i.copy(t);var a=new THREE.Vector3(1,0,0),o=new THREE.Vector3(0,0,1),s=new THREE.Vector3,l=0,u=e.dot(t);n<u?i.copy(t):n<-u?(n>Math.abs(e.dot(o))?s.crossVectors(e,o).normalize():s.crossVectors(e,a).normalize(),r<.5?(l=2*r,i.lerpVectors(e,s,l)):(l=2*(r-.5),i.lerpVectors(s,t,l))):i.lerpVectors(e,t,r),i.normalize()},this.linearInterpolatePosition=function(e,t,i,r){i.lerpVectors(e,t,r)},this.sphericalInterpolate=function(e,t,i,r,n,a){var o=e.clone().sub(t),s=i.clone().sub(r),l=new THREE.Spherical;l.setFromVector3(o);var u=new THREE.Spherical;u.setFromVector3(s);var c=u.theta-l.theta;Math.abs(c)>Math.PI&&(c=c>0?-(2*Math.PI-Math.abs(c)):2*Math.PI-Math.abs(c));var h=l.theta+c*a,d=l.phi+(u.phi-l.phi)*a,f=o.length(),p=new THREE.Spherical;p.set(f,d,h);var m=new THREE.Vector3;m.setFromSpherical(p),n.copy(m).multiplyScalar(-1)},this.interpolate=function(t,i,r){var n=new THREE.Vector3,a=new THREE.Vector3,o=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,u=t.animPos,c=t.animTarget,h=(t.animDir,t.animUp),d=t.animFocal,f=t.zoom,p=i.animPos,m=i.animTarget,v=(i.animDir,i.animUp),g=i.animFocal,y=i.zoom;return e.sphericalInterpolate(u,c,p,m,n,r),e.linearInterpolate(h,v,a,r,.9995),e.linearInterpolatePosition(c,m,o,r),e.linearInterpolatePosition(d,g,s,r),e.linearInterpolatePosition(f,y,l,r),{animDir:n,animUp:a,animTarget:o,animFocal:s,zoomScale:l}}},s.CameraAnimator=function(){var e=500,t=13,i=new s.Animation;this.setDuration=function(t){e=t},this.getDuration=function(){return e},this.setFrameTime=function(e){t=e},this.setStandardView=function(r,n,a,o,l,u){var c=n.camera,h=c.position.clone(),d=c.target.clone(),f=c.getWorldDirection().clone();f.normalize();var p=new THREE.Vector3;p.copy(c.realUp||c.up),p.normalize();var m=new THREE.Vector3(c.position.clone().sub(d).length(),0,0),v=c.setStandardView(r,a),g=n.camera.clone();v=g.zoomToBBox(a,o);var y=g.position.clone(),M=g.getWorldDirection().clone();M.normalize();var E=new THREE.Vector3;E.copy(g.realUp||g.up),E.normalize();var b=new THREE.Vector3(g.position.clone().sub(v).length(),0,0);n.getEditorManager().setInteractiveState(!1),i.from({animPos:h,animDir:f,animUp:p,animTarget:d,animFocal:m,zoom:1}).to({animPos:y,animDir:M,animUp:E,animTarget:v,animFocal:b,zoom:1},e).onUpdate(function(){var e=this.animTarget,t=this.animDir,i=this.animUp,r=this.animFocal.x;n.camera.LookAt(e,t,i,r),n.cameraControl.update(!0,!0),n.modelManager.dispatchEvent({type:s.EVENTS.ON_CAMERA_ANIMATION_UPDATE}),l&&l()}).onComplete(function(){n.camera.LookAt(v,M,E,b.x),n.cameraControl.update(!0,!0),u&&u(),n.getEditorManager().setInteractiveState(!0)}).start(t)},this.active=function(r,n,a,o,l){var u=a.camera,c=new THREE.Vector3(r.position.x,r.position.y,r.position.z),h=new THREE.Vector3(r.target.x,r.target.y,r.target.z),d=new THREE.Vector3(h.distanceTo(c),0,0),f=h.clone().sub(c).normalize(),p=new THREE.Vector3(r.up.x,r.up.y,r.up.z);p.normalize();var m=new THREE.Vector3(r.zoom),v=new THREE.Vector3(n.position.x,n.position.y,n.position.z),g=new THREE.Vector3(n.target.x,n.target.y,n.target.z),y=new THREE.Vector3(g.distanceTo(v),0,0),M=g.clone().sub(v).normalize(),E=new THREE.Vector3(n.up.x,n.up.y,n.up.z);E.normalize();var b=new THREE.Vector3(n.zoom,0,0);if(0==function(){var e=v.clone().sub(c).length()<.01,t=M.clone().sub(f).length()<.01,i=E.clone().sub(p).length()<.01;return!(e&&t&&i)}())return console.log("Current camera status is equal with before."),void(l&&l());a.getEditorManager().setInteractiveState(!1),i.from({animPos:c,animDir:f,animUp:p,animTarget:h,animFocal:d,zoom:m}).to({animPos:v,animDir:M,animUp:E,animTarget:g,animFocal:y,zoom:b},e).onUpdate(function(){var e=this.animTarget,t=this.animDir,i=this.animUp,r=this.animFocal.x,n=this.zoomScale.x;u.setZoom(n),u.LookAt(e,t,i,r),a.modelManager.dispatchEvent({type:s.EVENTS.ON_CAMERA_ANIMATION_UPDATE}),o&&o(e)}).onComplete(function(){u.setZoom(b.x),u.LookAt(g,M,E,y.x),o&&o(g),l&&l(),a.getEditorManager().setInteractiveState(!0)}).start(t)}},s.CameraInfo=function(e,t,i,r,n,a,o,s,l,u){this.name=e,this.position=t,this.target=i,this.up=r,this.near=n,this.far=a,this.zoom=o,this.frustumWidth=l,this.frustumHeight=u,this.version=void 0===s?1:s},s.PerspectiveCameraInfo=function(e,t,i,r,n,a,o,l,u,c,h){s.CameraInfo.call(this,"persp",e,t,i,a,o,l,u,c,h),this.fov=r,this.aspect=n},s.OrthographicCameraInfo=function(e,t,i,r,n,a,o,l,u,c,h,d,f){s.CameraInfo.call(this,"orth",e,t,i,l,u,c,h,d,f),this.left=r,this.right=n,this.top=a,this.bottom=o},s.CameraUtil={createCameraInfo:function(e){var t=e.camera,i=new CameraInfo(e.getCameraName(),t.position,t.target,t.up);return JSON.stringify(i)},transformCamera:function(e,t){var i=new THREE.Vector3,r=function(e){return[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])]};i.fromArray(r(e.position.split(",")));var n=new THREE.Vector3;n.fromArray(r(e.direction.split(",")));var a=new THREE.Vector3;a.fromArray(r(e.up.split(",")));var o=new THREE.Vector3;o.addVectors(i,n),i.applyMatrix4(t.rootNode.matrix),o.applyMatrix4(t.rootNode.matrix);var l=new THREE.Matrix4;return l.makeRotationFromEuler(t.rootNode.rotation),a.applyMatrix4(l),a.normalize(),new s.CameraInfo(e.name,i,o,a)},parseCameraInfo:function(e){if(!e)return null;var t=JSON.parse(e);if(!t.hasOwnProperty("position")||!t.hasOwnProperty("target")||!t.hasOwnProperty("up"))return null;var i=t.name||"persp",r=new THREE.Vector3;r.x=t.position.x,r.y=t.position.y,r.z=t.position.z;var n=new THREE.Vector3;n.x=t.target.x,n.y=t.target.y,n.z=t.target.z;var a=new THREE.Vector3;a.x=t.up.x,a.y=t.up.y,a.z=t.up.z;var o=void 0===t.version?0:t.version,l=t.frustumWidth,u=t.frustumHeight;return"persp"===i?new s.PerspectiveCameraInfo(r,n,a,t.fov,t.aspect,t.near,t.far,t.zoom,o,l,u):new s.OrthographicCameraInfo(r,n,a,t.left,t.right,t.top,t.bottom,t.near,t.far,t.zoom,o,l,u)},canvasToNormalized:function(e,t,i){var r={x:0,y:0,z:0};return r.x=e.x/t*2-1,r.y=-e.y/i*2+1,r.z=e.z||0,r},normalizedToCanvas:function(e,t,i){var r={x:0,y:0,z:0};return r.x=Math.floor(.5*(e.x+1)*t+.5),r.y=Math.floor(-.5*(e.y-1)*i+.5),r.z=e.z||0,r},drawingToCanvas:function(e,t,i,r){var n=new THREE.Vector3(t.x,t.y,t.z);return n.project(e),this.normalizedToCanvas(n,i,r)},drawingPointsToCanvas:function(e,t,i,r,n){var a={},o=(new THREE.Matrix4).getInverse(e.matrixWorld),s=new THREE.Vector3(t.x,t.y,t.z);s.applyMatrix4(o);var l=new THREE.Vector3(i.x,i.y,i.z);if(l.applyMatrix4(o),s.z>0&&l.z>0)return null;var u=s.clone().sub(l);if(u.normalize(),s.z>0){var c=(s.z+e.near)/u.z;s.sub(u.multiplyScalar(c))}else if(l.z>0){var c=(l.z+e.near)/u.z;l.sub(u.multiplyScalar(c))}return s.applyMatrix4(e.projectionMatrix),l.applyMatrix4(e.projectionMatrix),a.start=this.normalizedToCanvas(s,r,n),a.end=this.normalizedToCanvas(l,r,n),a},lineIntersectWithRect:function(e,t){if(e&&e.start.x==e.end.x&&e.start.y==e.end.y)return console.log("Invalid line."),null;var i=0,r=0;e.start.x!=e.end.x&&(i=(e.start.y-e.end.y)/(e.start.x-e.end.x)),r=e.start.y-i*e.start.x;var n=[],a=t.min,o=t.max;return i*a.x+r>=a.y&&i*a.x+r<=o.y&&n.push(new THREE.Vector2(a.x,i*a.x+r)),i*o.x+r>=a.y&&i*o.x+r<=o.y&&n.push(new THREE.Vector2(o.x,i*o.x+r)),0==i&&(n.push(new THREE.Vector2(a.x,r)),n.push(new THREE.Vector2(o.x,r))),(a.y-r)/i>a.x&&(a.y-r)/i<o.x&&n.push(new THREE.Vector2((a.y-r)/i,a.y)),(o.y-r)/i>a.x&&(o.y-r)/i<o.x&&n.push(new THREE.Vector2((o.y-r)/i,o.y)),n},canvasToDrawing:function(e,t,i,r){var n=this.canvasToNormalized(t,i,r),a=new THREE.Vector3(n.x,n.y,n.z);return a.unproject(e),{x:a.x,y:a.y,z:a.z}},intersectBoxByRay:function(e,t){var i,r,n,a,o,s,l=1/e.direction.x,u=1/e.direction.y,c=1/e.direction.z,h=e.origin;return l>=0?(i=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(i=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(n=(t.min.y-h.y)*u,a=(t.max.y-h.y)*u):(n=(t.max.y-h.y)*u,a=(t.min.y-h.y)*u),i>a||n>r?null:((n>i||i!==i)&&(i=n),(a<r||r!==r)&&(r=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),i>s||o>r?null:((o>i||i!==i)&&(i=o),(s<r||r!==r)&&(r=s),r<0?null:i>=0?i:r))},intersectObjectWithFrustum:function(){var e=new THREE.Box3;return function(t,i){if(!t.boundingBox||t instanceof THREE.Mesh){var r=t.geometry;null===r.boundingBox&&r.computeBoundingBox(),e.copy(r.boundingBox)}else e.copy(t.boundingBox);return e.applyMatrix4(t.matrixWorld),i.intersectsBox(e)}}(),equalsCamera:function(e,t){var i=s.Math.EPSILON15;return s.Math.equalsEpsilonVec3(e.position,t.position,i)&&s.Math.equalsEpsilonVec3(e.up,t.up,i)&&s.Math.equalsEpsilonVec3(e.realUp,t.realUp,i)&&s.Math.equalsEpsilonVec3(e.getWorldDirection(),t.getWorldDirection(),i)&&s.Math.equalsEpsilonFrustum(e.frustum,t.frustum,i)}},function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=e;return i.postProcessMap=null,i.postProcessAdditiveMap=null,i.viewport={w:0,h:0},i.isPostOnly=!0,THREE.ShaderChunk.fog_pars_fragment="\n                #ifdef USE_FOG\n                    uniform vec3 fogColor;\n                    uniform sampler2D postProcessMap;\n                    uniform sampler2D postProcessAdditiveMap;\n                    uniform float postProcessMixRate;\n                    uniform float postProcessAdditiveRate;\n                    uniform float viewportWidth;\n                    uniform float viewportHeight;\n                    varying float fogDepth;\n\n                    #ifdef FOG_EXP2\n                        uniform float fogDensity;\n                    #else\n                        uniform float fogNear;\n                        uniform float fogFar;\n                    #endif\n\n                    #include <postprocess_mix_minus_color>\n                #endif\n                ",THREE.ShaderChunk.fog_fragment="\n                #ifdef USE_FOG\n                    #if ! defined( USE_POST_ONLY )\n                        #ifdef FOG_EXP2\n                            float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n                        #else\n                            float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n                        #endif\n                        gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n                    #endif\n                    vec2 postUV = vec2(gl_FragCoord.x/viewportWidth,gl_FragCoord.y/viewportHeight);\n\n                    if(postProcessAdditiveRate> 0.0){\n                        vec4 postAdditiveColor = texture2D( postProcessAdditiveMap, postUV );\n//                      gl_FragColor.rgba = postAdditiveColor.rgba;\n//                      gl_FragColor.rgb = postprocess_mix_minus_color(postAdditiveColor, vec3(1.0));\n                        gl_FragColor.rgb = postprocess_mix_minus_color(postAdditiveColor, gl_FragColor.rgb);\n                    }\n                    if ( postProcessMixRate > 0.0 ) {\n                        vec4 postColor = texture2D( postProcessMap, postUV );\n//                      gl_FragColor.rgba = postColor.rgba;\n//                      gl_FragColor.rgb = vec3(postColor.a);\n//                      gl_FragColor.rgb = vec3(0.0);\n                        if ( postColor.a>0.0) {\n                            gl_FragColor.rgb = mix( gl_FragColor.rgb, postColor.rgb, postColor.a);\n                        }\n                    }\n                #endif\n                ",THREE.ShaderChunk.postprocess_mix_color="\n                vec4 mix_color(vec4 originalColor, vec3 mixColor, float mixNum){\n                    float _mixNum = 1.0-(1.0-mixNum)*(1.0-originalColor.a);\n                    if ( _mixNum==0.0 ) {\n                        return originalColor;\n                    }\n                   vec3 _color = mix(originalColor.rgb*originalColor.a,mixColor, mixNum)/_mixNum;\n                   return vec4(_color,_mixNum);\n                }\n                ",THREE.ShaderChunk.postprocess_original_color="\n                vec4 get_original_color(sampler2D tDiffuse, vec2 v_textureCoordinates, float firstFlg){\n                   vec4 color = texture2D(tDiffuse, v_textureCoordinates);\n                    if(firstFlg==0.0) {\n                       color = vec4(0.0);\n                    }\n                    return color;\n                }\n                ",THREE.ShaderChunk.postprocess_minus_color="\n                vec4 postprocess_minus_color(vec3 originalColor, vec3 texColor){\n                    float fragColor_a = 0.0;\n                    float fragColor_r = originalColor.r-texColor.r;\n                    float fragColor_g = originalColor.g-texColor.g;\n                    float fragColor_b = originalColor.b-texColor.b;\n                    if(fragColor_r <0.0){\n                        fragColor_a+=0.1;\n                    }\n                    if(fragColor_g <0.0){\n                        fragColor_a+=0.2;\n                    }\n                    if(fragColor_b <0.0){\n                        fragColor_a+=0.4;\n                    }\n                    return vec4(abs(fragColor_r), abs(fragColor_g), abs(fragColor_b),fragColor_a);\n                }\n                ",THREE.ShaderChunk.postprocess_mix_minus_color="\n                vec3 postprocess_mix_minus_color(vec4 originalColor, vec3 addColor){\n                    float fragColor_r = originalColor.r;\n                    float fragColor_g = originalColor.g;\n                    float fragColor_b = originalColor.b;\n                    float fragColor_a = originalColor.a;\n\n                    if(fragColor_a>0.35){\n                        fragColor_b=addColor.b-fragColor_b;\n                        fragColor_a=fragColor_a - 0.4;\n                    }else{\n                        fragColor_b +=addColor.b;\n                    }\n                    if(fragColor_b<0.0){\n                        fragColor_b=0.0;\n                    }\n\n                    if(fragColor_a>0.15){\n                        fragColor_g=addColor.g-fragColor_g;\n                        fragColor_a=fragColor_a-0.2;\n                    }else{\n                        fragColor_g +=addColor.g;\n                    }\n                   if(fragColor_g<0.0){\n                        fragColor_g=0.0;\n                    }\n\n                    if(fragColor_a > 0.05){\n                        fragColor_r=addColor.r-fragColor_r;\n                    }else{\n                        fragColor_r +=addColor.r;\n                    }\n                    if(fragColor_r<0.0){\n                        fragColor_r=0.0;\n                    }\n\n                    return vec3(fragColor_r,fragColor_g,fragColor_b);\n                }\n                ",e}return _inherits(t,e),_createClass(t,[{key:"setPostProcessMap",value:function(e){this.postProcessMap=e}},{key:"setPostProcessAdditiveMap",value:function(e){this.postProcessAdditiveMap=e}},{key:"setViewport",value:function(e,t){var i=this;i.viewport.w=e,i.viewport.h=t}},{key:"destroy",value:function(){var e=this;e.postProcessMap=null,e.postProcessAdditiveMap=null,e.isPostOnly=null,e.viewport=null}}]),t}(THREE.Fog);s.PostProcess=e}();var v=new THREE.Vector3,g=new THREE.Vector3;THREE.WebGLAnimation=function(){function e(n,a){!1!==i&&(r(n,a),t.requestAnimationFrame(e))}var t=null,i=!1,r=null;return{start:function(){!0!==i&&null!==r&&(t.requestAnimationFrame(e),i=!0)},stop:function(){i=!1},setAnimationLoop:function(e){r=e},setContext:function(e){t=e}}},THREE.WebVRManager=function(e){function t(){return null!==c&&!0===c.isPresenting}function i(){if(t()){var i=c.getEyeParameters("left");s=2*i.renderWidth*v,l=i.renderHeight*v,T=e.getPixelRatio(),e.getSize(w),e.setDrawingBufferSize(s,l,1),b.viewport.set(0,0,s/2,l),x.viewport.set(s/2,0,s/2,l),S.start(),u.dispatchEvent({type:"sessionstart"})}else u.enabled&&e.setDrawingBufferSize(w.width,w.height,T),S.stop(),u.dispatchEvent({type:"sessionend"})}function r(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),i=0,r=0,n=t.length;i<n;i++){var a=t[i];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("HTC Vive Focus")||a.id.startsWith("Spatial Controller"))){if(r===e)return a;r++}}}function n(){for(var e=0;e<f.length;e++){var t=f[e],i=r(e);if(void 0!==i&&void 0!==i.pose){if(null===i.pose)return;var n=i.pose;!1===n.hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(p),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var a="Daydream Controller"===i.id?0:1;void 0===C[e]&&(C[e]=!1),C[e]!==i.buttons[a].pressed&&(C[e]=i.buttons[a].pressed,!0===C[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}function o(e,t){null!==t&&4===t.length&&e.set(t[0]*s,t[1]*l,t[2]*s,t[3]*l)}var s,l,u=this,c=null,h=null,d=null,f=[],p=new THREE.Matrix4,m=new THREE.Matrix4,v=1,g="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(h=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",i,!1));var y=new THREE.Matrix4,M=new THREE.Quaternion,E=new THREE.Vector3,b=new THREE.PerspectiveCamera;b.viewport=new THREE.Vector4,b.layers.enable(1);var x=new THREE.PerspectiveCamera;x.viewport=new THREE.Vector4,x.layers.enable(2);var I=new THREE.ArrayCamera([b,x]);I.layers.enable(1),I.layers.enable(2),I.enabled=!0;var T,w=new THREE.Vector2,C=[];this.enabled=!1,this.getController=function(e){var t=f[e];return void 0===t&&(t=new THREE.Group,t.matrixAutoUpdate=!1,t.visible=!1,f[e]=t),t},this.getDevice=function(){return c},this.setDevice=function(e){void 0!==e&&(c=e),S.setContext(e)},this.setFramebufferScaleFactor=function(e){v=e},this.setReferenceSpaceType=function(e){g=e},this.setPoseTarget=function(e){void 0!==e&&(d=e)},this.getCamera=function(e){var i="local-floor"===g?1.6:0;if(!1===t())return e.position.set(0,i,0),e.rotation.set(0,0,0),e;if(c.depthNear=e.near,c.depthFar=e.far,c.getFrameData(h),"local-floor"===g){var r=c.stageParameters;r?p.fromArray(r.sittingToStandingTransform):p.makeTranslation(0,i,0)}var s=h.pose,l=null!==d?d:e;l.matrix.copy(p),l.matrix.decompose(l.position,l.quaternion,l.scale),null!==s.orientation&&(M.fromArray(s.orientation),l.quaternion.multiply(M)),null!==s.position&&(M.setFromRotationMatrix(p),E.fromArray(s.position),E.applyQuaternion(M),l.position.add(E)),l.updateMatrixWorld(),b.near=e.near,x.near=e.near,b.far=e.far,x.far=e.far,b.matrixWorldInverse.fromArray(h.leftViewMatrix),x.matrixWorldInverse.fromArray(h.rightViewMatrix),m.getInverse(p),"local-floor"===g&&(b.matrixWorldInverse.multiply(m),x.matrixWorldInverse.multiply(m));var u=l.parent;null!==u&&(y.getInverse(u.matrixWorld),b.matrixWorldInverse.multiply(y),x.matrixWorldInverse.multiply(y)),b.matrixWorld.getInverse(b.matrixWorldInverse),x.matrixWorld.getInverse(x.matrixWorldInverse),b.projectionMatrix.fromArray(h.leftProjectionMatrix),x.projectionMatrix.fromArray(h.rightProjectionMatrix),a(I,b,x);var f=c.getLayers();if(f.length){var v=f[0];o(b.viewport,v.leftBounds),o(x.viewport,v.rightBounds)}return n(),I},this.getStandingMatrix=function(){return p},this.isPresenting=t;var S=new THREE.WebGLAnimation;this.setAnimationLoop=function(e){S.setAnimationLoop(e),t()&&S.start()},this.submitFrame=function(){t()&&c.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",i)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}},Object.assign(THREE.WebVRManager.prototype,THREE.EventDispatcher.prototype),THREE.WebXRManager=function(e,t){function i(){return null!==c&&null!==h}function r(e){for(var t=0;t<p.length;t++)m[t]===e.inputSource&&p[t].dispatchEvent({type:e.type})}function n(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),E.stop(),u.dispatchEvent({type:"sessionend"})}function o(e){h=e,E.setContext(c),E.start(),u.dispatchEvent({type:"sessionstart"})}function s(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}function l(t,i){if(null!==(f=i.getViewerPose(h))){var r=f.views,n=c.renderState.baseLayer;e.setFramebuffer(n.framebuffer);for(var a=0;a<r.length;a++){var o=r[a],s=n.getViewport(o),l=o.transform.inverse.matrix,u=y.cameras[a];u.matrix.fromArray(l).getInverse(u.matrix),u.projectionMatrix.fromArray(o.projectionMatrix),u.viewport.set(s.x,s.y,s.width,s.height),0===a&&y.matrix.copy(u.matrix)}}for(var a=0;a<p.length;a++){var d=p[a],v=m[a];if(v){var g=i.getPose(v.targetRaySpace,h);if(null!==g){d.matrix.fromArray(g.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.visible=!0;continue}}d.visible=!1}M&&M(t)}var u=this,c=null,h=null,d="local-floor",f=null,p=[],m=[],v=new THREE.PerspectiveCamera;v.layers.enable(1),v.viewport=new THREE.Vector4;var g=new THREE.PerspectiveCamera;g.layers.enable(2),g.viewport=new THREE.Vector4;var y=new THREE.ArrayCamera([v,g]);y.layers.enable(1),y.layers.enable(2),y.enabled=!0,this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&(t=new THREE.Group,t.matrixAutoUpdate=!1,t.visible=!1,p[e]=t),t},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){d=e},this.getSession=function(){return c},this.setSession=function(e){null!==(c=e)&&(c.addEventListener("select",r),c.addEventListener("selectstart",r),c.addEventListener("selectend",r),c.addEventListener("end",n),c.updateRenderState({baseLayer:new XRWebGLLayer(c,t)}),c.requestReferenceSpace(d).then(o),m=c.inputSources,c.addEventListener("inputsourceschange",function(){m=c.inputSources;for(var e=0;e<p.length;e++){p[e].userData.inputSource=m[e]}}))},this.getCamera=function(e){if(i()){var t=e,r=y.cameras;s(y,t);for(var n=0;n<r.length;n++)s(r[n],t),r[n].position.setFromMatrixPosition(r[n].matrixWorld);e.matrixWorld.copy(y.matrixWorld);for(var o=e.children,n=0,l=o.length;n<l;n++)o[n].updateMatrixWorld(!0);return v.near=e.near,v.far=e.far,v.updateProjectionMatrix(),g.near=e.near,g.far=e.far,g.updateProjectionMatrix(),a(y,v,g),y}return e},this.isPresenting=i;var M=null,E=new THREE.WebGLAnimation;E.setAnimationLoop(l),this.setAnimationLoop=function(e){M=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}},Object.assign(THREE.WebXRManager.prototype,THREE.EventDispatcher.prototype),function(){var e=function(){function e(t,i){if(_classCallCheck(this,e),this.manager=t,this.viewer=t.viewer,this.countRenderRequest=0,this.maxCountRenderRequest=1e4,this.rendering=!1,this.incrementRenderHandle=0,this.renderer=new THREE.WebGLRendererByIncrement(i),this.orderedRenderer=new s.OrderedRenderer,this.renderer.setRenderer(this.orderedRenderer),this.renderer.setRenderTicket(0),this.depthPass=new s.DepthRenderPass(this.viewer.modelManager),s.GlobalData.EnableShadowMap){this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.renderSingleSided=!1,this.renderer.shadowMap.needsUpdate=!0;this.viewer.getScene().lightManager.shadowLightNum++}}return _createClass(e,[{key:"destroy",value:function(){this.incrementRenderHandle>0&&cancelAnimationFrame(this.incrementRenderHandle),this.renderer&&(this.renderer.destroy&&this.orderedRenderer&&(this.renderer.destroy(),this.renderer.setRenderer&&this.renderer.setRenderer(null),this.orderedRenderer=null),this.renderer.dispose(),this.renderer.domElement.parentNode&&this.renderer.domElement.parentNode.removeChild(this.renderer.domElement),this.renderer=null),this.viewer=null,this.manager=null}},{key:"forceRenderOneFrame",value:function(){
var e=this.viewer,t=e.camera,i=e.modelManager.getScene();this.orderedRenderer.restart(),this.orderedRenderer.setNonBreakingRender(!0),this.renderer.render(i,t,null,!0),this.orderedRenderer.setNonBreakingRender(!1)}},{key:"_render",value:function(){function e(s,h){var d=s;return function(){l.autoClear=h,a.cameraChange?(l.resetIncrementRender(),l.autoClear=!0,a.cameraChange=!1,t.orderedRenderer.forceClear=!0,i.getIBLManager().renderWithOrthCamera(i,l,u)):(l.autoClear=h,t.orderedRenderer.forceClear=h||t.orderedRenderer.forceClear),l.render(o,r)||d!==t.countRenderRequest?(t.rendering=!1,d!==t.countRenderRequest?i.render():(t.pickingEffectRendering=!0,t._applyPickingEffect(),n.setFilterApplied(!1),i.onRenderFinishedCallback(),n.disposeBufferAfterVbo(),t.pickingEffectRendering=!1,l.autoClear=c)):t.incrementRenderHandle=requestAnimationFrame(e(d,!1))}}if(this.manager.prepareRender()&&(++this.countRenderRequest,this.countRenderRequest>this.maxCountRenderRequest&&(this.countRenderRequest=0),!this.rendering&&!this.pickingEffectRendering)){this.rendering=!0;var t=this,i=this.viewer,r=i.camera,n=i.modelManager,a=i.editorManager,o=i.getScene(),l=this.renderer;n.calculateCameraModelRelation(r.position),i.calculateNearFar(),i.cameraControl.updateCamera(),o.updateLights(r,i);var u=a.isUpdateRenderList;l.resetIncrementRender(),l.setObjectListUpdateState(u);var c=l.autoClear;u&&n.prepareScene(r),i.onCallbacks(s.EnumRenderCallbackType.PRE_RENDER),i.getIBLManager().renderWithOrthCamera(i,l,u),this.incrementRenderHandle=requestAnimationFrame(e(t.countRenderRequest,l.autoClear)),i.onRenderCallback(),i.cameraControl.setCameraChanging(!1)}}},{key:"render",value:function(e){this._render(e)}},{key:"renderDepth",value:function(e,t,i,r){this.depthPass.renderDepth(e,t,i,r)}},{key:"renderCustomDepth",value:function(e,t,i,r,n){this.depthPass.renderCustomDepth(e,t,i,r,n)}},{key:"renderCustomDepthWithoutDEM",value:function(e,t,i,r){this.depthPass.renderCustomDepthWithoutDEM(e,t,i,r)}},{key:"_applyPickingEffect",value:function(){var e=this.manager.getPickingEffecter();if(e){var t=this.viewer.modelManager.isFilterApplied();this.orderedRenderer.restart(),this.orderedRenderer.setNonBreakingRender(!0),e.apply(t),this.orderedRenderer.setNonBreakingRender(!1)}}},{key:"setSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"getSize",value:function(){return this.renderer.getSize()}}]),e}();s.IncrementedRenderer=e}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.manager=t,this.viewer=t.viewer,this.composer=null,this.isBatched=!0,this.renderer=new THREE.WebGLRenderer(i);var r=this.viewer;if(this.viewportWidth=r.domElement.offsetWidth,this.viewportHeight=r.domElement.offsetHeight,this.depthPass=new s.DepthRenderPass(this.viewer.modelManager),s.GlobalData.EnableShadowMap){this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.renderSingleSided=!1,this.renderer.shadowMap.needsUpdate=!0;this.viewer.getScene().lightManager.shadowLightNum++}}return _createClass(e,[{key:"destroy",value:function(){this.composer&&(this.composer.destroy(),this.composer=null),this.renderer&&(this.renderer.dispose(),this.renderer.domElement.parentNode&&this.renderer.domElement.parentNode.removeChild(this.renderer.domElement),this.renderer=null),this.viewer=null,this.manager=null}},{key:"_createComposer",value:function(){var e=this.viewer;this.renderer.shadowMap.enabled=!0,this.composer=new s.RenderEffectComposer(this.renderer),this.composer.init(e,this.viewportWidth,this.viewportHeight)}},{key:"_checkPostProcess",value:function(){return s.GlobalData.EnableSnowPass||s.GlobalData.EnableFogPass||s.GlobalData.EnableRainPass||s.GlobalData.EnableSkylinePass||s.GlobalData.ScanRingCount>0||s.GlobalData.EnableGlow&&s.GlobalData.GlowCount>0||s.GlobalData.EnableGlow&&s.GlobalData.HighLightOutlineCount>0||s.GlobalData.SSAO}},{key:"_render",value:function(e){function t(){var e=a.getObjectGroup(s.ObjectGroupType.GLOBALEARTH);if(e&&e.visible){for(var t=a.getObjectGroups(),i=0;i<t.length;i++){var r=t[i];r.preVisible=r.visible,r.visible=!1}e.visible=!0,c.shadowMap.needsUpdate=!1,c.render(a,l)}}function i(){if(n.globalRendering)return void t();null!=n.scissorViewportManager&&n.scissorViewportManager.isEmbeddedView()?n.scissorViewportManager.setViewRegionRender(c,a,l):c.render(a,l),s.GroundPrimitiveManager.getInstance().render(c,l)}function r(){var e=c.autoClear,t=l.near,r=l.far,h=s.ExtrudeBodyManager.getInstance(n)._getNodeGroupVisible();a.fillClipPlane&&a.fillClipPlane.updateCamera(n),n.getIBLManager().renderWithOrthCamera(n,c),s.ExtrudeBodyManager.getInstance(n)._setNodeGroupVisible(!1),i(),c.autoClear=e,s.ExtrudeBodyManager.getInstance(n)._setNodeGroupVisible(h),s.ExtrudeBodyManager.getInstance(n).applyFrontEffect(c,a,l),o._applyPickingEffect(),l.setNearFar(t,r),n.cameraControl.updateCamera(),u.setFilterApplied(!1)}var n=this.viewer,a=n.getScene();if(this.manager.prepareRender()){var o=this,l=n.camera,u=n.modelManager,c=this.renderer;!function(){u.calculateCameraModelRelation(l.position),n.calculateNearFar();var e=l.dirty;if(n.cameraControl.updateCamera(),a.updateLights(l,n),u.prepareScene(l,function(){u.setRenderStateChanged(!0),n.render()}),u.blinkManager.getBlinkEnabled()&&u.blinkManager.updateBlinkMaterial(),n.onCallbacks(s.EnumRenderCallbackType.PRE_RENDER),a.fillClipPlane&&s.GlobalData.ClippingCaps&&!u.isMeterUnit()){var t=c.autoClear,h=l.near,d=l.far,f=s.ExtrudeBodyManager.getInstance(n)._getNodeGroupVisible(),p=a.getObjectGroup(s.GlobalData.TilePlaneGroupName);p&&(p.preVisible=p.visible,p.visible=!1),u.prepareCapScene(),c.clear(),n.getIBLManager().renderWithOrthCamera(n,c),c.autoClear=!1,a.fillClipPlane.updateCamera(n);var m=c.context,v=c.state;v.buffers.stencil.setTest(!0),v.buffers.stencil.setFunc(m.ALWAYS,1,255),v.buffers.stencil.setOp(m.KEEP,m.KEEP,m.INCR),a.overrideMaterial=a.backMaterial,a.backFrontStencil=!0,c.render(a,l),v.buffers.stencil.setFunc(m.ALWAYS,1,255),v.buffers.stencil.setOp(m.KEEP,m.KEEP,m.DECR),a.overrideMaterial=a.frontMaterial,c.render(a,l),a.backFrontStencil=!1,v.buffers.stencil.setFunc(m.LEQUAL,1,255),v.buffers.stencil.setOp(m.KEEP,m.KEEP,m.KEEP),c.render(u.capsScene,l),v.buffers.stencil.setTest(!1),a.overrideMaterial=null,p&&(p.visible=p.preVisible),n.heightLimitManager&&n.heightLimitManager.render(c),c.render(a,l),s.ExtrudeBodyManager.getInstance(n)._setNodeGroupVisible(!1),o._checkPostProcess()?(null==o.composer&&o._createComposer(),o.composer.updateEnabled(),o.composer.conventionFn=function(){i()},o.composer.checkRender()):(null!=o.composer&&(o.composer.destroy(),o.composer=null),i()),l.setNearFar(h,d),n.cameraControl.updateCamera(),c.autoClear=t,s.ExtrudeBodyManager.getInstance(n)._setNodeGroupVisible(f),s.ExtrudeBodyManager.getInstance(n).applyFrontEffect(c,a,l),o._applyPickingEffect(),u.setFilterApplied(!1)}else n.terrainOperationManager.render(c),n.heightLimitManager&&n.heightLimitManager.render(c),n.refleRefraManager&&n.refleRefraManager.render(c),s.ClipRegionManager.isReverse&&a.clipRegion&&u.isMeterUnit()&&s.ClipPlanesTool.updateClippingParams(n,a.clipRegion.uniforms,!0),o._checkPostProcess()?(null==o.composer&&o._createComposer(),o.composer.updateEnabled(),o.composer.conventionFn=function(){r()},o.composer.checkRender()):(null!=o.composer&&(o.composer.destroy(),o.composer=null),r());n.onRenderCallback(),n.onRenderFinishedCallback(),(n.cameraControl.isCameraChanging()||e)&&u.dispatchEvent({type:s.EVENTS.ON_CAMERA_CHANGED_AND_RENDERED}),n.cameraControl.setCameraChanging(!1),u.disposeBufferAfterVbo()}()}}},{key:"render",value:function(e){this._render(e)}},{key:"renderDepth",value:function(e,t,i,r){this.depthPass.renderDepth(e,t,i,r)}},{key:"renderCustomDepth",value:function(e,t,i,r,n){this.depthPass.renderCustomDepth(e,t,i,r,n)}},{key:"renderCustomDepthWithoutDEM",value:function(e,t,i,r){this.depthPass.renderCustomDepthWithoutDEM(e,t,i,r)}},{key:"setSize",value:function(e,t){this.viewportWidth=e,this.viewportHeight=t,this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setSize(this.viewportWidth,this.viewportHeight),this.composer&&this.composer.setSize(this.viewportWidth,this.viewportHeight)}},{key:"getSize",value:function(){return this.renderer.getSize()}},{key:"_applyPickingEffect",value:function(){var e=this.manager.getPickingEffecter();if(e){var t=this.viewer.modelManager.isFilterApplied();e.apply(t)}}},{key:"forceRenderOneFrame",value:function(){var e=this.viewer,t=e.camera,i=e.modelManager.getScene();this.renderer.render(i,t,null,!0)}}]),e}();s.BatchedRenderer=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.fps=i.fps||0,r._running=!1,r._paused=!1,r._destroyed=!1,r._showRenderErrors=!0,r._renderRequested=!0,r._frameState=new s.FrameState,r._preRenderLoopType=void 0,r._renderLoopHandel=null,r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._destroyed=!0,this._frameState=this._frameState.destroy(),this._performanceStats&&(this._performanceStats=this._performanceStats.destroy()),this.stop(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_batchModelRenderLop",value:function(){this._shouldRender()&&(this._renderRequested=!1,this._render(!0))}},{key:"_oocRenderLoop",value:function(){this._beginPerformanceStats();var e=new Date,t=this._frameState;this.updateFrameState(t);var i=this._shouldRender();if(i){this._renderRequested=!1;var r=s.Math.incrementWrap(t.frameNumber,15e6,1);this.updateFrameNumber(r,e),t.newFrame=!0}this.preUpdate(t),i&&this.update(t),this.postUpdate(t),this._callForAfterRender(),this._endPerformanceStats()}},{key:"render",value:function(e){this.requestRender()}},{key:"preUpdate",value:function(e){s.eventsDispatcher.dispatchEvent({type:s.EVENTS.ON_PRE_UPDATE,params:{}});var t=this.viewer.getModelManager();t.traverseValidModels(function(t){t.preUpdate(e)}),t.tilesCacheScheduler.resetTilesCache(e)}},{key:"update",value:function(e){var t=this.viewer.getModelManager();t.tilesCacheScheduler.clearStatistics(),t.traverseValidModels(function(t){t.update(e)}),this.createPotentiallyVisibleSet(),this._render()}},{key:"postUpdate",value:function(e){s.eventsDispatcher.dispatchEvent({type:s.EVENTS.ON_POST_UPDATE,params:{}});var t=this.viewer.getModelManager();t.traverseValidModels(function(t){t.postUpdate(e)}),s.RequestScheduler.update(),t.tilesCacheScheduler.update()}},{key:"createPotentiallyVisibleSet",value:function(){}},{key:"updateFrameNumber",value:function(e,t){var i=this._frameState;i.frameNumber=e,i.time=t}},{key:"updateFrameState",value:function(){var e=this.viewer,t=this._frameState;t.newFrame=!1,t.globalMatrix=e.getScene().getRawMatrixGlobal(),t.globalInverseMatrix=e.getScene().getInverseMatrixGlobal(),t.camera=e.camera,t.cameraPositionWc.copy(t.camera.position).applyMatrix4(t.globalInverseMatrix),t.frustum=t.camera.getFrustum(),t.cameraPreSSE=e.domElement.offsetHeight/t.camera.frustumHeightFactor,t.viewer=this.viewer}},{key:"_callForAfterRender",value:function(){for(var e=this,t=this._frameState.afterRenderFns,i=0,r=t.length;i<r;++i)t[i](),e.requestRender();t.length=0}},{key:"requestRender",value:function(){this._renderRequested=!0}},{key:"start",value:function(e){function t(n){if(!i.isDestroyed()&&(i._running||i._paused))try{var a=i.fps;if(a>0){var o=1e3/a,s=n-r;s>o&&(i.resize(),i._running&&!i._paused&&e.call(i),r=n-s%o),i._renderLoopHandel=requestAnimationFrame(t)}else i.resize(),i._running&&!i._paused&&e.call(i),i._renderLoopHandel=requestAnimationFrame(t)}catch(e){i._running=!1,i._showRenderErrors&&(console.error("An error occurred while rendering. Rendering has stopped."),console.error(e))}}if(!this._running){this._running=!0,this._paused=!1;var i=this,r=0;this._renderLoopHandel=requestAnimationFrame(t)}}},{key:"pause",value:function(e){this._paused=e}},{key:"stop",value:function(){this._running&&(this._running=!1,this._paused=!1),s.Utils.isDefined(this._renderLoopHandel)&&cancelAnimationFrame(this._renderLoopHandel)}},{key:"_isCameraChanged",value:function(){var e=this.viewer.camera,t=this.lastCamera;return void 0===t?(this.lastCamera=e.clone(),!0):!s.CameraUtil.equalsCamera(e,t)&&(t.copy(e),!0)}},{key:"_shouldRender",value:function(){return this._renderRequested||this._isCameraChanged()||this.viewer.getModelManager().isSceneChanged()||this.viewer.getModelManager().blinkManager.getBlinkEnabled()}},{key:"resize",value:function(){}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_getPerformanceStats",value:function(){var e=this.viewer;return e._options.debugShowFPS?(this._performanceStats||(this._performanceStats=new s.PerformanceStats({container:e.domElement})),this._performanceStats):(this._performanceStats&&(this._performanceStats=this._performanceStats.destroy()),null)}},{key:"_beginPerformanceStats",value:function(){var e=this._getPerformanceStats();e&&e.begin()}},{key:"_endPerformanceStats",value:function(){var e=this._getPerformanceStats();e&&e.end()}},{key:"setRenderLoop",value:function(e){e!==this._preRenderLoopType&&(this._preRenderLoopType=e,this.stop(),this.requestRender(!0),e?(console.log("switch to renderer: oocRenderLoop"),this.start(this._oocRenderLoop)):(console.log("switch to renderer: BatchedRendererLoop"),this.start(this._batchModelRenderLop)))}},{key:"frameState",get:function(){return this._frameState}}]),t}(s.BatchedRenderer);s.OoCRenderer=e}(),s.RenderGroup=function(){function e(e,t){return e.material.id!==t.material.id?e.material.id-t.material.id:e.id-t.id}function t(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function i(e,t,i,r,n,a,o){h=Date.now();for(var u=t.length,c=l;c<u;c++){var p=t[c],m=p.object,v=p.material,g=p.group,y=p.geometry;if(m.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,m.matrixWorld),m.normalMatrix.getNormalMatrix(m.modelViewMatrix),y=e.updateObject(m),e.renderBufferDirect(i,n,y,v,m,g),!o&&(d=Date.now(),(f=d-h)>s.GlobalData.LimitFrameTime))return l=c+1,!1}return l=0,!0}var r=[],n=[],a=-1,o=-1,l=0,u=!1,c=!1,h=0,d=0,f=0;this.getOpaqueObjects=function(){return r},this.getTransparentObjects=function(){return n},this.destroy=function(){r=[],n=[]},this.restart=function(){l=0,u=!1,c=!1},this.prepare=function(){this.restart(),a=-1,o=-1},this.renderableCount=function(){return a+o},this.pushRenderItem=function(e,t,i,s,l){var u,c;i.transparent?(u=n,c=++o):(u=r,c=++a);var h=u[c];void 0!==h?(h.id=e.id,h.object=e,h.geometry=t,h.material=i,h.z=s,h.group=l||null):(h={id:e.id,object:e,geometry:t,material:i,z:s,group:l||null},u[c]=h)},this.sortRenderList=function(i){r.length=a+1,n.length=o+1,i&&(r.sort(e),n.sort(t))},this.renderOpaqueObjects=function(e,t,n,a,o,s){return u||(u=i(e,r,t,n,a,o,s)),u},this.renderTransparentObjects=function(e,t,r,a,o,s){return c||(c=i(e,n,t,r,a,o,s)),c}},s.OrderedRenderer=function(){function e(){++o>1e5&&(o=0);for(var e=0,t=d.length;e<t;++e){var i=d[e];void 0!==i&&i.prepare()}}function t(e,t,i,r,n){var a=d[e.renderOrder];void 0===a&&(a=new s.RenderGroup,d[e.renderOrder]=a),a.pushRenderItem(e,t,i,r,n)}function i(){for(var e=0,t=d.length;e<t;++e){var i=d[e];void 0!==i&&i.sortRenderList(l)}}function r(e,i){if(!1===e.visible||!1===e.alive)return!0;if(e._cullTicket!=o){if(!y){if(Date.now()-c>30)return!1}if(e._cullTicket=o,(e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===f.intersectsObject(e))){var n=e.material,a=e.geometry;if(m.setFromMatrixPosition(e.matrixWorld),m.applyMatrix4(p),Array.isArray(n))for(var s=a.groups,l=0,u=s.length;l<u;l++){var h=s[l],d=n[h.materialIndex];d.transparent?t(e,a,d,m.z,h):t(e,a,d,0,h)}else n.transparent?t(e,a,n,m.z):t(e,a,n,0)}}var v=e.children;if(v)for(var l=0,u=v.length;l<u;l++)if(!r(v[l],i))return!1;return!0}function n(t,n,a){if(!v)return void(l=!0);l&&(e(),M.projectLights(t,a)),c=Date.now(),l=r(t,n),i()}function a(){v&&!g||++h,h>1e4&&(h=0)}var o=0,l=!1,u=!1,c=0,h=0,d=[],f=null,p=null,m=new THREE.Vector3,v=!0,g=!0;this.updateObjectList=function(e){v=e};var y=!1;this.setNonBreakingRender=function(e){y=e},this.destroy=function(){for(var e=0,t=d.length;e<t;++e){var i=d[e];void 0!==i&&i.destroy()}},this.restart=function(){for(var e=0,t=d.length;e<t;++e){var i=d[e];void 0!==i&&i.restart()}g=!0,l=!0},this.setFilter=function(e){},this.projectLights=function(e,t){t.length=0,e.traverseVisible(function(e){e.isLight&&t.push(e)})};var M=this;this.update=function(e,t){p=t,f=e},this.render=function(e,t,i,r,o,c,f){if(a(),g){if(s.Logger.time("build object list"),n(t,i,r),s.Logger.timeEnd("build object list"),!l)return!1;c=this.forceClear||e.autoClear,g=!1,this.forceClear=!1,e.setupLights(r,i),e.setRenderTarget(o)}s.Logger.time("increment render object"),(e.autoClear||c)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil,v);var p=t.fog;e.setRenderTicket(h),f.setBlending(THREE.NoBlending);for(var m=d.length-1;m>=0;--m){var M=d[m];if(void 0!==M&&!(u=M.renderOpaqueObjects(e,i,r,p,v,y)))break}if(u)for(var m=d.length-1;m>=0;--m){var M=d[m];if(void 0!==M&&!(u=M.renderTransparentObjects(e,i,r,p,void 0,y)))break}return 0==d.length&&(u=!0),f.buffers.depth.setTest(!0),f.buffers.depth.setMask(!0),f.buffers.color.setMask(!0),s.Logger.timeEnd("increment render object"),u}},s.RenderComposer=function(){function e(){function e(e){e.material.blending=THREE.NoBlending,e.material.depthWrite=!1,e.material.depthTest=!1}n=new s.ShaderPass(FXAAShader),e(n),a=new s.ShaderPass(CopyShader),e(a)}var t,i,r,n,a,o,l,u=null,c=null,h=!1,d=!0,f=!1;this.init=function(i,r,n){if(e(),!i)return void console.log("You need a gl context to make a renderer. Things will go downhill from here.");o=r,l=n,t=i,this.setSize(r,n,!0)},this.cleanup=function(){u&&(u.dispose(),u=null),c&&(c.dispose(),c=null)},this.setSize=function(e,i,r){if(o=e,l=i,0===e&&0===i||!t)return void this.cleanup();var a=0|e*t.getPixelRatio(),s=0|i*t.getPixelRatio(),h=1/a,d=1/s;!r&&u&&u.width==a&&u.height==s||(this.cleanup(),u=new THREE.WebGLRenderTarget(a,s,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1}),u.texture.generateMipmaps=!1,u.texture.name="_color_rt1",c=u.clone(),c.texture.name="_write_rt1"),n.uniforms.uResolution.value.set(h,d)},this.renderIncrement=function(e,n){if(!u&&o)this.setSize();else if(!u&&!o)return;return s.GlobalData.SSAO&&!r&&(r=new THREE.SSAOPass(e,n,o,l)),i=n,d&&(f||(t.resetIncrementRender(),t.setClearColor(0,0),t.clearTarget(u,!0,!0,!1)),d=!1),t.autoClear=!1,h||(h=t.render(e,i,u))&&(a.renderToScreen=!0,t.resetIncrementRender(),a.render(t,null,u)),h},this.render=function(e,n){if(!u&&o)this.setSize();else if(!u&&!o)return;var c=s.GlobalData.SSAO;c&&!r&&(r=new THREE.SSAOPass(e,n,o,l)),i=n,d&&(f||(t.setClearColor(0,0),t.clearTarget(u,!0,!0,!1)),d=!1),t.autoClear=!1,f||t.render(e,i,u);var h=c?r:a;h.renderToScreen=!0,h.render(t,null,u)},this.restart=function(e,t){f=!!e,h=!1,d=!0},this.finish=function(){}},s._renderComposer=new s.RenderComposer,function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.renderer=null,this.pickingEffecter=null}return _createClass(e,[{key:"destroy",value:function(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.pickingEffecter&&(this.pickingEffecter.destroy(),this.pickingEffecter=null),this.viewer=null}},{key:"setupRenderer",value:function(e){if(!this.renderer){var t=this.viewer;s.GlobalData.BatchMergeEnabled?(console.log("renderer: BatchedRenderer"),this.renderer=new s.OoCRenderer(this,e)):(t.modelManager.blinkManager.permitBlink(!0),console.log("renderer: IncrementedRenderer"),this.renderer=new s.IncrementedRenderer(this,e)),this._initRenderer()}}},{key:"prepareRender",value:function(){var e=this.renderer;if(!e)return!1;var t=this.viewer,i=t.modelManager;if(!i.isDrawable())return!1;if(!i.hasModel())return s.Logger.log("model not loaded!"),e.forceRenderOneFrame(),!1;if(s.GlobalData.IBL&&0==t.getIBLManager().textureLoad)return!1;if(t.globalRendering){if(!t.globeEarth)return!1;if(!t.globeEarth.modelLoaded)return!1}return!i.checkLayerDataLoading()&&(t.getScene().fillClipPlane&&s.GlobalData.ClippingCaps&&s.GlobalData.BatchMergeEnabled&&t.setRenderStateChanged(!0),!0)}},{key:"render",value:function(e){this.renderer&&this.renderer.render(e)}},{key:"getRenderer",value:function(){if(this.renderer)return this.renderer.renderer}},{key:"setSize",value:function(e,t){this.renderer&&this.renderer.setSize(e,t)}},{key:"getRendererSize",value:function(){return this.renderer?this.renderer.getSize():{width:0,height:0}}},{key:"getPickingEffecter",value:function(){return s.GlobalData.PickingEffect?(this.pickingEffecter||(this.pickingEffecter=new s.PickingEffecter(this.viewer)),this.pickingEffecter):null}},{key:"_initRenderer",value:function(){var e=this.viewer,t=e.domElement,i=t.offsetWidth,r=t.offsetHeight,n=this.renderer.renderer;this._initVr(n),n.setClearColor(0,0),n.setPixelRatio(window.devicePixelRatio||1),n.setSize(i,r),n.toneMapping=s.GlobalData.ToneMapping,n.gammaFactor=2.2,n.gammaInput=!0,n.gammaOutput=!0,n.domElement.setAttribute("tabindex","0"),n.domElement.setAttribute("id","cloud-main-canvas"),e.domElement.appendChild(n.domElement)}},{key:"_initVr",value:function(e){function t(t){e.vr.enabled&&e.vr.isPresenting()||i&&i(t)}e.vr="undefined"!=typeof navigator?new THREE.WebXRManager(e,e.getContext()):new THREE.WebVRManager(e),e.framebuffer=null;var i=null,r=new THREE.WebGLAnimation;r.setAnimationLoop(t),"undefined"!=typeof window&&r.setContext(window),e.setAnimationLoop=function(t){i=t,e.vr.setAnimationLoop(t),r.start()},e.stopAnimationLoop=function(){r.stop()},e.setFramebuffer=function(t){if(e.framebuffer!==t){e.getContext().bindFramebuffer(36160,t)}e.framebuffer=t}}},{key:"enableVR",value:function(e){this.renderer.renderer.vr.enabled=e}}]),e}();s.RendererManager=e}(),THREE.SimplexNoise=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(var t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]},THREE.SimplexNoise.prototype.dot=function(e,t,i){return e[0]*t+e[1]*i},THREE.SimplexNoise.prototype.dot3=function(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r},THREE.SimplexNoise.prototype.dot4=function(e,t,i,r,n){return e[0]*t+e[1]*i+e[2]*r+e[3]*n},THREE.SimplexNoise.prototype.noise=function(e,t){var i,r,n,a,o,s=.5*(Math.sqrt(3)-1),l=(e+t)*s,u=Math.floor(e+l),c=Math.floor(t+l),h=(3-Math.sqrt(3))/6,d=(u+c)*h,f=u-d,p=c-d,m=e-f,v=t-p;m>v?(a=1,o=0):(a=0,o=1);var g=m-a+h,y=v-o+h,M=m-1+2*h,E=v-1+2*h,b=255&u,x=255&c,I=this.perm[b+this.perm[x]]%12,T=this.perm[b+a+this.perm[x+o]]%12,w=this.perm[b+1+this.perm[x+1]]%12,C=.5-m*m-v*v;C<0?i=0:(C*=C,i=C*C*this.dot(this.grad3[I],m,v));var S=.5-g*g-y*y;S<0?r=0:(S*=S,r=S*S*this.dot(this.grad3[T],g,y));var A=.5-M*M-E*E;return A<0?n=0:(A*=A,n=A*A*this.dot(this.grad3[w],M,E)),70*(i+r+n)},THREE.SimplexNoise.prototype.noise3d=function(e,t,i){var r,n,a,o,s,l,u,c,h,d,f=(e+t+i)*(1/3),p=Math.floor(e+f),m=Math.floor(t+f),v=Math.floor(i+f),g=1/6,y=(p+m+v)*g,M=p-y,E=m-y,b=v-y,x=e-M,I=t-E,T=i-b;x>=I?I>=T?(s=1,l=0,u=0,c=1,h=1,d=0):x>=T?(s=1,l=0,u=0,c=1,h=0,d=1):(s=0,l=0,u=1,c=1,h=0,d=1):I<T?(s=0,l=0,u=1,c=0,h=1,d=1):x<T?(s=0,l=1,u=0,c=0,h=1,d=1):(s=0,l=1,u=0,c=1,h=1,d=0);var w=x-s+g,C=I-l+g,S=T-u+g,A=x-c+2*g,k=I-h+2*g,R=T-d+2*g,B=x-1+.5,L=I-1+.5,O=T-1+.5,P=255&p,D=255&m,N=255&v,_=this.perm[P+this.perm[D+this.perm[N]]]%12,H=this.perm[P+s+this.perm[D+l+this.perm[N+u]]]%12,F=this.perm[P+c+this.perm[D+h+this.perm[N+d]]]%12,U=this.perm[P+1+this.perm[D+1+this.perm[N+1]]]%12,G=.6-x*x-I*I-T*T;G<0?r=0:(G*=G,r=G*G*this.dot3(this.grad3[_],x,I,T));var z=.6-w*w-C*C-S*S;z<0?n=0:(z*=z,n=z*z*this.dot3(this.grad3[H],w,C,S));var j=.6-A*A-k*k-R*R;j<0?a=0:(j*=j,a=j*j*this.dot3(this.grad3[F],A,k,R));var V=.6-B*B-L*L-O*O;return V<0?o=0:(V*=V,o=V*V*this.dot3(this.grad3[U],B,L,O)),32*(r+n+a+o)},THREE.SimplexNoise.prototype.noise4d=function(e,t,i,r){var n,a,o,s,l,u,c,h,d,f,p,m,v,g,y,M,E,b=this.grad4,x=this.simplex,I=this.perm,T=(Math.sqrt(5)-1)/4,w=(5-Math.sqrt(5))/20,C=(e+t+i+r)*T,S=Math.floor(e+C),A=Math.floor(t+C),k=Math.floor(i+C),R=Math.floor(r+C),B=(S+A+k+R)*w,L=S-B,O=A-B,P=k-B,D=R-B,N=e-L,_=t-O,H=i-P,F=r-D,U=N>_?32:0,G=N>H?16:0,z=_>H?8:0,j=N>F?4:0,V=_>F?2:0,W=H>F?1:0,Y=U+G+z+j+V+W;u=x[Y][0]>=3?1:0,c=x[Y][1]>=3?1:0,h=x[Y][2]>=3?1:0,d=x[Y][3]>=3?1:0,f=x[Y][0]>=2?1:0,p=x[Y][1]>=2?1:0,m=x[Y][2]>=2?1:0,v=x[Y][3]>=2?1:0,g=x[Y][0]>=1?1:0,y=x[Y][1]>=1?1:0,M=x[Y][2]>=1?1:0,E=x[Y][3]>=1?1:0;var Z=N-u+w,Q=_-c+w,X=H-h+w,J=F-d+w,K=N-f+2*w,q=_-p+2*w,$=H-m+2*w,ee=F-v+2*w,te=N-g+3*w,ie=_-y+3*w,re=H-M+3*w,ne=F-E+3*w,ae=N-1+4*w,oe=_-1+4*w,se=H-1+4*w,le=F-1+4*w,ue=255&S,ce=255&A,he=255&k,de=255&R,fe=I[ue+I[ce+I[he+I[de]]]]%32,pe=I[ue+u+I[ce+c+I[he+h+I[de+d]]]]%32,me=I[ue+f+I[ce+p+I[he+m+I[de+v]]]]%32,ve=I[ue+g+I[ce+y+I[he+M+I[de+E]]]]%32,ge=I[ue+1+I[ce+1+I[he+1+I[de+1]]]]%32,ye=.6-N*N-_*_-H*H-F*F;ye<0?n=0:(ye*=ye,n=ye*ye*this.dot4(b[fe],N,_,H,F));var Me=.6-Z*Z-Q*Q-X*X-J*J;Me<0?a=0:(Me*=Me,a=Me*Me*this.dot4(b[pe],Z,Q,X,J));var Ee=.6-K*K-q*q-$*$-ee*ee;Ee<0?o=0:(Ee*=Ee,o=Ee*Ee*this.dot4(b[me],K,q,$,ee));var be=.6-te*te-ie*ie-re*re-ne*ne;be<0?s=0:(be*=be,s=be*be*this.dot4(b[ve],te,ie,re,ne));var xe=.6-ae*ae-oe*oe-se*se-le*le;return xe<0?l=0:(xe*=xe,l=xe*xe*this.dot4(b[ge],ae,oe,se,le)),27*(n+a+o+s+l)},THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!0},r=e.getSize();t=new THREE.WebGLRenderTarget(r.width,r.height,i),t.texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader),this.renderFirst=!0},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,i,r=!1,n=this.passes.length;for(this.renderFirst=!0,i=0;i<n;i++)if(t=this.passes[i],t.renderIndex=i,!1!==t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r,this.renderFirst),this.renderFirst=!1,t.needsSwap){if(r){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(t instanceof THREE.MaskPass?r=!0:t instanceof THREE.ClearMaskPass&&(r=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(e,t)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(e,t){},render:function(e,t,i,r,n){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),function(){var e=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.composerMix=null,this.composerAdditive=null,this.highlightoutlinePass=null,this.snowPass=null,this.rainPass=null,this.fogPass=null,this.skylinePass=null,this.ssaoPass=null,this.glowPass=[],this.scanRingPassAry=[],this.conventionFn=null,this.depthTextureFlg=!1,this.normalTextureFlg=!1}return _createClass(e,[{key:"destroy",value:function(){this.snowPass.enabled=!1,this.rainPass.enabled=!1,this.fogPass.enabled=!1,this.skylinePass.enabled=!1,this.ssaoPass.enabled=!1,this.highlightoutlinePass.enabled=!1,this.renderer=null,this.composerMix=null,this.composerAdditive=null,this.highlightoutlinePass.dispose(),this.highlightoutlinePass=null,this.snowPass.dispose(),this.snowPass=null,this.rainPass.dispose(),this.rainPass=null;for(var e=0;e<this.scanRingPassAry.length;e++)this.scanRingPassAry[e].dispose();this.scanRingPassAry.length=0;for(var e=0;e<this.glowPass.length;e++)this.glowPass[e].dispose();this.glowPass.length=0,this.fogPass.dispose(),this.fogPass=null,this.skylinePass.dispose(),this.skylinePass=null,this.conventionFn=null,this.autoRenderFlg=!1,null!=this.depthRenderTarget&&this.depthRenderTarget.dispose(),null!=this.transparentDepthRenderTarget&&this.transparentDepthRenderTarget.dispose(),null!=this.normalRenderTarget&&this.normalRenderTarget.dispose(),null!=this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),null!=this.scene.fog&&(this.scene.fog.setPostProcessMap(null),this.scene.fog.setPostProcessAdditiveMap(null))}},{key:"init",value:function(e,t,i){var r=this;r.viewer=e,r.modelManager=e.modelManager,r.scene=e.getScene(),r.camera=e.camera,r.autoRenderFlg=!1,r.selectedGlow={},r.composerMix=new THREE.EffectComposer(r.renderer),r.highlightoutlinePass=new s.OutlineHighLightPass(r),r.composerMix.addPass(r.highlightoutlinePass),r.snowPass=new s.SnowPass(r,r.viewer,t,i),r.composerMix.addPass(r.snowPass),r.rainPass=new s.RainPass(r,r.viewer,t,i),r.composerMix.addPass(r.rainPass),r.fogPass=new s.FogPass(r,r.scene,r.camera,t,i),r.composerMix.addPass(r.fogPass),r.skylinePass=new s.SkylinePass(r,r.scene,r.camera,t,i),r.composerMix.addPass(r.skylinePass),r.composerAdditive=new THREE.EffectComposer(r.renderer),r.ssaoPass=new THREE.SSAOPass(r,r.scene,r.camera,t,i,r.modelManager),r.composerAdditive.addPass(r.ssaoPass),r.composerBackground=new THREE.EffectComposer(r.renderer),r.backgroundPass=new s.BackgroundPass(r,r.viewer,r.width,r.height),r.composerBackground.addPass(r.backgroundPass),r.setSize(t,i)}},{key:"render",value:function(){var e=this;e.scene.background=null,null!=e.scene.fog&&(e.scene.fog.setPostProcessAdditiveMap(null),e.scene.fog.setPostProcessMap(null),e.normalTextureFlg=!1,e.depthTextureFlg=!1,e.transparentDepthTextureFlg=!1,e.composerMix.renderer.clearTarget(e.composerMix.readBuffer),
e.composerAdditive.renderer.clearTarget(e.composerAdditive.readBuffer),e.isAdditiveRoad()&&e.composerAdditive.render(),e.isMixRoad()&&e.composerMix.render(),e.composerBackground.renderer.clearTarget(e.composerBackground.readBuffer),e.composerBackground.render(),e.scene.background=e.composerBackground.readBuffer.texture,e.scene.fog.setViewport(e.composerMix.readBuffer.viewport.z,e.composerMix.readBuffer.viewport.w),e.isAdditiveRoad()&&e.scene.fog.setPostProcessAdditiveMap(e.composerAdditive.readBuffer.texture),e.isMixRoad()&&e.scene.fog.setPostProcessMap(e.composerMix.readBuffer.texture))}},{key:"isMixRoad",value:function(){var e=this;return e.rainPass.enabled||e.snowPass.enabled||e.fogPass.enabled||e.skylinePass.enabled||e.highlightoutlinePass.enabled||e.scanRingPassAry.length>0}},{key:"isAdditiveRoad",value:function(){var e=this;return e.glowPass.length>0||e.ssaoPass.enabled}},{key:"setSize",value:function(e,t){var i=this,r=window.devicePixelRatio||1;i.width=e*r,i.height=t*r,null!=i.normalRenderTarget&&i.normalRenderTarget.setSize(i.width,i.height),null!=i.depthRenderTarget&&i.depthRenderTarget.setSize(i.width,i.height),null!=i.transparentDepthRenderTarget&&i.transparentDepthRenderTarget.setSize(i.width,i.height),i.composerMix.setSize(i.width,i.height),i.composerAdditive.setSize(i.width,i.height),i.composerBackground.setSize(i.width,i.height)}},{key:"updateEnabled",value:function(){var e=this;e.snowPass.enabled=s.GlobalData.EnableSnowPass,e.fogPass.enabled=s.GlobalData.EnableFogPass,e.rainPass.enabled=s.GlobalData.EnableRainPass,e.skylinePass.enabled=s.GlobalData.EnableSkylinePass,e.ssaoPass.enabled=s.GlobalData.SSAO,e.highlightoutlinePass.enabled=s.GlobalData.EnableGlow&&s.GlobalData.HighLightOutlineCount>0;for(var t=0;t<e.glowPass.length;t++)e.glowPass[t].enabled=s.GlobalData.EnableGlow}},{key:"getNormalTexture",value:function(){var e=this;if(null==e.normalMaterial&&(e.normalMaterial=new s.NormalMaterial,e.normalMaterial.blending=THREE.NoBlending),null==e.normalStandardMaterial&&(e.normalStandardMaterial=new s.InstancedNormalMaterial,e.normalStandardMaterial.blending=THREE.NoBlending),null==e.normalRenderTarget&&(e.normalRenderTarget=new THREE.WebGLRenderTarget(e.width,e.height,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat})),0==e.normalTextureFlg){var t=e.renderer.autoClear;e.renderer.autoClear=!1,e.modelManager.adjustVisibility(!1),e.modelManager.adjustInstanceVisibility(!0),e.scene.overrideMaterial=e.normalStandardMaterial,e.renderer.render(e.scene,e.camera,e.normalRenderTarget,!0),e.scene.overrideMaterial=null,e.modelManager.adjustVisibility(!0),e.modelManager.adjustInstanceVisibility(!1),e.scene.overrideMaterial=e.normalMaterial,e.renderer.render(e.scene,e.camera,e.normalRenderTarget,!1),e.scene.overrideMaterial=null,e.modelManager.adjustInstanceVisibility(!0),e.normalTextureFlg=!0,e.renderer.autoClear=t}return e.normalRenderTarget.texture}},{key:"getDepthTexture",value:function(){var e=this;if(null==e.depthMaterial&&(e.depthMaterial=new s.CustomMeshDepthMaterial,e.depthMaterial.side=THREE.DoubleSide,e.depthMaterial.depthPacking=THREE.RGBADepthPacking,e.depthMaterial.blending=THREE.NoBlending),null==e.InstancedDepthMaterial&&(e.InstancedDepthMaterial=new s.CustomInstancedMeshDepthMaterial,e.InstancedDepthMaterial.side=THREE.DoubleSide,e.InstancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,e.InstancedDepthMaterial.blending=THREE.NoBlending),null==e.depthRenderTarget&&(e.depthRenderTarget=new THREE.WebGLRenderTarget(e.width,e.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter})),0==e.depthTextureFlg){var t=e.renderer.autoClear;e.renderer.autoClear=!1,e.scene.overrideMaterial=e.depthMaterial,e.modelManager.adjustVisibility(!0),e.modelManager.adjustInstanceVisibility(!1),e.renderer.render(e.scene,e.camera,e.depthRenderTarget,!0),e.scene.overrideMaterial=e.InstancedDepthMaterial,e.modelManager.adjustVisibility(!1),e.modelManager.adjustInstanceVisibility(!0),e.renderer.render(e.scene,e.camera,e.depthRenderTarget,!1),e.scene.overrideMaterial=null,e.modelManager.adjustVisibility(!0),e.depthTextureFlg=!0,e.renderer.autoClear=t}return e.depthRenderTarget.texture}},{key:"setTransparentObjectVisible",value:function(e,t,i){var r=this;if(!1!==e.alive){if(e.layers.test(t.layers))if(e.isImmediateRenderObject){var n=e.material;n.transparent&&n.opacity<.95&&(e.visible=i)}else if(e.isMesh||e.isLine||e.isPoints){var n=e.material,a=e.databagId+"_"+e.uuid;if(Array.isArray(n)){if(null!=e.geometry&&null!=e.geometry.groups){var o=e.geometry.groups;if(0==i&&o.length>0)for(var s=o.length-1;s>=0;s--){var l=o[s].materialIndex;l<0&&(l=Math.abs(2+l)),n[l].transparent&&n[l].opacity<.95&&(null==r.transparentObjectTemp[a]&&(r.transparentObjectTemp[a]=[]),r.transparentObjectTemp[a].push(o[s]),o.splice(s,1))}else if(i&&null!=r.transparentObjectTemp[a]&&r.transparentObjectTemp[a].length>0)for(var s=r.transparentObjectTemp[a].length-1;s>=0;s--)o.push(r.transparentObjectTemp[a][s]),r.transparentObjectTemp[a].splice(s,1)}}else n.transparent&&n.opacity<.95&&(0==i&&1==e.visible?(e.visible=i,r.transparentObjectVisibleListTemp[a]=i):i&&null!=r.transparentObjectVisibleListTemp[a]&&(e.visible=i))}for(var u=e.children,s=0,c=u.length;s<c;s++)r.setTransparentObjectVisible(u[s],t,i)}}},{key:"getTransparentDepthTexture",value:function(){var e=this;if(null==e.transparentDepthMaterial&&(e.transparentDepthMaterial=new THREE.MeshDepthMaterial,e.transparentDepthMaterial.side=THREE.DoubleSide,e.transparentDepthMaterial.depthPacking=THREE.RGBADepthPacking,e.transparentDepthMaterial.blending=THREE.NoBlending),null==e.transparentInstancedDepthMaterial&&(e.transparentInstancedDepthMaterial=new s.InstancedDepthMaterial,e.transparentInstancedDepthMaterial.side=THREE.DoubleSide,e.transparentInstancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,e.transparentInstancedDepthMaterial.blending=THREE.NoBlending),null==e.transparentDepthRenderTarget){var t=new THREE.DepthTexture;t.format=THREE.DepthStencilFormat,t.type=THREE.UnsignedInt248Type,t.minFilter=THREE.NearestFilter,t.maxFilter=THREE.NearestFilter,e.transparentDepthRenderTarget=new THREE.WebGLRenderTarget(e.width,e.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,depthTexture:t,depthBuffer:!0,stencilBuffer:!1})}if(0==e.transparentDepthTextureFlg){var i=e.renderer.autoClear;e.transparentObjectTemp={},e.transparentObjectVisibleListTemp={},e.setTransparentObjectVisible(e.scene,e.camera,!1),e.scene.overrideMaterial=e.transparentDepthMaterial,e.modelManager.adjustVisibility(!0),e.modelManager.adjustInstanceVisibility(!1),e.renderer.render(e.scene,e.camera,e.transparentDepthRenderTarget,!0),e.scene.overrideMaterial=e.transparentInstancedDepthMaterial,e.modelManager.adjustVisibility(!1),e.modelManager.adjustInstanceVisibility(!0),e.renderer.render(e.scene,e.camera,e.transparentDepthRenderTarget,!1),e.setTransparentObjectVisible(e.scene,e.camera,!0),e.modelManager.adjustVisibility(!0),e.scene.overrideMaterial=null,e.transparentDepthTextureFlg=!0,e.renderer.autoClear=i}return e.transparentDepthRenderTarget.depthTexture}},{key:"addRingScanEffect",value:function(e){var t=this,i=new s.ScanRingPass(e.id,t,t.viewer,t.width,t.height);return i.setOpts(e),t.composerMix.insertPass(i,t.composerMix.passes.length-1),t.scanRingPassAry.push(i),i}},{key:"removeRingScanEffect",value:function(e){for(var t=this,i=0;i<t.scanRingPassAry.length;i++)if(t.scanRingPassAry[i].id==e){t.scanRingPassAry.splice(i,1);for(var r=0;r<t.composerMix.passes.length;r++)t.composerMix.passes[r].id==e&&(t.composerMix.passes[r].dispose(),t.composerMix.passes.splice(r,1));return!0}return!1}},{key:"checkRender",value:function(){var e=this;e.snowPass.enabled||e.scanRingPassAry.length>0||e.rainPass.enabled?0==e.autoRenderFlg&&(!function t(){e.render(),e.conventionFn(),e.requestAnimationFrameID=window.requestAnimationFrame(t)}(),e.autoRenderFlg=!0):(e.autoRenderFlg=!1,window.cancelAnimationFrame(e.requestAnimationFrameID),e.render(),e.conventionFn())}},{key:"rainEffectOpt",value:function(e){if(null!=this.rainPass)return null==e?this.rainPass.getOpts():void this.rainPass.setOpts(e)}},{key:"snowEffectOpt",value:function(e){if(null!=this.snowPass)return null==e?this.snowPass.getOpts():void this.snowPass.setOpts(e)}},{key:"ssaoEffectOpt",value:function(e){if(null!=this.ssaoPass)return null==e?this.ssaoPass.getOpts():void this.ssaoPass.setOpts(e)}},{key:"fogEffectOpt",value:function(e){if(null!=this.fogPass)return null==e?this.fogPass.getOpts():void this.fogPass.setOpts(e)}},{key:"skylineOpt",value:function(e){if(null!=this.skylinePass)return null==e?this.skylinePass.getOpts():void this.skylinePass.setOpts(e)}},{key:"addGlowEffect",value:function(e){var t=this,i=new s.GlowPass(t);return t.composerAdditive.insertPass(i,t.composerAdditive.passes.length-1),t.glowPass.push(i),i.fillColor=e.fillColor,i.intensity=e.intensity,i.spread=e.spread,i}},{key:"updateGlowEffect",value:function(e,t){var i=this;for(var r in i.selectedGlow)if(null!=i.selectedGlow[r][e]&&null!=i.selectedGlow[r][e][t])for(var n=0;n<i.glowPass.length;n++)if(i.glowPass[n].key==r){i.glowPass[n].updateSelectedObjectIds=!0;break}}},{key:"setGlowEffectById",value:function(e,t,i){var r=this,n=i.color,a=Math.max(Math.min(i.intensity,1),0),o=Math.max(Math.min(i.spread,5),1),l=n.r+"_"+n.g+"_"+n.b+"_"+a+"_"+o;r.removeGlowEffectById(e,t);var u;if(null==r.selectedGlow[l])r.selectedGlow[l]={},u=r.addGlowEffect({fillColor:n,intensity:a,spread:o}),u.key=l;else for(var c=0;c<r.glowPass.length;c++)if(r.glowPass[c].key==l){u=r.glowPass[c];break}r.selectedGlow[l][e]||(r.selectedGlow[l][e]={});for(var c=0,h=t.length;c<h;c++)s.GlobalData.GlowCount++,r.selectedGlow[l][e][t[c]]=!0;u.selectedObjectIds=r.selectedGlow[l],u.updateSelectedObjectIds=!0}},{key:"_removeGlowPassByKey",value:function(e){for(var t=this,i=0;i<t.glowPass.length;i++)if(t.glowPass[i].key==e){t.glowPass.splice(i,1);for(var r=0;r<t.composerAdditive.passes.length;r++)t.composerAdditive.passes[r].key==e&&(t.composerAdditive.passes[r].dispose(),t.composerAdditive.passes.splice(r,1));return!0}return!1}},{key:"removeGlowEffectById",value:function(e,t){var i=this;for(var r in i.selectedGlow)if(null!=i.selectedGlow[r][e]){for(var n,a=0;a<i.glowPass.length;a++)if(i.glowPass[a].key==r){n=i.glowPass[a];break}var o=i.selectedGlow[r][e];if(void 0==t){var l=Object.keys(o).length;s.GlobalData.GlowCount-=l,o={}}else for(var u=0;u<t.length;u++)o[t[u]]&&(s.GlobalData.GlowCount--,delete o[t[u]],null!=n&&(n.updateSelectedObjectIds=!0));var c=Object.keys(o);0==c.length&&delete i.selectedGlow[r][e];var h=Object.keys(i.selectedGlow[r]);0==h.length&&(i._removeGlowPassByKey(r),delete i.selectedGlow[r])}}}]),e}();s.RenderEffectComposer=e}(),THREE.ShaderPass=function(e,t){THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(e,t,i,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}),THREE.SSAOPass=function(e,t,i,r,n,a){var o=this;THREE.Pass.call(o),o.KERNEL_SIZE=32,o.shader=THREE.SSAOShader,o.uniforms=THREE.UniformsUtils.clone(o.shader.uniforms),o.material=new THREE.ShaderMaterial({defines:o.shader.defines||{},uniforms:o.uniforms,vertexShader:o.shader.vertexShader,fragmentShader:o.shader.fragmentShader}),o.renderComposer=e,o.sceneCamera=i,o.mainScene=t,o.modelManager=a,o.width=r,o.height=n,o.oldClearColor=new THREE.Color,o.oldClearAlpha=1,o.minDistance=3e-4,o.maxDistance=8e-4,o.kernelRadius=.5,o.blurKernelRadius=4,o.blurMaxRadius=10,o.blurDirectionX=new THREE.Vector2(1,0),o.blurDirectionY=new THREE.Vector2(0,1),o.blurDirectionXY=new THREE.Vector2(1,1),o.blurDirectionXY2=new THREE.Vector2(-1,-1),o.createOverlayMaterial(),o.renderTarget=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!0}),o.renderTarget.texture.name="SSAO.renderpass",o.enabled=!1,o.uniforms.tNoise.value=o.generateRandomKernelRotations(),o.uniforms.kernel.value=o.generateSampleKernel(),o.uniforms.minDistance.value=o.minDistance,o.uniforms.maxDistance.value=o.maxDistance,o.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),o.scene=new THREE.Scene,o.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),o.quad.frustumCulled=!1,o.scene.add(o.quad),o.renderTargetSSAOBuffer=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetSSAOBuffer.texture.name="SSAOPass.edge",o.renderTargetSSAOBuffer.texture.generateMipmaps=!1,o.separableBlurMaterial=new THREE.ShaderMaterial(s.SeperableBlurShader),o.blurMaterial=new THREE.ShaderMaterial({defines:Object.assign({},s.SSAOBlurShader.defines),uniforms:THREE.UniformsUtils.clone(s.SSAOBlurShader.uniforms),vertexShader:s.SSAOBlurShader.vertexShader,fragmentShader:s.SSAOBlurShader.fragmentShader}),o.renderTargetBlurBuffer=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetBlurBuffer.texture.name="SSAOPass.blur",o.renderTargetBlurBuffer.texture.generateMipmaps=!1,o.renderTargetBlurBuffer1=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetBlurBuffer1.texture.name="SSAOPass.blur1",o.renderTargetBlurBuffer1.texture.generateMipmaps=!1,o.renderTargetBlurBuffer2=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetBlurBuffer2.texture.name="SSAOPass.blur2",o.renderTargetBlurBuffer2.texture.generateMipmaps=!1,o.renderTargetBlurBuffer3=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetBlurBuffer3.texture.name="SSAOPass.blur3",o.renderTargetBlurBuffer3.texture.generateMipmaps=!1,o.renderTargetBlurBuffer4=new THREE.WebGLRenderTarget(o.width,o.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),o.renderTargetBlurBuffer4.texture.name="SSAOPass.blur4",o.renderTargetBlurBuffer4.texture.generateMipmaps=!1},THREE.SSAOPass.prototype=Object.create(THREE.ShaderPass.prototype),THREE.SSAOPass.prototype.generateSampleKernel=function(){for(var e=this,t=[],i=0;i<e.KERNEL_SIZE;i++){var r=new THREE.Vector3;r.x=2*Math.random()-1,r.y=2*Math.random()-1,r.z=Math.random()/4,r.normalize();var n=i/e.KERNEL_SIZE;n=function(e,t,i){return(1-i)*e+i*t}(.15,1,n*n),r.multiplyScalar(n),t.push(r)}return t},THREE.SSAOPass.prototype.setOpts=function(e){var t=this;e&&(void 0!==e.minDistance&&null!==e.minDistance&&(t.minDistance=e.minDistance),void 0!==e.maxDistance&&null!==e.maxDistance&&(t.maxDistance=e.maxDistance),void 0!==e.kernelRadius&&null!==e.kernelRadius&&(t.kernelRadius=e.kernelRadius),void 0!==e.blurKernelRadius&&null!==e.blurKernelRadius&&(t.blurKernelRadius=e.blurKernelRadius),void 0!==e.blurMaxRadius&&null!==e.blurMaxRadius&&(t.blurMaxRadius=e.blurMaxRadius))},THREE.SSAOPass.prototype.generateRandomKernelRotations=function(){for(var e=new Float32Array(64),t=0;t<16;t++){var i=4*t;e[i]=2*Math.random()-1,e[i+1]=2*Math.random()-1,e[i+2]=2*Math.random()-1,e[i+3]=1}var r=new THREE.DataTexture(e,4,4,THREE.RGBAFormat,THREE.FloatType);return r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.needsUpdate=!0,r},THREE.SSAOPass.prototype.render=function(e,t,i,r,n){var a=this;e.render(a.mainScene,a.sceneCamera,a.renderTarget,!0),a.oldClearColor.copy(e.getClearColor()),a.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.setClearColor(0,0),e.autoClear=!1,a.uniforms.minDistance.value=a.minDistance,a.uniforms.maxDistance.value=a.maxDistance,a.uniforms.kernelRadius.value=a.kernelRadius,a.uniforms.tDepth.value=a.renderComposer.getDepthTexture(),a.uniforms.tNormal.value=a.renderComposer.getNormalTexture(),a.setCameraUniforms(a.sceneCamera),a.uniforms.logDepthBufFC.value=2/(Math.log(a.sceneCamera.far+1)/Math.LN2),a.uniforms.viewport.value.set(0,0,e.context.drawingBufferWidth,e.context.drawingBufferHeight),a.quad.material=a.material,e.render(a.scene,a.camera,a.renderTargetSSAOBuffer,!0),a.quad.material=a.blurMaterial,a.blurMaterial.uniforms.tDiffuse.value=a.renderTargetSSAOBuffer.texture,e.render(a.scene,a.camera,a.renderTargetBlurBuffer,!0),a.quad.material=a.separableBlurMaterial,a.separableBlurMaterial.uniforms.kernelRadius.value=a.blurKernelRadius,a.separableBlurMaterial.defines.MAX_RADIUS=a.blurMaxRadius,a.separableBlurMaterial.uniforms.colorTexture.value=a.renderTargetSSAOBuffer.texture,a.separableBlurMaterial.uniforms.direction.value=a.blurDirectionX,e.render(a.scene,a.camera,a.renderTargetBlurBuffer1,!0),a.separableBlurMaterial.uniforms.colorTexture.value=a.renderTargetBlurBuffer1.texture,a.separableBlurMaterial.uniforms.direction.value=a.blurDirectionY,e.render(a.scene,a.camera,a.renderTargetBlurBuffer2,!0),a.separableBlurMaterial.uniforms.colorTexture.value=a.renderTargetBlurBuffer2.texture,a.separableBlurMaterial.uniforms.direction.value=a.blurDirectionXY,e.render(a.scene,a.camera,a.renderTargetBlurBuffer3,!0),a.separableBlurMaterial.uniforms.colorTexture.value=a.renderTargetBlurBuffer3.texture,a.separableBlurMaterial.uniforms.direction.value=a.blurDirectionXY2,e.render(a.scene,a.camera,a.renderTargetBlurBuffer4,!0),a.scene.overrideMaterial=a.overlayMaterial,a.overlayMaterial.uniforms.edgeTexture1.value=a.renderTargetBlurBuffer.texture,a.overlayMaterial.uniforms.edgeTexture2.value=a.renderTargetBlurBuffer4.texture,a.overlayMaterial.uniforms.maskTexture.value=a.renderTarget.texture,e.render(a.scene,a.camera,t,!0),a.scene.overrideMaterial=null,e.setClearColor(a.oldClearColor,a.oldClearAlpha),e.autoClear=o},THREE.SSAOPass.prototype.setCameraUniforms=function(e){var t=this;t.sceneCamera=e,t.uniforms.cameraNear.value=t.sceneCamera.near,t.uniforms.cameraFar.value=t.sceneCamera.far,t.uniforms.cameraProjection.value.copy(t.sceneCamera.projectionMatrix),t.uniforms.inverseProjection.value.getInverse(t.sceneCamera.projectionMatrix)},THREE.SSAOPass.prototype.setSize=function(e,t){var i=this;i.width=e,i.height=t,i.renderTarget.setSize(i.width,i.height),i.renderTargetSSAOBuffer.setSize(i.width,i.height),i.renderTargetBlurBuffer.setSize(i.width,i.height),i.renderTargetBlurBuffer1.setSize(i.width,i.height),i.renderTargetBlurBuffer2.setSize(i.width,i.height),i.renderTargetBlurBuffer3.setSize(i.width,i.height),i.renderTargetBlurBuffer4.setSize(i.width,i.height),i.uniforms.resolution.value.set(i.width,i.height),i.separableBlurMaterial.uniforms.texSize.value.set(i.width,i.height),i.blurMaterial.uniforms.resolution.value.set(i.width,i.height)},THREE.SSAOPass.prototype.createOverlayMaterial=function(){this.overlayMaterial=new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},edgeTexture3:{value:null}},vertexShader:"\n            varying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t}\n\t\t",fragmentShader:"\n            varying vec2 vUv;\n            uniform sampler2D maskTexture;\n            uniform sampler2D edgeTexture1;\n            uniform sampler2D edgeTexture2;\n            #include <postprocess_minus_color>\n            void main() {\n                vec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n                vec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n                vec4 maskColor = texture2D(maskTexture, vUv);\n\n                vec4 color = maskColor;\n                color *= vec4(vec3(1.0 - edgeValue1.r),1.0);\n                color *= vec4(vec3(1.0 - edgeValue2.r),1.0);\n                gl_FragColor = postprocess_minus_color(color.rgb, maskColor.rgb);\n\t\t\t}\n\t\t"})},function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;r.renderComposer=e,r.width=r.renderComposer.width,r.height=r.renderComposer.height,r.modelManager=r.renderComposer.modelManager,r.renderScene=r.renderComposer.scene,r.renderCamera=r.renderComposer.camera,r.selectedObjectIds={},s.GlobalData.HighLightOutlineCount=0,r.edgeStrength=10,r.visibleEdgeColor=new THREE.Color(0,1,0),r.hiddenEdgeColor=new THREE.Color(.1,.04,.02),r.intensity=.5,r.spread=1,r.defaultEdgeColor=(new THREE.Color).setHex(7733223),r.edgeColor=new THREE.Vector4(r.defaultEdgeColor.r,r.defaultEdgeColor.g,r.defaultEdgeColor.b,.95),r.edgeLength=2,r.blurDirectionX=new THREE.Vector2(1,0),r.blurDirectionY=new THREE.Vector2(0,1);var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};return r.renderTargetMaskBuffer1=new THREE.WebGLRenderTarget(r.width,r.height,n),r.renderTargetMaskBuffer1.texture.name="OutlinePass.mask1",r.renderTargetMaskBuffer1.texture.generateMipmaps=!1,r.renderTargetMaskBuffer2=new THREE.WebGLRenderTarget(r.width,r.height,n),r.renderTargetMaskBuffer2.texture.name="OutlinePass.mask2",r.renderTargetMaskBuffer2.texture.generateMipmaps=!1,r.renderTargetBlurBuffer1=new THREE.WebGLRenderTarget(r.width,r.height,n),r.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",r.renderTargetBlurBuffer1.texture.generateMipmaps=!1,r.renderTargetBlurBuffer2=new THREE.WebGLRenderTarget(Math.round(r.width/2),Math.round(r.height/2),n),r.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",r.renderTargetBlurBuffer2.texture.generateMipmaps=!1,r.renderTargetEdgeBuffer1=new THREE.WebGLRenderTarget(r.width,r.height,n),r.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",r.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,r.renderTargetEdgeBuffer2=new THREE.WebGLRenderTarget(Math.round(r.width/2),Math.round(r.height/2),n),r.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",r.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,r.setEdgeDetectionMaterial(),r.separableBlurMaterial=new THREE.ShaderMaterial({defines:s.SeperableBlurShader.defines||{MAX_RADIUS:5},uniforms:THREE.UniformsUtils.clone(s.SeperableBlurShader.uniforms),vertexShader:s.SeperableBlurShader.vertexShader,fragmentShader:s.SeperableBlurShader.fragmentShader}),r.createOverlayMaterial(),r.oldClearColor=new THREE.Color,r.oldClearAlpha=1,r.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),r.scene=new THREE.Scene,r.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),r.quad.frustumCulled=!1,r.scene.add(r.quad),r.prepareMaskMaterial=r.getPrepareMaskMaterial(),r.prepareMaskMaterial.side=THREE.DoubleSide,r.prepareMaskInstancedMaterial=r.getPrepareMaskInstancedMaterial(),r.prepareMaskInstancedMaterial.side=THREE.DoubleSide,r.initSelectedObjectSceneAndMaterial(),r.enabled=!1,r.setSize(),r.meshGeneratorId="outlineHighLight",i}return _inherits(t,e),_createClass(t,[{key:"dispose",value:function(){var e=this;e.renderTargetMaskBuffer1.dispose(),e.renderTargetMaskBuffer2.dispose(),e.renderTargetEdgeBuffer1.dispose(),e.renderTargetEdgeBuffer2.dispose(),e.renderTargetBlurBuffer1.dispose(),e.renderTargetBlurBuffer2.dispose()}},{key:"setSize",value:function(e,t){var i=this;null!=e&&(i.width=e),null!=t&&(i.height=t),i.renderTargetMaskBuffer1.setSize(i.width,i.height),i.renderTargetMaskBuffer2.setSize(i.width,i.height);var r=Math.round(i.width/2),n=Math.round(i.height/2);i.renderTargetEdgeBuffer1.setSize(i.width,i.height),i.renderTargetEdgeBuffer2.setSize(r,n),i.renderTargetBlurBuffer1.setSize(i.width,i.height),i.renderTargetBlurBuffer2.setSize(r,n),i.edgeDetectionMaterial.uniforms.texSize.value.set(i.width,i.height),i.separableBlurMaterial.uniforms.texSize.value.set(i.width,i.height)}},{key:"initSelectedObjectSceneAndMaterial",value:function(){var e=this;e.selectedObjectScene=new THREE.Scene,e.selectedObjectScene.autoUpdate=!1,e.selectedObjectGroup=new s.ObjectGroup,e.selectedObjectGroup.name="OutlineHighLightMeshGroup",e.selectedObjectGroup.matrixAutoUpdate=!1,e.selectedObjectScene.add(e.selectedObjectGroup)}},{key:"_ClearSelectedObjectScene",value:function(){this.selectedObjectGroup.clear()}},{key:"_AddSelectedObjectToScene",value:function(e){var t=Object.keys(e),i=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;this.selectedObjectGroup.add(e[s])}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"_GetSelectedObjectMeshes",value:function(e){var t=this,i={};return t.modelManager.traverseModels(function(r){var n=e[r.id];if(n){var a=Object.keys(n);r.getPickingMeshes({skinningWireframeMaterial:t.prepareMaskMaterial,skinningSelectedMaterial:t.prepareMaskMaterial,selectedLineMaterial:t.prepareMaskMaterial,selectedMaterial:t.prepareMaskMaterial,wireframeMaterial:t.prepareMaskMaterial,instancedSelectedMaterial:t.prepareMaskInstancedMaterial,instancedWireFrameMaterial:t.prepareMaskInstancedMaterial},i,a,n,t.meshGeneratorId)}}),i}},{key:"_UpdateSelectedObjectSceneWorldMatrix",value:function(){this.selectedObjectGroup.matrix.copy(this.renderScene.getMatrixGlobal()),this.selectedObjectGroup.updateMatrixWorld(!0)}},{key:"_UpdateSelectedObjectScene",value:function(e){var t=this;(1==t.updateSelectedObjectIds||t.modelManager.isFilterApplied()||t.renderComposer.isGis)&&(t._ClearSelectedObjectScene(),t._AddSelectedObjectToScene(t._GetSelectedObjectMeshes(e)),t.updateSelectedObjectIds=!1),this._UpdateSelectedObjectSceneWorldMatrix()}},{key:"render",value:function(e,t,i,r,n,a){var o=this;if(0!==s.GlobalData.HighLightOutlineCount){o._UpdateSelectedObjectScene(o.selectedObjectIds),o.oldClearColor.copy(e.getClearColor()),o.oldClearAlpha=e.getClearAlpha();var l=e.autoClear;e.autoClear=!1,n&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),e.render(o.selectedObjectScene,o.renderCamera,o.renderTargetMaskBuffer1,!0),o.quad.material=o.edgeDetectionMaterial,o.edgeDetectionMaterial.uniforms.maskTexture.value=o.renderTargetMaskBuffer1.texture,o.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=o.visibleEdgeColor,o.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=o.hiddenEdgeColor,e.render(o.scene,o.camera,o.renderTargetMaskBuffer2,!0),o.quad.material=o.separableBlurMaterial,o.separableBlurMaterial.uniforms.kernelRadius.value=Math.sqrt(o.spread),o.separableBlurMaterial.uniforms.colorTexture.value=o.renderTargetMaskBuffer2.texture,o.separableBlurMaterial.uniforms.direction.value=o.blurDirectionX,e.render(o.scene,o.camera,o.renderTargetBlurBuffer1,!0),o.separableBlurMaterial.uniforms.colorTexture.value=o.renderTargetBlurBuffer1.texture,o.separableBlurMaterial.uniforms.direction.value=o.blurDirectionY,e.render(o.scene,o.camera,o.renderTargetEdgeBuffer1,!0),o.separableBlurMaterial.uniforms.kernelRadius.value=2*o.spread,o.separableBlurMaterial.uniforms.colorTexture.value=o.renderTargetEdgeBuffer1.texture,o.separableBlurMaterial.uniforms.direction.value=o.blurDirectionX,e.render(o.scene,o.camera,o.renderTargetBlurBuffer2,!0),o.separableBlurMaterial.uniforms.colorTexture.value=o.renderTargetBlurBuffer2.texture,o.separableBlurMaterial.uniforms.direction.value=o.blurDirectionY,e.render(o.scene,o.camera,o.renderTargetEdgeBuffer2,!0),o.quad.material=o.overlayMaterial,o.overlayMaterial.uniforms.maskTexture.value=o.renderTargetMaskBuffer1.texture,o.overlayMaterial.uniforms.edgeTexture1.value=o.renderTargetEdgeBuffer1.texture,o.overlayMaterial.uniforms.edgeTexture2.value=o.renderTargetEdgeBuffer2.texture,o.overlayMaterial.uniforms.edgeStrength.value=o.edgeStrength*o.intensity,o.overlayMaterial.uniforms.edgeGlow.value=o.spread/5,o.overlayMaterial.uniforms.firstFlg&&(o.overlayMaterial.uniforms.firstFlg.value=a?0:1),e.render(o.scene,o.camera,t,o.clear),n&&e.state.buffers.stencil.setTest(!0),e.setClearColor(o.oldClearColor,o.oldClearAlpha),e.autoClear=l}}},{key:"createOverlayMaterial",value:function(){this.overlayMaterial=new THREE.ShaderMaterial({uniforms:{tDiffuse:{value:null},maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},firstFlg:{value:0}},vertexShader:"\n                    varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                    }\n                ",fragmentShader:"\n                    uniform sampler2D tDiffuse;\n                    varying vec2 vUv;\n                    uniform sampler2D maskTexture;\n                    uniform sampler2D edgeTexture1;\n                    uniform sampler2D edgeTexture2;\n                    uniform float edgeStrength;\n                    uniform float edgeGlow;\n                    uniform float firstFlg;\n\n                    #include <postprocess_mix_color>\n                    #include <postprocess_original_color>\n                    void main() {\n                        vec4 color = get_original_color(tDiffuse, vUv, firstFlg);\n                        vec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n                        vec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n                        vec4 maskColor = texture2D(maskTexture, vUv);\n\n                        vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n                        vec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n                        gl_FragColor = mix_color(color, finalColor.rgb, finalColor.a);\n                    }\n                "})}},{key:"getPrepareMaskMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},vertexShader:"\n                    varying vec2 vUv;\n    \t\t\t\tvarying vec4 projTexCoord;\n    \t\t\t\tvarying vec4 vPosition;\n    \t\t\t\tuniform mat4 textureMatrix;\n    \t\t\t\tvoid main() {\n    \t\t\t\t\tvUv = uv;\n    \t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\n    \t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    \t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n    \t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    \t\t\t\t}\n\t\t\t\t",fragmentShader:"\n                    #include <packing>\n                    varying vec4 vPosition;\n    \t\t\t\tvarying vec4 projTexCoord;\n    \t\t\t\tuniform sampler2D depthTexture;\n    \t\t\t\tuniform vec2 cameraNearFar;\n\n                    void main()\n                    {\n                        gl_FragColor.r = 0.0;\n                        gl_FragColor.g = 1.0;\n                        gl_FragColor.b = 0.0;\n                        gl_FragColor.a = 1.0;\n                    }\n                "})}},{key:"getPrepareMaskInstancedMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},
vertexShader:"\n                    attribute float vState;\n                    attribute vec4 aColor;\n                    attribute vec3 mcol0;\n                    attribute vec3 mcol1;\n                    attribute vec3 mcol2;\n                    attribute vec3 mcol3;\n                    #if defined(USE_MAP)\n                        attribute vec2 muvCol0;\n                        attribute vec2 muvCol1;\n                        attribute vec2 muvCol2;\n                    #endif\n\n                    varying float vfState;\n                    varying vec2 vUv;\n    \t\t\t\tvarying vec4 projTexCoord;\n    \t\t\t\tvarying vec4 vPosition;\n    \t\t\t\tuniform mat4 textureMatrix;\n\n    \t\t\t\tvec3 getInstancePosition(vec3 position) {\n                        return vec3(mat4(vec4(mcol0, 0.0),\n                                         vec4(mcol1, 0.0),\n                                         vec4(mcol2, 0.0),\n                                         vec4(mcol3, 1.0)) * vec4(position, 1.0));\n                    }\n\n                    vec2 getInstanceUV(vec2 uv) {\n                        #if defined(USE_MAP)\n                            return vec2(mat3(vec3(muvCol0, 0.0),\n                                             vec3(muvCol1, 0.0),\n                                             vec3(muvCol2, 1.0)) * vec3(uv, 1.0));\n                        #else\n                            return uv;\n                        #endif\n                    }\n\n    \t\t\t\tvoid main() {\n    \t\t\t\t    vfState = vState;\n    \t\t\t\t\tvUv = uv;\n    \t\t\t\t\tvPosition = vec4(getInstancePosition(position), 1.0);\n    \t\t\t\t\tvec4 worldPosition = modelMatrix * vPosition;\n    \t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n                        gl_Position = projectionMatrix * modelViewMatrix * vPosition;\n                        vPosition = modelViewMatrix * vPosition;\n\t\t\t\t    }\n    \t\t\t",fragmentShader:"\n                    #include <packing>\n                    varying float vfState;\n                    varying vec2 vUv;\n                    varying vec4 vPosition;\n                    varying vec4 projTexCoord;\n                    uniform sampler2D depthTexture;\n                    uniform vec2 cameraNearFar;\n\n                    float linearDepth(float depth)\n                    {\n                        float far = cameraNearFar.y;\n                        float near = cameraNearFar.x;\n                        return (2.0 * near) / (far + near - depth * (far - near));\n                    }\n\n                    void main() {\n                        if (vfState <= -0.99 && vfState >= -1.01) discard;\n                        gl_FragColor.r = 0.0;\n                        gl_FragColor.g = 1.0;\n                        gl_FragColor.b = 0.0;\n                        gl_FragColor.a = 1.0;\n                    }\n                "})}},{key:"setEdgeDetectionMaterial",value:function(){this.edgeDetectionMaterial=new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},visibleEdgeColor:{value:new THREE.Vector3(1,1,1)},hiddenEdgeColor:{value:new THREE.Vector3(1,1,1)}},vertexShader:"\n                    varying vec2 vUv;\n    \t\t\t\tvoid main() {\n    \t\t\t\t\tvUv = uv;\n    \t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    \t\t\t\t}\n\t\t\t\t",fragmentShader:"\n                    varying vec2 vUv;\n                    uniform sampler2D maskTexture;\n                    uniform vec2 texSize;\n                    uniform vec3 visibleEdgeColor;\n                    uniform vec3 hiddenEdgeColor;\n                    void main() {\n                        vec2 invSize = 1.0 / texSize;\n                        vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n                        vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n                        vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n                        vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n                        vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n                        float diff1 = (c1.r - c2.r)*0.5;\n                        float diff2 = (c3.r - c4.r)*0.5;\n                        float d = length( vec2(diff1, diff2) );\n                        float a1 = min(c1.g, c2.g);\n                        float a2 = min(c3.g, c4.g);\n                        float visibilityFactor = min(a1, a2);\n                        vec3 edgeColor =  visibleEdgeColor;\n                        gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n                    }\n                "})}},{key:"setHighLightOutlineById",value:function(e,t,i){var r=this;r.selectedObjectIds[e]||(r.selectedObjectIds[e]={});for(var n=r.selectedObjectIds[e],a=0,o=t.length;a<o;a++)n[t[a]]||s.GlobalData.HighLightOutlineCount++,n[t[a]]=!0;r.visibleEdgeColor=i.color,r.intensity=Math.max(Math.min(i.intensity,1),0),r.spread=Math.max(Math.min(i.spread,5),1),r.updateSelectedObjectIds=!0}},{key:"removeHighLightOutlineById",value:function(e,t){var i=this;i.selectedObjectIds[e]||(i.selectedObjectIds[e]={});var r=i.selectedObjectIds[e];if(void 0==t){var n=Object.keys(r).length;s.GlobalData.HighLightOutlineCount-=n,r[e]={}}else for(var a=0;a<t.length;a++)r[t[a]]&&(s.GlobalData.HighLightOutlineCount--,delete r[t[a]]);i.updateSelectedObjectIds=!0}}]),t}(THREE.Pass);s.OutlineHighLightPass=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;r.renderComposer=e,r.width=r.renderComposer.width,r.height=r.renderComposer.height,r.modelManager=r.renderComposer.modelManager,r.renderScene=r.renderComposer.scene,r.renderCamera=r.renderComposer.camera,r.intensity=.5,r.spread=1,r.depthMaterial=new THREE.MeshDepthMaterial,r.depthMaterial.side=THREE.DoubleSide,r.depthMaterial.depthPacking=THREE.RGBADepthPacking,r.depthMaterial.blending=THREE.NoBlending,r.instancedDepthMaterial=new s.InstancedDepthMaterial,r.instancedDepthMaterial.side=THREE.DoubleSide,r.instancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,r.instancedDepthMaterial.blending=THREE.NoBlending;var n=new THREE.DepthTexture;n.format=THREE.DepthStencilFormat,n.type=THREE.UnsignedInt248Type,n.minFilter=THREE.NearestFilter,n.maxFilter=THREE.NearestFilter,r.selectDepthRenderTarget=new THREE.WebGLRenderTarget(r.width,r.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,depthTexture:n,depthBuffer:!0,stencilBuffer:!1}),r.setFillColorMaterial(),r.fillColorMaterial.uniforms.SelectObjDepthTexture.value=r.selectDepthRenderTarget.depthTexture,r.QuadCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),r.ScreenQuad=new THREE.Scene,r.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),r.quad.frustumCulled=!1,r.ScreenQuad.add(r.quad),r.GlowRenderTarget=new THREE.WebGLRenderTarget(r.width,r.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),r.GlowRenderTarget.texture.generateMipmaps=!1,r.fillColor=new THREE.Color(1,0,0),r.selectedObjectIds={},r.blurDirectionX=new THREE.Vector2(1,0),r.blurDirectionY=new THREE.Vector2(0,1);var a={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat},o=Math.round(r.width/2),l=Math.round(r.height/2);return r.renderTargetBlurBuffer1=new THREE.WebGLRenderTarget(o,l,a),r.renderTargetBlurBuffer1.texture.name="GlowPass.blur1",r.renderTargetBlurBuffer1.texture.generateMipmaps=!1,r.renderTargetBlurBuffer2=new THREE.WebGLRenderTarget(o,l,a),r.renderTargetBlurBuffer2.texture.name="GlowPass.blur2",r.renderTargetBlurBuffer2.texture.generateMipmaps=!1,r.renderTargetEdgeBuffer1=new THREE.WebGLRenderTarget(o,l,a),r.renderTargetEdgeBuffer1.texture.name="GlowPass.edge1",r.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,r.renderTargetEdgeBuffer2=new THREE.WebGLRenderTarget(o,l,a),r.renderTargetEdgeBuffer2.texture.name="GlowPass.edge2",r.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,r.separableBlurMaterial1=new THREE.ShaderMaterial({defines:s.SeperableBlurShader.defines||{},uniforms:THREE.UniformsUtils.clone(s.SeperableBlurShader.uniforms),vertexShader:s.SeperableBlurShader.vertexShader,fragmentShader:s.SeperableBlurShader.fragmentShader}),r.separableBlurMaterial1.defines.MAX_RADIUS=5,r.separableBlurMaterial2=new THREE.ShaderMaterial({defines:s.SeperableBlurShader.defines||{},uniforms:THREE.UniformsUtils.clone(s.SeperableBlurShader.uniforms),vertexShader:s.SeperableBlurShader.vertexShader,fragmentShader:s.SeperableBlurShader.fragmentShader}),r.separableBlurMaterial2.defines.MAX_RADIUS=5,r.createOverlayMaterial(),r.enabled=!1,r.oldClearColor=new THREE.Color,r.oldClearAlpha=1,r.initSelectedObjectSceneAndMaterial(),r.meshGeneratorId="glow",r._renderIndex=-1,i}return _inherits(t,e),_createClass(t,[{key:"dispose",value:function(){this.GlowRenderTarget.dispose(),this.selectDepthRenderTarget.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose()}},{key:"setSize",value:function(e,t){var i=this;i.width=e,i.height=t,i.GlowRenderTarget.setSize(e,t),i.selectDepthRenderTarget.setSize(e,t);var r=Math.round(i.width/2),n=Math.round(i.height/2);i.renderTargetEdgeBuffer1.setSize(r,n),i.renderTargetEdgeBuffer2.setSize(r,n),i.renderTargetBlurBuffer1.setSize(r,n),i.renderTargetBlurBuffer2.setSize(r,n),i.separableBlurMaterial1.uniforms.texSize.value.set(r,n),i.separableBlurMaterial2.uniforms.texSize.value.set(r,n)}},{key:"initSelectedObjectSceneAndMaterial",value:function(){var e=this;e.selectedObjectScene=new THREE.Scene,e.selectedObjectScene.autoUpdate=!1,e.selectedObjectGroup=new s.ObjectGroup,e.selectedObjectGroup.name="GlowMeshGroup",e.selectedObjectGroup.matrixAutoUpdate=!1,e.selectedObjectScene.add(e.selectedObjectGroup)}},{key:"_ClearSelectedObjectScene",value:function(){this.selectedObjectGroup.clear()}},{key:"_AddSelectedObjectToScene",value:function(e){var t=Object.keys(e),i=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;this.selectedObjectGroup.add(e[s])}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"_GetSelectedObjectMeshes",value:function(e){var t=this,i={};return t.modelManager.traverseModels(function(r){var n=e[r.id];if(n){var a=Object.keys(n);r.getPickingMeshes({skinningWireframeMaterial:t.depthMaterial,skinningSelectedMaterial:t.depthMaterial,selectedLineMaterial:t.depthMaterial,selectedMaterial:t.depthMaterial,wireframeMaterial:t.depthMaterial,instancedSelectedMaterial:t.instancedDepthMaterial,instancedWireFrameMaterial:t.instancedDepthMaterial},i,a,n,t.meshGeneratorId+t.renderIndex)}}),i}},{key:"_UpdateSelectedObjectSceneWorldMatrix",value:function(){this.selectedObjectGroup.matrix.copy(this.renderScene.getMatrixGlobal()),this.selectedObjectGroup.updateMatrixWorld(!0)}},{key:"_UpdateSelectedObjectScene",value:function(e){var t=this;(1==t.updateSelectedObjectIds||t._renderIndex!=t.renderIndex||t.modelManager.isFilterApplied()||t.renderComposer.isGis)&&(t._renderIndex=t.renderIndex,t._ClearSelectedObjectScene(),t._AddSelectedObjectToScene(t._GetSelectedObjectMeshes(e)),t.updateSelectedObjectIds=!1),t._UpdateSelectedObjectSceneWorldMatrix()}},{key:"render",value:function(e,t,i,r,n,a){var o=this;o._UpdateSelectedObjectScene(o.selectedObjectIds),e.autoClear=!1,e.render(o.selectedObjectScene,o.renderCamera,o.selectDepthRenderTarget,!0),o.fillColorMaterial.uniforms.cameraNear.value=o.renderCamera.near,o.fillColorMaterial.uniforms.cameraFar.value=o.renderCamera.far,o.fillColorMaterial.uniforms.fillColor.value=o.fillColor,o.fillColorMaterial.uniforms.intensity.value=o.intensity,o.fillColorMaterial.uniforms.scenDepthTexture.value=o.renderComposer.getTransparentDepthTexture(),o.quad.material=o.fillColorMaterial,e.render(o.ScreenQuad,o.QuadCamera,o.GlowRenderTarget,!0),o.quad.material=o.separableBlurMaterial1,o.separableBlurMaterial1.uniforms.kernelRadius.value=2*o.intensity,o.separableBlurMaterial1.uniforms.colorTexture.value=o.GlowRenderTarget.texture,o.separableBlurMaterial1.uniforms.direction.value=o.blurDirectionX,e.render(o.ScreenQuad,o.QuadCamera,o.renderTargetBlurBuffer1,!0),o.separableBlurMaterial1.uniforms.colorTexture.value=o.renderTargetBlurBuffer1.texture,o.separableBlurMaterial1.uniforms.direction.value=o.blurDirectionY,e.render(o.ScreenQuad,o.QuadCamera,o.renderTargetEdgeBuffer1,!0),o.quad.material=o.separableBlurMaterial2;var s=Math.sqrt(o.spread);o.separableBlurMaterial2.uniforms.kernelRadius.value=5*s,o.separableBlurMaterial2.uniforms.colorTexture.value=o.renderTargetEdgeBuffer1.texture,o.separableBlurMaterial2.uniforms.direction.value=o.blurDirectionX,e.render(o.ScreenQuad,o.QuadCamera,o.renderTargetBlurBuffer2,!0),o.separableBlurMaterial2.uniforms.colorTexture.value=o.renderTargetBlurBuffer2.texture,o.separableBlurMaterial2.uniforms.direction.value=o.blurDirectionY,e.render(o.ScreenQuad,o.QuadCamera,o.renderTargetEdgeBuffer2,!0),o.overlayMaterial.uniforms.firstFlg.value=a?0:1,o.overlayMaterial.uniforms.sceneTexture.value=i.texture,o.overlayMaterial.uniforms.GlowHalfTexture.value=o.renderTargetEdgeBuffer1.texture,o.overlayMaterial.uniforms.GlowQuardTexture.value=o.renderTargetEdgeBuffer2.texture,o.overlayMaterial.uniforms.intensity.value=o.intensity,o.overlayMaterial.uniforms.edgeGlow.value=s/2,o.quad.material=o.overlayMaterial,e.render(o.ScreenQuad,o.QuadCamera,t,o.clear)}},{key:"setFillColorMaterial",value:function(){this.fillColorMaterial=new THREE.ShaderMaterial({uniforms:{scenDepthTexture:{value:null},SelectObjDepthTexture:{value:null},cameraNear:{value:1},cameraFar:{value:100},fillColor:{value:new THREE.Vector3(1,1,1)},intensity:{value:.5}},vertexShader:"\n                    varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                    }\n                ",fragmentShader:"\n                    varying vec2 vUv;\n                    #include <common>\n                    #include <packing>\n                    uniform sampler2D scenDepthTexture;\n                    uniform sampler2D SelectObjDepthTexture;\n                    uniform vec3 fillColor;\n                    uniform float cameraNear;\n                    uniform float cameraFar;\n                    uniform float intensity;\n                    float getViewZ( const in float depth )\n                    {\n                        return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n                    }\n                    void main() {\n                        float sceneDepthNDC = texture2D(scenDepthTexture, vUv).x;\n                        float selectObjDepthNDC = texture2D(SelectObjDepthTexture, vUv).x;\n                        float sceneDepth = getViewZ(sceneDepthNDC);\n                        float selectObjDepth = getViewZ(selectObjDepthNDC);\n                        if((sceneDepthNDC == 1.0 && selectObjDepthNDC != 1.0) ||\n                            (sceneDepth - selectObjDepth < 0.0001 && selectObjDepthNDC != 1.0) )\n                        {\n                            gl_FragColor.xyz = fillColor.xyz * intensity * 2.0;\n                            gl_FragColor.a = 1.0;\n                        }\n                        else\n                        {\n                            gl_FragColor = vec4(0.0,0.0,0.0,0.0);\n                        }\n                    }\n                ",depthTest:!1,depthWrite:!1,transparent:!0})}},{key:"createOverlayMaterial",value:function(){this.overlayMaterial=new THREE.ShaderMaterial({defines:{},uniforms:{sceneTexture:{value:null},GlowHalfTexture:{value:null},GlowQuardTexture:{value:null},firstFlg:{value:0},intensity:{value:.5},edgeGlow:{value:1}},vertexShader:"\n                    varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                    }\n                ",fragmentShader:"\n                    varying vec2 vUv;\n                    uniform float firstFlg;\n                    uniform float intensity;\n                    uniform float edgeGlow;\n                    uniform sampler2D sceneTexture;\n                    uniform sampler2D GlowHalfTexture;\n                    uniform sampler2D GlowQuardTexture;\n\n                    #include <postprocess_original_color>\n                    #include <postprocess_mix_minus_color>\n                    #include <postprocess_minus_color>\n                    void main() {\n                        vec4 sceneColor = get_original_color(sceneTexture, vUv, firstFlg);\n                        vec4 GlowHalfColor = texture2D(GlowHalfTexture, vUv);\n                        vec4 GlowQuardColor = texture2D(GlowQuardTexture, vUv);\n\n                        vec4 finalColor = edgeGlow*GlowQuardColor + intensity*GlowHalfColor;\n                        if(finalColor.r==0.0 && finalColor.g==0.0 && finalColor.b==0.0){\n                            gl_FragColor = sceneColor;\n                        }else{\n                            vec3 rgb = postprocess_mix_minus_color(sceneColor, finalColor.rgb);\n                            gl_FragColor.rgba = postprocess_minus_color(rgb,vec3(0.0));\n                        }\n                    }\n                "})}}]),t}(THREE.Pass);s.GlowPass=e}(),s.SSAOBlurShader={uniforms:{tDiffuse:{value:null},resolution:{value:new THREE.Vector2}},vertexShader:["varying vec2 vUv;","void main() {","   vUv = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","   vec2 texelSize = ( 1.0 / resolution );","   float result = 0.0;","   for ( int i = - 2; i <= 2; i ++ ) {","       for ( int j = - 2; j <= 2; j ++ ) {","           vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","           result += texture2D( tDiffuse, vUv + offset ).r;","       }","   }","   gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join("\n")},s.BackgroundShader={uniforms:{mbTexture:{value:null},abTexture:{value:null},isAdditive:{value:0}},vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:"\n        uniform sampler2D mbTexture;\n        uniform sampler2D abTexture;\n        uniform float isAdditive;\n        varying vec2 v_textureCoordinates;\n\n        void main(void){\n            vec4 abcolor = texture2D( abTexture, v_textureCoordinates );\n            vec4 mbcolor = texture2D( mbTexture, v_textureCoordinates );\n            vec4 color=vec4(0.0);\n            if(isAdditive>0.0){\n                if(abcolor.a==0.0 && abcolor.r!=0.0 && abcolor.g!=0.0 && abcolor.b!=0.0){\n                    color = vec4(abcolor.r,abcolor.g,abcolor.b,1.0);\n                }else{\n                    color = abcolor;\n                }\n            }\n            if(mbcolor.a >0.0){\n                color = vec4(color.r/mbcolor.a+mbcolor.r*mbcolor.a, color.g/mbcolor.a+mbcolor.g*mbcolor.a, color.b/mbcolor.a+mbcolor.b*mbcolor.a, mbcolor.a);\n            }else{\n                if(color.a == 1.0){\n                    color = vec4(color.r, color.g, color.b, 0.0);\n                }\n            }\n            gl_FragColor = color;\n        }\n    "},s.FogShader={uniforms:{tDiffuse:{value:null},depthTexture:{value:null},darkness:{value:0},fogColor:{value:new THREE.Vector3},visualDistance:{value:0},cameraNear:{value:0},cameraFar:{value:0},lightAttenuation:{value:0},firstFlg:{value:0},logDepthBufFC:{value:0}},vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D depthTexture;","uniform float firstFlg;","uniform float lightAttenuation;","uniform float darkness;","uniform vec3 fogColor;","uniform float visualDistance;","varying vec2 v_textureCoordinates;","#include <packing>","#include <logdepthbuf_pars_fragment>","#include <depth_parse_fragment>","#include <postprocess_mix_color>","#include <postprocess_original_color>","void main(void){","   vec4 color = get_original_color(tDiffuse, v_textureCoordinates, firstFlg);","   vec4 depthColor = texture2D(depthTexture, v_textureCoordinates);","   float depth = unpackRGBAToDepth(depthColor);","   float viewZ = getViewZ(depth);","   if (depth == 0.0) {depth = 1.0;}","   if(depth>0.0) {","       float param = 1.0- exp(-lightAttenuation*(-viewZ)/(visualDistance ));","       color = mix_color(color, fogColor, param) ;","   }","   gl_FragColor = mix_color(color, vec3(0), darkness); ","}"].join("\n")},s.RainShader={uniforms:{tDiffuse:{value:null},darkness:{value:.5},density:{value:1},frameNumber:{value:0},viewport:{value:new THREE.Vector4(1,1,1,1)},firstFlg:{value:0}},vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec4 viewport;","varying vec2 v_textureCoordinates;","uniform sampler2D tDiffuse;","uniform float firstFlg;","uniform float frameNumber;","uniform float darkness;","uniform float density;","float hash(float x) {","    return fract(sin(x * 133.3) * 13.13);","}","vec3 rain(vec2 uv, float d){","   float time = frameNumber / (100.*(1.+0.3*d));","   vec3 c = vec3(.6, .7, .8);","   float a = .05;","   float si = sin(a), co = cos(a);","   uv *= mat2(co, -si, si, co);","   uv *= length(uv + vec2(0, 4.9)) * .3 + 0.5;","   float v = 1.0 - sin(hash(floor(uv.x * 150.)) * 2.);","   float b = clamp(abs(sin(20. * time * v + uv.y * ((10.-d*2.) / (2. + v)))) - .95, 0., 1.) * (8.+d/2.);","   c *= v * b;","   if(d==2.0 && (v<0.3||v>0.7)){","       c=vec3(0.0);","   }","   if(d==1.0 && (v<0.33||v>0.4)){","       c=vec3(0.0);","   }","   return c;","}","#include <postprocess_mix_color>","#include <postprocess_original_color>","void main(void){","   vec4 color = get_original_color(tDiffuse, v_textureCoordinates, firstFlg);","   vec2 resolution = viewport.zw;","   vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);","   vec3 rColor = vec3(0.0);","   if(density>0.0) {","       rColor = rain(uv,density); ","   }","   gl_FragColor = mix_color(color, rColor, darkness); ","}"].join("\n")},THREE.SSAOShader={uniforms:{tDepth:{value:null},tNoise:{value:null},resolution:{value:new THREE.Vector2},cameraNear:{value:1},cameraFar:{value:100},cameraProjection:{value:new THREE.Matrix4},inverseProjection:{value:new THREE.Matrix4},kernelRadius:{value:8},tNormal:{value:null},kernel:{value:null},minDistance:{value:.005},maxDistance:{value:.05},viewport:{value:new THREE.Vector4},logDepthBufFC:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <packing>","#include <logdepthbuf_pars_fragment>","#include <depth_parse_fragment>","#define KERNEL_SIZE 32","varying vec2 vUv;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec2 resolution;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","uniform vec3 kernel[ KERNEL_SIZE ];","float getDepth( const in vec2 screenPosition ) {","   vec4 depthColor = texture2D(tDepth, screenPosition);","   return unpackRGBAToDepth(depthColor);","}","vec3 getViewNormal( const in vec2 screenPosition ) {","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","float getLinearDepth( const in vec2 screenPosition ) {","       float fragCoordZ = getDepth( screenPosition );","       float viewZ = getViewZ( fragCoordZ );","       return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","}","void main() {","\tfloat depth = getDepth( vUv );","   if(depth == 0.0) {","       gl_FragColor = vec4( 0.0 );","       return;","   }","   vec3 viewPosition = getViewPosition(depth);","\tvec3 viewNormal = getViewNormal( vUv );","   viewNormal = viewNormal.rgb * vec3(-1.0,-1.0,-1.0) ;","   vec2 noiseScale = vec2( resolution.x/4.0 , resolution.y/4.0 );","   vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","   vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","   vec3 bitangent = cross( viewNormal, tangent );","   mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );","   float occlusion = 0.0;","   for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","\t\tvec3 sampleVector = (kernelMatrix * kernel[ i ]);","\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","\t\tvec4 samplePointNDC = cameraProjection * vec4( samplePoint, 1.0 );","\t\tsamplePointNDC /= samplePointNDC.w;","\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","       float _depth = getDepth( samplePointUv );","       if(_depth == 0.0 )","       {","           continue;","       }","\t\tfloat realDepth = getLinearDepth( samplePointUv );","       float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","\t\tfloat delta = sampleDepth - realDepth;","       float delta2 = realDepth - sampleDepth;","\t\tif (delta > minDistance && delta < maxDistance)","\t\t{","\t\t\tocclusion += 1.0;","\t\t}","       if (delta2 > minDistance && delta2 < 1.0)","       {","           occlusion -= 0.5;","       }","   }","   occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","   if(occlusion > 0.04)","   {","       occlusion = 0.04 + occlusion/3.0;","   }","   gl_FragColor = vec4( vec3( occlusion ), 1.0 );","}"].join("\n")},s.SeperableBlurShader={defines:{MAX_RADIUS:1},uniforms:{colorTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},direction:{value:new THREE.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            #include <common>\n            varying vec2 vUv;\n            uniform sampler2D colorTexture;\n            uniform vec2 texSize;\n            uniform vec2 direction;\n            uniform float kernelRadius;\n\n            float gaussianPdf(in float x, in float sigma) {\n                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n            }\n            void main() {\n                vec4 orginColor = texture2D( colorTexture, vUv);\n                vec2 invSize = 1.0 / texSize;\n                float weightSum = gaussianPdf(0.0, kernelRadius);\n                vec4 diffuseSum = orginColor * weightSum;\n                vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n                vec2 uvOffset = delta;\n                for( int i = 1; i <= MAX_RADIUS; i ++ ) {\n                    float w = gaussianPdf(uvOffset.x, kernelRadius);\n                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n                    diffuseSum += ((sample1 + sample2) * w);\n                    weightSum += (2.0 * w);\n                    uvOffset += delta;\n                }\n                gl_FragColor = diffuseSum/weightSum;\n            }\n        "},s.FogPass=function(e,t,i,r,n){var a=this;THREE.Pass.call(a),a.renderComposer=e,a.shader=s.FogShader,a.darkness=.1,a.lightAttenuation=.5,a.visualDistance=5e4,a.fogColor=new THREE.Vector3(1,1,1),a.uniforms=THREE.UniformsUtils.clone(a.shader.uniforms),a.material=new THREE.ShaderMaterial({defines:a.shader.defines||{},uniforms:a.uniforms,vertexShader:a.shader.vertexShader,fragmentShader:a.shader.fragmentShader}),a.camera=i,a.scene=t,a.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),a.postScene=new THREE.Scene,a.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),a.material),a.quad.frustumCulled=!1,a.postScene.add(a.quad),a.enabled=!1},s.FogPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:s.FogPass,setOpts:function(e){var t=this;e&&(void 0!==e.darkness&&null!==e.darkness&&(t.darkness=e.darkness),void 0!==e.visualDistance&&null!==e.visualDistance&&(t.visualDistance=e.visualDistance),void 0!==e.lightAttenuation&&null!==e.lightAttenuation&&(t.lightAttenuation=e.lightAttenuation),void 0!==e.fogColor&&null!==e.fogColor&&(t.fogColor=new THREE.Vector3(e.fogColor.r,e.fogColor.g,e.fogColor.b)))},getOpts:function(){var e=this;return{darkness:e.darkness,visualDistance:e.visualDistance,lightAttenuation:e.lightAttenuation,fogColor:new THREE.Color(e.fogColor.x,e.fogColor.y,e.fogColor.z)}},render:function(e,t,i,r,n,a){var o=this;null!=o.camera&&null!=o.scene&&(o.uniforms.cameraNear.value=o.camera.near,o.uniforms.cameraFar.value=o.camera.far,o.uniforms.depthTexture.value=o.renderComposer.getDepthTexture(),o.uniforms.logDepthBufFC.value=2/(Math.log(o.camera.far+1)/Math.LN2)),o.uniforms.fogColor.value=o.fogColor,o.uniforms.visualDistance.value=o.visualDistance,o.uniforms.darkness.value=o.darkness,o.uniforms.lightAttenuation.value=o.lightAttenuation,o.uniforms.tDiffuse&&(o.uniforms.tDiffuse.value=i.texture),o.uniforms.firstFlg&&(o.uniforms.firstFlg.value=a?0:1),o.quad.material=o.material,e.render(o.postScene,o.postCamera,t,o.clear)},dispose:function(){},setSize:function(e,t){}}),s.SkylinePass=function(e,t,i,r,n){var a=this;THREE.Pass.call(a),a.renderComposer=e,a.shader=s.SkylineShader,a.skylineColor=new THREE.Vector3(1,0,0),a.skylineWidth=1,a.uniforms=THREE.UniformsUtils.clone(a.shader.uniforms),a.material=new THREE.ShaderMaterial({defines:a.shader.defines||{},uniforms:a.uniforms,vertexShader:a.shader.vertexShader,fragmentShader:a.shader.fragmentShader}),a.camera=i,a.scene=t,a.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),a.postScene=new THREE.Scene,a.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),a.material),a.quad.frustumCulled=!1,a.postScene.add(a.quad),a.enabled=!1},s.SkylinePass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:s.SkylinePass,setOpts:function(e){var t=this;e&&(void 0!==e.skylineColor&&null!==e.skylineColor&&(t.skylineColor=new THREE.Vector3(e.skylineColor.r,e.skylineColor.g,e.skylineColor.b)),void 0!==e.skylineWidth&&null!==e.skylineWidth&&(t.skylineWidth=e.skylineWidth))},getOpts:function(){var e=this;return{skylineColor:new THREE.Color(e.skylineColor.x,e.skylineColor.y,e.skylineColor.z),skylineWidth:e.skylineWidth}},render:function(e,t,i,r,n,a){var o=this;null!=o.camera&&null!=o.scene&&(o.uniforms.cameraNear.value=o.camera.near,o.uniforms.cameraFar.value=o.camera.far,o.uniforms.depthTexture.value=o.renderComposer.getDepthTexture(),o.uniforms.logDepthBufFC.value=2/(Math.log(o.camera.far+1)/Math.LN2)),o.uniforms.skylineColor.value.set(o.skylineColor.x,o.skylineColor.y,o.skylineColor.z),o.uniforms.skylineWidth.value=o.skylineWidth,o.uniforms.viewport.value.set(0,0,e.context.drawingBufferWidth,e.context.drawingBufferHeight),o.quad.material=o.material,e.render(o.postScene,o.postCamera,t,o.clear)},dispose:function(){},setSize:function(e,t){}}),s.SkylineShader={uniforms:{depthTexture:{value:null},skylineColor:{value:new THREE.Vector3},skylineWidth:{value:1},cameraNear:{value:0},cameraFar:{value:0},logDepthBufFC:{value:0},viewport:{value:new THREE.Vector4}},
vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:[" \n        uniform sampler2D depthTexture;\n        uniform vec3 skylineColor;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform vec4 viewport;\n        uniform float skylineWidth;\n        varying vec2 v_textureCoordinates;\n\n        #include <packing>\n        #include <logdepthbuf_pars_fragment>\n\n        float getDepth(in vec4 depthColor){\n            float result = unpackRGBAToDepth(depthColor);\n            if (result == 0.0) {\n                return 1.0;\n            }\n\n            return result;\n        }\n        bool isSkyline(vec2 uv,float pixelWidth){\n            vec2 pixelSize = pixelWidth / viewport.zw;\n            float dx0 = -pixelSize.x;\n            float dy0 = -pixelSize.y;\n            float dx1 = pixelSize.x;\n            float dy1 = pixelSize.y;\n\n            vec2 currUV = uv + vec2(dx0, dy0);\n            vec4 depthColor = texture2D(depthTexture, currUV);\n            float depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(0.0, dy0);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(dx1, dy0);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(dx0, 0.0);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(dx1, 0.0);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(dx0, dy1);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(0.0, dy1);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            currUV = uv + vec2(dx1, dy1);\n            depthColor = texture2D(depthTexture, currUV);\n            depth = getDepth(depthColor);\n            if(depth>=1.0)return true;\n\n            return false;\n        }\n\n        void main(void){\n            vec4 depthColor = texture2D(depthTexture, v_textureCoordinates);\n            float depth = getDepth(depthColor);\n            if (depth >= 1.0) {\n                gl_FragColor = vec4(0.0); \n                return;\n            }\n            bool skyline = isSkyline(v_textureCoordinates, skylineWidth);\n            if(skyline){\n                gl_FragColor = vec4(skylineColor, 1.0);\n                return;\n            }\n            gl_FragColor = vec4(0.0);\n            // gl_FragColor = vec4(vec3(depth), 1.0);\n        }\n        "].join("\n")},s.SnowShader={uniforms:{tDiffuse:{value:null},tNormal:{value:null},darkness:{value:.5},density:{value:1},thickness:{value:.5},frameNumber:{value:0},viewport:{value:new THREE.Vector4(1,1,1,1)},cameraNear:{value:1},cameraFar:{value:100},inverseViewRotation:{value:new THREE.Matrix3},firstFlg:{value:0}},vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","uniform mat3 inverseViewRotation;","uniform vec4 viewport;","uniform float frameNumber;","uniform float darkness;","uniform float density;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform float thickness;","varying vec2 v_textureCoordinates;","uniform float firstFlg;","float snow(vec2 uv,float scale){","    float time = frameNumber / 60.0;","    float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;","    uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;","    uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;","    p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);","    k=smoothstep(0.,k,sin(f.x+f.y)*0.01);","    return k*w;","}","#include <packing>","vec3 getViewNormal(in sampler2D tn,const in vec2 screenPosition){","   return unpackRGBToNormal(texture2D(tn,screenPosition).xyz);","}","float getDotNumWC(vec3 nor, mat3 rotation){","    vec3 normalWC = normalize(rotation * nor);","    return dot(vec3(0.0,1.0,0.0),normalWC);","}","#include <postprocess_mix_color>","#include <postprocess_original_color>","void main(void){","   vec4 color = get_original_color(tDiffuse, v_textureCoordinates,firstFlg);","   if(thickness>0.0) {","       vec3 tNor = getViewNormal(tNormal, v_textureCoordinates);","       float dotNumWC = getDotNumWC(-tNor, inverseViewRotation);","       if(dotNumWC<0.3){","           dotNumWC=0.3;","       } else if(dotNumWC>1.0){","           dotNumWC=1.0;","       }","       color = mix_color(color, vec3(1.0), dotNumWC*thickness); ","   }","   vec2 resolution = viewport.zw;","   vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);","   vec3 finalColor=vec3(0);","   float c = 0.0;","   if(density>2.0){","       c+=snow(uv,35.);","       c+=snow(uv,20.);","       c+=snow(uv,8.);","   }","   if(density>1.0){","       c+=snow(uv,30.);","       c+=snow(uv,15.);","       c+=snow(uv,6.);","   }","   if(density>0.0){","       c+=snow(uv,25.);","       c+=snow(uv,10.);","       c+=snow(uv,5.);","       finalColor=(vec3(c)); ","   }","   gl_FragColor = mix_color(color, finalColor, darkness); ","}"].join("\n")},s.ScanRingShader={uniforms:{tDiffuse:{value:null},depthTexture:{value:null},color:{value:new THREE.Vector4},radius:{value:0},time:{value:0},cameraNear:{value:1},cameraFar:{value:100},progressive:{value:2},scanCenterEC:{value:new THREE.Vector4},scanPlaneNormalEC:{value:new THREE.Vector3},inverseProjection:{value:new THREE.Matrix4},cameraProjection:{value:new THREE.Matrix4},firstFlg:{value:0},viewport:{value:new THREE.Vector4},logDepthBufFC:{value:0},matrixWorld:{value:new THREE.Vector4},minHeight:{value:0},maxHeight:{value:0}},vertexShader:["varying vec2 v_textureCoordinates;","void main() {","   v_textureCoordinates = uv;","   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float firstFlg;","uniform float minHeight;","uniform float maxHeight;","uniform float radius;","uniform float time;","uniform vec4 color;","uniform float progressive;","uniform vec3 scanPlaneNormalEC;","uniform vec4 scanCenterEC;","uniform mat4 matrixWorld;","uniform sampler2D tDiffuse;","uniform sampler2D depthTexture;","varying vec2 v_textureCoordinates;","#include <packing>","#include <logdepthbuf_pars_fragment>","#include <depth_parse_fragment>","vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)","{","   vec3 v01 = point-planeOrigin;","   float d = dot(planeNormal, v01) ;","   return (point - planeNormal * d);","}","#include <postprocess_mix_color>","#include <postprocess_original_color>","void main(void){","   vec4 originalColor = get_original_color(tDiffuse, v_textureCoordinates,firstFlg);","   vec4 depthColor = texture2D(depthTexture, v_textureCoordinates);","   float depth = unpackRGBAToDepth(depthColor);","   vec3 viewPos = getViewPosition(depth);","   if(dot(scanPlaneNormalEC, viewPos)>0.0){","       gl_FragColor = originalColor;","       return;","   }","   vec3 prjOnPlane = pointProjectOnPlane(scanPlaneNormalEC.xyz, scanCenterEC.xyz, viewPos.xyz);","   float dis = length(prjOnPlane.xyz - scanCenterEC.xyz);","   float _radius = time * radius;","   float _time = (1.0-time) * 0.75 + 0.25;","   float f = dis/ _radius;","   f = min(f, 1.0);","   f = max(f, 0.0);","   if(f == 1.0){","       f = 0.0;","   }else{","       f = pow(f, progressive);","       f = max(f, 0.1);","   }","   vec4 wpos = matrixWorld * vec4( viewPos, 1.0 );","   if(minHeight != maxHeight && (wpos.y < minHeight || wpos.y > maxHeight)) {","       gl_FragColor = originalColor;","       return;","   };","   if(depth == 0.0){","       gl_FragColor = originalColor;","   }else{","       gl_FragColor = mix_color(originalColor, color.xyz*pow(f,0.1), f * color.w * _time); ","   }","}"].join("\n")},s.SnowPass=function(e,t,i,r){var n=this;THREE.Pass.call(n),n.viewer=t,n.shader=s.SnowShader,n.density=2,n.thickness=.8,n.darkness=.5,n.renderComposer=e,n.uniforms=THREE.UniformsUtils.clone(n.shader.uniforms),n.material=new THREE.ShaderMaterial({defines:n.shader.defines||{},uniforms:n.uniforms,vertexShader:n.shader.vertexShader,fragmentShader:n.shader.fragmentShader}),n._frameState=new s.FrameState,n._frameState.camera=n.viewer.camera,n._frameState.scene=n.viewer.getScene(),n.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),n.postScene=new THREE.Scene,n.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),n.material),n.quad.frustumCulled=!1,n.postScene.add(n.quad),n.enabled=!1},s.SnowPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:s.SnowPass,setOpts:function(e){var t=this;e&&(void 0!==e.darkness&&null!==e.darkness&&(t.darkness=e.darkness),void 0!==e.thickness&&null!==e.thickness&&(t.thickness=e.thickness),void 0!==e.density&&null!==e.density&&(t.density=e.density))},getOpts:function(){var e=this;return{darkness:e.darkness,thickness:e.thickness,density:e.density}},render:function(e,t,i,r,n,a){var o=this;null!=o._frameState.camera&&(o.uniforms.inverseViewRotation.value=s.Math.getMatrix3(o._frameState.camera.matrixWorld),o.uniforms.cameraNear.value=o._frameState.camera.near,o.uniforms.cameraFar.value=o._frameState.camera.far),o._frameState.frameNumber=s.Math.incrementWrap(o._frameState.frameNumber,15e6,1),o.uniforms.frameNumber.value=o._frameState.frameNumber,o.uniforms.density.value=o.density,o.uniforms.thickness.value=o.thickness,o.uniforms.darkness.value=o.darkness,o.uniforms.viewport&&null!=i&&(o.uniforms.viewport.value=new THREE.Vector4(i.viewport.x,i.viewport.y,i.viewport.z,i.viewport.w)),o.uniforms.firstFlg&&(o.uniforms.firstFlg.value=a?0:1),o.uniforms.tDiffuse&&(o.uniforms.tDiffuse.value=i.texture),o.uniforms.tNormal&&(o.uniforms.tNormal.value=o.renderComposer.getNormalTexture()),o.quad.material=o.material,e.render(o.postScene,o.postCamera,t,o.clear)},dispose:function(){var e=this;e._frameState=e._frameState.destroy()},setSize:function(e,t){}}),function(){var e=function(){function e(t,i,r,n){_classCallCheck(this,e);var a=this;THREE.Pass.call(a),a.viewer=i,a.shader=s.RainShader,a.density=2,a.darkness=.5,a.renderComposer=t,a.uniforms=THREE.UniformsUtils.clone(a.shader.uniforms),a.camera=a.viewer.camera,a.scene=a.viewer.getScene(),a.modelManager=a.viewer.modelManager,a.material=new THREE.ShaderMaterial({defines:a.shader.defines||{},uniforms:a.uniforms,vertexShader:a.shader.vertexShader,fragmentShader:a.replaceDepthToViewZ(a.shader.fragmentShader,a.camera)}),a._frameState=new s.FrameState,a._frameState.camera=a.viewer.camera,a._frameState.scene=a.viewer.getScene(),a._frameState.frameNumber=Math.floor(1e3*Math.random()),a.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),a.postScene=new THREE.Scene,a.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),a.material),a.quad.frustumCulled=!1,a.postScene.add(a.quad)}return _createClass(e,[{key:"replaceDepthToViewZ",value:function(e,t){var i=t.isPerspective?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,i+"DepthToViewZ")}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.darkness&&null!==e.darkness&&(t.darkness=e.darkness),void 0!==e.density&&null!==e.density&&(t.density=e.density))}},{key:"getOpts",value:function(){var e=this;return{darkness:e.darkness,density:e.density}}},{key:"render",value:function(e,t,i,r,n,a){var o=this;o._frameState.frameNumber=s.Math.incrementWrap(o._frameState.frameNumber,15e6,1),o.uniforms.frameNumber.value=o._frameState.frameNumber,o.uniforms.density.value=o.density,o.uniforms.darkness.value=o.darkness,o.uniforms.viewport&&null!=i&&(o.uniforms.viewport.value=new THREE.Vector4(i.viewport.x,i.viewport.y,i.viewport.z,i.viewport.w)),o.uniforms.firstFlg&&(o.uniforms.firstFlg.value=a?0:1),o.uniforms.tDiffuse&&(o.uniforms.tDiffuse.value=i.texture),o.quad.material=o.material,e.render(o.postScene,o.postCamera,t,o.clear)}},{key:"dispose",value:function(){}},{key:"setSize",value:function(e,t){}}]),e}();s.RainPass=e}(),function(){var e=function(e){function t(e,i,r,n,a){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.modelManager=i,o.renderScene=r,o.renderCamera=n,o.selectedObjectIds=void 0!==a?a:[],o.defaultEdgeColor=(new THREE.Color).setHex(7733223),o.defaultEdgeAlpha=.95,o.edgeColor=new THREE.Vector4(o.defaultEdgeColor.r,o.defaultEdgeColor.g,o.defaultEdgeColor.b,o.defaultEdgeAlpha),o.edgeLength=2,o.resolution=void 0!==e?new THREE.Vector2(e.x,e.y):new THREE.Vector2(256,256);var l={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};o.renderTargetDepthBuffer=new THREE.WebGLRenderTarget(o.resolution.x,o.resolution.y,l),o.renderTargetDepthBuffer.texture.name="OutlinePass.depth",o.renderTargetDepthBuffer.texture.generateMipmaps=!1,o.renderTargetMaskBuffer=new THREE.WebGLRenderTarget(o.resolution.x,o.resolution.y,l),o.renderTargetMaskBuffer.texture.name="OutlinePass.mask",o.renderTargetMaskBuffer.texture.generateMipmaps=!1,o.renderTargetMaskDownSampleBuffer=new THREE.WebGLRenderTarget(o.resolution.x,o.resolution.y,l),o.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",o.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,o.renderTargetEdgeBuffer=new THREE.WebGLRenderTarget(o.resolution.x,o.resolution.y,l),o.renderTargetEdgeBuffer.texture.name="OutlinePass.edge",o.renderTargetEdgeBuffer.texture.generateMipmaps=!1,o.renderTargetColorBuffer=new THREE.WebGLRenderTarget(o.resolution.x,o.resolution.y,l),o.renderTargetColorBuffer.texture.name="OutlinePass.color",o.renderTargetColorBuffer.texture.generateMipmaps=!1,o.depthMaterial=new THREE.MeshDepthMaterial,o.depthMaterial.side=THREE.DoubleSide,o.depthMaterial.depthPacking=THREE.RGBADepthPacking,o.depthMaterial.blending=THREE.NoBlending,o.InstancedDepthMaterial=new s.InstancedDepthMaterial,o.InstancedDepthMaterial.side=THREE.DoubleSide,o.InstancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,o.InstancedDepthMaterial.blending=THREE.NoBlending,o.prepareMaskMaterial=o.getPrepareMaskMaterial(),o.prepareMaskMaterial.side=THREE.DoubleSide,o.prepareMaskInstancedMaterial=o.getPrepareMaskInstancedMaterial(),o.prepareMaskInstancedMaterial.side=THREE.DoubleSide,o.edgeDetectionMaterial=o.getEdgeDetectionMaterial(),o.overlayMaterial=o.getOverlayMaterial(),void 0===THREE.CopyShader&&console.error("CLOUD.OutlinePass relies on THREE.CopyShader");var u=THREE.CopyShader;return o.copyUniforms=THREE.UniformsUtils.clone(u.uniforms),o.copyUniforms.opacity.value=1,o.materialCopy=new THREE.ShaderMaterial({uniforms:o.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:THREE.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),o.enabled=!0,o.needsSwap=!1,o.oldClearColor=new THREE.Color,o.oldClearAlpha=1,o.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),o.scene=new THREE.Scene,o.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),o.quad.frustumCulled=!1,o.scene.add(o.quad),o.textureMatrix=new THREE.Matrix4,o}return _inherits(t,e),_createClass(t,[{key:"dispose",value:function(){this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetEdgeBuffer.dispose(),this.renderTargetColorBuffer.dispose()}},{key:"setSize",value:function(e,t){this.renderTargetDepthBuffer.setSize(e,t),this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetMaskDownSampleBuffer.setSize(e,t),this.renderTargetEdgeBuffer.setSize(e,t),this.renderTargetColorBuffer.setSize(e,t)}},{key:"adjustVisibility",value:function(e){this.modelManager.adjustVisibility(e)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){this.modelManager.changeVisibilityOfSelectedObjects(e)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){this.modelManager.changeVisibilityOfNonSelectedObjects(e)}},{key:"adjustInstanceVisibility",value:function(e){this.modelManager.adjustInstanceVisibility(e)}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){this.modelManager.changeInstanceVisibilityOfSelectedObjects(e)}},{key:"changeInstanceVisibilityOfNonSelectedObjects",value:function(e){this.modelManager.changeInstanceVisibilityOfNonSelectedObjects(e)}},{key:"restoreVisibilityOfObjects",value:function(){this.modelManager.restoreVisibilityOfObjects()}},{key:"updateTextureMatrix",value:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}},{key:"render",value:function(e,t,i,r,n){if(0!==this.selectedObjectIds.length){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,n&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(0,0),this.adjustInstanceVisibility(!1),this.changeVisibilityOfSelectedObjects(!1),this.renderScene.overrideMaterial=this.depthMaterial,e.render(this.renderScene,this.renderCamera,this.renderTargetDepthBuffer,!0),this.adjustInstanceVisibility(!0),this.changeVisibilityOfSelectedObjects(!0),this.adjustVisibility(!1),this.changeInstanceVisibilityOfSelectedObjects(!1),this.renderScene.overrideMaterial=this.InstancedDepthMaterial,e.render(this.renderScene,this.renderCamera,this.renderTargetDepthBuffer,!1),this.adjustVisibility(!0),this.changeInstanceVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.adjustInstanceVisibility(!1),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new THREE.Vector2(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,this.renderCamera,this.renderTargetMaskBuffer,!0),this.adjustInstanceVisibility(!0),this.changeVisibilityOfNonSelectedObjects(!0),this.adjustVisibility(!1),this.changeInstanceVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskInstancedMaterial,this.prepareMaskInstancedMaterial.uniforms.cameraNearFar.value=new THREE.Vector2(this.renderCamera.near,this.renderCamera.far),this.prepareMaskInstancedMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskInstancedMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,this.renderCamera,this.renderTargetMaskBuffer,!1),this.renderScene.overrideMaterial=null,this.adjustVisibility(!0),this.changeInstanceVisibilityOfNonSelectedObjects(!0),this.restoreVisibilityOfObjects(),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.render(this.scene,this.camera,this.renderTargetMaskDownSampleBuffer,!0),this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new THREE.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.edgeColor.value=this.edgeColor,this.edgeDetectionMaterial.uniforms.edgeLength.value=this.edgeLength,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.colorTexture.value=i.texture,this.overlayMaterial.uniforms.outlineTexture.value=this.renderTargetEdgeBuffer.texture,e.render(this.scene,this.camera,this.renderTargetColorBuffer,!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetColorBuffer.texture,n&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,i,!0),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a}}},{key:"getPrepareMaskMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"\n                #include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\t\t\t\t\n\t\t\t\tfloat linearDepth(float depth)\n                {\n                    float far = cameraNearFar.y;\n                    float near = cameraNearFar.x;\n                    return (2.0 * near) / (far + near - depth * (far - near));\n                }\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\t\n\t\t\t\t\tgl_FragColor = vec4(depth);\n\t\t\t\t}"})}},{key:"getPrepareMaskInstancedMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new THREE.Vector2(.5,.5)},textureMatrix:{value:new THREE.Matrix4}},vertexShader:"\n                attribute float vState;            \n                attribute vec4 aColor;            \n                attribute vec3 mcol0;\n                attribute vec3 mcol1;\n                attribute vec3 mcol2;\n                attribute vec3 mcol3;\n                #if defined(USE_MAP)\n                    attribute vec2 muvCol0;\n                    attribute vec2 muvCol1;\n                    attribute vec2 muvCol2;\n                #endif\n                \n                varying float vfState;\n                varying vec2 vUv;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\t\n\t\t\t\tvec3 getInstancePosition(vec3 position) {\n                    return vec3(mat4(vec4(mcol0, 0.0),\n                                     vec4(mcol1, 0.0),\n                                     vec4(mcol2, 0.0),\n                                     vec4(mcol3, 1.0)) * vec4(position, 1.0));\n                }\n                \n                vec2 getInstanceUV(vec2 uv) {\n                \n                    #if defined(USE_MAP)\n                        return vec2(mat3(vec3(muvCol0, 0.0),\n                                         vec3(muvCol1, 0.0), \n                                         vec3(muvCol2, 1.0)) * vec3(uv, 1.0));\n                    #else\n                        return uv;\n                    #endif                    \n                    \n                }\n            \n\t\t\t\tvoid main() {\n\t\t\t\t    vfState = vState;\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tvPosition = vec4(getInstancePosition(position), 1.0);\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vPosition;\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vPosition;\n\t\t\t\t}",fragmentShader:"#include <packing>\n                varying float vfState;\n                varying vec2 vUv;\n                varying vec4 vPosition;\n                varying vec4 projTexCoord;\n                uniform sampler2D depthTexture;\n                uniform vec2 cameraNearFar;\n                \n                float linearDepth(float depth)\n                {\n                    float far = cameraNearFar.y;\n                    float near = cameraNearFar.x;\n                    return (2.0 * near) / (far + near - depth * (far - near));\n                }\n                \n                void main() {\n                    if (vfState <= -0.99 && vfState >= -1.01) discard;\n                    float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n                    gl_FragColor = vec4(depth);\n                }"})}},{key:"getEdgeDetectionMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},edgeColor:{value:new THREE.Vector4(1,1,1,1)},edgeLength:{value:2}},vertexShader:"\n                varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"\n                varying vec2 vUv;\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec4 edgeColor;\n                uniform float edgeLength; \n                \n                void main(void)\n                {\n                    float directions[3];\n                    directions[0] = -1.0;\n                    directions[1] = 0.0;\n                    directions[2] = 1.0;\n                \n                    float scalars[3];\n                    scalars[0] = 3.0;\n                    scalars[1] = 10.0;\n                    scalars[2] = 3.0;\n                \n                    float padx = 1.0 / texSize.x;\n                    float pady = 1.0 / texSize.y ; \n                \n                    float edgeSize  = 0.0; \n                    float horizEdge = 0.0;\n                    float vertEdge = 0.0;                    \n                \n                    for (int i = 0; i < 3; ++i)\n                    {\n                        float dir = directions[i];\n                        float scale = scalars[i];\n                \n                        horizEdge -= texture2D(maskTexture, vUv + vec2(-padx, dir * pady)).x * scale;\n                        horizEdge += texture2D(maskTexture, vUv + vec2(padx, dir * pady)).x * scale;\n                \n                        vertEdge -= texture2D(maskTexture, vUv + vec2(dir * padx, -pady)).x * scale;\n                        vertEdge += texture2D(maskTexture, vUv + vec2(dir * padx, pady)).x * scale;\n                    }                    \n                  \n                    float len = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);    \n                    float alpha = len > edgeLength ? edgeColor.a : (texture2D(maskTexture, vUv).w > 0.1 ? 0.1 : 0.0);\n                    gl_FragColor = vec4(edgeColor.rgb, alpha);\n                }"})}},{key:"getOverlayMaterial",value:function(){return new THREE.ShaderMaterial({uniforms:{colorTexture:{value:null},outlineTexture:{value:null}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D outlineTexture;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 outlineColor = texture2D(outlineTexture, vUv);\t\t\t\t\t\n                    gl_FragColor = mix(texture2D(colorTexture, vUv), outlineColor, outlineColor.a);\n\t\t\t\t}",blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}},{key:"setOutlineEdgeColor",value:function(e){var t=s.Utils.hexToRgb(e.color);this.edgeColor.fromArray([t.r,t.g,t.b,e.opacity?e.opacity:1])}}]),t}(THREE.Pass);s.OutlinePass=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.modelManager=t,this.depthMaterial=new THREE.MeshDepthMaterial,this.depthMaterial.side=THREE.DoubleSide,this.depthMaterial.depthPacking=THREE.RGBADepthPacking,this.depthMaterial.blending=THREE.NoBlending,this.instancedDepthMaterial=new s.InstancedDepthMaterial,this.instancedDepthMaterial.side=THREE.DoubleSide,this.instancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,this.instancedDepthMaterial.blending=THREE.NoBlending,this.customDepthMaterial=new s.CustomMeshDepthMaterial,this.customDepthMaterial.side=THREE.DoubleSide,this.customDepthMaterial.depthPacking=THREE.RGBADepthPacking,this.customDepthMaterial.blending=THREE.NoBlending,this.customInstancedDepthMaterial=new s.CustomInstancedMeshDepthMaterial,this.customInstancedDepthMaterial.side=THREE.DoubleSide,this.customInstancedDepthMaterial.depthPacking=THREE.RGBADepthPacking,this.customInstancedDepthMaterial.blending=THREE.NoBlending}return _createClass(e,[{key:"adjustVisibility",value:function(e){this.modelManager.adjustVisibility(e)}},{key:"adjustInstanceVisibility",value:function(e){this.modelManager.adjustInstanceVisibility(e)}},{key:"adjustDemVisibility",value:function(e){this.modelManager.adjustDemVisibility(e)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){this.modelManager.changeVisibilityOfSelectedObjects(e)}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){this.modelManager.changeInstanceVisibilityOfSelectedObjects(e)}},{key:"renderDepth",value:function(e,t,i,r){var n=e.getRenderTarget(),a=t.overrideMaterial,o=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,this.adjustInstanceVisibility(!1),this.changeVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.depthMaterial,e.render(t,i,r,!0),this.adjustInstanceVisibility(!0),this.changeVisibilityOfSelectedObjects(!0),this.adjustVisibility(!1),this.changeInstanceVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.instancedDepthMaterial,e.render(t,i,r,!1),t.overrideMaterial=a,e.setRenderTarget(n),e.autoClear=o,this.adjustVisibility(!0),this.changeInstanceVisibilityOfSelectedObjects(!0)}},{key:"renderCustomDepth",value:function(e,t,i,r,n){var a=!!s.Utils.isDefined(n)&&n,o=e.getRenderTarget(),l=t.overrideMaterial,u=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,this.adjustInstanceVisibility(!1),this.changeVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.customDepthMaterial,this.customDepthMaterial.uniforms.forceLogDepth.value=a,this.customDepthMaterial.uniforms.forceCustomDepth.value=!1,this.customDepthMaterial.uniforms.forceLogDepthBufFC.value=2/(Math.log(i.far+1)/Math.LN2),e.render(t,i,r,!0),this.adjustInstanceVisibility(!0),this.changeVisibilityOfSelectedObjects(!0),this.adjustVisibility(!1),this.changeInstanceVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.customInstancedDepthMaterial,this.customInstancedDepthMaterial.uniforms.forceLogDepth.value=a,this.customInstancedDepthMaterial.uniforms.forceCustomDepth.value=!1,this.customInstancedDepthMaterial.uniforms.forceLogDepthBufFC.value=2/(Math.log(i.far+1)/Math.LN2),e.render(t,i,r,!1),t.overrideMaterial=l,e.setRenderTarget(o),e.autoClear=u,this.adjustVisibility(!0),this.changeInstanceVisibilityOfSelectedObjects(!0)}},{key:"renderCustomDepthWithoutDEM",value:function(e,t,i,r){var n=e.getRenderTarget(),a=t.overrideMaterial,o=e.autoClear;e.setRenderTarget(r),e.autoClear=!1;var l=!1,u=t.getObjectGroup(s.GlobalData.TilePlaneGroupName);u&&(l=u.visible),this.adjustDemVisibility(!1),this.adjustVisibility(!1),this.adjustInstanceVisibility(!1),this.changeVisibilityOfSelectedObjects(!1),this.changeInstanceVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.customDepthMaterial,this.customDepthMaterial.uniforms.forceLogDepth.value=!1,this.customDepthMaterial.uniforms.forceCustomDepth.value=!0,
this.customDepthMaterial.uniforms.customDepth.value=1,e.render(t,i,r,!0);var c=!1,h=t.getObjectGroup(s.ObjectGroupType.EXTERNALCOMPONENTMANAGER);h&&(c=h.visible,h.visible=!1),this.adjustVisibility(!0),this.adjustInstanceVisibility(!1),this.changeVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.customDepthMaterial,this.customDepthMaterial.uniforms.forceLogDepth.value=!1,this.customDepthMaterial.uniforms.forceCustomDepth.value=!0,this.customDepthMaterial.uniforms.customDepth.value=.5,e.render(t,i,r,!1),this.adjustInstanceVisibility(!0),this.changeVisibilityOfSelectedObjects(!0),this.adjustVisibility(!1),this.changeInstanceVisibilityOfSelectedObjects(!1),t.overrideMaterial=this.customInstancedDepthMaterial,this.customInstancedDepthMaterial.uniforms.forceLogDepth.value=!1,this.customInstancedDepthMaterial.uniforms.forceCustomDepth.value=!0,this.customInstancedDepthMaterial.uniforms.customDepth.value=.5,e.render(t,i,r,!1),t.overrideMaterial=a,e.setRenderTarget(n),e.autoClear=o,this.adjustVisibility(!0),this.changeInstanceVisibilityOfSelectedObjects(!0),this.adjustDemVisibility(l),h&&(h.visible=c)}}]),e}();s.DepthRenderPass=e}(),function(){var e=function(){function e(t,i,r,n,a){_classCallCheck(this,e);var o=this;THREE.Pass.call(o),o.viewer=r,o.shader=s.ScanRingShader,o.id=t,o.radius=500,o.emitPosition=new THREE.Vector3(0,1,0),o.originPosition=new THREE.Vector3(0,0,0),o.progressive=10,o.duration=3e3,o.color=new THREE.Vector3(1,1,1),o.range=[],o.renderComposer=i,o.uniforms=THREE.UniformsUtils.clone(o.shader.uniforms),o.camera=o.viewer.camera,o.scene=o.viewer.getScene(),o.modelManager=o.viewer.modelManager,o.material=new THREE.ShaderMaterial({defines:o.shader.defines||{},uniforms:o.uniforms,vertexShader:o.shader.vertexShader,fragmentShader:o.shader.fragmentShader}),o.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),o.postScene=new THREE.Scene,o.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),o.material),o.quad.frustumCulled=!1,o.postScene.add(o.quad)}return _createClass(e,[{key:"setOpts",value:function(e){var t=this;e&&(null!=e.originPosition&&(t.originPosition=new THREE.Vector3(e.originPosition.x,e.originPosition.y,e.originPosition.z)),null!=e.emitPosition&&(t.emitPosition=new THREE.Vector3(e.emitPosition.x,e.emitPosition.y,e.emitPosition.z)),null!=e.progressive&&(t.progressive=e.progressive),null!=e.radius&&(t.radius=e.radius),null!=e.duration&&(t.duration=e.duration),null!=e.color&&null!=e.alpha&&(t.color=new THREE.Vector4(e.color.r,e.color.g,e.color.b,e.alpha)),null!=e.range&&(t.range=e.range))}},{key:"getOpts",value:function(){var e=this;return{emitPosition:e.emitPosition,originPosition:e.originPosition,radius:e.radius,duration:e.duration,color:e.color,progressive:e.progressive}}},{key:"render",value:function(e,t,i,r,n,a){var o=this;if(null!=o.camera){o.uniforms.cameraProjection.value=o.camera.projectionMatrix,o.uniforms.inverseProjection.value=(new THREE.Matrix4).getInverse(o.camera.projectionMatrix);var s=(new THREE.Matrix4).getInverse(o.camera.matrixWorld);o.uniforms.matrixWorld.value=o.camera.matrixWorld;var l=new THREE.Vector4(o.emitPosition.x,o.emitPosition.y,o.emitPosition.z,1);l.applyMatrix4(s);var u=new THREE.Vector4(o.originPosition.x,o.originPosition.y,o.originPosition.z,1);u.applyMatrix4(s);var c=new THREE.Vector3;c.set(l.x,l.y,l.z),c.sub(u),o.uniforms.scanPlaneNormalEC.value=c.normalize(),o.uniforms.scanCenterEC.value=u,o.uniforms.cameraNear.value=o.camera.near,o.uniforms.cameraFar.value=o.camera.far,o.uniforms.progressive.value=o.progressive,o.uniforms.viewport.value.set(0,0,e.context.drawingBufferWidth,e.context.drawingBufferHeight),o.uniforms.logDepthBufFC.value=2/(Math.log(o.camera.far+1)/Math.LN2)}2==o.range.length?(o.uniforms.minHeight.value=o.range[0],o.uniforms.maxHeight.value=o.range[1]):(o.uniforms.minHeight.value=0,o.uniforms.maxHeight.value=0),null==o.startTime&&(o.startTime=(new Date).getTime()),o.uniforms.time&&(0==o.duration?o.uniforms.time.value=1:o.uniforms.time.value=((new Date).getTime()-o.startTime)%o.duration/o.duration),o.uniforms.radius&&(o.uniforms.radius.value=o.radius),o.uniforms.color&&(o.uniforms.color.value=o.color),o.uniforms.tDiffuse&&(o.uniforms.tDiffuse.value=i.texture),o.uniforms.depthTexture&&(o.uniforms.depthTexture.value=o.renderComposer.getDepthTexture()),o.uniforms.firstFlg&&(o.uniforms.firstFlg.value=a?0:1),o.quad.material=o.material,e.render(o.postScene,o.postCamera,t,o.clear)}},{key:"dispose",value:function(){var e=this;e.emitPosition=null,e.originPosition=null,e.uniforms=null}},{key:"setSize",value:function(e,t){}}]),e}();s.ScanRingPass=e}(),function(){var e=function(e){function t(e,i,r,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=a;return o.viewer=i,o.renderComposer=e,o.shader=s.BackgroundShader,o.uniforms=THREE.UniformsUtils.clone(o.shader.uniforms),o.camera=o.viewer.camera,o.scene=o.viewer.getScene(),o.modelManager=o.viewer.modelManager,o.material=new THREE.ShaderMaterial({defines:o.shader.defines||{},uniforms:o.uniforms,vertexShader:o.shader.vertexShader,fragmentShader:o.shader.fragmentShader}),o.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),o.postScene=new THREE.Scene,o.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),o.material),o.quad.frustumCulled=!1,o.postScene.add(o.quad),a}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,i,r,n){var a=this;a.uniforms.abTexture&&(a.uniforms.abTexture.value=a.renderComposer.composerAdditive.readBuffer.texture),a.uniforms.mbTexture&&(a.uniforms.mbTexture.value=a.renderComposer.composerMix.readBuffer.texture),a.uniforms.isAdditive&&(a.uniforms.isAdditive.value=a.renderComposer.isAdditiveRoad()?1:0),a.quad.material=a.material,e.render(a.postScene,a.postCamera,t,a.clear)}},{key:"destroy",value:function(){this.material.dispose()}},{key:"setSize",value:function(e,t){}}]),t}(THREE.Pass);s.BackgroundPass=e}(),s.FanScanShader={uniforms:{fanAngle:{value:0},time:{value:0},backgroundColor:{value:new THREE.Vector3(1,1,1)},backgroundOpacity:{value:0}},vertexShader:"\n        #include <common>\n        #include <uv_pars_vertex>\n        #include <uv2_pars_vertex>\n        #include <envmap_pars_vertex>\n        #include <color_pars_vertex>\n        #include <fog_pars_vertex>\n        #include <morphtarget_pars_vertex>\n        #include <skinning_pars_vertex>\n        #include <logdepthbuf_pars_vertex>\n        #include <clipping_planes_pars_vertex>\n\n        varying vec2 vCoordinates;\n        void main() {\n            #include <uv_vertex>\n            #include <uv2_vertex>\n            #include <color_vertex>\n            #include <skinbase_vertex>\n            #ifdef USE_ENVMAP\n            #include <beginnormal_vertex>\n            #include <morphnormal_vertex>\n            #include <skinnormal_vertex>\n            #include <defaultnormal_vertex>\n            #endif\n            vCoordinates = vec2(position.x, position.y);\n            #include <begin_vertex>\n            #include <morphtarget_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <logdepthbuf_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <envmap_vertex>\n            #include <fog_vertex>\n        }\n    ",fragmentShader:"\n        uniform float fanAngle;\n        uniform float time;\n        uniform vec3 backgroundColor;\n        uniform float backgroundOpacity;\n        varying vec2 vCoordinates;\n\n        uniform vec3 diffuse;\n        uniform float opacity;\n        #ifndef FLAT_SHADED\n            varying vec3 vNormal;\n        #endif\n        #include <common>\n        #include <color_pars_fragment>\n        #include <uv_pars_fragment>\n        #include <uv2_pars_fragment>\n        #include <map_pars_fragment>\n        #include <alphamap_pars_fragment>\n        #include <aomap_pars_fragment>\n        #include <lightmap_pars_fragment>\n        #include <envmap_pars_fragment>\n        #include <fog_pars_fragment>\n        #include <specularmap_pars_fragment>\n        #include <logdepthbuf_pars_fragment>\n        #include <clipping_planes_pars_fragment>\n        void main() {\n            #include <logdepthbuf_fragment>\n\n            float scanAngle = 0.0;\n            float fanOpacity = backgroundOpacity;\n            if(vCoordinates.y==0.0 && vCoordinates.x==0.0){\n                discard;\n            }\n\n            float _angle = atan(vCoordinates.y, vCoordinates.x);\n            if(vCoordinates.y < 0.0){\n                _angle = _angle + PI*2.0;\n            }\n            _angle = _angle/(PI*2.0);\n\n            if( (_angle>=time &&_angle <= (fanAngle+time)) ||\n                ((fanAngle+time)>1.0 && _angle<=fract(fanAngle+time))){\n                if(_angle-time<0.0) {\n                    scanAngle = _angle+(1.0-time);\n                }else{\n                    scanAngle = _angle-time;\n                }\n                //提高融合感\n                scanAngle = pow(1.0 - scanAngle/fanAngle,2.0);\n                fanOpacity = fanOpacity + (1.0 - fanOpacity) * scanAngle * opacity;\n            }\n\n            gl_FragColor = vec4(mix(backgroundColor, diffuse, scanAngle), fanOpacity);\n//          gl_FragColor = vec4(vec3(fanOpacity), fanOpacity);\n//          gl_FragColor = vec4(vec3(scanAngle), scanAngle);\n            #include <premultiplied_alpha_fragment>\n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n            #include <fog_fragment>\n        }\n    "},s.CSMShader={csm_fragment:"\n        uniform vec2 csmCascades[4];\n        float calcShadowFactor(vec3 normal)\n        {\n            float shadowFactor = 1.0;\n            #if ( NUM_DIR_LIGHTS > 0 )\n                #ifdef USE_SHADOWMAP\n                    float viewDepth = vViewPosition.z;\n                    DirectionalLight directionalLight;\n                    directionalLight = directionalLights[ 0 ];\n                    float bias = cos(80.0);\n                    float biasFactor = 0.8;\n                    if (viewDepth >= csmCascades[0].x && viewDepth < csmCascades[0].y) {\n                        shadowFactor = getShadow( directionalShadowMap[ 0 ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ 0 ] );\n                        float dotNL = dot( normal, directionalLight.direction );\n                        if (dotNL < bias) {\n                            shadowFactor = biasFactor;\n                        }\n                    }\n\n                    #if ( NUM_DIR_LIGHTS > 1 )\n                        directionalLight = directionalLights[ 1 ];\n                        if (viewDepth >= csmCascades[1].x && viewDepth < csmCascades[1].y) {\n                            shadowFactor = getShadow( directionalShadowMap[ 1 ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ 1 ] );\n                            float dotNL = dot( normal, directionalLight.direction );\n                            if (dotNL < bias) {\n                                shadowFactor = biasFactor;\n                            }\n                        }\n                    #endif\n\n                    #if ( NUM_DIR_LIGHTS > 2 )\n                        directionalLight = directionalLights[ 2 ];\n                        if (viewDepth >= csmCascades[2].x && viewDepth < csmCascades[2].y) {\n                            shadowFactor = getShadow( directionalShadowMap[ 2 ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ 2 ] );\n                            float dotNL = dot( normal, directionalLight.direction );\n                            if (dotNL < bias) {\n                                shadowFactor = biasFactor;\n                            }\n                        }\n                    #endif\n\n                    #if ( NUM_DIR_LIGHTS > 3 )\n                        directionalLight = directionalLights[ 3 ];\n                        if (viewDepth >= csmCascades[3].x && viewDepth < csmCascades[3].y) {\n                            shadowFactor = getShadow( directionalShadowMap[ 3 ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ 3 ] );\n                            float dotNL = dot( normal, directionalLight.direction );\n                            if (dotNL < bias) {\n                                shadowFactor = biasFactor;\n                            }\n                        }\n                    #endif\n                #endif\n            #endif\n            shadowFactor = max(shadowFactor, 0.0);\n            return shadowFactor;\n        }\n    "},s.HeightLimitShader={heightLimit_pars_vertex:"\n    #ifdef HEIGHT_LIMIT_READ\n        uniform mat4 heightLimitOrthoMatrix;\n        varying vec3 v_HeightLimitOrthoPosition;\n        varying float heightWorld;\n    #endif\n",heightLimit_vertex:"\n    #ifdef HEIGHT_LIMIT_READ\n        vec4 othPostion = heightLimitOrthoMatrix * modelMatrix * vec4( transformed, 1.0 );//???\n        othPostion /= othPostion.w;\n        v_HeightLimitOrthoPosition = othPostion.xyz;\n        heightWorld = (modelMatrix * vec4( transformed, 1.0 )).y;\n    #endif\n",heightLimit_pars_fragment:"\n    #ifdef HEIGHT_LIMIT_READ\n        varying vec3 v_HeightLimitOrthoPosition;\n        uniform sampler2D  heightLimitSampler;\n        uniform sampler2D  heightColorSampler;\n        varying float heightWorld;\n\n        vec2 postProjToScreen(vec2 position)\n        {\n            vec2 screenPos = position;\n            \n            return 0.5 *(vec2(screenPos.x, screenPos.y) + 1.0);\n        }\n\n        float decode_float(vec4 v) {\n            vec4 bits = v * 255.0;\n            float sign = mix(-1.0, 1.0, step(bits[3], 128.0));\n            float expo = floor(mod(bits[3] + 0.1, 128.0)) * 2.0 + floor((bits[2] + 0.1) / 128.0) - 127.0;\n            float sig = bits[0] + bits[1] * 256.0 + floor(mod(bits[2] + 0.1, 128.0)) * 256.0 * 256.0;\n            return sign * (1.0 + sig / 8388607.0) * pow(2.0, expo);\n        }\n\n    #endif\n\n    #ifdef HEIGHT_LIMIT_WRITE\n        uniform float heightLimit;\n        uniform bool useHeightLimit;\n\n        #define FLOAT_MAX  1.70141184e38\n        #define FLOAT_MIN  1.17549435e-38\n        lowp vec4 encode_float(highp float v) {\n            highp float av = abs(v);\n        \n            //Handle special cases\n            if(av < FLOAT_MIN) {\n            return vec4(0.0, 0.0, 0.0, 0.0);\n            } else if(v > FLOAT_MAX) {\n            return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n            } else if(v < -FLOAT_MAX) {\n            return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n            }\n        \n            highp vec4 c = vec4(0,0,0,0);\n        \n            //Compute exponent and mantissa\n            highp float e = floor(log2(av));\n            highp float m = av * pow(2.0, -e) - 1.0;\n            \n            //Unpack mantissa\n            c[1] = floor(128.0 * m);\n            m -= c[1] / 128.0;\n            c[2] = floor(32768.0 * m);\n            m -= c[2] / 32768.0;\n            c[3] = floor(8388608.0 * m);\n            \n            //Unpack exponent\n            highp float ebias = e + 127.0;\n            c[0] = floor(ebias / 2.0);\n            ebias -= c[0] * 2.0;\n            c[1] += floor(ebias) * 128.0; \n        \n            //Unpack sign bit\n            c[0] += 128.0 * step(0.0, -v);\n        \n            //Scale back to range\n            return c / 255.0;\n        }\n      #endif\n",heightLimit_fragment:"\n    #ifdef HEIGHT_LIMIT_READ\n        vec2 heightLimitUV = postProjToScreen(v_HeightLimitOrthoPosition.xy);\n        if(heightLimitUV.x >= 0.0 && heightLimitUV.x <= 1.0 && heightLimitUV.y >= 0.0 && heightLimitUV.y <= 1.0)\n        {\n            vec4 color = texture2D(heightColorSampler, heightLimitUV);\n            \n            vec4 heightColor = texture2D(heightLimitSampler, heightLimitUV);\n            float heightLimit0 = decode_float(heightColor);//unpackRGBAToDepth\n            if(color.a > 0.01 &&heightWorld > heightLimit0 && (heightColor != vec4(0.0,0.0,0.0,0.0))) // edge\n            {\n                gl_FragColor = color;//a?\n            }\n        }\n    #endif\n    #ifdef HEIGHT_LIMIT_WRITE\n        if(useHeightLimit){\n            gl_FragColor = encode_float(heightLimit).abgr;//packDepthToRGBA(heightLimit);//(0-1)\n        }\n    #endif   \n\n"},s.WallShader={uniforms:{blendingRatio:{value:0},directionType:{value:0},directionReverse:{value:0},time:{value:0},unitLength:{value:0},repeat:{value:1}},vertexShader:"\n        #include <common>\n        #include <uv_pars_vertex>\n        #include <uv2_pars_vertex>\n        #include <envmap_pars_vertex>\n        #include <color_pars_vertex>\n        #include <fog_pars_vertex>\n        #include <morphtarget_pars_vertex>\n        #include <skinning_pars_vertex>\n        #include <logdepthbuf_pars_vertex>\n        #include <clipping_planes_pars_vertex>\n        void main() {\n            #include <uv_vertex>\n            #include <uv2_vertex>\n            #include <color_vertex>\n            #include <skinbase_vertex>\n            #ifdef USE_ENVMAP\n            #include <beginnormal_vertex>\n            #include <morphnormal_vertex>\n            #include <skinnormal_vertex>\n            #include <defaultnormal_vertex>\n            #endif\n            #include <begin_vertex>\n            #include <morphtarget_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <logdepthbuf_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <envmap_vertex>\n            #include <fog_vertex>\n        }\n    ",fragmentShader:"\n        uniform float blendingRatio;\n        uniform float directionType;\n        uniform float directionReverse;\n        uniform float time;\n\n        uniform float unitLength;\n        uniform float repeat;\n\n        uniform vec3 diffuse;\n        uniform float opacity;\n        #ifndef FLAT_SHADED\n            varying vec3 vNormal;\n        #endif\n        #include <common>\n        #include <color_pars_fragment>\n        #include <uv_pars_fragment>\n        #include <uv2_pars_fragment>\n        #include <map_pars_fragment>\n        #include <alphamap_pars_fragment>\n        #include <aomap_pars_fragment>\n        #include <lightmap_pars_fragment>\n        #include <envmap_pars_fragment>\n        #include <fog_pars_fragment>\n        #include <specularmap_pars_fragment>\n        #include <logdepthbuf_pars_fragment>\n        #include <clipping_planes_pars_fragment>\n        void main() {\n            #include <clipping_planes_fragment>\n            #include <logdepthbuf_fragment>\n//          #include <map_fragment>\n//          #include <color_fragment>\n//          #include <alphamap_fragment>\n//          #include <alphatest_fragment>\n//          #include <specularmap_fragment>\n//          ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n//          #ifdef USE_LIGHTMAP\n//              reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n//          #else\n//              reflectedLight.indirectDiffuse += vec3( 1.0 );\n//          #endif\n//          #include <aomap_fragment>\n//          reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n//          vec3 outgoingLight = reflectedLight.indirectDiffuse;\n//          #include <normal_flip>\n//          #include <envmap_fragment>\n//          gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n            vec2 vUvDirection;\n            float uvReverse;\n            if(directionType > 0.0){\n                uvReverse = vUv.y;\n                vUvDirection.y =vUv.x;\n            }else{\n                uvReverse = vUv.x;\n                vUvDirection.y =vUv.y;\n            }\n\n            float _unitLength = 1.0/unitLength;\n            float _orginLength = 0.0;\n            if(directionReverse>0.0){\n                uvReverse = 1.0 - uvReverse;\n                _orginLength=uvReverse;\n                if(unitLength>1.0){\n                    uvReverse =uvReverse/_unitLength + time*unitLength;\n                }else{\n                    uvReverse =uvReverse/_unitLength + time;\n                }\n            }else{\n                _orginLength=uvReverse;\n                if(unitLength>1.0){\n                    uvReverse =uvReverse/_unitLength - time*unitLength;\n                }else{\n                    uvReverse =uvReverse/_unitLength - time;\n                }\n            }\n\n            vUvDirection.x =fract(uvReverse);\n            //重复场合\n            if(unitLength > 1.0 && repeat<1.0){\n                float _time = time + _unitLength;\n                if(_orginLength < time ||_orginLength>_time){\n                    if(_time>1.0 && _orginLength< fract(_time)){\n                        //闭合场合\n                    }\n                    else{\n                        gl_FragColor = vec4(0.0);\n                        return;\n                    }\n                }\n            }\n            vec4 colorImage;\n\n            //临时解决方案,原因很奇怪,有时候会出现虚线\n            if(vUvDirection.x>0.99) {\n                colorImage = texture2D(map, vec2(0.99,vUvDirection.y));\n            } else if(vUvDirection.x<0.01) {\n                colorImage = texture2D(map, vec2(0.01,vUvDirection.y));\n            }else{\n                colorImage = texture2D(map, vUvDirection);\n            }\n            vec3 diffuseColor = mix(diffuse, colorImage.rgb, blendingRatio);\n\n            gl_FragColor = vec4(diffuseColor, colorImage.a * opacity);\n\n            #include <premultiplied_alpha_fragment>\n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n            #include <fog_fragment>\n        }\n    "},s.PlaneScanShader={uniforms:{blendingRatio:{value:0},angle:{value:0},time:{value:0}},vertexShader:"\n        #include <common>\n        #include <uv_pars_vertex>\n        #include <uv2_pars_vertex>\n        #include <envmap_pars_vertex>\n        #include <color_pars_vertex>\n        #include <fog_pars_vertex>\n        #include <morphtarget_pars_vertex>\n        #include <skinning_pars_vertex>\n        #include <logdepthbuf_pars_vertex>\n        #include <clipping_planes_pars_vertex>\n        void main() {\n            #include <uv_vertex>\n            #include <uv2_vertex>\n            #include <color_vertex>\n            #include <skinbase_vertex>\n            #ifdef USE_ENVMAP\n            #include <beginnormal_vertex>\n            #include <morphnormal_vertex>\n            #include <skinnormal_vertex>\n            #include <defaultnormal_vertex>\n            #endif\n            #include <begin_vertex>\n            #include <morphtarget_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <logdepthbuf_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <envmap_vertex>\n            #include <fog_vertex>\n        }\n    ",fragmentShader:"\n        uniform float blendingRatio;\n        uniform float angle;\n        uniform float time;\n\n        uniform vec3 diffuse;\n        uniform float opacity;\n        #ifndef FLAT_SHADED\n            varying vec3 vNormal;\n        #endif\n        #include <common>\n        #include <color_pars_fragment>\n        #include <uv_pars_fragment>\n        #include <uv2_pars_fragment>\n        #include <map_pars_fragment>\n        #include <alphamap_pars_fragment>\n        #include <aomap_pars_fragment>\n        #include <lightmap_pars_fragment>\n        #include <envmap_pars_fragment>\n        #include <fog_pars_fragment>\n        #include <specularmap_pars_fragment>\n        #include <logdepthbuf_pars_fragment>\n        #include <clipping_planes_pars_fragment>\n        mat2 rotate(float rad) {\n            float c = cos(rad);\n            float s = sin(rad);\n            return mat2(\n                c, s,\n                -s, c\n            );\n        }\n        void main() {\n            #include <clipping_planes_fragment>\n            #include <logdepthbuf_fragment>\n\n            vec2 vUvDirection = rotate(-angle) * vec2(vUv.x, vUv.y);\n            vUvDirection.x = fract(vUvDirection.x - time);\n            vUvDirection.y = fract(vUvDirection.y);\n\n            //临时解决方案,原因很奇怪,有时候会出现虚线\n            vec4 colorImage;\n            float _max = 0.99;\n            float _min = 0.01;\n            if(vUvDirection.y>_max && vUvDirection.x>_max) {\n                colorImage = texture2D(map, vec2(_max, _max));\n            } else if(vUvDirection.y>_max && vUvDirection.x<_min) {\n                colorImage = texture2D(map, vec2(_min, _max));\n            } else if(vUvDirection.y<_min && vUvDirection.x>_max) {\n                colorImage = texture2D(map, vec2(_min, _max));\n            }else if(vUvDirection.y<_min && vUvDirection.x<_min) {\n                colorImage = texture2D(map, vec2(_min, _min));\n            }else if(vUvDirection.y>_max) {\n                colorImage = texture2D(map, vec2(vUvDirection.x,_max));\n            } else if(vUvDirection.y<_min) {\n                colorImage = texture2D(map, vec2(vUvDirection.x,_min));\n            } else if(vUvDirection.x>_max) {\n                colorImage = texture2D(map, vec2(_max, vUvDirection.y));\n            }else if(vUvDirection.x<_min) {\n                colorImage = texture2D(map, vec2(_min, vUvDirection.y));\n            } else {\n                colorImage = texture2D(map, vUvDirection);\n            }\n\n            vec3 diffuseColor = mix(diffuse, colorImage.rgb, blendingRatio);\n            gl_FragColor = vec4(diffuseColor, colorImage.a * opacity);\n\n            #include <premultiplied_alpha_fragment>\n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n            #include <fog_fragment>\n        }\n    "},s.ViewshedShader={view_shed_pars_vertex:"\n    #ifdef VIEW_SHED_MODE\n        const int MAX_VIEWSHED_COUNT = 4;\n        uniform int viewshedCount;\n        struct ViewshedContent {\n            mat4 viewshedViewProjMatrix;\n            mat4 viewshedViewMatrix;\n            vec4 viewshedVisibleColor;\n            vec4 viewshedHiddenColor;\n            vec2 viewshedMinMax;\n            float viewshedLogDepthBufFC;\n\t\t};\n\n        uniform ViewshedContent viewshedContents[ MAX_VIEWSHED_COUNT ];\n        varying float viewshedFragDepth[MAX_VIEWSHED_COUNT];\n        varying vec3 viewshedWorldPosition;\n    #endif\n",view_shed_pars_fragment:"\n    #ifdef VIEW_SHED_MODE\n        const int MAX_VIEWSHED_COUNT = 4;\n        uniform int viewshedCount;\n        uniform sampler2D viewshedDepthMaps[ MAX_VIEWSHED_COUNT ];\n\n        struct ViewshedContent {\n            mat4 viewshedViewProjMatrix;\n            mat4 viewshedViewMatrix;\n            vec4 viewshedVisibleColor;\n            vec4 viewshedHiddenColor;\n            vec2 viewshedMinMax;\n            float viewshedLogDepthBufFC;\n\t\t};\n\n        uniform ViewshedContent viewshedContents[ MAX_VIEWSHED_COUNT ];\n        varying float viewshedFragDepth[MAX_VIEWSHED_COUNT];\n        varying vec3 viewshedWorldPosition;\n        \n        float toLinearDepth(float fragCoordZ, float near, float far)\n        {\n            float viewZ = perspectiveDepthToViewZ( fragCoordZ, near, far );\n\t\t\treturn viewZToOrthographicDepth( viewZ, near, far );\n        }\n\n        float sampleDepthMap(sampler2D depthMap, vec2 uv){\n            vec4 depthColor = texture2D(depthMap, uv);\n            return unpackRGBAToDepth(depthColor);\n        }\n\n        float viewshedDepthCompare(sampler2D depthMap, vec2 uv, float depth){\n            return step(depth, sampleDepthMap(depthMap, uv));\n        }\n\n        float viewshedVisibility(sampler2D depthMap, vec2 uv, float depth, float depthBias){\n            depth -= depthBias;\n            vec2 texelStepSize = 1.0 / vec2(1024.0, 1024.0);\n            float radius = 1.0;\n            float dx0 = -texelStepSize.x * radius;\n            float dy0 = -texelStepSize.y * radius;\n            float dx1 = texelStepSize.x * radius;\n            float dy1 = texelStepSize.y * radius;\n            float visibility = \n            (\n                viewshedDepthCompare(depthMap, uv, depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx0, dy0), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(0.0, dy0), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx1, dy0), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx0, 0.0), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx1, 0.0), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx0, dy1), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(0.0, dy1), depth) +\n                viewshedDepthCompare(depthMap, uv + vec2(dx1, dy1), depth)\n            ) * (1.0 / 9.0)\n            ;\n            return visibility;\n        }\n    #endif\n",view_shed_vertex:"\n    #ifdef VIEW_SHED_MODE\n        for (int i=0; i<MAX_VIEWSHED_COUNT; i++)\n        {\n            if (i >= viewshedCount) \n            {\n                break;\n            }\n            vec4 viewshedProjPosition = viewshedContents[i].viewshedViewProjMatrix * vec4(vsWorldPosition.xyz, 1.0);\n            float fragDepth = 1.0 + viewshedProjPosition.w;\n            viewshedFragDepth[i] = fragDepth;\n        }\n        viewshedWorldPosition = vsWorldPosition.xyz;\n    #endif\n",
view_shed_fragment:"\n    #ifdef VIEW_SHED_MODE\n        vec3 resultColor = gl_FragColor.rgb;\n        for (int i=0; i<MAX_VIEWSHED_COUNT; i++)\n        {\n            if (i >= viewshedCount) \n            {\n                break;\n            }\n            vec4 visibleColor = viewshedContents[i].viewshedVisibleColor;\n            vec4 hiddenColor = viewshedContents[i].viewshedHiddenColor;\n            vec4 viewshedViewPosition = viewshedContents[i].viewshedViewMatrix * vec4(viewshedWorldPosition, 1.0);\n            vec4 viewshedClipPosition = viewshedContents[i].viewshedViewProjMatrix * vec4(viewshedWorldPosition, 1.0);\n            viewshedClipPosition = viewshedClipPosition / viewshedClipPosition.w;\n            vec3 viewshedUV = viewshedClipPosition.xyz * 0.5 + 0.5;\n\n            vec2 minMax = viewshedContents[i].viewshedMinMax;\n            float fragDistance = length(viewshedViewPosition.xyz);\n            if(fragDistance <= minMax.y &&\n                viewshedUV.x >= 0.0 && viewshedUV.x <= 1.0 &&\n                viewshedUV.y >=0.0 && viewshedUV.y <= 1.0 &&\n                viewshedUV.z >=0.0 && viewshedUV.z <= 1.0)\n            {\n                float fragZ = log2( viewshedFragDepth[i] ) * viewshedContents[i].viewshedLogDepthBufFC * 0.5;\n                vec4 depthColor = texture2D(viewshedDepthMaps[i], viewshedUV.xy);\n                float closetDepth = unpackRGBAToDepth(depthColor);\n                float depthBias = 0.002 + smoothstep(100.0, 1000.0, fragDistance) * 0.058;\n                \n                // float visibility = viewshedVisibility(viewshedDepthMaps[i], viewshedUV.xy, fragZ, depthBias); \n                // if (visibility == 1.0)\n                if (fragZ - depthBias < closetDepth)\n                {\n                    resultColor = mix(visibleColor.rgb, resultColor, 1.0 - visibleColor.a);\n                }\n                else\n                {\n                    resultColor = mix(hiddenColor.rgb, resultColor, 1.0 - hiddenColor.a);\n                }\n            }   \n        }\n\n        gl_FragColor.rgb = resultColor;\n    #endif\n"},function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="GroundCurveMaterial",i.cameraNear=.1,i.cameraFar=10,i.pixelRatio=1,i.frustumPlanes=new THREE.Vector4,i.viewport=new THREE.Vector4,i.geometricToleranceOverMeter=1,i.lineWidth=1,i.globeDepthTexture=null,i.customDepthTexture=null,i.cameraProjection=new THREE.Matrix4,i.inverseProjection=new THREE.Matrix4,i.dashMode=0,i.dashSize=16,i.clampMode=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{cameraNear:{value:i.cameraNear},cameraFar:{value:i.cameraFar},pixelRatio:{value:i.pixelRatio},frustumPlanes:{value:i.frustumPlanes.clone()},viewport:{value:i.viewport.clone()},geometricToleranceOverMeter:{value:i.geometricToleranceOverMeter},lineWidth:{value:i.lineWidth},globeDepthTexture:{value:i.globeDepthTexture},customDepthTexture:{value:i.customDepthTexture},cameraProjection:{value:i.cameraProjection},inverseProjection:{value:i.inverseProjection},dashMode:{value:i.dashMode},dashSize:{value:i.dashSize},clampMode:{value:i.clampMode}}]),i.vertexShader=s.GroundCurveShader.vertexShader,i.fragmentShader=s.GroundCurveShader.fragmentShader,i}return _inherits(t,e),_createClass(t,[{key:"refreshUniforms",value:function(){this.uniforms.cameraNear.value=this.cameraNear,this.uniforms.cameraFar.value=this.cameraFar,this.uniforms.pixelRatio.value=this.pixelRatio,this.uniforms.frustumPlanes.value.copy(this.frustumPlanes),this.uniforms.viewport.value.copy(this.viewport),this.uniforms.geometricToleranceOverMeter.value=this.geometricToleranceOverMeter,this.uniforms.lineWidth.value=this.lineWidth,this.uniforms.globeDepthTexture.value=this.globeDepthTexture,this.uniforms.customDepthTexture.value=this.customDepthTexture,this.uniforms.cameraProjection.value=this.cameraProjection,this.uniforms.inverseProjection.value=this.inverseProjection,this.uniforms.dashMode.value=this.dashMode,this.uniforms.dashSize.value=this.dashSize,this.uniforms.clampMode.value=this.clampMode}}]),t}(THREE.MeshBasicMaterial);s.GroundCurveMaterial=e}(),s.GroundCurveShader={vertexShader:"\n    precision highp float;\n    precision highp int;\n    #include <common>\n    #include <fog_pars_vertex>\n    #include <logdepthbuf_pars_vertex>\n    #include <clipping_planes_pars_vertex>\n    const float GLOBE_MINIMUM_ALTITUDE = 6356752.3;\n    const float pi = 3.141592653589793;\n    const float piOverTwo = 1.5707963267948966;\n    attribute vec3 startPosition;\n    attribute vec3 startNormal;\n    attribute vec3 endNormal;\n    attribute vec3 rightNormal;\n    attribute vec3 forwardOffset;\n    attribute vec2 texcoordNormalization;\n\n    varying vec4 v_startPlaneNormalEcAndHalfWidth;\n    varying vec3 v_endPlaneNormalEc;\n    varying vec4 v_rightPlaneEC;\n    varying vec4 v_endEcAndStartEcX;\n    varying vec4 v_texcoordNormalizationAndStartEcYZ;\n    varying float v_polylineAngle;\n\n    uniform float cameraNear;\n    uniform float cameraFar;\n    uniform float pixelRatio;\n    uniform vec4 frustumPlanes;\n    uniform vec4 viewport;\n    uniform float geometricToleranceOverMeter;\n    uniform float lineWidth;\n\n    float planeDistance(vec4 plane, vec3 point) {\n        return (dot(plane.xyz, point) + plane.w);\n    }\n    float planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {\n        return (dot(planeNormal, point) + planeDistance);\n    }\n    float branchFreeTernary(bool comparison, float a, float b) {\n        float useA = float(comparison);\n        return a * useA + b * (1.0 - useA);\n    }\n    vec2 branchFreeTernary(bool comparison, vec2 a, vec2 b) {\n        float useA = float(comparison);\n        return a * useA + b * (1.0 - useA);\n    }\n    vec3 branchFreeTernary(bool comparison, vec3 a, vec3 b) {\n        float useA = float(comparison);\n        return a * useA + b * (1.0 - useA);\n    }\n    vec4 branchFreeTernary(bool comparison, vec4 a, vec4 b) {\n        float useA = float(comparison);\n        return a * useA + b * (1.0 - useA);\n    }\n    float metersPerPixel(vec4 positionEC, float pixelRatio) {\n        float width = viewport.z;\n        float height = viewport.w;\n        float pixelWidth;\n        float pixelHeight;\n        float top = frustumPlanes.x;\n        float bottom = frustumPlanes.y;\n        float left = frustumPlanes.z;\n        float right = frustumPlanes.w;\n\n        float distanceToPixel = -positionEC.z;\n        float inverseNear = 1.0 / cameraNear;\n        float tanTheta = top * inverseNear;\n        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;\n        tanTheta = right * inverseNear;\n        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;\n\n        return max(pixelWidth, pixelHeight) * pixelRatio;\n    }\n    float metersPerPixel(vec4 positionEC) {\n        return metersPerPixel(positionEC, pixelRatio);\n    }\n    float fastApproximateAtan(float x) {\n        return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);\n    }\n    float fastApproximateAtan(float x, float y) {\n        float t = abs(x);\n        float opposite = abs(y);\n        float adjacent = max(t, opposite);\n        opposite = min(t, opposite);\n        t = fastApproximateAtan(opposite / adjacent);\n        t = branchFreeTernary(abs(y) > abs(x), piOverTwo - t, t);\n        t = branchFreeTernary(x < 0.0, pi - t, t);\n        t = branchFreeTernary(y < 0.0, -t, t);\n        return t;\n    }\n\n    void main() {\n        vec3 ecStart = (viewMatrix * vec4(startPosition, 1.0)).xyz;\n        vec3 offset = normalMatrix * forwardOffset;\n        vec3 ecEnd = ecStart + offset;\n        vec3 forwardDirectionEC = normalize(offset);\n        vec4 startPlaneEC;\n        startPlaneEC.xyz = normalMatrix * startNormal;\n        startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);\n        vec4 endPlaneEC;\n        endPlaneEC.xyz = normalMatrix * endNormal;\n        endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);\n        v_rightPlaneEC.xyz = normalMatrix * rightNormal;\n        v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);\n        v_texcoordNormalizationAndStartEcYZ.x = abs(texcoordNormalization.x);\n        v_texcoordNormalizationAndStartEcYZ.y = texcoordNormalization.y;\n\n        v_endEcAndStartEcX.xyz = ecEnd;\n        v_endEcAndStartEcX.w = ecStart.x;\n        v_texcoordNormalizationAndStartEcYZ.zw = ecStart.yz;\n\n        vec4 positionEC = viewMatrix * vec4(position, 1.0);\n        float absStartPlaneDistance = abs(planeDistance(startPlaneEC, positionEC.xyz));\n        float absEndPlaneDistance = abs(planeDistance(endPlaneEC, positionEC.xyz));\n        vec3 planeDirection = branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlaneEC.xyz, endPlaneEC.xyz);\n        vec3 upOrDown = normalize(cross(v_rightPlaneEC.xyz, planeDirection));\n        vec3 normalEC = normalize(cross(planeDirection, upOrDown));    \n        upOrDown = cross(forwardDirectionEC, normalEC);\n        upOrDown = float(v_texcoordNormalizationAndStartEcYZ.y > 1.0 || v_texcoordNormalizationAndStartEcYZ.y < 0.0) * upOrDown;\n        upOrDown = min(GLOBE_MINIMUM_ALTITUDE, geometricToleranceOverMeter * length(positionEC.xyz)) * upOrDown;\n        positionEC.xyz += upOrDown;\n        v_texcoordNormalizationAndStartEcYZ.y = branchFreeTernary(v_texcoordNormalizationAndStartEcYZ.y > 1.0, 0.0, abs(v_texcoordNormalizationAndStartEcYZ.y));\n        float width = lineWidth;\n\n        v_startPlaneNormalEcAndHalfWidth.xyz = startPlaneEC.xyz;\n        v_startPlaneNormalEcAndHalfWidth.w = width * 0.5;\n        v_endPlaneNormalEc = endPlaneEC.xyz;\n        width = width * max(0.0, metersPerPixel(positionEC));\n        width = width / dot(normalEC, v_rightPlaneEC.xyz);\n        normalEC *= sign(texcoordNormalization.x);\n\n        positionEC.xyz += width * normalEC;\n        vec4 mvPosition = positionEC;\n        gl_Position = projectionMatrix * mvPosition;\n\n        vec2 approxLineDirection = normalize(vec2(forwardDirectionEC.x, -forwardDirectionEC.y));\n        approxLineDirection.y = branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);\n        v_polylineAngle = fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);\n\n        #include <logdepthbuf_vertex>\n        #include <clipping_planes_vertex>\n        #include <fog_vertex>\n    }\n\n    ",fragmentShader:"\n    precision highp float;\n    precision highp int;\n\n    #include <common>\n    #include <fog_pars_fragment>\n    #include <logdepthbuf_pars_fragment>\n\n    #include <clipping_planes_pars_fragment>\n    #include <packing>\n    #include <depth_parse_fragment>\n\n    const float maskLength = 16.0;\n    uniform vec3 diffuse;\n    uniform float opacity;\n    uniform float pixelRatio;\n    uniform sampler2D globeDepthTexture;\n    uniform sampler2D customDepthTexture;\n    uniform int dashMode;\n    uniform float dashSize;\n    uniform vec4 frustumPlanes;\n    uniform int clampMode;\n\n    varying vec4 v_startPlaneNormalEcAndHalfWidth;\n    varying vec3 v_endPlaneNormalEc;\n    varying vec4 v_rightPlaneEC;\n    varying vec4 v_endEcAndStartEcX;\n    varying vec4 v_texcoordNormalizationAndStartEcYZ;\n    varying float v_polylineAngle;\n\n    float metersPerPixel(vec4 positionEC, float pixelRatio) {\n        float width = viewport.z;\n        float height = viewport.w;\n        float pixelWidth;\n        float pixelHeight;\n        float top = frustumPlanes.x;\n        float bottom = frustumPlanes.y;\n        float left = frustumPlanes.z;\n        float right = frustumPlanes.w;\n\n        float distanceToPixel = -positionEC.z;\n        float inverseNear = 1.0 / cameraNear;\n        float tanTheta = top * inverseNear;\n        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;\n        tanTheta = right * inverseNear;\n        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;\n\n        return max(pixelWidth, pixelHeight) * pixelRatio;\n    }\n    float metersPerPixel(vec4 positionEC) {\n        return metersPerPixel(positionEC, pixelRatio);\n    }\n    float planeDistance(vec4 plane, vec3 point) {\n        return (dot(plane.xyz, point) + plane.w);\n    }\n    float planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {\n        return (dot(planeNormal, point) + planeDistance);\n    }\n    mat2 rotate(float rad) {\n        float c = cos(rad);\n        float s = sin(rad);\n        return mat2(\n        c, s, -s, c\n        );\n    }\n\n    void main() {\n        #include <clipping_planes_fragment>\n\n        vec2 uv = gl_FragCoord.xy / viewport.zw;\n        vec4 depthColor = texture2D(globeDepthTexture, uv);\n        float depth = unpackRGBAToDepth(depthColor);\n        if (depth == 0.0) {\n            discard;\n        }\n        vec4 customColor = texture2D(customDepthTexture, uv);\n        float customDepth = unpackRGBAToDepth(customColor);\n        if (clampMode == 0) { //discard external components\n            if (customDepth > 0.6) {\n                discard;\n            }\n        }\n        else if (clampMode == 1) { //only clamp to ground\n            if (customDepth > 0.4) {\n                discard;\n            }\n        } else if (clampMode == 2) { //only clamp to model\n            if (customDepth < 0.1 || customDepth > 0.6) {\n                discard;\n            }\n        }\n        vec3 viewPosition = getViewPosition(depth);\n        vec3 ecStart = vec3(v_endEcAndStartEcX.w, v_texcoordNormalizationAndStartEcYZ.zw);\n        float halfMaxWidth = v_startPlaneNormalEcAndHalfWidth.w * metersPerPixel(vec4(viewPosition.xyz, 1.0));\n        float widthwiseDistance = planeDistance(v_rightPlaneEC, viewPosition.xyz);\n        float distanceFromStart = planeDistance(v_startPlaneNormalEcAndHalfWidth.xyz, -dot(ecStart, v_startPlaneNormalEcAndHalfWidth.xyz), viewPosition.xyz);\n        float distanceFromEnd = planeDistance(v_endPlaneNormalEc.xyz, -dot(v_endEcAndStartEcX.xyz, v_endPlaneNormalEc.xyz), viewPosition.xyz);\n        if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n            discard;\n        }\n        \n        vec4 diffuseColor = vec4( diffuse, opacity );\n        vec4 fragColor = diffuseColor;\n\n        if (dashMode > 0){\n            vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;\n            float dashPosition = fract(pos.x / (max(1.0, dashSize) * pixelRatio));\n            float maskIndex = floor(dashPosition * maskLength);\n            float maskTest = floor(255.0 / pow(2.0, maskIndex));\n            fragColor = (mod(maskTest, 2.0) < 1.0) ? vec4(1.0, 1.0, 1.0, 0.0) : diffuseColor;\n            if (fragColor.a < 0.005) {\n                discard;\n            }\n        }\n\n        #include <logdepthbuf_fragment>\n        \n        gl_FragColor = fragColor;\n\n        #include <premultiplied_alpha_fragment>\n        \n        #if defined( TONE_MAPPING )\n            gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n        #endif\n        \n        gl_FragColor = linearToOutputTexel( gl_FragColor );\n        #ifdef USE_FOG\n            #ifdef FOG_EXP2\n                float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n            #else\n                float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n            #endif\n            gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n        #endif\n    }\n\n    "},s.ShaderPass2=function(e,t){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1,this.textureID=void 0!==t?t:"tDiffuse",e&&(this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},s.ShaderPass2.prototype={constructor:s.ShaderPass2,render:function(e,t,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}};new THREE.Vector3(0,0,0),["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["uniform sampler2D tDiffuse;","uniform sampler2D tID;","uniform int objID;","uniform vec3 objIDv3;","uniform float highlightIntensity;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","if (objID != 0) {","vec4 idAtPixel = texture2D(tID, vUv);","vec3 idDelta = abs(idAtPixel.rgb - objIDv3.rgb);","if (max(max(idDelta.r, idDelta.g), idDelta.b) < 1e-3) {","texel.rgb += highlightIntensity * 0.2;","}","}","gl_FragColor = texel;","}"].join("\n");s.PhongLightingMaterial=function(e){THREE.ShaderMaterial.call(this),this.type="PhongLightingMaterial",this.color=new THREE.Color(16777215),this.specular=new THREE.Color(1118481),this.shininess=30,this.emissive=new THREE.Color(0),this.map=null,this.defines={},this.uniforms=THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.lights,{diffuse:{value:new THREE.Color(16711680)},opacity:{value:1},specular:{value:new THREE.Color(1118481)},shininess:{value:30},emissive:{value:new THREE.Color(0)}}]),this.vertexShader=["varying vec3 vViewPosition;","varying vec3 vNormal;","#include <uv_pars_vertex>","#include <common>","#include <logdepthbuf_pars_vertex>","void main() {","   #include <uv_vertex>","   #include <begin_vertex>","   #include <project_vertex>","\t#include <logdepthbuf_vertex>","   #include <beginnormal_vertex>","   #include <defaultnormal_vertex>","   vNormal = normalize( transformedNormal );","   vViewPosition = - mvPosition.xyz;","}"].join("\n"),this.fragmentShader=["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 specular;","uniform float shininess;","uniform vec3 emissive;","#include <common>","#include <uv_pars_fragment>","#include <map_pars_fragment>","#include <packing>","#include <bsdfs>","#include <lights_pars>","#include <lights_phong_pars_fragment>","#include <specularmap_pars_fragment>","#include <logdepthbuf_pars_fragment>","void main() {","\t#include <logdepthbuf_fragment>","   vec4 diffuseColor = vec4( diffuse, opacity );","#ifdef USE_MAP","   vec4 texelColor = texture2D( map, vUv );","   texelColor = mapTexelToLinear( texelColor );","   diffuseColor = vec4(texelColor.rgb, opacity);","#endif","   ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","   vec3 totalEmissiveRadiance = emissive;","   float specularStrength = 1.0;","   #include <normal_flip>","   #include <normal_fragment>","   #include <lights_phong_fragment>","   #include <lights_template>","   vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","   gl_FragColor = vec4( outgoingLight, diffuseColor.a );","   #if defined( TONE_MAPPING )","       gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );","   #endif","   gl_FragColor = linearToOutputTexel( gl_FragColor );","}"].join("\n"),this.lights=!0,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},void 0!==e&&(void 0!==e.attributes&&console.error("PhongLightingMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e)),this.refreshUniforms()},s.PhongLightingMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),s.PhongLightingMaterial.prototype.constructor=s.PhongLightingMaterial,s.PhongLightingMaterial.prototype.isShaderMaterial=!0,s.PhongLightingMaterial.prototype.copy=function(e){return THREE.ShaderMaterial.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.emissive.copy(e.emissive),this},s.PhongLightingMaterial.prototype.refreshUniforms=function(){this.uniforms.diffuse.value.set(this.color),this.uniforms.opacity.value=this.opacity,this.uniforms.specular.value.set(this.specular),this.uniforms.shininess.value=this.shininess,this.uniforms.emissive.value.set(this.emissive),this.uniforms.map.value=this.map}
;var y=["GeometricContext geometry;","geometry.position = - vViewPosition;","#if NUM_CLIPPING_PLANES == 1","\tif (gl_FrontFacing) geometry.normal = normal;","\telse if (fillFaceClipDistance < 0.0) geometry.normal = -clippingPlanes[0].xyz;","\telse geometry.normal = -normal;","#else","\tgeometry.normal = normal;","#endif","geometry.viewDir = normalize( vViewPosition );","IncidentLight directLight;","#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )","\tPointLight pointLight;","\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {","\t\tpointLight = pointLights[ i ];","\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );","\t\t#ifdef USE_SHADOWMAP","\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;","\t\t#endif","\t\tRE_Direct( directLight, geometry, material, reflectedLight );","\t}","#endif","#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )","\tSpotLight spotLight;","\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {","\t\tspotLight = spotLights[ i ];","\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );","\t\t#ifdef USE_SHADOWMAP","\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;","\t\t#endif","\tRE_Direct( directLight, geometry, material, reflectedLight );","\t}","#endif","#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )","\tDirectionalLight directionalLight;","\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {","\t\tdirectionalLight = directionalLights[ i ];","\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );","\t\t#ifdef USE_SHADOWMAP","\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;","\t\t#endif","\t\tRE_Direct( directLight, geometry, material, reflectedLight );","\t}","#endif","#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )","\tRectAreaLight rectAreaLight;","\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {","\t\trectAreaLight = rectAreaLights[ i ];","\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );","\t}","#endif","#if defined( RE_IndirectDiffuse )","\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );","\t#ifdef USE_LIGHTMAP","\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;","\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS","\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage","\t\t#endif","\t\tirradiance += lightMapIrradiance;","\t#endif","\t#if ( NUM_HEMI_LIGHTS > 0 )","\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {","\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );","\t\t}","\t#endif","\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )","\t\tirradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, 8 );","\t#endif","\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );","#endif","#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )","\tvec3 radiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_BlinnShininessExponent( material ), 8 );","\t#ifndef STANDARD","\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );","\t#else","\t\tvec3 clearCoatRadiance = vec3( 0.0 );","\t#endif","\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );","#endif"].join("\n"),M=["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","#include <common>","#include <packing>","#include <dithering_pars_fragment>","#include <color_pars_fragment>","#include <uv_pars_fragment>","#include <uv2_pars_fragment>","#include <map_pars_fragment>","#include <alphamap_pars_fragment>","#include <aomap_pars_fragment>","#include <lightmap_pars_fragment>","#include <emissivemap_pars_fragment>","#include <envmap_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>","#include <specularmap_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","void main() {","\t#include <clipping_planes_fragment>","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;","\t#include <logdepthbuf_fragment>","\t#include <map_fragment>","\t#include <color_fragment>","\t#include <alphamap_fragment>","\t#include <alphatest_fragment>","\t#include <specularmap_fragment>","\t#include <normal_flip>","\t#include <normal_fragment>","\t#include <emissivemap_fragment>","   float fillFaceClipDistance = 0.0;","   #if NUM_CLIPPING_PLANES == 1","       vec4 plane = clippingPlanes[ 0 ];","\t    fillFaceClipDistance = dot( vViewPosition, plane.xyz ) - plane.w;","   #endif","\t#include <lights_phong_fragment>","\t#include <lights_fillFace_template>","\t#include <aomap_fragment>","\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","\t#include <envmap_fragment>","\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <premultiplied_alpha_fragment>","\t#include <dithering_fragment>","   #include <fog_fragment>","}"].join("\n"),E=["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif","#include <common>","#include <uv_pars_vertex>","#include <uv2_pars_vertex>","#include <displacementmap_pars_vertex>","#include <envmap_pars_vertex>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","void main() {","#include <uv_vertex>","#include <uv2_vertex>","#include <color_vertex>","#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","vNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>","#include <displacementmap_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <envmap_vertex>","#include <shadowmap_vertex>","#include <fog_vertex>","}"].join("\n"),b=["#define PHYSICAL","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif","#include <common>","#include <uv_pars_vertex>","#include <uv2_pars_vertex>","#include <displacementmap_pars_vertex>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <specularmap_pars_fragment>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","void main() {","#include <uv_vertex>","#include <uv2_vertex>","#include <color_vertex>","#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","vNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>","#include <displacementmap_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>","#include <fog_vertex>","}"].join("\n"),x=["#define PHYSICAL","uniform vec3 diffuse;","uniform vec3 emissive;","uniform float roughness;","uniform float metalness;","uniform float opacity;","#ifndef STANDARD","uniform float clearCoat;","uniform float clearCoatRoughness;","#endif","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif","#include <common>","#include <packing>","#include <dithering_pars_fragment>","#include <color_pars_fragment>","#include <uv_pars_fragment>","#include <uv2_pars_fragment>","#include <map_pars_fragment>","#include <alphamap_pars_fragment>","#include <aomap_pars_fragment>","#include <lightmap_pars_fragment>","#include <emissivemap_pars_fragment>","#include <envmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <cube_uv_reflection_fragment>","#include <lights_pars>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>","#include <roughnessmap_pars_fragment>","#include <metalnessmap_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","void main() {","#include <clipping_planes_fragment>","vec4 diffuseColor = vec4( diffuse, opacity );","vec3 totalEmissiveRadiance = emissive;","#include <logdepthbuf_fragment>","#include <map_fragment>","#include <color_fragment>","#include <alphamap_fragment>","#include <alphatest_fragment>","#include <specularmap_fragment>","#include <roughnessmap_fragment>","#include <metalnessmap_fragment>","#include <normal_flip>","#include <normal_fragment>","#include <emissivemap_fragment>","const mat4 diffuseMatrix = mat4(-0.07425443828105927, -0.05652861297130585, 0.12247831374406815, 0.2297295778989792,","                               -0.05652860924601555, 0.034799136221408844, -0.08437120914459229, -0.13896968960762024,","                               0.12247832119464874, -0.08437121659517288, 0.021763987839221954, 0.12510454654693604,","                               0.2297295778989792, -0.13896968960762024, 0.12510454654693604, 0.6190560460090637);","const vec3 sunDir = vec3(-0.6632131338119507, 0.5486575961112976, -0.509041428565979);","vec3 viewDir = normalize( vViewPosition );","vec4 diffuseDir = diffuseMatrix * vec4(normal, 1.0);","float diffuseTerm = dot(vec4(normal, 1.0), diffuseDir);","float nv = max(dot(normal, -viewDir), 0.0);","float vl = max(dot(viewDir, sunDir), 0.0);","diffuseTerm = diffuseTerm + (nv * (1.0 - vl)) * 0.8;","vec3 H = -normalize(sunDir + viewDir);","float nh = max(dot(normal, H), 0.0);","float specularTerm = pow(nh, 100.0);","vec3 color = 1.05 * vec3(0.5, 0.497, 0.49) * (diffuse * diffuseTerm + vec3(specularTerm)) + diffuse * 0.5;","vec3 outgoingLight = color + totalEmissiveRadiance;","gl_FragColor = vec4( outgoingLight, diffuseColor.a );","#include <tonemapping_fragment>","#include <encodings_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>","#include <fog_fragment>","}"].join("\n"),I=["#define PHYSICAL","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif","#ifdef USE_INSTANCE","   attribute float vState;","   attribute float vState2;","   attribute float vClipping;","   varying float fClipping;","   varying float fState;","   attribute vec4 aColor;","   varying vec4 vaColor;","   attribute vec3 mcol0;","   attribute vec3 mcol1;","   attribute vec3 mcol2;","   attribute vec3 mcol3;","   #if defined(USE_MAP)||defined(USE_BUMPMAP) ","       attribute vec2 muvCol0;","       attribute vec2 muvCol1;","       attribute vec2 muvCol2;","   #endif","   #if defined(USE_LIGHTMAP)","       attribute vec4 uv2OffsetRepeat;","   #endif","#endif","#include <common>","#include <uv_pars_vertex>","#include <uv2_pars_vertex>","#include <displacementmap_pars_vertex>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <specularmap_pars_fragment>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","#include <view_shed_pars_vertex>","varying vec4 wPositionForInnerClipping;","#ifdef USE_FILLPATTERN","   varying vec4 vClipPosition;","#endif","#include <heightLimit_pars_vertex>","mat3 inverse_mat3(in mat3 m)","{","   float determinant =","    m[0][0] * (m[1][1] * m[2][2] - m[2][1] * m[1][2])","    - m[1][0] * (m[0][1] * m[2][2] - m[2][1] * m[0][2])","    + m[2][0] * (m[0][1] * m[1][2] - m[1][1] * m[0][2]);","    mat3 inverse;","    inverse[0][0] = + (m[1][1] * m[2][2] - m[2][1] * m[1][2]);","    inverse[1][0] = - (m[1][0] * m[2][2] - m[2][0] * m[1][2]);","    inverse[2][0] = + (m[1][0] * m[2][1] - m[2][0] * m[1][1]);","    inverse[0][1] = - (m[0][1] * m[2][2] - m[2][1] * m[0][2]);","    inverse[1][1] = + (m[0][0] * m[2][2] - m[2][0] * m[0][2]);","    inverse[2][1] = - (m[0][0] * m[2][1] - m[2][0] * m[0][1]);","    inverse[0][2] = + (m[0][1] * m[1][2] - m[1][1] * m[0][2]);","    inverse[1][2] = - (m[0][0] * m[1][2] - m[1][0] * m[0][2]);","    inverse[2][2] = + (m[0][0] * m[1][1] - m[1][0] * m[0][1]);","    inverse /= determinant;","    return inverse;","}","void main() {","#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )","   vUv = uv -  offsetRepeat.xy;","   vUv = mat2(rotateMatrix) * vec2(vUv.x , vUv.y) ;","   vUv = vUv * offsetRepeat.zw;","#endif","#include <uv2_vertex>","#include <color_vertex>","#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#if (defined(USE_MAP)||defined(USE_BUMPMAP)) && defined(USE_INSTANCE)  ","   vUv = vec2(mat3(vec3(muvCol0, 0.0),","                   vec3(muvCol1, 0.0),","                   vec3(muvCol2, 1.0)) * vec3(uv, 1.0));","   vUv = vUv -  offsetRepeat.xy;","   vUv = mat2(rotateMatrix) * vec2(vUv.x, vUv.y) ;","   vUv = vUv * offsetRepeat.zw;","#endif","#if defined(USE_LIGHTMAP) && defined(USE_INSTANCE)  ","   vUv2.x = uv2OffsetRepeat.x*vUv2.x/ 65535.0 + uv2OffsetRepeat.z ;","   vUv2.y = uv2OffsetRepeat.y*vUv2.y/ 65535.0 + uv2OffsetRepeat.w ;","#endif","vec3 transformed = vec3( position );","#ifdef USE_INSTANCE","vaColor = aColor;","fClipping = vClipping;","#ifdef INSTANCE_STATE_SECONDARY","fState = vState2;","#else","fState = vState;","#endif","transformed = vec3(mat4(vec4(mcol0, 0.0),","                   vec4(mcol1, 0.0),","                   vec4(mcol2, 0.0),","                   vec4(mcol3, 1.0)) * vec4(transformed, 1.0));","#ifdef USE_INSTANCE_NORMAL","    mat3 normalMat = mat3(mcol0, mcol1, mcol2);","    normalMat = inverse_mat3(normalMat);","    normalMat = transpose(normalMat);","    transformedNormal = normalMat * objectNormal;","    transformedNormal = normalMatrix * transformedNormal;","#ifdef FLIP_SIDED","   transformedNormal = - transformedNormal;","#endif","    transformedNormal = normalize( transformedNormal );","#endif","#endif","#ifndef FLAT_SHADED","vNormal = normalize( transformedNormal );","#endif","#include <displacementmap_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","vViewPosition = - mvPosition.xyz;","#ifdef USE_FILLPATTERN","    vClipPosition = gl_Position;","#endif","wPositionForInnerClipping = modelMatrix * vec4( transformed, 1.0 );","#include <heightLimit_vertex>","#include <worldpos_vertex>","#include <shadowmap_vertex>","#include <fog_vertex>","vec3 vsWorldPosition = vec3(modelMatrix * vec4(transformed, 1.0));","#include <view_shed_vertex>","}"].join("\n"),T=["#define PHYSICAL","uniform vec3 diffuse;","uniform vec3 emissive;","uniform float roughness;","uniform float metalness;","uniform float opacity;","uniform float imageFade;","#ifndef STANDARD","uniform float clearCoat;","uniform float clearCoatRoughness;","#endif","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif","#ifdef USE_INSTANCE","   varying vec4 vaColor;","   varying float fState;","   varying float fClipping;","#endif","#ifdef USE_FILLPATTERN","   uniform vec2 viewportSize;","   uniform sampler2D fillMap;","   varying vec4 vClipPosition;","#endif","varying vec4 wPositionForInnerClipping;","uniform float shift;","uniform float A;","uniform float B;","uniform float C;","uniform float D;","uniform float E;","uniform float F;","uniform float scale;","uniform vec4 blinkColor;","uniform float blinkCoefficient;","uniform float colorState;","uniform int localClipping;","uniform int innerClipping;","uniform mat4 orthoViewProjMatrix;","#include <heightLimit_pars_fragment>","vec3 toneMapCanonFilmic(vec3 color)","{","    color *= (1.0 / shift);","    return (((color * (A * color + C * B)) / (color * (A * color + B) + D * F))) * (1.0 / scale);","}","#include <common>","#include <packing>","#include <dithering_pars_fragment>","#include <color_pars_fragment>","#include <uv_pars_fragment>","#include <uv2_pars_fragment>","#include <map_pars_fragment>","#include <aomap_pars_fragment>","#include <lightmap_pars_fragment>","#include <emissivemap_pars_fragment>","#include <envmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <cube_uv_reflection_fragment>","#include <lights_pars>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>","#include <roughnessmap_pars_fragment>","#include <metalnessmap_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <csm_fragment>","#include <clipping_planes_pars_fragment>","#include <view_shed_pars_fragment>","vec3 hdrDecode(in vec4 rgbm) {","const float rgbmScale = 2.82842712;","vec3 r = rgbm.rgb * (rgbmScale * (1.0 - rgbm.a));","return r * r;","}","vec3 linearToGammaUnreal(in vec3 rgb) {","    return rgb / (rgb + 0.187) * 1.035 *(0.5 / shift);","}","bool floatEqual(in float x, in float y) {","    return (x >= y - 0.01) && (x <= y + 0.01);","}","bool floatNotEqual(in float x, in float y) {","    return (x <= y - 0.01) || (x >= y + 0.01);","}","void main() {","\n        if (innerClipping > 0)\n        {\n            vec4 clipPosition = orthoViewProjMatrix * wPositionForInnerClipping;\n            clipPosition.xyz /= clipPosition.w;\n            if (clipPosition.x >= -1.0 && clipPosition.x <= 1.0 &&\n                clipPosition.y >= -1.0 && clipPosition.y <= 1.0 && clipPosition.z >= -1.0) \n            {\n                discard;\n            }\n        }\n        else\n        {\n            #if NUM_CLIPPING_PLANES > 0\n                #ifdef USE_INSTANCE\n                    if ((localClipping == 1 && floatEqual(fClipping, 6.0)) || localClipping == -1) {\n                        for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n                            vec4 plane = clippingPlanes[ i ];\n                            if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n                        }\n                        #if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n                            bool clipped = true;\n                            for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n                                vec4 plane = clippingPlanes[ i ];\n                                clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n                            }\n                            if ( clipped ) discard;\n                        #endif\n                    }\n                #else\n                    for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n                        vec4 plane = clippingPlanes[ i ];\n                        if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n                    }\n                    #if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n                        bool clipped = true;\n                        for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n                            vec4 plane = clippingPlanes[ i ];\n                            clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n                        }\n                        if ( clipped ) discard;\n                    #endif\n                #endif\n            #endif\n        }\n    ","#ifdef USE_FILLPATTERN","    vec4 clipPosition = vClipPosition;","    clipPosition.xyz /= clipPosition.w; ","    clipPosition.xyz = clipPosition.xyz * 0.5 + 0.5; ","    vec2 screenPosition = vec2(clipPosition.x * viewportSize.x, clipPosition.y * viewportSize.y);","    float flag = texture2D(fillMap, vec2(screenPosition.x/32.0, screenPosition.y/32.0)).r;","    if(flag == 0.0)","    {","        discard;","    }","#endif","vec4 diffuseColor = vec4( diffuse, opacity );","#ifdef USE_INSTANCE","   if (floatEqual(fState, -1.0)) ","       discard;","   if (floatNotEqual(fState, 0.0)) ","       diffuseColor = vaColor;","#endif","vec4 selectedColor = diffuseColor;","#ifndef USE_LIGHTMAP","diffuseColor.rgb = pow(diffuseColor.rgb, vec3(GAMMA_FACTOR));","#endif","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","vec3 totalEmissiveRadiance = emissive;","#ifdef USE_INSTANCE","   if (floatEqual(fState, 3.0))","       totalEmissiveRadiance = vec3(0.0);","#endif","#include <logdepthbuf_fragment>","vec4 gamaColor = diffuseColor ;","#ifdef USE_MAP","   vec4 texelColor = texture2D( map, vUv );","   texelColor = mapTexelToLinear( texelColor );","   diffuseColor = vec4( mix(diffuseColor.rgb , texelColor.rgb, imageFade), opacity);","   #ifdef USE_INSTANCE","       if (floatNotEqual(fState, 0.0)) ","           diffuseColor.a = vaColor.a;","         if (floatEqual(fState, 3.0))","             diffuseColor = gamaColor;","   #endif","#endif","#include <color_fragment>","#include <alphamap_fragment_override>","#include <alphatest_fragment>","#include <specularmap_fragment>","#include <roughnessmap_fragment>","#include <metalnessmap_fragment>","float flipNormal = 1.0;","#include <normal_fragment>","#include <emissivemap_fragment>","#ifdef USE_INSTANCE","   if (floatEqual(fState, 3.0)){","       roughnessFactor = 1.0;","       metalnessFactor = 0.0;","   }","#endif","#include <lights_physical_fragment>"," GeometricContext geometry;","geometry.position = - vViewPosition;","geometry.normal = normal;","geometry.viewDir = normalize( vViewPosition );","IncidentLight directLight;","#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )","PointLight pointLight;","for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {"," pointLight = pointLights[ i ];","getPointDirectLightIrradiance( pointLight, geometry, directLight );","#ifdef USE_SHADOWMAP","        directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;","        #endif","        RE_Direct( directLight, geometry, material, reflectedLight );","    }","#endif","#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )","    SpotLight spotLight;","    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {","        spotLight = spotLights[ i ];","        getSpotDirectLightIrradiance( spotLight, geometry, directLight );","        #ifdef USE_SHADOWMAP","        if(opacity > 0.8)","        directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;","        #endif","        RE_Direct( directLight, geometry, material, reflectedLight );","    }","#endif","#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM )","\n            DirectionalLight directionalLight;\n            float shadowValue = calcShadowFactor(geometry.normal);\n        ","    for ( int i = 4; i < NUM_DIR_LIGHTS; i ++ ) {","        directionalLight = directionalLights[ i ];","        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );","        #ifdef USE_SHADOWMAP","        if(opacity > 0.8)","        directLight.color *= shadowValue;","        #endif","       RE_Direct( directLight, geometry, material, reflectedLight );","    }","#endif","\n        #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM )\n            DirectionalLight directionalLight;\n            for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n                directionalLight = directionalLights[ i ];\n                getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n                #ifdef USE_SHADOWMAP\n                if(opacity > 0.8)\n                directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n                #endif\n                RE_Direct( directLight, geometry, material, reflectedLight );\n            }\n        #endif\n        ","#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )","   RectAreaLight rectAreaLight;","    for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {","        rectAreaLight = rectAreaLights[ i ];","        RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );","    }","#endif","#if defined( RE_IndirectDiffuse )","    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );","    #if ( NUM_HEMI_LIGHTS > 0 )","       for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {","           irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );","       }","    #endif","    #if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )","       irradiance += getLightProbeIndirectIrradiance( geometry, 8 );","    #endif","    RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );","    #endif","    #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )","    vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );","    #ifndef STANDARD","    vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );","    #else","    vec3 clearCoatRadiance = vec3( 0.0 );","    #endif","    RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );","    #endif","#include <aomap_fragment>","vec3 diffuseSpecularEmissive = vec3(0.0);","#ifdef USE_LIGHTMAP","   #ifdef USE_COMPONENT_LIGHTMAP","       vec3 lightMapIrradiance = (texture2D(lightMap, vUv2)).rgb * lightMapIntensity;","   #else","       vec3 lightMapIrradiance = hdrDecode(texture2D(lightMap, vUv2)) * lightMapIntensity;","   #endif","   vec3 diffuseSpecular =  clamp(diffuseColor.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0)) * lightMapIrradiance;","   diffuseSpecularEmissive = diffuseSpecular + diffuseColor.rgb * 0.0;","#endif","vec3 outgoingLight = diffuseSpecularEmissive + reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","#ifdef USE_COLORWITHOUTLIGHT","   gl_FragColor = diffuseColor;","#else","   gl_FragColor = vec4( outgoingLight, diffuseColor.a );","#endif","#if defined( TONE_MAPPING )","   #if defined(USE_LIGHTMAP)","       gl_FragColor.rgb = linearToGammaUnreal(diffuseSpecularEmissive.xyz );","   #else","       gl_FragColor.rgb = toneMapCanonFilmic( gl_FragColor.rgb );","   #endif","#endif","#ifdef USE_INSTANCE","       if (floatEqual(fState, 2.0))","           gl_FragColor = selectedColor;","       if (floatEqual(fState, 5.0) && floatEqual(colorState, 1.0)) {","           gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);","       }","#else","       if (floatEqual(colorState, 1.0)) {","           gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);","       }","       if (floatEqual(colorState, 2.0))","           gl_FragColor = selectedColor;","#endif","#include <view_shed_fragment>","#ifndef USE_LIGHTMAP","  #include <encodings_fragment>","#endif","#include <heightLimit_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>","#include <fog_fragment>","}"].join("\n");!function(){s.MapTileShader={vertex:"\n        #define PHONG\n        varying vec3 vViewPosition;\n        #ifndef FLAT_SHADED\n            varying vec3 vNormal;\n        #endif\n        #include <common>\n        #include <uv_pars_vertex>\n        #include <uv2_pars_vertex>\n        #include <displacementmap_pars_vertex>\n        #include <envmap_pars_vertex>\n        #include <color_pars_vertex>\n        #include <fog_pars_vertex>\n        #include <morphtarget_pars_vertex>\n        #include <skinning_pars_vertex>\n        #include <shadowmap_pars_vertex>\n        #include <logdepthbuf_pars_vertex>\n        #ifdef USE_CLIPPING\n        #include <clipping_planes_pars_vertex>\n        #endif\n\n        uniform mat4 u_CullOrthoMatrix;\n        varying vec3 v_CullOrthoPosition;\n\n        void main()\n        {\n            vec4 othPos = u_CullOrthoMatrix * (modelMatrix * vec4(position, 1.0));\n            othPos /= othPos.w;\n            v_CullOrthoPosition = othPos.xyz;\n\n            #include <uv_vertex>\n            #include <uv2_vertex>\n            #include <color_vertex>\n            #include <beginnormal_vertex>\n            #include <morphnormal_vertex>\n            #include <skinbase_vertex>\n            #include <skinnormal_vertex>\n            #include <defaultnormal_vertex>\n            #ifndef FLAT_SHADED\n                vNormal = normalize( transformedNormal );\n            #endif\n            #include <begin_vertex>\n            #include <displacementmap_vertex>\n            #include <morphtarget_vertex>\n            #include <skinning_vertex>\n\n            #ifdef USE_SKINNING\n                vec4 wPosition = modelMatrix * skinned;\n            #else\n                vec4 wPosition = modelMatrix * vec4( transformed, 1.0 );\n            #endif\n\n            vec4 mvPosition = viewMatrix * wPosition;\n            gl_Position = projectionMatrix * mvPosition;\n    \n            #include <logdepthbuf_vertex>\n            vViewPosition = - mvPosition.xyz;        \n            #ifdef USE_CLIPPING\n            #include <clipping_planes_vertex>\n            #endif\n            #include <worldpos_vertex>\n            #include <envmap_vertex>\n            #include <shadowmap_vertex>\n            #include <fog_vertex>\n        }",
fragment:"\n        #define PHONG\n        uniform vec3 diffuse;\n        uniform vec3 emissive;\n        uniform vec3 specular;\n        uniform float shininess;\n        uniform float opacity;\n        #include <common>\n        #include <packing>\n        #include <dithering_pars_fragment>\n        #include <color_pars_fragment>\n        #include <uv_pars_fragment>\n        #include <uv2_pars_fragment>\n        #include <map_pars_fragment>\n        #include <alphamap_pars_fragment>\n        #include <aomap_pars_fragment>\n        #include <lightmap_pars_fragment>\n        #include <emissivemap_pars_fragment>\n        #include <envmap_pars_fragment>\n        #include <gradientmap_pars_fragment>\n        #include <fog_pars_fragment>\n        #include <bsdfs>\n        #include <lights_pars>\n        #include <lights_phong_pars_fragment>\n        #include <shadowmap_pars_fragment>\n        #include <bumpmap_pars_fragment>\n        #include <normalmap_pars_fragment>\n        #include <specularmap_pars_fragment>\n        #include <logdepthbuf_pars_fragment>\n        #include <csm_fragment>\n        #ifdef USE_CLIPPING\n        #include <clipping_planes_pars_fragment>\n        #endif\n\n        uniform float brightness;\n        uniform float contrast;\n        uniform float saturation;\n        uniform float hue;\n        uniform float gamma;\n        uniform vec4 customColor;\n        uniform float useCustomColor;\n\n        varying vec3 v_CullOrthoPosition;\n        uniform sampler2D  u_SamplerExcavation;\n        \n        vec2 postProjToScreen(vec2 position)\n        {\n            vec2 screenPos = position;\n            \n            return 0.5 *(vec2(screenPos.x, screenPos.y) + 1.0);\n        }\n\n        vec4 depthColor(vec4 color) \n        {\n            color.r = color.r * color.r * color.r;\n            color.g = color.g * color.g * color.g;\n            color.b = color.b * color.b;\n            return color;\n        }\n\n        vec3 computeContrast(vec3 rgb, float contrast) \n        {\n            vec3 color = mix(vec3(0.5), rgb, contrast);\n            color = clamp(color, 0.0, 1.0);\n            return color;\n        }\n\n        vec3 computeHue(vec3 rgb, float adjustment) \n        {\n            const mat3 toYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);\n            const mat3 toRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);\n            vec3 yiq = toYIQ * rgb;\n            float hue = atan(yiq.z, yiq.y) + adjustment;\n            float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);\n            vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));\n            vec3 final = toRGB * color;\n            final = clamp(final, 0.0, 1.0);\n            return final;\n        }\n\n        vec3 computeSaturation(vec3 rgb, float adjustment) \n        {\n            const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n            vec3 intensity = vec3(dot(rgb, W));\n            vec3 color = mix(intensity, rgb, adjustment);\n            color = clamp(color, 0.0, 1.0);\n            return color;\n        }\n\n        vec4 sampleAndBlend(float useCustom, vec4 customColor, vec4 earthColor, float brightness, float contrast, float hue, float saturation, float gamma)\n        {\n            vec4 value = earthColor;\n            if (useCustom == 1.0) {\n                value = depthColor(value);\n                value.rgb *= customColor.rgb;\n            }\n            vec3 color = value.rgb;\n            float alpha = value.a;\n            \n            //brightness\n            color = mix(vec3(0.0, 0.0, 0.0), color, brightness);\n            \n            //contrast\n            color = computeContrast(color, contrast);\n\n            //hue\n            color = computeHue(color, hue);\n\n            //saturation\n            color = computeSaturation(color, saturation);\n\n            //gamma\n            color = pow(color, vec3(gamma));\n\n            return vec4(color, alpha);\n        }\n\n        void main()\n        {   \n            vec2 uv = postProjToScreen(v_CullOrthoPosition.xy);\n            if(uv.x >= 0.0 && uv.x <= 1.0 && uv.y >= 0.0 && uv.y <= 1.0)\n            {\n                vec4 color = texture2D(u_SamplerExcavation, uv);\n                if(color.r > 0.0001)\n                {\n                    discard;\n                }\n            } \n              \n            #ifdef USE_CLIPPING\n            #include <clipping_planes_fragment>\n            #endif\n\n            vec4 diffuseColor = vec4( diffuse, opacity );\n            ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n            vec3 totalEmissiveRadiance = emissive;        \n            #include <logdepthbuf_fragment>\n            #include <map_fragment>\n            #include <color_fragment>\n            #include <alphamap_fragment>\n            #include <alphatest_fragment>\n            #include <specularmap_fragment>\n            #include <normal_flip>\n            #include <normal_fragment>\n            #include <emissivemap_fragment>\n            #include <lights_phong_fragment>\n            \n            GeometricContext geometry;\n            geometry.position = - vViewPosition;\n            geometry.normal = normal;\n            geometry.viewDir = normalize( vViewPosition );\n            IncidentLight directLight;\n            #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM )\n                DirectionalLight directionalLight;\n                float shadowValue = calcShadowFactor(geometry.normal);\n                shadowValue = max(shadowValue, 0.1);\n                #ifdef USE_SHADOWMAP\n                if(opacity > 0.9)\n                    diffuseColor.rgb *= shadowValue;\n                #endif\n                for ( int i = 4; i < NUM_DIR_LIGHTS; i ++ ) {\n                    directionalLight = directionalLights[ i ];\n                    getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n                    #ifdef USE_SHADOWMAP\n                    if(opacity > 0.9)\n                        diffuseColor.rgb *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n                    #endif\n                }\n            #endif\n\n            #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM )\n            DirectionalLight directionalLight;\n            for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n                directionalLight = directionalLights[ i ];\n                getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n                #ifdef USE_SHADOWMAP\n                if(opacity > 0.9)\n                    diffuseColor.rgb *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n                #endif\n            }\n            #endif\n            \n            vec3 outgoingLight = diffuseColor.rgb;\n            #include <envmap_fragment>\n            vec4 resultColor = vec4( outgoingLight, diffuseColor.a );\n            gl_FragColor = sampleAndBlend(useCustomColor, customColor, resultColor, brightness, contrast, hue, saturation, gamma);\n\n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n            #include <fog_fragment>\n            #include <premultiplied_alpha_fragment>\n            #include <dithering_fragment>        \n        }"}}(),s.DepthParseShader={depth_parse_fragment:"\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform mat4 cameraProjection;\n        uniform mat4 inverseProjection;\n        uniform vec4 viewport;\n\n        float getViewZ( const in float depth ) {\n            #if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n                float near = cameraNear;\n                float far = cameraFar;\n                float log2Depth = depth * 2.0 / logDepthBufFC;\n                float depthFromCamera = pow(2.0, log2Depth) - 1.0;\n                float a = far * (1.0 - near / depthFromCamera) / (far - near);\n                float viewZ = perspectiveDepthToViewZ( a, cameraNear, cameraFar );\n                if (depth == 0.0) \n                {\n                    viewZ = perspectiveDepthToViewZ( 1.0, cameraNear, cameraFar );\n                }\n            #else\n                float viewZ = perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n            #endif\n            return viewZ;\n        }\n\n        vec3 getViewPosition( const in float depth ) {\n            #if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n                float near = cameraNear;\n                float far = cameraFar;\n                float log2Depth = depth * 2.0 / logDepthBufFC;\n                float depthFromCamera = pow(2.0, log2Depth) - 1.0;\n                float x = 2.0 * (gl_FragCoord.x - viewport.x) / viewport.z - 1.0;\n                float y = 2.0 * (gl_FragCoord.y - viewport.y) / viewport.w - 1.0;\n                float z = 2.0 * (depthFromCamera - near) / (far-near) - 1.0;\n                vec4 viewPosition = vec4(x, y, z, 1.0);\n                viewPosition *= depthFromCamera;\n                viewPosition = inverseProjection * viewPosition;\n            #else\n                float viewZ = getViewZ(depth);\n                float clipW = cameraProjection[2][3] * viewZ + cameraProjection[3][3];\n                vec4 clipPosition = vec4( ( vec3( gl_FragCoord.xy / viewport.zw, depth ) - 0.5 ) * 2.0, 1.0 );\n                clipPosition *= clipW; //unprojection\n                vec4 viewPosition = inverseProjection * clipPosition;\n            #endif\n\n            return viewPosition.xyz;\n        }\n    "},THREE.ShaderChunk.meshphong_id_vert=E,THREE.ShaderChunk.lights_fillFace_template=y,THREE.ShaderChunk.fillFaceFragment=M,THREE.ShaderChunk.cloudStandardVertex=I,THREE.ShaderChunk.cloudStandardFragment=T,THREE.ShaderChunk.newStyleVertex=b,THREE.ShaderChunk.newStyleFragment=x,THREE.ShaderChunk.view_shed_pars_vertex=s.ViewshedShader.view_shed_pars_vertex,THREE.ShaderChunk.view_shed_pars_fragment=s.ViewshedShader.view_shed_pars_fragment,THREE.ShaderChunk.view_shed_vertex=s.ViewshedShader.view_shed_vertex,THREE.ShaderChunk.view_shed_fragment=s.ViewshedShader.view_shed_fragment,THREE.ShaderChunk.heightLimit_pars_vertex=s.HeightLimitShader.heightLimit_pars_vertex,THREE.ShaderChunk.heightLimit_vertex=s.HeightLimitShader.heightLimit_vertex,THREE.ShaderChunk.heightLimit_pars_fragment=s.HeightLimitShader.heightLimit_pars_fragment,THREE.ShaderChunk.heightLimit_fragment=s.HeightLimitShader.heightLimit_fragment,THREE.ShaderChunk.map_tile_vertex=s.MapTileShader.vertex,THREE.ShaderChunk.map_tile_fragment=s.MapTileShader.fragment,THREE.ShaderChunk.depth_parse_fragment=s.DepthParseShader.depth_parse_fragment,THREE.ShaderChunk.csm_fragment=s.CSMShader.csm_fragment,THREE.ShaderChunk.alphamap_fragment_override="#if defined(USE_MAP)&&defined(USE_ALPHAMAP)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiffuseColor.a *= texture2D( map, vUv ).a;\n\t\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t\t\t\t\t\t\t",THREE.ShaderLib.fillFacePhong={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.gradientmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},specular:{value:new THREE.Color(1118481)},shininess:{value:30}}]),vertexShader:THREE.ShaderChunk.meshphong_id_vert,fragmentShader:THREE.ShaderChunk.fillFaceFragment},THREE.ShaderLib.newStyle={vertexShader:THREE.ShaderChunk.newStyleVertex,fragmentShader:THREE.ShaderChunk.newStyleFragment},THREE.ShaderLib.cloudStandard={vertexShader:THREE.ShaderChunk.cloudStandardVertex,fragmentShader:THREE.ShaderChunk.cloudStandardFragment},s.WaterShader={uniforms:{waterColor:{type:"v4",value:null},reflectivity:{type:"f",value:0},flowTime:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new THREE.Vector4},sunDirection:{type:"v3",value:new THREE.Vector3}},vertexShader:["#include <fog_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec2 worldPositionXZ;","varying vec3 vToEye;","#include <clipping_planes_pars_vertex>","#include <common>","#include <logdepthbuf_pars_vertex>","void main() {","   vUv = uv;","   vCoord = textureMatrix * vec4( position, 1.0 );","   vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","   worldPositionXZ = (worldPosition.xz/worldPosition.w);","#ifdef USE_GLOBE","   worldPositionXZ = worldPositionXZ*max(1.0,pow(cameraPosition.y,0.05));","#endif","   vToEye = cameraPosition - worldPosition.xyz;","   gl_Position = projectionMatrix * (viewMatrix * worldPosition);","   #include <logdepthbuf_vertex>","   vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);","   #include <clipping_planes_vertex>","   #include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#ifdef USE_SHADOW","   uniform sampler2D tReflectionMap;","   uniform sampler2D tRefractionMap;","#endif","#ifdef USE_FLOWMAP","   uniform sampler2D tFlowMap;","#else","   uniform vec2 flowDirection;","#endif","const vec3 sunColor = vec3(1.0, 0.9803921568627451,0.803921568627451);","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","uniform vec4 waterColor;","uniform float reflectivity;","uniform vec4 config;","uniform float flowTime;","uniform vec3 sunDirection;","#include <clipping_planes_pars_fragment>","#include <logdepthbuf_pars_fragment>","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","varying vec2 worldPositionXZ;","void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection,in vec3 sunDir, inout vec3 diffuseColor, inout vec3 specularColor) {","   float diffuse = 0.5;","   vec3 _sunDir = normalize(sunDir);","   vec3 reflection = normalize( reflect( -_sunDir, surfaceNormal ) );","   diffuseColor += max( dot( _sunDir, surfaceNormal ), 0.0 ) * sunColor * diffuse;","   float direction = max( 0.0, dot( eyeDirection, reflection ) );","   specularColor += pow(direction, 300.0) * sunColor;","}","vec4 getNoise( vec2 uv, sampler2D normalSampler,float time) {","   vec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);","   vec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );","   vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );","   vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );","   vec4 noise = texture2D( normalSampler, uv0 ) +","       texture2D( normalSampler, uv1 ) +","       texture2D( normalSampler, uv2 ) +","       texture2D( normalSampler, uv3 );","   return noise * 0.5 - 1.0;","}","void main() {","   #include <clipping_planes_fragment>","   #include <logdepthbuf_fragment>","   float flowMapOffset0 = config.x;","   float flowMapOffset1 = config.y;","   float halfCycle = config.z;","   float scale = config.w*10.0;","   vec3 toEye = normalize( vToEye );","   vec2 flow;","#ifdef USE_FLOWMAP","   flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","#else","   flow = flowDirection;","#endif","   flow.x *= - 1.0;","   vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","   vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","   float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","   vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","   vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 )  );","   float theta = max( dot( toEye, normal ), 0.0 );","   float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","   vec3 coord = vCoord.xyz / vCoord.w;","   vec2 uvReflect = coord.xy + coord.z * normal.xz * 0.03;","   vec2 uvRefract = coord.xy + coord.z * normal.xz * 0.01;","   vec4 reflectColor;","   vec4 refractColor;","#ifdef USE_FLOWMAP","   reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uvReflect.x, uvReflect.y ));","#endif","#ifdef USE_SHADOW","   if(waterColor.a < 1.0){","       refractColor = texture2D( tRefractionMap, uvRefract );","   }","#endif","   vec3 _waterColor = waterColor.rgb;","   vec3 diffuseLight = vec3(0.0);","   vec3 specularLight = vec3(0.0);","   vec3 _noise = getNoise(-worldPositionXZ, tNormalMap0, flowTime).xyz;","   vec3 surfaceNormal = normalize(_noise.xzy * vec3( 1.5, 1.0, 1.5 ));","   sunLight( surfaceNormal.xyz, toEye,sunDirection, diffuseLight, specularLight);","   sunLight( surfaceNormal.xyz, toEye,vec3(-sunDirection.x,sunDirection.y,-sunDirection.z), diffuseLight, specularLight);","   sunLight( surfaceNormal.xyz, toEye,vec3(sunDirection.x,sunDirection.y,-sunDirection.z), diffuseLight, specularLight);","   sunLight( surfaceNormal.xyz, toEye,vec3(-sunDirection.x,sunDirection.y,sunDirection.z), diffuseLight, specularLight);","   sunLight( surfaceNormal.xyz, toEye,vec3(0,1,0), diffuseLight, specularLight);","   vec3 _reflectColor;","   #ifdef USE_SHADOW","       if(reflectColor.r<0.05 && reflectColor.g < 0.05 && reflectColor.b < 0.05){","           _reflectColor = vec3(_waterColor.r*1.5, _waterColor.g*1.4, _waterColor.b*1.3);","       }else{","           _reflectColor = mix(reflectColor.rgb, diffuseLight, 0.2);","       }","   #else","       _reflectColor = vec3(_waterColor.r*1.5, _waterColor.g*1.4, _waterColor.b*1.3);","   #endif","   vec3 _refractColor;","#ifdef USE_SHADOW","   if(waterColor.a < 1.0){","       _refractColor = refractColor.rgb*(1.0-waterColor.a) + _waterColor*waterColor.a;","   }else{","       _refractColor = vec3(_waterColor.r*0.45, _waterColor.g*0.55, _waterColor.b*0.75);","   }","#else","       _refractColor = vec3(_waterColor.r*0.45, _waterColor.g*0.55, _waterColor.b*0.75);","#endif","   vec3 finalColor = mix(_refractColor + specularLight, _reflectColor, reflectance);","   vec3 noiseScatter = max( 0.0, dot( surfaceNormal, toEye ) ) * _waterColor;","   finalColor = mix(finalColor, noiseScatter, 0.4);","   gl_FragColor = vec4(finalColor, 1.0);","   #include <tonemapping_fragment>","   #include <encodings_fragment>","   #include <fog_fragment>","}"].join("\n")},s.CloudStandardMaterial=function(e){THREE.MeshStandardMaterial.call(this),this.type="cloudStandard",this.roughness=1,this.metalness=0,this.originRoughness=1,this.originMetalness=0,this.pureColor=0,this.textureColor=0,this.imageFade=1,this._referenceCount=1,this._imageByteSize=0,this.shift=.5,this.A=.64,this.B=.03,this.C=.02,this.D=.54,this.E=0,this.F=.81,this.scale=.92,this.receiveIBL=!0;var t=(new THREE.Color).setHex(3330982),i=[t.r,t.g,t.b,1];this.colorState=s.EnumShaderColorState.NONE,this.blinkColor=(new THREE.Vector4).fromArray(i),this.blinkCoefficient=0,this.fillMap=null,this.viewportSize=new THREE.Vector2(0,0),this.tag=null,this.viewshedCount=-1,this.viewshedContents=[],this.viewshedDepthMaps=[],this.localClipping=-1,this.innerClipping=-1,this.orthoViewProjMatrix=new THREE.Matrix4,this.heightLimitSampler=null,this.heightColorSampler=null,this.heightLimitOrthoMatrix=new THREE.Matrix4,this.heightLimit=0,this.useHeightLimit=!1,this.useCSM=s.GlobalData.EnableCSM,this.useAlphaMap=!1,this.uniforms=THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,{emissive:{value:new THREE.Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}},{shift:{value:.5},A:{value:.64},B:{value:.03},C:{value:.02},D:{value:.54},E:{value:0},F:{value:.81},scale:{value:.92},colorState:{value:0},blinkColor:{value:(new THREE.Vector4).fromArray(i)},blinkCoefficient:{value:0},imageFade:{value:1}},{viewportSize:{value:new THREE.Vector2(0,0)},fillMap:{value:null}},{viewshedCount:{value:-1},viewshedContents:{value:[]},viewshedDepthMaps:{value:[]}},{localClipping:{value:-1},innerClipping:{value:this.innerClipping},orthoViewProjMatrix:{value:this.orthoViewProjMatrix}},{heightLimitSampler:{value:null},heightColorSampler:{value:null},heightLimitOrthoMatrix:{value:new THREE.Matrix4},heightLimit:{value:0},useHeightLimit:{value:!1}}]),this.vertexShader=THREE.ShaderChunk.cloudStandardVertex,this.fragmentShader=THREE.ShaderChunk.cloudStandardFragment,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},void 0!==e&&(void 0!==e.attributes&&console.error("IBLMaterial: attributes should now be defined in THREE.BufferGeometry instead."),void 0!=e.doubleSide&&e.doubleSide&&(this.side=THREE.DoubleSide),this.setValues(e)),this.lights&&(this.uniforms=THREE.UniformsUtils.merge([this.uniforms,THREE.UniformsLib.lights])),this.useCSM?this.defines.USE_CSM="":delete this.defines.USE_CSM,this.useAlphaMap?this.defines.USE_ALPHAMAP="":delete this.defines.USE_ALPHAMAP},s.CloudStandardMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype),s.CloudStandardMaterial.prototype.constructor=s.CloudStandardMaterial,s.CloudStandardMaterial.prototype.destroy=function(){THREE.MeshStandardMaterial.prototype.dispose.call(this),this.blinkColor=null,this.uniforms=null,this.defaultAttributeValues=null,this.lights=null},s.CloudStandardMaterial.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=this[t];void 0!==r&&(r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]="overdraw"===t?Number(i):i)}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},s.CloudStandardMaterial.prototype.copy=function(e){return THREE.MeshStandardMaterial.prototype.copy.call(this,e),this.shift=e.shift,this.A=e.A,this.B=e.B,this.C=e.C,this.D=e.D,this.E=e.E,this.F=e.F,this.scale=e.scale,this.colorState=e.colorState,this.blinkColor.copy(e.blinkColor),this.blinkCoefficient=e.blinkCoefficient,this.imageFade=e.imageFade,this.fillMap=e.fillMap,this.viewportSize.copy(e.viewportSize),this.localClipping=e.localClipping,this.innerClipping=e.innerClipping,this.orthoViewProjMatrix.copy(e.orthoViewProjMatrix),this.viewshedCount=e.viewshedCount,this.viewshedContents=e.viewshedContents,this.viewshedDepthMaps=e.viewshedDepthMaps,this.heightLimitSampler=e.heightLimitSampler,this.heightColorSampler=e.heightColorSampler,this.heightLimitOrthoMatrix=e.heightLimitOrthoMatrix,this.heightLimit=e.heightLimit,this.useHeightLimit=e.useHeightLimit,this.useCSM=e.useCSM,this},s.CloudStandardMaterial.prototype.refreshUniforms=function(){this.uniforms.shift.value=this.shift,this.uniforms.A.value=this.A,this.uniforms.B.value=this.B,this.uniforms.C.value=this.C,this.uniforms.D.value=this.D,this.uniforms.E.value=this.E,this.uniforms.F.value=this.F,this.uniforms.scale.value=this.scale,this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient,this.uniforms.colorState.value=this.colorState,this.uniforms.imageFade.value=this.imageFade,this.uniforms.fillMap.value=this.fillMap,this.uniforms.viewportSize.value=this.viewportSize,this.uniforms.localClipping.value=this.localClipping,this.uniforms.innerClipping.value=this.innerClipping,this.uniforms.orthoViewProjMatrix.value.copy(this.orthoViewProjMatrix),this.uniforms.viewshedCount.value=this.viewshedCount,this.uniforms.viewshedContents.value=this.viewshedContents,this.uniforms.viewshedDepthMaps.value=this.viewshedDepthMaps,this.viewshedCount>0?this.defines.VIEW_SHED_MODE="":delete this.defines.VIEW_SHED_MODE,this.heightLimitSampler?this.defines.HEIGHT_LIMIT_READ="":delete this.defines.HEIGHT_LIMIT_READ,this.uniforms.heightLimitOrthoMatrix.value=this.heightLimitOrthoMatrix,this.uniforms.heightLimitSampler.value=this.heightLimitSampler,this.uniforms.heightColorSampler.value=this.heightColorSampler,this.uniforms.heightLimit.value=this.heightLimit,this.uniforms.useHeightLimit.value=this.useHeightLimit,this.useCSM?this.defines.USE_CSM="":delete this.defines.USE_CSM,this.useAlphaMap?this.defines.USE_ALPHAMAP="":delete this.defines.USE_ALPHAMAP},s.CloudStandardMaterial.prototype.setBlinkColor=function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient,this.uniforms.colorState.value=s.EnumShaderColorState.BLINK},s.CloudStandardMaterial.prototype.updateBlinkUniformValue=function(e,t,i){this.uniforms.colorState.value=e,this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i},s.CloudStandardMaterial.prototype.resetBlinkUniformValue=function(){this.uniforms.colorState.value=this.colorState,this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient},function(){function e(e){return e.replace("void main() {","\n            attribute float vState;            \n            attribute vec4 aColor;            \n            attribute vec3 mcol0;\n            attribute vec3 mcol1;\n            attribute vec3 mcol2;\n            attribute vec3 mcol3;\n            #if defined(USE_MAP)\n                attribute vec2 muvCol0;\n                attribute vec2 muvCol1;\n                attribute vec2 muvCol2;\n            #endif\n            \n            varying float vfState;\n            \n            vec3 getInstancePosition(vec3 position) {\n                return vec3(mat4(vec4(mcol0, 0.0),\n                                 vec4(mcol1, 0.0),\n                                 vec4(mcol2, 0.0),\n                                 vec4(mcol3, 1.0)) * vec4(position, 1.0));\n            }\n            \n            void main() {\n                vfState = vState;\n        ")}function t(e){return e.replace("#include <project_vertex>",r)}function i(e){return e.replace("void main() {","\n            varying float vfState;            \n            void main() {\n                if (vfState <= -0.99 && vfState >= -1.01) discard;\n                \n        ")}var r="\n        vec4 mvPosition = modelViewMatrix * vec4(getInstancePosition(transformed), 1.0);\n        gl_Position = projectionMatrix * mvPosition;\n    ",n=function(r){function n(r){_classCallCheck(this,n);var a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));return a.type="InstancedDepthMaterial",a.uniforms=THREE.ShaderLib.depth.uniforms,a.vertexShader=t(e(THREE.ShaderLib.depth.vertexShader)),a.fragmentShader=i(THREE.ShaderLib.depth.fragmentShader),a}return _inherits(n,r),n}(THREE.MeshDepthMaterial);s.InstancedDepthMaterial=n}(),function(){function e(e){return e.replace("#include <clipping_planes_pars_vertex>","\n                #include <clipping_planes_pars_vertex>\n                varying vec4 wPositionForInnerClipping;\n            ").replace("void main() {","\n            attribute float vState;           \n            attribute vec3 mcol0;\n            attribute vec3 mcol1;\n            attribute vec3 mcol2;\n            attribute vec3 mcol3; \n            varying float vfState;\n            \n            vec3 getInstancePosition(vec3 position) {\n                return vec3(mat4(vec4(mcol0, 0.0),\n                                 vec4(mcol1, 0.0),\n                                 vec4(mcol2, 0.0),\n                                 vec4(mcol3, 1.0)) * vec4(position, 1.0));\n            }\n            \n            void main() {\n                vfState = vState;\n        ")}function t(e){return e.replace("#include <clipping_planes_vertex>","\n                #include <clipping_planes_vertex>;\n                wPositionForInnerClipping = modelMatrix * vec4(getInstancePosition(transformed), 1.0);\n            ").replace("#include <project_vertex>",r)}function i(e){var t=e.replace("#include <clipping_planes_pars_fragment>","\n                #include <clipping_planes_pars_fragment>\n                uniform mat4 orthoViewProjMatrix;\n                uniform int innerClipping;\n                varying vec4 wPositionForInnerClipping;\n            ");return t=t.replace("#include <clipping_planes_fragment>","\n                if (innerClipping > 0) \n                {\n                    vec4 clipPosition = orthoViewProjMatrix * wPositionForInnerClipping;\n                    clipPosition.xyz /= clipPosition.w;\n                    if (clipPosition.x >= -1.0 && clipPosition.x <= 1.0 &&\n                        clipPosition.y >= -1.0 && clipPosition.y <= 1.0 && clipPosition.z >= -1.0) \n                    {\n                        discard;\n                    }\n                }\n                else\n                {\n                    #include <clipping_planes_fragment>\n                }\n            "),t.replace("void main() {","\n            varying float vfState;            \n            void main() {\n                if (vfState <= -0.99 && vfState >= -1.01) discard;\n                \n        ")}var r="\n        vec4 mvPosition = modelViewMatrix * vec4(getInstancePosition(transformed), 1.0);\n        gl_Position = projectionMatrix * mvPosition;\n    ",n=function(r){function n(r){_classCallCheck(this,n);var a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));return a.type="InstancedMeshBasicMaterial",a.innerClipping=-1,a.orthoViewProjMatrix=new THREE.Matrix4,a.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{orthoViewProjMatrix:{value:a.orthoViewProjMatrix},innerClipping:{value:a.innerClipping}}]),a.vertexShader=t(e(THREE.ShaderLib.basic.vertexShader)),a.fragmentShader=i(THREE.ShaderLib.basic.fragmentShader),a}return _inherits(n,r),_createClass(n,[{key:"copy",value:function(e){return THREE.MeshBasicMaterial.prototype.copy.call(this,e),this.orthoViewProjMatrix.copy(e.orthoViewProjMatrix),this.innerClipping=e.innerClipping,this}},{key:"refreshUniforms",value:function(){this.uniforms.orthoViewProjMatrix.value.copy(this.orthoViewProjMatrix),this.uniforms.innerClipping.value=this.innerClipping}}]),n}(THREE.MeshBasicMaterial);s.InstancedMeshBasicMaterial=n}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="LogNoAvailDepthMaterial",i.uniforms=THREE.ShaderLib.depth.uniforms,i.vertexShader=THREE.ShaderLib.depth.vertexShader,
i.fragmentShader="\n                #if DEPTH_PACKING == 3200\n                    uniform float opacity;\n                #endif\n                #include <common>\n                #include <packing>\n                #include <uv_pars_fragment>\n                #include <map_pars_fragment>\n                #include <alphamap_pars_fragment>\n                #include <clipping_planes_pars_fragment>\n                void main() {\n                    #include <clipping_planes_fragment>\n                    vec4 diffuseColor = vec4( 1.0 );\n                    #if DEPTH_PACKING == 3200\n                        diffuseColor.a = opacity;\n                    #endif\n                    #include <map_fragment>\n                    #include <alphamap_fragment>\n                    #include <alphatest_fragment>\n                    #if DEPTH_PACKING == 3200\n                        gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n                    #elif DEPTH_PACKING == 3201\n                        gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n                    #endif\n                }",i}return _inherits(t,e),t}(THREE.MeshDepthMaterial);s.LogNoAvailDepthMaterial=e}(),function(){function e(e){return e.replace("void main() {","\n            attribute float vState;\n            attribute vec4 aColor;\n            attribute vec3 mcol0;\n            attribute vec3 mcol1;\n            attribute vec3 mcol2;\n            attribute vec3 mcol3;\n            #if defined(USE_MAP)\n                attribute vec2 muvCol0;\n                attribute vec2 muvCol1;\n                attribute vec2 muvCol2;\n            #endif\n\n            varying float vfState;\n\n            vec3 getInstancePosition(vec3 position) {\n                return vec3(mat4(vec4(mcol0, 0.0),\n                                 vec4(mcol1, 0.0),\n                                 vec4(mcol2, 0.0),\n                                 vec4(mcol3, 1.0)) * vec4(position, 1.0));\n            }\n\n            void main() {\n                vfState = vState;\n        ")}function t(e){return e.replace("#include <project_vertex>",r)}function i(e){return e.replace("void main() {","\n            varying float vfState;\n            void main() {\n                if (vfState <= -0.99 && vfState >= -1.01) discard;\n\n        ")}var r="\n        vec4 mvPosition = modelViewMatrix * vec4(getInstancePosition(transformed), 1.0);\n        gl_Position = projectionMatrix * mvPosition;\n    ",n=function(r){function n(r){_classCallCheck(this,n);var a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));return a.type="LogNoAvailInstancedDepthMaterial",a.uniforms=THREE.ShaderLib.depth.uniforms,a.vertexShader=t(e(THREE.ShaderLib.depth.vertexShader)),a.fragmentShader=i(a.fragmentShader),a}return _inherits(n,r),n}(s.LogNoAvailDepthMaterial);s.LogNoAvailInstancedDepthMaterial=n}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="CustomMeshDepthMaterial",i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.depth.uniforms,{forceLogDepth:{value:!1},forceLogDepthBufFC:{value:1},forceCustomDepth:{value:!1},customDepth:{value:0}}]),i.vertexShader="\n                #include <common>\n                #include <uv_pars_vertex>\n                #include <displacementmap_pars_vertex>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n                #include <clipping_planes_pars_vertex>\n                varying float forceFragDepth;\n                void main() {\n                    #include <uv_vertex>\n                    #include <skinbase_vertex>\n                    #include <begin_vertex>\n                    #include <displacementmap_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n                    #include <project_vertex>\n                    #include <logdepthbuf_vertex>\n                    forceFragDepth = 1.0 + gl_Position.w;\n                    #include <clipping_planes_vertex>\n                }\n            ",i.fragmentShader="\n                #if DEPTH_PACKING == 3200\n                    uniform float opacity;\n                #endif\n                #include <common>\n                #include <packing>\n                #include <uv_pars_fragment>\n                #include <map_pars_fragment>\n                #include <alphamap_pars_fragment>\n                #include <logdepthbuf_pars_fragment>\n                #include <clipping_planes_pars_fragment>\n                uniform bool forceLogDepth;\n                uniform float forceLogDepthBufFC;\n                uniform bool forceCustomDepth;\n                uniform float customDepth;\n                varying float forceFragDepth;\n\n                void main() {\n                    #include <clipping_planes_fragment>\n                    vec4 diffuseColor = vec4( 1.0 );\n                    #if DEPTH_PACKING == 3200\n                        diffuseColor.a = opacity;\n                    #endif\n                    #include <map_fragment>\n                    #include <alphamap_fragment>\n                    #include <alphatest_fragment>\n                    #include <logdepthbuf_fragment>\n                    #if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n                        float fragZ = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n                    #else\n                        float fragZ = gl_FragCoord.z;\n                    #endif\n                    if (forceLogDepth)\n                    {\n                        fragZ = log2( forceFragDepth ) * forceLogDepthBufFC * 0.5;\n                    }\n                    if (forceCustomDepth)\n                    {\n                        fragZ = customDepth;\n                    }\n\n                    #if DEPTH_PACKING == 3200\n                        gl_FragColor = vec4( vec3( fragZ ), opacity );\n                    #elif DEPTH_PACKING == 3201\n                        gl_FragColor = packDepthToRGBA( fragZ );\n                    #endif\n                }\n            ",i}return _inherits(t,e),t}(THREE.MeshDepthMaterial);s.CustomMeshDepthMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="CustomInstancedMeshDepthMaterial",i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.depth.uniforms,{forceLogDepth:{value:!1},forceLogDepthBufFC:{value:1},forceCustomDepth:{value:!1},customDepth:{value:0}}]),i.vertexShader="\n                #include <common>\n                #include <uv_pars_vertex>\n                #include <displacementmap_pars_vertex>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n                #include <clipping_planes_pars_vertex>\n                varying float forceFragDepth;\n                \n                attribute float vState;\n                attribute vec4 aColor;\n                attribute vec3 mcol0;\n                attribute vec3 mcol1;\n                attribute vec3 mcol2;\n                attribute vec3 mcol3;\n                #if defined(USE_MAP)\n                    attribute vec2 muvCol0;\n                    attribute vec2 muvCol1;\n                    attribute vec2 muvCol2;\n                #endif\n\n                varying float vfState;\n\n                vec3 getInstancePosition(vec3 position) {\n                    return vec3(mat4(vec4(mcol0, 0.0),\n                                    vec4(mcol1, 0.0),\n                                    vec4(mcol2, 0.0),\n                                    vec4(mcol3, 1.0)) * vec4(position, 1.0));\n                }\n\n                void main() {\n                    vfState = vState;\n                        \n                    #include <uv_vertex>\n                    #include <skinbase_vertex>\n                    #include <begin_vertex>\n                    #include <displacementmap_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n                    \n                    vec4 mvPosition = modelViewMatrix * vec4(getInstancePosition(transformed), 1.0);\n                    gl_Position = projectionMatrix * mvPosition;\n                    \n                    #include <logdepthbuf_vertex>\n                    forceFragDepth = 1.0 + gl_Position.w;\n                    #include <clipping_planes_vertex>\n                }\n            ",i.fragmentShader="\n                #if DEPTH_PACKING == 3200\n                    uniform float opacity;\n                #endif\n                #include <common>\n                #include <packing>\n                #include <uv_pars_fragment>\n                #include <map_pars_fragment>\n                #include <alphamap_pars_fragment>\n                #include <logdepthbuf_pars_fragment>\n                #include <clipping_planes_pars_fragment>\n                uniform bool forceLogDepth;\n                uniform float forceLogDepthBufFC;\n                uniform bool forceCustomDepth;\n                uniform float customDepth;\n                varying float forceFragDepth;\n                \n                varying float vfState;\n                void main() {\n                    if (vfState <= -0.99 && vfState >= -1.01) discard;\n\n                    #include <clipping_planes_fragment>\n                    vec4 diffuseColor = vec4( 1.0 );\n                    #if DEPTH_PACKING == 3200\n                        diffuseColor.a = opacity;\n                    #endif\n                    #include <map_fragment>\n                    #include <alphamap_fragment>\n                    #include <alphatest_fragment>\n                    #include <logdepthbuf_fragment>\n                    #if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n                        float fragZ = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n                    #else\n                        float fragZ = gl_FragCoord.z;\n                    #endif\n                    \n                    if (forceLogDepth)\n                    {\n                        fragZ = log2( forceFragDepth ) * forceLogDepthBufFC * 0.5;\n                    }\n                    if (forceCustomDepth)\n                    {\n                        fragZ = customDepth;\n                    }\n\n                    #if DEPTH_PACKING == 3200\n                        gl_FragColor = vec4( vec3( fragZ ), opacity );\n                    #elif DEPTH_PACKING == 3201\n                        gl_FragColor = packDepthToRGBA( fragZ );\n                    #endif\n                }\n            ",i}return _inherits(t,e),t}(THREE.MeshDepthMaterial);s.CustomInstancedMeshDepthMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="PickingExcavationMaterial",i.vertexShader="\n                #include <common>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n\n                uniform mat4 u_CullOrthoMatrix;\n                varying vec3 v_CullOrthoPosition;\n\n                void main()\n                {\n                    vec4 othPos = u_CullOrthoMatrix * (modelMatrix * vec4(position, 1.0));\n                    othPos /= othPos.w;\n                    v_CullOrthoPosition = othPos.xyz;\n\n                    #include <skinbase_vertex>\n                    #include <begin_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n\n                    #ifdef USE_SKINNING\n                        vec4 wPosition = modelMatrix * skinned;\n                    #else\n                        vec4 wPosition = modelMatrix * vec4( transformed, 1.0 );\n                    #endif\n\n                    vec4 mvPosition = viewMatrix * wPosition;\n                    gl_Position = projectionMatrix * mvPosition;\n            \n                    #include <logdepthbuf_vertex>\n                    #include <worldpos_vertex>\n                }\n            ",i.fragmentShader="\n                #include <common>\n                #include <logdepthbuf_pars_fragment>\n        \n                varying vec3 v_CullOrthoPosition;\n                uniform sampler2D  u_SamplerExcavation;\n                \n                vec2 postProjToScreen(vec2 position)\n                {\n                    vec2 screenPos = position;\n                    return 0.5 *(vec2(screenPos.x, screenPos.y) + 1.0);\n                }\n        \n                void main()\n                {   \n                    vec2 uv = postProjToScreen(v_CullOrthoPosition.xy);\n                    vec4 resultColor = vec4(1.0);\n                    if(uv.x >= 0.0 && uv.x <= 1.0 && uv.y >= 0.0 && uv.y <= 1.0)\n                    {\n                        vec4 color = texture2D(u_SamplerExcavation, uv);\n                        if(color.r > 0.0001)\n                        {\n                            resultColor = vec4(0.0);\n                        }\n                    } \n                    \n                    #include <logdepthbuf_fragment>\n                    gl_FragColor = resultColor;\n                }\n            ",i.samplerExcavation=null,i.cullOrthoMatrix=new THREE.Matrix4,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{u_SamplerExcavation:{value:i.samplerExcavation},u_CullOrthoMatrix:{value:i.cullOrthoMatrix}}]),i}return _inherits(t,e),_createClass(t,[{key:"refreshUniforms",value:function(){this.uniforms.u_SamplerExcavation.value=this.samplerExcavation,this.uniforms.u_CullOrthoMatrix.value=this.cullOrthoMatrix}},{key:"updateExcavation",value:function(e){e&&e.isExcavation?(this.samplerExcavation=e.samplerExcavation,this.cullOrthoMatrix=e.cullOrthoMatrix):(this.samplerExcavation=null,this.cullOrthoMatrix.identity()),this.refreshUniforms()}},{key:"updateSide",value:function(e){(e||{}).isExcavation||s.GlobalData.EnableSkylinePass?this.side=THREE.DoubleSide:this.side=THREE.FrontSide}}]),t}(THREE.MeshBasicMaterial);s.PickingExcavationMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.defines={},i.type="MapBasicClipMaterial",i.innerClipping=-1,i.orthoViewProjMatrix=new THREE.Matrix4,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{orthoViewProjMatrix:{value:i.orthoViewProjMatrix},innerClipping:{value:i.innerClipping}}]),i.vertexShader=i._getVertexShader(THREE.ShaderLib.basic.vertexShader),i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.basic.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return THREE.MeshBasicMaterial.prototype.copy.call(this,e),this.orthoViewProjMatrix.copy(e.orthoViewProjMatrix),this.innerClipping=e.innerClipping,this}},{key:"refreshUniforms",value:function(){this.uniforms.orthoViewProjMatrix.value.copy(this.orthoViewProjMatrix),this.uniforms.innerClipping.value=this.innerClipping}},{key:"_getVertexShader",value:function(e){var t=e.replace("#include <clipping_planes_pars_vertex>","\n                    #include <clipping_planes_pars_vertex>\n                    varying vec4 wPositionForInnerClipping;\n                ");return t=t.replace("#include <clipping_planes_vertex>","\n                    #include <clipping_planes_vertex>;\n                    wPositionForInnerClipping = modelMatrix * vec4(transformed, 1.0);\n                ")}},{key:"_getFragmentShader",value:function(e){var t=e.replace("#include <clipping_planes_pars_fragment>","\n                    #include <clipping_planes_pars_fragment>\n                    uniform mat4 orthoViewProjMatrix;\n                    uniform int innerClipping;\n                    varying vec4 wPositionForInnerClipping;\n                ");return t=t.replace("#include <clipping_planes_fragment>","\n                    if (innerClipping > 0) \n                    {\n                        vec4 clipPosition = orthoViewProjMatrix * wPositionForInnerClipping;\n                        clipPosition.xyz /= clipPosition.w;\n                        if (clipPosition.x >= -1.0 && clipPosition.x <= 1.0 &&\n                            clipPosition.y >= -1.0 && clipPosition.y <= 1.0 && clipPosition.z >= -1.0) \n                        {\n                            discard;\n                        }\n                    }\n                    else\n                    {\n                        #include <clipping_planes_fragment>\n                    }\n                ")}}]),t}(THREE.MeshBasicMaterial);s.MeshBasicClipMaterial=e}(),function(){function e(e){return e.replace("void main() {","\n            varying float vfState;\n            void main() {\n                if (vfState <= -0.99 && vfState >= -1.01) discard;\n        ")}var t=function(t){function i(t){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return r.type="InstancedNormalMaterial",r.uniforms=THREE.ShaderLib.normal.uniforms,r.vertexShader="#define NORMAL\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n                    varying vec3 vViewPosition;\n                #endif\n                #ifndef FLAT_SHADED\n                    varying vec3 vNormal;\n                #endif\n                #include <uv_pars_vertex>\n                #include <displacementmap_pars_vertex>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n                attribute float vState;\n                attribute vec4 aColor;\n                attribute vec3 mcol0;\n                attribute vec3 mcol1;\n                attribute vec3 mcol2;\n                attribute vec3 mcol3;\n                #if defined(USE_MAP)\n                    attribute vec2 muvCol0;\n                    attribute vec2 muvCol1;\n                    attribute vec2 muvCol2;\n                #endif\n                varying float vfState;\n                vec3 getInstancePosition(vec3 position) {\n                    return vec3(mat4(vec4(mcol0, 0.0),\n                                     vec4(mcol1, 0.0),\n                                     vec4(mcol2, 0.0),\n                                     vec4(mcol3, 1.0)) * vec4(position, 1.0));\n                }\n                mat3 transpose( const in mat3 v ) {\n                    mat3 tmp;\n                    tmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n                    tmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n                    tmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n                    return tmp;\n                }\n                mat3 inverse_mat3(in mat3 m)\n                {\n                   float determinant =\n                    m[0][0] * (m[1][1] * m[2][2] - m[2][1] * m[1][2])\n                    - m[1][0] * (m[0][1] * m[2][2] - m[2][1] * m[0][2])\n                    + m[2][0] * (m[0][1] * m[1][2] - m[1][1] * m[0][2]);\n                    mat3 inverse;\n                    inverse[0][0] = + (m[1][1] * m[2][2] - m[2][1] * m[1][2]);\n                    inverse[1][0] = - (m[1][0] * m[2][2] - m[2][0] * m[1][2]);\n                    inverse[2][0] = + (m[1][0] * m[2][1] - m[2][0] * m[1][1]);\n                    inverse[0][1] = - (m[0][1] * m[2][2] - m[2][1] * m[0][2]);\n                    inverse[1][1] = + (m[0][0] * m[2][2] - m[2][0] * m[0][2]);\n                    inverse[2][1] = - (m[0][0] * m[2][1] - m[2][0] * m[0][1]);\n                    inverse[0][2] = + (m[0][1] * m[1][2] - m[1][1] * m[0][2]);\n                    inverse[1][2] = - (m[0][0] * m[1][2] - m[1][0] * m[0][2]);\n                    inverse[2][2] = + (m[0][0] * m[1][1] - m[1][0] * m[0][1]);\n                    inverse /= determinant;\n                    return inverse;\n                }\n                bool isPerspectiveMatrix(mat4 m) {\n                    return m[2][3] == -1.0;\n                }\n                void main() {\n                    vfState = vState;\n                    #include <uv_vertex>\n                    #include <beginnormal_vertex>\n                    #include <morphnormal_vertex>\n                    #include <skinbase_vertex>\n                    #include <skinnormal_vertex>\n                    #include <defaultnormal_vertex>\n\n                    mat3 normalMat = mat3(mcol0, mcol1, mcol2);\n                    normalMat = inverse_mat3(normalMat);\n                    normalMat = transpose(normalMat);\n                    transformedNormal = normalMat * objectNormal;\n                    transformedNormal = normalMatrix * transformedNormal;\n                    #ifdef FLIP_SIDED\n                       transformedNormal = - transformedNormal;\n                    #endif\n                    transformedNormal = normalize( transformedNormal );\n\n                #ifndef FLAT_SHADED\n                    vNormal = normalize( transformedNormal );\n                #endif\n                    #include <begin_vertex>\n                    #include <displacementmap_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n                    vec4 mvPosition = modelViewMatrix * vec4(getInstancePosition(transformed), 1.0);\n                    gl_Position = projectionMatrix * mvPosition;\n                    #include <logdepthbuf_vertex>\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n                    vViewPosition = - mvPosition.xyz;\n                #endif\n                }\n                ",r.fragmentShader=e(THREE.ShaderLib.normal.fragmentShader),r}return _inherits(i,t),i}(THREE.MeshNormalMaterial);s.InstancedNormalMaterial=t}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.defines={},i.type="MapTileMaterial",i.samplerExcavation=null,i.cullOrthoMatrix=new THREE.Matrix4,i.brightness=1,i.contrast=1,i.saturation=1,i.hue=0,i.gamma=1,i.customColor=new THREE.Vector4(1,1,1,1),i.useCustomColor=0,i._imageByteSize=0,i.useCSM=s.GlobalData.EnableCSM,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.phong.uniforms,{u_SamplerExcavation:{value:null},u_CullOrthoMatrix:{value:new THREE.Matrix4}},{brightness:{value:i.brightness},contrast:{value:i.contrast},saturation:{value:i.saturation},hue:{value:i.hue},gamma:{value:i.gamma},customColor:{value:i.customColor},useCustomColor:{value:i.useCustomColor}}]),i.vertexShader=THREE.ShaderChunk.map_tile_vertex,i.fragmentShader=THREE.ShaderChunk.map_tile_fragment,i.useCSM?i.defines.USE_CSM="":delete i.defines.USE_CSM,i}return _inherits(t,e),_createClass(t,[{key:"copy",value:function(e){return THREE.MeshBasicMaterial.prototype.copy.call(this,e),this.u_SamplerExcavation.value=e.samplerExcavation,this.u_CullOrthoMatrix.value=e.cullOrthoMatrix,this.brightness=e.brightness,this.contrast=e.contrast,this.saturation=e.saturation,this.hue=e.hue,this.gamma=e.gamma,this.customColor=e.customColor,this.useCustomColor=e.useCustomColor,this.useCSM=e.useCSM,this}},{key:"refreshUniforms",value:function(){this.uniforms.u_SamplerExcavation.value=this.samplerExcavation,this.uniforms.u_CullOrthoMatrix.value=this.cullOrthoMatrix,this.uniforms.brightness.value=this.brightness,this.uniforms.contrast.value=this.contrast,this.uniforms.saturation.value=this.saturation,this.uniforms.hue.value=this.hue,this.uniforms.gamma.value=this.gamma,this.uniforms.customColor.value.copy(this.customColor),this.uniforms.useCustomColor.value=this.useCustomColor,this.useCSM?this.defines.USE_CSM="":delete this.defines.USE_CSM}},{key:"updateStyle",value:function(e){this.brightness=s.Utils.isDefined(e.brightness)?e.brightness:1,this.contrast=s.Utils.isDefined(e.contrast)?e.contrast:1,this.saturation=s.Utils.isDefined(e.saturation)?e.saturation:1,this.hue=s.Utils.isDefined(e.hue)?e.hue:0,this.gamma=s.Utils.isDefined(e.gamma)?e.gamma:1,this.customColor=s.Utils.isDefined(e.color)?this.customColor.copy(e.color):this.customColor,this.useCustomColor=s.Utils.isDefined(e.color)?1:0,this.refreshUniforms()}},{key:"updateExcavation",value:function(e){e&&e.isExcavation?(this.samplerExcavation=e.samplerExcavation,this.cullOrthoMatrix=e.cullOrthoMatrix):(this.samplerExcavation=null,this.cullOrthoMatrix.identity()),this.refreshUniforms()}},{key:"updateSide",value:function(e){(e||{}).isExcavation||s.GlobalData.EnableSkylinePass?this.side=THREE.DoubleSide:this.side=THREE.FrontSide}}]),t}(THREE.MeshPhongMaterial);s.MapTileMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="NormalMaterial",i.uniforms=THREE.ShaderLib.normal.uniforms,i.vertexShader="\n                #define NORMAL\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n                    varying vec3 vViewPosition;\n                #endif\n                #ifndef FLAT_SHADED\n                    varying vec3 vNormal;\n                #endif\n                #include <uv_pars_vertex>\n                #include <displacementmap_pars_vertex>\n                #include <morphtarget_pars_vertex>\n                #include <skinning_pars_vertex>\n                #include <logdepthbuf_pars_vertex>\n                bool isPerspectiveMatrix(mat4 m) {\n                    return m[2][3] == -1.0;\n                }\n                void main() {\n                    #include <uv_vertex>\n                    #include <beginnormal_vertex>\n                    #include <morphnormal_vertex>\n                    #include <skinbase_vertex>\n                    #include <skinnormal_vertex>\n                    #include <defaultnormal_vertex>\n                #ifndef FLAT_SHADED\n                    vNormal = normalize( transformedNormal );\n                #endif\n                    #include <begin_vertex>\n                    #include <displacementmap_vertex>\n                    #include <morphtarget_vertex>\n                    #include <skinning_vertex>\n                    #include <project_vertex>\n                    #include <logdepthbuf_vertex>\n                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n                    vViewPosition = - mvPosition.xyz;\n                #endif\n                }\n                ",i.fragmentShader=THREE.ShaderLib.normal.fragmentShader,i}return _inherits(t,e),t}(THREE.MeshNormalMaterial);s.NormalMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="WallMaterial",i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,s.WallShader.uniforms]),i.vertexShader=s.WallShader.vertexShader,i.fragmentShader=s.WallShader.fragmentShader,i}return _inherits(t,e),t}(THREE.MeshBasicMaterial);s.WallMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="PlaneScanMaterial",i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,s.PlaneScanShader.uniforms]),i.vertexShader=s.PlaneScanShader.vertexShader,i.fragmentShader=s.PlaneScanShader.fragmentShader,i}return _inherits(t,e),t}(THREE.MeshBasicMaterial);s.PlaneScanMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type="FanScanMaterial",i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,s.FanScanShader.uniforms]),i.vertexShader=s.FanScanShader.vertexShader,i.fragmentShader=s.FanScanShader.fragmentShader,i}return _inherits(t,e),t}(THREE.MeshBasicMaterial);s.FanScanMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=i;return r.type="WaterMaterial",r.uniforms=THREE.UniformsUtils.merge([{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new THREE.Color(16777215)},postProcessMap:{value:null},postProcessAdditiveMap:{value:null},postProcessMixRate:{value:0},postProcessAdditiveRate:{value:0},viewportWidth:{value:0},viewportHeight:{value:0}},s.WaterShader.uniforms]),r.vertexShader=s.WaterShader.vertexShader,r.fragmentShader=s.WaterShader.fragmentShader,r.textureMatrix=new THREE.Matrix4,r.transparent=!1,r.clipping=!0,r.side=THREE.DoubleSide,r.isUndersea=!0,r.fog=!0,i}return _inherits(t,e),_createClass(t,[{key:"initUniforms",value:function(e){var t=this;void 0!==e.flowMap?(t.defines.USE_FLOWMAP="",t.uniforms.tFlowMap={type:"t",value:e.flowMap}):t.uniforms.flowDirection={type:"v2",value:e.flowDirection},t.uniforms.tNormalMap0.value=e.normalMap0,t.uniforms.tNormalMap1.value=e.normalMap1,t.uniforms.waterColor.value=new THREE.Vector4(e.color.r,e.color.g,e.color.b,e.alpha),1==e.alpha&&(t.side=THREE.FrontSide,t.isUndersea=!1),t.uniforms.reflectivity.value=e.reflectivity,t.uniforms.config.value.x=0,t.uniforms.config.value.y=e.halfCycle,t.uniforms.config.value.z=e.halfCycle,t.uniforms.config.value.w=e.wavesScale,e.viewer.gisMode&&(t.defines.USE_GLOBE=""),e.shadow&&(t.defines.USE_SHADOW=""),t.uniforms.sunDirection.value=e.scene.sunDirection,t.uniforms.textureMatrix.value=t.textureMatrix}}]),t}(THREE.ShaderMaterial);s.WaterMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=i;return r.type="MeshBasicMaterial",r.depthTest=!1,r.depthWrite=!1,r.wireframe=!0,r.clipping=!0,r.side=THREE.DoubleSide,r.fog=!0,r.transparent=!0,i}return _inherits(t,e),t}(THREE.MeshBasicMaterial);s.CutFillMaterial=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;r.scene=e.scene,r.CONST_G=4.9,r.disPickable=!0,r.autoAnimation=!0,r.color=new THREE.Color(1,1,1),r.originPosition=new THREE.Vector3(0,0,0),r.originIntensity=.5,r.radius=2e4,r.originYaw=0,r.originPitch=0,r.particleScale=1,r.camera=e.camera,r.loader=new THREE.TextureLoader,r.zoomGis=1,r.setOpts(e),r.particleOpt=[{baseScale:60,
imageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANIAAADoCAYAAACaeLqJAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS41ZEdYUgAA4flJREFUeF7s3QWULkly3XGxZFlskZmZac3MuGZmZmZmZmZmZmZmZmZmZjl/pf73uVPb/ebtaFYeSf7OicmqrMTIeyMis6rfvN2HfMiHvPORd5p0Rd5d9tm7jLzrkY925N1GPvqR9zzyXkfe+0Fcv8+R9z/yAUc+xpH3u8n7PohnlUu6/5hHPtaRD364Jx/0cC//Yx/5OEc+/oN8vCOf4OH6Ex35FEc+3ZFPfuTTPoj7z3TkkxxR5hMe+cRHPukR5dxrV/uN2ziNSd/u3/0IfaSvvaY3eqGn9ziiLL1J09UHPoi20hl9ea6OVJ0kPXvmXh/v+CC7hu67br2637WqXfm167q2Wlti3J63vnRi7HRxX5NSeenOvFzToevwUVurY/nGF3a0V11tyg9rK/I233gT4yfWg7je+dFDmO6ZvPT3KHcidb0iLzBI7424r4MGkOi8iTSZgEEBZJW194TCEsrae4oMdJ5JLRSCIc3HfRCEQB4kQgqCRG868hmPfKojn+XIZz3yaY54hkik8glikoBiHAGCWJwUn66S9Ju+Wrz0BLR0g6jGby7pQX90EzBa9MAgz3P3raG0fqzNvW9pa6i+vmuvtZRWPzwskRuDcek/nUQmYh7mw/iQyqTDyJAOjcOcPasN5ZXzXNt3A+pevrphTJqEva7NwdhX5JkraR2bP12kNzqUX3pJRErJuwgrPeu6hrqvo+2wwRlUEzFBSqMoaZIyI1EpBaYsinLfQpF9RuFIBIiIw3tIIwXhVXgXgkC8EDIh1Wee6095xHPl1ENGgkQLCrJACIiEHtJTkuLppYXtPl3ow9ilO2f9BHj10m2pMnRWv63DXZTVhnqtlzzPGkvjbI3zcK6Vay7m2Xj03ZpEIOthHoyY+8AfOZQ3r113epR6Xhu7zpVNL649k185ecZVm3cipYvWyrV8QhfpIx1uudXN47pGpBRWAWkL4t71ltl7aXXqtEE3KOI+IpksJbg2WeI6JUkTykvUSVnuSyNRQAfEJdInO4IcQjfXSCKEQ5rP/SCf/UFc81Cekc9whDdCJIDQB7LqT/uRybjNM6Wn+PTn3vOA6lnPPQMgOjAXoo/mTCKqMq7pUz3tAYAxpNN0vhJQ1DNWZd1rQ131WtukNQ4HiXF7rt3WWWo9gL/1ch2R6IoO6UueObZ+5L7unqWLhM49U/Yu6UkZ7dGRfO00xtak9aA74npFmXR2z0836eTSGSJ1kxJXYXVIKlM5QsmRaTs3iSaSxXIfCKQtXoroepVJMRRBUlR5FEthKdgCFc7lkSxcoRtvg0h5IaT5Yke++JEvcuQLPMgXPqK8csiHiIWFkVO7CFsIZkzmmBUMsO7pi45asNVx+qQ7z9WhB+2ZT3Mkdz3KC8Ak3agj3XqBT73Wpnbk198CZde3+9Ze2po3dnPWlz4bizbpiM4IAnneWFpjYk3zWES5PJJ2Iqiy6t+lOXrePJuf1Njoa9fhKRKR5vXcs9XFdY1ILaZCGu5hUmc1vs+q61oZA21xdwI70a6JZ024SUeS0hRINj+vkLIL6QI64CMAMvAsyMO78ET2QzzPVzzy5iNf9EG+0BFk8hzphHb2TNpJtP3ZjigTMPRv7ObTPMyLHuiDfloY+nRNbz0j8s1NW9rUNgBpL7Js25vvXn6gAybX9KRcwJRP7/LU2XYqa0yts2tjRhrprrHrXfsMqL60ox99Go8866SPxm8s7qWNtzKl8uihuWjvjqPmRJqnZ8aQWBdzXOI07uay61OZnimbd0o3Yf+SiORBDUkrXP79mesAQba+fJ02iRRKESZ6n2TKSCEpMMVVl3JTMK+Tp7BQSLSWLyJJibKAz8tEos935Mse+RpHEOpLHEEm+coU2kVI3kgf+taftMU39hbK3D1rzJ5ZyDUogKSsOumZ7pQNZMqqT0fadE88k7dtyqMn5Y1JH4VP6Vc+Uc46NA5tA4xr7QUkY1LGs7yPfPfqtO6kcTR2KdFPY5Du+rs2Xs9cW8fmYA0zlF17nj7VIeGjPH3UX/0YW3NMmp85LI6bo7zKNsedL8Gbx8hiPRLZwhp0r9FE3nbUPalezyhyiZKSUgKhQOK5NMWQQFq+a3kUGmlK8xRAH4GQJ+FZhHKf8wivI3z7gkcQ56sd+dpHkEmo9/mPfI4jSPepj2hPG9qsr8bSGC2axTJ3qfGau/zm2mJLW9wk/ZavHgkU2kNO17Ub8LVHD8oiD6GzCJ8+XSvTONKr9pIdT2sfFsKH6wWYawahMWvH2FzTDdFnUrnmJU08t750nCfKYCkbVipfnj66J83TWNKpuRhrujaP8swr7C/mF9fLk5VHIlV5KxEdkAazja+Ut0omLXKTNTkKcb2Kk6YMkjJcB9SugQGYKTcSuSaueY1O5SKWkzphGu+CIJ/3CLLYF/FCX+rIlznyVY4gktAuMqkrtBMWai+CNq7mEnhaNOK+eSrf3AGFNGegAkRyr6s9+a7pTz/KBxTXdGXe7QnpBQiBkb66z6KrW9sBXhvbn/WzrgGsa8AJL12HA/WMT11zaN76brzylGke7olroowxGnMEUpfQ1+Kpe1L7RHvS1sS4WpewunP0rPmF/ea9Iv/RA90FkRRKKT1wnULqtI5TnGuijHt1pMqlVBPaiZuw+81L5EWYlNd9C0K5AII0eQcpxbvO+0jzJIVyyIFE9kQIg0Bf+siXP/JVj/BMX/MIUvFYQjxeyZ7q0x/J2+nHeIzNuFswC0LogE7lNbfmYpHVJ+6Bp4WWtthk9R8QpNpDkICTPo2JLpCJnhCLzpRN6Mm7MmUX0IFa2lz069pYYEJqbq6NpXUnjTeMeBZJjE2qz/Qg3b7NI10pt2PuvuflRTQGQtrz+tOmNDI1Xmuz+jUOaWRZHpDyXS+RmvuVvx5pG3Kt8ZQnrfMa2OtEvRTZQpgcxTU5E3Vv8oGgPEIxlERh0hXAAJAlEnAQ+YhD1hvxLEgRkZAGeb7CEV5I6l5o9w2PINRXPmL/hGyI1EtahxV5O+MBihbMgpgzPdAhHZh/KVEmfSyR5HteXYuz66BMC68v9RdQ5md89LHgS+iKfjynF3l03thrkzQX49GOvsOGtUWyxJhWlDXGyu3c9Kc96xuB9JU+PCNrMDMGxi+v57VDh12HIXnalBJ9G5PxpN/06j7dNkcSYSJNp5ektQnvV7k8UtJDaZ1KI5LBGICOKyN/y3jWwE2iRTK5lEayJCbbfYpJAgFxTZlATMpHImnkAXShnP0NQSBH3J/n4RpReCXE+epHvtKIvZIUsaRIZ2/llM7pH2uuH9eNYecGNOmGDgBVms4yGubpmTz6CayXdXsQ16S2VqdAqG/kac4ARockAiXphphPJ5GNh6gvT/0ALt849dcam6P8SGNMJB249mzXXhvqWVN5rrWpfOOWEutpnVvX1jhDke5WlDfPsBV+djz6NV56hut0GpEiUWuANPtxgutdl9q58iISJRENRozyI8i948p3T3ENWprCiMlSvslFFhOnuCbt3rMkQKSkymeppCnaNZBQ9r5slfIqhWrthyILj8T7SMnXOvJ1j3ydI8oob8/kUEKI6P0S0BJhn+de8DYnYr7m33zpxYICDt2k63Qsn15bQKkF8kw7hP7V1U+AdQ1g+hd60hOdpQ+6ojP3iE8vdCLMddDiSw7P1EvnzcGYpNZNGffm0dy6d62MtW695ctTv7XzLAyou/etbWRBevWMX5pXUqZ5VVcfdGHexBxqz71+jIfuwuliOvwak/uI9BSJ9n7XiFxEalE1qrEe1qF8C92i6lgqz/PuDThlR56ul0QtGIUQE+6aAjyXlzJ77j5rFVgSygdsYRyvATR5EmDvPdGXOyJkiyg8DgJJ7Y++3pFvcuQbHeGteC7E0wZv1rG4fgDRvYMIYwoUxmuc5iiPHozPmOgqa0Z3FlDeLlZ6lw8krQvdsrbAoY8sr2tgC3TCWYDcPB4I+RkTJ5d04Z7ulNFOum/M8lsvfRtrBsFzqbXtXjljqr410mZ6CPBSIq+x05ex5DUjeJI+la+96kv1q02p8tLKGl9kosukNXDtGWLkYfJISWsT0SJRa3WFdjUWUSJW4lmKJJEoMQjPV5RZRZsYMTEppacYyg6AKT5SlUeR8lI45VM4gBLAAe7PdYQXAhhEcTLXXsdeCFmkiJMI9eyNvsURJPrmRxAJ2ZTXDlIp24kfL+VauGgcjY3lDwTm0RzSa8pvwdKx677WjjR01yLTs+uArD/t02N9E/0GSDoiPBajgvCdSErpTdkIpb6xWh/j9txcWlPjyZMoE5iVJfqW6nPbi2DVi0jyjdPJaX25t45C8sZX241NvW2TaM/YMjLqhC959B+RWoddi9K80XolEqHkb9QgvcoiksYtlM6Ie4tJuo8slCnPdSTq3gKblOvNz1IQi54iTLTJthiu5SlHse5d98w15VosiqZ4wtojTUSyJ/KilQjXeJZCOWQRziGIe2WQBoG+45FvewSxvvERHooXU0aeNpz4sehf8kECovAKuZAJiIzV2NIJ3aVnOrEgLWILRuQpBwB0r7y61iPQmLs+AJm+AC2wSfWrDAMjrDVOngiJGBXjRDDeuyN+5dM/3TevjGfr6HkAdq2MudZ/9eW3Zo0170E8i+zCTWM1Jv0W4mknUoSBsKONyOO+9l0r57kxyzMHOiV0ikT0nFiDJUkkksorVTbyrFweKUIk26EFBIJIEZGkypZHqQYuNeit0wKYHGVQrMneZZVkUSKLOtWzIBZIvsWneEoHYt5BqEVcA48DBSThTZAHoRwouEeQwjn7om925LscQbTKIJs2EE5d9zwaK+rFbnsnBHaU7tp4AhGQmged0BOdWhB6ySpaCIsmtWDKEPrNoLmmT6CgB2EswK1+iD7pjp6QCXGM29xdIxDQ8lDGKjw1XhJo0zH9ugZUY7eGiXUKpKR+jc010Yb25BPrqp48KVEOmb/NEePLCEUk9ZpXaX2GNdd0rF5ja3yRnb7DNIk8eSISYZY8Ec699ansEvG6RqQWaUVe+ZQYOZKIJN9gDTqweK5e5SKRiUpNjFKkhPIpzDMKkKcs5Th9S6FEHiUDiZTiAQoo2rcIW2ymEQXwEQIZOuYGrK9/BImEdd/uyHc98t2OfOsjiNcROEIV4vFs6tszIRLiaFOKUMp7blxAZB4W2VxbRKSwQBaQjlrMXdAl0j53T9f0BHz6oY90RjxDCOI5YSR4IcRHJKSnL0aIHol20nGGqm8TtY9MUu1n0KSB1T2joV/XrZ+0diOC/qSVY/SMq3Erl+jDeGrHfXMlsCVPm0si7deGMcIhfdNrJJBaDymJPAiz6yFfWlnPYFuq7FV/iRTwI0R5lJjC5GehPO8+IsmrPfnqBCZKMkETXmWkMPkpg9KUl1oQ1xQakSyaxaZAi83C8kpO1QAGcPqGDrgBnldBCh7nOxz5lkeATMjm/nsfsTfyXFnEEO4hkPr2SdrtmzzXyIpYiIvUxtPCmxu90IXFaKGIhaGvFovOWsAWiW5JXgkI3AfCwBIgXdMPy26PgQjGY450IfTtK3cHJvRIr+rQJUnntYlsJAC3Fq6tlbWVmrODHc9qp+t0EhFct5bKMIDGrJw8bS8G6JVBNZ4lUlhStpRURp40bMKjtQB8Ol8PQ3Z97uTyPHLJD+fyGMl3j0hLopRjAJEkUigXYWpMnmtlPKudUm3t5LSnD5NeMEiVWSXKT8FESGPBEAcQPLPQ9kgIxdJ6ZmEAPhHmIcY3PSKMcLCAQO6R5dsf+UFH7I8Ajwfy3J7Jvbq8GG9GENReyUFGxDIGwGkuruUhgMUo5k4sgIWyMMq0sHQWeeiKfumNrt0HRvqR6idQBly60Tfd0AWvSZCI1+bFlSu1r6Q37ahj/K2NNrXtWt/GYo2slXtrpQ2ehS4iaGRBWuuinUjadeutnDY8c99cjKVT2OaszuJnMWOMyshXBmYJbIbHC/hHllAk0rROPSuvcvJbH21c+YiEBBYrkhCdS3XeICKMdAkEBNLKNOCuTajJN7nI1KKYuNS9shTaIlEypVKkRUIYhGJ13bvmjeQjmc01y8szSZEI+O2FHCAI5ZAJaeyJvt+Rn3TkRxz57ke+8xH7JWVcI5qQT3kE4614J+Efr4RQAGTBgaGFtPjGRxctQAtDsmgWo0WR0jedekYXdGC/Qm/a00fAc18eHbleEMvvmo4QRjkenaVHKvlt8JXjyVxHpPTv2niIa+0W/ilPDx0aNB51jcd6tpZdRwJrTrQpP4lwcKAerxSRwlD1YCdZLMGYciRMe+Y+7FoTJFoikfK698y9dVSPWDN5b0GkwK/TCGFhy5dGIqm6GO5Z5dSpvjzXyX1iKbFJRx5KpLS9p0yLRCygI27AIMgkRSQndoBtfyQs60SOh/kGRyLQ9z1iX/TDjyDR9zryw458/yOeu/+BR5DpWx2R/wOO1OZ3OoKY2uSZgBKAGrcFNa+MitQitGCRhSAQPcq3sBaIfiNSIAYs90AM/MgrZbkDtP4JIvMGdKc+oUP1lXNdGW3QoXzlkUsf+pSWH9jlIaOQVmjL0/HKykUiok2puuoQ19qNSNbddXozLtf6ae5SZYh7ugxntUeQpGuivLo9gzuYVBc+4TciWQPXEScjF7k8yxh61rW616mdRV7Ric6WCHVeGfdLwH1mogZdPXmV1WYEkjY59006ZaVEiqJcqUWxUADAolrwPJLwAZF4CgLcPIcDAx4Fcb7HEXshxPk+D/fIRBDnRx35MUd+6BEk4q2QirhHJu2o+2OPqI9QiIbAgB1gWky6iTQRqcXaRfPMollQAmDIhGDu0622Ab+9UOAl9EToIWPjXh2p+sZEl3kTwgjRHw+uHc/oWllrYy30VTv2NfaHvD0iuTf/CFq5HZdnGRgpsf7a1486+kQi4/TcOCMKfZQPOwR2PCP6qCzRz/ar3Qx5+LY2EYaeSYbOeuR1EOaeet6aPUmkpI50GvARQp7BUEJEIZ5FDgNuQtoBiDyYe/WVWaFIoo42IpFFLKWMlGOxvRthUfs3Fpz+IJBQzkLb2+SREAUxfuqRn3nkRx/5OUd+8BGE8Ix3ko9o9kxII+8XHlEHkYSBP+EIYiGecjwVQAknA3ZGIqPTAlB8gkQWwzP3yhU2pO+IRW/0pH2GRKjjmujbfs6eD+B5CmTiJaXCLnUyVPRojPQagNNrqXzPM3CRAomRT59CYF7ZgQ7Rh7raJ7yW8tonEci4lLPG9ESaT+XU7zldwIWxGYtrmIyEyoUT9ztm7bluPZZI2qVrBIJrgkjWiazxk7oPx+5bz+v4W4NJjZHN13GEMqB7OURybZDlKe/edUQiW9ZEqrP3+rgriXIpimLsGZCHB2BNkahTKcIjOaly9C30si/iReyBEIcAv2NvBw08EpIgECL9+CO8kjxE4n3UQayffeSnH9GeUBCRkEo7+gUS42uxzRlRsnRI0UJZRPqRZzEtPBAgDB24N295JCA5wuaFAQ9Y7duAmrc1Bs/XW9EZI4Mc2qXTwKqMfHkRYAHpPv0rJ4w0R2QVLme0ECkCR8baJrVjXNLa1A8xTmNIb+kgUshXvnrym4P2zVFamebiWrvagi24hDcCb/Svr3BsLTJskUqaeJZhfFxXRArEkUXjRL77Okg0Qrr2vHvXK5UBptqqTu0n1XHdpCl0F5OiAKfTHF7JaRHgOKIW7ojVAcvCOnFzzM0b8Tq9L7LvAXzAQ4IfcgRZEIiX+rlHkMixuEMHdX/KkZ9/5Kcdaf+kjGdCO3mOz3tRbKwW33weQ4CHe4vFuiEP3aSjQGquBCAjD52UrxyQOoljRADZvpBRoRPGRL0A5lo519pBFHnundYJkwN1hsu1Msp6RrTHcxij9ujbgUvv0hzoOOxRDzFqxzo2dutpbYFXSuTpp+etv9R4mou5mXtl4aL5GZ+68ukmgkmbm3FoN4zL8yyDB68ZutaLRCYp8hQOEnnvhEgWVkMxtI7kJ55HghaeqBOBtrx8eXciace9ZxFJXynVtTr1L08dk01BFl1KoU6JhBiAI8Toa4a8kT2S0A7AEYdHEgIJ45CJl+F5eB0EEbLZIyGJsq7tj3gvId1PPOIZ8iAOUtoj2YMhE6/A4lo8i2ReUvMxZ9fmZQHyQuabfhc4gBgQApj6gaWvKXhm/TqeB2xhV56MuC5s0q42pEBZWaJdkn6BVXvGEGiVo3PesNCavnkmKVKZf8BXL1LQBT3suss3HuWk+gz4ypPmX/8MaeQhEdtz46c/1/r3vPry9VHafI1h8Vw4t57ItbwMYCSS5/nlkUyoSZogcS+NEKUIsUSSJ60OpdWGZz2vjglsm8rVr3vivroAZqImL9YWNlCkhXbvtAiJpH3BIGUZhXS9hAV0+yTkQQxhGRJ8zyNIhRx5GKFdnse+SJ3K2V8hFAKqry3ERCIhlb5s2gMmnQCH8ZtbeqULBJJnjsoDj7KuHaBoJyAABfBokw6VBVqhlLL2gubOuBQ6BSx1HTpolwRwOnSvnLb1XZ6Ux1/vIkU85AXewmtlhHdCR88RTF1irfRFzN3YGxudyOvaM2Mwlohs/NKembdxmIN5SvVBV55ru3LprPLy9eNZemw9rEOYQ5YkokQkJFoiRbrH0K7GpCuB2qJHBvfK1nmAUNbgkMl1edpRr7ruTYB4XnnPlKmOe9fKmTihFApsU+ukCJGkDhmkjqcRh4fimRDIkbdUKIcQwC9s403k8TQ8k/2OfRJCCfWEguoK75Tt8AGJ5COkdvUJTL2gFW4aH5BIkSU9WVD5Fr2FteCBAWiBEFEYC3nlS5VVB4CAljUGbAAHZing6IPu9O2++kSdxsizCQldO5RgrJBE3zy8kI3n8dzcGAxr4Ll66vNSruUZn+tOUq0PIls/a21c1i8wG480Eugnr6N8xFPetXkQc1cWmY2HNMeI5Llx0CfsqF+/YZWhzmNKrRMcwvt6J8QRQSBYB0IR63qPBKwaAN7AH8jly6txqXKVjUjlbVueVaZyUs8srsmaDDCpJ9+9a2Xr18SVkaYcKUVTooUvTkck74/sj+wbeCf3PJO9EgLxPNLCs/ZJvA7J48jncRxUCAsRSZ0feUQ+Ign5nJTxCEjEQxgDAAGVxTPP9GiOFrODAmLxzQcAPBNaASJPI1/9QGThs7D6FLryAvoCFjrRnjrKSuma/nZMyqVH5EMQz+nQtTaNUR/ygJbXtw9lNMzTGOkfIdUtUohIyIqIvLR1MH7jMT4RQ8DOmCALMtCDPPfm4Nq405H29aVvc06H2osk6ihvHMbK0NRfZaTpJ9xKrRPC5HkQiRSNRSRpRLtO7ZCGWGSiwdgZwJcQrleUMxh1THxZXhtSg1dGWfcm0v1ORpsmQuSZrHxltUGZlExRlGiRWVLEAWak4h2EOkBAAMD7pLxSREAQJEIIJOJhhHZSJLNPUhaBHHXzWk7t2jshGSL1GRHra+GAroVb42AOAAqo/VlDltW8CCIBCHAowwO4pld6UkZ5727M0WEBCw9gdBJYgE9Z91Jg5z20rZw2eR4pMtEh4DvCBzyHCXTJ28izF81DmS+CmKcxarsDEKI+g+JLEETTjzFYN+NSVzmEaD7m4D5SEfMgnhsnMabeW2lbexmICELqS75r/Wi758hmXFLrU9RknfJGiIQwsBiJNqyLSJdHsriAGsADdOI+Mt0FsSywCUgNMJa38Orrwz2x4CZmAk3ctbL6MRkDNnD1KEC+dtSj1JRDsYDUh6rIRMEstUXkmSw+grGKFtDeqU+AEESYJmRDJKFdHokgGfI45rZfIr/2yG85gljIiHCufb+nL8DjTYzRvMyZHs3BXIwBAJAI6RDJPADenMxlvQdQ0lO6QgLtC1/NGTkAUBvKAqR26JmFV969VHu1y1rb2yEWr87g0Au96Z9HoVvGgWHi2Tu8cbAhbCYIpqx2GAmeAtDlMy5IalzGwNtZI+Ner2v8jYuOzEV583Uv37rroy/yjReJlVVGefpWzjUcuid0qx/X6VAdaRiFuww47PE6d9J0Hz4L8S6PZJEX+MAr3WspIESovFMeShsWukEbrHryKxMZTIBU1oSbiLINjmUIhOoro7yFtWCUQImAS6nicBtfRLI/cpJk4YmFQybEAoKIxDshDCIhldQhA2LYN/3yI7/1yK86gkS/4sg/PfKPjvzuI8I93osIHXkP4wjAJF2YL3ADfhYYkDIM5kZ4K+XyMECoHKBpQx7g2uOZjzkjAg8C+HSijPXQbnpO70CmT2XpDWny3nTH4/A0dOwZ4PLcjAbieVVgHynEtZfkmRHNvAqjjcs1IrlmNIyF17IO5ihEzOCQ5hvA3ct3zeAgaEZGe+2JlAlHRH1zh5fFb3qAKWuScfL8TiTXeSAEkiaw6bk6rq9yu0daAm0n8j1XrrJLqEDeAA3YZAKQZxFJm557RlKaPmoni0DkS5FKfX2rQ3kAQZEWnZWzkBSMaLyPBRWLI47FA5T2TYDDojuRc/jAEwnjEMJXDLzSLz7yy4785SN//4h85PqDR5DIyZ56P/kIUAFXYZ5FNzYkMD/jBV7X8l1LA4I5EQutTHoxRxJY5KuDSDzjnzvCKJibObH+WePqBrL6AFA6QQDEEdIBtbCXzuRpj8dANu3z2vREP4jkNYH3ajy1+arHk3UIQ5fueSyEQnbjbvz69JwehFcRqjmnK+UZEKG5kJeRco+Iyuz8CLzACVzCTJiCG9iTElhVDxblK4McK+rXBnEd0bRfP/D5nkskoI8IAb2OIpkBdK8hdWu0esq0cK6VNTBl5FtIk9Ae0bdnDbrBGqB7z0hjjIyUyNVb9EKqyAQMfWPHM3kuz+JZaH9zBBQW3sEDTwQovFMneL/xyG848jOO+JIBcbys/XlHlFEH2X7fkd90BKG0j7wstLBDyGLBWWIASOQHBnpK3/RjXojIIACP0G8Nh3xjR97ffISX4EWEU7wcAO46uKdzHkZbPJexC0l5DNdOIoWm/VmJ8TNQvDn98Nw8uDr2h04zkQWpPEMmeuWVf9wRBkieSABprI15G4f5GivvYv4RQj5xj8TGTdwzHDwRw0QH8mHIPKXhKQJFBPiElXADi/Lcu45UrsO0NpY8XYfR8pR7lkgmElNbVPc68zxRXj2iYY3pSB1lDVpqosqYmE5dR05tJOrWVu4yy0AMXDltNj5jszgW3KIACBKxWrwOUHgRa8GFeqxib989R7S+BudNlAMK74p82fCLjtgLdRjhqwcHDfKFeKyxEFDZX3LEcTkiaQcRAUl/rLWx6Z91boPMgyCFedAH3Zlb4EF+4za/jA9CmaM9gr4YAmDncduLqAtsdCTVFxAijTkDO0MC5MYmpKUTYEcQ8zVW90LX9k10xIsR/RJz5dXpmoeiO/oRDpu/sRuvviJOHljq3vgihlTI1nzLYyCI/Lw8nREYg41AHdYYY/n0iiSRB9YikWuY6npJk3i2xEnK0997tUfSsAZ1apIWlxgw2c4AvsYNHPANGgnUXyvhvoGp51pKAbXTBN27rqz+XWtbvjzASJHGSbmsG08ELBZMPA00AEAsNKsNuARoiP0MgEhZY1ZZOWBidQFFykshhtDu1x9BIt6KF/o1RwCMFSbVt38xNh4F2QAOwQEZsICe1zFHOiKBh/7MzZxYYgDkTZRVB0ARR5gK6Db1yGEfg7DqAaM2AVV99XhmZYRx5kxPxmHudOggQHtESKddz5CZN+KF6cKhjLkyOkjo5JLwkH/kiLBPeZ7IWPQnxNOmCMIaGpd9XSSSZ87y2+d5RvK06UZ5eGAo4AeWIggMAjastM/2THll5cNg+A1rifLIIT+yVa+6npWnXXkXkeooD2IBDNrEpMKQBh8RNBaJbMCA3bMIp2wSQdWLyeqvqLP36rFYrvWjDeM0JoqjRAJ8QAY4Fo0VFf8LTYR8hNVFLCELgANheQS5gEyIA2jKAVAktKFGhp91hIf67Uf+6BGgQShWGOHsnYBMG8AIKEIUoEIuoAVggDU+YzAH8zG/rCvCIJyQit6By7zl0wnyI6WUdyOFZzwg8ClL6IeBQSTEMydERjgi1FOXHhCHboyPHtsrIYF5CmsjkfkyDubF4PR6ANmEyDy9euZoTB34CGfhyZohciQyL2tuPPRmvIi4rwJgsTWnJwJTEaloRgpPEWExu2n54Un5JZE8Y1KGWKPq1Ua4fW9EahEJ5UegyGQSntWQgZKI1KlG+xrCKjShBkQMIjJ1rZzy2tCWNlc6LWnw6pio9ozX+CgXMAAACIEiMrHIwGNhnSABIbG4FtqCIZKwCyiAg4XnXYDMwYOwBZF4JXsk4YsTPXsEz5HpTx4BMPsXBAQa+yT9ACdSdapHr4DQPAIJPSMC6w5k5geIwJdV1qb5yUcy+y9kESbSgX7oRP/0IQ84EYnRoAvPlGOAeAwgzzvQmbmbC/3QjfkLa3nmX3CELhBKeEt4Kgcv9lDIqh69G1fiHimMGXFaN32aV+TwHJEcQnimLKEfGGSU6Q0W6C49whO8yE+vsAJbsBme3EcwZei8NmAsTNZG2NevMfRcG/rS3uWRNKJAkkeyiJFJYxqWEh1owMD2eDByGDjRoc50ajDSBuxZ5HDdG+TO7bWnfcSMSBSvHW0Yl+usmgUADgBjTYlrngr4EEvsX2hVDE/smQCRsMrIyDOxtCwvsCDMLz2CNA4ehHW9yEVAoQ7vBayAICwzXvqkY2NNfy1kczIeQKN/uqV74h6IEIJ1BlJ7J4AkdGB+yOJeOUIPPFWHMOYlnEUYoRIxx07UkJseGwvimz/CKmOviTjmn1FBHN4W0eyReGFeVD8deSOw1FiMETn0gcDmZvzWMiCbu7WkP+tpTAjuVI/ewhJRlm4jhBRW4C7yZJh795POSyMICYc5A9fG5ZmxGrd7dbWvvDEr976IZIAmRGq0SVpEZFJGp8QAiAYacGwnTSRyKVc9nTdhIs9glPc9Ux8HEkqQHzEBiyU1riZIga49M1GKt4dCHFYwjwQ40siFLCyxa9bT4iMacLHcwMUq8yxO/pDJXohH8uUDr+SAAdGQUN32WoCtP+ACHuNsjMZrTs2fyDcOoRoQKROAstwdULR/sD4BzTwZA895J/NHJONCPGMTbhobQilLD0JgBGm85k1fGQEklOdgw4EMr8Mbec/GePDcyCaMo0upfIcRvDChV327Vt9YrRNCt46wAQMZW8/pxPyI+dKD57BAPwR25NGhlF5hLdyEMxhcY+9avrZqzzi0F5bDsOfaxgHjkiovX1/qXNcRyWIbPLFIGiaBoAlHhscGjhhUHTd4zwwYIQxMec+Vk0/kV/f6FP0hVa43yPoy8AatvD4sgnxAaoyU7VoeMIjDWUQWVuyNXECEUMI5ZCqcAwihkzyARiSbbKdbCGFvJf4niOSo254EwXg2gOGJgE8/gCfPWCwEoAAsgNKNOUvpIEMmVda8AM4YASkyMSLGZ0G1p3wGT565Kd9c7Xsc3dvX/c4jwlSA530Q11i1x+swIK6NEVnpQnuIhHBCXQcK7cXMG0EYGZ6o/aQyCENf6hD5PLdQ0b7IGBgvHjZDncWnL6l5WDv3MAl71p3O6EgaMegwncKOe9hhlOFsI5yIpIx26A7G1IcxbcCYdqTyPFeWvum98srA5DWu3SNpFBBdkwhE3GssIpE6bgIa15Ey8iIHMkUYkyp8k2diJty/XaC8dk3UAPWrXdcpwXWTM16S8lsQwJMGQs9YbOEP644srKR9U6dLrDQCATFQCU+ELUjB+jqt837EMTeAIhWPBFDIhkjKCn2EgdowNsQwZuM1Htd0YQ70Rr/GZ66eKW9sgAxI6pgLgiCAcs3f2pkzsJkHAvCC5kF691OIah7aBWjeB1HcGzdvhYAdhiCYF6GMDa/E4yCSw4RIgiDyhH2MC0LRj4MHBke7eXbXSInA1qCvOsyRDsxD6Ge+7umufDohsABfdAAPcLQEiSSRqT+BqGx4hbHIQYfuI4XrUoLoyjQGzyKaa/UuIkWU0qTJkMimUoSKCA1QpzooNQnkkJpgk27C6iAV8vgH5PNI8kjtGGyKIfpFWAQxJs8By3gtirAG8EgWzqJ1jUxATgCGhQYqpJInpgeiQjohkRAIGAABKIGTJ0Mix73CPgcPnQTKU4cXAZYWYHXX3AClOZiPcQJuhs1CJspqQ1mAUz4yuc9rGaO9EcIgJQ8hnDIHZGQ4CkeRyTsyAuzq8xh0EKEYCnO3BzJ3OkEQ5bVt7sI6xG0PpT356vD4+uG9lHEtauCVENnYGTpzpx9iPcOk9abDMOE5DLUdIPC0mCRwtJgqD57oMCOt3UT72vGM6J/OjYGe1fOcKK/MY2hHlkhNAljJMlKjKgfuJuI6knh2n4TrpDrIE9k2TTGeb3vEvf5NyFgCV+N1X7hjYQAwYrHcnrHcrJ/wD3B4HxZZecDvtAoIeC9lWHheC7iQRR2AQDjA8j0ewCAXwArt1OUp7FuQwrhbOOMFINIi6dv4gMp407v5BS5l3atnbtYry64OkvAIPIgwjaEwNwRqL8NrmYd9FMLzVObbYYVxm5t587QdTEh5KXPmjeyHMixE2Mdz20v6hElKF8YjRcg+TTImehF6WzdzMb+Mjnmav3XO+CAJLEhhAT4I7NFpBFuskXue8gjTeuhDf+rXV8RyLa9yUnnwSbRzHX9bQJNo0dxbdAvawja5FtS9TkwG6PM0gd1gTdAznZL7xCtDupb/Dg/i/u2P8FaUp0x96M8kjNnYTdC4OyJuLsBFmg8iBTjlLCDLKGXNgZP3QgKWlpcCKJa90z4gBDbhCQvLqgtpWGf39ghA6RQP4dQBSOQwDuOkQwQwDuPhJY2ncUmNpXlI6TDyWAdr0xyMRZ3+lEH/hHcm7Q+FYUgvvOJREB+57AfNwzWCddiAGAgg3ENEZKIP5OkbRSRxLC7c9VrAgYTTPYTqL4zpko4QEeFcpxvjty7GTyfWMoDTk7m7tuaEHuAAthhdAovwsJgKm5FMXdeeZajl69Oa0Klra5RXIsoYj1QZYjwRSf7j8bfKGJlYPPkWSqoDlTQQew1MB0Tj7g3QZBIDiTQrTbLyKQRpkCcCdZ1y6oNQZlbFmMyBhwmAxihtIaQponmmOPNENIsJ1MIgBw2sMY9i48tLWXh5QMfas+TKCcXkASfyATHQ2nznlQqzgMZ49E+32nZgIcxBAoQGuF6EG3drQcxXXfXMFRBZeMDnfezxkN44eVGkQCQegIdFFvPgUZFGqi0GwhwAXBvKC1+1pX3g51HUMWdk8nmUVwE8j/doPg3yQe/veLh2smkvSS/CPfsm3y8iM/Lq25jbn1qLrH9YM3fYa70jUrhhdBdjYSXPJW8xE5kyyNqMvPrea3rOiYQ1qWeNU961R4o00kDmPhC6l9/ADMS1CTVZjXpmoE3EBLB1J9JkyotQ7ikk4kQkeZRVeXW16TpLYWLGngdlXXbcW8Z41UtBxt58gRSRWFxhCdADnE0+IgChPZMvrv/AEWQDVuGRa14BKFh+wAES5VlzezDk0v7qG3Dqm8fiCRECgcwHUaTGjPRCIdfGDXj6QHCE5RHsT/QFmLxjR9dS5drsu0YaKdIiL4/D05qLawQVJjoaVw95GAnzRQT7Qh/s/q4jPp51/euO/OEjSPR7j/ja4w8d4amU4bmUcVAhpKQ/Y2VsrJ31CqQB2nwjErzAHnENF3ACIzAXpmA0XHkur/ry5VWewDL9Zmz1q3/rsxhSLi+0ZHo/RHJzB9+mnrtu8Aakc2kNK6fx2J6HiVTEpKTakCqrDWnPsjApJ0JFJHmupdUHSLLjBcxSQDVO8zNGCiGu5SljEYGXAD7gAZewDzEQChF8KvMPj3jLzyLbOLPSLLiwh+UHUF8mOO4FYh7BfswX5EIcHo9VRxKLB7DIkiFQPoITixmYzMXCqeOTHR4RuBHKlxZ/4og9EIIIMc1DeMVr+BhV2OUQoJAVYXgc3ojHRBxEQx5honxg542QvP2geTupY3Cc1mnfHtFpJXHNEyGQbxKFecZrX+XLD2EvfdF1xEYmOjBn87ee9AOb8qxZJPKMHlzDAoyEmdI1zK7hB/Z6Dm/lwREda1NfrsmSOayHncpfZRBJQYCKSB7ENPddB3gNGkBkkm9C7hfwDfYu+0x5bWQp5O3kE5P3zLW0/vRt3BmCLEfWpX2DPCQxF+MnFkNenklqIQEZkLx9Z929d0IQlht4srAsMlA41QJCIZNwiPVmcYGcFwNybQifeK1Op4zZYugTWRALkXgz9+ZijEJB4yfGb176QQx7GAQFbnsW9/pEZmAFfvk8lb0MwHd8zSPYI9mzFALaT/E8eQt7O6Tj8RgBc0ImByrm32ED8gjzkNR4fIsojNOfPzVhVH7PEc+NUR16o1OEph9tMlzWDu7oIEJZb2sNyNZO9AMz8ghMhLswQuArksGU567le64u/GlXH661r99XEOVIuIlInsWNi0ixS4UqJQr1XAN1btB3WU/j2mQNrkkR+SQyRTxighFHPlnFuO95Ij9FNEZz4GUsAIlgnhuTskS++RmjOhaPxQdmhxZIxGKyyvZewjsWXmjjUyAkQhqHE7yX8iwr6w1gAAvMgGi/AyBIYWz6brzG4BlAAbK+GpuyAKWcFAGFd8JOR+xA+SuPCJd4QWA3LsAX2jmSFvLxpLwEr8VTyZf69MlcjJ3X5aEQn5cwX8RnIJBbeaEZ0iKoObrWl3dHCCNFMF5QWWJcDA8j1LeMvKbTP2S1P2SoGC9GhkGxDgygOQNvxtb6uQ9vrq0lbFhHz11X3nVEghVpZHK/eIgo1gUW6J/e4wLSuK+se+LZdWrngUqBTWEpcMXSmG8QBujaIFeUq2yTMOFIQyKN6+o1QcTIG3XvWaJN9YxPKk9bJuUZMd4UQknrUc3HtWeueQJeyD3gArN74BU6CccIoPA4eSjEYb15BVZVqAYIgIdIQpYsPpCwvurzQPpsHHQMNIjKc2rffkH/yuQxEdu4AFfohZgdNfveD1Bt7n3BAMhCKqDlBTxDIF+sC8OEdso4CEEMIZr2GAykkQpHEcRchaDAjgDIoU9kRQTzkyqPjNp1uIC42vYOSQj8z454kW2/6AQPKRGMwUFY/RChs/COXhkcpOo00xqFQetKP60d/MqX0ikMwsfiB57Cp2uiTLiR33V93MmFH/BVfgTz7Dq1cwGcW4GwCioCu04bQERZMHftmfvKyqtsg09qtzLuTb486fanXc+bCPA3YWXUV0ZK5FFQViQvkOcp/DNXwJZH5LGEgO/wQKgExBbaiRZgW2j7IiBDIKEUUCEQoAAikiGW8Akgi/W1H7l5Ac+kgCO80U4fdQJLY0JuYAdGgOZxeBREFeb5mNanQDb1AP2njjhJQyok8I0cQNuzCLkIwBuj0A6AeSr7GcQwJx7XHhA5EUQf+lMPSRHiVx8xDv0I75BbOc8cNvzLI/ZG9CBspE9eS5infeRlnBgUns5pHg/Oywv5zNv8W0dryshYI/ewAQ+u80rhAY7CknLKhEP5Yas68BNuIk2OpfYJzCBzDuj6C9kGoQJRUEPyDCZS6Dxwdx1wK0MMyuA815Y2Da7nyqu3bcmTNvEmjzikuq5TiDEqp668xiI/Benf/DzrmgKy+IBaCMg7CGsAmBV0nxcSZgCaxUYk9+J7oR7CsKT2DkAmnEMklr7jYqdh2kTeSIogiAEwTgb1jayduPF6ykQ+3kmesE6b+tePsgDM89iH/NkjCPQ3jiAVwAIuD8UrIZQ9EyI4tjZegGYQzKOxq6MMI4IYQkgHBrxZxHEtrBTGKvP7jxiHUM4z+yUE7OTQWI1HyrPxSAwIj2wPSZwadvRvDegamegPcK2hNe4avoAZ2K1xax/wrT2cyKsunIQb92HEfUTSHixr2xpoyz3xTP9Sdd9jPZIK0kAa+IG3zb/OI4MyBug+8AdYKSI0OKK+PNfyIweJNLVdquyWIfKNM4uQYurHddIzYzMfSlAvQFMQMlk0YHXNWwRensdiWmggRiwbYlaU9wEmgAYIgBTe2HgDkfDLs8iiD6FdhM2bIQ/wat+YgFg4yUvYM8kjxqJ/ZHUIoG0ejLXnaYRvvIEQjzf680eEVoiDMMbFe/A43vUghXc7xo3w2rT/MzeeQdgnHON9EMXehjdEQvszZEIS4yF0YQzIhHTa5imVRWJt8376Mj9eCEHow9wQxnx5Z3ryTGgnvGa86E85RqjQGA7yCuHXGoeHMBwOw0XE8hwRrDfcqwszkUXquf60HRFJRFXm8V8RUkmmAhHBAIB7iVSeNBIFWINyreGIpIx7bVanySXqyKuOe6mJGqxn6slXRluUx1qbnOdEvtRYlKvdJaCxIJFFIeaOPEijTe3pM5Iqy1tRNDBbXLE9EgnBiPAPkQDOn1f8tiMAa68kXzjjGUsLEEjJiwGpgwVlHDTwWsDFKwCbP2tHNHXswZRDOqAWJqnvYIGXAWjE0D8v0J95CN+QykmjF6Hygdw7HwcPQjihlEMGgOUJ7MN4X4TSFm9iPEiEME7jkJPHcvSNFAgtlHPg4P2R570icI1Q5si7C4/1hyQZFildMCZ57/aNjJCX1ZHOM+sF3MT6wG8SDoi1DKcwUCovrEcUKZFHIoqUaNtzGFL3FYJImKyAwsBbx0sgqbKuu68McZ1EAmBuQu5rq/ZJBOnedQLU6km15VpbxioFdOW04d6EpCZvstUllGCeUvcUhxwIw8Jl0RLkIp5nLfd4GzCQCDDslSw+L8O6e0HJAwA7kAIea6080AFH38MB9V88AthAqI7yPr0RVnnHg6iAijgALS2UUpYHEi7Z++jHNRIhsz2TgwiktF/xotTRtL7sexCxUBG5gRdxAZ2H0o85ILfDA4cODAmPq2/PjJlHNXdE1Qfi8nqIarzmzss5qWMMzD8vq0/kEN7qm8gvEmBEukZ0z61ZnlpdYq3CRoAn8BFGXcMFCZ9wo1ykqm6Eiixw4xmeVIdo4/JIgacG6jiyEOW6B17XyiFNg5SSrH/3JBIZPMkqbP0IaAxSg9WOcRlspCA7GWVMGLGamDrIwopRsHz19O06AlkAXkd76pePRFJeSygnrAEgQHANrF7UOrkSirCmwhabdQQAQOUdCgAzy46ArLtygAvEQMdTALbv04AzrwK0hXeIJU+IJIzjCaTIYB/kNE57RJ/2KIDs2JtnUB659aO89pDB/sdYgNV8eCU6sW8h7nkJZGZIhKvGZR6MQt7ZAYI+/u0RoZ158ZBIhISIxBjQgT6RFDnol55FF8jDM+kXWTxThm6RqHxr6pk6hYAkzwQX1p9YbzgLt9ZenmvpRYIHUQ8O1ItExH24qxyJZBcxl0geaLiOlxwRoTTvpIy88rcM0VFk0a57gzGR+riTKVFeuSyIsRkj5WWB7laIIhEoN0y5COJ5BJaW35wpUB5BLItrYb2zEW4BghDDogrV8hSI0+IK5TryFuZIbap5HnsnIGfBAdJ7KlbfvgG4nE6x2ADKy/EOxP4KkKUAy9sBKLJojxfgzf7CEcSwX7L5R04eqHDOvoYH6+jbGISa5oBIQGpMUh4WsYzLeB1+OGQxZ0RCeET540cYDSEeT/hXj/gZI0/LKHiOTMiDdIyIOWrLGrYvpXNC5/aIwlhRgPAPaQgvZnyuEQsOMobqWXdghzFrSmAtgy213rAEV567t/ZS9cInCU9SZeRVp/KPpEQIgFJB4ToJ2JGEBPx7fqSRv/Vca8+9SWxZ98n2Z6AGV75rAzYZpDFWyu80ixh7E/bcM6n5yGcktKFNCtWussQzZbVtMTot0oYFtlgWE5D7ShygWVQxP4KxuIDR1wvueQvPeDAWnAezxxBG2SMAqM265wCNpPIBTTuIiLC8nfb06R4ZHDKw/k69hE5COuEabyX8sl8CbORxzQvZDyE0UAutkJxnBVhtI6v5mx8vgDhIpi9EY0wYEWNDJv+CErH/caigj790BKGNh4e0L3RgYfz2SkhOb7yseRWuIYdrpJCap34dxiinDGPl2jiN0T2iqRMepNYzIljz8OQ6Alj3nsGINGOdyEPKDLX25NdWeCJXPiIBW1ZcAQ+AGugA/E6Y7jd/0yXSPtOXZ66BmRiI+/qLPMQ4TKaxSU0MwCkNiVgxqQVmSSlSmYhFURFLmymSYpTRTu3zRtpWvoUFLmRqD6QfFt07FoAqVOEdHAyI81lUoQ4gWnBtKQ+0gIREwAfowikbae1HIgS1BxMK8U59WcB7qQ+YAIoATsRYf8RFPmGctnmhP31E6OckzT6JF0M2BLSnQSjgBExWnR6EkcbiGQPgWR7AXPIWQlf9Iqc+Xevnjx3pPRUi0YPXAgjvmuEwfnmMB89nDPSeZ9KfL+uVRWiekpHx5QNjph7yeWZ91Gu/Cy/WVxoG1nsQ+UkGN6JEwK7hSRvqrXGXwiy5CAXcOlVBWocBO+CvIEak6FoaYfa6MivytR1xKtdATcI4TCTyADmQ2lwCOpBTusWleJZKCMJ79Ew9aV6HQiIe5cqzCOqrozxi1S4CENeAlzUFMpt+G3p7DX1b1OpIARD4iPaFJQAApEiAfIjB2iOPdyzCNGSVJ0RUTrhoM6+8MSBVgmgOFPJ2PIzxIOE/P/KfjwgDhXj+7XKkUla4haA8DBAXPtFxnomYB4J5RsylkzdjQ1zEdJxuX+Sr+P90xEEDMiMuD4m4CMcAMT7CYaQytwwW3RPr0SEEHeZ9eFI6ogM6dKKIaMZkjMS6WuvW231GdL1O5EAgOJAumSILDHq+dT27iHNksX4RSYXIRFQM6JEpcV8De51UzrVnPZf2zIBitWt5Blae8ZgoRWRpgNsCst6EAoGaMp2CZVUtOGB6Jg9YLJZnFJoHikTuLZx5W1DeR19S/bDQCCwkE/Y5tRN2IBOry2rzMDyTUEMIyNq2wFIWVVvGYUysKuIJl4CYhbeXAnT7De0DjtAv72NPwsvYd7DOyCYVwtkTIYy9h/CJt+AV/syRv3fEi1kpgDsKN+72eaSTMDqh64xXAGX9zcP8GBBe0CEGciCRNv3fOf7NET/3DjZ4KIRCXEf05mD8vJPQ0vjpxDrUZ+DXr3XRNz0xOowFz2svaf9ozNZeG+pYs8ZsDZERHlxHEgJbkYTIcw/3COU6PIZVKWzCvDSM50TeYYkUS91XsYZiYGRQOYJEtohDep54rpy2KK2By5c2OKnJKUPBAN61hbQAwgvKdC3koWyW0nPKddJEuQgVkSyKRdrDBCSyAFL5pZ4DjjKeWwwewcI7fOCZABkBHBjomzcQ4vgUB7iEIWJ8pGF5pQCBlMhjXMoIR4WEyCfU82cQ9j88C+vdy09fLjjmFkIhl7mZv/0VYKpPJzyEsQrlHAb4PEcqzOMtfPmAALyW+vRlPAhuvmGAvs0bOAGSTuiRNwFoxAVqf3u0v/9wBIE9Qxz9mI//o4f/HU7vroR9xsHI0HFeKOAjg2vhLqNFV7x6+zXj9pxHtQ7qGr9xa08qz7X2hHFhLqy7TxgRqWfmD6dE+YgUxuE47Eekd4xIuTgVsdd97AvkSY0sO5doEcm15wZSeeWk1ZEapGvi2jhM3KSkyATkwC30sUhCCdaRZeUtWG2WFcjF1wEZSIEEGbVBWD4L132KJy0ioGcV1beAACqk4nV4JoAWdtnQC7H6a1EbbQDyzN7ISRlSOM1yFG6MeSKhFEADDM/Gm7DaPrMROiEvIAGvPnydwPvZHwmbWGYhofa1wfoLoZAaqXgG46MzhwO8mj6Q2/jpk47MFRDpHGHc0w2AIRPQymfEjIcndLjguBt5+v2PI0iD9H/tCCIzBr64QD6HErxunwshgnbpN0K758HtMa0xXRZydjxPkNAeU/ShrnrWz3pmNAkMwTOcwzd8uc9LyVcGuWAVDjPunkthNlzfSXRxwI0GYmkNLgOJ6ySS6LDBbWelpMEk207t6jP2Iw2gS+UHZCSiMGAW8tifAFffd1kYoR8PBRh5AwBQl3IjEeUiTSnlJ8pZJOCxMOojKK8DqAhrgVlHJOEtvJfx3oaVBRpjEqaJ4wEVuFnyf3dE2CNsAwjAJcI85ARs5RxZO0oGPqdd8h0daweoEAfB+stSYiz0oz9hkHtlkQ1wEbP3U/rnyew1eFjW3XxJxDGu1oAe6MDBAAI5WGE0EOi/HPlvR/b3t45YE971nxyxVkgnxKQb+yP6NF79a9eROjLpy3g66nZvLfM45VlT5YsOek1h7awxw2k9rS/ChFNp1/BYntRc4TUsZtxhNAIl5cH6hXdEUoloRKcaCugKR4rua0gDpYn7pLwGqe0I57n29OUZ8rISFi/QsypSYEYm1kvoxNLamwC2zadQCnmEWfIsgpeFnqlnESiUgrVdOJOi60+KuBZMSvQtDueJAA9REcniArL8wi4fi/6dI0DrWJhnABoeSphjH+E5IBtX4AUOoOKRkEV9Vt2nNvY8Dh54XXPi5RgQe0NH7cbBKwkR6QeRjIvn4AnpCvgBlbf0ktY9otEPiw6U6hqTuTNAxhQg6Q9AleMNzZnhQCQe6KmfUJIHdBz+tx+uhXwMDb0gkjEjAO8vVDUfY7eO1oiBUYZhKJTjhRBJxMGYWAshvbGr61kGgKEsyoIzgjxwRuS7RyTYDPtkcSpdDsiLB+TyTP7DG9UoWaC7vjeU1Ell9z42u1+v1ABdG3DPTUaeiVMYEAM2sFtUimJFhUdAyVIDE+CwyKw/kAuXHBCwckAmzAMAAKFYhHFNKD2QyNenBXOtX2U8U0Z+73qQ1sbewgE48AvZbK7tGVz7JIcU9gG1QwF7l/ZMAGBu2rRfUI71tg/61w/X9j7KAxOvqz9zBTA6oStjQ3YeWdjFYyCbdtVldIzRKZqQzx7FfgpJHQa019SOkBVh6YZ3Aki6oBPPGSDEFR7yRs/9hHU+ffLhrNND93/9CO8tZLU2DjoQgoHiWYzVuzdzRmw68ndc1hnhrAPPaD0jP1LToWe7zoQhgO2wlTDaSFN4B/vEdVGZOnCZwOrifFMcejv/USjWAnLuTKEXSSSQlqcekXeXyEUM1KDrj5gkBWQRC7FYKISgYBYWWCjXgnLrgCIPUCxIp3gWSMgEABQNENpj/T3njSwE8iFRhA04UvnqBFjtI1BWnwBkL0GRiTf5u0ds8t3zVH48p9DKvo5FDug8jrDrrxzpMyAARL72MMrxWCw3EhkL/QBOIJLHQjuoYFyM0Qmgevpsj2d/xSsgtj2UsSBqwAZebQIUj5THDsQ8PjI4pXOA4ccz/a8PvfyQf3XkHx9x5P43jwhT/WMx3jEhLk+ISMZqPOYmkjAuHlwZRsMay7PuvJO+8+KIbh9FF66tk/WEHwaAXqRFOgjlPsKUwlzYV055Ii8Jz2GbFJW9wiMtkXJ5Ki5pIknXS4w6qUzP8jTS7kv10STqO+tHKZRGQawlonj/YX/Cstoj9FWABQEaQLG4SEfBpI8gkQMwWCgKtjj2HPXhOW8DeEBjQSKPsajrWnl7G+QEUGNhvQHUOISdvJAQhkfxE/44rfJjxYVXDhMQxBj6GLUjdEDibR0emE8vepHfHNUTjrW5ToxPKvTRBs/lPitPh0BLP7wPYAO5I3FleCIhlnbpyDrAAkNn3vRA9KOcENP+kBf1VQVv089R+78/Is/eSD/eMfGGiGtexmj+5mRMiOzk0z6TQbLWvCZj49qhA0NnLNabkRR1IL0xGXORhdT486hCPc8ZBeSByfAHiyT8RS73xLMIs2RyHxeu64ikcqIjDQJ9BKlCUl7P1asj9aqr7a49JxivvHwTsljyTDhrQmGAZbNs0SyCzTPFAzELbiEBEQhZVYsjXGI5IwYiaQ+o9MEyIRmrqC7iIFJeyULIU0c+QRzjIe55R17E3sj4gNBLR/c8CtDYF/gBqj+ys99BPHsk40amXqDalCMMK2zOxgY85uygwH7G3oIBQQZleEYhLI+sDQQDSATiqYHMPHkw5BAamSPRJgJovz1LJANKgLMm4cA940I3jAqdIjfC2wP9zyO+97MPMlce6T8eEc6Zt1Q5ujB3/Zo/Y2gtGSGkcd9hBuLIN35ksZbmwWOKAMyTjhgYa2u9rJ9rRGI07bGNHa5KzYsgjeeuI1LECb8EXuE7bC/mVy6PFCsTDUjvlUkkcl1nrg0CKbYdedpoQJUH6K4rp658Ew74YmD7Igtmwe0ZgB9oANipls2zUIBSAQrYWS5Wk7KRisIosXCSwgHK8WseSx19ApKFUIZXAsYIiaTatXjCDfWR23iAl2dCFiDllRBE6ojYz4mdcE3oZ6/EE9kPCXmAh+dgpc0DmYBNmNchBLIKYaWEZeZNANB8hEpAZyzukcfYGRn32jZuezhg5qW042CEGA+iMCREmMTD0R9g0guPTBf2YA5F/OwLHT4wIOZoboVy3lvRgRe4//WIyMKc+tKBDhlHRkIbjJEjclGDPR/PY55I3sEE44Fg5mPOxsNLW8fGWnhu3RkB+ebT6TRvq5yUUQ+zMBm2YZbAe1wI/+tULolIVVSYKPxkhSOVudfpHjEMDjnkkQZK5LN0riNRE7NYeSRWlTWmbCClaH80BxjyLD5r5xMYAHL8CQgUhwCUq71iZUKRQFKYEoGKvSleGc97a26BAMjeTSwPqMjtRaM9EiCzoMAFKI6vWWAnV96j+ElZa0Tys+k2B2EOIyBEdK2+wxSGA9jk2X+xwoATGVh2ggxS1jpPbK8DYMbLc/W+TXuAai+GpI7am4djaR4SYAFTffpwTYd0Sg/6cbrGg3kv5ETS/B1g9HJWWGv/xfDZK+rPGJEKiRgPx+PqGpO1RWhtCI8R0PsyejYfhguB6B4ezEf/5mR+xmnfBjPGyuBZY2tpzWFCmC8PxuAhQvFIsMfIht+wD9PhW9oz95Xp+UWkVwvjSPmkcjUeWVwjR7E1MkWUJY58ZUyElcjdsiLAa/EAmDWisE6iAI7VRiRKZxEtFgAINShSPZIFcs2NIycLJY+ygYJSUz7lqpNyPUNOoDQeCymksuisuwUEYmB0oIDMDhXsC+yDEEW+cMd3bzbijADyCEG1I6wR0hBAcoTOkrPeSMdIOKUEUGBFNkRyYmifg1xCIeTjtYyJzpzqsebK0pN+6A6YfVnAY9qrIBAi8QZ0qA36tgY28QwNyTvlpemELkQH5oocPLPPgPzsi8zdXOjEoYT3aoyC8p7/iyMIw7DwhOZkjRHdcy+Q6Ur4KioxHh7MmpsvUhmr+RqTdZYK/RBwDShCdS3iUQ4WYBA24RGRYDOMh3lYh21lpIv/5cu1R9pC5E6i5C0qP9yrD6wJpRs48gBl8WkkYg2y/CydstUzQROlQAqxP2KBAI3y7CMQCQCAgVKVAW7ehQhHtLsKRCSKI9pHDmPTp76NFZGrx4rZ7/AMDjX0b6EBqAMOAkCsucX3E7YBFuDwSN4dyfNjnQEEoIAECQHc+AFIWCQctL/y8lZ5/6orAgr3EFBZ5EAgIHTNGtun0QsCdVTucAP4AFUoTF/A7vTQeyX7F3nKNQ5zYtF9SSC0pgd6ESLy8oilDO+rXXMRimmX1/3fR/zskYR0fuZDjwTBeCbezJx5IAR2qEQn8hkR47PuDB5jp18e1tyEs/KFd4yEMSK5NTZGa1iIZ+1hAK5IhrI0ApE4cMd7RHJNOIQlFXknRJKZ29qHNagM6fldNAyIEYQArEGaRC5VGRPwPAKZHLcL3PKUdU2xFoz7ZnV4B9fAR+GAYWGASz5r3bsGEqlz2fqmLPeujY9yEnmUbzzG55qVE7oBjT5Y+IDMirOiSCP04oGAHmiQxd4NmPJSjrMBGJBYVePnGRDQsb36NunK+XfgWHHtORHjSRDTiVYHEkCM2LxPnywBGfDRBQ+Tx+TN6EpIxevxnk7W/Hg7ZCp81BYjJiw2Z0ZDOMdrduxujyJKQEBGxLyEcvtjBBCi92lIo49eqDMMDIGIQj/aFG3QC30wlIwjEsFDRGl9eZyOzXtu7aybdV/iuIc/65oxD6+wQZYc4X7J5Lk0zJf3WD8iRZwKbYNLpPISeQ3E4AKpwWcNTJJkIVgC+RSz5GH5pMIoYGBtxMRIJGZHrD3ydg08jkgthEXOgvE02qesws/CE2NMmVy7MXXIUUjQmFnCYnPEEdOL71l6wHYCBhgOA1hTgHIy5xQLAVhWltrnMZ4BELAAlS+07R+Ef0DOe/mkBpEQyg8ZPbM/ZP15Hd7DWJDKCSIyGZ9w0XiAG3F4VALoxsYz+nzHO55+5mJPZr/SJp9OWXspMNsfMiAOVRgrYbRnyITgSNJ+VVhqPg5Y7JW8Q/KcrpCYEeG9ELyjf7q01ojBWPHyopE3HbGm1gQ2XBuPdXFvrZHbvTJSeLLmRTfWlmQ44TSRBxfwETHI4lw+UW7LVr7tzPWHfW6IBhKNqCiNSCrXUB0pq6EIZNCsPiIhiMkAqQ2qe/l5LRafArIwgEw5rCJgsPrAwtpSKqUJN8TBFpX1RbCea4cyhSYUqV+kTUHGJ7+8FGLs8oqfjU07xidUFKMjrf5Yb8AGIKeFLKx9B7DyRMgSCYRkCNBPuIZ05mWvgDDe/iMQCy4U4oWkPIVUe9pHEB5IiMkLO4gR6jAoAMmqA6BNuj55O9ZeXR7I+IzL3uQfPAjg83iA3RcHDIJ+HO871GDEHEBYh07SEEg4pk99e+dFkJGRUF/Ibez0w6Nrm4fylYPx8H7aV9Z+DxHpk6Gw9+GRYAB5rAXsMGqMZMSxVp7Ll8cAIxgiWU9YdG3dM548knzP5RNYgHUpwyoN51J1Fi/KRsq4c/090lZcUaFrhFFGWfnu5WuwDVuDLC+AmgxCUQbXG6FYfuBFHoohgCvmt3G2UBZUfG4D7Jk0q8gLIZd4XhsUi4yUrQ/CCxYH54HcG3uGwHgpVL7xGK8UkYC1z1gsLKsNHPYXQOlnLwT4DgZY+F7AIgJrD8BeSiIhT4FMbboBWupAoheXvgiwjwA85bQJlMjLctOPkyzhr/aMCYmQAICFj0I3JFVPfSeJxtm3cTyfkJPo03x4DF7SOzpkB3R90DVjJfTi/Xk5hBY6KsvrOgVEcIThfRDBeBEGAV0LXc2NrtTRhjBd+4wnQgmleR35CGhdM7DWH44YQ2uLRO3bYEcd3hOurGVEsu7urbFnkas85eCRyIs0cUJ9eQReVjy/yiISYhBgiyTEdcTpegm3ZdQFSJ0aWEQyUBbe4KWATRmuswruI0HKAWBezMKJ2SkSsIkyDhQ60WExeaNCM2WKrRE3RRif8Rs3EpmD8VOe8ZlDitUf0Y60Y27hEWIIX7wXEbY56t6voHkaALVPUg6okQRQpTwQQHlBiUjCO6AHdIQCcu96EEyoBHQIAtTI3BE40ArZlFHX+xseCXn16asKfQGwvZr9G4/gJ+xCdN4B0YxLn/riGXgXngoB7IUQWIhrf6YfHk/fRBmhGq8krEQwhyH9XZXQzb3xCHGNQ/vCOp7OGiISg8gw8rbyhKp0b12RhUSkDDIsWHP51orwStYQxgjy5KHaXsCntPVWznV4jwNJuLlLXLj+jALA3Ci8QHMNXDrViVSesvJrJCIZLEtuooApbQ/U/kdKCZ6xANpVTz6lUARSUCCyEIpVN68VwIVwRHn19VNdbh6h9JPCCCU1h+bpGpnyVsobd315sdsHn8I3IRpvAejIYN/htx9x+kQGwYAUmPu1yXccDvy9tHUUzCtIAdV1YBeqITFAs9LGwqsJ14DfngdBENjeDAH0z9MYZ++05CGusv/9iNBOGc+JuajPK/Gu5ofgiGnPap/E2/DIiMDLIQvvJUQzLuM3Z895KymviWyMCiNknLymfC+eEbR3RdbT2vZ5l3W1DsjkGmHCD6x1iJBUXr4yUuWV9bwU5uAvbFh3PIDj8BFGIozUMxja+6ssImkUGWQEtBqQn+ik5xHJvYGx+gZsIoVsJkEBSw7gThHKKYMAeSX34l11lBfKcdkWkWLl2RdFHoDXnlQ+JWpXqj1jiyQpiZh3Yp4ZAsrVFjEOJ1b2Rzb4Qid7FaADIkAGuj5Kvf94gsK8fshx/9MDgEYY4LVXcQzux4LzTrwUcAqfnHQBMrL01UA/HlK4yRvaayERD+rwA9mRBjmW2K4BWz9Ig2ju1eWtzJPnQyThozyEKKRDcB5Iap+DHPRijPZfvDDSECeRxkZ/PuhFQqeLog5RhX2uSIRXctgBA+2PrKX7PJP8MIQMSZEP8bzr7mFGWign37rDByLBCqxHlgRG5C154sglgFSmNBJtngY0vqx1r6wUaWJ6rheBgJ3LRgD5kSmrktVwTwEmFpEAWD1xsTqULdSTl7eprDb0n6vvnpKJtikK2fM6zSmPlMci6iOScWlTX/ZjxL6tvYRwhcVFAIcFL/oJ5YBVKAisvW/x41F4Ju0iCIDyNAgGcICsHyGS50gF6MpHYqRV3ndviICwfsij/P7xnb7/zxHjcSrYD9mM0xfdyC7cc7Bin2PP4yDBqSWDgjjCNiRi6IwRiaTCO0fexoB4XswahxDUno1X0w6vKhwULjrEcLBh/RhBgLe21h6WpE4nkYnBhAt4sk7WGHasMzLBxa4/cR/eep4Bj4QwsfiGfxhfpyGvvfXK5ZGWLFL35UUs1wQQMViHygMeApkEoQAK8bkKALIkFJJnSkkm4Fkum1AK5dhMq58CKVcb9kQUKLWxVV6Z+qYwBM36uKYs10iUku6KMUeK1YZxsXj6JELLvvkzLt7JSRVQdUrGarO+Qr4A/NSvfRQP4xeYWWmEAbIOBQrL7LPsjwAPAJEXgZRzItepH2svbEQM7Tt+JsI13oCn054yxD6FtzQm5PPjAXksBPLjzRBBfWGtI3v7Fl7RtXx6QAZhp2vjc8TNuPgxMIhMvA5ANPs7J3NIKLRjnJDKnslxPv1bO/hw8AAb1hEW+tIEThZLJDIRGIhAYQFekrABP8q5ho+IEzbC/p0b4abr6z3SdXGkB9JY91jwiIZ0khvMumOzgTVoE+2wwAmbex6GYkjESRliZFI9G/uUp4yTGBMO5E557FuQS79IYhwUqP8UGjGVk2fMxmoO5tT8zKOx60PfFttJXcbAqZW9mmN3FtSJEzA5wWJ9xf4sOZA+91ej/exRgDYA+wEtYNofISNAO7EDPKd9rD8y8VbKAibvIZzrZw+kXWGdsfAwQj+k49F4F+3KRzBjVt949El4OIcfPCeCK6tOX4ojivnaNzl9E84Zm32SPZJ7/TEAHXSYl/HSlTJ05/jcmjNQ7nlbp7MMJSPa2hfeWQNrL/wLR7ADF8rAjvXLAyXW1Zoqp82IBzfKy0NQbSEfLOXV8ADmI9DyQ5pBvvIQCWkUDlxEXuK+BiOSDnmjZT8BXjGuzaK4l6IQygelJkw5TcY9oDqJctyNRJQlNUEKJCbZZCmE0iicMvRv4tqRFh5SoOeuiWc8qevm2lw8066Q0YtA4xZKZhltgO2RWEfvUBAIoAEJQH2Fbr/CizxHIp6oP3zzK3zqJxwTmgEfb8FTOWQAXMAEUB4LyJHVPkqICKjKIpVrP/cIIs8Yjc8hAGI6xEAMHpS30ac9FFLxbryUMSAg8S7MfsdeRngnBBWqObXjYRBDmIdoTvB4S3soBgGBhHPC0eYgLOTRtcUL8fA8PkNrjTOcUussD16sD2xJ4QCRXCsXpjxHDvnEWi/ppHBF4I+4DiOkfNc5jyUQKZ+4vjgTkV4kGqkiq45EbcxjPMkiIIj9BHIglJBIOAaYJmTSCMKNE5af8uSpKxamRApyTwHIFaG0QzyjPNeOX9VHrMZlLBSqP3nukd/kjR+B1PGlhHa1Z0/HMnrRGZEyCEIQ1ldIZY8ElAgElEAH4E/9AB5YWfn98Ui7R+nX6R8iISwPgERODBFCW0iyBxlIud7JD0mA2XsmHsQYO020B0MIZSKNo2mEN15fJAgH9e+TKKdyDhHcC920K2VIEM2154gnNHToIVz1HOGQ2Djoz/G99XKSh0gwwAvBCmNmDRhK6xFJAr31tGaRBTbce56hlacO46oN6yjPfe+d1JFqH1Y2FISh8C2FlyVPBEIqfHD/SKS7J8plledaZRY8T5TVpwADNLgsgwk4cfPM22rvIQBUqJe36Q050phkyqFEFoobB2ATBnSAj1AUILyTmrB6xuPaviZlKSvPeCmq8evPOI1f/95h8DzVEW5QvnkJO3gqewH7FeAAbvsA+xHhFPCsxxFeAWSnZa6RhrepnH2Nun57+OC5Z/ZK9YMIPAsCAH0fuPIi/eP1fvrtxzsAL2/hAAD5lW9PxjMhvzDPGO1n2uNpR7vIBfz2L4iMFNpEaO3Yd8kXfiKLPu0VeVykZQzU54nozb6yr9J9KcJoMrR0b03o3PrnndxbW5iRb12tl3zrFCGI+7yN5yIj7VjDDLNtgaN2+b4ntO4wABvIFKmksOyaMLpII4qRElhCIoS6PhFCFkSJRCRi5c6uwkc0SDTOA+nMUSWCuDYBqUETA0YoAy7MU8bEHUrIN8ksh7qUQ6lOZ1gqeZTDy2kPAbJO6jRJqXvk5OVca0v9iCTVv71OSve8PqQWBGH1JWyxN2IMbLJ5I2EQYAM7iw5s+wNGIEMyYBdeKSPksgfhCfyWeEDXj6dCOGRh4dUBWPWAniCZEMp7H9cIyUvpW5hYeAXgQioGoDyelEfRZmTsVE94iNTmhWjG7qhbPR5KWGv/oz9eEBHda0v4JlxESISS5+WuQwgHJQ4khHV0KZxnGGGA9/ftHgwxvPASqcIRMiAcnMBLBs+zCGR9CVyoa91sKdRzSKFNawpHCCxiMg7rnrElvFB4IfDmuUis7UAGOWJd/+tLnibvsyIvEmGeCruhw1qDAFgTMaGsCRcdkRDIG2yWyL3yUgrJhbNIJq4dMbM9CdK5J5SjDgW2SWwMCCSmZVmMQdmUqbxUWePRt/54F0Sl3OpIPWfJhHM20Db7FkEIIt4HbOATzu2R8v4cBgCRTbyjbdZdeYTglVhrv6w/QiIOUOah1AVw4EUAZOFRhGXa1hbPBOx+vIC8TgSd2CEZL4ZMvIF+I6Bx8aKdDvbLm5ibeehPv7yQwwbeGVl4WMRFOuN2mMBLGZM6PKmwl8Hx0SpdIhEcWF+EYUQZPJ6JxxMFADgjZivguc+zhHqIhhQI5eAHdiIboMNE3gMWrKd1JtqDLfgh1p1XkmffC0vqRSR4QibYghvtaV+KUAjUGYGyF6kQKW+DOEleKTIhkoosNosRoBEp64AUCOCdAEWZBI9i0BSW91GOgrRDEYRS3CvPMpksQGuDIitLaSZkkvrkDYWI2kQk7ZosBWjTeH3r5do4fbvn9IiVZhmFmync+Lh+33zZXIvhpY7aAciehLdoT9SfkO+vEzUA4pXyOup6xlojjpCv+vY2Qi2eAgj9EArAEYE3IBvOaY/n6UtuBALsvloAbmPkLZCft0C6+57Mvk09bSIVohkPaR7CMl5FiEZv9kLa61vDDk2kyJnnsndCZmGlPZawjgfgIRjaXrxaPwcVPL71AG5k460CPEPGuLkXZltvhhH+EAEeCEJIM7aIAzcMpO0CXCEpjHlmzWEkjyStjaIU+fIia0RDIIRyYnz9X82RxANk4p085H3kk9yXiioBbCzVEUDHdrEvZTk8sFexz2HRCQUaeJ+BmFwkzEW7Z008M2EhmI8lKVMdRKRUylGWIJ86xmSiHcm7RzwkMmZj1b/PbLy/8LYeQLh6C4dY7i2q0AaQAcICOz0LtMiQ59if0I0IvVjtvEU/hwhLPiAGPl4A4HkKdfUD2NpAMPsi1whsvyRMbE+1xBCWda+fQkJ1zQd5IzISMApOAZ3SITASKYeE9kfu7a+8K+Mt/OkGUiiD9Ijqh7z9tK2+eggoLHTCxyi5Vh+hfKkCJzwUT+cZvXu5a12QxppIkc2fWDhJ9cw7KFiDBTghRRQZWWLt4QO2MtQZcETyZ+zylYMPmOEsEm3AmfyItl5LmQ7erv/1JaJ4gERdK6zgxbaHe4JMAGnwEcmkuF2M53YRiMWJRIAK/EI8ShGbArRJGGhE0k4E84zIJ/J5JspFUnUojxJ4n8ZMkVKKYZHUNRbl3OvPgmhL6IisrJxF5bkslBCuUymnVEITgEaSF/14HJYcAFn3pzzWUz/7I2QBXgQFcpbdnsheg2dAMPfare1CxH7yeCbERDZAV6+TPiEmIvFuyOUaiXgwP/WRG5G1g1wAjhT2OIyMENH8eCRELTzdHz3Rm8+phHSMkPDSMTgCIqSvJZCzF7y8mEMLp3l98c+wIZJTPbhi/LxLU967PHmew4t1JRl50nqHJYJ88ng0RIIjOFYehmCduOaRlIcdzxnpMOYaufQnvf5nzO1/pEI5ZMI0jdVgbk1D7g1AB4hkYO4RgTsWk2ZNeBR/XckCeQEnbGLhANfEIo266tiAmmRhXQqQx3pZBJPzTHvtq1gP+ULKa2JHEM1YLIQxs07CBlbRAhY+ChUcUAjheD/hqTE6crZZ9nc9wh8AAfJ7eASIQKgMcAKssOut+fnKwcYeGR1mdPiACDwVUBMkQWpl9iPZfsbCMxkn8mizfRNvAfwMhWd+vXvan/0P8vIk9ohEpAHkCEAnwsVCTOTfsQjnkNcJHyLxOL3ERRYY4JUQTHt9p8frIJDwmiALo2ftrZW1s+bWSajoXjQCH9bWGkckeMjg55Ey+OFVvjIZ2UhBYD18V0ab8O/ac5zQvvKXR2oP1P7IPWJhJq9kYHknxOIBNCZf5yZgUDyF8I3H6ZN/4KcoCnU6w8J5w+4ZBZFCPkqjKGTkvTyzuVSPp9CWRXBogUAUzUVTTEqTGp9JG5dxZlWUQyxfTlgMhNGfj0EdPtgM+2yFAAErLCQBqMC5J233H5C/2g9h7j8k7IQO8HkeRNIXy8+zdIqGrO7vJ4X7QwShH4Ajnzp+SArg9ln97OMQTHuMAAOAeLywF6YAz5AgH7DbJ1nDjuG1b8zapSPj1o+QUhu8uroMEy9Vm33l4CQPmehfBGO9GUORiygGoayxfNGN9RNB8FaMNIIwqqKgwrvIhFzy4KJoB0alsOA58ZzASN4pbHcPT55L3cNYZJJehw08EPLs4QIiYSkGIhAPpQIJqBrUEMACK8uedeeGAR5Infj0tyfAad/RqRwrRClOayiNu+aVHFggC2Uhkn0NZWsT0Fkopz2IQEkUaLzGkwUhCE5pylC6/ZkF8V7LOBwLCzEsMCADBqILY4QQ3oMs8F70e8pD7I8nE0oJnewj/ICWB2PF7WEA2TPE4T1YccQQ9gEo8Ar7nvt1kIE8gI2UPJqfvhHnqRAVidSzZxI6CrWEt8I6BLA/A3460SbiCfEYj8Iyp3TGzDCYq/Fae8/pl6774JVXg4U+gWLEEASO4MK6O6kTpdgyyPfeh9EVliNUn3AViVhjxIBNJEBG+YRRVham7JEQxz1iwQjChRN4zijn6cI5zMMVHuiH4Mh75ZEiUF6Jh7IfIryQgQGgznUQ+4nODBQZuGZK4HEA3r6Dd6IUL1CRAol4BOXzXKwPAimHHLxTf6LMjavDGiImCyg846V4F0plZUzUOInJRqg8pVDAZlaoZ1F4HQCwuNoGUgAEHCdT9if6emof8Fp+wq7aQiYEcbTM4hOWHoj72XwjmPAJwIHZHgOAEU7+/hAHwAHZHOxnCG/RT//rVTso6KsIJNMPMiOdl6yIgBB0jwDCSmPnlYyFHuVpW9rPkT7jhMhCO97VPOlWW4wVcqnv5M6aIw2BjY7CEQXAEQIJrDUcOjjgqRABqUhrDgPIoA5vpRxhgDu4ggOk1JY2iDLKt3+Spywiabe2IxKnIrR7f0TqvREiOXBAoq4RSSXE4WJNFthNrM6JybIeiMIbASwvJPzKcyCK+rwB6StgRLH3QSrleR6bSkfOCOQZi+XvV1hFnoTX40n0gZQU3lgQmxIoMsvGw2lf2/Io0N6NhRVeID3S2IgDNID3+Q9vwGK/Xj+gBTrE5f2EPcImltkYkMweBsmB2F6E5bdfMiaewjjbO/FCEYJX5A0AnCftUODVfkhI/OzBtI00XkDbL9G7wwMEQAb5DA2i2AP5mRcPimAIpT1jEBobp3aMW9iHoNqypvZf1h0mkENUYs0IL+WwyF5I+J8nkdrvIJZ7+LP2cCoyIYsDYaO2pYihPe3DAOKor53KRy5eSppXKgrrGjcQ6QMiUp4IeZAImToK1zigGgjwGoABx/rCJuy3F+KFhGBALh7mPeTLQyQunXsnndzwPAiHhGLmiAT4HYkilD2La9+9IUaE0idXztNQVPsr+zWHHkhrDOJy74aUdZqovnFZRP0ADE8AgMAkjLI3Aa7XyzP5sfYI4fTMXoLF9s6I5XfvmcMO4RESIwpvhWjqAGSni47OeSw/5TtIAF5k1M6r/Tqp2x9Phhj2b0hAL4xehLJ+7q2vcM/RPKOAgOZDZ0jHANCjsSBVBsEz+rau1tm6izCsl8MphxvuGVE4YjBtHZABERBMBIR4ESnwJ5EisvB27uU7sdU+/HpGXCMgfEcmJJLH2yHQRj1tcS6PhDBLJHsi+6ZO7yIM61CD8jSiM5bCoAFY+ITlTr8oiEfhdbhughwWIuUgkS+BXVsU1xaJJWahWSsKjJzIgGyI1AmbcsjF01gE7ls/ACk8RDht9P7IXgzBiAXkkYR32geK9XxCD+0Dyv2j09f689UAkPEaAMUDIgDPwboLy8wfWYRpQkL7Fxafx1GPNxPmqevFpxTwtWEv5KjZqRhdMwqv9tuvNHgSYaMwEbGR3s9+kQen29bLetCdI2v51hPB6NHczIWB4JnMURvGZrx07J5xs85S6yx6gRX4Ydy0Z68matAPg24fhUTK2mM7oBLCbygoDQ+wSZRRFp6d2HIKMJzxRU4YRyD15fNu8A3zQjnEcZ2Xcn15pE7seCKHDBq6jvSOKIg4Bta7H5PAxg4dikt1buAAbs/DwiCVkA7BABiBhH88AMUoy3MRG1LKZI1YNu7f4gC/ctrSJs+FFOpIlXHKJ+ZGDApGCuThcYBJexYFqaWeq2sBjYOX1L5F0w5AaJf1FFqJ95/7JOit+Qm7AqafUy3hHWkvwlLzQDyRPon+99d7Hh6J3owbCHkD4AR0oGcMhFov+9NuJPbCFjl5I6El8vJuSEKf9l9ITJeAT3/0qF/rIKpQtpM7YbL9Ec+kHv2KROhaG+q4ty5EHpwgj6jDPezAFjxZcx5Kv66FeZHIfqm9sGe2JTyXa2G9MojjsMs1YvFaiJNHKoXtriMSzOetcOCDOmwonEMehTzs+FuKWBrUkQaEexrHRoyVZ0BIxgIYNC9BIZRhQhaaJ/GMAuTzFu2puHJEYuUcc6tPgYhF6doSlomn+4tMC+egwIkgy0QcaiCe/sTyjoEBgCXXB/JYFH1z7Sxfm1/9s5TADJA80QL/tf4cR7PyCIGYNuvAClzCIF4P4QGfFRdO2n84VADgHQOA22cAvFAPUIk5MDTmgVA8kjCQR+LVvMC9v8TtR0fCL+MRziGoUM0+CMkR3HiQwBiFefREl4wVo2bdkIcwmMR4zI3+hXWIRLcIVh3ra12NX5s8nbrWkVhvc+KVHEy09ggkCkEsBxOIY98Eg71S4WFsOYSCyMcIIxDiCBERr32RMjDMWcA2HiAPsuSF2hOtV7quEamXscI6xFEYedwL74R68jWgosaRp2uDQCTuT/hHsYDMKiIJV4o43LCTP+7UcwqkNCkwWwBhFWuFQO4pzx4AkdQppBMCsl6eIyGFC9X0gYQWSdvAJv4XSvA8vFQEFxZaJGTSL8AKQyy6zTIBJF7pZfdHwqLAKhWS2bMIk1j1DgG0KdTxC8DGALDAhEw8ifpCSl7JOxoHC8JCQPdc+KQd+eYK7LyIeTAC6iFqhxTCKgTZX8fVwkLjND7X9GFfhoiAr03XDkbsVYV09AycDBMyALj1c81QeYZMzUd9z/Na1qAwzj7WPQ+kXW3ACi+EWH1mxPtac0YTHtRx8stAI1AREKw5oUMcDoDs0bf78OteilQEvhEJxkVlHAtv5Ki7Lx/whHO5Dh4K7faUDnGke+AgTyM1KMXIBoFEBoDRQM3bADSLwVq8+QgLYWIUB+S8A0sqdc8iUZBrls496wcACEBhLFjg54UoGgARFtkolgUFoo6PAc9CsmbKGRcXz5tpswML4Qpi8mLKA6D+WVBgfepl6v1nf+Lo2DEyEgCjvY3U+yKexpgAHvCNjQfQl1AJ2IwDgRECqPtp07yIdng0+nMYgABIwuobPzJGAu3rU3/mgkjbrh8y8W4OLQjiKW8fxoMiUW3QI70gPWNnneiSYbMW9nmMFQLAgmve0Rw9R0r31hJ5GNxCeusj1ItkjCaS8D7K0Y2+kI0nQlaCPLYOIh8GFd6EcLyOd4dwiTj7ZQNv1DUcey7ljfJIiALrvI6UM+FUSHxAqPfrsIFEnIQ3qnIvZd0TJNLRHjMaWHEqNylOZSF6M83N2ig6imalAJoFE9JIKY+nEJZYOMpGLNaIglk39/YEFshxOyvEciERS4cAQC90AhqLD2wdYiAZogKpUznX6kvV5SnsPXgOwNQGYHZ6pd3euTz14xn6oFQ4ph/7HYcEnQICp/aAnPdz7RkSC51YXal8/fFsQkJE8pGr9pBVO4wFSy28BWp6EtLSE52am3kUihHEQBpk9ONtvQBGMH0KvxDdOJAb2e1x5COYlK60gVR0py8E0Q+yGAsiIABvQ/9CPGTSrv2vutbW2iGHMfNE8q2x9UYSc0AiogzsmCeCESQSiTCwDCTsETjkjex9EMh9RIJbpBFJhWEHEcrIJ7zVEgnmOREeCRekSPRIpA4aSKd1SCXk48JUkpJYKtUZAvFIvI3JsD7Anats3+Q0BaG4W2Eez9FGkGehLECnJAtlARHMYiAcr4E8Dgu49A41KJvy1WURWSyWmhdjMS2shbF4QhKpfBZfX6wfy4i8Qkghlk+B7E2AComQT/m3dq8EoEDIy7D4fULEo2ibdUck+x1EAk7Cqxi/fKS2t1LX4UN/qoDo5gJcQlZgtXegX/pxT2/mRwfKIar+GBreqvCVOGRATOSmB+N26sk40Zf1YJTURxj6RkqGhtFDZgRS3hqow2sZkzBO1KEMPSIgHXiOcMqICEQdSMk7SY2fYWUYEBUZRTOMhnX3KsVckRE+RD9epJJIImW4RUWRKc+DQPArRZq2LOp1nSeCd3mu2/rgA2KR993DBiKkQxxkQiT3REWurA4xmJdBFF4GgSya9zOsAe+DTAbFK5mwCSKRa0pCvqyGjSLr0n6JMimOkihYqCec4865dd6LxwIiiyQFAotmESgbKLWDaBYN8IRYgMqyGa/nLTKry+uw+IAP3ECGXDyDDXs/HubVQr0t72sCbSMFT4AkCGEvgvgstf4BDZARpRekPJwxCRU7qUNC8zN2oLI35aEd9DiJokfgZKAYJkA0X3rhDYRfTuOMQ39CUveMCmCrb00ZMrpHGu04gEEW+rJHQgR6ZYiQiiexLohGt4xVJ6HmpwydOtzQJsKpbw7606Y1Z5QZTViQ5p0YU68kzJsnEtoTkRA8eTeUIW/fHnFESMLNvA4cF9pJlY8w9kYwDvMEoeRd3ueIKK38K0rrsEEoF5EK46QKyhMT2lTVCbYajEGJRU2W0h09c6XiVVZAfGrwJi1upQxxMZe/1sG1OoiGFNqi0BaSd2KNEJASPbNY8i0chQuHLKyFAyKL6l5owyJbKGWEGABmcVsUwOI57A9s7gt1ermJNPJfFNa96IdI2kJQpABcnqFv0oRSAM1SI5yvKZ76Js5eyEkc4PK0xs6rM2YEiRgahgLg6Ua4CqB05Dndq8vwIAZvo2/lGR06p2vrxngxcHSK5J3g8UpEXTrm9Xg843IvVGMApYwbUvFUiMRI8NYMCm+mvPXQn5BNCjtIw9OQIhEEt5bmgvDGJuJBHEYdIRAgfLb/8exNR+zd3SufwDMCqUs6XJAK51xfXucIh1JIh0ye4cgV2iES4pA8UuQxIBU02AB1GmMNhMcxURNHBgvL7TrJQQxEc4ri9I5SuGoLamLCPZN0CEEpPI1F546L9ZEHcRCBlyIWiUItqmsEZv0o2mIBEJBYSDG4Z0Ai/GPNWUNhA5IKYYQlFtUmXOgRgfq49PX4Cc+EUEJEex4A1xfPJ2yS8pgAhmD95el6PkRGcsaBh6FzumWF6YMugIyx4uWA3zzNn5Wnc95LOI0wvDe9IKRUXe3SdwAWMtl/8BzCP3tOhKEjY+Xh5SMKg2T9eD1rg1yiAWtgbZXlhTsAUkd/+sq7GBv86BfpGQaYgifzU8Y6y7NliEQbksEosQ2BU2Tj1RhYEZB6PJjoKU/UNqW9EPwL36QRiHTQQCLT+yyRqqBRDxXUaO7MoNwXV9Zx37GxIqwGwlhYExZqADkLpxzgUghyIBkSIhplWWDKsXhSi6w8gFggSlBOu57bIymjX3kUr0ybVx6H5WURhSzaYmHtz5RrcytM0T4LzevY3LcfEsJ5b/N6/Hgj7QoVkUGII5ziheQB5n7X16FFhOqHTIwBANI3HfP4AM5A0C3A8daMjvkCJGtsLUQGUnqmG4ZEmbw9AtAfHREGjf54LF5biMYbuS405OWthf6UpU9jZMzsM3l+5LPH0p/y9qz0DxuiEH0ilPAdhmCjwymGF27M0/6YUUACEQ0iiGgQhoHPw2TsI5lUe+qIlNZ7ISB8X97lIcWHorMlEl7gBJJFpmuPJIMH8lADBpAXqvGr8BEEQyADMBCDspA2uVyyBeSegbwTJEqSbzFZR8ryzIIiE09DqfZXyIQYlMW7aYflRAqLr65YVyzslMW1sg4uKNlzbbJoFkLYYPEABcEAQDkLCGjtG1hK+xenUoV1QjC/515ivjU/oR0vxBrzeg40iFDSvgdp9OPrcyd/CLx7LD/PEBHxgJROkQMQzY836fSK9aUL90BIxyw9fdIXiwywgA/kCOPa/OnEWjJCPLWwjh4ZIp6NZ+qgQahn7ayPNaVjY+H5jRNpEIlX0l57KPV5K9gwTnMQqjGa+oYFZJICP4wZs723vXbkKBxj0CMSzCKGPBjRRuGcz4Kk6uYM8mCwHd6lRB7y4Ej4j0CliHftkdb7GKCBIY4O3BtULI1oBmBwvInwguvkLSiSciwcBXHnlCiWzksgF2solAMEyuOqLTgvwbt4F8DaClGUo1SnLhZf2lFlqY8RhS0IjYysGDABjsVkGfUDGMiMSAAgtLB5BwiW1h4KqYREfVvXX6u+1p+QzsGCkzIhjX2Onw03YvUdnXAOuZ77IZYQUB2ejJ6Rg56RikemV/ciBPpjaDqEoBvPpMryQMoxcPQkzAY0erRuQi86AnxGxz6IV+K5nTryMJGEbpEB2Xgk4Z359BK6unBgLRATsbQLE8gPP9baeK23tTZ+htG4rXVeqP0PcQ+nrgvtkAUu5COgcM61LYQ2GOL1ZBFIG/ZGean2S/jgufz1Rq6R8IMRiQsjMhqIAojlWkc6NPhcYRMQYpk4K8GDsEbIAawW2iaTm3cwYENpUVi1TmEspkUTUvAWQg3hF6/Bq2jfiZ7PPCiCRTKWlERcIw5AICAiGkencxaBBbRorLZx8UKso8VEIv1aaCGHe3XtX3gAm/7Xesjg17E3j2JfBFj7pbWNt2eV2x9PRZzg+UJDOIXkAAnQdMZA8Q7mCox0lyfilRkeQLIuvA1g0SfLj4j0bR2E49aUBWdg7BkRCSmQhpHpUMIeSN+e0SMPzgsxfO6Ry76Jt2WgnPjZ1/Gk2uUFzUE5bSCi+oyy6AJ5rKl9DHJbW20jHEOJKDDI6Fv/7sMnXOSFeLSIE+lgyvME9jtcKCTUXs4DH9reuI9EebGLSGLAHhDXG8oZGEALuQxGBzo3ICd0vAErx3pYmMjBoqVE4GWtuG8WCKkoBZmQSlgB6PItuLAPMS16itIfi5LnQSrj4hXVQ14WGYkQU1/aZf20jSzyLbR9AMKwjkBI5Nln2KSztEDL+gv52q+8tT9eZEnoBa329gBB2PfcJ0hCPIJIQk5fR2ThO05mFHhaJBFeWQOAZLAYFmskLCaeIRZgiQyAFdCUYRDpF4hFCPTJ8Gjf32fRjbWjPyRAJn0Kve0z5SNz6+u58I4XNWaGiREQaiMTPQvvCN0zujAh9OSREAqRrDvi2yP1LggOYbDQjiyRYJLxIObUu6W8GTxpIykkRCakyvvkkUrlIxR+yON4rnqIJFOhPXDguooLFcwDGKwODMSGzcSAXmjAUrByFoH1sNA20TbVFpoFY0XlAwJws0SIRFxTprBDKMJqsEa9r+KSKRihWU+KVg+ZnDIBhv4tosXUFjJZaIsAECwhK+jdjY09sgiTHCnzFvIA1glaBwJezr5ePx6ON+pUDsnai/nJ6y9YfSdnv+S3xFMeSM1ZGMUjIQ0DRgfA75lIgE7tcQAVuIRvwGn9gI+hAiQAFJ4zhjyEI3hhOv0ilOvIoz0kQC5rTb9FFTwOw+nggeFyjTxCWljYI35eH4kYXPV4POuF7Nbf+lr/iIAExk1gAiYjUORwDdzEPXyaszm6rw314Ek9cy8Sg3VeCUnkex6BkC2iVY54dn20ijx5JZU9iEwV1olBGpDGAZvwCkAtnADovEGbeZaKdWf5eyEKpN6bUKR3KFw6S4p8wMDDiJWFHKwla5T34a3kIZR7Hg1JeDv9sogIJGQTngCZdi22MKXwEZEd3dq7CD9c9+N9hCUOB3iAXoy+1l8eiWfx/ujVfp3SPeepHFAAqPnwcAAOrHRuvsBI9/QhVEUoHgGp6JbessRAGrDolZ6RgyGyLsJiJNIm0jJGUuSyL5P2Pk/7+hP62ZcymkhibPaBXiVYdwaL8TIHIXdjtIY8JI/EWIo6rDPvKtKwR0IEBHLkj2jujd1c4KR7WDUvnlY9mPWMtK+GX2WlEQpZ4B1R5GsTcSIMUrlWLu8k7zq1c8RHECoiIRFPVQMa9ixmY7nB6MiEABWZhFKAyqoBMvJYaArl0sX5LBl3zzoJu3gRoZ/64nNKdM0zWfQIJE6mbAvMalGu0yaAkSIhAlkgi6Nf4Ya2eSl9CU9YZyGR0zMbfwLsCIM89irGBqQA8Hr87idwL/ptGNmBx/6QHol4V3oERqC1TzFex+ftbxz6CJdYfuvECiMMoFlXQGpvZC09p3+GjM7olhdCFLrk+RgjXgmR6JnwKNaFt3ct6ujDXOtubMgsEmBA7Zfki1SI9UMYYbuw01hgwIED8gs3kao9Mk9V+A/wMKkeb4so2mEklEcmZeTxuMQ81eEgIhmdRCb5wkJ1lNUmrxXREEi0JuWlrq+/HX0jjUyFeCMsU1HD8jSMRDHdZAycZQB+m1ubfEBntVhGRGL5uWyf2HjnwJpSMk+lXO9/8miskXvWiHXSLs+ENEIW1lH4Ugxv8fRpMRDFaRKPJ5RAYmBDGqEEr8gjCi2UQySb/H7CLidr3veo7967HadrH5afk7j7u6DX8jMuVp1RolvkAWJgZywQH2D9eHqhlHKAz3jQJcAgEgJZY0ChV0Bz6ka39lWMG6IAOGEctYGcogfrJ9W/daVHZEMwJEEWOvZM2ByZeCd1pLDBE1lTW4MMKSPp2ngcONnb2TYIQ5FeyG+8gA4jyBaZkIK4zgNtnjqVhWf49owe8mThXl3lkVGfMK8OMj16oofr68sGIR3yyOz0QoNE4xouXyM61iiW9v0ca2fSwgvK4ZEsYAKUrDxlWhCew6IhidBLjE15FpAVtZgIJXSjUNbRIllUfQg17AOK3/UnpOsrgf7EwKJZSGESEPb3PAhzf9Fq3xJpjFcdBwM8lXzPP7x/3i05fndyyDvZXzEa5sqz26sAtT0J4PIeCMUrCyPNnXfiTYDQmgnBeHhgASi6tH+y5y2son/6dpggXBc+I5P+GDxrZC3oWD90HsF5SKd8DnM8R6LIZVwMKyMHJ8oxhkJy/egfLtxbe6nQsVcsnvuuzngZBHspY22/QxCFIELkMNecgH0TjwbDyvBYHUYgijpEWaKM8q7bRyFRhxKXh0IkBEGiCKVQ4ZxGXFfBYLhdkzIQE6BYygdmILew4mSKIxaX9RFeUKrF4PZZIR4NeXgVxEFGxEIS+b0XYXGFDUhjQREEeHghMTdQISmPY1GByqJZSFYRcfz5gB8w2hu9yEsgnXAPeYSjH9Z9Ur9X+9D1/jMGJObReVXzZvl5c+ToXQxy0A09yu+omvf3kpUAnJM55ZGLbhlGIRCLLwQUPiGctdGfNQVwho7eHT4APyLxWPrXF+9ona07IjFkDJa1EN55rk/rZG0YU+uJeMbDUArdrbXxS4WXvJ7nIhdjZAiIiAXm5PO0sIgIEce1VwHwi0R5GWQwP+/Y4Dgvg3iRJ3IRz7SFvNpFJG3hjPYK867QTliHRAq5RhoFXce64kYdcXdOTXRoIN5VUAQLg0gW2f6E5aQ4lskzC2ET610S4cLFuZRhEVm4PIsNLctkES0eq+nFKbJYMBaNpWJxkcIzYRgvI5QCHP1aQAQSnztU4Gn6cgChhEAb3vmxsPYZ8u1teAV9vNrv9fiUqK8o7nsj80aKQlh6yqILXaWMFRADJ8IxVsJYP6ePQiCWl3VFPNYdOAHFGnS4wDBaF15IntBPeWuAiAwdI9e+k4EUNvNI1sV4eEV96h+hkaej8IitvDnABKOISPq0rrBg/RlXxtbeu9ch9jjGwWPBB9LLh0t4hFGkgBvbj0hinjCLQH2aFpEinLLykEU7yONZ9d3jAicToa5tESI5ZHC4gCjYpaBC0kfGHUEqnWmU6NDgKZ3CgV8ogEgWEuBZHooWJsjveyzlKIvFoQibWKDvrbfnxeisn0Wz30EEJ2p9ZtLpn346NkYEezHPEI1HAUzkWEII23gesj9hlLK8gFM7nmuPqJ/6ISWv9ZTHQdqX9UTa0H+E6vjbHLyHYd0JPSEOr8uI0AnA9l2bqEA+b8yIWAMhMgACkWvhUSEaj+1VgDVDKqGfqICXs17WU4iOVMItEYK1NBaexp4HMdS3Hvp1KGKfZi0QB4lIH+cydOoYm/Hyeg6t9CFk1wdiIZItgL0ST8SjMAJIxDjAHyKZDwF8hLDviSjhNeOPlL1WIR1IEG0gDA6oq3xeLu/Wc9y4HBEiKSy0Qyak8gDjVESeiIRUyBUr7Y14EpNGFMpoz0I5FoaiEciG2AKzPhTEulEcgiARC4uIbZwtknrlu0dW4LFQFtYCAkuHCcCAOICTt7HAFq3v3JZINu/eG91BjnTtlfa07TkyIIqTPu3dT+c6+n7ZH1I7eRNSIpMQCZHlAyTg8U7myfAgurLq8Ljm60DAYY8jZm0ALOPEMDFagMfrIAzd0jdw8wCsfOEUQIswRAh0bQ2QC4lFHAjlmNt6CPH00cGGtWfIEMqpKN0LweUhk2tjRX7hN0/Gk1pvob95uhaeOVgiyOMwQvhJHDQQhCkU43GlneAVviGI8EwYa19FOgG0ZzJv2wr7Lp4o76OeMgjkPs9UXh7p+vobSRCo90lSoR4S5aXsm1TCQg0hkk5sUMWyBmHSLAirYiGFdfZEFoPVQzKexsIJFRAFObhyBAMARIl0fV0ATCwdL2SxxOEWwOJSvkXkPbxAjVBO5IQXFhBZAAXQlki8TC9bI8kePSOF8C5P99TfB+1P3cq+lp/+kFKIKiwiQAWYPE6nkaw8D6Wcn8MIRGMs1DF34KQf4ZR5248ghxCLd7AGwCn8sSfRD+9kv8HS5xmEevRrDayftUEc0YA1ZASFm9pn3KynNUI0hLEuPBPvj/TGbjwMHYJZD3Ozz0JQbRkjkjHGxgBTjADS8E7tcbzuQGzeCmFER/CIRA6/eDDEQKhe6PJC2nEKl3fyzH6LJ+rQISLlgYhrmG9bIw93OJ3rPRLSEGRBot4pkYttR3isDiEQrBhRh1gulmXliFgXqZAHiSwaRVCKifNcLBfF8VgsLGIIUyyoRSKsHdIgGKtqj2WRpJEPYQEE6Vg5wjpbsICHTLyT/H3Bijy8iJee9lVS94VV+3uZA4e7N3rZHwLqX9iKrMDHGAAYffAsfsYubEUElh4I81T2ge4Rn+Ggh/aE7rVRKKUNegFUYRuPwyAxVLwOvdq7MHQAWzSALNYI2REUwdwzer0Tsm6MGRILRY3Z+BCHfq2Be9cMmfHBAHJaZ6S25qIM/cGOMfKcCMOLwpr9tf2d0M4YhXZCVt6Ih0IezxEK8BGEJ5YinLSDhd4TdY9A7l0jDgJ1yOBe/bY3+ECu/2Nff8THG/Xn5ZGp0zxkyjOpqFEda7gODRjTHWOzGv0NiRAAiZCJBQN+hOB9LADPZbGFacjjmcVDENeEcttgs1aIw0sJKeUDjs14cThrB5TaBTbgsajykCUSRQ6eyTOAvhOpMI/lV96+xec7r/evf8POD5kQqReXAMgD6ZvnYeH78cRIw3iYgzHKQypzB1hegbFCALpivHhsOmfQANk97ydspGNrZi15IuGecTBIwlhEAXrgR0DrgZhIhNSI27ss+03jQhp1jc/6KMfYIZL1tc5I3SEKfCAwwwsL8MNAOwpHJPschtuhAc/D00hhTypkE84hF2wy+PJgleR54Je4Rg5E6Z7HaisD855LESuHgh8XkRx5E+RBov4tu761i0wqaVCIp3GdOAYXt3ZMiOnicHsnIYLTHQshRLAYSMTSUBCvRFmsmMWjUKQQPvBkQgdEUUd5zywWa8oqt4hAAOwduQKg8AaIALIfQFnQp/4sAqnsjQCVZxGisbz93CPYU19ov14/ZAc+P+No/2DODIxwCYDNvV9WnrjuB7wEMY1bu8DrZ568hf0KInWiiXiRkh6tg3UTYdg/MYKIRu/GAvQAbh2NlfCgSCU8Q6ZCaiTSPgPEoCGcsVkn9bRnn8QLIhQPKeqw37aXJvDAQyE4fPFGjvThj/BW8nghpOGh4DNvxfMgkDDQ/ghmeRvkiEyeI58UvpVBHNhXFu5dOy8gEen6/yNFIh7JdSkCbYinEhJJkSZmGkjxpAFgv8GwHGJPi9GGkXcSmiEFl01YHN6FFaI8C+gQAmjskQrjLJg4HJDkc//CCQtrweS3gWUJgQJB+rHiQrTnTuAK7Sy2Df79BSwCPhX2vR4/pAU4IDc+xOBNeRB6YXyAGFB5XN5LyCpMAkyksT/qx2Ago7zCOx4HoZAIgHkmZbRFzI2nZoDoXlTA6wCv9XDSZx2sX++CGDIk1weiarN3RoRxRFQGTR/m6do6GHOHJtZRiOgQyjWPaV31JT9sIJowz7bBeBC81yi8J49lH+UwAbmcUkrhzokffCKbgwuEgl24FV0hHI9lr6QcTwbfEcc1EZWJzpKLM+uREIjwSoV7EUw4pwGNIg0i8U4a1qk8xCIRSpgnVuWCTZiVQRiLQyyUw4fyxdyUxRtZIIq0SCwy4rVvEor0fkoZ4Y/FB57AZMEsVD/34vT7b1/K7gkbDwfUyMRD9cy9kAQoXs+f8QG39hGJtWYQAJZuGA2g5G0RiBgHY2F8wj37KuMSAvJuiO/dlmf9kAlweW8k8kOyu5c2FqEcr2V9HEQ4UBIhCL0QuwMhwohphwEzZutjvK6NE3naJ+mLd2LYkA/RrCWytOYOH6TytO857wQveSkHIjyTsXXiaIxCPOThhRAKsXguXgpJnPh5Dp88DgzDLQ9UWBe54BrO8z6kCA2JOBjcuf4fshEnaX8ktEOi9kdEQzpvAOLEvJMOiUEYjIGZDM/EG5m8RWGpeCGWhWIIsrQh5lXsdyw4ly/8Y5mkLDRle4ZA8hBLXSCyMO17Aspzv+dO2JCmPRAgIuiGiIH39fwhrbELeexnEIXXRZxOHwtZzQvhGAreyA84AdJzns1zxoWXAVgGBtF4MwBn8ZHXPAHdHPsV3slHGNZcmC7kQmprZ114H6Eho2cdtFu4iEjGHMGM2f6TkTAu8+RN6bV9krXvKwlrW571RSrhvbHAkUhGag8u1JPvMILR5nHsk3xYLbRDGHsm5EGmQjwShsOte9d5Ian7vFAHb7iRA3L9bojUv6q6/5YdAl2x30MaAzXOHTpmbBCFeHWOZH375AiStUAkxKF0irEYQgbWxCbStb0QwtgX2PcADi8kpLOg8iga0Vo0VtPJEcsHLBEAMIRpiABUT/12T7G/LV+4088zYRcQvt4/BDZm4wI0YAZ+oAUswJVnbk76eE3zNT5GQXjFkwEw8iAXL4Bs9nb0I6wDbqd+6iMLAvZaADnpl+4BX/hmDXgw3gZReQkG0VoKxXgpa8RzIAEjyJsqiyQ8JENhHBFeSMf46d9+TMpgmKf1t8694GU4GVqfP8GKk1/eiGeS2jvZDnTYYI8udBOmtfex1UAo+yifRvE2cNuBAena9gVxOliTF5GQCJnwAk8QyfU734kUmRBHZZWQSgWNaBhpDKQBGBAXaACeIxN2IxzWe3HLvZoAJQgJhHbibrEuSyPMI0CDMJRpIZDEwrF4FogltdBZLnmsH1IBEavOM7F0QAmcAANI64F4LeHP7qH6Ic9THgeJAKIYX5vPkfSt+UVUY+oYHmgB3txYY/M0PyRuH9UnSb37UhfxeDTjL7w1R2MFaj8kQVT9CLEAG5D9tKsvAEZMRo9ntC6IwqMZG2AjkjVz6FAdRCDKyUMopEUgglTyrCNymp/nxqMfz9Szxoyk/pGWtD/ifeAIkRhfqXEglFCON7KlsMeBP1iFRal9kTIwTGAVbhNkCscE5iNQXggfcjjyrn8TstAuAikktFMxt3UnEoLVsGseCJFcR74Ixys5nrQhRCju14YQiYQKLBriFPeKv5GGIJOTHOKaNaV0oSFQAA3LBhhCPqCxHwAOYN/9T+9qAB+oAtdTP2WAcD3R/cfiL/A/LL/duwGy0Ip1ZkTohkEBXuT1272ccRbKCqGQrTDNPIRUdEZfvJlfoNWuH0IiKI/BEAnNHOqoB8gMFhKJAnhF3gvYrZFTO3tb3sN4EYOH2VBUtKCe8fFC8pFXX9aMp7R+wjiHKeZsfMho3UUjSNJXM7yPE0R981KiGhEN42yPZB8Ed4Vq8FnUFFYRyzUiRRokUkcqn5OQXzQG87gQX/DE9fU/ocgjKaACcqgUgbgtEls9i1jSiLNuj7g2EAOzV3J64lSFV0IeLpkVoRiLJs9eiaVhcZwOsUKsHMVSPktnUVktYLAYFgEIACjvwAMBXWFeP56KAH+/wp9O46TyFqxP/RBJW8D3anuxl/mx/sjfvsW8zBHwAFNf9x+vg8Sd8DEivKy2lOdltKE+I1QbCIEsdEnsVQCflyAdjUs9p3fj0BYDZL7qOACxRsJ0YHePADyi00FERBDeRXuMg3vtIrVxI5PxqAsHyOReSMlgIqg+YAV5HEaJaNzDjL2S1yoMs72S90pOjfeQAEal3RdJwXOOAX6l7pVz6IB88mDZcwL3HA4iRSr8uUK7QrkIEEkQKE+EEJ7LUx4bSyubV1M+VxmZTAyh3nTE18NctP2QsA5pKEnK8iATa0OpFpDyWWQEQh4eZz1PIZZFRiIgZ5URBDDzTJVFFpbQYisDuKx6RHzOU+1P+8pr+07Y1/Lrcx8/nhAIjRepX3SwYb5AzXAYU4cPfq4jEtAiAKLxJgFeHUaKrpEGcLXnZ0yIpb5y+iqklAq91BVmI4JwTzjKCDBsiON5hLaGvAwSec6ziSi0I+rQt3DPvXCeAXUtfIMNRhde7Mlcy0MoRIIp8uYjiIQIcAeDGXkpopQHm4tVxIpsrj2Xrw58KxvOCRLFg4tIbgrTVFSY6Ax5NMQV5qWUrzHXFyMfRD3lDaIYlORWnaR4r2QD2dtspIlQXLUQj7IsIrALCxCK4ttEs8DAkzcQuvEiQOi5Z4gGDEjjvn2RfBYYKds/bVvtPV70Q9rCw+S1/owRqI1bO9o1P9baCVch2P7yquZML4VxEZKe7AnLMz+hMAADNa+lD16KfgEYuRCCbvqpq8waC2OkSwRDeORQ114OSdJ7BwjKqoPM5oKU9nnKaoO3QsY+B+PhhIv2YPZmIhXEcqBhP4ZE9kueSxleL40dJDhkcOBgPwTPcAi7EQQOYdwz93khgjxFXfLjgzTsE7iH+Xjg+l0QiddRodAOeVQ2iDqSyldGYxHn7Y9oQ6rBvJSyBqpdg/ftkq8eHD+aMCsjbBNnc9UUV5jgnpKySkCGDEjAE/EirHVg4hUKOXgb1y0mkAGMRWVpiT0IsAAqgLi3sC/6RVTE25+xAMadSC9Dxv0Zu3ZIAGPNWWkhjzw/czOnwjj9btiHUPJ2f0hPiCQMNF7X1eE9gJh+EMoeRb/6p8P2X36Fv37IiDy8GF0aE+8hZOyQgfETxlk/81MGgdNV3lRb9lb2YfbIyAIfDqJsAeyNGNo+IYKRQkG4EcU4zSNCOyfGyBP+hGh5J4RCFt4FpiMNjMO2a8/cS+XFC7jnhWBcWlj3SCSVIglxDfyOuA3AdQ3zOBryf654hyMRybV8DJVGTgN3coJEjiF9vmEPZHNIIWJh1pDyhQbIg2CdFvFKiCBMsfhAABiAD1SdWAEOiw4swMiSA5trgLPYQovCFPUBRZtSi/wyv/rz0x9ysfy7p9L2U8Q0RqHm/ZeBAChgBuT2EvRgL2AjrYz5AePu8+4/YVfhoOv9GZf58w5++gR4nh+ZeBfhlj7M76l3bcjFsxkffdK1NpDHPeJYTyTTHt1bQ20yiBtuIxODp56yDCcjijBwwvsgCmLRg5f19km8H934CgLJ7JXskfrLV5iDPc6ggwZ4jDywLCXycxqwTwrtlINlAvtShHL9imgMCSKRQgijU3sawkW616CONEA0EJES5Mr1acvJCatADExbDhy4aAqyQeSFKJ3LtymlfARCLqFIYYjFAnrk2R+PQvIWgMYbsLwWCGCEOYUVQhHATbQLWE8BvB8wvegEb39bbskF0KzyU7/IDpwAKdRpz8IKAw6QMDyMgTHfPeD+jAGRllD3H8/BEwmdEICBohsi5HW/Xm1/xooYvCTiIw4iMADtY43TPMzHvJCU92MQjc+aWU/RgPVVjvFAJIYULngY80YeUYoQT8jvuXdbjK5wkH4QyZ9VOMx68xFk4gR6NROOCTwugWB+CYYPEY0nIjmZvJIUkYrArheyCqqkMQ1jct7EQDSMPMpJNbQeKfF//tOoTnTapxYOGZCKlfD3LvZC3LXJU4y42CbVQrCGrKOFsVCsMG/BAgPmHdAIgDh5Bc/dW+zCQT/PLJzyAKZNAHYtfREwn/oBqFDnKYvdz9jb5CO5fp4CJ4/oubEbH2sLLEIl5GFxfVfGADlipqvm9aIfPawH3R8DxVg5GQN+AEdQOieI9NSvMZo7MrjmuZCHIXRcbR2RA3FEFI7e9ceQFaLSn3UWXqvP8HXsXrhvryy88zLfS31/O+VwIU+ERLyXgysRjr2342/viRAJ7hDI3lyoR5BKmseJWLBPuo44eCGF/XgA43kmTuMiFSK5UFAjOsJQUqMRSLniwiWSlCCS58inoxjvHqm8JHMMzmpQEmUFDm7dglI4YPFGwE7BQGORXW+c/txP6AEYPJFUHUTsdAuh5FtE1tTi6vOt+WXp1+v4Aa7xIhhyLEH1Le/+a2NujObJ0or97Vfoyt/VAAmjY2PNk9DPve9X+wE+UjsA0J/3O/rgDejB2OgY+e8h4f4Yg/Zb5qtd14iBUAiKTMS6arv9UWvAyCAWY+c5shGeuIMFIR2SIBJDQge8jvdI8MNTiWo857kcODDUPJIDh4iEOIV3DDsSEfdSOId3eCWukQaJ8lbIBNM5kgQnrvAOkSqkYuTRoPsqP0UkxEGgDh7ck62nPZ7NN08+FxLaUQrLQmGsi40ja2ZBLQTlAjkBcOGcRZa+aIH72XAjirKsskUDHIvpkAKYtCWsAEgxvAXmMV7txyKvF1qilC9Pm4CTp0GSvNPOAQCVMU7vTxDFJy79uTedeZEt9kco3y2y+i/z02Y/fZgf3bL8SAS4Qjn5dIMcxkY36vI2z/3MkYFCZtfq8ECMgjUUzjEKyMVQpWfz1Zc84R+yOWjgGYWCiM0b88oMh9cidOIlfv/YCSI5hKAj+fAkVc5z/96ED1NFQY7BpRwE4hRl8VLyESmD7xpx4JcU3sWFHAqPRHBB+kgkxCku1JDOdIwEEcLzwjbX8mMjKbxDrDpSzwANmDfy6YYvHEyYa6YsCrQnQiJKZS2BrhM3134W+Ll4//6zoUYklhKppEAMTNoAbD8hhXaVRyQkK/RaELG6SAIsiH33itrTFk+U92RtEZj1ReI8jucbNiGz8fk5bGFZHeEyOP4wkt4YIf/yD1LZMz0XThqfn/EghXnpj2fOiNjbdJhgzp6ZK4D3c9+YngsN/ZQzJ23RL8+CqBHLPEUH5ohk1hbBENh+yJoL/RCJcRDWMSaIhOhShwz2SowLgiAPD8TzIJNrzx1MeI/kI1Z/uuNwi0eiv/4lId6Id+rrBjiHT5iHddcEcZDKtfwkMsF+HqkDtndFJJWQI+lgQYoMGsbiCEfkd0J3D/MiEqKpi0iOJAGBVQEWnkho53gXgQCPgm1eLTrgAWKgBZ4XLer+1EEgpOHVXN/BzzMAkj6krCjLDADAlXdCPv1qi1W1dwMKIAG+vA2QApGxa8tc3CNqIZhUPUbCz5iAC/H043DBvtH+UWgjzEEmJPJplVMrJHiOSObSaaHxVM5czYkXoOd+yurXbw3Hc4cMT/14LmSxXgjFgNGHPhGK8Ep0Z65S+kMiez3e0fqbu5CVcbVHcprrawnvFYV4CINI/mzCS32hG8II4+TZP/UPuyCPbzuJz9N8sCrEQx4pPLY3gn3iGrEK93Ik65kiUZEZ7CfX3yMhhkJCvK5V1pDrGsmVxchO6dofaVCqjPKIh9VZAe+QbAaBwoGDt9kOGiiPQsXTAMiCAQUgsvR5kNIX/YDVwtoHWVhE0laA2Z9yAGZh9WuRWVV19A1QwMYLIYAywg9gVkdYJBWyACmCKMfqA2weQj8s9lr9fuaMUMgEXHTicEGI4hsyoZx/x01o59SquRgXsrt/6heh+gE8vQJ8egT4VyPNy+hcG3REb+mcLsyfZ7MW7Z/oLKPjmkdCIvtkKeORd7I/4m3yQAjihT7vYs/tD/GEu8o4jKAr75EQh7587a2s8G49EjK5RpwisEgUwUrxIIlE8A3rHIloTP71j5/wGrk3qQfI435PLuTnkYh7A9IYMuXudIZImK0eQmkLmXgmk+WKHWHySiwQhQIV61R8bTGK25+zwvcfsAKueoCCKBZSyqvwTgRBlbPYQF44U0wv1b/2LLp4HhCMkwA976QP49MmK+xn7Oppm7dDNv3df/oTeqmLeIyJPQIQeTHJEttL8lBIZG9gP1mIxPqvJzEfxNLePQxWTnlzMba8xnM/Y1OHvEj3yplbqf71g+T0Ip/ukdhBEmMkrEOidONwwrE3EvUHn1Lzt//hbbzE7ySuf6gEqfz9kZBOOWRjrL3/RJwIpw4CIYfUvQgrT7QpwQeYDfewLAIjME8iUcS6/tQceUjMy6Mgi8oajWAxU16NI49GeSh1DaA2PVfHNdKZmD/5FeIJVXgjCvRhJGtvv9TRNyAXfrzIMlpoz/NGRL2A4IdYvIUFjkhArA5QWmieAcgssjFYeN6FFZdqU+iJ8ICPXFn4DR31qV2EAhQW+kVgRHQAY821r39hj7AXobxT6b2JI/GMzno58zJmHhWA7z/jM+c9gHjRr8MERCA7v/vvTlr9I6k5S3mgQl4vcXl0hohBoGNzRiYGFYl89uOgxX7HvtppnHCuPwFHBPseOLIXsp/0b4Pw3J4jk+/tKqse7LUHyvNEpt0XRSh5UjjPacQJ1zySA7a2N9d7JA+BHbsUQozY51oDOl6vhCyeaURKalTnBqZNZV2zBFyz05T2Sojk0EE446UsgDgCByQAZdmA7LnF7+jVIiOHFADyEOpaSNdIY0FZR4sKgIjqOSIBZu+wLKxwzX2Lrkwfz3qOIIV8T/2ASJ/60s9T4DYv+QinXz+k1K72AQ9h6caGHNiAzxxYc32brx/vpw3yVF/97qC//+iU0TEGxoURML4Xtbk/c4p0GZgiA0RHJHMQeTAW1tsBAyPqcMEeUUjLy/hL1zcfQaiIhBjCOad0/nDPPTJ5d8RTIZDDmjySCIjxFrohCSxKSeGcvD0DiDDwG+aXG2G90+qLB4iENApezDriAc8SMTzLu2ishqujM6K8vAYUs90bMOvib+cpSWjnRMZJFUskLgZmygUiQGFxAfGpON4iBUSWFkCQqh9ARCBgAAogAwrerjBDfl4AYJ0WAbCyiG3BLbZr3pLF74dgxoywAQ2BjMXYgBvYEfi5gxJz85w3arNuTDygcSA0o6IM0j9nVIwBYJ/6PVfnRT/jMCdzEA7m2V/0W6Pmp19rw5Nrj1EwNymdEjq1NxLO+izIqZy/dHXk772Re6EdcjDACOOgwUECgjg4EPLZL7nuy2/PhH9IZksBiwgDxxEprwSj0t3CIBOJG0VpUphfIpHHj1ZVuJg1acQgNUi2A5L3UUdH2otIxKCdglCCjWFHmN5G+0dNfKbiGLyQpVAKkQDIgi4YAmu/nls0z4ATgYCrHzLxLrwKy8hCIhDisIZie5YRkZUTQiG3cVloexfWFOF4GD8hpHEiJsLrkyXvB1gAqNxThx1+CIbcpF9tZSRe7WfOL/rRx3NEfpmf9hHqZX8ZPmti3rw/vVhPpKRv3tVa0CkdC11FKA4NkMRpJQI5qYMV/yhkrwOQBGEQB0l4HteiHikpD5E6sYNTRh0ekYdHkodQ8vJGxHUOI24skdzbziCRLc31h31bYQkVkTRQWmPKeB6hqhubMRvDDdSgxagmxyXbPDuREQuzQvZJ7ZEolyXmkRCK8rN0gGXvAZzrpSwysLLIFo8XAHjCGgKltrSNLCwhIiGB0yJ7Ef0jj3uhpv2Iv5cijqJ5TV5M29rQlhBF34gJDI70jd0P+Aq7/J4jEi8jlMqK+xnzetd+z4VldyIVWr3ev6fG9DI/c7cG1pLOGUuhKoMlKuglLB3Tuz2Ro2xfMTjl9bpEeIdk9kWIJKTr5A1REMo9z4JQiMOIR6zu278jjrpEPQRbb8QxSMM0vIdzuMePRxK5XiKpiIkqlaeC1H2M1aE85TRcns4NtNgyImG8yYpXeSXH376h8pmHo17vC3xCzzvwEp1KsfQIBfS8ixRZAC/wsLTls3YWCtAtlAUTivEywgli0ZwQIYw+leMJLaKj+P7YsI0+j+kNO3IZC3ICv7a1o02eS5jKKCjXezHj9HvOYwAm0gBa4eDLhFD3n3b0pT5D81yI9//yZ4yii/ZJQlaGqXBaVNLByn7JzfA6rbSn9t7IeyGndcgEV4w0bDHS7pEFmQrZECiPA48wTGBUHkGsMAvnMK2Me9eRiQMheSJppLpeyNaAQrGQxFKpzgxM2r2UGKDUgElu1ODUMUkWxIbRyYrvx2woKcsnID489AEikCMRK2VTj0z2S8ghNOvwIeL0Y/mFRp0A8S4WCKAtGKIUxnmmHyRCFqSzT0NmCylFcKdGjl8tsPGJ4RFGmIcYCIp4/YMcLKYvNrwf42GNXwhor/WcJ/FDnPVWyNDvZcIxY+HNhKa842sh4ofXj1fyro7Bc8poTRg5+yZr4cib3h1l+wKGwfWyFYl4IsfaXk4L6/I+iMNA8zow5z7yEJ6Kh/JsyQHnMLw4lpfALqkO4TwK7SJTkdt12BALK1jhCLXsNfga1klexzMTYClMuIGbmDiV+DfuuGpuu3/Yz59TUCDAAqDwCFhZLgRCpEI85EEmgGF5/QBJWGejjijeszhOj0idCiGPdgEc6IRm+tKnL6yRRSq08CEkYnjBZz8nFNWm9h0wAIS2fL6vrI8nHaAQ3otR0H4ngxvivS1+iCrk5JUcwrzRfhkEBGIQGUN6sRbEd5YMGBLRNRI5zvZeyOEU7DDGsOXAyidT7hNGGi4z6LCHaASJpPDpuVBOCvPSiIJQUvnyIhFSSctTZrc+V1h35DpsqJIUcSpUiBdjdcbD5A4jEbK00St2bZBZBflennmxxmU7kUGgvADA5+LtN4R1NqgsOq+CUJSPUDbjngEoUiGaeDtP48WmBeKJkEh7PJF8m1ykYxGFX06NhGQ8I0/EoyADK2jRvJNwQGKcHTqwqiyp7948U09oh1T2U8gMMAhnfG+rPYsfDyY81Md6szfSzzpZO/tHxpE3p0OeyDpb87w7A8YTvfmI0ztbAAcM/q1unsgRuD8OJb5gUM46Md4wCcMEsfJK8mEUHvNi8AzbCcLkOAjCSCOR55XjaCIR4Z0eiRQpXCMSEmmMxMqIZHDKRi7XbeaQzH1EQyrPEMnxJSuTpWfRhUw2mr6tAkBEYKEQQ6iGRLwToXSCXMjDswBshLFn6V2LPQyS8CTaRiKhome8inbtjywi4lgwoaYvCJwmIryxIj8v6gNJZXz7hXTIL373KQ/yMQpCPIQVphgHsvIWb0Qv8eH5Q3RrRv/Wje5dE3tORs93dvRHp16wIgpj68TOlkA0I4UjpEEq9/71VERz5A2b8AursAef8uARgeSHTylci8II0hSNEWWUjwPEvXKdD+xe6SKShzGuhhRW0WAMygC5xfY/8leQy+BcR0z3JoBMJm/SAEoAkOKQSTgFfMIshwA8CGIgkzhaikgWoXAvoiGMMK7vs6TuEYh0EqRdBEIu3kQ9oJenv8IzYZlxsYqFd06RbIB5HyGgt+82wKwhgiGVsbOojIDTP97VON/WYd0b+ceACDd5Hutnzei9PbD1tLftgMjnYohDr17c03uhHCIJ7RwsSL18FQUl8uAsAx4JYBYOV2ASTsN8ZZEjcd9zeF4vJU+qXNHbddggMwIpRCKSgRGNSTHcIAw26V75SEQQrkn6pMMb6d4RsP5CIX/AxpqzSDwH4BPXQimexCmPhWDBhAS8ij2I43JkEW4hgzZce8bqqW/f0yc2vB0SsYLK8Rp5Q2EazyLE4JUQ3aaXVWQlEQl5kMV4neaJ5XlW7Rsjj8rL2a+wwk6pPqr+eGJhrfDWuiGPyCEjZl2tkfdkUushLLYGDBjdCu14G+SBI0a8CMfeqGNvXkpepIG9BT0sSz0Pz+HVs4x/xCjtWpk4UptEH9Kr3BJJaiBCNA3rQKd1JO1aI6SBRSJEy51KTZD18KYaMLltIRPr76DBcbP9BavOG1AmDwLgiMCDIBHSWAiL0KafuM4DIUShFWIRINeWdpFKGV7DwpGOXD0zFuNAJNbQ3sdLQlYSoXhS4xbeGbNnro1XW/pDdAD6qP7zzs9ppIMg+1l7JISxZtaI0bMOCCay4K1EDdaJThkuayCKQRSYJDAFo/AVxnqHFO4iEkyGawKfsNozHsdzZFnykOsk7kGqr0y4V5eUf3kkjCM6MggDirHE9V3kYyNiNXgNY736LIgJsho2hU5fhET+f7PctbR/alYoxTPxGlLgRioEEKpRvHAJsQrjpL2PYOXk8Qi8mRDB0TXPYd9EeCMkUk/b9aOe0zshGyIhlBd/PI57i4pIXg4K4xxCCAPtk7SvjPBUm0I5lni/qPio/HNa17sxOrFPEtIVSQjFrS3vZA0RyX7Vezy6drLLKyESTGXIw1t4RQ55CJahJxEJTuEbPpUJu5FoCUTKl6qjTfXdlyKTNhAJ6R4/EfIgz9I9aeCeuTbwUs81pLx6OlWO5fC+yMszHxaKd4VzLDwL496nH/YcLHwnX4BJkbyCQwCKFiq136H0vBRC8FCuLQRCeBmqvAURIrB6nvMYgI6oSNW+Sj/KKlMfyCvkRDpEQ7g+4zdmHhWptM8bGqNwEIlZVpZXKOOY/v//PvRFrBfYTlo76LEf4o2slTUSQUjpsFcQDJiwmb4ZY5jKWMPdkiUitR9vrxQhVtRXTxtIgTiIoCwsV0e+VPvKln/thx7uiTbkX0TSKaZivUoqRwyDd5AQeQxCedJE1G2CJmRPxAuxJP3NSKd1TmMcf/NQAIlIUt6JEgGX9wFqyrWPcTSOKHkWJCB9QYxQwioLwbPwcPYyviznbaT2QMhk0QrrENNz/WkPeb3L4I14HN5GHR6KZfRS0N9SeQ+G/Hk79XlGm2Yksrm2T3pbHnu/UX8+3dpPuLws9v6IkbFO1nHFetC7NWLorAeDKGzmkXzN4EROhAOHMAdr8AiDm8Kna6STLiHyNgRhHkOyI32hEJmUKf8iyRMSgSLW4z/HZYAGo6EIhBiks3ekUQ5Z7H3kIxELIKRT37WNoPN+hHJE6ctdhwwI5UWbEzFfN3QiZmPP+jheRgAApkxkQpyIAvyA24me90DeK7nmlZRHBKEXEd4hEI/BAmrL6RqvA/yEV0FU7SOhOvY/wjlfKtj42t8hkXdK/hUkx+HIZbHV60NVJ1A8kRexjr7fqO913pY/hwfCuD6L8orCGgnDeX9C/0Jwhq9r4bF1d2/t7Z/pHmbgCZa8p8yAwyccMv6RS2RE3MNqBIo4EQnw80ZLDvfI1H1H249H3CO18woiaVRHDW49EjFYRCkvwrASnhGkYjEqyxvZI/FMPnunEJ7HPsmXvP7WxOEDYjkVEz4RZBIjA7XQyuc7lJ8n4aWEZhYGAaRO6ZANkXg0ZBQaCBMRiaUTElog7QjlEAvBWEB5yvBEyOEFrbEiu7FaUMaAd2UYWEkeidfisYQrgMMjAVHfuz33oepH1p/9ISPihWufcbUv4vGtnbDNuiAP0lgDxo9Yd96JTkUVPBLjhUTwRTqdg0FGHOZgEoYLt2BZCuBAL41M8hEswiBJZEBCbXkWJypXO9WtDrmeLZFIXocniuGuldGIlHdCuA4WEvmlrIeJUwJl2Bex7PYaXswK7+w5eCVEsrksxLNfAmZ7JsRwkmPPgig8kmthAW+QV2HdEE555FHfgiGHRbI4yiMmEgnFtIuwRB0kspiIyCPZ1yGS8LN/dFBIyhsZmz0WQCC29nhGZGKFHfsK7z4q/BiRvvD21YiTS17aiRxdO1ywPgyP/SdPn4Hjieg8w4dY9p+I5GCH3hlleII3xjnPBINFTTALv/AKozwGkvjyANiBH7Y5CxIBiLKwjUTxQHniOsIo4z6yde/Z41/IFsrFykhUgyrFSs9NgkUwOVahe0SSdmJn0t4fOakTHiGTa1ZduNehA/LwSIgFuO4pnlJ7d4MQvJRTOSGajT5i2OsUNign3rYgrCBiIQixaOpqTxrRiH6Eg0LM3qgbX/9DX4cmPlPxPsw+iTc1PmTkFRGa5eWRvEMS4jgGZ5n7LvAj288LV3MzT0YDiXxp4j2daIH+RQLWB2mQw3p53SCEpncGTxgHA05we/ENAw4ahNLeJdE5o9xhQuEdCdwZezhFoP6dxcfPeI4gDW+mXGSKSEsOqfzajkiuI69nRLmLSFVY4kQkYoB1WoPyNGpQhBfidqWIlFfyZS7iOK1DKKC0x2DZeSkKojgEYOnd91UBy8VDEVaLwokFAXweAWFYN14FqIVpvIRFYhFZQqSMMMp25I5QFlJdJBVWsoJ5SURyOIJMxmocFlqYqpy/8uXpWGAeUkhjc+2QQWrTjUgflj+qeyP/eCFGw37QPsi3dIyJAyKeSMrA0G9fjlgjIR0yFc55Zu29EhEFwAd9w4toxh7J9gCh2o8z/gtm97C6JOpft3JPwm0kSSLZhnlhnUQwUn/6hn/XV3sRyY0KOvIwAhXqyYtkNey5cqwCVxuReCWTde//4+nPgN90hIJ87sFV+1ZKPkI5bABi3ooFQiZ7J18C8xA2/zwRInSQwJtYCF5Bvo2qReKpeCTX5QG/xXOPVMIIRCycsNC8lYW2mE7ofK5v4YyJ15SaA3LxpvK0y+OJ6+2/nEw55mWZfRqERPsHex/ZfrwvAgllvUPjiewXheCENxI18D6MUF5caM6gyWfIpPbOXoQLpR1AwQCD5tMynqgTYNsF0Q8QXwA+ApsRCyaRBokK7UgHBp7Dr3rlEfcRZ8v3rOdhv7Rnj0Sq8cjhnrhuoF03YIJEuVkkIkiUC0YmXzaw6t4t9W+MEQcRFMeFs0DuhVAI5p7iHYmzakAP7DzSLgASyZeybhbKIvEU8vJgLCAPxBu5RoDacW//hKw2uPZvwlCf7ws3jc8cjAnxiU9YGABeSb+Iapz2SQDGWjvB8w7FUbD7j+ghXh/fdrTNE/lezvsh4ZvDIAc5wjf6pVN6YfBEHfbBQmZhHmPHIFoPe2MeieHk7e2hrT2D1mmdlDjgEvHAYwY/ydgDf55ovRIiRIhIkoiqtOk6AkoJwlSuNshbEEmGQcRWg3Id81yzADtgz1wjEGIZBBKxGIiEKG0SSd9FIZdwj+ex31DG3gOB1OGpvMgFZCEhLyGEsxjFz7yIa94GYZCBALV8wEYO+6C+5iaufS/HwyFmhwvCSh6FZ1Gf50EiKc+E4EjEmyI+oiGSvZQ2gcZ+AJiEM8Al3PMXtf0cjXtZ69MZId9HtC/CGQFj3nHzRA56hNPWiEGjA7p3qOA9H53y/vQkurBGQnY656UQSPSBNDAhnBMJdEraN3ZwBV/wI2W8950RDBKgBn7kWUGMyBBBlhw5jkgmTSqn7Tiy17hwfWsncxvb2C+SRS7P7qSS7sRMFvikEcs1pbiWRzkU5l/D9LVv/z6zetw6xQKtkMp+BIG4fCGVReJlkIeXQQ6LhXSsHALZsyCH50TooA0LqiwSCfM6mEAuxPTcPs5YEJ93NL72asbGQxkTYCCkk0ShTd+Seb9lv+RFpJ9jYd7JPW9lD/VGJ5KTOF8lGGv/HoZQ1WkcQ8DT+jLfAQ8dMnTtOXlxnr11oSMGSj6yuUYka0CP1toeiEFFpAyqsA5OYGcPtCJPkRAjHpku73AEntcTwSgsR6DI5Jn8yOI+ksjvnkSa7pWJTNc/WSxTASLTgJClgvINRJ7Be45AiXuu0aTsjxAFCDvBowR5rqURTIiEHMjCa3XS55iZN7LxFBICrHKI5fjcIgG1/RBPw6sIC4QNwjpxOXAjEpLwGCxm5Tzjydwjky/RtSPU8+7I4vKU/VWvPZGxOgSx6LyRMqwpkAhpEMlJFY+EUN6fAKDTLCdZ/pwgIr2RX9QK25AHURCnfyrMsT7jQHgiBwv2QEI3pKBHurfXZex4Gbp0aGT9kKpDJXtSITjP7jChPTQPZE8NA/QvhZ2IhEAwRZAHFol8Bhp28xzykSAJ8MgTzuUvqUiEilQk4pC9rx1y/UurkSHi5G0iEVEGkQw4opFIJL9DBpaDhZAvpQTP5EvlR7A8WF5KHEypTsuEVawS8PaJETCzbBaOZwLkwj6eSGpflDUUl7u3yFKkEXpYSF4IeZSVL1Sz+NqwwMiMTES46RlCs7r6NgZ96NdJob2BU0KbbmRyooVMPhlCJF7pjfySlgfqA1OehwEQphKGAXl4XN/I8fgMWXoVCdjPIgsS+YyKsWHc6Fg4Zy14LUTyzF5IuGzf3L+70DYADhjWiAQ3hXntZyJS3ii8wqXnwA7k8gM+smy4R9pHRSrlale9iBUXaivRx3shUqTQIcJUOMFCeRrndSpPTABBNpbdfZPBIBdlqC8/UY5S1FePFWpTyUsJqVgr4Z/jc4vBGyGUhUMoFlCIYDGJxbKYyADsLKJDAQuLdO2X1BEeKuuoG0l4O5tcngaJ1LXY+vclBtAgnH4dZPBuLKx+kQuQ+qjW1xZIhEwsOnAKl+w13miHDo7nnTIiu5QX9ZfIDhF4WX/G4l2ZwwN7IHsiXykgBB0KqRGjAxgeiI4YK/pl6BhAa0d/6llDIbT1FcYxVkgEB/CSgc0Ay3ctZYRhKTLBUoYfXiOP/DuWI0/eB4EQqTwpvMO29tVfImmXrLMxhg9EJB0WplVxXVj3KuqgsiRCaCxPZKKRzD1BMopQxzPlI10erQOH9km8AK/U5t5G1QK5dtKDTMhi/0NYP4uKTAhmEdWxuK6FfCwiAggNEQpZHHnXX2GJWF2IaSzGZByOvpENaLSXV9KW/oSRQMZiO2zwc/wtHOKVsuwOHpCs06//1z9eCHmMlVdypO0dHIPgwEDKAwlbHV37rEpoTJd0YF/ZaSajRIeMoHx6UYbePOP1GUl7YuvdXoieGeOiFyliSeFDHoxEKCCHHWmEgk94hWFkCn/ADr9wjCh5pCRyIRRRLk5suKddefrzPOyTt/BIkYbUgbxIZYAxnqgXwUzYxE04xva8jl0rp3OKQj5KoMT+bwPCOsfN4mX3QG0BkEIYZnFYtEI83sZzeyhEEkqwlBbQtQXkQYRfSMbrRCSkEDo6mhejS4WRyMVaIpExIBGLChCIDAy8lndj8lnhTgAdgSOOPYYQj2WXB5zCI/n2IE+R6fU+hND+i9o0DmGc/Zvx+FbOWJ3G+ciX2GP2pYjDAp6d3umvCIEOrQOPg0TWArF4dN6eoWP8GC6ncwgk8igKgQUeCHZgCGF4JUYZGeCliAeRAjH8hCcAD8MIkKGPCHmcO4kiXkRSLux6llOJSGE6uXCNSJEj1kaayKSBBkhqUN6SymSyHE1KuS3j2kC034AoIpetLvAW4rnmkexNLARvYlEQBniRBaCdpCGcEMwCy0c4hEIyHkRdi87jCDWQQjnE8P7CEXfvuZDY4iYWHNGAwotdVlfIp0+gkY/Y+uOR7JO8oBUa+Vrd92a+yUMqHspeyUYeyIH3bfldHo+zv4iFOB2GOCzxMtmhgvE7tnZAYz/ZPlCIxpgxRH2FwOiYt7Cbjq0RvdIzIjmooVt59IRwSETH9kf2RozonTiu5SMXssAWnGR4A7r7nrsPxxEprMHtnUQRKVy7JurCKgyrH3a1V789I8ZzeSTE0JkGajz2JjoywCQiqRtRYidFSOU1kCVT5DL5lIJAKdI162PTSeEsmLCLt2DhWD7gRwIWrvAPUZDHYvbegjdCLovseFuYZ/EJMghPkApRkVMfWUqLSLKaxtSfhIjpjc2xbR5Keyy1L5y9nGXBhUHCISeFPpuxWfd+ycmYvZNQqs09Qsn3rkn+y/zsb16tbG32U97ezeGHvqVIb1/nSJsXcmji6wTzsNfhhXh3OqJDoTA9C6fp1p6TN6JLRGNQel2gnusOcJCH3oR3dEq3SGPt8y6w4LABwSLKZfmPhD0prCmjnmfyIw4Ml4bjp4hU+chUPe3pV4o4xBikF3mOeCbvvREJMSJS/5t/DcbsROPlRaDSJZOJa9xE68xEKSrLYSCUIF85+byZusplkXgDgO1kR1wNxMjDgwCwe3E2gmUNEUMYJ3QTfrCYLKoyBAl5kTyRja+2EMXCIrG+9atP4UZjQixjEn6yqkiM4EAlBHLwgLSO34n9BUDarPtzD97KHwAiFRAjlL2TY2Uibw8kHJf39z37QwjeRvqi/dZTx+0+NPWCmPhCgSeyh0MoY3Wk7/2QUBWRGKlO6BgpRsMelSBSBKN/xo1+CSK1b/IqgVenOzqk307opNaf4bL+eaKIBS/rIcKbe2RUR5kMcziNPBEkAq3jUBaOqyMtL/Lqp/67j9DXeBApNmpEjIhMGlGg/EhUZ+4NpolFqEizFkIZ94jD2zRZA1HHPcUBK+nYkxRasV4WiTewGF7eWZC+xXLNcznd4yEsLCsorBMKdujAYiISgCCZ0IMXItqyoEIP42HpLLjjeNfyzCGSSRENkRFK//oUCiGQ42HEckolHOSdhE32IPZK/hjRXgqYpf2bfe7v4RgyJH48kTJb7rm9kPyIiHQOFTqh4wmRKDEmJ3KIxJPaH9GVU1BkQiRenPeRigDoms4ZLHpGNHrgsRgY4a8vVRCJrhgmehU+d8hAn/TrmsGy9pGLzpGKuA68cAPo8lwHdthaL0MikOtIFckikzz14JLEAeI+AklzFJ5djqQ9koZqVAcRRePJNuyZeixBZLoafLjWUdd1KM9E5VefyNcGhSAEsrkOrJQO5MICJJLPCpEIKJVf2CAUtIjI4oBCKpzr62JWUhnhhr0Oy+lwQX8WWNsIre+IY9H1U18RGJk8Q0okdXwuNPLtHgFKYZ59ktRGnldCJqdiPAEPhUSkrwfuP17HVxJSghTuX+3nTzqEcsram/lKwd5IWCfss0fyNYaTRl7St3C8kpM5p5CO9JFG2IpMSOXa3Nzbnwqj5fHEDIiDHa8DGC6HR3Rj/UQSSMVw0Tcd0jNBIHqlX/qPSATB5MEFIEsRq+eRKgMd/ha/kahDhcV75Arj2gmfYVhe8goSkUK72Fkn27jUIOqkRjRoQoT7reHK3Qdhcp7l2TxXj0IaXJ6LRCJKLxVOUSgAU26ea60YjwLcvJjQTYjHWgrdCt8ssHDO/snCIqA2LaR2LabF5Wn0rU+L7rOmLKh8oi8eEhn78sGBBwIDoJMu1l1YhzjeyzhwQB7vZeyfHDHbOwEzYAP7/cezFPLxMEjw1I+n6f+rpLzQTSiHfLyRtuUhkhNE5HXYQByGIAHhRe33fL0gXM2zI41wTqhsruYs3zeQ5torAPdvPtKJJ0PWp2B0mx7p2trJE2aXR9o7w4ioINLAh3xlGHO4ke8aziIV3MIwvHUdtsO5PNiXKgOzi3XtEMbePQnnyUWkGl4ikWWrDlSuQYPWkZSXKY7dTgy+weS1crlSebli4rn7wigppQsNWDJeSb4FAGrPiUWg8BbDc4RSF0GcHllwp0u8FEJaXP+uhHAs4aF4PES0mK6RjdfSnzal9W08whTj4+nsDYSf9gOstLBSCAR0NtwsO7AK7RDHpt67GSmCOR4HZESzbwJ6hOFFSGRADqRydL0/HgpJ/KWqE8HS9kIOM4SG1XUAIc8zZYV7yC0sRSAexamd8M41EbYRc2OE6BZJ7El5YnsmrwGUYax4IhGA1J5UHmNEv62V1L31YpR2XZElMilTtMKweY44ynouH6HgKpxFDhJpyodxKYlIEUN9ZAzbxD2MhtXKXoJIGkkilEbreAeVl9Fw5KixOqmMNBK5LlVW2kAr6zllUE7WhpIjhZTSKJG4jnCUKs0jCc94L6AHdtZQOIcYnRghEqLxJhZQ6CGGZ0X159qRreNynqc+jMm1OkQ5ns+RsBRpeSf17B9s1h0fC/EcgTu9s19yvGw/4nSsf5dC6KeMl6Je3ArJgF1qX4RIvAiPI0UwxEIinkgdoSECObiQOryoPZ5IeaEjIjkC90wfyIvYQjp7O57IAQOv6tROSGfvw9PwSjyRsM1ckYohMV8GC7GQjMFivAq31aEv60LHJFLRLaJEHN4HFmAiQylfGhY8r5z8DDw8wSysMeiweycTnBcdlRdGCYzXv3YjkDJwHe4vPOeRtqO9RyKVpUQHKmoI+5GhZwbUIIiOe5ZoS77BIJGBNkADR4yURShLXiJPypK5jlRZKM94CouT9xC6tcgWsj+J4HH6cw0eyQthC8Ri2vMgmGcsKqDUB9G/vRXS6k99m2l5Did4PV5KWCncyeuw+N4r+S5PaCR8YvHtS3x5YW8iBHTwINTjLRCBt/BDAPubiIIYyrjv/9KBYO4RR/imXO3IV8YLWOXtz/KC9kfI3h9ASpGHV0UgHof3cc3zIojDHURyzePwxlIemfFSxykqfdBNkQXD5JohonPrRL/WzRoumVzTt3t4IeGhMlLSoQQswSDMhWX3UgLDYTIyuc7rEPgkiBR51jFUzvX7IFINS/NKiUI1UGVla2AHpIz7BoUgXZP6qX6KMDBlTd69fGB1nSWKLD2nWNbMAkSanlfXvXykcPwN2L2MBXpEseFFpk6SLKpQjfXUPs+GcBad1dRmfSNeZASkDi+IPAcP+gVIm3l/hi2sA1jEsu9g7RGKZ3JMbr+EaN7pIBOwI0RkikSIwYPYayGDkBFJ5XmmP3n2W8jGo/E+CFQZzzuKtzezrxHSeQdkj9d7I/PggRCKUTFP5DFHwvMwOF4DuFaGrnkhBEI2kYB6yMRQ0b08pLI+ogPraB2sQRgg7q2Da3ggyGSNGVpiTQjjDkfwFBYjT9dhk6x3CeulESlvtGRa/F9180gax9y7aGA7cq8Ros6SJiugbM8ij3zt5e08M0gWYIlk0CxM7pq4BmCKdE1xlE4oL6XL37oR0UIIuYQZCGTRLaZFZBEjEEE8eVLEkXqunv6MgyCScpFYW8KcQANU9hEsOnIALBIhjPDJfsmeA4mIdzZOuxxKeCa8cxxt7wL8yJNHcd+ehnfRNq/iw1JkJT5NErIhS0TkndTVrgOGiK0v3pJHFNJ5ueqlKs/CA5mHa0RygNKnXObMwNAl/SKQeryRfKRAJOExj410yMRjC++QCqEQiQ4JfdK7dc1oubc2rvWrXWseqSKYUB4G4AqWYGvxCLNhEeY8j3Qw7h7+1JeHlLAUkYg27mQi198jAbbMmKszaYCPLFeFB2lw5Wu4snUQmdwbhOs8nbZrLwLF+CYUibhq1+2fpJRH0RSXQt1bCHlIFJncWwxWzSLbK7m2gAgir9M5CxQx1VEXaSx490n3yirDCltM+y+ba57PxttnQg4SAL33SwglvLMfEdbJk9o7Ce14LUSw78mjSBFBfiQTxiENQhCeCDHkIZo6DhYik3Z4KWXsx+zPEMgnQY6zhcD2OAwBzwr4SNKBDe/qnp5XhHq8vfqIQx8EyTrMYWjsPxkyBgeZkNFaIJ7ydwJpG4lqz7V1km/Nd70aC3zcCRBxug9j4Q558mZEnnuSwSfyPZcXmcj190hAveQhAT7xDPAjSBLJDK429jlRxyCUrW3p/XkENMAGjERNmLinQATxPKVROuXLj3Dy3UeKTuGQx2K7toiOw4EDASyShVSvRUQ49S2kVHvGEInqW3lEAgqWGSC9sOR5+of+e7eEOIAvjEMe750QyzWPJVwDeqEcsiADj4JEfUnuKwRkco0YCMszIaL+EEd4iFRCN6I+L9Z3gIjthat9nJCuj3h5C8AHegbBXs/eyD0C0JO5mjNPIhxGPqFygJYvZPNMmxHSfpOh0Y49prbu3khK5FmD2lM270T/UuuFTMrLA37rDx8wk4fqHrZIzyKJ+3uqjjKVq558OA2v10erwB/I77LkQhRgB37lyRInkuVVet7A7/Uq71qdvFz1pSbQxGoHyLMWxPO8UUSjSNd5M4B3Qoc0xe1Cs6ycRbIILQ4SSnkiYNCme30n2iTy9U2Qzt4AWGy8Eco+yAmdEzCnd6QXl4BM+sNAnsEJHjJ0eGA/Q3gSROCVkMILXSEaQiAf4cmQyvF6+e59Q4dkSKiMk0PEtlczFgceTuYcDgA5HSGGvVF/5yXMozdkQQChGkOUDgEZoPMo9Ms40QGi8lg8HCPmwAdR1eeVhIvaoUPtWI9dm1Lrsff6Uo5YuwhkXYyFUXUvzQBHCrhJ5OW5lIGbCBTuEnXD40UikkdawhCADuRP5UWIvItrJNO4QUur55m0Y3WCNAawbZTfQClgJ+xaHyapfSTaCeuXEiyi/BRElF0vwppm9Shcvjrqb74F4rks2Fo+oo4816WIBCSIBHxeVAKivYVjcKGePZHPhkh/ooBowjxHzsDNUxWiIRTPQoR0wjQncYhhf6Sca+QQrnnJq77UAQJSIpUvK3wCJI/H0pfDBcR2Smc/55ChT7GQpq9BeBQHJ/LNkf6QQOgWsNNphkW+PK8F7K94Z2G0gwpta5P37hVExCHuOwlFNM+0J1XHmiijrD6ti/UtCuG5rHNEItY3wwsT8qSwtKJ+9Sq7zyMReQWRECOJIK6XNFsG4Av3kuoRZJCqr1xE6QVYJ4M8ksGoH8nyRvJNwP0Vgz7kqdNz7T9O5Agl5o0oQrmeuaZEZYgFSJHKU1jKtmDCjhYIKCJVVtA9wCjTC9wWWvgDcIgEoP4Wyvd3gIpUkYmHcsjggIEnQiQkcmLnMyLepPDNyRpS8UCIROy7HBJEKEfnvAyPhizeS7mW31+26kcYKYS0J+MpeCIfmDqhy/P0EpXwTMDv3VCnbggCrIBuzrwPA+KaLujXNe/ci1pE4p3aI6nL83UI0VcPDhMIwooGtK0vzwjiIRKPVh26txZFCZEmD5XRtfauy7P+4QkG5JXvHo7cK1PZcKVOOL2+/t5wTZoUyhHXpHBsCbKiDWUAvHL7lYS0axL5iH7U1U79LUnda5cSTGTHuFaGsijQhJWPbBSMaCafgitPWfKQBBAIyyRPHaTxLK+lLQtnES0ycAGfsIelRSSnX15e8kQ8j+/SHHlHJnkADext+qW8CULxLg4PhGOI0nE3MhHE4lmQCXHUcYjBy/R1AuF5kAdpXQsjEYggtH+7wv4IkQAdkXgfX7ObBzLxTLys0zspMAMvr2D+0vZHSIRoXgnYHzncQVaHFY7S1UcengWRfLalfWV5IWnho3YiktS9vVYnh5VBSntgBs76WCdi/ayta2vmuTz3rb9r+KlshFriRJqMckRy/Ugk4CVAGYkiDxB6FshLIwWS9KcXEUk9Eok810+EUm4JhSzKSyNk7VeG1L4JNFbjManmIM/kUlRjNg+EMGl15VMWixMBLUBEonDlKV8ecEjzZhbRPYtr8e2HEIj1BgQg8vVzgBTiCZvyTA4gAJtXAHbgBn5EcvzNIwnF7IV4JcfY9kTEHsmPVxKy9f+IUgdhtClUdB2ptK/vXgBLEQmhEd47I+GnPZGTN+BHKPNBHt6IoZBnrgwHr4AUvLdrekAOXgsRkEM9bflMyrU87SGSOoiEFA4h7KEcdijvFJW3QVCeCWGEkkgj5bEQR9gnTxlEs3ZCbusUkTKgra37JVPRi+uIgUyukyWS5xd5jih3GfE8UgUDpLwFqbQ8YI0MkUQqr/pLii1DIpT0KVkSrUQo/SOUFClc62cJlydTBokau7HJ99yckMm8pYiEJIS3oXTKt5gdTsizeIikDKvcIgOPckDgUAPwWOH+tMBHn8hEhHFCPkDvxA4BhHnCM4Sy53Gy56DAIYPwzrsfIZ3TPN7K3zjxRvJ4NgcHvo/TrraQqBCOJxRO5o3sjRyEIJixuLeXYQCEeAjV1/PyeY6Osc3TUbY8xDFnRkW+EA9RpE78EMifsNAHYtpzCe96iV09p5z2U8imXURzBC+s5BmRh+fRbgZMv/Re2GftMoSRaVMkQypr7d66I1DkIPLIRZAjkSly7TN1r3wAL/wBqAXcXgdGKXACInADfgQB4ghUqsydSJEi4kSU2opMtVG5ynpmDMSYkCki1RZRn5iXceeJKq9+SkzRhKKRo8MEHsYCC2csEhJZMIsMVADCeiIV62xxgQAYPGPBWfL+sRYkAnRhFc/kONy9Y2heCrEQiZdBHHsmXqmXre69k3IyV1mkERoK7RACMWqbt+F1+kM8HhGxC+kQ2z3vyVsI8eQhDw/V3oY4ceN5gdunP1JGhJGhH+CmA56G3oBeKCY8jBB0Rne8F12pg3i8G6I57GhvhogIi3S8YOFg/dQvElkbIbh1I8iS5+F1pEQeaf9TmneKSBErQZjKIVR5ryBSpEmALXG/ZYARCJcoEaDrF4k+I5Y6+uAleh5hDFZ/riNSgjTGoYy67iNSZSJbJJIiVR4MycpLoZQiLSZHGAvYv1GQ5QMKVlR4gUQsqxADCCywPM+BAYkIi8sr8ABII6yyf+r0jjgSF9rxRoV4COXImnfyTRzv4yDCAYLDA2GbUI5X44EQiBdyj0j1KbziXYg8ZPNuSD4vhBiI71p5BDJuHtX+Tllhqi8d6ALweQ8C7HRGNzwEsgG/+SMj/SEVndCVrxuU41nUJbwNQTwey3i0jXyIIzKgW3UQDwn1yYB12BCJCueQaQnFULp3HWGst+d5KASJLPCQ13lKItNbEMk1yXKXF3lIwI9IATeCLFEiRtdkn3sG0HdCui9/CeJ5eZ4bw0rlEvfG65nUpIV0lERxzcccKZTSEIuyLaYFt1gIY+F5KIvd5tkzlhCJkA7AkIhHs9CAJOYHPgAFYnURgEfgKRAJGXgTx9P2PP2ZhdANaeTZD8lHKiTjjRCHh0NABxc8G/Joz7G6lEdCHF7GYQfPI2xDFKFbRLFHAXhhmEMBzwgC8U7lqes00r358hKFVNLAzuvwKATwkYE34m08p0/6lY889Epn9M7zMVa8Wt7NM2SSCieVF2brM0/UaaprRIpUkal0PU8Ek79eCUbcL5H2Pk9FXkEkZCFdB7BCviWSFJgDN4kgkSQJ1JXZZ6R29lnlESHZZ+4RaUlWua6lpHKkOSCWOe28U04eygJ0Wtdm1ULxUAABMMBjMQGCB2NxAcMiSxGJ5WZdARRoEam/87FXcY8IvRjlSdrfIAty9Q6Id3IAIfVMPURCHl6oY22nhUjD60iJME4I5ziad+RtkAGxjIu3QRLhHY/CGyCW0JSnau9iPkJEdXkZ8+YReKNS4RZdeM6oOAxADPfaQBSeiQ7pDjk8o1ekQli6cx/pEJNekUhdBFYfkaxLpHGNMMhBlijdI8uKPAIDESlv4zryRDz3Pb8wA7x3QJG9v3ukJAIE4ID+FJlWtmz193kEcB0h7s/qs2f3vNKuEcd413MRntX8pOaIRITSU3hWyEIBCsvNaiKRcALZNhT0DGhYXqAEWmAE0o7AOznLW3QI4Jk9TsTgURwiOICwLxLqOXxwjWw8kHL2VqT9kdCMxxM69s7KtbBPSIk0iEAQ3P7HGIWmXpo6LBGa8Tjmi3QIZE4RxDPeonkX9hIncZ7xIHQjVRch9aEtpOhAQZu1S/psK+Joj6dHHiRCRvWQ0JrkgRDJ9RJG6j5yRR6kWGmtn3oeBkj3CJThvYgUYe7C89zvI5H7wFmIJQ28AZ9ErOT+vDrllyq75dxHgPreuivK7L3yxt04l0g9y/tSjkWxACktJbN2rC3ZkEIKQLyTRQeETr2AFaGAl1fgWYRdCCRE4j2AX4hn74RkiAT0SMQztXdysOBvhrxkRaS+iEAgREQa7UUkREUcfelbeWWRShnhHpI4WeM1IxGgN24EQzahLLB3IokohbHATB+9W0MGhxD0hGgAz7vY76jP2LhmcDzrOBzZtOuaJ+L9O5iorUJtqb46ZGhfxAiuIbSG7ruWunfNozwlkcY1POz95gv/rq0CcEaUPNOGelIESgAO+FwXMrl3Lc3qB+QlQvJ/C7ej3dhRIIqiT1fz/188o2VlRyd13ZmHElBgjOFsCruTFXi29QEkvVZ7/d97rS1k8o21ctdlPYNJMdEWpAkzWe1myoHDgglgfTL3azyhJELHJML0nkHcfhQlbgYeona8Aw6gfJIGk0jjHckRzjWAcuwThYDY1z9wFM30CRB9iFCOkMynd18M1Um9H4HLMc/HBu9xIk/HOgL3kaAjoDp+EQIkjl2gInYCBxJhmw+pOWhjAYY2oNMeOMDQD4D4Hd0chUGmDjz6AKk0aAJ2wXXkZtanSJRZS8a/gLFAKrJoZ83l15/lkzK6sPF+gxQ4QcSC61owEV27ezt9ZRZUhJtY5Rekm6/8CaKtl+rTPbcPvkCRdu/GklUnXz/G7RmbqJ0wZn5MmkUADtikdkIL6fhixyQau3HHEEYg3jcIk5iB431FnsjBBAYRROSQAiFoRCift8HDgAbCgBKJHBX151r9i27gAq93IB8NSv1O5N3Iuw74QOMdyLuLSOHo5AOJqCoSGXtfzzwXI/59ZtYHB8IHEfEDR14UEWnMBbgcHZWDE2TelbxPmT9969PvR/rRbxEoCyTrEEjMxsc6UTCgWDswLTBtmLvWbCFi+aqnhXh5/tYuiAJJg8obiYpGG4HKJ978+RKqfGWCX0vcGd8FqDSrvNdkgREs3Ttfadfu+I3dc9+J7N3J/EgtSjtiEcqLLwHZLVkvx3ZcMPn1npAJ25GOoEEEKPAQtLLfebQBUR8LQNJfj4NI3hGuv1QAoSgkynSMA5O89zLgiIi+EuoTuKKS42Z/FiR6eu/xKRpUQAKRIx/ARFVRybM4pnm+vqQ5znrmQJI3F/0lAthEFvB4bvfrk7f+vA+B1Ne5ACwKKeujeS3yB5K5B5N16P0oAw5ArGHQBNP6d62z1YC8dS9NC/Hy/D/SQpRQoq0olGnHt1CxxJpwV6yEyn8FnyVobZQD6MKztvWufWuvv+5rDKy88XVfZc9QZA0mc2AS29WkfCbTYlhooiEQi9kCy7N2Zud8YrHLO0oRuOMVcTtWEWxQFU3A4XN4HxIcz0QYgIFGPXD6Tcg1/QW3KMOvnh+8/UEqU6cvdSDzfiQisX678X5E7CDzPmQTUNeXN1HG8wBKxPCcTKQRqeRFk0AyB+YJLKBkfdoGU5uOvkFXBNKPOe3dKHCCSCQKICcDUchJoYhkwwuU1rHI1JqCim+jl2sCSbog8V2Y/gKJUBJLfnZhKp8AgymQEjBbqFboa+o+gVQ/6//Nbp/S4DGOzJjVBY82/MqeyXOa1M7VTarUIlloC2qXtCPeHVNKRESS8Hx8AJPoIBoQsV0fSH5nIm4moog2AAIOWMAjkohgAGCABBAAAQI0PvCoDyIGWnX6Epnc01j6kyDj8Y4EGEc5X9eMz/sRsPweBATHMan3JMc0kayvcI5nvrL1t3D9/iZyNRcAcl1RrSMdAxbgAomZR+XAkYIpgBYk9damNQsKqfLaGzzWllUOIhZI5VkB56+jHQuoTQOHwDKRifja0Tcl4ERMmCxhX6jkM+ULRJb/N7vXNI7gaWzGY/zuGTy1CSKpZ2+C22BaFItnoS0qkRCAHdii24H55RlBEY6d2A5PlADyku+LGLD4RAVggAUYvqqBQdq7lTYAEHn4HPO8I4FDFNIWNN6B9JuBU9pRT7TRV1Gpjw19CjceKV9f23xV82XPc4hSoLBBAE/ehtE7lDlw5HPkBZb5MQ9tLADLtHUEBmFfAc2b1DwymxUr6oOGyYPLesg70gEEKOW3LF2IFqA3kDYfTMvHY8RXYUEqzRYksMgntkQo5deXNnyJWFs+bfiCJlFrk48tFOWD5drWdU0WoGyBkm8c+Y0DaJ7BWJnn61lNsEm0CO1+FtBi9/JMEI4ghEIIFp3Pbg0kQvRFT1u7uN0fSN5XvH8QbtFBCgriF0W8K4GH30cAsPEBCVDa9KFCHZAc9Vwv+rgWOPLgcV8GAtAEN5+PIsACvTF6h+k3JAB5lwosxz3P4wucefCcoCr6iF6BUpQCF1uQ+G1EQHKUK8KbQwAFU2lRKBOJpEFiswskMGRFpE8gWePS8gFUJIqL2Pl4tHsqv1IXql+Qij58BJgIE59yIsynnql7E3e+C8OFZcvST9ddX/A0joBqTFLj9dz33ZDPxFsYi0sU4LD4hKBMTHztolKCcBQiMO8eIhChKRMaMQaInd8LuDbAKoIQPzC8QwEACIQOJpEp4BhwRCVtXSuaaaMPee89gAELaEQiPinwvK+5v6MckEQfRzwgGTOQ5KUMKGBi3m88j3aemfGJMiKU1Abjq5wI5SOF+dKuz+J8NiJm/or4RR8bF7A6zoHHmrCOcwESSMBSXn+2IEmVAyh4Nr9sZE+ZGInmDSb5/NrUDhjBFCDEtuAwef3w746/EUDK9wmkC86WP9m9Jn/3NTbPIV/ZWPI3caznNsEWzYtsuyIgHGu8K4gmQOrdSD0REAPYiEV7giZa0ADL0Ue+r2bE25EPGLVXDwhHNpAROiN80UsdwADnPQlwfAEnVXZNRzOpfo2DudY7nEgp6qgHnYjk2YAPdMc8z8IHHCmQqgMYcEDU70TefwKlqGNeRKJAU9dHhY7EbUqBE1AA6V2Ild8jm7R8oCgH1kInVZ+tBhgdS5eJH0ZoCxL7puyr3K7MtAUG0QWSfBDVR3l9qCPUwCkyyOvjAqWO8P8PrMqf2qzxa6f/oJG6p7H2HMbcfJgDk2riW7AW0BECMBa9l2OAMTB1HJH6ekUoCUp7QgUgQTEiIzwiTvhELg8QHwlEG+9NPhyINupFI23BpB1/kctHBGCoE41EHP25L9H3rgYifYEXPGAQacCibEyOo0ASQRhAHO/UFZG0lWorKhV5PK8No/dIc+aTNnCApF9zo425KCLtx4ZAMu9Fn10TqXXaKMMWko061a91nJOyCxItx0QakT5cENk6s4S0fhckuk3LX/Bck49gg29hCqLEXTu+C9IFYwGpTXbbMu3c0z0y4+755I2VGbdJtXB2QIsUUMFkgXsPaucUsaQdS9QREOHaie24/TgJqn57cjwkXEIUgbzwg0KUAAUQAMPfD6WEDy5Rhh9IolWfv/m8//QRAVD6JPjuIdqATf+gcn9A+1wPGOXegZSJHiTG6ojXRwj1oq73IRHG83nOoLCZeF7gKJsHkPWOBDptas861gVQJwJ56cK061OUeYOFBcqW1180ov8siFiR6QcThBYsOYMgnzSB1bbOtq0bKgOBEWaw5ZPnC57aBE5+KdEH04VF/ZZ/g2p9+jRZO8YmqGcIoHYnk9xuF0iso0aw9fsFP5AICmhFLsLouCIlKgIkIjs1wRK5Hd1uL7Iw0BA98fdhQrRx7PNhQR4wgBC5RB7t9aE/ESegimBS7RjIwClCFU2MnfBFJkc143SMFUlBJiLtO5KNAlxAEl1FGBtH0BR1AcZnc/HcwaaN9mCSb572WGdum/fAsibWBjwsoIBUNCoiBVfAXGu9FyL5yjSSb0F6UgLMsRYATD3rYqnOgkp5IQuO8vWXETAQWIIGT+BUp5wF09obLK677epPXl9NiLF4jhbCJCvz87XbqWvBwNKigsfxja8FlicMQiCeolVHvAVJykd8ROvIJU+gdnvCBQJARKbgAYIo5DgGhL6uAQYQ3rG8A3lvI3wi14+IAzBRyfsS6PRbf64BDAOSDwCikAhlLCBjIAKN1Hj5RCPH16LWRlvP2HsRgJhoJA2a2inLF83NbyA1z+a+tbEuHecCqbVcaCqzINt6BqSNRulkTX16j4/HgLSwsIS//kDhk+rs6eCrnLlR7bphfbEFiajl+R2zAqZjV20CImD4ti7/mrrauYf75tM3n/GZdAtiknp29VKL0outPJPfKMTaKQkiIdhtO9tL+QmOOAko2Oy48nwiFCBEHuLV3tGLObaJIr0fAQJgoonI0ydpHyxcDx7RouMXSEUldY54AASS4yEfGOsTUO4NKKAYi77A4hjHOv6BRqTxXAHkGqAxzwYaEHlegBSZwRVEzQdr4zFvRaTm3Dxbr9ajfFAsHEEhza8cTPxr6jJ6KE3HUuX0vaw8R7scmfKKX3kvkq/DrJs02O2zvrp2QVpo8vW+VJRa00ZftX2Dp3b1w7oPX+NpAndygoh5DrudtF3OAtgZLbQFDoQWmQ9Y7Y78wQQUAkw0fOr1oT+wEaud3vEKDCIFEEQXMABFBOk3INEHBI5XoobjIRPVihwAA6NoBUjwuFbfru+DA9DUgdL1gDCOjndA0R/IPIfoox5IjqZSUchHBOD0ThgwntGzem6wONZJM/NSvojERCXzVEQqChWRmuuFggXTQsXkrWP+T23yXa2z5eFJL0gqGPGVX1/mmkh1nXK+brw363opMSdqAMjzaxsAtVNW79ryHk4aTBceaW316druyRqnfnqGxqqtMn/PaWLb9SxcYFhcC23R1XdkKMpZ+D2aaGfnJi5l9cxuq9xXPkICFJGCiAFFpPCbDvGLKI55xA8CkYe4wdNLv4jhWsc6UGrneAhEQPrixsfk+ySur+4PHsAASP+AArVyv/2IOCDwXtTvQAFRlGGe37xJF5htJx9wQdf8mO+39yJzzmd9mHVlmw+QC8n6pLS7afl0skYv2QNSQs8IiBFd+crXx7pOh4mQADdfv/VB2AuAdgZc3Rpf10sDQf/5Gpf2+pNnJkJ7+do0MeqkjbHxM22UGxezWHZEi2lR5Stb2OrbNfmJofcogiCSQFLmJxZttw1x9jEiE1lA5CgmuoAJSOpEIQCABwDE7z0HWCJKUQ0wIpEoJA8o0cn7logn2riedazTpz7co/ci9aABj2jkmfq0nYHEe48PDAtIm4V6eWmgBZM50ZYvmIpKzfeCBJryQSJl1ln5zbZOvvLmW3+6SCcPPGuBlPASXIJOfJVZF2/bruV3Ezdk9+asa+oPTPxdX1/12zi0IWxtpCZPPb978NcnP582wVHbQJF2PDBp2ndf7Uyi65n22lqsIlHA1IfUggcIX/ngK/IwAgke9VLCISTCJF7gOLKBRVRy7BI1pCByZBNR1O/7CiBED32IRvWhDDh51gcNUKkDX9FIXqrPIpK+QQouIPX7EADAI+04Z474fN6W98yeUboRJ4CyIKreNeatTYoFkjkOoHyB1PptmSnnfwPntk0rNEcXjNbW/tmIlIjkV+jlOzrVRvvKTJmfIN28wSmzBlL77tsxLN/eS7mBJ25960vf0h7SPbQzDqY9n0kmctfxLUhBUh9S45A3iRbKwrk+sSeGAKpN/hbdfVts1xJF9aAilHZZPmJLTHb6YJESvA8Byh31mCjlHckHAAAQPZETvnbKIglIGMB6nwIGE2HAATzti2J8Ph4AAUBSUae8OiAFkNRHlspFHRZEzZFnLw2YIlHWNW1EQcQCaCNTZfN+YWDrS5vpVFq+tvlpIqOn9Jg9egNSAEiJKCEScqAk7gRe/cJVPwnYjQ2om7PucfuVz/iyHbCHInwPqG9i70F78O6jff5Me37jqdxYmbI+Goe27teisSKIRW6BGRC0AwbALCYLItckFNdqL1VXnx1zpI5ERRaCDgJpxy3gKIs4jm2iB596L/1BIFIFTZCAE2gALJIBakHSn/u4v7y+RBr9Oq6BKmCKoh3jPKfnCJis5+b3zIxPum3Lt9EEUqm1aI5Z5dapNQfFW1QKEml5lgbWF0BZ+ip97IKU0K+gF6LK+46j/YKUSJUNpD4Zv7bbX9ff+9dn/XjAJqIJYgRrIhcK5hr3y9/4yuu/yeuaxiBtMi2OBSQQYpe3+7kvIVhw5aKU9kEUHJk+2rVd53rCUVdb9QTOCFcUEWUSPZ80ocuDR0rMRM16RwGMPgABUH3xBYz3MX1KAwiUjcE9REl9AsixTt44gdOzBRHzTAtHYPTMAZQvf3CVDyRzy8wz2/VfUAJBnv+C1JquaX99q6F0lKaz73JHuxzEkyXmBL/pQpRfe30YhIHXD596puxe9S2/7RqDeqa+CWjCelAT1I5kgom3h29i3vpn+7y1N1l7f6k+1FnMREMQymBq8QPLGALM4mtLyKBJWIEEGkIJzhWlcr8tiRQd5xK0dMVelFDnuEXkPi/rAyzeh/oTIBCAzjuQtoyv41qQqufXr/Y+gHgOUakjXFZkCqhAkpqDC0dzyC5I6qTmrwhkfeXbMIs+0gXFWmULz61PQ59sISpNM28aeo52iWbtu8GXaRM8CxB/cEld12DcqHomn3WtvqvTfiOFMuuh9LmTYCKbKJOprsnST9fW345LanLrt/syk1ZbbfQHjgTQ7uj+8gRQFAok9cQACEZk5Ymr3TvxSXtpDyzRhMjBROSOXMTM9q+rCV/Z9UWJjoauBZooI60d4IIOLMBgoMlEHm2Bs383Byq/E3UvY+4Z5HvGnkNdcDSHzLwBiT+QFqzmOVPezYrPui8g5aVvILWu14IlrclfiFgaWXsYCaREzcpr5OJ8xN8Pn4HDFjDl7Ue7bbv5bO/dgHsgY9gH2rRJYwm+SQNGfTL98DVxFsBiuEZZWp/qiMBCtQB2PjujxbTw6iwogNhGJKa+aENgRJfQ+AiQwBIhwfXDpZ2czzVFDqInbj4iJnIQAKNowQ8q4q8sdZ1UFBOd1PMVmUAHFGYM+tYeWMr6cY0xe4b6DazdHOQbvzRw1Mubu6yIFEiVM3NtXpvjNqudZ+vSGpWupY/qW29rXZqm1mhljSZLYyJdPflPIFXWUD4IgoWvMlvAsuoqd90FSJrfIBO7B+oB9gGlHr4JupOj3KT10FLX5ZPXpvYWxeJZJL7d7VoEC2nRCUK7FreF1b5jB3/RiogAQrCExtq5pRmREmDCA01HrISsXZGAET9hbzSpP/WgAAPh60cU42NAcr3+Mtdo735Fqvz6NGbjXDNm4wUOK+IEUUAFkPxGny0z8LRpLUjmubnuSMcCaNMAs7Zr6eRa+mILzBp/phwf0r+OdlfolQOjP8e5oNSGbZttV5/5u+/eU7mBNmiD3YfxsCbEJJrYJq1JMplS12WBY8HU66cJtzDyRZmAkLeA6lrIXeB2UnXar3WtdoSUsAmx3bpdPOGxRJlgu660PpSJnNiBBAxQdB1wgJsfGKIPMPnUAaYoJLpps/cBkHLAyDf+NeMNpABqbjJlkEi1qVx9c2oNPlkAZQvSput/AylLR+lmQWL0ln7ocvW0/scWpIUmUa9voWAbhbQJoPXvNd00P8vn+h2ch+ih+JR76CaFsC0GwYKjydldZlNtXGOSlReQdjJpC1H/UmYhpRbVojPX899FzqeeUIiMCBNigmdESHxSQvdxgbDVEXTtuoagEzyYAFAkqh4ggCnSdDwrCrkWTK4HnesDJ+u+geX+xnghCqAAuREmYPIXqWuzEJmvNfO9eXPa+jBrlik378rpxJouRPnl00o6CaCFKE3GSfm1H0e7BUZjnfIrX3A2XXiyvY7Jb/+V3SeIDL6xZD2IsTQBrMlp4pR3MkwSQedrEptwqbLrMmV9qg+IN5AsPMFILf7WL0hSAkhkibA04RKYeh8GHL8SP+ESfcJWloos/EAAB6uv2kgDIFi0yZfpJ3/3qU4fxikFlHHfZ5ACaaPQArQWSG1C5m+tyLMAbdpaBw5LB63d9b2ZerqovLoJpHSXLUhXo48/kIh5hf5UfqVACBa2MCjvvzdU33UL0rXuydzLgLvv5j2YB1wgTFRGsCZQPiiUm/SdtCY5UwbO+i1cC0rgFj1YWKKQ7k7aYgcTv3riCaQESXxMPpCI18cDwifeYJAGB9H3qRtAIk0g6DtxF02Aog3otAkWVpv1sdrpa8dpjFvOVxTaOcmCg6kLGHXytSnfPK41p9apTbB1bl3XWsfr2zJNZHSVLUi0d40mWZr99gEpMSfwK/wtL0hBwpe/tvqrnik3iB3QWsB4CKl2fB7WRJSWDxYLIG1imxzpTnawtBAJPpCkFq6FL9/it6hSPgYSQlphtPCEo34FmdBZPkaQ6sAhMlVP1KABl3oCly/KaL+wLRz8jopA2shWXWnXrOmvcQGkcQf9jnsj0cKwm0tzuabtts+0vxZAC1JaaI2t92qEb/PVs4VnbaNRoHzS69b9AVJgZAsAK9qsvbVbX30FaSC5cdHFA+2A+QOpB1LWrokwKSYyMEysRVnfTpr2+aR8gWPRCF5d/Sq3eOotcpC04K5Xr+0KQ31+pi2BERwBJr6FqCizMBB9AucLIGX+vsJ535ECpXZS7cp3nXQtkPa6TY0xiAKJgYb1HNoEUBvOnQfzxcxH7ZrftXxdx/i6PpAWjtZXmk6qu/lMuwtQ2luQri04afkr/++f/wCKEtwfOjGpngAAAABJRU5ErkJggg==",
minimumSpeed:22,maximumSpeed:25,minimumParticleLife:3.5,maximumParticleLife:4.5,emissionRate:1,radius:1,color:[{startAge:0,endAge:.4,startColor:.1,endColor:.15},{startAge:.4,endAge:1,startColor:.15,endColor:0}],scale:[{startAge:0,endAge:.3,startScale:.3,endScale:.66},{startAge:.3,endAge:.9,startScale:.66,endScale:15},{startAge:.9,endAge:1,startScale:3,endScale:20}],applyGravity:r.CONST_G,randomXY:.09},{baseScale:50,
imageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAFyCAYAAAAamASsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5Njc3NTkxNi1mMGNjLWVmNDUtYTBmNy1mNzM4MzY2Zjc0NGIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3MTA1M0VDRUI1MTFFOUIyNUFFN0RGMDRFMjU3NTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3MTA1M0RDRUI1MTFFOUIyNUFFN0RGMDRFMjU3NTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjE3RENGMDQwODI2MTFFOTkxRDdDMjhCRDIzMjk0MjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjE3RENGMDUwODI2MTFFOTkxRDdDMjhCRDIzMjk0MjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4esQFqAACixklEQVR42uy993Ok2ZUldtMnvKkqlPfd1b7ZZLO7STbNDMeuIrSrkPlJ/6AUoVBoI2Z23M7OztANyfbelfcACt4k0gpXOEfv5FeZyIRPoN6L+AJVQJrPvHvuvee6VKPRsLh6YqXWjzQO/3ddjrji2pOVjbfgwAU+gyOLI4f/+99r60dp/VhZPyrxlsUVAeBoCH4O914BwI/8+lFYP4r46X9fWz8W1o+Z9WN5/YgmW1wRAA7x/S7gZ0p+3xBzvwHB99f149/D60ff+vF4/ZiPIBBXBIDDt4o4siL0VRH8dMLnT8MiGAYQ5PG7BkAgrrgiABwSk98FeABCTN+ePn0V/ycIlPG3GoTdXz+Ko4G/+WtW462NKwJA7wv/4PoxIgBQhxCvQMhNLAHD3yoCCrQGRmENuOAvgRuIEYK4IgD08HKhP75+HMMxAO09u37MJTS68gFlEW4HEUYJ+gRQFgAiccUVAaAHlwvrifXj4vrx5vpxFcLrwn1n/XhPAGBNrAETq2DFmqMDDBP24/MjAMQVAaAHVw6a34X+r9aP58X3d3N+Yv0YWz/+Fib9KoCg0QIEHDBKONYABkUAQKYFcMQVV9crHW/Bnvj9bqKfWT9+sX68YIH0q0Oo/d9X1o/vrR9DFhj+Vp+lmYE1C3kEhWcQwNO4ds2jiCtaAD21itDur60fL0Pgk5qd/79sG8TeZAttnsJnMYLQB6GnAOTx/NYOOViadc5roNvDcCitqTKuv5TgTeKKAHBgG3oAJv6ruL/tUngbEOi8aHnVdC7wowCTcfwcwPtq+OzMId1zfThyuO6qCHNFLJ0MXjdkIZLCDEl1jdyFWsaxGoEgAsBBrQy01ClwAJ388xVs4LpowTQ+YxxuxGtwF0bxt3vrxxeH0AT2cx3EdflxAj8Jkh7VeIKfDHHmIPR+7cfw+jQEfUXun4KAv3/OmiMrcUUA2Lf7WYBZX+hg2rqGe4ANW8ZrMzD7fcOfXz/+ev14RQSdeQV3ExZDr68cBNiB8QJA7TKuJQNh93swbRvpztMAgQzuBQF1EPfp5vrxjYBuAX8bxs8CPiMmS0UA2Hctl+lCM/t99+KeT20jrZcaLwvt75v9p+vH67AiqgIAeZjFDTscNQFZuETncT0/xP9NLJ8MQGIIwFAVN4CWDq/Xf/c87t+8hQxKgsAQ/p0CmKzFbRkBYD9XXczYgRZuAP3X360f1/HakmzkPgjLa9a6HwATharW+yHANDS/X8/PIPwFATS9JrPm5KdkzUTSonAX4lvc50bCxejD6/xvkxaLpyIA7NNiiM992Yfrx4v2dEafC+1v1o9/x+uWRZAZ4pvAJq63EKgl+LhrLQSj1xYJ0TfWj7dwbdUObhGtp07gNoj7oynVg/i+0/jbIgA2ugIRAPZl1bDZ3DT9AOb6WWzqCkzSj9ePP6wfU9icrQSCpm6jBQA8gPm72uMA4GDnkYtLEP58F8LvQjuL9450cHPqAMEVcRdWADrX8O+H4FQiAEQA2DcAWIbmuQtT/RQ2/zyElwJM8i8p+P4Z93FctBBGzELzf4mfKz0OAAMw/1/Fz07nmsY9+yOE2fmC59oAQEo4AAJAGq5UA9/tZOMnuPdxRQDYt7UK4Wbl3wx+rgo4LFv7MBVdiPfE1zVoRheOW9j4yz3u+zsZdw7auFsf3P31R9Dsfn39+Ixq4rNX4f9rQVTBQgl1Ay5UsvFKXBEA9oUHWITw1i2EA8vYrGuisdIiHKz4I1jcBhicw98eQUM+ARj0MrvNbEjX4KPWfWJOA4K/hHv1B7x/CPeVUZb3YAktWggXkgjsg9CTI4lJQREA9n2xis9E2LXBR9ZC+Et/lwdwNLCBZ/BZDWz2J/jdovU2s80y6KttuIx2HAAtqEXcsy/wWT+2DYKvBA7l1+BQli2ETzXDsAHrYDNLK64IAHu2GtBi3PxMX82Kts+Lucq/5Sy0DmPEgNWCbvZPAwB6nfwbAPdxbIsaeBnAtyqg8QGu+QS4j+9E+GtyL13wnTgcFgtq0WIeQASAA1p10dTMYaeQ50Tza8MPFvmw0KcGC2AeZv/MIdjQWQDYhHXOhlS/vmohA7AirpAL/Q0LpOqiAAQzJ5kAdBIA8B1evxABIALAQYPAEjY3QSAvAp+cCaD5/Sx2Ydx/7pBsZm1mmu7SWvF7cE+EvCEuAdOE9SfNfVobrC04DTfpMwth1sgBRAA4cBBYwebVnv850fqs9ae/yuo4EmLL1vtJP+r+0K1JdbkHXaMzN6IiLhFLgPvkd7QwmBY9BHfjZQCBh/7uwJpYjtsvAkCvrCqOVRH+5CQgs5D7z/LY6iG7TgJZN9o3A3D8lW0Qfhx8krdQBThqoWiI94a9EoYh/BdhAbjpfwvCP3sI710EgGfEIlgTcz5lTw8JOcy56+QtJgEEuTZAwMQdr4l4Hy5OxUJJtYcRPQT6IvgE5lU0xDpQa8r5ka9sI1w6FbV/BIDDsg67wLfjPdwM96zHyy0AgE1A3Oz/FK+v4Pcu0CPQ6t5S7UIXroZbG3+EBfAI2j/6/hEA4jqgtQRB9Jr9S/Z0LgABYNFCFST7HA5C878LEKhuApA5CLsXV3li0H1YHpH5jwAQ1wGuCvzwD20jG/BaQiiZIfkiBLhmIffBfXovHb7aQfj9tc74/6ttsP5sJFKKtz8CQFwHv1y7ezLOP8NfP21Pk3JX8LcbsBqGYDGc7kLzu7D/nW2QhxyaGkm/La5UoxF7JcS1Z8sF1fsaemXf/wjtXm6hybXRqdnmvQBYFfn3tkEePgR4xBUtgLh60BV4ZCHS8efQ8Fqkw1r+tHVuAuJgsQqz/334/HE6UgSAuHp4ue//AELvoTln9l+y0CCk2ygIuwf/m210U3oYhT8CQFyHY5Ut1PnPwOf/IdyDbAd/n5WSM9D8Hjq8F83+yAHEdQj3m4VOQR7q85bn3jHIST829Ki34AecTPRswU+izx8BIK7Dv1jE42m+XsHn8xM9JOjdgwfxGvYH9BDfR7AaYpgvAkBcR2g58efxfw//jcMSOAl+YBVugxN9Hu9ftDgJOQJAXEd2MROQ5dIsKipZjO9HAIgrrrj2xgSLK664IgDEFVdcz9qKeQA94opZaBDCbsLsEsQj+mpxRQA4gsvJL7a9yovwc/gn5w3yiHXucUUAOCLLBd7DX6MAAWW/2Q6sKoDgv1+1MBE3rrgiABzS5cLuGXE+PNS75nharHMynunm5a2e7ZYMgfm/Pf99AX+PIBBXBIBDujzjzctjvfPNW7AA2N7Kp998gX9z+EXaQodhzhWIKbFxRQA4pNrf+969DgDIi7/vWXE/xrP5Er/rg6uQh3Vw10Kf/Dj6Kq4IAIfwvrvf7/nvxYQQU+O/LnzAebgKninn+fC/gnuwGAEgrggAh9MCGIRWb8Xq16D138T/C/jZgNvgv/cae29/PW8xMhDXNldMBDrYe89y11arbmFOYN1CT3wHBy+YOWEhbz6uuCIAHKJVg/k+30GA23XLycIqSMVbGVcEgMO3PKGHU28bLQSZPfJaPZ8U/H4O04jmf1wRAA7ZqkP7v2cb4T5OCFa3wGvgZxPgwFHiXiPvtfIlizXyce1gRRLw4Ja7AN7b7u9hDTxvG8SfZ/r5WK3HMPO/t34cF1fgPoAjTr+NKwLAIecBnlhode2DLUfwe7a9cgDw2XlXAA4OCt4X71vbaJIZ22PFtaMVG4Ic/PI8ANYDDEDoWRmYt9Alh27DtIUJuJV4++KKAHBwK2MhTZcDMBmqq1v3Pe89tdczAAcBCHn8LiecQAUm/zy0fxyAGVcEgAMS+gJM8qIIaUqEn1V8LrSs7Kt0AIO0aHy1AlIAkwpchWWLPfLiigCw//cKQj8KX30AAJBN+PW1BAiUcKxAeFe7sApoVTBKw0SgyPjHFQHggITfhX7CNjLwRmGu5xMauibmPxt6VGAB0Hz30N5CFOa4emHFKED3wn8Wh/eu97BcPwR9DRqeZn4yMacBN2DZAsmXARBEEIgrAkCPLzf7PffeR1ldtY0Kvgsw5T0mPw0hr4svnxF/PoO/rQIAcnhdFRZBNMHiigDQo8uFdxwAcGn9+On68QYE+QNo9UULZbkNCDhz9Ydto+uPv95Td+9ZGIPNWv444TauCAA9rP0dALwE1zPy3obv7zH4m7aRmDNjgZnPQcCzcBt88OU1vMf//vX68TvhBUoWmn3GFVcEgB7z/V1wnfA7AwDoh9b2rL1b68ekbaTxrkHw+y1MwP0BDoYHC/h/0UKDT/IGMxZDe3FFAOg5838AZvwluAEGYf0Cwj8D878KAS/i5+sADLNmos9B4iUL3X9r8l2zFrv9xhUBoGdWHi6AZ+idw799eaHOA2j+efjwDQvZgMdh+udbmPZ1vO4aXluA29AHoJnF57EleASDuCIAHNDKQaP3wxJIQ9tfh+AvwvcvWRhz7Zr8PECgnUlfh/C/AJ7AyUTvAnwfFsWCfDY/P/b9iysCwAHcGx1Z7ULrIb/H0NIc0FHGa+v4OYH3bebTN/B3Jxf/cv14DZbFbVgXj/Bds7A05gAMEQjiigCwT4vNN7QhB31+Cn5ZzHz680UR8k6ris8/j+OH0Pou8F7y+xksjkcAnimLPQDiigCwL0vz8Fcg6PMQ+qr4/bQUchDmrdboN8Ra8M8Ys43cAZ8W5FEDr//30OHXsETcQogDQeKKALBPqwaBm4NwOycwbiFFmGa58wR9EGYW8tQ3AZeUAExD/s3v9L973cEvbSMM+V8sZBXes91pBpIS8GLlIcOWlYSFE1cEgGdqMb03JUI6CGEsAhRWLSTzpAEIZPIHLNQGUMDpUpDp9zUsQtfKMvC/vQQhXRP+4ZHtrJYgh+8eBs+hoJSy0JmI3YsjEEQAeKZWXXx6Pzwh6JKF8V0UfvIBLjRO6p3F745BqLQPgBN53gn4O1gULnhOAL5s7WcEsMeA9wx8x0IvwCUI5naF/zgsjBELJGZVgCon5/wYR2xCEgHgmQKAPEx+duu5AoGcs+bOP1XcywEAwTz+PYS/zcKH9wSimxDeNF7j778A37+2iTXix/dtgxz0z9MU5K0+83FYMs/j5zLcigXR9P0ANAepb3CeDy1WMEYAeIYW+/WdsJCw87yFKr40LAGO8lqFYLqZfgcC7laCk3gfwWxfs9BcJCMatxsuws/FswyvAzBmYaJ3s9IQZrdkzgNMrlqYNOxg97GFVuM1fMerADJaHItxW0QAeFZWAVrQRMsP4fcczNEvGnrQQm7/ioUsQRea+zCjGxB+Nv18Hp/ZacAH3YNrcDPu4nMWN3m2bC9WxGvZ1+AlXBetlzSsEJY3r8CtKcDq8fecw3dGAIgA8EwsZciXIRD9+Fsewk5BYcuuFF6zgL/V5LOW8PuMfO5lcAAp627CTw3cwnO20S6cVkSy3sABZQKCewaCX8Q5D7d4Tx3n4+/5HJZMGdfpNQ8nwRm0+r64IgAcWQ6AabirEN4RCBir+9IiLBQK7eTL31UsEIZsEuKm+NsQyMoWgWkcQFNICGQaf3OAeBOmfiFhRbTrLchrquN60jhnViqybiHOI4wA8EysMkz2h9C6JNwyIjAU9jULzT4rFpp6ZmAJ3Icw1fG7IrT/1S1qU84RZOiO48S4hvG5P4fmZ3NStQ5SAmL1BLAsWyhEYuMSJkF16mocVwSAIwcAbv5+CAAYhhBnRWAoTKwVqEBgshByFg/dtRAqzEF7X8PP7fQByFtz4g75CjfVvWPRaXu6mtDP06MXt3Fu7vMPQMgZrrwrQKWzDpgPECsUIwA8M6sK8/dzCC0Hdb4m2r0umjkjgrYE68FDfp7PzxRi+v/ui5+T92516cAR/vTPvASrot7ic/3cPQrxBa7Nz+0VWAr+Wg9T3hHtz56GRQDAfLQCIgA8a4vx8QI2/ihM7GJC+zJzrg6t6oTZp3Af5vE5BAmCwE4mM1esefqQf/8QAKC4Cacwhp8OZk9wfqexD6bEwmFOA5OflAiN48gjADwzqw6z+RbM9RvQ7jkLrH9SK/vhbPopaNtVa64P4GtrOwSAqoXoQwYWwNgmAloHMB0HJ7EKd8XJzT45vwFof3+d5xxctFCAFIeRHrGVjregK3N7FkJzHSBAJr1qzVOAtM3XWQsFQemET70Ggdoqo873UxtXrZlYLHa4jjyAKW2hL6F2Mx4Gj+B5At4B+Tn87QHuQQSAaAE8cwBJs71sIQWXCTTtBLgGYeQcALL1ZN5dkLwe4HtiTWzFKlm05rLkFL4j04WPPmghnJe2QEoeBzicAQjk8fo5AECcSRgB4JkSfApwH4RkBP+ehAbfTNjqIlBfWWDtaxYmBT2GIB/bhlsyb82TiAhU3Vh0ZeEjKPznAEYncd20Vvw1d3Hefi9OAAhWIhcQAeCorryF1NkBCAibdg5bIN/ym2jEBu7tGWjcPhFYAscMjhNb4APSEP5pC1WISf5hs1UDgFUshCT9ml6Fy8JGqAwxupsyhe+dAKgt4nczFjMCIwAcoZWCAFBbU1OnRGNWLNTHM3+/3gYAUhCqCby+JpZDDp/tbsAVa90PoN05TuNYTQAAm3f0t3lvBkJ7V9yXPECKPQ7cyhnDa1fx2icWMhhHcU0D+M7puG0iABwVk78g94PCVBKBXbTQ9ONbCE3WAhHXylT3VNw3YTYzYzAlVgFJw1wXAECQuA0NvGShPp9di5YhpO2skof4OYZzPw7TfwKWwKjcAweHBQudillM9DLev2IxMhAB4IhofhV+ZfepydMipK75vT7+dQhQvY35zQKbn+PnRxYIRCYCvWLdk4AcHvKFheaktAD8fOegsc+0sCjYt9AF920LVYInIdDDcv3kFGpiCTBFOI+fnmx0B4ASASACwKH3+fOy6RvWHM4jKDALzsOBHgr0TLpj9nThTxIE/B6/axtlv1P4nCEL3Xi6Mf15bn8A+ExDK2s2oLsZTjheBAhU5BmTwLsGgWVxz5gAUCNhLczIdZUsNDqZBnAcs+ZCo/0AagIZCc+GAHbFIjEZAWCLi/HzPhEyDdclhZPVcY+hiZ+H2Vxv83qCgG/e0xBM/X03xB03uwv/r2wjM3HKnp4qTJ/9t+vHLyDwdXACTEzKWHP2oLUQGvYsZGZgWVwX1gTUBTS75S92skeVkM1byKRk8dWqWCoEuLgiAHRcBWjjAQBB3UK/vUVspmRBTRWbzbWh59aPi2Bt1tKrtk2AcgH01uB/B+3/0EJLsuSii+Df9ROY6scAAKnEORB8OGeg38JAk8f4/STug0YvmIa81iWA7QScB2AljeA59VuYwETXZ034CD63JYtzFnsGALIWQmkZQeyDnn+Xhi/uAvIifPI0hPpzmPp1a26EScC4AFObG264gxWwnXPLwcz/t/XjX20jC/GehTBeO6BxEPgU73VL4C8tdCNWbU2N/kTckmN4P2sFvsazoivDjEYtDtort2wM4DoOK4vEaU4AlWXYGTk35kQQwKNbcEAAQLb7LATsNB7gMjTMAwvjtVds/8de5aFZfPjGa2JSMnT33yzk3JMQGwJx9xbAYA1CedJC1l/Vnq7U6+ZekWw0fK/787+2jXLk+9D8013cpwaAyc/rFn4uiwDlRUgM1zAPXuOJcB7X8b289gKAvF9AYi+eWR+A6AR+juPci+KmVeSnZkNmLOQyEEhXLeYr7DsAsDON55T/GBoznfB/aWLexubjxN39YpWL0OIviWlLYTwP0JoUE3kQm/JFbLAyznXJQvuv0xYYdSWqrA0gpIRvWMO9eART/1MRepJ+tS0+g4KFzD2dYKSa8jOAzKRo04IIF4ekDuH6LgLAl/YAAPx7jltoQTYGYGUW5QruOS1IJlfxKAuPw54MFnmB/QUACr/Hl/8U/64mNi9757mP6uW13sTCY+velfYOgGAvTTd+/yV7eoy3VvT1WWiFxWIbDvxIEoV+3n8UDTSIay8IeZW2Zva6DFJxGoJ/F+TbFLTxDO7FdgStADAyC3kNq9Zcv5DD539jod/BIA6SbyTgLsD6GQbPsLjLAFBICP+ohVyJkpB8HKrCQqaq8C/1xHNhY9QIAvsIAG5We4z8l0DwShszVSfv+MN+BwL5e2i/yT30MUkwjW1ipudEa1aseVLOMSHG6hDYW6KFShZYek4X5qThovix+tplbHLyCou2/UEcqYQpnGpjhdTFMqMJnROg68ezOQfBLOC5PNiGRdJpH45B8MexhwoCWjoufTWh+ZV7SSUOE7cggsA+AIBvmCsgn9oJf6u6eB6+yf4CG+D32Gh74WemRcAbbQRo1ZrDZWULsfYxXCsr8+5AYzP5hy6Ozg8oiA+eFV+/JIdW+OVFCxMgalsAgKxs/M1etyBmcwHa/zyeI5uPpgWwvrTdHVDKHofHxeyn5l/G+XEeAV2ANWtO1mrIc81Yc0/GtDUnctUjMbg3AJCHj/gj+MrthH8NGrOMhz0mD7GCz/kpfv4rNtteoDZN8FYlvXUINAUxZaE78Nc4z6sAKnIAmj1HP7qKDTsErZq3UM23IoJPC0O1cB7/7hdXZH4LgNgpPp/GOdyz0Oy0iGf4toUkp5Sc203wFE928Zn047uU8NP7TYtoQe6ZCn/ymjMWuhopuZqS5x6zF3cZAHIQemfUr7XZHBk8xN9j07HF1uvQNip8/tofwgdeBWDs5qrjcyct9ObTe7KETc64c0183mUIgX/GKdGyVfFDM9acsDJqYQYf/Vl24ynLZs6I5mepLtt+kwWf6cI1IpiudQAAko4M8w3Az7+Ecx7GZ63ifjzG5xLcKruw/0Yh+DT/i2IZ1cWtKov2b2xy3ZrMpSHPlHACFYuRgV0DgCKE30tK37TWgyPYdfYDaNAVC110Pdx01kIiDlE6C3DgNJrdRG0yytdBbk2IlivhHNMgJ4/hvO5aiIsPiDnfEE3OrLscXteH9xbE3dD6goqY9mzEyWacbjWcgWD4pr8vVsZMBzOWCT5TCXDV5+H39IaFYqQcBP9V/BwUARoToGKYLrdFi6TVIg/DsN8p3MM5C7UHGXlm3eSNqNanNUBLRge+Lkfx3zkAFPHQvHXUuxaGYSrxRPPLfcdvRZNyqMUZC003k0Lq5uhluAG7CQAUENd+nmL7mpjzNwAOr+HceD1nIYzfQghGLRTLrEF7vSiCQ2uhYqEDT10EXV0C7TFQwGc5mL4kXIOf62/wuSv2dCpwcvFarlmIxCQFhdGKPITwTQDGoDVPNSLT3g+hzcje2W5fgCwsDJJ/vofewu/cMnsf93UZeyZrnVuoaTdj/iT41sViKQiPEAFgB2b/BDbMj8SXzwrRUsdGdVPzUwudbFIQgBdsoxqt1Wgsbaox0IXW2+piFpxO86U2ewFEWCXhW76CjUW/nlGAIQBGvwjmSWzkEq61X8jPVTGtmVXH5+Gf9Q6sD42UXIAw+DnPyme0W2uwWlyQfoZNXxMXqA8Cfw7XeRZC2G9PDwwhEUfAKFhzJGM7Y8rZZIU9Bn5koaX5SSiWovAAHKtW2UT4i+K2cQzagIVUb1ZMdmroEgGgi8UGkuwmU8FDeiImXBWbdhq/XxEz8hI2YFrMbxV+JYkYQ99NAGjgfMnGF3E/TuB6MuIbEwAGAUglWCdp0fKj0FQN0a4j8p6z+De1szcD+aOFMCAr9C7jnqbksxr4+0UIxgO5b5utOQBvHqDSJ2Z0Q4SkIfc4aSVULNQGnJDzeWyhD8HSFq0A5mEM4h6Rd9C5A/5df2mh7oKTkFtxABkBpyF85mkLU53HBbgHcE/WugDRCABtFs3UM9Ags/CP71rIEU9b83gp+vGMwbMOvS5Me0M0lA7b2KuKM4JARTRSXphoNTtp9nJkOCMaQwDCZfErM7LJz4PLOIf3z0OAB3E/mFZL8Pk+NrCSWVUBiONCLnYSOuYo/B5g8D2cR06Ix6q8lkIxIiAxZSHtdwDnzRZhbBm21YGhWuHHYafJ66ngWn8B93HKQmZjchhqn7gT4wDbHwBUUriuGbz3CviUFQudmSIAbIO8Gcdm8k2gGXwMrRXEty8L88rBmCSaaKK1q+++jwc7bGEk926DwIpoFs3yqycIJU2cWRb2v2EhZZUx50WcN0dxU0iGLWS1XRLXqA/++vNy3xhSbAjXkLetVeExpMmagudwMNNRw2U1vJZhyCkLcw3NmnsPMtNxO8NCmRTVh/MYbwMgFVg9L4OwzQt4mewznstp3EN3ed7GMyEAPBECehjgvBQBYOsrgxt4GgDwLTQau9TU5eFqnT3jtzlozNMCAsmEHJ1iy3j9uIV2WPN78OBoqTD9loKnpuWShXLUtJzjgpCbKXGFKGgFax4jxpAeNWAJWvcCvkfvAxt30lqo2/aaX6wCpP3+fQFr4wRASk1n/45vcI+nAFQXoFX1GlLWXB681X1HkBm29i3RmER1XFzBrNx7hkqHLUSi/je4UVqLkcde7QeZyhLwvO19P4MjBwDMMb8M4aBvxrZRjLWehcmZBxv9uYU6gUt4/5gwzI1E9CAjmuY1vOcBrA3WxS/a7sZzKcz3IZh9AKsRnOM9bB4KNDvlOGi8h3tAMBuWjdbq+upChk3gflyy5kKchgDqsIXmHNsd0dWQCMKkhfBfTlwfmvjK/BesudVYGucwLbzOVlZaBDlr7duZ0wo6bs1VjHSxtFDJ99tfC5dQteY2b2Xcw7fhUkxac4VhBIAuF2u1TwpDS8KP7L77vX+Kjc0S2zyILwJDvzVnc6USBCA703AKTh4sMXvp/QrWx/QusrlVXM832EiXsGkeAsDmYdKfFtJwGeb1N7LpCBIpax4iyutasuZEmsu4LmriEqwQ+v5zuF/MU6jtEtgls+JSYrnlRUA4FWhQXAC/3lu2vZRgfdbMhCxY+45Ky9aclq0Zf3QBXoDFpZ2WKgkNX8befBVKqbgN/uKZBwBOt+2TjUxfOQ///vsQ/rJo87egVU/hIdQEyZMJMgoAamKSlX8R3/NPEMzJXQKBhoW00zsWhnx+AaAZEc3ORJhPcQ6rYpouQGAXE5ueUYMZ/G4R33EM94otxyesuesv/zZl7bsQ7xYfsiquDTWw399P4I/TEvockYC1bX4PuR66c8U2lkJZeAi1FrVZ6xDIvb7EPmi0iRi4RflrCzkC5QgAW0PvdMIXZP56Fpv3XOJBcGruzwAAffLdjQSRxOYgs9Y6BbiOv7sF8idiEj/ZJV9OLZnPoOVY6MMoAVN571tz1SKLiObw77sQeLoQq8L4M1llQqIjJQgXTeOMaMB7QkJqzoIKU32XQKBkzfMOGc79RoR2zrZfEESCtQpgvQHWXl0lJvXchKWnlmZN9iDj/ycTFuRm3z0EBaKZhhEAtiAg9PdZ3loUgm+khTlH6+A0HlTN2ve0Yx7BRwCAyzjqLc7jHCyLJxZKRXe6qFG4+dgoow/uC3MEKkJgpQSY5iAgOVyPb+7XBeTGcI/uWwhr8drWYD3ctBB7JzmZxfUO4B5mxYwnMbi2iy6CPuflhD+90yy6mpzvMqwLjjfXTkVuef03kL+LFoah1BNAoiW/3YDPoIVMzggAW1wMqdwEO0ziyASVawlmn4UmQ9a+imsNAvMQhNoNEbLLLdhaar6rME0ndwkA8hbCUixHbVjIV28kwMLkdWwoytJaTtCZt9DcsoRzXUlYVGkR5BkA4CQ+5wTuwQl8PpNwGBpsiM/OPPfdSJ2mH73boVdOJmYSFNOc71pouHIXml8jP6sJd1CjRFt1RZRMNLG49LPrEQCeXmyN/SU2WkoAgACxaKEQhokaY9ikNQELLdyYBUnoSSvXsdFPifC3G8HVD63MgRk71X79OFf+WzmICjaspsumofWn8Lq8hTDnBbzmPu5J3kIHWzLV7CUwLGy3v/4BPm/EQmLLOYBoQ7RhQ9wWlsHmLURmejHExW6+2tH3YQLYFsQinLXWMXu6KSzG6iYnISVAS+Actub2bZp7UYoA8LT59gQ3rmwhJ75PfLg7uKkFC1VvZTzkNfFxyRv4Jvg3aL2bFnLzL1uoxmunocxCvf1OGd0UtCxDd8cABtyI34JpVu1/GhbDEwsZcm6RXIMQfiRAtigbn+fJBp6zFmr/6c+P4X3v4jOZZ3DBQnp1VTYpC2D6LYTXFnsQBBhC1X7+yj8sCiE6L65Iq+lLrKi8Lq5Wo8MzXhFAHhHQoRtLspoVk8sRAJrXCoSZOfBFMak4gfYj0aSn8Lp5C/FtgkAdPuAfYfaRJBsD25/u4G+mBGh2uvogXJz554J0xkJ3n98B3J6D6zGGv/9YBNEjHN/D5/0O4DQuloRaDscBFE9gQTzEd5Kk8s/6CYS/KhZIGdaAMvE6l4AuF92KpR7bdw3hK+jGZEXrMldB23+1swA5p4FkbKELAGBT04K4epwBQcUziOfjn/m1HdFkoZ0UA9F3W7JQbcUqMTa7eAKN+oKw9Slhy9mO+luYvZyiS793tAuNvpvDKThEQzcbh23S5F7Cv7PQHn7dz2OjPABoeUjqY1xPRqwg7fTD1NtX4brMWugzyM48bwFsCIBlIeDYs4/+NP1hJsgwPk4fuddCXWtC3JasedpPqg1P1OrZs4aBnaWvbcIH8Dl8hT2qDUT5fawgZJekY3jWlQgATy92taU5peO1R/Dv4+JLpyyUZHImAE29FfFpUxZi7Z2IGLaP2umQkZT44I0E58GwWBob5BTOb9lCQtBL8P01YpEMM7GZRkFIzBW896YQiEP43QUxdRkTrySYdE0oKgsjXhRrgh19emmxknDRQlouLUkCpWYpVu3pCUu0cMqwoH6FZzhi7btSfWuhscuQhdqL67iP2Rb7ImVHdO1WS7CK+GIpeWgFaDJOavkGRJ/2lKuK/6W55uUuBVrj1jthbTPYOOpysBEHk3zcKnlbogRsGzYgUYKChUozbQs2CIAoWnPrME4nYmMOjVMnNWFVtHzFWhdHqUVQECBmS7ZeGplFK7BP7hO5oaIAXN2aU5C1f6KSs5/iev8Kz0QnPPtn3lo//gWcC+tLMnC1HlnIbWBiUsNCRmYEgC34d2xmyf7uLijvAWWZ+ZUWayEjaE8hnrfQTKPRgdHlQ9sJAKSE2KN2YS8D9uR72UJLcG5gNjLl9dJ0pFvE8uHLFtJ8dWMzBEpCTCsOqy38XQoCi5aSLhKJLWZc8pxuw/Katr2b6rMdK2DeQkZe2kLjlKI9nRjEfVKR32mxmd+TD/A+Nqelq+V777/bRrRoSjieVII/YdXgaTyPB3aEw4F7NRmIHVlGgcwfQvNPie/FenCGB2ctNAHNQlu5m3BpkwdA8392CxZDJ5M0lbAKqJHGsaGSAzbpFlyEgBOI2OSDjVO42bTpJfsmTIOYWrSQXJWykCSkpm5KiKmlBKnI7joXwR0QdJg09QlcjRzubS+AAPNKNIeEVaQFa842zYgbRPDMyj0hYH8IQvW0hdLsW/jdJF6zbKGu5Z6FHJIKiN7H8n2HbWkvRO2pWE5aM3sFAAxFDcO0egikXxLCJ4dN+SO8bhbE2U0R5gfwg9uFdjQGv9N4bR3ffVl8SBJ8WTHvk2BE1viUsO1ssJkSTc5iGkYtFi3E75fEZB+zMNqbIHjSmjvkfix+LC2uE+ANXgMROY7vmLUQMmReAUnB6R7RbitiaTH5q2jNI74IAowK1Kw5msT7vGyhWct9sdR4L57gINjPtuBHasKnVA6Z4LMCtWDNcxHIZ80L2b5no8FYvjqBh0Cmtyy+7ziEnyGuEWziz2AtVEXzpTYx/8kp7EYWoKP+v+O8GB8+a6FHfqOF9mdnpLUEd5DDg2DMeUaEP1n0dB7s9TH8+4SQpg8sJMZ8CFP2Dj6PoSs2HnHf94c413nc+y8BwuRdaGEMi2D0wloW/kI7L+dkc+fFdVTSl5quLhwHx6ARfEk2s3y9LoLfL0CR7EpUP0TCfwwu36DIB3trsqx7Viyc2l4BAKMAg8Lcapsv34BXIFxleY3//k1o/SVr7kHXyn1xYfjcuuuV3y1/cROf9ZZo3oL8PenqjFpIbmokHgj9z2UxKYsW4t/8u1sLP7eQCVcXbWgwUX+Fa11ORCZysD5c8N8Vy2kV38V2WGyqOiicBQGqV8phea4FbOZRC/kMaxI1SJZZp6y5HqOS0OTaWHTFmsuDZwCgQxbatK302H3pZjE69QJkbwr7iQR7FpbqCxba1s/uBQDw4fQJaZO25tZaTLBJNmOgtmdX2FZjnEjWPYK2vmfb60q7GQjcxQ16FTeNRKRuuLTcyMfQ3NrIM5mmSoJuFJuOk5HoMpyWTaqb2j//Ixw047WeYhCA+T3c8wcCEowaMPMwK+dOnoZC0SuL1lC/kKg5sQan8Xw09bchSkS7SZUTAl1pAzpsDpIVQvGwCD9D5i5Pb8CiTglZfVP24BAUxUtwyxf2KgqggjIsDzEvLkJhk/fXRAAyCYGo4qJc+L8RRne31zS+4zY09AS0EX3NJVzTGDbQEMyvupi0ZWzWBbyfxJOG+XiM41gVC8H5DY9bfyXCn7SCJuD3jyXIRW3y2W8hsYrRDTZpLfQQAIxC+AsWkp6mE+4Ah5R8JxyKibKg5VQRt7PSgSCu9xgIdmNlM9lrxEKTnNNiabPD9F0LI9XuYy+zB8X9vQAAklXstsvWz/0iqGlr35KZQs/87LI81Blo/OvQdFO2/Qm63awSwIatwIYgdCSifoDXLVkYF0ZBnLWQ2szXjIlJy1772uZq3kI9BLPk+LPeYhNMANFPW+g7UBVXawbn+0ML5a+s8LuBc8j20MY+lSBaWY59Ce6iDj2tSfQgJa5TVUjCo9bph0liE8JNsRNyIXG9Nby2TxTCIu7nMchjdq8AgLnZszjZ0xBWIjS7zKxZc+yfft0dCDlztrVybFmOTg841cZ33+qqiB9tYs7TZaHAV/AwmB1ZEYF/AcjLir1lC5mQZfzOr9uTWW5ZCJVyw6esORHINbrXILxsoZPRkpBl0zDzrgrzX5VzPyYbpVdIrDF5biUL0Z2cWF5V4VvmEtzLbqaF9yLJNwG39CVrrmDUjlqNFhY1LaCyKOb/D1D2Cv2XIeCfQfvQ5GARSBbofQsmH89jEQLwGXz8BWFma9Y8C34zlGQabF4EuCSEyG6smpCPDBctWwi/nBSh7bcw6HNUSNKcmOlKYGnDCwp0XrSbP/yfWJjFSOGYsdDw82v8fsiezpHgZljZYwtqK4udpPkMeW7kk5INZjSd+qivlIVBum8KV1GVPVYW3o37ZglWpVqPVVE6e2b+caLvV7JhmRewKoh1HSd3HML+JX73CJt5O00ehiz07UsSOwwD7UadfA0a28385ywk6TAOS25i2ML4reR8gXFoMVozyXbnnKHYb6F1tv/0OP+PBOCYRVeG2cyOQkWQQrmEoHAc2m4PXd2p/09Bn4G/SneGeftJoH9WVgHk6MvYPzp/swGwf4h7eNlC9el3FupLOLJex6/X9woAGGPNCNtdEGSiK7CEk2dW25SFTK3KNoSfzHFatB6TjrTghB1mdgoCfo2/xw2nj82hKVULQyjSIqyNhHanxVCyELbR+1iyMJugH2DyLiyqmjV3FKrgnO4DRHn9r8r9J/gu2dNx74M0bxnyJXgZrnsVm3tMOIzGISPtdrr82V+x5uG73EuMpE2Dq7op1id7ajKachKf8//Xz+wlAcSZctS8/eLL6sHXLkEbzm5D+BlZSAtfYAnSiM02hoU4mtshCFRBpv3WNtqgF0WwJyzEX+sJTkLRmw0uJ605JZWLHZbYb9Ef4BkBCM2zcGL0GxCS9I8/ACiQJdbW2r1iPufwbB4KmXoV93DWQlp1VsjSyWdE+GlVntyENL8Iy5ncE9vIM4tyEM/+VSinG5C3yl4zwFULaZfsF5AVAWyI77vahu3u5gblRQMqX2CifUvQ0jzUH9rJWgFn4Rv4T+QaUtY88SYlwk6tzeo8sv+TbcCPWXIcpVaS62Ps2zXAr/FwdURbCq6Kv+dtMO30KQs9tMkbcj84LGVAeAEm+nAO5eIzAgBpkZ12cxPGLAyNrQgvRIXnEYMLAAW2WZ/bawsgqcXWZOOnEhewE/Y2K6ZhrQXhReKQwsgee4+tedLOTtY8NC0RdwwCppqfba5YBMUsNDfTvCHmtx02NS0BthavJwDidxbaZ9eFOORAT+UB6hZm8k3awae7ct4DidJ0CwvnEY5ZO+J9+tqAwGbTk5j4w0pJdoS6CotxQGRsAZbm0l6SgLbJye6m2UktmxVrImNPM/0NMctftzBLjizpzC6cyyz4AILdaxaapVJomdvAYgwnEL0+/WMLqbqdgJTjyFkrkIH5d8uaKy1PgpxkERPBgPef47Ru2u7UUezUXVzBubLF2RPwHaz3uGHP7gSfehd7Q6sm2YKfpKG2imPz1cpBAMBekEdsPKK54CVrbnzBOvOXLITFXBguwRxasJ2HBxsCAlMQytegZfUBktX2Df0H24h8zHZpAS3hfC9Yc44DJzRxtJej/jv4bo0T1xNaZVyItoPe4Pcs5LPPCD+zCqB8VoWfcfyqbV4URwWSFgDIWnPEgJbUsprPhx0A+mBus+Z+FkLCmDhvCvsT1BK+0wCsiN3KD1iBUD+EZqcWpi/LsWPMZtxKw84SSL4X5Vroz7ORht+HH1nISNxsFXpoDziH8SkAmkDOVnEle3aXdlAebwMASxYqG7PY62P2dO7EqiUibIcdAMiMvwkmlO28rkO7MgqRTtwI1YKbTadtxzkMWBhgMdsCPJimOgfCalAIN5rx26k2Y6WfA8yPBf0vWmB/XwUgdBNJ6ZUwIK+Nmj9tB5Pko+3stAlLp1qCvV4cW3+2zTnP4xzZU/EM9lzS4puxxAi9ww4AWZjDly1kRvmFstU2E2vYXMPNn+ctsOML4kt3swoQrkGg8RgE8ltrnbTEXIelXd4Mn8N9OWOhJPh12QSdrJk0gPHBNrRrOkFKad35Tgndbv3dvdpLJEyZM0Kri70EDsoSWQbHc8XCVG0FzhEQfpxAdU0ATJ/RdQvVpkcCADiFR3OgyfifhaCwlx6HdLiQHMPDvG3dNxNl/nzOwiiwRRBV9On3Q0s0YNl8YM1FIGwD1c21ZOBX39/CpmYvA7Z+z1hzPz3WKbAgR/9/GPZRnzWXHrPabhhC5aAwaQczY2ENe9VdyrcsZLdyvw9AAdREpuuJZ+fKj922jgwAMJOuVQFE0ZqLJZax4ZctTC0iwdKNqTkIUClAAOm/+3snxOTfj+VC+xUA4B1B+24AKIdz/cxCG65OZnFRhIBluSkR/IocCgjMUV/rUSBQk5+CxogEOxMzgWxcLMWDAAEOzPV7+n3sYa2NYQRALTBto8Y8k8ZRAoCqta8XSGp2VinqQEh25O2GAPRNcFxIlhKIvhlYASf2EQAM5t57uJ4fJLTCZqa7a4I/Wig57iQgbFs+bqGsm5aGdjNeS2h9BQdO++m1/npME2eRmrYRJ5vO2QqsMeE17XcRFdPr34cCugYXcEQAudV7nKP6ELzRWiu/5zAvNra81GLjLrbYcCl7ukliN2XFtAAYU81D60+LBhlK+F3daiCGMUk8sXCpU1caZv/9O67hbQsMepL8YYdhtlC7Z2Hq8WZrANfpobnTOFhGPItDi4q0WWdDhIXRhkXrnS67WmatFktyf1UFLIbA+7CL0H5bNSz7/gYu3DiU0pgAc0MU46KFuH+p3U04zMsv8g5IQO3Jv4LfN0QzMt+8DxuyamGkd6fFGYAkutiXgJN+mGST61IzMF4/JIRTWqyTKgTrSQcfnS2y3rPmfP9BAaNFISrZoKSbc2RfvtO4vz+Cn3ncQiXnH+FWZSwkKNWtmcWnBcC9ttADlgCBNy//T7ZaM2uOROQsjIcv7wG5u5Wl5PI9Cz0mNL2+1g0HcxQsABJib8AcWoV/PCUEDzd0n5BmbBPdyfx3AX0ZwjoLMoabnT3/ScSMWOciFfbvPw9QWbHmeQlZIZ8a+Fulg1ZgKfV9bNJj8F85M2EagLLaJU+gpr+f5y/Xj59Z81j07+N1v7aQelwRv1rDaItiajOp5SDDaswfYZk1MzRbdV9iqPlVWJq0FmasN8av8x5vy7I67ABQx8bmXL0x0Z5kRNPC6mYtNMJY6PKmnbdQ3styYiZTcOwWBfdYBwBg0o53B3oJm3DOwlgqdhcmWKUttHTq1h2atcDSqxne2OK+4FRjtyrebXEeDLeygIl99E8ChIYs9N1nK3M2NSntoiugdQPdLgLsJfA3GYDntxaGhjTk/rsCeN5CW/UL2HMzdjgHhxwZADBsvmkLo6FyYiZlE2CxbFurOuTsPvq0BQsda9nDYMVCs4p+23w+fR9M6muiMdn2a1VMc3IABWvukditebjTBBqSX8dg9g+2AKE6XvOG/M5dhSuiWVmheQ9ElPMPX+D3D3ZBeBiR6AeAdhPSZFTjMngTRoPOA9D/XUi+LIDigjXnOtB1y0YA6I3FbjorwuxqyTGrBCtbFI5GYuNzA5yC68HvHBbA2GyKEWfO91koDW4IgabXQ5DK2tPt0/d6MQQ2ChJws/vu2v4XFmYSJvsw5qE9xwB+1LrvW+hbUNkmSJ2Ge7FsITLTjcXg5/migDB/72nbt+ScWIqbs6fTajer0IsAcIDWAP3QZMnxdl0MpmCmxBKgqUszmebik02+KydmNKfPGjZcq/fRfD+I8dQ6kquvg/vA1u/5Nvea92wE4OcC+xY0rlf5ef7/DXu6d10ngJqwwOQvWWh11cnV4VSqEXt6JgVnBaYThO8injVr7TnirhEBoDfXbnaHfWyhs7FmX9F3HIC2/hYabTONlcNG/wybcAVCsCKbM5MQ+u0CQEqsh/oWibeUWD/lLoAil9D6rZ5HGveKjPsA3Ad3GTzDzasoH1p3iUmnYPZP4d4f61L4Tfz6zerra3L98wApWg5sAb9mR6BC8agCwG6uMoSbY77pC1Kg50CEfWubRxR00s8TEGMl2UisMziJ5zInRGVti4LPWQxDFjLBNJ+9k6DUxa3yzX6mhYDpdKR0l8LHrrUmQjYIktF//98h1I0OGjwnnMuyhYnL3YKAJvzo9TA0XBUwWLFAMjMbcMHC5KUIAEdgDVloG9YqM9Af+CfwXzldh/Fs1ldXuhQqDTlVZVO7L/0DaLc0BPYTaMVu8/Vz0IYX4M9OWKi15yCVaeucBETOZBnm+cu47mpC+Bl/7iR0vDd38P2NxHdlYA3Q/y53OLeShQSqYQu5H90If124myEBVw5SSU5MZmrwDK6f/RNWIgAcjcVxU3P4mYLANBKb3TfCfQvTiBYtdN3drKCIWomx2lZEIUNN5yyk044AcKa69I05JPQagGQUm3TOQjRDJy3PdxDYErSeWyqeaPSOhSm6CzhOWBjd3Wn0ln+mR04+AEApsVbDPfDff9UBABqwoEj2DllImupm+f2dhVZ/XZ4Hz2+xjRvFVmXs9nwkuhJHANjQIgy7nbGQOTgjAu7CdBEbvgyt/wCmf2kTwc+J1qcmGbTQx5Daj6OeNBONpFQ3YT3OCHR/moMjmPK7mNjI1HpVa58FyXOdBwC9D4FnV+GZhBk+2EFgMziXz+BSpHGuyTUGQFnocL1r+Lx+AatuFy2AL3Fe53A/bgAUauKmMCmLRVApAdW1CABHhzAkkTcj5vhJCHoR2vl7ELIhC2mwXyaIK9WELJtlPJnjrXOysSiYx+3p2W5pbNRO2WYcLOqs+gt4/RcWpgQTSJgGnYfZvGbtC6E4/HRe/PYSTHS2V7uA101bCJXV2/jsLtC/wX2btdaNLfSedQvctW2SvZye9DGuibUSmohFAC+KlbOM8z8yHYkjAITpOyfgox63MFSRw0ZegpBNQHhYfcXR0+zpp/PZWFzCjqzsPryE3xXEj7bERs6K/92pX98AwOoVnOsHFkamVwRwGNYjeclRZvObCMmcCCQ5AY44Z2RhzsLQibQ9XYrq5++NT/8VgFoVAUuurcTWU2KSbwf058UKystzyyXMfg63odu3Ykdo/mAEgFA9x+IQdvo5h00xgH8TFLjh3Bx+HhaA9q1riBZNiRZWwTLRxiykWcD3MmPxU2jxTtrfz+sy+ILrQvKx9LkP7guHhDYspO/2bUIIMqVac/pZAGVyzWw2Uca90wq7FQj/P8K8ngV4DLT4ThboEKTKLYChmriPO0mQYjPVNQvVmPTzU+K21aw5WnOkVgSAwMqPgEQbhbBctJBhxnHK1PKDOFZAWk2LMDA9VEtikxtvRYgvNnX8At9TheB3064ri/O9YGHkumYVFkEKvmMhoYdhwilrzpZs52vPiJ+9bCHdeQbfxzFsNKtzwiO4z/9vtlG+OinuSqOFBZASl4clt3MW8gxqiXPdrZ6BTB5LJwCAUZtuG61EADjE6xE2HLX8qIUwXw6aaxW/Z/EPE0MuWagQ5O9WbPNSUab/lvH5q/g+tihbs+7SY4uwTo4LeZWSjeyA9oOE5ZJKCFWnzc2KQro7TGM+BSIvK+a4Wg/fgCf5DsJfEwLysTW3ctNOO6vyHBZEyGt7LIgH1YswAkAPrAo26RQ246sWwmZrCbNwTXz0OQvFJGkRloZ11xykbs2zDLey0hD8q+J79wtplQYxONTCCtFMv25j58sW4u8lcCGXIciqnRuwZrwF1X3cD5J27FN/W4jLqrhEtC4m4SakrblRB8GmErdsBIC9WIwxP4a219h9VszYlJjE9xPEUEW0rO2hVnEBeQGamN2Qhy0w/CYWgYJRQ8zdrWpUuktr8n0/sxCu5GumcU+KFoqJ9O8OCh8L+aq97fJwL1oNL83ELRoBYK/XArTXmIVMuirchMfYsExBdTP3awudiOjz68+9WBlwFK9bcyfgIVgFbId+B0J6USwVduxh05DtmssOhu9DUN+x0GXJ//+ihQ5NJNee4H5xWKwDpWc6vov3qtvE8GmjBScRVwSAbV9rVgS6vomWu4HXvASf3jfeQ2xQugOzYvquyr+zbci/3Vhkyl3r/8hCEktafOnzACu2jHIw8DoFTohlCO8MjpltClYV98Tr5z089kO4A1UAy4UE0XcOP38LYWcyzy3byLNYEcKx0ubaOYwlAkEEgC1pyxEL5aKalbfcBgjKAIGH1twFlwQdBf6S+NssJSWTvdurCG3OLj1s1KHkXgbncBzCz7h1CYA1YyGl14XpNQtZjY1tgsBjC0lUPwYn0Sp7MYtzMwvRjSz4gEu2ecUjk5folt21I8zMRwDYfV+5aCERJwPz9wo2/702GofEF9l9s+Yy4zSEbBbvP2UhxLWbAMCw3Qlodzevvw+z/omFHntpEfSihZDiPEzqQQiRNuz0z3gO79lubrvfJydDr1uYTHzGWofotH9dWsx65iyU2gByH9yxsvV2Dr5GQ7QZTQSAA7w+Tu2lT1mAxmFWXx0apd5hk7cDiOSYpsoeANgECL83INjsubco15aCEH5tIbHpFEDjFMzzQWvO1vP7cxnv2algLcBi+hznlyQZUxZGf/fhNVfx/X59U9Z+TuMSOAeW6zZ6cJ9pIpFWSTKBqhIB4GAQmZpfzVYTIeHm244AlCyMkGLX3dldPP8CrIqzMPkHRNvTCmGYbBak2qSY21dhMZiFlt3JttfqHu1EsGj5sA+9hvg4jegm3A/PoHwbVtgJHN/gWYyJ0NSFl5nu0f3FGoucuGF53NMh7L/H2GOlCAD7/4Aa1jwijOQV6/rXYDKvbHPT05wt77JmYuWeWymnLSTRpEXjV8UFoDuyaGFmIhuYLnUwRdlkIznkc6urgu+6aaFUmLMLPoBQOxn4p3AT2HeQ/MkLsMYYTVjscV+/iPNmd2iCbBGuFYfWOrh9aN11PIoAsAcIzQfEicGPrLnrrrbOaicg/fZ0887NXITd0P7MiDMBsqqQe+wYVLUwwooVh5xjuNZB8PneCWtuoErLqbJFAFjBRv8U1ssyeJYZfM81ABrTmIdxPUv493Fxrao97PMz69OtrJdwr5ewt3Kwbtgn8VXsvVnbG4I4AsAmAHAaDyMD4f/YQgOJAh5iJ413HAdTguda+LepXQYDZsalYUIOQ3v6M3PWnjF+5qsPYKMxaelsQniTJj7baeewic9iA89B6FatefZfN2HNGkBpBufNFGBtsX0M5zpkYdIOv7OM1/VbGCxatt7svJO10MWJe4gt3dgDgdqefMyXEQD2d9XxcKjpRiBEJJJS4st36mhTxeatQGMx+WfAQqiQQy9WbWexaoYVs9bcnOMGvouhtzfgT/Mcz8EkJRtftdYZf5x2M4zvOIPf++b0Ap5bch6sG1ju8pqWLczN4xRmNgQdtTBA5ZiFyUezYl2lLEwgKsm97kXlcsxCqrVGh6wF12LWg23EjzoAUFgnEqQXm0jSb+tUcz9rIfuO030WsQEu4/d0MW5bGMW13dpxkkl6DWvQ/NSoZMQ5oYeWx4j48a2IPbYHO4XXLCXuzYsAmAULWYP91hy268SLcDJTSdwYsuRruD953PcpC4NcC7DWpnCtKzvgZ/Z6MZ+k1Wj6lAg8w7OTvQhkRx0AGvA/j2NzG0xKatdUFwQZOQJOBWa33cfQnG9Z6JXHdtefWshvX93BubOXHrsJlax54KP7m+/jfF4QwNApvWbN+Qt9FhJyZsXs5mYdB7BNy3dlIIgN8c07nTtBiyXVJEvJ6DM/g+22yHGcAmBzzsJmw1YOGgAeAii1YSoFni3L+kBsTloPThF6FhKBFmDWnsf1TslGXO5iMxcsJNGwkeVxCMlFa56ZR/O2aGG+X9W2HgOuie+rU3aTPj1Lk8sQpFMWKhsXE0CQElJKP3vQQhMPw++PQ/iy4punxTfvNhZPH56dh+bFAmPkwVOGv2fNiTNZCy24e7VEtwEAcAB+V0CsBn7mvrhm87b9lOsIALuwZrBps7LJu6kv59SbqxZ67KfEv02W2jZE4zM5pGhdjGmW7+Ngz0wLkzJJEjpx91MA0Qy+YwKWCXsC0kytWugE9JqFcddsic5R4szHZ4hrUIjAmoURXFvZzAoEC0Jwjlr7wSecu9jLE3j8nnyMc72M65q30CyWqeMLtrXJRxEA9mBVt+mDcaRVTTbzkoWsPy2FpanNnvX8znIXAsOIBIWS5uSahW5DzGdgK3N3Py5ZyAVYw0YbxiZ8aKGzDtOGr+C7JvB9mrrqG/RDaDB246EZS3OeRTnbyXtgmzAOFKEVkhHhIE9wU8jBXl7s5nTbQh9JDaeSEO5JSyaWA3c28xaEN+ADX5KNe9bCKGxOmXUteQObgk0/NhMYFzIPH70MX54Zf9MQxqpoYL7+CiyTakLAqPW9AvADC8lBRQutx1kroJYJx5Z9iu9cwutGYI4PWmj3VRIXYzvE7Ar2XgmWymkAEtuCfYLzn7PD0YevYmGSU0ZM/55vJxYBoPOahFCcFjNa22ktQ3DZQSiH15IL+Ew0Z6ON5j8OwX9TLIo8tDunCI0m/PYLeG+lhRvBKr0H0PwNCH8Rf5uByaplxA5S70HwOPxEm3Mys2/QQifd7ea30yymoKxYmO83jfOePgTaP7kOXVuxCADdWQEPYE7z/yMWOskylq6MOxthPG8hLGibaP9RCGReNHpNDmY0ckJtn4UGH62e6RS+l5YK+xzmIbxf4hqOQWOxgaf37n9koe894/JFnOeIuDe5Hd5XNhxlH4CbYi2t2hHswBsB4PADgYkJvAxByIh7kNQGJPTaNSBhwk9etLf+bdZCw9KM+JjsPJwcbskW4+9bc1fhPiEjZyw037xqIbPQ3/OdhVbgHL3FdGktO87Y7iS10GXZzEKKKwJAzy0OicgLUTWY8MezEN5ORBbJt3sWimJMhI4tuesifP7v++ANmFFXh+b/AKSUjtfSJBxNKvoYf58DMLD4ZgCWzYTwESkR0r3wbaPwRwA4VItaKw1B+j5AgAIyCZ+aGrzdpmdmnwOFE4ec8FODcH8PHMRjAYQK/u/tuE5ZGL91D67KnFgcKrichMOegQ05XxKCbi2M43tfh+WwBJdizkJdQOzMGwHgmV6Mm5Ohd4Hn1Ns5CDNj8ZtpvbIcxYRv7+DCgaW/w+ctQlhZuHPbwugxFvG0Sk+ti6CXWlglWWj7YxD8n1uobxgAuH2C71+1HsxqiysCwEHwAhQ6Z9u/tMDCl7skshjnp8bPWnNegWtaZ+DPQesztsxWZZ3Mcp1TSP4gm/C5/f9O8HHA6LtwRZYs9FHshyvBXorRAogAEFcLTb4dPmHZmjsLt1rsBVBLuA/dfgeTlvqgzel6ZMAleFdfbxh6yTZyDOjGMIV1ARYHa/cbLfYSowNpa56p12lpktNeTwCKKwJAz4EHu/lch0/PeD2f0bKF6rjtaN6yBaJyyALLz4GeP1k/fonvHoD2Z4QiBeH/DmAwk3AfsuIisDSaMw/nwIEoJ6GLhUknLYxof2yhP0A9bo8IAM/CKsOF+ArakP3/zEKvv+u2/YaYbBnGyUF9+JnHd/2VbTD+dBHSFjoRuTB609C79nRPAOYwDFmY6lsEqFzCdX2K63qSOHfWWPwQ7g2Tq5zIfA/fNxe5hggAzxIIPIagXrfQYnzGwjSd7WpExtsXIKCcIHQWmv9iwrJYEzP+lm0kCd2T95fFdRi10E+wYqHuoQA+4YcWknuWBTj8u38m380ah+fl8ziFOPINEQCeicWWWu5nk91v7JJP7GY7k3xSAAAn/S6IH94Qi4HhQm/z/Q0AoGqhaIlz/85YyEFYsdAEZRG/fwVC/chChIIAcMqaayRIep7G55JsnIvuQASAZ40XqO0BuJDVJ5vPMuBqC7BxoPCohmcI3sTrCxaalToIPAdTn5bKpwAwlvF+hdedAuBMWSAj2Ua73fXn4Aaxxdpq3Ba7v9LxFjxTi6Z4GRp6wUK/ek0yWoUb8l8tVOUxysEGpOdgQXC5NeB9BhhhWLGQD1GBq6CtxejaZO3plOYlcSOUVOy1xfTrgoVGp8O4B2y42tMyFi2AZ2+x1bab9/chxMsw6VMW+h34EM/fQ0hZd8AGKeMw6/tFM7OTkGv7hxb6E5DRH7MwVdkBwclNT1v+noVSYLU+BiyUUReFk+gVxUnCk8lbbDOXFquKCVfL1n7sWQSAuPZVY7EO3zX/J9BWVyxUNK7C7//vFkZ50SzPQshfgQ+/nDDbUxa6MKfEpWBEoSiWiIPCA3yf8xDXIPR1aFJvcX4L55rtEQBIi1WiIU8eeeFSKiL8ixb6BZQiAMR1UIuCyajALQvtrE5i096B2Z4cZcXGo54sdNVCLkHFmusOKhbaoRUshAnZXJQDQjkrYBFAcwFgRDDph3Vyu0fuHecoMN9h0EJexRB+N46fzLGgm5M8dhLRiQAQ144sALPQ2ZdpyI8tNDwlT1ASrc7ioHdgytMdYGSB6cWTAA6SfKMWJuSwDoHHmoXYP7sDJ3vpK1jUDvCeFUXgVfhHcW/O4P68KK5BFcJ+B5bWV3C5CrhP873g0kQAeDZBgDH7GoQ9bc2Tjepi7o5hc//YQmvwDDT3xxbanmUSPnsBZv0p0XZqLZSsuQGKkoFsUX4XgHJQGpOdkIfE5KcVwIYqbqX8uW0MaTFxe1Kwqtjp6Y/rx7/YRlIVLbEDb3kWAeDZE34tD66JRZDc+MzoY2XgMPx2Mt/sJPTEQsw/b6GXwCUAgHIBBIqcWA1p+MZ3LbRud1C4bmHa8coB3at+C6w+m6oUxWJxEHgb96hqrfM1mHPxl7i+/2wbmY5cswfpDkQAePZWVjR9u01bxKb1GoGfQZA5b4CThFwAvBciS5SZ0DNgocdhVoS+H7/PCGHGAqIC+Ign+GxvoXYP2n+76c+7KfxFC92daJ1wuOlztjlByWrMNCwp7RBFV+wgrjECwDMMAFlxBVr1BRiCVnvTAqvPkeNV4QhcQN7CBn4sn3Fc/OCsaMznASCnITwM9c1BE3KAxtQBan7DtdLsLybul/IYjAZ0o8HJZ/gk4f/ZwqBZ8htLEQDi2utF337AQqUfOwLXhfA6Bg2uI9Np4hcg/HzvBVgCC4nPYcZhv2hRrwu4aKH7MUFiCr6xm8ZfWgihsa/Cfi7OTuxPCH9Nrq0sFs9WEn3oBr0M4Jy2MHmpagcQIowA8Gwtaq48Njnr93X8F6f4cqxZVYSZ/QMKFpqeZqHVHsIKoKYjWJAw86Ymfwbtn0w7Hocp7VGGv1k//lmIsinb36GaOq8wK/dNuzVz/h/HnQ1uEYTzAIBP8X5WWVZsn0nBCADP1mrIZiOx1QcfnmG/PgshQUYH2B14VfYMyUD6wuctTPzl59KP9kjAqxbamjdaAFMK4PA/wBzmUNTyPhJlnIRUEJ+fcxmp8ckDLIGzYG/IrSwHE0+kOgfuY0DcquX95AMiADx7i+3LctC8zNEvic+ehmY6Yc1ju8iAc2iHTi/OwPcvWEgTJgC42T9mm09HYlclB4tfQjA4Yn11n/iAQsL0byQAgEDFYqX7cF1esq23NU+La6TDZLfbWSoCQFxdWwFzYqqPYvMVRdA5+ZZtyB8BDLhn6rJR6RPnoOE9S/CM8Amj4BS6aSXOv0/AGrgtArnXufRsgsLGJmTrtcdBVcx4jkz3YSpeBHVpC65KQ9wn8g454UUq+2UFRAB4dkFgHkI1BxO0ICY/R4ZPQPvew6Y/boENLyfM4ucAAOPWHOLrt9DotJtNXRfLoSjglN1jzZiT78tZM+tPEGAiE8Onfk7eK+H/Xj/+d4BWN+eYgRX12JrHtzOFOrdfVkAEgGd7rVkIw5Ht5uRgduVZkc0+KO/TaUc1a24GyixCziso4//dLJrSlQTPsNcAwHyEvFg5dAGqCTdAOz77+XnVpIdI/xdr7ue4GQB4ohOLoVhmreXF+2IFRADY+5XMvqvv4ucWoSlJSq3a9hjzmmzovGi/KZj+bEx6W3xyblbdSxkxnZkhWIBff6nLa0/je6flWph8s5fmf0HM/6wIYD0BAgp6DXGT/gGv+U+wgrTJin6PA6UXW/3aQppzWV6fkntZjQBwuBf77/WJ5mABzk4QPg2hes3C4BDfTJ/BX98uk5wSn7sGgS/jO3x5YcsMrmkC/j3beeexmR+KkPgmHoELcVZeu9l+nIdfPS2Wxl5rQiY65cVyqdrTA1XqCVdlOQHy/wjQ+zMAXn/i3q6BNPwnPCuC5GoCXAgUEQAO8RoBIXYJPjbLb59YYLW3OwXXGfUf2Qb7TM14CoL5ewjh0jYEJy2uAFtxuSB+gc3IcCGtjwEx/YcttAobs9B1OCUbfdTa58vnAC5eMPO5hTFkFdv+2G22FeP9n7f2E5V16nHS4mjXl5FhVS2kYjelV8CLnLLQ+p0dku/hnjDKUU4ADK2rPR+Y2msAcFQmxLqv7Km0r1qIqXMUN2Pc/fL/2hafmWtkLz09h++qy+Z+IITVdjPL6IMvixBWxOzVBqLUnJowxByAPvGt05toX/9c7zvosw4/so00YB1BVhFyspuMOXIZLvgXATzsdXC3BZiQhc/Z0zkQquHb3asV2bscwHrHQog1hddwqAp/roj/32jxfXveBOWgAYBNFnTevLKu5YRpdBiWX8cVCL/6cSyUaQiZxfLaxS0A3yDM7wsWGnIaNtsi/n4cm2tti4CqY8RqImxrCSthEJrteXyXQVjrsABYLz8OkHrRwuDUpKC66/IxtKPH1VkTwIQlZihexTWWoWGnNrkO+vHMeiSJedFCAk8SAJTDUN4hbc0j0ettOBRtjbZqYbS77mt1AZOZf8mx62nbhz6I2wGAVAIRt9O6mr3lToA9PWGhqGIJzPGShXZK87bPGVI7sGCGIJh5a+5nz2457HDLklsmf3SjrdNy39L4nJw8S1birVoY5bUV5rwuhJSCgi4/X8/6+xlAwCyw5w/xfg4ZfduaG4I0EvejBl/4EwuVf9SO7KdXA3iMCficgLtQa/MM8nKvH+N5KFeRSbw3Je5PVqwcAgMzISng9RZ7vi7nSytAm4LWBVyrCW5DXa8k8PQEAChLWhC0bMiFlROaezNhHYYGcx/2Zfw/JShJ/28JD/CuhRFTvTwkIiemb70FaHLaTUk2FzPmyl1YOnkhFlegMYchHDV85mX8e8rCEI+tLGqnbItNmAfA/AhuSFn2xwCA4SH2yBVYCJlNzFiazSU51qw57k5FU8HncipyapM9nRVhvIPvGLfQly/dAgBU66ZF8HnPU9bc2Sg5Vp2fVxarRYe38qgl/q/WR1LBHrgFkLLQ4EHbHeflhGvib5LcWrbQCTXJdheA4KwiK2Ajz+E9NZzXaRAp10CafC2mXy/OjSORVYP5d0quO2MhbXTFmmPMKQBGcuxWO385ZSGJhxlyDSHmyjDDc6KBtnKv2BKsX3zjurgfL4DRrySshJow6GlYdtkWTLb6uXzOA3iuGm6riiI5gc+uQRFs1k4rLUJVl2jGvUR0QvmmRot7TK3fJ5xCQwCinjDr1yRqUd2CoqonrJCecQFyFqq4jkHLsMHjgPhWbDC5Iib7ophzi9bcFpmdVPrAik9ZiIdWRdPchR/9PLTJWfz8Bg/0Cb6z2iMAwAfmG+I73L9T+N0j+Lgz1pxuWxfNku8CAGhtPQQzfxH3k999Bs/qkTzfzBYBgM+T4JGX6xsRc7qaOC8mDamGTbUws1OJe3YO/v2ChcYYVSEeS/jcEblvm1mYLHkex7ECK6CS8Pc1M7GecFGyQmY2JJqREwuY57mS2O/b2ZMKWtkWJOS+A0AOpt5JbOJTQOqLOE4Js1sFa/sAG3NKQhxz4osy5MGBCUsWxk+zXTL9ohw2IVtEn8TvXoCJOwnW+Bto1sUesAi0wYZvtj9ayJybTwAc47zUNpku3TGScgsWuuUex73qt9DW+xjA+sE2/chVC7X8edFM/QL81sICuAuXjbUE1xIaLd3ino2CJKS5X7LQYWgN9+2GhZj7dAftymanp7BvqKXvCYeQSnAuCjh1eT59IoiciHQMsjCOvXsHx2NrLh9e24LwZ1uAS+2gACCLizsJrcv5cZ508hZ+n1yvCOHi2u8r/HsWwj9jofkBGdplIXsq4krU5EFkYTaPC6OegdYgu/wxiKTH1huTZLkBV3DdJtqFm2ogAbbdon0F96wo5vUqQFBTd2uIFHy9TeKUSS4Za06PZR/AdAv22oX0cxHsLyyEKusdgIjWEjkUzgNkt5yadd8evCFMP6cWD1rIS8jhsxuJZ1ZOEKB54WhysIBdAf0ASqhfeBgH+18JL1az5h4Cmwm/JiAVxDpZOwgAIIt93EJFlgOA9zJ7V8ywVqsP5iHDU18DGadxjEBz8aKW5UZzQynzy5jqQ7z/tPyeMWd3T/4Ef/sNXIq1AxR+bbvdaHGvx+DWnMEmvWvNse5O/AItBvWT10SbNQRouKm3G0cui2VVEJL2roUpP8wXcG7mPQjWsADCZ7jWXJsoQFrcRm54uhhrANDtzASsYd+sYt9VLFQ7zrb4zKpwWLxnLA5iMpE/t78QwrWOPf8CXBh/zd8mrInNIlcpIRjZWqxP3Mh9GSmWBIAiLvAYQOA4hGwcF8wxT9Tcadm4HALBMM0Abs5doDdbPGvraJZUTuD9yzDV7loYUc2x2adaID2bLb6C9/8DQOCg3AGdYFNtAZAv41zJShdhLS1uAlx9FmLrBdGYBfE5B8RkzFoYMb5gO0skoQbuk8+5g+fEEt9pPK9J0aL9YgHdAgj0JzQa8x/uCanJYwwKZw0W3vw2rZgZHEpYt3vtivBYfaKN+6HUfoLnUE5cA0uD/xqysCjRjHZJS5owpXMGCgluaF+LgTIWhhuOyKZLA03vW3MWU0luKEkTtpMahun3EhD9DbgGn4CgIohcxUbSLjOvwHz8VBjz6cRGTz48v1HPWegku3gAwt8QXy6N81XiaRQbSdtxFyyk2LayAPoBFCRNs/JdOTyD7/C5fRKBcKH51naniYamAK+KeZ0Sq02vldV/bKh5A+c0IeRxBe+Zxt80K47C43vxl/ieD/G5213dgOAqrpPnXRDO4yyUWm2Tz/fX/hx7fAFAUhaXVq2evGh9ytyAEMGrtjcTojcFgLw1Tz9h7HPBQiIOhX814S9lRCuR5b+Ph/o2EP0tEIjvY1PUIRQEAwWTV7HJOFn2CTb0q2JO1hPCl4Jv9t4BAUBdohx9YtFU5YFnrLmR5ENoqFZ5+wTUjJj5DSEN6S+zqSYttGkLuQa7uSrCQaQTGjC5p4rgipZF2J8kfNyKaEzm/k9g73AvDMHFoyWwlyPCCXQshqJ2blhz1eNm9+cklN11IbZrYkllxOxX4R+2MD+xJq7VvhUDMRbdL8JPP2xNmNkFAYC1BLLlBDWHhcn1z3sTr/MH/AuAzBNrzpJasacrrkriH38GILokUYhaQgD58A5iMSecFtQA/l8SpncV174GU/prAEClDTnEzEiG/+pyr/vFReiHCT4JAKjv8XVuppn6IQh92C85iSpkE8/cEM15D5aA37Mfw/WkG+X38qcAuZt7fG0MYxYFBAYtdFDKdGGWT0DhzYgFm5P3U0bU2h6y0Gh0X8ehaUuiVhNOqelV+y8mAKAun5W1kNTCi/kDNsQ52SBvI0R1XwAkJSaruhxlC+mz89gEJ+FPX7DeSghaw0ZNiRulWuQ2XKBZ+bnWhhVPyT2uJkg0PiN24jkF4WeMfO4ASdA+C70ENaGnVWahb/CPYOmVcK8eWmg/Rs3sz/sK9sRets6uYY8xWkA//Sae3YubRJponQ1b8wzBhvj2OWtulsqjaCHkuWohr2bfSMCchCG0GypJDJ7QasIq0DJGmqbKpNLk+UoAgL7vZVz8d9Y8bWUO2n5a3AwdKMnEC8a+TwgBVrWDH7jI0NCChJCo8abEl15rA14Mq2mKdaOFuWog187g72cs5KCvHlA0hNbJUAuytpqIlORAHn4FoUuJS9Nowa2cwF4q7QOIz1lzKrD//C2u64y171GgGZmDFkqnqwnff1D8/oLs7SXci4X9en7ZBInHC9ZUx+T4Zy1USCXM03QCEIh4X8B/TzL5xyxMkb2Li79noYVUWc5Hc6+p5R4ltEW5BwCA/uAMzlHzwbupa89Yc+OMdmxwBuZmSq75NH73xA42HJruABIZnOO/WyjqIX90so1g7aelt2zN1XkpkNL+7z+z0CClnnhOTDBi+7SyuHIZ4XWYUs9cjmXsFY4P37dRYVkRVD3SckFEwqI93aMtK74LgaIi5jwr+x7BhDrV4hxoBg1ZyNm+KNqAbZpYGDRrzUMpNLd81XqrWGg7jSwysvEIyNUWpFAjoVFpYo4Ih7OV72axFxn9TEIRdHu9JdHoScHnvrgLUu+ecCT9sBIn7OlCqrptvW/CTnmOxRbAXcH+82KoF7BvNXV3Di4MORpGBxoiW9p1mNzaE8jI4zac0J4CQFosAPUtdSPmxbwuS6gi2dygYs2FLvTfOf31B2ISJ5ej6jgshjF8Hv1IugLkAO5iw5605tz6xQPWfLuxMiKMNBFXsLkWxQRmfsSlhDVWFzeuvoV90G+h1di4hXRtklndFmAtAchfEPKLfIanbt+CkMzJs2Jvw6v2dCssatVJ299Mz4aFPAoC8Bq0tZ//eZzvKQtJRjewN6vCqxUSwM5En5Lc32lc3xPb5/FgWdE0yfJHnYbKOPaAhe6s0xby/2nuakVbKgECbPYwscn5+Pd+D5rgJt4zL4AyAhC5ihs+LBusJrzBYV20sAZAer2AfzPe/6mY9358C2E9i/c/tlCMs5U0UvI/SyBW37JQv0FNxWfcyTRdhiDcAFFL13Aev2NOh9Z9FPAsR611t54ZCMh+F34xrbgqSm8B5/MQ/MWwWFxVeW1F3OGGXG9FhJ+fNQPZ2HfrVZsQZMQSoPYpYnNdxsYYEs3CfvF/BJN7CxfCpJa0+LIVC0VBE10IwXELVW7KN3DjDInJabLBHh1yAKAp6df/hoXEpyKAz6/tQwGASZBTx0Xb1rb5vXTFjuMcxnCvz+D/dy20M+vkBkxiX7CmpIbPuyqKhoqEvSZS1lz/r+d2GwJyUA1h6OIyTDhrIWemKApTLbGGPd1UlJmSWkHIpKEDiWZpaIYAQDKGM95/YM3dTVVrjOI17hP9XyD7pizU9WtHlLJtLZuLqbNZAA1v6GqLm8UNOtkjJOBO1wkLRTEUKr8Pz8MSYD087/OShcSSrHU3hSfJfFdE07P9FsOvWYDDVgTmDsDqT8T/fRWWzSKsx+/EYmED0vGE9neLh30UDnLVLKRez1sI5yWjZ2l7ulsW3Qia/gz1leyAy9mz1tzaKC0EBgW7U5mqv95Tfn0yyv9hG+Od6cs0xMqo2tbTOf0mv2ihUaMSTXrOS/jehSMg/Jwe22oDMnHkgTUXTJE34GbbahIJ/dNBvO9zgNC0hZLmOQtFWN2AyyKswkfWPDaLQHUWIPMH4ZDuwdIsCMh/BXO7U7FUYx+BgA1v1JpJ9hRUApFh7IqQuT3R3i4rJooy1n1irnW7HNn/o4WMPhIo2n1lSX63Ff/0ipyfkpG8hhswE9eOAABUrX1LbxJLGREIWm850b5bNSm5OfuFcWda8Sk800mY8XRTFjYRSlbQMZIzkNj8FTy3CQvtu8grzeE76ft/h/NptfrxWobcJvfZVaha645HyaKnnu1lmbVmZp8+Comora5rENbH1tzRlSQIc8MzW/zcIniIlQTBkoKp+QdslqPQUryC+8cx27UWPnHWmhtVFIU9X9iCuUzttQotOw7tXLCQ7PUNfl6w0P76FJ7llJBjBCgODbkE6+0lPLuymM8sk12U881YiIezk9IDa98AxF3U5xLu6Qm85/YmgrnXvnbjMO1DWgDMsKNpw068w1v8PGoozfdW02cKm/viNs51AJtqQQDAzcNfAwTKdjRWFffoBnxmxuI5UJLdZsk8F8X8J9HazSYn2Zqx0M33EZ5RWqyMmvi3CzDbme3HNOcnOLcx8BSviYl/HG5LWshjdo0iuVfCZ1YEZErgdUotBIpdhAoJyzUje+uGtc6ViCsBAGo2svLvMYTq/BY/b0UeKDUIiZFlCxV+F7d5vq5ZPER4H4Tjv9lGuHDpCD0TCvJn2OCX8JxWYA6vCa+SFX6Ez67cQehVS9WtuYeBJfxV5SWq+K4FPMclC4Us5y00en1DgEGZbzL9zIJjoVRKPjstLgbj42strJar+LwnFnorKPM+AVBbSVx3/QA4g0MBAGToSdBMYwO+DFTvdnlc+jo2IpNy0tZcF/AeHtAr2zznIsilL0AaLR3B51LCBv49rnHYQtJIMguSpNSStWaU2XwilyCm+Mzz1pmJJrF4DufwCL87gedxCsI/YaF1m075nbUwxJQhYT+HH0JIv8FrWSVXkn2UBICTFrr8sOtPFr/Tjki5BICZcCY6/DMCgBB0sxZKgm/j6BYAXDv9PTbsjJjqabnZROK/xf+vWWvGe7NFt2S7c/UOy1oSn57dk7TfHFNT19qYydzs7OrEbMKKuBBM2+1mubY9BtM+b6Hz8DGA+Wlrbtet3X2X5BwZCqsCUP4c5zIFABmHIrltIfKQdAWZuzKK72TfyFGcT8na9w6oR+F/GgBIPs1b6FHmgvYhhLS/w+e4Wf830MpkYpm0w7ZeyXFTvik86+8XFsZLdbM4JSZj7dOKj5IlQJM/kzDheS8328ijsOI4SOQzC3F3aluSb9kEyCSJtzKe62lo2xWY4ReEm6lbMwNOYU+LiV+zkPzD5qU/hb9PEPnGwnzA5PK/nxFrYAngMYfrSVnnjNAo/C0AgFp1zkJXn5tA+iubfIY/rP9iG9mAnN6jk2+ZIqkFFWwjRXPyzyzkgXdaTFdOPSPPqCEk6nY4kyHc/34808d4LhTgYxZCi0xsKVlIBVYraxqgUsSeYLt4atxUC21bElKRocUTFoaL1AEib8J6/BAcz3QbC49txJgwlMd1XbanZy/GtUUAoCswj2MSZGA7AHBf/L9C809bc69AJZroQxIAWB/AyIO/92fQBJ1cAm6q7Y6MflYW69J1+k02YUmx+Iptxp+DWc46A2Z28jPWYO0NAyyYu79ZCza6KTV8Hi3DK9Dkdfn+mxYq6trldFTBD/QJWFWtudtQIRJ92wMAE59tSXiBVssfEPv7LVlzYk5OCKpGwidUEortvujT+ob6QYdzXoTl0Cu1/71sOTCklhFwp2vwfVgIrG7rt9Demsy6P8vPAQJVsRJX5fXZDkCsQ0BVcGdgwpcslHjnBeA77QFXTM/j/wvgoM7iWsu2D6O1jyoAULh5sLdfUjNPWWjeQVOMTQ76EmSVjpxuWHPZsImP6Jvk1Q5WAHvflay3B4X2wpqGCzAk9y1tYbw4tXjZQmNKEmRuVr8h/MCS8AUFISbJqlft6Tp+mv4u+H+AoDLd+LQQkSUBEr6nk/BOWsgzYJFO1UJLuij8OwCAqmjmdiEiknCcVpvDJtLGnloAoa2wKmIRrIk74MzvA5BK7RZLJw+8kGIHSysczbrvFrTVtQxTnpq7IsLrfvhFnMOYhS64jN5k5bxyYhFQODPCEfTLa2mGs3jGzfqPoTDIZTAPYEqUgybzdAMAFVifvldeEMtk0Y5maHhfAYD+e0r8s+TyDfEKHhRbew3IZiIZMwvzzM3MJxb6+ZUTfr32Dmi3mP3H8eGHBQA0aYeHpvMqT8K8+OQUnZy4VhXrPILd5P4km7cOQnMOWeh/1xDBp1afl7+PWKiGWxKr7ZGFXv9pvIZ1/4/xzJfFxGfnn3FrDkEyIWh1C777KvbWBJTPKvZbNYr2zgBAzbc+a824uyb5MfywCl43LASMCu1D+JKeBMRqQdaWM0FIBaPd4qRXbsTGIRD8vPi9TNvl9Wasua8ioyPUYlW83jf4eYArS2cn4YJtlvpbE0GlhcHPS0NAl8Vq4/ez2xB7Gk5ZaO+tQyumAcinBMz8fV9baBCj8wz64ae/2kLLEzymtyjAvofuW+gwHdcuAgBDLO1CbnkLMVnbxFXgME8n+P4GQDApQsyY9Alr3RSS6y42PYuCenmxISpTX4sCBAoCWizFOvE5C3FyF/yXRfi5XoBgfgUfe3kTK4ANXnLykwNAWa1XxP+/sdC9WEnahxBQHQZTttDq/Dyu47SFCUhZsSJp+p+HomhVrMNZkpG9P2AA0BLTsV38Phfw/xVg8Bv4+xXxSV+15pbSSbfkOjbnkvV2rJc97tgffiBhBTD0VrTmfglsEskBrcchMOk2JNspC4NcP7AwjTh53zQW7+D5BZ7r6QSYKz/D3nVlvK4hVksF51jGc2OXpiqum52J/Vndwk/OgxxsIeAZCz0dov/eIwCQFb91N5dvlL+Alvh7CyOjnE/4/ibWxjI2yLxorl5cbGo6YqH3uwp8QQg3tojmZJglC4ku/eBW2DuunYmfgoXgn/tbax22bVio9DQLJbbvAIzLeA4PLQy3YPKQtmc7jmtYFOvlOF5/zML0nxRcQ04T/tRCl91hIQFrAmZf4bUxiacHAEC1zF6Z2i9gI9zABnvOQveZVusOtMn8JuZuL2j+cTmGxbzWuQvq8ni9/FWAwpJcJxNsmDylTT50FgB7OlzF637Txf2pWmizdkWsPObXa6foXGI/sFQ3j2scw7O7iOtlcRGjAs8BDOZgCdRgucwIWN2BBTMfRbJ3AED90r1a5627kmPfNJ9AQ3HoYi/6/GMQ6uPQiCPic6tbRSvB019fE99+COb2SwCBbyyEzphCzQy3LwHO1yyEX68BNN6z9jkSWXzPKH7qDL4h+RvbtI+I2U8ug1WerMnQYbLJDLw6PovhYGaZ8nXOBf0BJF5k73sEAMjybqVabC/XIwDANM6n1zYKZwEeB4nJkV1nxZxmy3RGBjjvrtUUnWGY9RT6kvjnKQDhTRHE71uoo38FwnSnxedy3PiEhSpBAtaYhS6+p+3pse0aGtb/01VMFgLxtcnw4wjAgETkRxbKeuPqEQBggg7n3JXs4Kbu+vKU42+t/SjtXvH7T8IU9irHn4DnKAJMJ3EvZ3DfX9yE8OSzuWqhxoKDV1j+qj37dSxbP8DnbuI+DYlwn8G5vWChqKffwlxHgyUxaM1dhhstgM9a/K0hllstoVQauCcvWQg50kKKtR09BABM+HDmnZNeDmI5R+Az5JhU0mvmP4mt49D4Lvj/CWZ0kvy8JIReN+3WRvGZk3jfA5j3dyEsfRDqrDXH1LMJU5xDLc8DoDwc+0MQgP14rVtZn1mYrcAQsL/nMsAg2VMvmcmonXdqHcCCxUcXAJ5PIgfQOwDAGPE8Nt2nIHLS+3x+rvH+Gf7upIUpQZ1WOkGU7TXxx5x0F/7/2EL4uTK29bDqiIXJQB8CkMsQ/tMW4u8UMo5Qq8v5sZWaC5wnb/1MzsNB/gsI/0P8f81C2G8YQvo69kC/NRd5qcZviAKpW/OMST4XnRMxBB7kfQs9JGJ9R4+QgKzXd8H7HTTRj/f5/Jwc+qOF7rCdtH8KfqxrrwI21V5rlT4IqQvYn9nu5k3w89m+i1l1rN0/BwGvioCxjNuEqDuJ1769fvyphWiLa93fQvjZVENnPGZB8M0Ir8DRbdYCANQaUB6AzyYjrgrB+XWAwEM8r9kolr0BAMzjfwyk/mdog1f26dycHPrPcAEeWXdDP4axOWlispPtbnMGadnUjOm/DlN5t1cV1sVlC7PjSxam0SRrBu6JEJGbOAHt/Q6eZR3P9V9tg1ydwnsWrXnCcgYAQ26Ak31/in2QSgi5CRmp/9eJOawKZWqyn4/PIvzAQtfjGA3oAQAwbLYpaBvfTP+EjffcHp+Xb0ZvNPKVbd4bvt0ia76b9QJMaWViDzf9MVgdV/fIRVrCd522UNf/NYRn3kI2HzvufC1EHjs7HQOAHMPvH+NZfg5wZQ9HpljXBOiYxsvS8CW5t9+3UAloYu4n25elRfNrdygSgx7xeA3PmkNI93qxkvXA5vIdBgCo4YEwIYR13//THoKAa5v/xzY64t7BBu02ROSb+KZtbzxWJ43PFNerFhpPLEDYTlkYA73b92JaNHAa5jyHdTyx0HK7DsB8LIBA62QIQJDH8/w1gGLSQmiVYUpNBU4nflKYM/iMNRCKI4nX8jVK+tVF89cSfNMwPucjC70A95q/SQtx+cx2D+pm9FfJwrAIEnN+/BJm4OAuno9vxP8T7sYtaIS5LTychu3efEANSw1AyJm4kxch4QSk0W18B0dlMy24mABfuj8szKlZKKlmbkEJ732I11fl2TLzkOW67h44ofutNY90L4nfnxJBzor5TndkRfbN77E3XoKbMYDXMz+Bacx9AM1CC21LgHAr4ArOkaHPvdrzOtF3TPZX2UKdSS0CQFjL2IhMS12FpnkNZuC1HQKBbxhnuf8RpNRtC+3F9xuZWYiTh4DM4Nrc1H7RQk95atnjFubGb2Vx8s0jfB7z6YdxP+4JKcd+iv7aL/G7dMKXvm1P9+bT5hyPLbTSmrfQv7Ga4EyowbU8W4dg1sS1Ymu378SkHoVbQMWxChfpOYDAlRYalz0lXhW3ZHmXn33eQiLSMJ5zn4UcBHaufoT7xJLzcgSAjbViYYQUQ4SPoFGu4sGy0ePIFjS2b8x/AQnkZilru2f2GYVTMK8nxNRlC2zW5Wfs6TRXdk+ahKB26wrMWujGMwmt/LWFLko10bqzAIsPIVRsrsHiIhbyVBLXQyEtQauyyceqmPr089l0pGBPj7w2a55JUBUBmbbmvgYFC5WCJbGWmAD1l0IkJxuWvoRncEfcm93Y42yAesJCb4UrAB2mN9+H1fkY+5pFWXPW+9Wn+wIA1NRsIsERUY9x4963kAzDVNhzuPkF0TB1sSi+gkb7Fub+IwutxffbBBuFmb+GzTCIDcL5eUvQsletmf1mAksG13C5y/tI8595+DPY+MsWmnlypBoHXk7j/Qw9nsZ9+trC1CAFJ+2ytGihHLgiz79fQIA8h3/uRXxPCc/6Hp71vBCB1YQQ67gxWhAscqoBGNxtuGChfkHPl3vmS+yZnQqdpj77NXky28/AN5wU7U+gvQ+g/QSWyC2AM6MkS0eNMMxu4z01bALmCbCAZBDH1wlTi0UmbCLJ+oLH2NDTFoZLPtmB6Uf2mVp6q9NfhoQdHhTzleb/AK4tLULOWvslC/UKl2zzmQUVCPSSNef3s8yWoTCmyHJzktSj8F/CJv5agCP5nLT9+pKFCcJJ4e+DdvRQ5ttyvRnR+g7S/4DvY7hw1ZrbjSkQ8HkQCAYEJB8AcJMAMARwoNJYlGdrW3ieWXz+BO6Rux8/gfBf3eQ9F3H4fbgOd/QD3N/HFobelJ9lALAEGbgEweXm5Ggx/r+YMCXJ0HMK8YKYWdvNAqP5SgKLNfeLW0BsBYxhnBPTX/3hP4/znpcN3sBrs9gYH+F7f2StU32r2Pzsakwtyj5/C2JRLAkBWbSQw8/mKQUI43W8J3mdnPrMwa98Hpw0XJTDP88nNL1jIdOPFgQtkZdxXvdxP8riI9cTEQAeSTAwcR/qCS6gAXeBAMBms+RFqmJ5Lm8ihOxhcArWhPNU/8E2cg26DdMOg9u6DHfFIx4fy7OYtt4tSd83ANCNVhLNnrXmtlf5BABop+BV25323kN48DPY9Cx8YVy5W598XEivMxYadbACsR+aV/vZNaBtKjAfZ7FB3hVCLIVrfQRhpeCw3Rb77nFs9qxYCBy+eRrXlMffPwf59qSNu0TrZEUAIC1gSWvJz/HnON9MC8FqCFdwRaIdWqZsQiBq3wP+LCQiHZk22rwhrsh5RF0uCigxLEp/ndmhBJlhAcorALW/AsBt1y38E9toj+481d+JUiOpWnvWASAJBmwjtdhCI6hvWt9FlveYhZFVty20sh7aAgCUABgTcq4rFpp5LEEQx1poW2rxSWGw71moqT9uYcR3yZpnJRoAhvUO0+JireK7M/L+JXz2E+vcQZfaf0nIrqI8jz6YxG9YyPHYjLDVzsSq3f9f9r78ObLrOu+87kY3tgFm30jOQoo7NVylKBRJ2bQoOVZSTiUp/2D/Yv9jrsqvcTlJ2U6lXGZZKouyGMmkJJJDissMZ+WsGGwN9N4vvDXfV/d7F728bjTQjeG7VV0DDIDu9+675zvnfGcjh0Ahnw0+j+3Q5iHQp2xrYRE/47j5PhHz5hOHGL47BJPeaWaXD/El7pGa/wR+9hO4M8URnK/9eD93nv4JxHcJILCnXYLCDr//To/v0s41NBvLAJ9rQ7wf02Ej8bvJbdA0zHUQlBxchquiFVsAFLb8IhjEwqjXofU/MJ/EQ8GuCTtOIq6Bz2HEIY1bQ9IvJ5qYrP0cTOTFFJosCu6b/j0tvgXz/QQYEToo+zaLs8DMyW6fV4QAc+hnK/D/6Zawj8GzuMc27sMRfT+00SeqFfG+7jn+D4AAE61Ypt7MAGD3rnvWfMfdfThUDTwgkkf1FJqtk5+uX6+Zb2m9aVszx+gOXABZRG3Fbsc0hX8vIJUXYb4Bwb9nyR76nTgOdavSAEBeAJIa+rD5yU3zYh6nscaUsyDDX4CAH4ef/To0/Jwlx4ZFIsDtPsz9EUvmVYR5A7G4To+Y727ktP/zNlxSVtrluJC/tPvJau+YzylYNp9OXc8AYOc0/hwe8CLM8VPQOtQwZ+Ajso4hFuJoGJejDY1chs993JKt0KvQ4B9CoBkaJKmVEx9aU2KZP1AVq6XWx9Iht5JP+WwXzTf1YNLSGUvm788MYKUxcago/jwbkDjt+JYQdu0BBYHDU+bFQskLOZu3ZKVhTqyzfSBpz9nujIx3e/hn+Nx3Yfktmc+u7EdUZgAwxGLa5kHzYUfnvz4l/iRNQyekvzE/c24GvvWwlYEcYOnWP+NzF/GQ3cP/XJj4vJjsOvSjFbDr+mp2MYkjS2bi5VNq68h88sui+O1zlqzCy4t7kAYEOMhlViydIyDafojvh2kiqyFcdRuvAXQN2v0EnqXJta9DCTy7S8KvxPN/hkXwCygAFlax4emyTXix0V4BgKL4fLMiWEzk0CgC22IdgAVQCgjI9SGvgTHvVTDQPIAs1Ik7kJwEj7DKTltoFeTVCrRcwZKRlFgIxH77dQiHU0dwM5QWCTBeE9KuF2dDl2YGh7+E712PiB9gP4b1gbVXQAPv4wD7t+a7F38JYD9ufhYlOYwXLV3LOqYx5yyZAbmdc/kciE1XWv0+rM/bAOAZnMFVm9BowV4AgJyQS3Pmh4kaDsVJ8WlDrc3e8zQtGRcfNuzYFCGyHoLSsGTDzLyAgy7G5kvCJehgVk3+UcDpd/3u95+ASazXVbVkvn9sfsrzM8FedmLoD8H8reJ3HNH3Bv6muc1nnBeeoS58iIaNN3C9bG3msk7/2PpPp3LLFUqdN58yPQMw+bal60zdzxpw7o/LG3AZsZ9YstYgbxM6s3AvAACJqwUcBCbJxDgsTrBfMZ9znocpdtl80s60+K1ztvP15nXxlUti6it5NQ0r5TiEahEH8wZeNB1nxOwlV9BIcSCZstwMrksFegnCX4FwPA6N9gi0ezOwbNz/vQZAZnLQoW0ebC03bpuf/MxwX958VmYFz68EhcDBJv2W42jehuXGhDNyJJ/Cffn2Np85h9s8gmv/jfkQLq2M3a5v2fMAkBOW1XD4CQAk536Ng/wYwMAJzu9xsDdEc8+LRk2TwEGmuzXEQyO5N2PJODRNXPbaY7LKSdGAVWiQ87h+ugFVANd6Cg6AwBM28GzhvevYDxZ21fA3zIN3gv1daNl2AAIOjL9vySYftk0A4Iuan3t3Dnt0Cde1Yb7BicvnfznF+38FrfylACt5Dxb7uH9dBOdV235LN/dc3xT3Isx/WbYJ6j0w6QCgwywrwq4y7luV//8ch56x74qQVrQMSkKo9Tu423lIMa6ByTBzQnI1cQ0HIGinLJlR567teQjkZ2ISr0KDpGmOwuy/OUuG4Wrmpyup0OkA0ZsQmkswr7X1Fw+ylhmPcnEwKu+Zocpz+PcTAJCzDLS3Ya/3+8x8cpU2PonMt1uv4etVmPJH+vAIdbHomCBVFEtmBuC0YVsjPwwtZwCQ8vro+/JhVeVQEwSoydSP1nBRTh5QboD73k4Yh9fECcHzOCgEpQUctDAjkpGEU+YHZqzJIU6zVgGIRwIAZIOVsiXTsSOxGubNpyLT138huM5RajAdIHIdFk5V3AryEd8SN+87li69twL3gSHWBu6bhKxmZZJruAnAedJ8ohO7L62Zb5+mxC8tOvakPApL5RVcQzN4NWxCBqHsBQ6gJf5ftzZfYait08/qYo4P07svP6DGi3HwioElQw6A3EDUwe2hebqGf28P6D+6vfoI4PMtPOfb0IYb5mswKvKe7Pm3Yj4VuWU+/fbUDpJYOQDcV5ZsVKJ7WQJH4daLKd+XBGssAFcRt7BhydAsJzQ7EHjffDFYXRRQRYCxJWQvwfMQyMknwAe8EJxBEtG3bQJaoE86AHA2IQm/Zgd2OidIHQUPVg8QH3B+AACIxM+NhwSvFTEN58QNyUHjHRJTlmE+l1X4ofmQ0vKAh4Xs/r/ivUo4vJsCptUOe0lhZ93BV/hbVwjzX82HCke1GI68jutcFZM8BF+6TSehYdMSyK9YsqWavli3orkZdAfumY++tMR64N7V5FwQ0FmQxlcZXAWnKzcFAKo2no5XewoA6M/HgckVcgQ0sYuiyTbk4eYtWcASW7pGkKFpPqwrsCSHaE5M2Wu4vyPCc9yC6b8kZmc7IJPSrLYcwikhAZtdwKRgfkpP23y3nxKIVmdJvG6D91noZVGxw/HPcZ+HxWQOf5d9Gk5bukxIrpMALxei+8dAAVCx1AIAYObntOxdWMVKl6ItZ5HNT9jCrQRy2rkFf2C+hJoFWuzHmAFAj0O8acnKsZwlp9Y4bcBkDLawvms+N39dzO4QBNJq8VEAGYt8WA9A1+AO/PVYAK8s2kYP2DDFVfWUXAZ7HTLXfxPX7L5mFdxRmOGtbYAAOZgNmNk/BwgQCM/a1sxEAkBJzPJBwcZZAi6F3CXsvBtYhjWxMFmmXRMSlxmKjcB9qgsIsMdCXa7dPWM3dcmFel3Y8vvm+z3wVeuxlzlLzlQwS2aUfiM4gJow6Dkx9dnuycWCvx0INQ/qBWgvJmHkhIgZB5jRj9Qmm7kO97uJw9MOBJm+JonE5oCCWLCtxUyxgBxnMLCjL8NW98DA/8+vX/8F/u2gh5CHuQIuwk19+h2soK8gGAW4TOdw/83ABWA3pGHdjcehKBzQ/B+xypoCAApu2mAmF5y/WP6uJWerJa6NO6O/x+eeAbh9x3xfCBKK1Q5u0WygKCKxhGtCiLcedABgZ5tp8fcZz3+4y2HkA3kKD+U35hNAmmMmX9o9tHIxEPh8QD4yksHBJGmn6BSgxQviy4adeiicLIeekWtkzTsPoeuw84z59OR2B5dJ24sbDuwVPAtHUF6F9cO2cKvm8yQ2YdUdsGSH4inbXuou9/DH+Jx/EIGqC6DmxKQnABCQi3LGGiL4yjsxLMiw6gW4VzmAG5vfLprvoMy/2ycRhVnhjCKxTGglsqNW7UEGAAtY/Lz5/PgD1j2mz0N5Fptdl4fdnOD71Ek6jONXRNuwkq8iAFGSqENo+hp863khAety4ErYR6ZK82AeFjKMVW4U9jWw2y/DvC3KtUSBgLB24iPzzV+XAg1Yk2d2B9/fBsAfMT+IZX5Ez84pk7fEBK904B4i4ZgOQCBLcF3uWbIqsy2uAP189jRcMd+zkf0zXXLTB+Y7Wa1iD9k85rD5JjcsuWYq9Cb2bE04ihXr3xxmTwNALGirvf9ItnQj9MgVTIv5VB1goyJLlvHu5IrErI/E1Gf4iq7LuiW7BO0X6+iSaJNZ0SJz5puDVsRMdX7p09BOdKFuQAh579Q4dBFYC3EDh/gYhPSg+f4HefODZa+Ka8EKOWY0dnoWbfMDS67h2h+G0NRBRI5iOZB7FZ/B+hCGWjWs59zJZ2GRHIfgsWvwZQG9DbEsGU7cxH2yAS4zWh+BkLN7Eic3ncC9uhyE58VqYFv1LwAmd0X46UYu2xCj8PZSOXBbNAWTg27gcJ3uwk4XzJdmVi19jTaz4qaFAeYDHRUL3gmsmvI1Caaq+L6xaCYmBVFzr1lySnCM+z2DfbiD72ktHYFQMcuO/MQZ/M5HOGiqFelGlbGnNyQKo2nPfFYb5pu/crDpRh/iS4lTlvvG+JyygNEo1hkINusuCrjGIsDzMKyc/2jJgqMXwYm8DY6J/NSm7FdbyMVVgAW7SR/A82SHpqPm50s6gHsDwKrRigiRmF+AV9CfxUIQVx5UAOCmVoWoicDo1oGWYT24MzN/a37WQLnPwctBo54Gt8Cw1BWYxmz2sLmDIMDrKIkGDl0Cjv0uWzJxJyfRAhYR6QixhvlY/yER0IJYDTVouotdrJ4awIQjv5SsKgRkFc3hTRu+CpMkJf3w9RHu9ww07Yr49wS9AxDYH9vWasMSXKDj2PNfiRWnVk1b/PZ74sZOCU+wYL4y0XWT/mPzw2hagYV4GIB123yqezPgIAbiuPZiSzCtiad5ugTTif3sYzxUDrOg4Lb7mOAHge5vQEMSZZ1J9kuw1yY++E6AgLb/0n5zJUtO+2kIgbQhJmtOgLAh980W5iyjZSz6riWLnvbh7w4A9GpdnoF2gtYoTSTaqGXbCxkSDPeJHz7qph9nzddnlCB8NSiC70KxdFtOaP9MzmNbLLGCWGIt8/kBRXFdC3jGEdyC1/G59S573ha+ZlosVSW32YwmflABQK0BxmTXoeWpiZj0okkbcQpt4EysN4G0yuoeBPLesmT8t7FDANeSz4hF4OZxQEjMsRyajVHmzZfUsnFK3Xyr7QVxJei73oA1cFw0IQEmSvkc2ju0Fzlc2zGA1gsQlHgE0QD9jMfMd5n6As/4GD6v3+c4xfOH5oe4tsVqK8g+M8KyD8C6GkQYHofS6Udy1iSaMR1YAMwyrFnKBKO9DAChRcBW5JE8tLTEHXvKP4eHEGq9lvi5ar7tVDixIVq7Hfjg7I9wDNqgYcmElELAxrMT71PmS6LvmR935g7ih9g7Nj69boNNZd4pUnS/EICvQSMXhKgb5ToKy28fgP4xgGKa9QysRLoPm8IlMWzdgukewb1aFTK2ZH4gbZp2bzprIVQaFRsgw/BBAIBOgDDowWWc/JD1bollguz6YHditbpECWrQhozBM05MsokTemMR9EfMd01mX8UPYCnUzM94nBdro2LjzZeYh+/tBPEtaFladjlLpkeP6twcAOl3DcCTNuWYob1PzJcax5YcQ97G+7qoyCXhbZpiNfRLT2fr86exP5xeTeBgHcN02rP5IALAMKtfj4AIflXLkoMvC7Z7HV4YJXCC+bn5aTk07elfbojwVgEGLPnNCctN14h+aFGIvCl5v3HkqhehkR+G5v8P5qsnc8IvjAIAInlPCtj8EFzDSez1ulhuJQHoJtwtFlmR22G/xrv4ftGS0aDwDEyZzyxkR2l3Ht4Xd7iU9mxmAOAPAZNQHuuAnmzwwewwJrlM2TaysIZYNWGSmyLcN8y3RJ+BhqEl48zOj6CljuNe7+HQHxZ/lfc2bcm6Cz2ou7EY4XCE7jkI/6JYI3HAPYwCBNRlioaUC5rlMwJQ9O9NrCoOxl2yZNblZRDN3zHfsTlnW/tFxOI2TMOaOw4Q34BVN20pOzRnAJD0u69iQ89YMhe/DTO6id+5ha/Llq6qcNSWQE2IzSMQkDsQdnbsZTyY04c+AYgdwyFhm/W7lqxqW4T2bUNTfYF/V3fpPudwoB07/yd2P2rR7OCK8blEIyIEtwsk7FI9LeDEprCMDjAcyDmQVCpzeA6/Apn4MNzRo+bH08dd3Fxapc8D+K+aT8ayDADS+9t1PKSP8TBOwayjgM+BJHT/92ug7XYPTRT8Oyh/wQKhwzhMKx1Q/6D5JJpbQu6xwea0JWP0JwEMMd53n3mWf6cn4k6Zn+/nfP4Xu2hAhtdump8GVRrzGaoJQdeyZIYqpwWtQ/OzBqIKwGViFX/3MtwQtxcvmZ99Efc4v7MgI981n4+RAUDKxZwCpssume88Wwi0zVFYA1928dN6CTvj5ToLQJti6pAQjS13W5sw/2fFlM8HfnvbfA79VRGUJgSOnAEtAv4uTc2z5rP4qubDT2ajn36ziD131Z1vmE+H7uSuuWy4z3DdmxCS/JjOj7vG6+bDqzrFiFwMAZrFT/eExNV2dlXz0ZgmQPvplBbIIexhasWUAYBHUG07NitEUDvQPtreqZFS6EuWHJlOElELaHSKUCMApLBFli5mAvI9KgF/obMACG5sZtEUq4OHriVajAfamaRXzKevagfjSyOyDJiheBqm/8Nd7tndhwujvQ1Q2od7dmf5CRtdfsAg6zK0elv2k2dEC3jI2rPzcc58IhetGq3WLAUkZT/XcEHObCsDgMEWhW3TfHZVLtD+BZhxl8z3rusm+NSU+ioJWVSyZPZcJJq5IaQRM/bWLdkgxDr4hFEXcCubzy1fFbDRugbWVnxsfsYe37MJs5xJRtyPebzvxRG4Qmzu8hJcrU7j43MQDpfefcH8WPCy/P6TIwQBdlWiCc9MyznZc7ZSXxYFwrOkz479HZfl3LTFqioELiE7IDElPE0b+7pYZc0MAAZ3AxgiKwLVF+BfUhjcYXgPB365i3lKwecYLdX800KyLZjPHVdTmtqjKQDAJJ1VfN3J7Hbvtx/3oKOqS+a7EbOnXgP+8y3z3YdaeP/3oKFOm+/cs4K/rYlGYncchiG30+qa7of7zDfNpyN3OuTrICU5/DVvvhKPmu/JbZztWMCkDkD8FM+eNRbkTrhnm/KcyvJalxfdqHoH7oAzLHPixtWFaG6kIJsjkMB3rXNbtQwAUqxN8c2YR38IB7KGg3cdmxyavWxSMo8DwiIPmvnTEPyzOOwFQfY180MrYuEDZoIXwSSs/2Y/AJqbJmYj22mdgnYtCLA4HuND8ynOVfOFPp+bT2Jht9sYe8CyarcvLinpDDTh8pD7Pgvwes58g5depGk1sJLYSJRcThk8wuyA2r4tws9y82vgGm7g86YtOc4tEjBko45Q85fFver0uVXzeSV5Aeya+ezCXlmCtIz+Fc9yIwOA4VdZGO97MPdNDlwn4ovdXziR9zA0/T7x9SlEJSH6iPj78Syu4PNzHdwHdSEK5nv3x6IZ86KZVIOyzmHKfM+6WZj67lrfMT9JiTUObGoxa77rDT9/Bb9zRCwCxp4HbdgRCQA8JfvTTTuzXRaBtWF+dJg29GRrsRN9hD4OBD+Wz1kBSF7E/tQCMNZmqzq/UDv2bKbgiuoBCNTlXq7j/k53sfyYmeraq71vfgp2RgJuY+k0nigwC8NVMt/phd1cOPTjeOCPahWhsv/scnQCgNMQV4Qm56wlm0DkRfDr5hN79ptPNjEh8nKWLIfmPZ2EtlyxzkNXpuSAz0PjM++A1kJLNNegAMChLaz46xVZibEfJ7HHOulnWXzgVbgxVwEqpwC+Or2H/Ego+Lo/NwEAl/BeDXkO2qqLbls1IG7T9o6IAzdgSqy0m3DLjphPQost2azGcSJ/a/dzNu7aANmbGQD0fij9iJdQ+I+bD5EVxZWgULGV01Fh0nOiOWfws5uWrBTL4zPmzDfe0HZUZUv2CNyQg8ehFhXz6bShFjyB97/XQTtTQMviY0/hOtmCnfMbh63VzwvYRX00truHF6GV18X03xCNy3Cb056f4P5OmJ/BMI3rPWo+c08FnyQp5wmy+pKEqtaCaGoyradh0sPJ+WgnYBadvYv3fMV8aJqjzl324M/sfrbnNRtw9mAGANsjrlhCSgZ70Xx+dtl8tx4esE+hmc6ZL9jJCcnIUehk++fFomiZb7M1FRy8VhDFCM3LJWixF7uQSXHgY+v5oM9bEz+f2WuMO+fNhxeHZdvT5va3oNF/JK4INTndszuwAm7g+g6KSzZvPszrcuq/Z74ISgHJWVDncb86TLYp2n4nLM8oiAbEAnCfmE/3XsE1fgbBv4n7HsgCywBguJUTn5+H6Qj+j2xvU3zFNv7/Cn7GbrAk6WIhBNmE0n3tMrteBlhEeOgfgLjL29beAc0uwrUCDcFDT/M/ksO+2eEeGc1gUdByQPRNWbId9rDCz9Zf10AERn3cgAh786olx3QRCGpCvC1DMObFWlswn+34FL7XIapt7PFF8/0Jd2vxfpqWbHqzAkA7LxGKdXF31oZ5BhkADL4iYfu1HRYbO142P8p7A9qqBP/sNh7mJ+aLc5SxZ67BIpD+B5bsg78f7+fMwJ+K8DOU1C1fnxGMdyAQ3zIfy74Cy8TM9zwgKUYAq5svCtI1inJh+r/r0Gavma907AUaefwua9/D4Zs6J7Iiz45EaVsALg6Aj4BJjqO2y2esIdwOG4uSE1LScdM6j1LLAGCHTf858ceZqFEXNvsuvqdpxnRVEjhOCH9lvqxzQci6It7jVes8BCMHXzBvW5OFNq17ai5BYB1gRMKNf8N2WCdwDbfErGcO+071B6hA6C7Db38ipSuwCBC4ZMmZfc0AKNhijcDNRiPfMT8KTQGexN+q9e8juVOLHa9qAS8QB67ftlYGAMNpf7Ly2gZ7FQfwFA5zPTDl8jhsRG124nFg8F3z3XrYH+5wH9LseZiEK0Iurlnv3HwOKy0DmEgsMl35CbD8EQTkV7AQCBI7VfnIPnaX4OKcMV9F109TOmvoWdwPszMp+KzQo9Afwt7StXrMkmPnmPV4BYC3Le06QiBo2w7NssgAYHjtz4GkJfGDb0GDPgmgYCdYNt2YhrZm7jg1ek54AHY4TnMt34XZfFeEeb2DZsgFn8OiE51WvAABYZ5ACcJyxXxpq+arj7I/ADPq3P65kNcLsI7aKUH5mPkZCHQfyE/MAHjZU/BlAMycbZ21GAlpWhEC94FdGQAMtmYC4eeh0666TqMfxEHjIA7t27cf2v02QEMrDqnBiimv5yi09pfmp8yw66wWIGncmvF9t1w8/bT5OD4tFoYg54WkY6vyI3if27AmRrU2IHgO0P4FAlvqI4CxgOGU3G9Lvj6APXoLBONcD/M5EmtEcwQyAMhWIiQ2bz68xBg4p/PoqGnWA2yIZq7jsD4iJh6JsEt4z5uWriFlBDP2AA42Y9uxmLyHLdlSm+HEdfNxcHUd6OZMCWdAITgOAjEH8PgYQDAq4ovDRly/hRfho6cJt2n78YL5hB+3Hy71+id2Pw26lZLH0EGgeRtvb8QMACYMADjK6SDMfZdF9xSEjZ12yzDxP4BZSxM7L4e9Jf68sxLOm4//n4e2SvN8DkLYF6A1T4ive8h8g0hdj+Jz6DJcNT+umpOHXQjsc7lOpixzfNk8wIBViqNY6wAUZ9G8DVN9v/WuDSCgkfxjNIXumnMlnrb+vRVU+LVqc8rG0xcxA4AJ9P9pTnNmnJv3/polG0iSXX8aWuef7f44J6b3zluyA88KyMC7EOYl+MGvgEvot/Lmx0udgJaeCayLZpe/m4YL4q7/Cwg824rRB86Lhl3B51DwWPg0KgCgMNMKcO7Gf7PuQ0FJ2q2an9fAKjpyFkds66j1Xi7FjPmhnDPC27QzAPjmLmoUFv0489+x8K/32UN3cH+MA/W2+XFbrCC7DZ+XHYjYsMP93t98/fpTWBj9Dm0RGv+4+erCZgph4yCQg/iepb+bALInYc1cgna+gs96CPddttGz0xXsixO+n+Ge3rTuUQG2Q2dItCo8BvezJQRmmmc9I4QiKzozAPgGL2b+HYTG1NLafssJ9hs4yH8NbX/bfH45s8yY7smWYf8mxOGz1rnnnfv5Bfz+o+azBdOuJn5/xnwNPjP9jpmfITgFd8YJG9OZ58yPBxv1Ynm0u+e/B+j80LYW15C049gtVtAxM7EInuKa+enC/cCUiVgzwvns5BCYDAD2gOm/HwJ8Emb2GTH10y7HRP/516//bn5yLnvekROoysHmrHlHxJ2DxcF89pb87Dauj8U4g3bJZcIJ38PMzwykz88SZKYbs0tObKPtCajXxIEXRVhPD4NzMEvWLmhSDMtqmR0ZwXpxdfKnLf0gl7wlOzdNPaiHOwOA3otjudmp9iGY2ieGPBTOnP+R+ZJN+qtN0VoMPzUEKNzv/9Y828+U0CKu76FAK6YFAC11Zs+AS7i2qzgfB0BokgTNWbIn4E6Zxk3ctxNAlzr9v75+/QX2v9FBc2vSVVXuy133O+ACfmDJfoed9qMhQMooQC4DgG+m8B/AwTmGg+cY5RfhG08PySW8bL7t1qqY/fXgIDN3gEMll83XH8wCCPbjNUwdPouJNBPuW3ApqtDAF2EVkLwkQKmpvZOraj7JyUVGfgmw04EZLFnWWYgNAVTm//9vXPfr5lOs2wFotnH/1y3ZJMQyAPhmLc5tdz7/URy6Z+GHnt2mRnDWxDM40Frbr2m2rPVuCgiUBQBY1VYQjZx2Yi5j3NfxYuiwBcD7d+YnCjPNmDHxliW7Ce/GWocFsgBe5HFYUrxX+ulslKJAUMP1U8D/zu6HGF+CS7AgFsQaSE5WAGpDD4YGwy7OmpffsO2PQs8AYIIIv31iAZyGYDw2os94FFpoWoS4EyFVs2R1G2fYM9xVMt9glLn6dbEqosBnZjPPj4XUq+A9mM58Bn/7PgCCZOX6mJ4HS6mXIKA/BTCflj1ZENKuKBYRAXTdfLm1A9IvwOkcFhlQ/oAVgEwlPmi+TXzoEqi7xv7/Ndu9mZEZAIx4cewy68cXoHXOjfAzmDmo2qSb9qZLwBAkW3ItgBhbsGTnnkX48Z8GLgMZ/0+hBas43HEHgTuFa/wt3ssd/E49A3ZrsVpwCSa6c6FOmi9iOiYEqXY5VgFlVV9T3k87LDF7kG4YE4k4QCWyZBt33a9wsAw7AVcm3SLIAGCrj14Ss3JauIBR7lW7g7aPe/jqai3Q/J+3ZGw8lsPrNNjvITAFMd+ZpdgQUu+wJSfJUkic1nvekt12x6XZWCzEuXofAghfMp8Dccz89CL6/kwO4p6zhl477TSDZ875fpGY/vstWQzVFrJWXQA27yCwsI1785sEAFEXk7YdmKOTuh/h5B4z3y13VOEgToZVvzHuYS0cMd9tNhZtVMahPy7vQb91Af5szbbWkMdCJB7rIXT8HbpEbHE9LivAEaHMVPwFBPVp3MNZ7GlbrCFqYU27Vq1N94rFUiymMnx9UM4C265zlFo1IBu16Eq7OE8BCGoPKgDkZZOmAj9JiRJlthuWvmPqbu9HITgojLdfgiuw3dWE/80CnH7ttJh2/CUO9F1o7VgOY9gAg65AUczQsOddQSyJuAsXwqEXWgi1MabnxsxFujQsw3Z78hyAgNfKUeccmU2rICf3UpLf41AVAsAsQOWkkK5NWB8fg0NYtmT4NhYCWQd88DzpRKA9DwD5wGyiH6V965XZbgVESUU02qTUXEcdhJ/XfAf+sNMIh7b5OZ/BD18XLdKLPa5iXw+aT9D5CqCwT/YyJ6bvw/DZFy3Z7VYtALaYrpkfhWZiXdCNoFYtCm8xLpO2gmdRFCXTxDU6AHgDloAT0stwGdbMl2QrQJLrOWh+KOoMwFWLuxgKZCfhQ3gvFk6Fff/z4jpYYPXemzRLYFAAYOvmefFzZsVf7hSS0UGJHJzAoQkbYlaOGwhylmTOCVqMw1+A0P17S1+vHy7HYv+T3U9NJQD0q1JjDsAj+LckWmyfsNwm1pY7xM+ar22vytfa5cbt+++gQRkbZ43CJ+ZLfWkZsa1W1QYYQDnCFeNeb1kydk9T3LVRc01SHsXzugSwZOai5gWUhOTlWXbh0GeE/Os0+s1ZCo8BHMkpsIozEiuYnAGfE/er00i5iQeAgvkGGCShZi1ZNKG+ImvR2XyRrOttbMCq+am28+ZLUctj3JxITDc1O+vyoC/ADTjZheO4h/dZDMCEXYB+CoFbCgCg18gn97ppPn9gFhrrMPaX4cJCQAQ6kHpB3I4WBOdjYfQ3zHe/JdFZFXM1CogxAg7DbddstE1B0hKoyx1cSzYt+b75HgjP4EwxZZoA2BRLgAJ7AFbEvHXveMTPZMUlFYTO78tbMhwZiVvRFFemtRcAgAdgPzaI4aeZQOvP4mdO6F80H+cuygEkcp8Het40H2NWAoWlneOwAHRSbxiey8kD7bbWcI86NqpqPsHkIn7OjsH1Hua/atwI+3QU5v1hOYA06/cJoNC6UpO+APPY7fP/E1DjPMAvAyAsBBYeQ4YF8wVCDvDfHwNot0WIGuKqUSC/B5Bm56Zjlhy7vmR+wChDfg8Hwh/3kAnlh+iCkWzNi9tGIAhBgOnG8SQDAEc2syKMXWVmA+ScEqLkHDY/XFPwtQ7iED4DbXjZkrPv+L7LYyCblLjRHnqMDDgQfMm6d+rhaC6naa6bD5utCXt9W+5NhT+MnBQsORaM3XzW8B7cp7ocJJqZbA4a+p+0DpwwPInf2TBfhNQMgC4nz/YY7m3efHlt03zV3DisNt4r3UvyS2WALPspzMo5Zbx/M4iKFMRn75f+yzJjWhObQjQSAGo4z40OIEAXujYJfEChx2HmtJuj5oddzpmPhdK3z0no5WiKz5wGALiN+McujKmG33YLBDSnPCeHYg5C/0fwq3stt2enQdSVRRjv4f+WRVs0Zd80G1DbWM+Kn0pfNcYBv2e+hmAZfz8PzdhrqEYbPmwYhYhEw7PpiQO9M3heHFW9ar6HYLdR5bvJCWxYMga/jr25imt33MlDQnoumS/GIgC7r29A0eV6mOc8q9cAxGUhs6uWDEGGBV5F4dGmhWdoTRoARBJ6cqTIEWwMTVFFXLZdZlx5EE1wFhaDTjTJBX54bLs3lSUKhL8o/rbrTfftlO/DcuGb5gdVLkMwGZem358LoiX87Ck5JHxp81GOnV4Sks8BxGv4bGqybn4s24obOIGSaCNqfTYcfQJ/c8N8mvEyrvmqTUZoi+PAKmJx3YHrtd989+aCWAFTQiKSV6gD5KcD10wHcX4A65VNUcsSCdDR7prfoc1L8wLulTG5uz0BgNlhx8T0m5MwTFlMHgIAU1W/grZIux4yP+V1VpjUnCUztWq7pE34sAsiCKdFWNKuk/h7AsCamNyNAPAKlszVL4qW0Pz2nAAvR17dAtAs41qXAVRPwN0qWbITjh7IKfA1iyA3WQI7BxA7az7k9RsIU0Osj00bX31AL5dAh4Myz4F7yPHt+81Xc1bFf78Bt/RZPPeSmPzu91wxkist/hQAsGpbx8XHARhEAdCrhTdtY45+FTp8T4b5MDZrH26AITuy9QoATC29gDDMQsrP15JaImMsxCFNu3u7YCq1AxDQppKHB3yvaTGR1wQENgLWPxdYH3nxVafk0LREW1TFzL1rfhyYe+/PIaAfwG05an5isTa5nBWf9GkQYEu4liNC+N0BYXseZm9Znk3dJjOrsyl7zVZrBNRjAoAz+F2G8ejWfAXAY81FCXt6GxbPHbzvvT4uUNuSpd0NeZ45sfLGOnwkBACOtiJhx062nGRzz3x+s5qMbML4GQ7hyyk//5b5yqtG4IPuE21HP2unAUBJuTwOyekh34v99XhYViw5oy4Sczx0fzR/oiauVVMIqGUIpAIjk5bczy6JBaFCMAtA43OeE03YFOtuGdbFDbzniu2tUtdWYGIzIlC1ZF7Kmm2dKHQNoKeJbExgo+WzKcRfGutSCcecgH1hUgBgynxK5H4h/Coi/MvYsPVAYBuiUX4GP/RQCqTmVBsdwEgykGwpW13tZPcZs2St+3aHQqwLuC3h61VxL7SiLOQ8osAC2pTrY4egspit3fa2KfyJgosy0cx+ywvgNMTXLwtpudcXAXDaktOcNgP3LJwUFHfQ5MwNaXfhkvLiyimxHQWEYl64iHjcAFAUgZvBz+qibUhk0c+qCwDUhcT6NW7qL3qAgNtQ16eN7bAJKFMBSTMjJNjaDhNObUuGkxgnv2PphlUq2n9kPkmGSU+btrXNlEYeosACyAXaQw9ePMS9tYUwK1syqzAfaKmGpe+jvxdWTjiVWXFb+awJdtpQNORNNIqibqsCbFgXo7UlU5ZMkc/Lz3PjigYUBLW4Oex8QrNnVXzYddmoutx83ZJx1X/BoXdps69acjiFE4Sf2/1qLg5hZMFK0ZIJJ1OWzBPYacZZa7rLuIfzINbS8hoO0H4JX/JuYPrHokU0ySjq4BpYcABHLYy0Er4JKyfKpWTJBqf14LnXe1h/KujK0yhvU7RkKnCYTBYFABL+31gAIBeYLG0RglD4NwMtpLXR2p2V/eTfAxG1iE2/CRb1jvixDbmGOBCIYmC27bQbsGHJJBwHAL8DkOX7/L0T9r/B79/EPa52OUyxPeD95iYMAAq2Nc9Eibp6SkZeKyM1U3I2eJmAvXZ+bloyB2QiACAS04SmcEsIkrKQHp1MUCZT6GaSOLxmvpNtW8gU+pd1IcO066xm5BFZd2NAA7P39DP/HsL9OviRcG2AIf4HWDbunq+bz5rL1vhX1EHgYks29ugHyIwMzQtX5gjVU+C9zprPemVa+wW8bgnBygzMsQp/CAAq/BXR4prpVOuzSQ1hpmv4esaS8WhFW5IuDLvFHfwojcsXbOfTTmNLdo2hr+jCQC7C8RQeMMNIHO31MSyem3jYd+0BHy29x1bcxeoK+yb2kpVZ8+nxx3EWnFJ4xnztSxxYsU/C0n0PluFd8/MUxt5uvBAQRQ3zbDuZ4Ipo/jTajOEXgsCmJUNbnTqoUvsTCDjeWjPkdrM/u6aYErGXodXfMd+Oq2E+3LeC32F8ODPvJ2dpByDN0utU9NXNemBmpgN/lzfh8l1+Au0fi+vbScZc/sGP8Pe/EOUYTQoAUNMxNqpxUm19NIgv3RAg0f8Pza1IroMxUb40iy2XwgcfNQiwcqwMwSZJWpSDpRVhFXuAR0nvcQCg1cn6h8i2Fn91C8dpborT/i4z1A0tPWr9O1vxvLv3cPkxV3CWCsHPxwoAYWfTvGi/uiXTV9MQLmE7sF7NI8L4s5ImU4F5Fo3p8DChZCWwRMIuO9maXACoCVCXLFmFqZxTu4vvzwIplyb9BoR/kEIo9lh0GYbnLdnPIB43ANAnodbPixWQJilGK/nC4QytFACigqQJF9rrTk22cW1YKyP19uxiqfC6+VC3nl3tnhz2T9TiLCfAjw9xDlh/sa/DOW9PCgBURZA1I866CJ5mPGk/wCjwizS5pt3HVGoHYKCjq7LQWbaGXTXztRkMLbesM8ncCmRkSv7mkCVrVtIuygRHmatMjJ0DMEu2v8pbMr5vHfxxVjSFs9Sn5HfZoUXz+bv5yaHLQNImZ9+QOW3Z2nHrbQ3ntABtHpZhF8UkV/K5IK7tnCXnMaRdefBJX1iyvXhjkgCAIa9ioG21nDEXmETOpFk03y6MtdcsiGE1HF9sV1UXEz/q4FvHIvStDACyNYLFMmpyXEU5g3kBAZ49bdZCsGDh0CBWAM+1q6y8aL6idsMmqCFILH63Fi6EgydZJTdvvg+gI0RcvNOVlj5qfgSzE34XOnO58S4Zgn0AmRuvTTHDHHkTlNXoQbayNeyiCc5CoBlLdrQiCBAANEGOZPU1nOFHUprvfF9X+OZCgDfMV9VWxr0hYTmw1i0XghvQajKOpj6KjXA5/39i92vJO60/sPs16j8HGLA3HusKWnI9mqoZB9ZJRsBlaxSuwAqEed58s5W28AFq/ebFpWVC2LvmuzI3evj8JBUd6/9/7X6y2E3zo+FbkwYATAZSs0c1Mv1+Z/a7hAjHiL759es/AU27LZcI8Zbdr6pzfQBdV1rGQ7XUVzvv5uSaWpYx8Nka3WLTkLr5TFXV2IUAAAgcNQjuv8H6/R5AJLJkBiCnMLuM0PcAGBeh/W/bBA0IieI47gQK7PxLRj8KtP8BCL8rkPkr800l0qwKNsQVzVzCZnCiq1YBFsVUY/nqvcwNyNaIF5VasQMPpT0i2UxlAcrPWb8uHOiSgjgnYMp8VuiX0PyXROiX8LOJGRFW6GIiNSyZHKF9zOj/cwbA3ICf6f7+D/E5fyvuBgmRKDC7lJzMhD9bo15aFhyOtdNpwEyMY1i6AoE+H7gSG+Ljs4qWX5cnzYotdCFK6uY70OZsa7+6GQDAo9v4bMcbfCGCHdnWSkNufN2yFNts7dzimW9aMicgH4CAZswyPbzQRVkx/E2yeyLPb6EHUVITKyAO/COaRNuZLuwsBze84bL53moc26Q+PxOU6tk5zdYOr7YAQd6SOQCcwRCS4mZbuynpa6JD170EuGbJDihtS5ZUtm37xTmOFGRHWmYJEgyo+ZmHn5n/2dpNIKD12WlUXKdW6yofe2b10+BVSzblYHZeAz7NNRAiw655EChfmG+PXA98rkqm/bM1ZvfggU1Ay6W4+U3RwhXxbVxjg4+2uTk5S/ZPs0D46UNl4b9sZWsMFgBBgDP6NGfaEYG/gxn/ypCfTzKlKa+6JRtzZto/W9kaIwCoJaCVgYwK/J3dJwSfG+LzHQF4xXzXIS0c4hy9LP8/W9kaMwAQBCiQTdtatfenAIG0eQGOQ3AZgS41UmOmnKNXtoz4y1a2JgYAuKqWJAMZpnMxUTft1yX5OGZ/X5e/dxrekYdudoCrD7hjvn++Vgxmfn+2srXDq1MqcOq/henP1Ej3OgzhdwlCLk3S1QAsmk/ycem8jvG/aL4ykCPHOEGHnEC2spWtCQYALscFMEd6vyV7AyzCJWCHIZ1tpymSfG1mZn+2srW3AEDdCR06OYfvWWShQxYZ4mNThHDGerayla09BgBqEbBHIOfRa/dhphnzNfHpktnKVgYAw61OM+8JApnQZytbY17/X4ABAAqHLtfVaWeUAAAAAElFTkSuQmCC",
minimumSpeed:22,maximumSpeed:25,minimumParticleLife:3.5,maximumParticleLife:4,emissionRate:15,radius:1,color:[{startAge:0,endAge:.7,startColor:1,endColor:.2},{startAge:.7,endAge:1,startColor:.2,endColor:0}],scale:[{startAge:0,endAge:.4,startScale:.1,endScale:.66},{startAge:.4,endAge:1,startScale:.66,endScale:3.5}],applyGravity:r.CONST_G,randomXY:.08},{baseScale:110,
imageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRFNDI0RkQ0QjhCOTExRTk5MjFDQjVFNDRCRjVFQUUxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRFNDI0RkQ1QjhCOTExRTk5MjFDQjVFNDRCRjVFQUUxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REU0MjRGRDJCOEI5MTFFOTkyMUNCNUU0NEJGNUVBRTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REU0MjRGRDNCOEI5MTFFOTkyMUNCNUU0NEJGNUVBRTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz58WpwXAALwJUlEQVR42uy9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",
minimumSpeed:23,maximumSpeed:24,minimumParticleLife:1.2,maximumParticleLife:1.8,emissionRate:1,radius:.5,color:[{startAge:0,endAge:.8,startColor:1,endColor:.8},{startAge:.8,endAge:1,startColor:.8,endColor:0}],scale:[{startAge:0,endAge:1,startScale:.3,endScale:1}],applyGravity:r.CONST_G,randomFrameNumber:!0,repeatX:.3,randomXY:.04},{baseScale:120,
imageUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWMAAAIACAYAAABXSg2IAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4MGY1YmUwOS04N2QwLTQ1NGMtYWQ4MC0zN2RjNDcxZDg0MDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEZBRkU2QjBDRUMyMTFFOUI5QjA4MUU4QTg4ODRGRjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEZBRkU2QUZDRUMyMTFFOUI5QjA4MUU4QTg4ODRGRjMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphZjA5NGQ2OS0yNDVlLWM5NGQtOWMwNi1kYzJhODI3NzgxZWIiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyZDc5MjEzYS0xNjE5LTExZTktYWE3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",
minimumSpeed:23,maximumSpeed:24,minimumParticleLife:1,maximumParticleLife:1.3,emissionRate:1,radius:.5,color:[{startAge:0,endAge:1,startColor:.5,endColor:.4}],scale:[{startAge:0,endAge:1,startScale:.3,endScale:1}],randomFrameNumber:!0,applyGravity:r.CONST_G,repeatX:.8,randomXY:.04}],r.water=[];for(var n=0;n<r.particleOpt.length;n++){for(var a=[],o=0;o<r.particleOpt[n].color.length;o++)a.push({startAge:r.particleOpt[n].color[o].startAge,endAge:r.particleOpt[n].color[o].endAge,startColor:new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.alpha*r.particleOpt[n].color[o].startColor),endColor:new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.alpha*r.particleOpt[n].color[o].endColor)});var l=new s.ParticleSystem({emissionRate:Math.floor(r.particleOpt[n].emissionRate*(1+r.originIntensity)),emitPosition:new THREE.Vector3(0,0,0),originYaw:r.originYaw,originPitch:r.originPitch,minimumSpeed:r.particleOpt[n].minimumSpeed*r.originIntensity/r.zoomGis,maximumSpeed:r.particleOpt[n].maximumSpeed*r.originIntensity/r.zoomGis,size:r.particleScale*r.particleOpt[n].baseScale/r.zoomGis,minimumParticleLife:r.particleOpt[n].minimumParticleLife*r.originIntensity/1.1,maximumParticleLife:r.particleOpt[n].maximumParticleLife*r.originIntensity/1.1,imgTexture:r.loader.load(r.particleOpt[n].imageUrl),color:a,scale:r.particleOpt[n].scale,updateCallback:r.particleOpt[n].updateCallback,applyGravity:null!=r.particleOpt[n].applyGravity?r.particleOpt[n].applyGravity/r.zoomGis:null,randomXY:r.particleOpt[n].randomXY*r.spread,repeatX:0==r.originPitch?r.particleOpt[n].repeatX:1,repeatY:r.particleOpt[n].repeatY,radius:r.particleOpt[n].radius*r.radius/r.zoomGis,camera:r.camera,randomFrameNumber:r.particleOpt[n].randomFrameNumber});r.water.push(l),r.add(l.particleSystem)}return i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].destroy(),e.remove(e.water[t].particleSystem);e.loader=null}},{key:"play",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].play()}},{key:"stop",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].stop()}},{key:"update",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].render()}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e);for(var i=0;i<t.water.length;i++){for(var r,n=[],a=0;a<t.particleOpt[i].color.length;a++)n.push({startAge:t.particleOpt[i].color[a].startAge,endAge:t.particleOpt[i].color[a].endAge,startColor:new THREE.Vector4(t.color.r,t.color.g,t.color.b,t.alpha*t.particleOpt[i].color[a].startColor),endColor:new THREE.Vector4(t.color.r,t.color.g,t.color.b,t.alpha*t.particleOpt[i].color[a].endColor)});t.water[i].effectOpt((r={size:t.particleScale*t.particleOpt[i].baseScale/t.zoomGis,repeatX:0==t.originPitch?t.particleOpt[i].repeatX:1,originPitch:t.originPitch,originYaw:t.originYaw,minimumParticleLife:t.particleOpt[i].minimumParticleLife*t.originIntensity/1.1,maximumParticleLife:t.particleOpt[i].maximumParticleLife*t.originIntensity/1.1,randomXY:t.particleOpt[i].randomXY*t.spread},_defineProperty(r,"randomXY",t.particleOpt[i].randomXY*t.spread),_defineProperty(r,"minimumSpeed",t.particleOpt[i].minimumSpeed*t.originIntensity/t.zoomGis),_defineProperty(r,"maximumSpeed",t.particleOpt[i].maximumSpeed*t.originIntensity/t.zoomGis),_defineProperty(r,"color",n),_defineProperty(r,"radius",t.particleOpt[i].radius*t.radius/t.zoomGis),_defineProperty(r,"emissionRate",Math.floor(t.particleOpt[i].emissionRate*(1+t.originIntensity))),r))}}},{key:"hide",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].hide()}},{key:"show",value:function(){for(var e=this,t=0;t<e.water.length;t++)e.water[t].show()}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.color&&null!==e.color&&(t.color=e.color),void 0!==e.alpha&&null!==e.alpha&&(t.alpha=e.alpha),void 0!==e.originPitch&&null!==e.originPitch&&(t.originPitch=e.originPitch),void 0!==e.originYaw&&null!==e.originYaw&&(t.originYaw=e.originYaw),void 0!==e.scale&&null!==e.scale&&(t.particleScale=e.scale/5),void 0!==e.originPosition&&null!==e.originPosition&&(t.originPosition=e.originPosition,t.position.set(t.originPosition.x,t.originPosition.y,t.originPosition.z),t.updateMatrixWorld()),void 0!==e.spread&&null!==e.spread&&(t.spread=e.spread),void 0!==e.originRadius&&null!==e.originRadius&&(t.radius=e.originRadius),void 0!==e.originIntensity&&null!==e.originIntensity&&(t.originIntensity=e.originIntensity+.1),null!==e.isGis&&1==e.isGis&&(t.zoomGis=1e3))}}]),t}(THREE.Group);s.SprayWater=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e);var i=this;i.size=t.size,i.alpha=t.alpha,i.visible=0,i.birth=t.birth,i.age=t.age,i.minimumParticleLife=t.minimumParticleLife,i.maximumParticleLife=t.maximumParticleLife,i.minimumSpeed=t.minimumSpeed,i.maximumSpeed=t.maximumSpeed,i.scaleAry=t.scaleAry,i.colorAry=t.colorAry,i.emitPosition=t.emitPosition,i.radius=t.radius,i.initSize=t.initSize,i.updateCallback=t.updateCallback,i.camera=t.camera,i.life=0,i.initVelocity=t.initVelocity,i.normalizedAge=0,i.originPitch=t.originPitch,i.birthplace={x:0,y:0,z:0},i.velocity={x:0,y:0,z:0},i.position={x:0,y:0,z:0},i.randomXY=t.randomXY,i.applyGravity=t.applyGravity,i.randomFrameNumber=t.randomFrameNumber,i.color=new THREE.Color}return _createClass(e,[{key:"updateStatus",value:function(e){var t=this;if(null!=t.birth&&e!=t.birth){if(t.age=e-t.birth,t.age>t.life)return void(t.visible=0);t.visible=1,t.randomFrameNumber&&(t.age=t.age+50*(2*Math.random()-1),t.age<0&&(t.age=0),t.age>t.life&&(t.age=t.life)),t.normalizedAge=t.age/t.life;for(var i=0;i<t.scaleAry.length;i++)if(t.normalizedAge<=t.scaleAry[i].endAge){t.size=t.initSize*s.Math.tweens(t.scaleAry[i].startScale,t.scaleAry[i].endScale,t.normalizedAge-t.scaleAry[i].startAge,t.scaleAry[i].endAge-t.scaleAry[i].startAge);break}for(var i=0;i<t.colorAry.length;i++)if(t.normalizedAge<=t.colorAry[i].endAge){var r=t.normalizedAge-t.colorAry[i].startAge,n=t.colorAry[i].endAge-t.colorAry[i].startAge;t.color.setRGB(s.Math.tweens(t.colorAry[i].startColor.x,t.colorAry[i].endColor.x,r,n),s.Math.tweens(t.colorAry[i].startColor.y,t.colorAry[i].endColor.y,r,n),s.Math.tweens(t.colorAry[i].startColor.z,t.colorAry[i].endColor.z,r,n)),t.alpha=s.Math.tweens(t.colorAry[i].startColor.w,t.colorAry[i].endColor.w,r,n);break}t.position={x:t.birthplace.x+t.velocity.x*t.normalizedAge,y:t.birthplace.y+t.velocity.y*t.normalizedAge,z:t.birthplace.z+t.velocity.z*t.normalizedAge},null!=t.applyGravity&&(t.position.z=t.position.z-t.applyGravity*Math.pow(t.age/1e3,2)*1e3),null!=t.updateCallback&&t.updateCallback(t)}}},{key:"init",value:function(e){var t=this;t.birth=e,t.age=0,t.life=1e3*t.minimumParticleLife+Math.random()*(t.maximumParticleLife-t.minimumParticleLife)*1e3;var i=t.minimumSpeed+Math.random()*(t.maximumSpeed-t.minimumSpeed);t.normalizedAge=0,t.visible=1,null!=t.scaleAry&&(t.size=t.initSize*t.scaleAry[0].startScale),null!=t.colorAry&&(t.color.setRGB(t.colorAry[0].startColor.x,t.colorAry[0].startColor.y,t.colorAry[0].startColor.z),t.alpha=t.colorAry[0].startColor.w),t.velocity={x:t.initVelocity.x*i*t.life,y:t.initVelocity.y*i*t.life,z:t.initVelocity.z*i*t.life},null!=t.randomXY&&(t.velocity.x=t.velocity.x+i*t.life*t.randomXY*(2*Math.random()-1),t.velocity.y=t.velocity.y+i*t.life*t.randomXY*(2*Math.random()-1)),t.birthplace={x:t.emitPosition.x+(2*Math.random()-1)*t.radius,y:t.emitPosition.y+(2*Math.random()-1)*t.radius,z:t.emitPosition.z},t.position={x:t.birthplace.x,y:t.birthplace.y,z:t.birthplace.z}}},{key:"destroy",value:function(){var e=this;e.velocity=null,e.position=null,e.birthplace=null,e.emitPosition=null,e.color=null}}]),e}();s.Particle=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=i;return r.vertexShader=r.getVertexShader(),r.fragmentShader=r.getFragmentShader(),i}return _inherits(t,e),_createClass(t,[{key:"getVertexShader",value:function(){return"\n                attribute float size;\n                attribute float alpha;\n                attribute vec3 color;\n\n                varying vec3 vColor;\n                varying float vAlpha;\n                #include <common>\n                #include <logdepthbuf_pars_vertex>\n                void main() {\n                    vAlpha= alpha;\n                    vColor = color;\n                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n                    gl_PointSize = size * ( 300.0 / -mvPosition.z );\n                    gl_Position = projectionMatrix * mvPosition;\n                    #include <logdepthbuf_vertex>\n                }"}},{key:"getFragmentShader",value:function(){return"\n                mat2 rotate(float rad) {\n                    float c = cos(rad);\n                    float s = sin(rad);\n                    return mat2(\n                        c, s,\n                        -s, c\n                    );\n                }\n                uniform sampler2D pointTexture;\n                uniform float repeatX;\n                uniform float repeatY;\n                varying vec3 vColor;\n                varying float vAlpha;\n                #include <logdepthbuf_pars_fragment>\n                void main() {\n                    #include <logdepthbuf_fragment>\n                    vec2 pos = gl_PointCoord;\n                    float offsetX =(1.0-repeatX)/2.0;\n                    float offsetY =(1.0-repeatY)/2.0;\n                    if(pos.x-offsetX>repeatX || pos.x-offsetX<0.0 || pos.y-offsetY>repeatY || pos.y-offsetY<0.0) discard;\n                    vec4 img = texture2D(pointTexture, vec2((pos.x-offsetX)/repeatX, (pos.y-offsetY)/repeatY));\n                    vec4 color = vec4( vColor, vAlpha );\n                    gl_FragColor = vec4(color.xyz, color.w * img.w);\n                }"}}]),t}(THREE.ShaderMaterial);s.ParticleMaterial=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e);var i=this;i.showParticle=!0,i.particleSystemManager=new s.ParticleSystemManager(i,t),i.repeatX=1,i.repeatY=1,i.imgTexture=null,i.uniforms={pointTexture:{value:i.imgTexture},repeatX:{value:i.repeatX},repeatY:{value:i.repeatY}},i.setOpts(t),i.shaderMaterial=new s.ParticleMaterial({uniforms:i.uniforms,blending:THREE.NormalBlending,depthTest:!0,depthWrite:!1,transparent:!0}),i.geometry=new THREE.BufferGeometry,i.particleSystem=new THREE.Points(i.geometry,i.shaderMaterial)}return _createClass(e,[{key:"destroy",value:function(){this.particleSystemManager.destroy()}},{key:"stop",value:function(){this.particleSystemManager.stop()}},{key:"play",value:function(){this.particleSystemManager.play()}},{key:"render",value:function(){this.particleSystemManager.render()}},{key:"hide",value:function(){var e=this;e.showParticle=!1,null!=e.particleSystem&&(e.particleSystem.visible=e.show)}},{key:"show",value:function(){var e=this;e.showParticle=!0,null!=e.particleSystem&&(e.particleSystem.visible=e.show)}},{key:"setOpts",value:function(e){var t=this;null!=e.repeatX&&(t.repeatX=e.repeatX,t.uniforms.repeatX.value=t.repeatX),null!=e.repeatY&&(t.repeatY=e.repeatY,t.uniforms.repeatY.value=t.repeatY),null!=e.imgTexture&&t.imgTexture!=e.imgTexture&&(t.imgTexture=e.imgTexture,t.imgTexture.wrapS=THREE.ClampToEdgeWrapping,t.imgTexture.wrapT=THREE.ClampToEdgeWrapping,t.imgTexture.minFilter=THREE.NearestFilter,t.uniforms.pointTexture.value=t.imgTexture)}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),t.particleSystemManager.effectOpt(e)}},{key:"update",value:function(e){var t=this;null==e.position||null!=t.geometry.attributes.position&&t.geometry.attributes.position.array.length==e.position.length||t.geometry.addAttribute("position",new THREE.Float32BufferAttribute(e.position,3)),null==e.color||null!=t.geometry.attributes.color&&t.geometry.attributes.color.array.length==e.color.length||t.geometry.addAttribute("color",new THREE.Float32BufferAttribute(e.color,3)),null==e.size||null!=t.geometry.attributes.size&&t.geometry.attributes.size.array.length==e.size.length||t.geometry.addAttribute("size",new THREE.Float32BufferAttribute(e.size,1).setDynamic(!0)),null==e.alpha||null!=t.geometry.attributes.alpha&&t.geometry.attributes.alpha.array.length==e.alpha.length||t.geometry.addAttribute("alpha",new THREE.Float32BufferAttribute(e.alpha,1).setDynamic(!0)),t.particleSystem.visible=t.showParticle;var i=t.geometry.attributes.size.array,r=t.geometry.attributes.color.array,n=t.geometry.attributes.alpha.array,a=t.geometry.attributes.position.array;if(null!=e.position)for(var o=0;o<e.position.length;o++)a[o]=e.position[o];if(null!=e.color)for(var o=0;o<e.color.length;o++)r[o]=e.color[o];if(null!=e.alpha)for(var o=0;o<e.alpha.length;o++)n[o]=e.alpha[o];if(null!=e.size)for(var o=0;o<e.size.length;o++)i[o]=e.size[o];t.geometry.attributes.size.needsUpdate=e.sizeNeedsUpdate,t.geometry.attributes.color.needsUpdate=e.colorNeedsUpdate,t.geometry.attributes.alpha.needsUpdate=e.alphaNeedsUpdate,t.geometry.attributes.position.needsUpdate=e.positionNeedsUpdate}}]),e}();s.ParticleSystem=e}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e);var r=this;r.FPS=20,r.FPS_MS=1e3/r.FPS,r.particleSystem=t,r.particleList=[],r.initialOpts(i)}return _createClass(e,[{key:"initialOpts",value:function(e){var t=this;t.setOpts(e);for(var i=0;i<t.count;i++)t.createParticle()}},{key:"createParticle",value:function(){var e=this,t=new s.Particle({initSize:e.size,initVelocity:e.initVelocity,emitPosition:e.emitPosition,scaleAry:e.scale,colorAry:e.color,minimumSpeed:e.minimumSpeed,maximumSpeed:e.maximumSpeed,minimumParticleLife:e.minimumParticleLife,maximumParticleLife:e.maximumParticleLife,originPitch:e.originPitch,radius:e.radius,updateCallback:e.updateCallback,applyGravity:e.applyGravity,randomFrameNumber:e.randomFrameNumber,randomXY:e.randomXY,camera:e.camera});e.particleList.push(t)}},{key:"setOpts",value:function(e){var t=this;null!=e.emissionRate&&(t.emissionRate=e.emissionRate),null!=e.minimumParticleLife&&(t.minimumParticleLife=e.minimumParticleLife),null!=e.maximumParticleLife&&(t.maximumParticleLife=e.maximumParticleLife),null!=e.originYaw&&(t.originYaw=e.originYaw),null!=e.originPitch&&(t.originPitch=e.originPitch),null!=e.originYaw&&(t.initVelocity={z:Math.cos(t.originPitch),x:Math.sin(t.originPitch)*Math.cos(t.originYaw),y:Math.sin(t.originPitch)*Math.sin(t.originYaw)}),null!=e.size&&(t.size=e.size),null!=e.emitPosition&&(t.emitPosition=e.emitPosition),null!=e.scale&&(t.scale=e.scale),null!=e.color&&(t.color=e.color),null!=e.minimumSpeed&&(t.minimumSpeed=e.minimumSpeed),null!=e.maximumSpeed&&(t.maximumSpeed=e.maximumSpeed),null!=e.radius&&(t.radius=e.radius),null!=e.updateCallback&&(t.updateCallback=e.updateCallback),null!=e.applyGravity&&(t.applyGravity=e.applyGravity),null!=e.randomFrameNumber&&(t.randomFrameNumber=e.randomFrameNumber),null!=e.randomXY&&(t.randomXY=e.randomXY),null!=e.camera&&(t.camera=e.camera),t.renderCount=Math.floor(t.FPS*t.maximumParticleLife),t.count=t.emissionRate*t.renderCount}},{key:"effectOpt",value:function(e){var t=this;if(t.setOpts(e),t.count<t.particleList.length)t.particleList.length=t.count;else if(t.count>t.particleList.length)for(var i=t.particleList.length;i<t.count;i++)t.createParticle();for(var i=0;i<t.particleList.length;i++)t.particleList[i].initSize=t.size,t.particleList[i].initVelocity=t.initVelocity,t.particleList[i].emitPosition=t.emitPosition,t.particleList[i].scaleAry=t.scale,t.particleList[i].colorAry=t.color,t.particleList[i].minimumSpeed=t.minimumSpeed,t.particleList[i].maximumSpeed=t.maximumSpeed,t.particleList[i].minimumParticleLife=t.minimumParticleLife,t.particleList[i].maximumParticleLife=t.maximumParticleLife,t.particleList[i].originPitch=t.originPitch,t.particleList[i].radius=t.radius,t.particleList[i].updateCallback=t.updateCallback,t.particleList[i].applyGravity=t.applyGravity,t.particleList[i].randomFrameNumber=t.randomFrameNumber,t.particleList[i].randomXY=t.randomXY,t.particleList[i].camera=t.camera}},{key:"stop",value:function(){this.startTime=null}},{key:"play",value:function(){var e=this;e.startTime=(new Date).getTime(),e.renderTimes=0,e.loops=0}},{key:"render",value:function(){var e=this,t=(new Date).getTime();if(null!=e.startTime){var i=(t-e.startTime)%(1e3*e.maximumParticleLife),r=Math.floor((t-e.startTime)/(1e3*e.maximumParticleLife));for(r>e.loops?(e.loops=r,e.renderTimes=0):r<e.loops&&(e.loops=r);e.renderTimes*e.FPS_MS<=i;){for(var n=e.renderTimes*e.emissionRate;n<(e.renderTimes+1)*e.emissionRate;n++)n<e.particleList.length&&e.particleList[n].init(t-i+e.renderTimes*e.FPS_MS);e.renderTimes++}}for(var a={position:[],color:[],alpha:[],size:[]},n=0;n<e.count;n++)e.particleList[n].updateStatus(t),a.position.push(e.particleList[n].position.x),a.position.push(e.particleList[n].position.y),a.position.push(e.particleList[n].position.z),a.color.push(e.particleList[n].color.r),a.color.push(e.particleList[n].color.g),a.color.push(e.particleList[n].color.b),0==e.particleList[n].visible?a.alpha.push(0):a.alpha.push(e.particleList[n].alpha),a.size.push(e.particleList[n].size);a.angleNeedsUpdate=!0,a.sizeNeedsUpdate=!0,a.colorNeedsUpdate=!0,a.alphaNeedsUpdate=!0,a.positionNeedsUpdate=!0,e.particleSystem.update(a)}},{key:"destroy",value:function(){var e=this;e.particleSystem=null,e.initVelocity=null}}]),e}();s.ParticleSystemManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.disPickable=!0,r.autoAnimation=!0,null!=e.scene?r.scene=e.scene:r.scene=r,r.SQRT2=Math.SQRT2,r.setOpts(e),r.createLine(),r.createMesh(),r.show(),r.offsetHeight=0,r.hopFlg=!0,i}return _inherits(t,e),_createClass(t,[{key:"createMesh",value:function(){var e=this;e.meshGeometry=new THREE.Geometry,e.meshGeometry.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(e.radius_SQRT2,e.size,e.radius_SQRT2),new THREE.Vector3(e.radius_SQRT2,e.size,-e.radius_SQRT2),new THREE.Vector3(-e.radius_SQRT2,e.size,-e.radius_SQRT2),new THREE.Vector3(-e.radius_SQRT2,e.size,e.radius_SQRT2)),e.meshGeometry.faces.push(new THREE.Face3(0,1,2)),e.meshGeometry.faces.push(new THREE.Face3(0,2,3)),e.meshGeometry.faces.push(new THREE.Face3(0,3,4)),e.meshGeometry.faces.push(new THREE.Face3(0,4,1)),e.meshGeometry.faces.push(new THREE.Face3(1,2,3)),e.meshGeometry.faces.push(new THREE.Face3(3,4,1)),e.meshGeometry.computeBoundingSphere(),e.meshMaterial=new THREE.MeshBasicMaterial({color:e.color,opacity:e.alpha,side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,blending:THREE.NormalBlending}),e.mesh=new THREE.Mesh(e.meshGeometry,e.meshMaterial),e.scene.add(e.mesh)}},{key:"createLine",value:function(){var e=this;e.lineGeometry=new THREE.Geometry,e.lineGeometry.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(e.radius_SQRT2,e.size,e.radius_SQRT2),new THREE.Vector3(e.radius_SQRT2,e.size,-e.radius_SQRT2),new THREE.Vector3(-e.radius_SQRT2,e.size,-e.radius_SQRT2),new THREE.Vector3(-e.radius_SQRT2,e.size,e.radius_SQRT2)),e.lineGeometry.faces.push(new THREE.Face3(0,1,2)),e.lineGeometry.faces.push(new THREE.Face3(0,2,3)),e.lineGeometry.faces.push(new THREE.Face3(0,3,4)),e.lineGeometry.faces.push(new THREE.Face3(0,4,1)),e.lineGeometry.computeBoundingSphere(),e.lineMaterial=new THREE.MeshBasicMaterial({color:e.wireframeColor,opacity:e.wireframeAlpha,depthTest:!0,transparent:!0,depthWrite:!1,wireframe:!0,wireframeLinewidth:1,wireframeLinejoin:"round"}),e.line=new THREE.Mesh(e.lineGeometry,e.lineMaterial),e.scene.add(e.line)}},{key:"destroy",value:function(){this._clear()}},{key:"_clear",value:function(){var e=this;null!=e.mesh&&e.scene.remove(e.mesh),null!=e.line&&e.scene.remove(e.line),null!=e.lineGeometry&&e.lineGeometry.dispose(),null!=e.lineMaterial&&e.lineMaterial.dispose(),null!=e.meshGeometry&&e.meshGeometry.dispose(),null!=e.meshMaterial&&e.meshMaterial.dispose()}},{key:"update",value:function(){var e=this;if(e.hopFlg){var t=(new Date).getTime();e.offsetHeight=s.Math.breatheTweens(0,e.size/2,t,e.duration),e.position.set(e.originPosition.x,e.originPosition.y,e.originPosition.z+e.offsetHeight),e.updateMatrixWorld()}}},{key:"play",value:function(){this.hopFlg=!0}},{key:"stop",value:function(){this.hopFlg=!1}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),t._clear(),t.createMesh(),t.createLine()}},{key:"hide",value:function(){var e=this;e.lineMaterial.visible=!1,e.meshMaterial.visible=!1}},{key:"show",value:function(){var e=this;e.lineMaterial.visible=!0,e.meshMaterial.visible=!0}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.color&&null!==e.color&&(t.color=e.color),void 0!==e.alpha&&null!==e.alpha&&(t.alpha=e.alpha),void 0!==e.wireframeColor&&null!==e.wireframeColor&&(t.wireframeColor=e.wireframeColor),void 0!==e.wireframeAlpha&&null!==e.wireframeAlpha&&(t.wireframeAlpha=e.wireframeAlpha),void 0!==e.duration&&null!==e.duration&&(t.duration=e.duration),void 0!==e.size&&null!==e.size&&(t.size=e.size),void 0!==e.originPosition&&null!==e.originPosition&&(t.originPosition=e.originPosition,t.position.set(t.originPosition.x,t.originPosition.y,t.originPosition.z),t.updateMatrixWorld()),t.radius_SQRT2=t.size/t.SQRT2/2)}},{key:"changeRotation",value:function(){var e=this;e.rotation.x=Math.PI/2,e.updateMatrixWorld()}}]),t}(THREE.Group);s.PrismPoint=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.disPickable=!0,r.autoAnimation=!0,r.color=new THREE.Color(1,0,0),r.alpha=.8,r.duration=1e3,r.blendingRatio=0,r.directionType=0,r.directionReverse=0,r.height=1,r.wallTexture=null,r.stretch=!1,r.repeat=!0,r.path=[],r.sideSum=0,r.imageWidth=512,r.imageHeight=32,r.unitLength=1,null!=e.scene?r.scene=e.scene:r.scene=r,r.setOpts(e),r.createUpdateMesh(),r.show(),i}return _inherits(t,e),_createClass(t,[{key:"createUpdateMesh",value:function(){var e=this;null==e.meshGeometry&&(e.meshGeometry=new THREE.Geometry),e.meshGeometry.faceVertexUvs[0]=[],e.meshGeometry.vertices=[],e.meshGeometry.faces=[];var t=e.meshGeometry.faceVertexUvs[0],i=e.path.length,r=[],n=[];e.sideSum=0;for(var a=0,o=0;o<i-1;o++){var l=Math.sqrt((e.path[o].x-e.path[o+1].x)*(e.path[o].x-e.path[o+1].x)+(e.path[o].y-e.path[o+1].y)*(e.path[o].y-e.path[o+1].y));r.push(l),e.sideSum=e.sideSum+l}for(var o=0;o<i-1;o++)n.push(a/e.sideSum),a+=r[o];n.push(a/e.sideSum);for(var o=0;o<i;o++)if(e.meshGeometry.vertices.push(new THREE.Vector3(e.path[o].x,e.path[o].y,e.path[o].z),new THREE.Vector3(e.path[o].x,e.path[o].y,e.path[o].z+e.height)),o<i-1){var u=2*o;e.meshGeometry.faces.push(new THREE.Face3(u,u+1,u+3),new THREE.Face3(u,u+2,u+3)),t.push([new THREE.Vector2(n[o],0),new THREE.Vector2(n[o],1),new THREE.Vector2(n[o+1],1)]),t.push([new THREE.Vector2(n[o],0),new THREE.Vector2(n[o+1],0),new THREE.Vector2(n[o+1],1)])}e.meshGeometry.uvsNeedUpdate=!0,e.meshGeometry.verticesNeedUpdate=!0,e.meshGeometry.elementsNeedUpdate=!0,null===e.meshGeometry.boundingSphere&&e.meshGeometry.computeBoundingSphere(),null==e.meshMaterial&&(e.meshMaterial=new s.WallMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,blending:THREE.NormalBlending}),e.refreshUniforms(),e.mesh=new THREE.Mesh(e.meshGeometry,e.meshMaterial),e.mesh.renderOrder=100,e.scene.add(e.mesh))}},{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){var e=this;null!=e.mesh&&(e.scene.remove(e.mesh),e.mesh=null),null!=e.meshGeometry&&(e.meshGeometry.dispose(),e.meshGeometry=null),null!=e.meshMaterial&&(e.meshMaterial.dispose(),e.meshMaterial=null)}},{key:"update",value:function(){var e=this,t=(new Date).getTime();1==e.directionReverse?e.meshMaterial.uniforms.time.value=s.Math.tweens(1,0,t,e.duration):e.meshMaterial.uniforms.time.value=s.Math.tweens(0,1,t,e.duration)}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),null!=t.resetPath&&(t.createUpdateMesh(),t.resetPath=null),t.refreshUniforms()}},{key:"refreshUniforms",value:function(){var e=this;if(e.meshMaterial.color=e.color,e.meshMaterial.opacity=e.alpha,e.meshMaterial.uniforms.blendingRatio.value=e.blendingRatio,e.meshMaterial.uniforms.directionType.value=e.directionType,e.meshMaterial.uniforms.directionReverse.value=e.directionReverse,e.meshMaterial.uniforms.repeat.value=e.repeat?1:0,e.meshMaterial.map=e.wallTexture,0==e.stretch){var t=e.imageWidth/e.imageHeight;0==e.directionType?e.unitLength=e.sideSum/e.height/t:e.unitLength=e.height/e.sideSum/t}else e.unitLength=1;e.meshMaterial.uniforms.unitLength.value=e.unitLength}},{key:"hide",value:function(){this.meshMaterial.visible=!1}},{key:"show",value:function(){this.meshMaterial.visible=!0}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.color&&null!==e.color&&(t.color=e.color),void 0!==e.alpha&&null!==e.alpha&&(t.alpha=e.alpha),void 0!==e.duration&&null!==e.duration&&(t.duration=e.duration),void 0!==e.blendingRatio&&null!==e.blendingRatio&&(t.blendingRatio=e.blendingRatio),void 0!==e.directionType&&null!==e.directionType&&("Tangent"==e.directionType?t.directionType=0:t.directionType=1),void 0!==e.directionReverse&&null!==e.directionReverse&&(0==e.directionReverse?t.directionReverse=0:t.directionReverse=1),void 0!==e.height&&null!==e.height&&(t.height=e.height),void 0!==e.wallTexture&&null!==e.wallTexture&&(t.wallTexture=e.wallTexture),void 0!==e.path&&null!==e.path&&(t.path=e.path),void 0!==e.stretch&&null!==e.stretch&&(t.stretch=e.stretch),void 0!==e.repeat&&null!==e.repeat&&(t.repeat=e.repeat),void 0!==e.imageWidth&&null!==e.imageWidth&&(t.imageWidth=e.imageWidth),void 0!==e.imageHeight&&null!==e.imageHeight&&(t.imageHeight=e.imageHeight))}}]),t}(THREE.Group);s.Wall=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.disPickable=!0,r.autoAnimation=!0,r.viewer=e.viewer,r.modelManager=r.viewer.getModelManager(),null!=e.scene?r.scene=e.scene:r.scene=r,r.mesh=[],r.meshGeometry=[],r.angle=0,r.hiddenIds=[],r.externalObjectConverter=new s.ExternalObjectConverter(r.viewer),r.setOpts(e),r._updateGeometry(),r.createUpdateMesh(),r.show(),r.translateZ(.01),i}return _inherits(t,e),_createClass(t,[{key:"_getRandomName",value:function(){return Math.floor(1e3*Math.random())+"_"+(new Date).getTime()}},{key:"_cancelAllHidden",value:function(){for(var e=this,t=0;t<e.hiddenIds.length;t++)e.viewer.gisMode?e.viewer.getFilter().addToOverrideListByColor([e.hiddenIds[t].featureId],null,e.hiddenIds[t].modelId):e.viewer.getFilter().showByIds([e.hiddenIds[t].featureId],e.hiddenIds[t].modelId);e.hiddenIds=[]}},{key:"_updateGeometry",value:function(){var e=this;if(e._cancelAllHidden(),e.meshLen=0,null!=e.boundaryGeometry)e._addGeometry(e.boundaryGeometry,new THREE.Matrix4);else{for(var t=0;t<e.ids.length;t++){var i=e.ids[t].objectIds;if(null==i)return void console.log("objectIds不能为空.");for(var r=e.ids[t].modelId,n=0;n<i.length;n++)e.hiddenIds.push({modelId:r,featureId:i[n]});if(e.viewer.gisMode)e.viewer.getFilter().addToOverrideListByColor(i,{color:0,opacity:0},r);else{e.viewer.getFilter().hideByIds(i,r);for(var a=0;a<i.length;a++){var o=e.externalObjectConverter.convertToExternalObject(e._getRandomName(),i[a],!1);if(!(o.children.length<=0))for(var s=0,l=o.children.length;s<l;s++)e._addGeometry(o.children[s].geometry,o.children[s].matrix)}}}e.viewer.gisMode&&(e.tempMaterial=new THREE.ShaderMaterial)}e.meshGeometry.length>e.meshLen&&e.segmentationClear(e.meshLen)}},{key:"createUpdateMesh",value:function(){var e=this;null==e.meshMaterial&&(e.meshMaterial=new s.PlaneScanMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,blending:THREE.NormalBlending}),e.refreshUniforms());for(var t=!1,i=e.mesh.length;i<e.meshGeometry.length;i++){var r=new THREE.Mesh(e.meshGeometry[i],e.meshMaterial);r.renderOrder=100,e.scene.add(r),e.mesh.push(r),t=!0}t&&e.updateMatrixWorld()}},{key:"_checkGeomtry",value:function(){var e=this;e.meshLen=e.meshGeometry.length;var t={};e.featureIdData={};for(var i=0;i<e.ids.length;i++)for(var r=e.ids[i].objectIds,n=e.ids[i].modelId,a=0;a<r.length;a++){var o={};o[r[a]]=!0,e.modelManager.traverseModels(function(i){i.id==n&&i.getPickingMeshes({skinningWireframeMaterial:e.tempMaterial,skinningSelectedMaterial:e.tempMaterial,selectedLineMaterial:e.tempMaterial,selectedMaterial:e.tempMaterial,wireframeMaterial:e.tempMaterial,instancedSelectedMaterial:e.tempMaterial,instancedWireFrameMaterial:e.tempMaterial},t,[r[a]],o,e.id+n)}),null!=t[n]&&e._getGeometry(t[n],n+"|"+r[a])}var s=!1;if(null!=e.featureIdDataBak){for(var l in e.featureIdDataBak)null==e.featureIdData[l]&&1==e.featureIdDataBak[l].visible&&(s=!0,e.featureIdDataBak[l].visible=!1);for(var u in e.featureIdData)if(null!=e.featureIdDataBak[u])if(e.featureIdData[u].drawcalls==e.featureIdDataBak[u].drawcalls)0==e.featureIdDataBak[u].visible&&(s=!0,e.featureIdDataBak[u].visible=!0),delete e.featureIdData[u];else{s=!0,e.featureIdDataBak[u]=e.featureIdData[u];for(var a=e.mesh.length-1;a>=0;a--)e.mesh[a].geometry.mfKey==u&&(e.scene.remove(e.mesh[a]),e.mesh.splice(a,1),e.meshLen--)}else s=!0,e.featureIdDataBak[u]=e.featureIdData[u]}else e.featureIdDataBak=e.featureIdData,s=!0;if(0!=s){for(var a=e.mesh.length-1;a>=0;a--)e.mesh[a].visible=e.featureIdDataBak[e.mesh[a].geometry.mfKey].visible;for(var c in e.featureIdData)for(var h=0;h<e.featureIdData[c].geometry.length;h++){var d=c.split("|")[0],f=t[d].matrix.clone();f=f.multiply(e.featureIdData[c].matrix[h]),e._addGeometry(e.featureIdData[c].geometry[h],f,c)}e.createUpdateMesh()}}},{key:"_getGeometry",value:function(e,t){var i=this;if(null!=e.geometry){null==i.featureIdData[t]&&(i.featureIdData[t]={geometry:[],matrix:[],drawcalls:0,visible:!0}),i.featureIdData[t].geometry.push(e.geometry),i.featureIdData[t].matrix.push(e.matrix);for(var r=e.geometry.groups,n=0;n<r.length;n++)i.featureIdData[t].drawcalls+=e.geometry.groups[n].count}for(var a=e.children,o=0,s=a.length;o<s;o++)i._getGeometry(a[o],t)}},{key:"_addGeometry",value:function(e,t,i){var r=this,n=[],a=[],o=[],s=e.getIndex().array,l=e.attributes.position.array;void 0!=e.attributes.uv?o=e.attributes.uv.array:(e.computeBoundingBox(),e.boundingBox.clone().applyMatrix4(t));var u;r.meshGeometry.length<=r.meshLen?(u=new THREE.BufferGeometry,r.meshGeometry.push(u)):u=r.meshGeometry[r.meshLen];for(var c={x:Number.MAX_VALUE,y:Number.MAX_VALUE},h={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE},d=new THREE.Vector3,f=0;f<l.length;f+=3)d.set(l[f],l[f+1],l[f+2]),d.applyMatrix4(t),n.push(d.x),n.push(d.y),n.push(d.z),void 0==e.attributes.uv&&(o.push(d.x),o.push(d.y));var p=e.groups;if(null!=p&&0!=p.length)for(var m=0;m<p.length;m++)for(var v=p[m],g=v.start;g<v.start+v.count;g++)a.push(s[g]),void 0==e.attributes.uv&&(h.x=Math.max(h.x,n[3*s[g]]),h.y=Math.max(h.y,n[3*s[g]+1]),c.x=Math.min(c.x,n[3*s[g]]),c.y=Math.min(c.y,n[3*s[g]+1]));else a=s;if(void 0==e.attributes.uv)for(var f=0;f<o.length;f++)if(f%2==0){var y=(o[f]-c.x)/(h.x-c.x);o[f]=y}else{var M=(o[f]-c.y)/(h.y-c.y);o[f]=M}u.setIndex(new THREE.Uint32BufferAttribute(a,1)),u.addAttribute("uv",new THREE.Float32BufferAttribute(o,2)),u.addAttribute("position",new THREE.Float32BufferAttribute(n,3)),null!=i&&(u.mfKey=i),r.meshLen++}},{key:"destroy",value:function(){var e=this;e.clear(),e.externalObjectConverter.destroy()}},{key:"clear",value:function(){var e=this;if(null!=e.mesh&&e.mesh.length>0){for(var t=0;t<e.mesh.length;t++)e.scene.remove(e.mesh[t]);e.mesh=[]}if(null!=e.meshGeometry&&e.meshGeometry.length>0){for(var t=0;t<e.meshGeometry.length;t++)e.meshGeometry[t].dispose();e.meshGeometry=[]}null!=e.meshMaterial&&e.meshMaterial.dispose(),e._cancelAllHidden()}},{key:"segmentationClear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;if(t.featureIdDataBak=null,null!=t.mesh&&t.mesh.length>0){for(var i=e;i<t.mesh.length;i++)t.scene.remove(t.mesh[i]);t.mesh.length=e}
if(null!=t.meshGeometry&&t.meshGeometry.length>0){for(var i=e;i<t.meshGeometry.length;i++)t.meshGeometry[i].dispose();t.meshGeometry.length=e}}},{key:"update",value:function(){var e=this;e.ids.length>0&&e.viewer.gisMode&&e._checkGeomtry();var t=(new Date).getTime();e.meshMaterial.uniforms.time.value=s.Math.tweens(0,1,t,e.duration)}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),null!=t.resetPath&&(t._updateGeometry(),t.createUpdateMesh(),t.resetPath=null),t.refreshUniforms()}},{key:"refreshUniforms",value:function(){var e=this;null!=e.meshMaterial&&(e.meshMaterial.color=e.color,e.meshMaterial.opacity=e.alpha,e.meshMaterial.uniforms.blendingRatio.value=e.blendingRatio,e.meshMaterial.uniforms.angle.value=e.angle,e.meshMaterial.map=e.planeScanTexture)}},{key:"hide",value:function(){var e=this;null!=e.meshMaterial&&(e.meshMaterial.visible=!1)}},{key:"show",value:function(){var e=this;null!=e.meshMaterial&&(e.meshMaterial.visible=!0)}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.color&&null!==e.color&&(t.color=e.color),void 0!==e.alpha&&null!==e.alpha&&(t.alpha=e.alpha),void 0!==e.duration&&null!==e.duration&&(t.duration=e.duration),void 0!==e.blendingRatio&&null!==e.blendingRatio&&(t.blendingRatio=e.blendingRatio),void 0!==e.direction&&null!==e.direction&&(t.direction=e.direction,0==t.direction.x&&0==t.direction.y?t.angle=0:0==t.direction.x&&0!=t.direction.y?t.angle=t.direction.y>0?Math.PI/2:3*Math.PI/2:0!=t.direction.x&&0==t.direction.y?t.angle=t.direction.x>0?0:Math.PI:(t.angle=Math.atan(t.direction.y/t.direction.x),t.direction.x<0&&(t.angle=t.angle+Math.PI))),void 0!==e.planeScanTexture&&null!==e.planeScanTexture&&(t.planeScanTexture=e.planeScanTexture),void 0!==e.ids&&null!==e.ids&&e.ids.length>0?(t.ids=e.ids,t.boundaryGeometry=null):void 0!==e.boundaryGeometry&&null!==e.boundaryGeometry&&(t.boundaryGeometry=e.boundaryGeometry,t.ids=[]))}}]),t}(THREE.Group);s.PlaneScan=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.disPickable=!0,r.autoAnimation=!0,null!=e.scene?r.scene=e.scene:r.scene=r,r.setOpts(e),r.createUpdateMesh(),r.show(),i}return _inherits(t,e),_createClass(t,[{key:"createUpdateMesh",value:function(){var e=this;null==e.meshGeometry&&(e.meshGeometry=new THREE.Geometry),e.meshGeometry.vertices=[],e.meshGeometry.faces=[];var t=2*Math.PI;e.meshGeometry.vertices.push(new THREE.Vector3(0,0,0));for(var i=0;i<64;i++){var r=i/64*t,n=Math.cos(r),a=Math.sin(r);e.meshGeometry.vertices.push(new THREE.Vector3(e.radius*n,e.radius*a,0)),i<63?e.meshGeometry.faces.push(new THREE.Face3(0,i+1,i+2)):e.meshGeometry.faces.push(new THREE.Face3(0,i+1,1))}e.meshGeometry.verticesNeedUpdate=!0,e.meshGeometry.elementsNeedUpdate=!0,null===e.meshGeometry.boundingSphere&&e.meshGeometry.computeBoundingSphere(),null==e.meshMaterial&&(e.meshMaterial=new s.FanScanMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,blending:THREE.NormalBlending}),e.refreshUniforms(),e.mesh=new THREE.Mesh(e.meshGeometry,e.meshMaterial),e.scene.add(e.mesh))}},{key:"destroy",value:function(){this._clear()}},{key:"_clear",value:function(){var e=this;null!=e.mesh&&(e.scene.remove(e.mesh),e.mesh=null),null!=e.meshGeometry&&(e.meshGeometry.dispose(),e.meshGeometry=null),null!=e.meshMaterial&&(e.meshMaterial.dispose(),e.meshMaterial=null)}},{key:"update",value:function(){var e=this,t=(new Date).getTime();e.meshMaterial.uniforms.time.value=s.Math.tweens(1,0,t,e.duration)}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),null!=t.resetMesh&&t.createUpdateMesh(),t.refreshUniforms(),t.resetMesh=null}},{key:"refreshUniforms",value:function(){var e=this;e.meshMaterial.color=e.color,e.meshMaterial.opacity=e.alpha,e.meshMaterial.uniforms.backgroundColor.value=e.backgroundColor,e.meshMaterial.uniforms.backgroundOpacity.value=e.backgroundAlpha,e.meshMaterial.uniforms.fanAngle.value=e.fanAngle/(2*Math.PI)}},{key:"hide",value:function(){this.meshMaterial.visible=!1}},{key:"show",value:function(){this.meshMaterial.visible=!0}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.color&&null!==e.color&&(t.color=e.color),void 0!==e.alpha&&null!==e.alpha&&(t.alpha=e.alpha),void 0!==e.backgroundColor&&null!==e.backgroundColor&&(t.backgroundColor=e.backgroundColor),void 0!==e.backgroundAlpha&&null!==e.backgroundAlpha&&(t.backgroundAlpha=e.backgroundAlpha),null!=e.fanAngle&&(t.fanAngle=e.fanAngle),null!=e.radius&&(t.radius=e.radius),void 0!==e.duration&&null!==e.duration&&(t.duration=e.duration),void 0!==e.originPosition&&null!==e.originPosition&&(t.originPosition=e.originPosition,t.position.set(t.originPosition.x,t.originPosition.y,t.originPosition.z),t.updateMatrixWorld()))}}]),t}(THREE.Group);s.FanScan=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.viewer=e.engineViewer,r.modelManager=r.viewer.getModelManager(),r.scene=r.viewer.getScene(),r.refleRefraManager=r.viewer.refleRefraManager,r.externalObjectConverter=new s.ExternalObjectConverter(r.viewer),r.initNormalMap(e),r.initOption(e),r._updateGeometry(),r.addMesh(),r.translateZ(.01),i}return _inherits(t,e),_createClass(t,[{key:"_cancelAllHidden",value:function(){for(var e=this,t=0;t<e.hiddenIds.length;t++)e.viewer.gisMode?e.viewer.getFilter().addToOverrideListByColor([e.hiddenIds[t].featureId],null,e.hiddenIds[t].modelId):e.viewer.getFilter().showByIds([e.hiddenIds[t].featureId],e.hiddenIds[t].modelId);e.hiddenIds=[]}},{key:"_getRandomName",value:function(){return Math.floor(1e3*Math.random())+"_"+(new Date).getTime()}},{key:"_updateGeometry",value:function(){var e=this;if(e._cancelAllHidden(),e.meshLen=0,e.featureCount=0,e.isLoadedMeshes=!1,e.isAddUpdate=!1,null!=e.boundaryGeometry)e._addGeometry(e.boundaryGeometry,new THREE.Matrix4);else if(null!=e.componentIds&&e.componentIds.length>0&&0==e.viewer.gisMode)for(var t=0;t<e.componentIds.length;t++){var i=e.externalObjectConverter.convertToExternalObject(e._getRandomName(),e.componentIds[t],!1);if(!(i.children.length<=0))for(var r=0,n=i.children.length;r<n;r++)e._addGeometry(i.children[r].geometry,i.children[r].matrix)}else{for(var t=0;t<e.ids.length;t++){var a=e.ids[t].objectIds;if(null==a)return void console.log("objectIds不能为空.");for(var o=e.ids[t].modelId,s=0;s<a.length;s++)e.hiddenIds.push({modelId:o,featureId:a[s]});if(e.viewer.gisMode)e.viewer.getFilter().addToOverrideListByColor(a,{color:0,opacity:0},o),e.featureCount+=a.length;else{e.viewer.getFilter().hideByIds(a,o);for(var l=0;l<a.length;l++){var i=e.externalObjectConverter.convertToExternalObject(e._getRandomName(),a[l],!1);if(!(i.children.length<=0))for(var r=0,n=i.children.length;r<n;r++)e._addGeometry(i.children[r].geometry,i.children[r].matrix)}}}e.viewer.gisMode&&(e.tempMaterial=new THREE.ShaderMaterial)}e.meshGeometry.length>e.meshLen&&e.segmentationClear(e.meshLen)}},{key:"createMesh",value:function(e){var t=this,i=t.initMaterial(e);t.meshMaterial.push(i);var r=new THREE.Mesh(e,i);return r.type="Water",r.renderOrder=s.GlobalData.IncrementRender?100:-1,t.shadow&&t.refleRefraManager.addWaterManager({textureWidth:t.textureWidth,textureHeight:t.textureHeight,clipBias:t.clipBias,mesh:r}),r}},{key:"addMesh",value:function(){for(var e=this,t=e.mesh.length;t<e.meshGeometry.length;t++){var i=e.createMesh(e.meshGeometry[t]);e.add(i),i.translateZ(e.meshGeometry[t].initialOffset),e.mesh.push(i),e.isAddUpdate=!0}e.isAddUpdate&&e.updateMatrixWorld()}},{key:"_checkVisible",value:function(){var e=this;for(var t in e.featureIdDataBak){var i=t.split("|"),r=i[0],n=(i[1],e.modelManager.getModel(r).visible);n!=e.featureIdDataBak[t].visible&&(e.featureIdDataBak[t].visible=n,e.isAddUpdate=!0)}e.updateVisible()}},{key:"updateVisible",value:function(){for(var e=this,t=e.mesh.length-1;t>=0;t--)e.mesh[t].visible=e.featureIdDataBak[e.mesh[t].geometry.mfKey].visible}},{key:"_checkGeomtry",value:function(){var e=this;e.meshLen=e.meshGeometry.length,e.featureIdData={};for(var t={},i=0;i<e.ids.length;i++)for(var r=e.ids[i].objectIds,n=e.ids[i].modelId,a=0;a<r.length;a++){var o={};o[r[a]]=!0,e.modelManager.traverseModels(function(i){i.id==n&&i.isVisible()&&i.getPickingMeshes({skinningWireframeMaterial:e.tempMaterial,skinningSelectedMaterial:e.tempMaterial,selectedLineMaterial:e.tempMaterial,selectedMaterial:e.tempMaterial,wireframeMaterial:e.tempMaterial,instancedSelectedMaterial:e.tempMaterial,instancedWireFrameMaterial:e.tempMaterial},t,[r[a]],o,e.id+n)}),null!=t[n]&&e._getGeometry(t[n],n+"|"+r[a])}var s=!1;if(null!=e.featureIdDataBak){for(var l in e.featureIdDataBak)null==e.featureIdData[l]&&1==e.featureIdDataBak[l].visible&&(s=!0,e.featureIdDataBak[l].visible=!1);for(var u in e.featureIdData)if(null!=e.featureIdDataBak[u])if(e.featureIdData[u].drawcalls==e.featureIdDataBak[u].drawcalls)0==e.featureIdDataBak[u].visible&&(s=!0,e.featureIdDataBak[u].visible=!0),delete e.featureIdData[u];else{s=!0,e.featureIdDataBak[u]=e.featureIdData[u];for(var a=e.mesh.length-1;a>=0;a--)e.mesh[a].geometry.mfKey==u&&(e.shadow&&e.refleRefraManager.removeWaterManager(e.mesh[a].material.refleRefraId),e.remove(e.mesh[a]),e.mesh.splice(a,1),e.meshGeometry[a].dispose(),e.meshGeometry.splice(a,1),e.meshMaterial[a].dispose(),e.meshMaterial.splice(a,1),e.meshLen--)}else s=!0,e.featureIdDataBak[u]=e.featureIdData[u]}else e.featureIdDataBak=e.featureIdData,s=!0;if(0!=s){e.updateVisible();for(var c in e.featureIdData){for(var h=c.split("|")[0],d=(c.split("|")[1],0);d<e.featureIdData[c].geometry.length;d++){var f=t[h].matrix.clone();f=f.multiply(e.featureIdData[c].matrix[d]),e._addGeometry(e.featureIdData[c].geometry[d],f,c)}e.viewer.getFilter().addToOverrideListByColor(r,{color:0,opacity:0},n)}e.addMesh(),e.isLoadedMeshes=e.featureCount==Object.keys(e.featureIdDataBak).length}}},{key:"_getGeometry",value:function(e,t){var i=this;if(null!=e.geometry){null==i.featureIdData[t]&&(i.featureIdData[t]={geometry:[],matrix:[],drawcalls:0,visible:!0}),i.featureIdData[t].geometry.push(e.geometry),i.featureIdData[t].matrix.push(e.matrix);for(var r=e.geometry.groups,n=0;n<r.length;n++)i.featureIdData[t].drawcalls+=e.geometry.groups[n].count}for(var a=e.children,o=0,s=a.length;o<s;o++)i._getGeometry(a[o],t)}},{key:"_addGeometry",value:function(e,t,i){var r=this,n=function(e){return e>=f.z-r.heightTolerance&&e<=f.z+r.heightTolerance},a=[],o=[],s=[],l=[],u=e.getIndex().array,c=e.attributes.position.array;e.computeBoundingBox();var h,d={x:Number.MAX_VALUE,y:Number.MAX_VALUE},f={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE,z:-Number.MAX_VALUE};r.meshGeometry.length<=r.meshLen?(h=new THREE.BufferGeometry,r.meshGeometry.push(h)):h=r.meshGeometry[r.meshLen];var p=[],m=[],v=e.groups;if(null!=v&&0!=v.length)for(var g={},y=0,M=0;M<v.length;M++)for(var E=v[M],b=E.start;b<E.start+E.count;b++)null==g[u[b]]?(p.push(y),g[u[b]]=y,y++,m.push(c[3*u[b]]),m.push(c[3*u[b]+1]),m.push(c[3*u[b]+2])):p.push(g[u[b]]);else p=u,m=c;for(var x=new THREE.Vector3,I=0;I<m.length;I+=3)x.set(m[I],m[I+1],m[I+2]),x.applyMatrix4(t),a.push(x.x),a.push(x.y),a.push(x.z),l.push(0),l.push(0),l.push(1),s.push(x.x),s.push(x.y);for(var I=0;I<p.length;I++)!function(e){var t=a[3*e],i=a[3*e+1],r=a[3*e+2];f.x=Math.max(f.x,t),f.y=Math.max(f.y,i),f.z=Math.max(f.z,r),d.x=Math.min(d.x,t),d.y=Math.min(d.y,i)}(p[I]);for(var I=0;I<p.length;I+=3){var T=p[I],w=p[I+1],C=p[I+2];(null==r.heightTolerance||n(a[3*T+2])&&n(a[3*w+2])&&n(a[3*C+2]))&&(o.push(T),o.push(w),o.push(C))}for(var I=2;I<a.length;I+=3)a[I]=0;for(var I=0;I<s.length;I++)if(I%2==0){var S=(s[I]-d.x)/(f.x-d.x);s[I]=S}else{var A=(s[I]-d.y)/(f.y-d.y);s[I]=A}h.setIndex(new THREE.Uint32BufferAttribute(o,1)),h.addAttribute("uv",new THREE.Float32BufferAttribute(s,2)),h.addAttribute("position",new THREE.Float32BufferAttribute(a,3)),h.addAttribute("normal",new THREE.Float32BufferAttribute(l,3)),h.initialOffset=f.z,null!=i&&(h.mfKey=i),h.computeBoundingBox(),null==r.box&&(r.box=new THREE.Box3),r.box.expandByPoint(h.boundingBox.min),r.box.expandByPoint(h.boundingBox.max),r.meshLen++}},{key:"destroy",value:function(){var e=this;e.clear(),e.externalObjectConverter.destroy()}},{key:"clear",value:function(){var e=this;if(null!=e.mesh&&e.mesh.length>0){for(var t=0;t<e.mesh.length;t++)e.shadow&&e.refleRefraManager.removeWaterManager(e.mesh[t].material.refleRefraId),e.remove(e.mesh[t]);e.mesh=[]}if(null!=e.meshGeometry&&e.meshGeometry.length>0){for(var t=0;t<e.meshGeometry.length;t++)e.meshGeometry[t].dispose();e.meshGeometry=[]}if(null!=e.meshMaterial&&e.meshMaterial.length>0){for(var t=0;t<e.meshMaterial.length;t++)e.meshMaterial[t].dispose();e.meshMaterial=[]}e._cancelAllHidden()}},{key:"segmentationClear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;if(t.featureIdDataBak=null,null!=t.mesh&&t.mesh.length>0){for(var i=e;i<t.mesh.length;i++)t.shadow&&t.refleRefraManager.removeWaterManager(t.mesh[i].material.refleRefraId),t.remove(t.mesh[i]);t.mesh.length=e}if(null!=t.meshGeometry&&t.meshGeometry.length>0){for(var i=e;i<t.meshGeometry.length;i++)t.meshGeometry[i].dispose();t.meshGeometry.length=e}}},{key:"update",value:function(){var e=this;if(e.unrender=!1,e.isAddUpdate=!1,e.ids.length>0&&e.viewer.gisMode&&(null!=e.featureIdDataBak&&e.isLoadedMeshes?e._checkVisible():e._checkGeomtry()),!e.flow)return void(e.isAddUpdate||(e.unrender=!0));for(var t=e.clock.getDelta(),i=0;i<e.mesh.length;i++)if(e.mesh[i].visible){e.meshMaterial[i].uniforms.sunDirection.value=e.scene.sunDirection,e.meshMaterial[i].uniforms.flowTime.value+=1/120;var r=e.meshMaterial[i].uniforms.config;r.value.x+=e.flowSpeed*t,r.value.y=r.value.x+e.halfCycle,r.value.x>=e.cycle?(r.value.x=0,r.value.y=e.halfCycle):r.value.y>=e.cycle&&(r.value.y=r.value.y-e.cycle)}}},{key:"setColor",value:function(e,t){var i=this;i.color=e,i.alpha=t;for(var r=0;r<i.meshMaterial.length;r++)i.meshMaterial[r].isUndersea=i.alpha<1,i.meshMaterial[r].uniforms.waterColor.value=new THREE.Vector4(i.color.r,i.color.g,i.color.b,i.alpha)}},{key:"setScale",value:function(e){var t=this;t.wavesScale=e;for(var i=0;i<t.meshMaterial.length;i++)t.meshMaterial[i].uniforms.config.value.w=t.wavesScale}},{key:"setDirection",value:function(e,t){var i=this;i.flowDirection=new THREE.Vector2(e,t);for(var r=0;r<i.meshMaterial.length;r++)i.meshMaterial[r].uniforms.flowDirection.value=i.flowDirection}},{key:"initOption",value:function(e){var t=this;t.color=e.color,t.alpha=e.alpha,void 0!==e.componentIds&&null!==e.componentIds&&e.componentIds.length>0?(t.componentIds=e.componentIds,t.boundaryGeometry=null,t.ids=[]):void 0!==e.ids&&null!==e.ids&&e.ids.length>0?(t.ids=e.ids,t.boundaryGeometry=null,t.componentIds=[]):void 0!==e.boundaryGeometry&&null!==e.boundaryGeometry&&(t.boundaryGeometry=e.boundaryGeometry,t.ids=[],t.componentIds=[]),void 0!==e.heightTolerance&&null!==e.heightTolerance?t.heightTolerance=e.heightTolerance:t.heightTolerance=null,t.flowDirection=e.flowDirection||new THREE.Vector2(1,0),t.flowMap=e.flowMap||void 0,t.flowSpeed=e.flowSpeed||.03,t.reflectivity=e.reflectivity||.1,t.wavesScale=e.scale||1,e.shadow?t.shadow=!0:t.shadow=!1,e.flow?t.flow=!0:t.flow=!1,t.cycle=e.cycle||.4,t.halfCycle=.5*t.cycle,t.clock=new THREE.Clock,t.hiddenIds=[],t.meshMaterial=[],t.mesh=[],t.meshGeometry=[]}},{key:"initNormalMap",value:function(e){var t=this,i=new THREE.TextureLoader;t.textureWidth=e.textureWidth||512,t.textureHeight=e.textureHeight||512,t.clipBias=e.clipBias||0;var r=e.map0,n=e.map1;t.normalMap0=e.normalMap0||i.load(r),t.normalMap1=e.normalMap1||i.load(n),t.normalMap0.wrapS=t.normalMap0.wrapT=THREE.RepeatWrapping,t.normalMap1.wrapS=t.normalMap1.wrapT=THREE.RepeatWrapping}},{key:"initMaterial",value:function(e){var t=this,i=new s.WaterMaterial;return i.initUniforms(t),i}}]),t}(THREE.Group);s.Water=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e);var i=this;i.viewer=t,i.scene=i.viewer.getScene(),i.refleRefraManager={}}return _createClass(e,[{key:"getReflectorTexture",value:function(e){var t=this;if(null!=t.refleRefraManager[e])return t.refleRefraManager[e].reflector.getRenderTarget().texture}},{key:"getRefractorTexture",value:function(e){var t=this;if(null!=t.refleRefraManager[e])return t.refleRefraManager[e].refractor.getRenderTarget().texture}},{key:"_getRandomId",value:function(){return"RefleRefra-"+Math.floor(1e3*Math.random())+"-"+(new Date).getTime()}},{key:"removeWaterManager",value:function(e){var t=this;null!=t.refleRefraManager[e]&&(t.refleRefraManager[e]=null,delete t.refleRefraManager[e])}},{key:"addWaterManager",value:function(e){var t=this,i=t._getRandomId(),r=e.mesh,n=new THREE.Reflector(r.geometry,{textureWidth:e.textureWidth,textureHeight:e.textureHeight,clipBias:e.clipBias});n.matrixAutoUpdate=!1;var a=new THREE.Refractor(r.geometry,{textureWidth:e.textureWidth,textureHeight:e.textureHeight,clipBias:e.clipBias});a.matrixAutoUpdate=!1,t.refleRefraManager[i]={reflector:n,refractor:a,mesh:r},r.material.refleRefraId=i,r.material.uniforms.tReflectionMap.value=t.getReflectorTexture(i),r.material.uniforms.tRefractionMap.value=t.getRefractorTexture(i)}},{key:"hideAllMesh",value:function(){var e=this;for(var t in e.refleRefraManager){e.refleRefraManager[t].mesh.visible=!1}}},{key:"showAllMesh",value:function(){var e=this;for(var t in e.refleRefraManager){e.refleRefraManager[t].mesh.visible=!0}}},{key:"render",value:function(e){var t=this;for(var i in t.refleRefraManager){var r=t.refleRefraManager[i],n=r.mesh;if(0!=r.mesh.visible){var a=n.material;a.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.textureMatrix.multiply(t.viewer.camera.projectionMatrix),a.textureMatrix.multiply(t.viewer.camera.matrixWorldInverse),a.textureMatrix.multiply(n.matrixWorld),t.hideAllMesh(),r.reflector.matrixWorld.copy(n.matrixWorld),r.reflector.onBeforeRender(e,t.scene,t.viewer.camera),a.isUndersea&&(r.refractor.matrixWorld.copy(n.matrixWorld),r.refractor.onBeforeRender(e,t.scene,t.viewer.camera)),t.showAllMesh()}}}},{key:"dispose",value:function(){var e=this;e.viewer=null,e.scene=null,e.refleRefraManager=null}}]),e}();s.RefleRefraManager=e}(),THREE.Reflector=function(e,t){THREE.Mesh.call(this,e),this.type="Reflector";var i=this;t=t||{};var r=void 0!==t.color?new THREE.Color(t.color):new THREE.Color(8355711),n=t.textureWidth||512,a=t.textureHeight||512,o=t.clipBias||0,s=t.shader||THREE.Reflector.ReflectorShader,l=(void 0!==t.recursion&&t.recursion,new THREE.Plane),u=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3,d=new THREE.Matrix4,f=new THREE.Vector3(0,0,-1),p=new THREE.Vector4,m=new THREE.Vector3,v=new THREE.Vector3,g=new THREE.Vector4,y=new THREE.Matrix4,M=new THREE.PerspectiveCamera,E={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},b=new THREE.WebGLRenderTarget(n,a,E);THREE.Math.isPowerOfTwo(n)&&THREE.Math.isPowerOfTwo(a)||(b.texture.generateMipmaps=!1);var x=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});x.uniforms.tDiffuse.value=b.texture,x.uniforms.color.value=r,x.uniforms.textureMatrix.value=y,this.material=x,this.onBeforeRender=function(e,t,r){if(c.setFromMatrixPosition(i.matrixWorld),h.setFromMatrixPosition(r.matrixWorld),d.extractRotation(i.matrixWorld),u.set(0,0,1),u.applyMatrix4(d),m.subVectors(c,h),!(m.dot(u)>0)){m.reflect(u).negate(),m.add(c),d.extractRotation(r.matrixWorld),f.set(0,0,-1),f.applyMatrix4(d),f.add(h),v.subVectors(c,f),v.reflect(u).negate(),v.add(c),M.position.copy(m),M.up.set(0,1,0),M.up.applyMatrix4(d),M.up.reflect(u),M.lookAt(v),M.far=r.far,M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),M.projectionMatrix.copy(r.projectionMatrix),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(M.projectionMatrix),y.multiply(M.matrixWorldInverse),y.multiply(i.matrixWorld),l.setFromNormalAndCoplanarPoint(u,c),l.applyMatrix4(M.matrixWorldInverse),p.set(l.normal.x,l.normal.y,l.normal.z,l.constant);var n=M.projectionMatrix;g.x=(Math.sign(p.x)+n.elements[8])/n.elements[0],g.y=(Math.sign(p.y)+n.elements[9])/n.elements[5],g.z=-1,g.w=(1+n.elements[10])/n.elements[14],p.multiplyScalar(2/p.dot(g)),n.elements[2]=p.x,n.elements[6]=p.y,n.elements[10]=p.z+1-o,n.elements[14]=p.w,i.visible=!1;var a=e.getRenderTarget(),s=e.shadowMap.autoUpdate;e.shadowMap.autoUpdate=!1,e.render(t,M,b),e.shadowMap.autoUpdate=s,e.setRenderTarget(a),r.isArrayCamera&&e.state.viewport(r.viewport),i.visible=!0}},this.getRenderTarget=function(){return b}},THREE.Reflector.prototype=Object.create(THREE.Mesh.prototype),THREE.Reflector.prototype.constructor=THREE.Reflector,THREE.Reflector.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")},THREE.Refractor=function(e,t){function i(e){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(e.projectionMatrix),d.multiply(e.matrixWorldInverse),d.multiply(n.matrixWorld)}function r(e,t,i){n.visible=!1;var r=e.getRenderTarget(),a=e.shadowMap.autoUpdate;e.shadowMap.autoUpdate=!1,e.render(t,c,p),e.shadowMap.autoUpdate=a,e.setRenderTarget(r),i.isArrayCamera&&e.state.viewport(i.viewport),n.visible=!0}THREE.Mesh.call(this,e),this.type="Refractor";var n=this;t=t||{};var a=void 0!==t.color?new THREE.Color(t.color):new THREE.Color(8355711),o=t.textureWidth||512,s=t.textureHeight||512,l=t.clipBias||0,u=t.shader||THREE.Refractor.RefractorShader,c=new THREE.PerspectiveCamera;c.matrixAutoUpdate=!1,c.userData.refractor=!0;var h=new THREE.Plane,d=new THREE.Matrix4,f={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},p=new THREE.WebGLRenderTarget(o,s,f);THREE.Math.isPowerOfTwo(o)&&THREE.Math.isPowerOfTwo(s)||(p.texture.generateMipmaps=!1),this.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,transparent:!0}),this.material.uniforms.color.value=a,this.material.uniforms.tDiffuse.value=p.texture,this.material.uniforms.textureMatrix.value=d;var m=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Matrix4,r=new THREE.Vector3,a=new THREE.Vector3;return function(o){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(o.matrixWorld),r.subVectors(e,t),i.extractRotation(n.matrixWorld),a.set(0,0,1),a.applyMatrix4(i),r.dot(a)<0}}(),v=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Quaternion,r=new THREE.Vector3;return function(){n.matrixWorld.decompose(t,i,r),e.set(0,0,1).applyQuaternion(i).normalize(),e.negate(),h.setFromNormalAndCoplanarPoint(e,t)}}(),g=function(){var e=new THREE.Plane,t=new THREE.Vector4,i=new THREE.Vector4;return function(r){c.matrixWorld.copy(r.matrixWorld),c.matrixWorldInverse.getInverse(c.matrixWorld),c.projectionMatrix.copy(r.projectionMatrix),c.far=r.far,e.copy(h),e.applyMatrix4(c.matrixWorldInverse),t.set(e.normal.x,e.normal.y,e.normal.z,e.constant);var n=c.projectionMatrix;i.x=(Math.sign(t.x)+n.elements[8])/n.elements[0],i.y=(Math.sign(t.y)+n.elements[9])/n.elements[5],i.z=-1,i.w=(1+n.elements[10])/n.elements[14],t.multiplyScalar(2/t.dot(i)),n.elements[2]=t.x,n.elements[6]=t.y,n.elements[10]=t.z+1-l,n.elements[14]=t.w}}();this.onBeforeRender=function(e,t,n){!0!==n.userData.refractor&&!0!=!m(n)&&(v(),i(n),g(n),r(e,t,n))},this.getRenderTarget=function(){return p}},THREE.Refractor.prototype=Object.create(THREE.Mesh.prototype),THREE.Refractor.prototype.constructor=THREE.Refractor,THREE.Refractor.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")},function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t;this.wireframeMaterial=new s.MeshBasicClipMaterial({color:1170103,opacity:1,transparent:!0,blending:THREE.CustomBlending,blendSrc:THREE.OneFactor,blendDst:THREE.ZeroFactor,blendEquation:THREE.AddEquation}),this.selectedMaterial=new s.MeshBasicClipMaterial({color:1170103,opacity:.3,transparent:!0}),this.skinningWireframeMaterial=new s.MeshBasicClipMaterial({color:1170103,opacity:1,transparent:!0,blending:THREE.CustomBlending,blendSrc:THREE.OneFactor,blendDst:THREE.ZeroFactor,blendEquation:THREE.AddEquation,skinning:!0}),this.skinningSelectedMaterial=new s.MeshBasicClipMaterial({color:1170103,opacity:.3,transparent:!0,skinning:!0}),this.selectedLineMaterial=new THREE.LineMaterial({color:1170103,opacity:1,transparent:!0,linewidth:2,dashed:!1}),this.instancedWireFrameMaterial=new s.InstancedMeshBasicMaterial({color:1170103,opacity:1,transparent:!0,blending:THREE.CustomBlending,blendSrc:THREE.OneFactor,blendDst:THREE.ZeroFactor,blendEquation:THREE.AddEquation}),this.instancedSelectedMaterial=new s.InstancedMeshBasicMaterial({color:1170103,opacity:.3,transparent:!0}),this.selectionScene=new THREE.Scene,this.selectionScene.autoUpdate=!1,this.selectionObjectGroup=new s.ObjectGroup,this.selectionObjectGroup.name="PickingObjectGroup",this.selectionObjectGroup.matrixAutoUpdate=!1,this.selectionScene.add(this.selectionObjectGroup),this.lastSelectedUserIdMap=null,this.lastSelectedUserIds=null,this.selectedMaterialForClip=this.selectedMaterial.clone(),this.wireframeMaterialForClip=this.wireframeMaterial.clone(),this.instancedSelectedMaterialForClip=this.instancedSelectedMaterial.clone(),this.instancedWireFrameMaterialForClip=this.instancedWireFrameMaterial.clone()}return _createClass(e,[{key:"destroy",value:function(){this.wireframeMaterial.dispose(),this.wireframeMaterial=null,this.wireframeMaterialForClip.dispose(),this.wireframeMaterialForClip=null,this.selectedMaterial.dispose(),this.selectedMaterial=null,this.selectedMaterialForClip.dispose(),this.selectedMaterialForClip=null,this.skinningWireframeMaterial.dispose(),this.skinningWireframeMaterial=null,this.skinningSelectedMaterial.dispose(),this.skinningSelectedMaterial=null,this.selectedLineMaterial.dispose(),this.selectedLineMaterial=null,this.instancedWireFrameMaterial.dispose(),this.instancedWireFrameMaterial=null,this.instancedWireFrameMaterialForClip.dispose(),this.instancedWireFrameMaterialForClip=null,this.instancedSelectedMaterial.dispose(),this.instancedSelectedMaterial=null,this.instancedSelectedMaterialForClip.dispose(),this.instancedSelectedMaterialForClip=null,this.selectionObjectGroup.clear(),this.selectionObjectGroup=null,this.selectionScene=null,this.lastSelectedUserIdMap=null,this.lastSelectedUserIds=null,this.viewer=null}},{key:"apply",value:function(e){var t=this.viewer,i=t.getSelectionWithModelId();if(!i||!i.length)return this._clearSelectedUserIdsCache(),void this._clearMeshesFromScene();(e||this.isSelectionsChanged())&&(this._cacheSelectedUserIds(i),this._updateScene(i)),this._render(t.rendererManager.getRenderer(),t.camera)}},{key:"isSelectionsChanged",value:function(){var e=this.lastSelectedUserIdMap;if(!s.Utils.defined(e))return!0;var t=this.viewer.getSelectionWithModelId();if(t.length!==Object.keys(e).length)return!0;for(var i=!1,r=t.length-1;r>=0;r--){var n=t[r],a=e[n.selectedId];if(!s.Utils.defined(a)){i=!0;break}if(a.modelId!==n.modelId){i=!0;break}}return!0===i||(this.viewer.getModelManager().traverseLoadedModels(function(e){if(!0!==i){var t=e.tilesLoader;if(t){var r=t.getLastSelectionMeshId(),n=t.getSelectionMeshId();for(var a in n)e.isVisibleMesh(a)?n[a]=!0:delete n[a];if(0!==n.length){if(Object.keys(r).length!==Object.keys(n).length)return void(i=!0);for(var o in n)if(!0!==r[o]){i=!0;break}}}}}),i)}},{key:"_cacheSelectedUserIds",value:function(e){this.lastSelectedUserIdMap={};for(var t=0;t<e.length;++t)this.lastSelectedUserIdMap[e[t].selectedId]=e[t]}},{key:"_clearSelectedUserIdsCache",value:function(){this.lastSelectedUserIdMap=null}},{key:"_render",value:function(e,t){var i=e.autoClearColor,r=e.autoClearDepth,n=e.autoClearStencil;e.autoClearColor=!1,e.autoClearDepth=!0,e.autoClearStencil=!1,e.render(this.selectionScene,t),e.autoClearColor=i,e.autoClearDepth=r,e.autoClearStencil=n}},{key:"_updateScene",value:function(e){this._clearMeshesFromScene(),this._addMeshesToScene(this._getSelectedMeshes(e)),this._updateMatrixWorldForScene(),this._updateSelectedLineMaterial()}},{key:"_clearMeshesFromScene",value:function(){this.selectionObjectGroup.clear()}},{key:"_addMeshesToScene",value:function(e){var t=Object.keys(e),i=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;this.selectionObjectGroup.add(e[s])}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"_updateMatrixWorldForScene",value:function(){this.selectionObjectGroup.matrix.copy(this.viewer.getScene().getMatrixGlobal()),this.selectionObjectGroup.updateMatrixWorld(!0)}},{key:"_getSelectedMeshes",value:function(e){var t={},i=this;return this.viewer.getModelManager().traverseLoadedModels(function(r){for(var n=[],a=0;a<e.length;++a){var o=e[a];o.modelId===r.databagId&&n.push(o.selectedId)}if(0!==n.length){var l=s.Utils.arrayToMap(n);r.getPickingMeshes(i,t,n,l)}}),t}},{key:"_updateSelectedLineMaterial",value:function(){s.GlobalData.PickingLineWidthEnabled&&this.selectedLineMaterial.resolution.set(this.viewer.domElement.offsetWidth,this.viewer.domElement.offsetHeight)}}]),e}();s.PickingEffecter=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.pickingNodeMap=null,this.pickingNodeGroup=null,this.nodeGroupName="PickingNodeGroup"}return _createClass(e,[{key:"destroy",value:function(){this.clearData(),this.pickingNodeGroup=null,this.manager=null}},{key:"clearData",value:function(){this.clearAllFromPickingNodeGroup(),this.clearAllFromPickingNodeMap()}},{key:"addToPickingNodeMap",value:function(e,t){this.pickingNodeMap||(this.pickingNodeMap={}),this.pickingNodeMap[e]=t,this.addToPickingNodeGroup(t)}},{key:"removeFromPickingNodeMap",value:function(e){this.pickingNodeMap&&this.pickingNodeMap[e]&&(this.removeFormPickingNodeGroup(e),this.disposePickingNodeById(e),delete this.pickingNodeMap[e])}},{key:"addToPickingNodeGroup",value:function(e){this.pickingNodeGroup||(this.pickingNodeGroup=new THREE.Group,this.pickingNodeGroup.name=this.nodeGroupName);for(var t=0,i=e.length;t<i;t++)this.pickingNodeGroup.add(e[t])}},{key:"removeFormPickingNodeGroup",value:function(e){if(this.pickingNodeGroup)for(var t=this.pickingNodeMap[e],i=0,r=t.length;i<r;i++)this.pickingNodeGroup.remove(t[i])}},{key:"disposePickingNodeById",value:function(e){
for(var t=this.pickingNodeMap[e],i=0,r=t.length;i<r;i++)t[i].material=null,t[i].geometry.dispose(),t[i]=null}},{key:"clearAllFromPickingNodeMap",value:function(){if(this.pickingNodeMap){for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)this.disposePickingNodeById(t[i]);this.pickingNodeMap=null}}},{key:"clearAllFromPickingNodeGroup",value:function(){this.pickingNodeGroup&&(this.pickingNodeGroup.children.length=0)}},{key:"isPickingMeshesGenerated",value:function(){return!!this.pickingNodeMap}},{key:"generatePickingMeshes",value:function(){}},{key:"updatePickingMeshesState",value:function(e,t,i,r){}},{key:"resetPickingMeshesState",value:function(){}},{key:"updatePickingMeshes",value:function(e,t,i,r){return this.isPickingMeshesGenerated()||(this.generatePickingMeshes(),this.isPickingMeshesGenerated())?(this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i,r),this.getPickingNodeGroup()):null}},{key:"getPickingNodeGroup",value:function(){return this.pickingNodeGroup}}]),e}();s.PickingNodeGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingBatchedMeshGroup",i}return _inherits(t,e),_createClass(t,[{key:"disposePickingNodeById",value:function(e){for(var t=this.pickingNodeMap[e],i=0,r=t.length;i<r;i++)t[i]._indicesGroup=null,t[i].material=null,t[i].geometry.dispose(),t[i]=null}},{key:"generatePickingMeshes",value:function(){for(var e=this,t=this.manager,i=Object.keys(t.mapMaterialIdToMergedNode),r=0,n=i.length;r<n;r++){for(var a=i[r],o=t.getPropertyValueByMaterialKey(a),l=t.mapMaterialIdToMergedNode[a],u=[],c=0,h=l.length;c<h;c++){var d=l[c],f=d.geometry,p=d.indices,m=new THREE.BufferGeometry;m.addAttribute("position",f.getAttribute("position")),m.setIndex(f.getIndex());var v="lines"===o.type?THREE.LineSegments:THREE.Mesh,g=new v(m,s.MaterialUtil.DefaultMaterial);g.name=a,g.frustumCulled=!1,g.renderOrder=0,g._indicesGroup=p,u.push(g)}e.addToPickingNodeMap(a,u)}}},{key:"_rebuildGeometryGroup",value:function(e,t,i,r,n){var a,o,s,l,u,c,h=this.manager.manager,d=e._indicesGroup,f=Object.keys(d);f.length<t.length?(u=f,c=i):(u=t,c=d);var p=null,m=r.getFilter();m&&(p=m.getLocalClippingList());var v=[],g=[];for(s=0,l=u.length;s<l;s++){var y=u[s];if(h.isPickableNode(y)&&c[y]){var M=d[y];if(M&&M.length>0){if(p&&p[y]){var E="localClipping|"+y;g.push(E);var b=g.length-1;for(a=0,o=M.length;a<o;a++)v.push({indexStart:M[a].indexStart,indexCount:M[a].indexCount,state:1+b});continue}for(a=0,o=M.length;a<o;a++)v.push({indexStart:M[a].indexStart,indexCount:M[a].indexCount,state:0})}}}e.visible=!0;var x=e.geometry;if(x.clearGroups(),0===v.length)return void(e.visible=!1);for(v.sort(function(e,t){return e.indexStart-t.indexStart}),a=0,o=v.length;a<o;a++){var I=v[a].indexStart,T=v[a].indexCount,w=v[a].state;if(0===a)x.addGroup(I,T,w);else{var C=v[a-1].indexStart,S=v[a-1].indexCount,A=v[a-1].state,k=C+S;w===A&&I===k?x.groups[x.groups.length-1].count+=T:x.addGroup(I,T,w)}}var R=[n.selectedMaterial];for(a=0,o=g.length;a<o;a++){var B,L=g[a].split("|");"localClipping"==L[0]&&(B=n.selectedMaterialForClip),R.push(B)}e.material=R}},{key:"updatePickingMeshesState",value:function(e,t,i,r){for(var n=this.pickingNodeMap,a=Object.keys(n),o=0,s=a.length;o<s;o++)for(var l=n[a[o]],u=0,c=l.length;u<c;u++)l[u].visible=!1,this._rebuildGeometryGroup(l[u],t,i,r,e)}}]),t}(s.PickingNodeGenerator);s.PickingBatchedMeshGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingBatchedWireFrameGroup",i}return _inherits(t,e),_createClass(t,[{key:"disposePickingNodeById",value:function(e){for(var t=this.pickingNodeMap[e],i=0,r=t.length;i<r;i++)t[i]._indicesGroup=null,t[i].material=null,t[i].geometry.dispose(),t[i]=null}},{key:"generatePickingMeshes",value:function(){var e=this.manager.getWireFrameLineSegments();if(e)for(var t=0,i=e.length;t<i;t++){var r=e[t].geometry,n=new THREE.BufferGeometry;n.addAttribute("position",r.getAttribute("position")),n.setIndex(r.getIndex());var a=new THREE.LineSegments(n,s.MaterialUtil.DefaultMaterial);a._indicesGroup=e[t]._indicesGroup,a.frustumCulled=!1,a.renderOrder=1,this.addToPickingNodeMap(t,[a])}}},{key:"_rebuildGeometryGroup",value:function(e,t,i,r,n){var a,o,s,l,u,c,h=this.manager.manager,d=e._indicesGroup,f=Object.keys(d);f.length<t.length?(u=f,c=i):(u=t,c=d);var p=null,m=r.getFilter();m&&(p=m.getLocalClippingList());var v=[],g=[];for(s=0,l=u.length;s<l;s++){var y=u[s];if(h.isPickableNode(y)&&c[y]){var M=d[y];if(M&&M.length>0){if(p&&p[y]){var E="localClipping|"+y;g.push(E);var b=g.length-1;for(a=0,o=M.length;a<o;a++)v.push({indexStart:M[a].indexStart,indexCount:M[a].indexCount,state:1+b});continue}for(a=0,o=M.length;a<o;a++)v.push({indexStart:M[a].indexStart,indexCount:M[a].indexCount,state:0})}}}e.visible=!0;var x=e.geometry;if(x.clearGroups(),0===v.length)return void(e.visible=!1);for(v.sort(function(e,t){return e.indexStart-t.indexStart}),a=0,o=v.length;a<o;a++){var I=v[a].indexStart,T=v[a].indexCount,w=v[a].state;if(0===a)x.addGroup(I,T,w);else{var C=v[a-1].indexStart,S=v[a-1].indexCount,A=v[a-1].state,k=C+S;w===A&&I===k?x.groups[x.groups.length-1].count+=T:x.addGroup(I,T,w)}}var R=[n.wireframeMaterial];for(a=0,o=g.length;a<o;a++){var B,L=g[a].split("|");"localClipping"==L[0]&&(B=n.wireframeMaterialForClip),R.push(B)}e.material=R}},{key:"updatePickingMeshesState",value:function(e,t,i,r){for(var n=this.pickingNodeMap,a=Object.keys(n),o=0,s=a.length;o<s;o++)for(var l=n[a[o]],u=0,c=l.length;u<c;u++)l[u].visible=!1,this._rebuildGeometryGroup(l[u],t,i,r,e)}}]),t}(s.PickingNodeGenerator);s.PickingBatchedWireFrameGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingMeshGroup",i}return _inherits(t,e),_createClass(t,[{key:"disposePickingNodeById",value:function(e){for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)n[a].material=null,n[a].geometry.dispose(),n[a]=null}},{key:"removeFormPickingNodeGroup",value:function(e){if(this.pickingNodeGroup)for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)this.pickingNodeGroup.remove(nodes[a])}},{key:"addToPickingNodeMap",value:function(e,t,i){this.pickingNodeMap||(this.pickingNodeMap={}),this.pickingNodeMap[e]||(this.pickingNodeMap[e]={}),this.pickingNodeMap[e][t]=i,this.addToPickingNodeGroup(i)}},{key:"generatePickingMeshes",value:function(e){var t=this;this.manager.traverseActiveMeshMap(e,function(e,i,r){if(!t._isExistNode(e,i)){for(var n=[],a=0,o=r.length;a<o;a++){var l=r[a],u=new THREE.BufferGeometry;u.addAttribute("position",l.geometry.getAttribute("position")),u.setIndex(l.geometry.getIndex()),u._withDrawRange&&u.setDrawRange(l.geometry.drawRange.start,l.geometry.drawRange.count);var c=l.isLineSegments?THREE.LineSegments:THREE.Mesh,h=new c(u,s.MaterialUtil.DefaultMaterial);s.GeomUtil.copyMeshProperties(h,l),h.renderOrder=1,n.push(h)}t.addToPickingNodeMap(e,i,n)}})}},{key:"_isExistNode",value:function(e,t){return!!(this.pickingNodeMap&&this.pickingNodeMap[e]&&this.pickingNodeMap[e][t])}},{key:"updatePickingMeshesState",value:function(e,t,i){if(this.pickingNodeMap)for(var r=e.selectedMaterial,n=this.pickingNodeMap,a=this.manager,o=0,s=t.length;o<s;o++){var l=t[o];if(n[l]&&a.isPickableNode(l)){var u=a.getActiveMeshMapById(l);if(u)for(var c=Object.keys(n[l]),h=0,d=c.length;h<d;h++){var f=c[h];if(u[f]){var p=n[l][f];if(p)for(var m=0,v=p.length;m<v;m++)p[m].material=r,p[m].visible=!0}}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=t[i],a=Object.keys(e[n]),o=0,s=a.length;o<s;o++)for(var l=e[n][a[o]],u=0,c=l.length;u<c;u++)l[u].visible=!1}},{key:"updatePickingMeshes",value:function(e,t,i){return this.generatePickingMeshes(t),this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i),this.getPickingNodeGroup()}}]),t}(s.PickingNodeGenerator);s.PickingMeshGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingWireFrameGroup",i}return _inherits(t,e),_createClass(t,[{key:"disposePickingNodeById",value:function(e){for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)n[a].material=null,n[a].geometry.dispose(),n[a]=null}},{key:"addToPickingNodeMap",value:function(e,t,i){this.pickingNodeMap||(this.pickingNodeMap={}),this.pickingNodeMap[e]||(this.pickingNodeMap[e]={}),this.pickingNodeMap[e][t]=i,this.addToPickingNodeGroup(i)}},{key:"removeFormPickingNodeGroup",value:function(e){if(this.pickingNodeGroup)for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)this.pickingNodeGroup.remove(nodes[a])}},{key:"generatePickingMeshes",value:function(e){var t=this,i=this.manager;this.manager.manager.getMeshManager().traverseActiveMeshMap(e,function(e,r,n){if(!(n&&n.length&&n[0].isLineSegments||t._isExistNode(e,r))){var a,o,l=n[0].geometryId,u=[];for(a=0,o=n.length;a<o;a++)u.push(n[a].geometry);var c=i._getWireframeGeometryById(l,u),h=[];for(a=0,o=c.length;a<o;a++){var d=new THREE.LineSegments(c[a],s.MaterialUtil.DefaultMaterial);s.GeomUtil.copyMeshProperties(d,n[a]),d.renderOrder=0,h.push(d)}t.addToPickingNodeMap(e,r,h)}})}},{key:"_isExistNode",value:function(e,t){return!!(this.pickingNodeMap&&this.pickingNodeMap[e]&&this.pickingNodeMap[e][t])}},{key:"updatePickingMeshesState",value:function(e,t,i){if(this.pickingNodeMap)for(var r=e.selectedMaterial,n=this.pickingNodeMap,a=this.manager.manager.getMeshManager(),o=0,s=t.length;o<s;o++){var l=t[o];if(n[l]&&a.isPickableNode(l)){var u=a.getActiveMeshMapById(l);if(u)for(var c=Object.keys(n[l]),h=0,d=c.length;h<d;h++){var f=c[h];if(u[f]){var p=n[l][f];if(p)for(var m=0,v=p.length;m<v;m++)p[m].material=r,p[m].visible=!0}}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=t[i],a=Object.keys(e[n]),o=0,s=a.length;o<s;o++)for(var l=e[n][a[o]],u=0,c=l.length;u<c;u++)l[u].visible=!1}},{key:"updatePickingMeshes",value:function(e,t,i){return this.generatePickingMeshes(t),this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i),this.getPickingNodeGroup()}}]),t}(s.PickingNodeGenerator);s.PickingWireFrameGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingInstancedMeshGroup",i}return _inherits(t,e),_createClass(t,[{key:"generatePickingMeshes",value:function(){var e=this,t=this.manager,i=t.cachedInstance,r=!s.GlobalData.BatchMergeEnabled;t.traverseInstanceNodeMap(null,function(t,n){for(var a=[],o=n[0],l=0,u=o.length;l<u;l++){var c=o[l].geometry,h=new THREE.InstancedBufferGeometry;h.addAttribute("position",c.getAttribute("position")),h.addAttribute("mcol0",c.getAttribute("mcol0")),h.addAttribute("mcol1",c.getAttribute("mcol1")),h.addAttribute("mcol2",c.getAttribute("mcol2")),h.addAttribute("mcol3",c.getAttribute("mcol3")),h.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(i.vState[t]),1,1)),h.setIndex(c.getIndex());var d=new THREE.Mesh(h,s.MaterialUtil.DefaultMaterial);d.name=t,d.frustumCulled=!1,d.renderOrder=r?1:0,a.push(d)}e.addToPickingNodeMap(t,a)})}},{key:"updatePickingMeshesState",value:function(e,t,i,r){if(this.pickingNodeMap){var n=this.manager.manager,a=this.pickingNodeMap,o=r.getFilter(),l=null;o&&(l=o.getLocalClippingList());for(var u=0,c=t.length;u<c;u++){var h=t[u];if(n.isPickableNode(h)){var d=n.getMeshManager().getNodeIdxMapByUserId(h);if(d)for(var f=Object.keys(d),p=0,m=f.length;p<m;p++){var v=f[p],g=a[v];if(g)for(var y=d[v],M=0,E=g.length;M<E;M++){var b=g[M];l&&l[h]?b.material=e.instancedSelectedMaterialForClip:b.material=e.instancedSelectedMaterial,b.visible=!0;for(var x=b.geometry,I=x.getAttribute("vState").array,T=0,w=y.length;T<w;T++)I[y[T]]=s.EnumInstanceState.NONE;x.getAttribute("vState").needsUpdate=!0}}}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=0,o=n.length;a<o;a++)n[a].visible=!1,n[a].geometry.getAttribute("vState").array.fill(s.EnumInstanceState.HIDDEN),n[a].geometry.getAttribute("vState").needsUpdate=!0}}]),t}(s.PickingNodeGenerator);s.PickingInstancedMeshGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingInstancedWireFrameGroup",i}return _inherits(t,e),_createClass(t,[{key:"generatePickingMeshes",value:function(){var e=this,t=this.manager,i=t.manager.getCachedInstanceData(),r=!s.GlobalData.BatchMergeEnabled;t._traverseWireframeGeometryMap(function(t,n){for(var a=[],o=0,l=n.length;o<l;o++){var u=n[o],c=new THREE.InstancedBufferGeometry;c.addAttribute("position",u.getAttribute("position")),c.addAttribute("mcol0",u.getAttribute("mcol0")),c.addAttribute("mcol1",u.getAttribute("mcol1")),c.addAttribute("mcol2",u.getAttribute("mcol2")),c.addAttribute("mcol3",u.getAttribute("mcol3")),c.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(i.vState[t]),1,1)),c.setIndex(u.getIndex());var h=new THREE.LineSegments(c,s.MaterialUtil.DefaultMaterial);h.name=t,h.frustumCulled=!1,h.renderOrder=r?0:1,a.push(h)}e.addToPickingNodeMap(t,a)})}},{key:"updatePickingMeshesState",value:function(e,t,i,r){if(this.pickingNodeMap){var n=this.manager.manager,a=this.pickingNodeMap,o=r.getFilter(),l=null;o&&(l=o.getLocalClippingList());for(var u=0,c=t.length;u<c;u++){var h=t[u];if(n.isPickableNode(h)){var d=n.getMeshManager().getNodeIdxMapByUserId(h);if(d)for(var f=Object.keys(d),p=0,m=f.length;p<m;p++){var v=f[p],g=a[v];if(g)for(var y=d[v],M=0,E=g.length;M<E;M++){var b=g[M];l&&l[h]?b.material=e.instancedWireFrameMaterialForClip:b.material=e.instancedWireFrameMaterial,b.visible=!0;for(var x=b.geometry,I=x.getAttribute("vState").array,T=0,w=y.length;T<w;T++)I[y[T]]=s.EnumInstanceState.NONE;x.getAttribute("vState").needsUpdate=!0}}}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=0,o=n.length;a<o;a++)n[a].visible=!1,n[a].geometry.getAttribute("vState").array.fill(s.EnumInstanceState.HIDDEN),n[a].geometry.getAttribute("vState").needsUpdate=!0}}]),t}(s.PickingNodeGenerator);s.PickingInstancedWireFrameGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingIncrementInstancedMeshGroup",i}return _inherits(t,e),_createClass(t,[{key:"_isExistNode",value:function(e){return!(!this.pickingNodeMap||!this.pickingNodeMap[e])}},{key:"generatePickingMeshes",value:function(){var e=this,t=this.manager,i=t.getCachedInstanceData(),r=!s.GlobalData.BatchMergeEnabled;t.traverseActiveMeshMap(null,function(t,n){if(!e._isExistNode(t)){for(var a=[],o=0,l=n.length;o<l;o++){var u=n[o].geometry,c=new THREE.InstancedBufferGeometry;c.addAttribute("position",u.getAttribute("position")),c.addAttribute("mcol0",u.getAttribute("mcol0")),c.addAttribute("mcol1",u.getAttribute("mcol1")),c.addAttribute("mcol2",u.getAttribute("mcol2")),c.addAttribute("mcol3",u.getAttribute("mcol3")),c.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(i.vState[t]),1,1)),c.setIndex(u.getIndex());var h=new THREE.Mesh(c,s.MaterialUtil.DefaultMaterial);h.name=t,h.frustumCulled=!1,h.renderOrder=r?1:0,a.push(h)}e.addToPickingNodeMap(t,a)}})}},{key:"updatePickingMeshesState",value:function(e,t,i){if(this.pickingNodeMap)for(var r=e.selectedMaterial,n=this.manager.manager,a=this.pickingNodeMap,o=0,l=t.length;o<l;o++){var u=t[o];if(n.isPickableNode(u)){var c=n.getMeshManager().getNodeIdxMapByUserId(u);if(c){var h=Object.keys(c);n.getMeshManager().traverseActiveMeshMap(h,function(e,t){if(a[e])for(var i=c[e],n=a[e],o=0,l=n.length;o<l;o++){var u=n[o];u.material=r,u.visible=!0;for(var h=u.geometry,d=h.getAttribute("vState").array,f=0,p=i.length;f<p;f++)d[i[f]]=s.EnumInstanceState.NONE;h.getAttribute("vState").needsUpdate=!0}})}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=0,o=n.length;a<o;a++)n[a].visible=!1,n[a].geometry.getAttribute("vState").array.fill(s.EnumInstanceState.HIDDEN),n[a].geometry.getAttribute("vState").needsUpdate=!0}},{key:"updatePickingMeshes",value:function(e,t,i){return this.generatePickingMeshes(),this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i),this.getPickingNodeGroup()}}]),t}(s.PickingNodeGenerator);s.PickingIncrementInstancedMeshGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingIncrementInstancedWireFrameGroup",i}return _inherits(t,e),_createClass(t,[{key:"_isExistNode",value:function(e){return!(!this.pickingNodeMap||!this.pickingNodeMap[e])}},{key:"generatePickingMeshes",value:function(){var e=this,t=this.manager.manager,i=t.getMeshManager(),r=t.getWireFrameManager(),n=i.getCachedInstanceData(),a=!s.GlobalData.BatchMergeEnabled;i.traverseActiveMeshMap(null,function(t,i){if(!e._isExistNode(t)){var o=[];r._createGeometryById(t),r._traverseWireframeGeometryMapById(t,function(e,t){var i=new THREE.InstancedBufferGeometry;i.addAttribute("position",e.getAttribute("position")),i.addAttribute("mcol0",e.getAttribute("mcol0")),i.addAttribute("mcol1",e.getAttribute("mcol1")),i.addAttribute("mcol2",e.getAttribute("mcol2")),i.addAttribute("mcol3",e.getAttribute("mcol3")),i.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(n.vState[t]),1,1)),i.setIndex(e.getIndex());var r=new THREE.Mesh(i,s.MaterialUtil.DefaultMaterial);r.name=t,r.frustumCulled=!1,r.renderOrder=a?1:0,o.push(r)}),e.addToPickingNodeMap(t,o)}})}},{key:"updatePickingMeshesState",value:function(e,t,i){if(this.pickingNodeMap)for(var r=e.selectedMaterial,n=this.manager.manager,a=this.pickingNodeMap,o=0,l=t.length;o<l;o++){var u=t[o];if(n.isPickableNode(u)){var c=n.getMeshManager().getNodeIdxMapByUserId(u);if(c){var h=Object.keys(c);n.getMeshManager().traverseActiveMeshMap(h,function(e,t){if(a[e])for(var i=c[e],n=a[e],o=0,l=n.length;o<l;o++){var u=n[o];u.material=r,u.visible=!0;for(var h=u.geometry,d=h.getAttribute("vState").array,f=0,p=i.length;f<p;f++)d[i[f]]=s.EnumInstanceState.NONE;h.getAttribute("vState").needsUpdate=!0}})}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=0,o=n.length;a<o;a++)n[a].visible=!1,n[a].geometry.getAttribute("vState").array.fill(s.EnumInstanceState.HIDDEN),n[a].geometry.getAttribute("vState").needsUpdate=!0}},{key:"updatePickingMeshes",value:function(e,t,i){return this.generatePickingMeshes(),this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i),this.getPickingNodeGroup()}}]),t}(s.PickingNodeGenerator);s.PickingIncrementInstancedWireFrameGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingExternalMeshGroup",i.pickingEffecter=i.manager.getModelManager().viewer.rendererManager.getPickingEffecter(),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.pickingEffecter=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_disposeGeometryByNode",value:function(e){e.traverseVisible(function(t){t!==e&&(t.isMesh||t.isLine)&&(t.material=null,t.geometry.dispose())})}},{key:"disposePickingNodeById",value:function(e){for(var t=this.pickingNodeMap[e],i=0,r=t.length;i<r;i++)this._disposeGeometryByNode(t[i]),t[i]=null}},{key:"updatePickingMeshes",value:function(e,t,i){if(this.pickingNodeMap){for(var r=Object.keys(this.pickingNodeMap),n=0,a=r.length;n<a;n++){var o,s,l=r[n],u=this.pickingNodeMap[l];if(i[l]&&this.manager.isPickableNode({userId:l,name:l}))for(o=0,s=u.length;o<s;o++)u[o].visible=!0;else for(o=0,s=u.length;o<s;o++)u[o].visible=!1}return this.getPickingNodeGroup()}}},{key:"addNode",value:function(e,t){this.addToPickingNodeMap(e,t)}},{key:"removeNodeById",value:function(e){this.removeFromPickingNodeMap(e)}},{key:"clearNodes",value:function(){this.clearData()}},{key:"addToPickingNodeMap",value:function(e,t){for(var i=[],r=!s.GlobalData.BatchMergeEnabled,n=0,a=t.length;n<a;n++){var o=this._createPickingNodeBy(t[n],r);if(o)if(Array.isArray(o))for(var l=0,u=o.length;l<u;l++)o[l].name=e,i.push(o[l]),t[n]._oriMatrix&&(o[l]._oriMatrix=(new THREE.Matrix4).compose(o[l].position,o[l].quaternion,o[l].scale));else o.name=e,i.push(o),t[n]._oriMatrix&&(o._oriMatrix=(new THREE.Matrix4).compose(o.position,o.quaternion,o.scale))}this.pickingNodeMap||(this.pickingNodeMap={}),this.pickingNodeMap[e]=i,this.addToPickingNodeGroup(i)}},{key:"_createPickingNodeBy",value:function(e,t){var i=this,r={},n={};if("Object3D"===e.type||e instanceof THREE.Group||e instanceof s.ObjectGroup){var a=new THREE.Group;a.copy(e,!1),e.animations&&(a.animations=e.animations),e.traverseVisible(function(a){if(a!==e){var o=null;if("Object3D"===a.type||a instanceof THREE.Group||a instanceof s.ObjectGroup||a instanceof THREE.Bone)o=a instanceof THREE.Bone?new THREE.Bone:new THREE.Group,o.copy(a,!1),r[a.uuid]={destination:o,source:a};else{if(!a.isMesh&&!a.isLine)return;o=i._createPickingMeshesBy(a,t),o&&(n[a.uuid]={destination:o,source:a})}o=null}});var o,l,u,c=Object.keys(r);for(o=0,l=c.length;o<l;o++){var h=r[c[o]];h.source.parent!==e?(u=h.source.parent.uuid,r[u]&&r[u].destination.add(h.destination)):a.add(h.destination)}var d=Object.keys(n);for(o=0,l=d.length;o<l;o++){var f,p,m=n[d[o]];if(m.source.parent===e)if(Array.isArray(m.destination))for(f=0,p=m.destination.length;f<p;f++)a.add(m.destination[f]);else a.add(m.destination);else if(u=m.source.parent.uuid,Array.isArray(m.destination))for(f=0,p=m.destination.length;f<p;f++)r[u].destination.add(m.destination[f]);else r[u].destination.add(m.destination)}return a}return e.isMesh||e.isLine?i._createPickingMeshesBy(e,t):null}},{key:"_createLineMeshBy",value:function(e,t,i){var r,n,a=this.pickingEffecter;if(s.GlobalData.PickingLineWidthEnabled){r=a.selectedLineMaterial;var o=new THREE.LineSegmentsGeometry;e.isLineSegments?o.fromLineSegments(e):e.isLineLoop?o.fromLineLoop(e):o.fromLine(e),n=new THREE.LineSegments2(o,r),s.GeomUtil.copyMeshProperties(n,e),n.renderOrder=i?1:0}else r=a.selectedMaterial,n=e.isLineSegments?new THREE.LineSegments(t,r):e.isLineLoop?new THREE.LineLoop(t,r):new THREE.Line(t,r),s.GeomUtil.copyMeshProperties(n,e),n.renderOrder=i?1:0;return n}},{key:"_createMeshBy",value:function(e,t,i){var r=this.pickingEffecter.selectedMaterial,n=new THREE.Mesh(t,r);return s.GeomUtil.copyMeshProperties(n,e),n.renderOrder=i?1:0,n}},{key:"_createSkinnedMeshBy",value:function(e,t,i){var r=this.pickingEffecter.skinningSelectedMaterial,n=new THREE.SkinnedMesh(t,r);return s.GeomUtil.copyMeshProperties(n,e),n.renderOrder=i?1:0,n.bindMatrix.copy(e.bindMatrix),n.bindMatrixInverse.copy(e.bindMatrixInverse),n.bindMode=e.bindMode,n.userData=e.userData,n.skeleton=e.skeleton,n}},{key:"_createSkinnedWireFrameBy",value:function(e,t,i){if(!t.index)return null;var r=this.pickingEffecter.skinningWireframeMaterial,n=s.BuildEdge(t.attributes.position.array,t.index.array),a=new THREE.BufferGeometry;a.setIndex(new THREE.Uint32BufferAttribute(n,1)),a.addAttribute("position",t.getAttribute("position")),a.addAttribute("skinIndex",t.getAttribute("skinIndex")),a.addAttribute("skinWeight",t.getAttribute("skinWeight"));var o=new s.SkinnedLineEx(a,r);return s.GeomUtil.copyMeshProperties(o,e),o.bindMatrix.copy(e.bindMatrix),o.bindMatrixInverse.copy(e.bindMatrixInverse),o.bindMode=e.bindMode,o.userData=e.userData,o.skeleton=e.skeleton,o.renderOrder=i?0:1,o}},{key:"_createWireFrameBy",value:function(e,t,i){if(!t.index)return null;var r=this.pickingEffecter.wireframeMaterial,n=s.BuildEdge(t.attributes.position.array,t.index.array),a=new THREE.BufferGeometry;a.setIndex(new THREE.Uint32BufferAttribute(n,1)),a.addAttribute("position",t.getAttribute("position"));var o=new THREE.LineSegments(a,r);return s.GeomUtil.copyMeshProperties(o,e),o.renderOrder=i?0:1,o}},{key:"_createPickingMeshesBy",value:function(e,t){var i=s.GeomUtil.createBufferGeometryWithPosAndSkin(e.geometry);if(!i)return null;if(e.isLineSegments)return this._createLineMeshBy(e,i,t);var r,n;return e.isSkinnedMesh?(r=this._createSkinnedMeshBy(e,i,t),n=this._createSkinnedWireFrameBy(e,i,t)):(r=this._createMeshBy(e,i,t),n=this._createWireFrameBy(e,i,t)),n?[r,n]:r}},{key:"_hasObjectId",value:function(e){return!(!this.pickingNodeMap||!this.pickingNodeMap[e])}},{key:"setAccumulateTransform",value:function(e,t,i,r){if(this._hasObjectId(e))for(var n=this.pickingNodeMap[e],a=0,o=n.length;a<o;a++)this.manager.setAccumulateTransformForMesh(n[a],t,i,r)}},{key:"setTransform",value:function(e,t,i,r,n){if(this._hasObjectId(e))for(var a=this.pickingNodeMap[e],o=0,s=a.length;o<s;o++)this.manager.setTransformForMesh(a[o],t,i,r,n)}},{key:"rotateOnBasePoint",value:function(e,t,i,r){if(this._hasObjectId(e))for(var n=this.pickingNodeMap[e],a=0,o=n.length;a<o;a++){var s=n[a],l=s.quaternion.clone(),u=l.clone().inverse(),c=s.position.clone(),h=(new THREE.Quaternion).setFromAxisAngle(i,r);s.quaternion.multiply(h);var d=t.clone().sub(c).applyQuaternion(u).applyQuaternion(s.quaternion);s.position.sub(d).add(t.clone().sub(c)),s.updateMatrixWorld()}}},{key:"scaleOnBasePoint",value:function(e,t,i){if(this._hasObjectId(e))for(var r=this.pickingNodeMap[e],n=0,a=r.length;n<a;n++){var o=r[n];o.scale.multiply(i);var s=i.clone().sub(new THREE.Vector3(1,1,1)),l=o.quaternion.clone(),u=l.clone().inverse(),c=o.position.clone(),h=t.clone().sub(c).applyQuaternion(u).multiply(s).applyQuaternion(l);o.position.sub(h),o.updateMatrixWorld()}}},{key:"applyTransform",value:function(e,t,i,r){if(this._hasObjectId(e)){var n=this.manager.getTransformMatrix(t,i,r);this.applyTransformMatrix(e,n)}}},{key:"applyTransformMatrix",value:function(e,t,i){if(this._hasObjectId(e))for(var r=this.pickingNodeMap[e],n=0,a=r.length;n<a;n++)this.manager.updateMatrixWorldForMesh(r[n],t,i)}}]),t}(s.PickingNodeGenerator);s.PickingExternalMeshGenerator=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.nodeGroupName="PickingSegmentMeshGroup",i.pickingEffecter=i.manager.viewer.rendererManager.getPickingEffecter(),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.pickingEffecter=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_createPickingMeshBy",value:function(e,t){var i=this.pickingEffecter.selectedMaterial,r=e.geometry,n=new THREE.BufferGeometry;n.addAttribute("position",r.getAttribute("position")),n.setIndex(r.getIndex());var a=e.isLineSegments?THREE.LineSegments:THREE.Mesh,o=new a(n,i);return s.GeomUtil.copyMeshProperties(o,e),o.renderOrder=t?1:0,o}},{key:"_createPickingWireFrameBy",value:function(e,t){if(e.isLineSegments)return null;var i=this.pickingEffecter.wireframeMaterial,r=e.geometry,n=s.BuildEdge(r.attributes.position.array,r.index.array),a=new THREE.BufferGeometry;a.addAttribute("position",r.getAttribute("position")),a.setIndex(new THREE.Uint32BufferAttribute(n,1));var o=new THREE.LineSegments(a,i);return s.GeomUtil.copyMeshProperties(o,e),o.renderOrder=t?0:1,o}},{key:"disposePickingNodeById",value:function(e){for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)n[a].material=null,n[a].geometry.dispose(),n[a]=null}},{key:"removeFormPickingNodeGroup",value:function(e){if(this.pickingNodeGroup)for(var t=Object.keys(this.pickingNodeMap[e]),i=0,r=t.length;i<r;i++)for(var n=this.pickingNodeMap[e][t[i]],a=0,o=n.length;a<o;a++)this.pickingNodeGroup.remove(nodes[a])}},{key:"addToPickingNodeMap",value:function(e,t,i){this.pickingNodeMap||(this.pickingNodeMap={}),this.pickingNodeMap[e]||(this.pickingNodeMap[e]={}),this.pickingNodeMap[e][t]=i,this.addToPickingNodeGroup(i)}},{key:"generatePickingMeshes",value:function(e){var t=this,i=this.manager,r=!s.GlobalData.BatchMergeEnabled;i.traverseMeshNodeMapByUserIds(e,function(e,i,n){var a=n.userId;if(!t._isExistNode(a,i)){for(var o=[],s=0,l=e.length;s<l;s++){var u=e[s],c=t._createPickingMeshBy(u,r);o.push(c);var h=t._createPickingWireFrameBy(u,r);h&&o.push(h)}t.addToPickingNodeMap(a,i,o)}})}},{key:"_isExistNode",value:function(e,t){return!!(this.pickingNodeMap&&this.pickingNodeMap[e]&&this.pickingNodeMap[e][t])}},{key:"updatePickingMeshesState",value:function(e,t,i){if(this.pickingNodeMap)for(var r=(e.selectedMaterial,this.pickingNodeMap),n=this.manager,a=0,o=t.length;a<o;a++){var s=t[a];if(r[s]){var l=n.getNodeIdsByUserId(s);if(l&&l.length)for(var u=0,c=l.length;u<c;u++){var h=l[u],d=n.getNodeInfoByNodeId(h);if(n.isPickableNode(d)){var f=r[s][h];if(f)for(var p=0,m=f.length;p<m;p++)f[p].visible=!0}}}}}},{key:"resetPickingMeshesState",value:function(){if(this.pickingNodeMap)for(var e=this.pickingNodeMap,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=t[i],a=Object.keys(e[n]),o=0,s=a.length;o<s;o++)for(var l=e[n][a[o]],u=0,c=l.length;u<c;u++)l[u].visible=!1}},{key:"updatePickingMeshes",value:function(e,t,i){return this.generatePickingMeshes(t),this.resetPickingMeshesState(),this.updatePickingMeshesState(e,t,i),this.getPickingNodeGroup()}}]),t}(s.PickingNodeGenerator);s.PickingSegmentMeshGenerator=e}();var w=w||{};w.brdf_vs=["varying vec2 vUV;","void main() {","\tvUV = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),
w.brdf_fs=["varying vec2 vUV;","uniform sampler2D HammersleyTable;","const float PI = 3.14159265358979;","float GGX(float NdotV, float alpha)","{","\tfloat alpha2 = pow(alpha, 2.0);","\treturn 2.0 * NdotV / (NdotV + sqrt(alpha2 + (1.0 - alpha2) * NdotV * NdotV));","}","float G_Smith(float NdotV, float NdotL, float roughness)","{","\tfloat alpha = pow(roughness, 2.0);","\treturn GGX(NdotV, alpha) * GGX(NdotL, alpha);","}","vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness)","{","\tfloat a = roughness * roughness;","\tfloat Phi = 2.0 * PI * Xi.x; ","\tfloat CosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y)); ","\tfloat SinTheta = sqrt(1.0 - CosTheta * CosTheta);","\tvec3 H;","\tH.x = SinTheta * cos(Phi); ","\tH.y = SinTheta * sin(Phi); ","\tH.z = CosTheta;","\tvec3 UpVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0); ","\tvec3 TangentX = normalize(cross(UpVector, N)); ","\tvec3 TangentY = cross(N, TangentX);","\treturn normalize(TangentX * H.x + TangentY * H.y + N * H.z);","}","vec2 IntegrateBRDF(float NdotV, float roughness)","{","\tvec3 N = vec3(0.0, 0.0, 1.0);","\tvec3 V = vec3(sqrt(1.0 - NdotV * NdotV), 0.0, NdotV);","\tvec2 result = vec2(0.0, 0.0);","\tconst int NumSamples = 1024;","\tfor (int i = 0; i < NumSamples; i++)","\t{","\t\tfloat u = float(i) / float(NumSamples);","\t\tvec2 Xi = vec2(u, texture2D(HammersleyTable, vec2(u)).r);","\t\tvec3 H = ImportanceSampleGGX(Xi, N, roughness);","\t\tvec3 L = 2.0 * dot(V, H) * H - V;","\t\tfloat NdotL = saturate(L.z);","\t\tfloat NdotH = saturate(H.z);","\t\tfloat VdotH = saturate(dot(V, H));","\t\tfloat NdotV = saturate(dot(N, V));","\t\tif (NdotL > 0.0)","\t\t{","\t\t\tfloat G = G_Smith(NdotV, NdotL, roughness);","\t\t\tfloat G_Vis = G * VdotH / (NdotH * NdotV); ","\t\t\tfloat F = pow(1.0 - VdotH, 5.0);","\t\t\tresult.x += (1.0 - F) * G_Vis;","\t\t\tresult.y += F * G_Vis;","\t\t}","\t}","\treturn result / float(NumSamples);","}","void main()","{","\tvec2 brdf = IntegrateBRDF(vUV.x, vUV.y);","\tgl_FragColor = vec4(brdf, 0.0, 1.0);","}"].join("\n"),w.BRDFMap=function(e,t){this.texture=null,this.resolution=t||512,this.brdfMaterial=new THREE.ShaderMaterial({vertexShader:w.brdf_vs,fragmentShader:w.brdf_fs,uniforms:{HammersleyTable:{value:e}},lights:!1}),this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(window.innerWidth,window.innerHeight),this.brdfMaterial),this.quad.position.z=-100},w.BRDFMap.prototype.constructor=w.BRDFMap,w.BRDFMap.prototype.generateMap=function(e){var t=new THREE.Scene;t.add(this.quad);var i=new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-1e4,1e4);i.position.z=100;var r=new THREE.WebGLRenderTarget(this.resolution,this.resolution,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat});e.render(t,i,r,!0),this.texture=r.texture},THREE.HDRCubeTextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.hdrLoader=new THREE.RGBELoader},THREE.HDRCubeTextureLoader.prototype.load=function(e,t,i,r,n){var a=function(e,t,i,r){var n=e[t+3],a=Math.pow(2,n-128)/255;i[r+0]=e[t+0]*a,i[r+1]=e[t+1]*a,i[r+2]=e[t+2]*a},o=function(){function e(e){t[0]=e;var r=i[0],n=r>>16&32768,a=r>>12&2047,o=r>>23&255;return o<103?n:o>142?(n|=31744,n|=(255==o?0:1)&&8388607&r):o<113?(a|=2048,n|=(a>>114-o)+(a>>113-o&1)):(n|=o-112<<10|a>>1,n+=1&a)}var t=new Float32Array(1),i=new Int32Array(t.buffer);return function(t,i,r,n){var a=t[i+3],o=Math.pow(2,a-128)/255;r[n+0]=e(t[i+0]*o),r[n+1]=e(t[i+1]*o),r[n+2]=e(t[i+2]*o)}}(),s=new THREE.CubeTexture;s.type=e,s.encoding=e===THREE.UnsignedByteType?THREE.RGBEEncoding:THREE.LinearEncoding,s.format=e===THREE.UnsignedByteType?THREE.RGBAFormat:THREE.RGBFormat,s.minFilter=s.encoding===THREE.RGBEEncoding?THREE.NearestFilter:THREE.LinearFilter,s.magFilter=s.encoding===THREE.RGBEEncoding?THREE.NearestFilter:THREE.LinearFilter,s.generateMipmaps=s.encoding!==THREE.RGBEEncoding,s.anisotropy=0;for(var l=this.hdrLoader,u=this.manager,c=0,h=0;h<t.length;h++)!function(i,r,n,h){var d=new THREE.FileLoader(u);d.setResponseType("arraybuffer"),d.load(t[i],function(t){c++;var n=l._parser(t);if(n){if(e===THREE.FloatType){for(var u=n.data.length/4*3,h=new Float32Array(u),d=0;d<u;d++)a(n.data,4*d,h,3*d);n.data=h}else if(e===THREE.HalfFloatType){for(var u=n.data.length/4*3,f=new Uint16Array(u),d=0;d<u;d++)o(n.data,4*d,f,3*d);n.data=f}if(void 0!==n.image)s[i].images=n.image;else if(void 0!==n.data){var p=new THREE.DataTexture(n.data,n.width,n.height);p.format=s.format,p.type=s.type,p.encoding=s.encoding,p.minFilter=s.minFilter,p.magFilter=s.magFilter,p.generateMipmaps=s.generateMipmaps,s.images[i]=p}6===c&&(s.needsUpdate=!0,r&&r(s))}},n,h)}(h,i,r,n);return s},w.HDRTextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.hdrLoader=new THREE.RGBELoader},w.HDRTextureLoader.prototype.load=function(e,t,i,r){var n=new THREE.DataTexture;return this.hdrLoader.load(e,function(e,i){e.flipY=!0,e.type=THREE.FloatType,e.format=THREE.RGBFormat,e.minFilter=THREE.LinearFilter,e.magFilter=THREE.LinearFilter;for(var r=e.image.width*e.image.height*3,a=new Float32Array(r),o=0;o<r;o++)!function(e,t,i,r){var n=e[t+3],a=Math.pow(2,n-128)/256;i[r+0]=e[t+0]*a,i[r+1]=e[t+1]*a,i[r+2]=e[t+2]*a}(e.image.data,4*o,a,3*o);e.image.data=a,n=e,t&&t(n)},i,r),n},w.equirectangular_vs=["varying vec3 pos;","void main() {","\tpos = vec3(modelMatrix * vec4(position, 1.0));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),w.equirectangular_fs=["varying vec3 pos;","uniform sampler2D map;","const float PI = 3.14159265358979;","const float INV_PI = 1.0 / PI;","vec2 sampleSphericalMap(vec3 v)","{","\tvec2 uv = vec2(atan(v.z, v.x), asin(v.y));","\tuv *= vec2(INV_PI * 0.5, INV_PI);","\tuv += 0.5;","\treturn uv;","}","void main() {","\tvec2 uv = sampleSphericalMap(normalize(pos));","\tvec4 color = texture2D(map, uv);","\tgl_FragColor = vec4(color.rgb, 1.0);","}"].join("\n"),w.EquirectangularMaterial=function(e){THREE.ShaderMaterial.call(this),this.type="EquirectangularMaterial",this.map=null,this.lights=!1,this.side=THREE.BackSide,this.defines={},this.uniforms=THREE.UniformsUtils.merge([{map:{value:null}}]),this.vertexShader=w.equirectangular_vs,this.fragmentShader=w.equirectangular_fs,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},void 0!==e&&(void 0!==e.attributes&&console.error("IBLMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e)),this.refreshUniforms()},w.EquirectangularMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),w.EquirectangularMaterial.prototype.constructor=w.EquirectangularMaterial,w.EquirectangularMaterial.prototype.isShaderMaterial=!0,w.EquirectangularMaterial.prototype.copy=function(e){return THREE.ShaderMaterial.prototype.copy.call(this,e),this.map=e.map,this},w.EquirectangularMaterial.prototype.refreshUniforms=function(){this.uniforms.map.value=this.map},w.HDRToCubeMap=function(e,t,i,r){var n=new THREE.CubeCamera(.1,10,r||512);if(i){var a={type:THREE.FloatType,format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter};n.renderTarget=new THREE.WebGLRenderTargetCube(r||512,r||512,a)}var o=new THREE.Scene,s=new EquirectangularMaterial({map:e}),l=new THREE.Mesh(new THREE.BoxBufferGeometry(2,2,2),s);return o.add(l),n.updateCubeMap(t,o),n.renderTarget.texture},w.IBLMaps=function(e,t,i){this.environmentMap=null,this.irradianceMap=null,this.prefilterMap=null,this.brdfMap=null,e&&this.loadMaps(e,t,void 0,i)},w.IBLMaps.prototype.constructor=w.IBLMaps,w.IBLMaps.prototype.loadMaps=function(e,t,i){t?this.loadHDRMaps(e,i):this.loadJPGMaps(e,i)},w.IBLMaps.prototype.loadHDRMaps=function(e,t){for(var i=this,r=["posx.hdr","negx.hdr","posy.hdr","negy.hdr","posz.hdr","negz.hdr"],n=[],a=0;a<6;++a)n.push(e+"/EnvMap_"+r[a]);var o=new THREE.HDRCubeTextureLoader;o.load(THREE.FloatType,n,function(n){i.environmentMap=n;for(var a=[],s=0;s<6;++s)a.push(e+"/IrradianceMap_"+r[s]);o.load(THREE.FloatType,a,function(n){i.irradianceMap=n;for(var a=[],s=0;s<6;++s)a.push(e+"/PrefilterMap_"+r[s]);o.load(THREE.FloatType,a,function(r){i.prefilterMap=r;var n=new w.HDRTextureLoader,a=e+"/brdf.hdr";n.load(a,function(e){i.brdfMap=e,t(i,!0)})})})})},w.IBLMaps.prototype.loadJPGMaps=function(e,t){var i=this,r=new THREE.CubeTextureLoader;r.setCrossOrigin("anonymous"),r.load(e,function(e){i.environmentMap=e,t(i,!1)})},w.IBLMaterial=function(e){THREE.MeshStandardMaterial.call(this),this.type="IBLMaterial",this.IBLEnabled=!0,this.debug=0,this.iblFactor=1,this.gamma=2.2,this.color=new THREE.Color(16777215),this.roughness=1,this.metalness=0,this.originRoughness=1,this.originMetalness=0,this._referenceCount=1,this._imageByteSize=0,this.opacity=1,this.aoMap=null,this.IBLMaps=null,this.shift=.5,this.A=.27,this.B=.29,this.C=.052,this.D=.2,this.E=0,this.F=.18,this.scale=.897105;var t=(new THREE.Color).setHex(3330982),i=[t.r,t.g,t.b,1];this.colorState=s.EnumShaderColorState.NONE,this.blinkColor=(new THREE.Vector4).fromArray(i),this.blinkCoefficient=0,this.receiveIBL=!0,this.viewshedCount=-1,this.viewshedContents=[],this.viewshedDepthMaps=[],this.heightLimitSampler=null,this.heightColorSampler=null,this.heightLimitOrthoMatrix=new THREE.Matrix4,this.heightLimit=0,this.useHeightLimit=!1,this.emissive=new THREE.Color(0,0,0),this.useCSM=s.GlobalData.EnableCSM,this.useAlphaMap=!1,this.defines={},this.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms,{IBLEnabled:{value:!0},debug:{value:0},iblFactor:{value:1},gamma:{value:2.2},albedo:{value:new THREE.Color(16777215)},aoMap:{value:null},irradianceMap:{value:null},prefilterMap:{value:null},brdfMap:{value:null},shift:{value:.18},A:{value:.27},B:{value:.29},C:{value:.052},D:{value:.2},E:{value:0},F:{value:.18},scale:{value:.897105},colorState:{value:0},blinkColor:{value:(new THREE.Vector4).fromArray(i)},blinkCoefficient:{value:0}},{viewshedCount:{value:-1},viewshedContents:{value:[]},viewshedDepthMaps:{value:[]}},{heightLimitSampler:{value:null},heightColorSampler:{value:null},heightLimitOrthoMatrix:{value:new THREE.Matrix4},heightLimit:{value:0},useHeightLimit:{value:!1}}]),this.lights=!0,this.vertexShader=w.IBLVertexShader,this.fragmentShader=w.IBLFragmentShader,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},void 0!==e&&(void 0!==e.attributes&&console.error("IBLMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e)),this.useCSM?this.defines.USE_CSM="":delete this.defines.USE_CSM,this.useAlphaMap?this.defines.USE_ALPHAMAP="":delete this.defines.USE_ALPHAMAP},w.IBLMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype),w.IBLMaterial.prototype.constructor=w.IBLMaterial,w.IBLMaterial.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var r=this[t];void 0!==r&&(r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]="overdraw"===t?Number(i):i)}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},w.IBLMaterial.prototype.copy=function(e){return THREE.MeshStandardMaterial.prototype.copy.call(this,e),this.IBLEnabled=e.IBLEnabled,this.debug=e.debug,this.gamma=e.gamma,this.color.copy(e.color),this.aoMap=e.aoMap,this.IBLMaps=e.IBLMaps,this.shift=e.shift,this.A=e.A,this.B=e.B,this.C=e.C,this.D=e.D,this.E=e.E,this.F=e.F,this.scale=e.scale,this.colorState=e.colorState,this.blinkColor.copy(e.blinkColor),this.blinkCoefficient=e.blinkCoefficient,this.viewshedCount=e.viewshedCount,this.viewshedContents=e.viewshedContents,this.viewshedDepthMaps=e.viewshedDepthMaps,this.iblFactor=e.iblFactor,this.useCSM=e.useCSM,this.heightLimitSampler=e.heightLimitSampler,this.heightColorSampler=e.heightColorSampler,this.heightLimitOrthoMatrix=e.heightLimitOrthoMatrix,this.heightLimit=e.heightLimit,this.useHeightLimit=e.useHeightLimit,this},w.IBLMaterial.prototype.refreshUniforms=function(){this.uniforms.IBLEnabled.value=this.IBLEnabled,this.uniforms.debug.value=this.debug,this.uniforms.gamma.value=this.gamma,this.uniforms.iblFactor.value=this.iblFactor,this.uniforms.albedo.value.set(this.color),this.uniforms.aoMap.value=this.aoMap,this.IBLMaps&&(this.uniforms.irradianceMap.value=this.IBLMaps.irradianceMap,this.uniforms.prefilterMap.value=this.IBLMaps.prefilterMap,this.uniforms.brdfMap.value=this.IBLMaps.brdfMap),this.uniforms.shift.value=this.shift,this.uniforms.A.value=this.A,this.uniforms.B.value=this.B,this.uniforms.C.value=this.C,this.uniforms.D.value=this.D,this.uniforms.E.value=this.E,this.uniforms.F.value=this.F,this.uniforms.scale.value=this.scale,this.uniforms.viewshedCount.value=this.viewshedCount,this.uniforms.viewshedContents.value=this.viewshedContents,this.uniforms.viewshedDepthMaps.value=this.viewshedDepthMaps,this.viewshedCount>0?this.defines.VIEW_SHED_MODE="":delete this.defines.VIEW_SHED_MODE,this.useCSM?this.defines.USE_CSM="":delete this.defines.USE_CSM,this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient,this.uniforms.colorState.value=this.colorState,this.heightLimitSampler?this.defines.HEIGHT_LIMIT_READ="":delete this.defines.HEIGHT_LIMIT_READ,this.uniforms.heightLimitOrthoMatrix.value=this.heightLimitOrthoMatrix,this.uniforms.heightLimitSampler.value=this.heightLimitSampler,this.uniforms.heightColorSampler.value=this.heightColorSampler,this.uniforms.heightLimit.value=this.heightLimit,this.uniforms.useHeightLimit.value=this.useHeightLimit},w.IBLMaterial.prototype.setBlinkColor=function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient,this.uniforms.colorState.value=s.EnumShaderColorState.BLINK},w.IBLMaterial.prototype.updateBlinkUniformValue=function(e,t,i){this.uniforms.colorState.value=e,this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i},w.IBLMaterial.prototype.resetBlinkUniformValue=function(){this.uniforms.colorState.value=this.colorState,this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient},w.IBLProbe=function(e,t,i,r,n,a,o){this.environmentMap=e,this.hammersleyTable=null,this.irradianceMap=null,this.prefilterMap=null,this.brdfMap=null,this.hammersleyUrl=t,this.irradianceResolution=r||32,this.prefilterResolution=n||128,this.brdfResolution=a||512,this.maxMipLevel=o||1,this.isHDR=!1,this.isComputed=!1,this.onSuccess=i,this.loadHammersleyTable()},w.IBLProbe.prototype.constructor=w.IBLProbe,w.IBLProbe.prototype.loadHammersleyTable=function(){var e=this;(new THREE.TextureLoader).load(this.hammersleyUrl,function(t){e.hammersleyTable=t,e.initMap(),e.onSuccess&&e.onSuccess()})},w.IBLProbe.prototype.initMap=function(){this.irradianceMap=new w.IrradianceMap(this.environmentMap,this.irradianceResolution),this.prefilterMap=new w.PrefilterMap(this.environmentMap,this.hammersleyTable,this.prefilterResolution,this.maxMipLevel),this.brdfMap=new w.BRDFMap(this.hammersleyTable,this.brdfResolution)},w.IBLProbe.prototype.setEnvironmentMap=function(e){this.environmentMap=e,this.irradianceMap.irradianceMaterial.uniforms.environmentMap.value=this.environmentMap,this.prefilterMap.prefilterMaterial.uniforms.environmentMap.value=this.environmentMap},w.IBLProbe.prototype.computed=function(e){this.irradianceMap.generateMap(e,this.isHDR),this.prefilterMap.generateMap(e,this.isHDR),this.brdfMap.generateMap(e),this.isComputed=!0},w.IBLVertexShader=["uniform vec4 offsetRepeat;","uniform mat3 rotateMatrix;","varying vec2 vUv;","varying vec3 Normal;","varying vec3 Pos;","varying vec3 mvPosition;","varying vec3 mvNormal;","varying vec3 vViewPosition;","#include <shadowmap_pars_vertex>","#include <view_shed_pars_vertex>","#include <common>","#include <logdepthbuf_pars_vertex>","#include <heightLimit_pars_vertex>","#ifdef USE_INSTANCE","   attribute float vState;","   attribute float vState2;","   attribute float vClipping;","   varying float fClipping;","   varying float fState;","   attribute vec4 aColor;","   varying vec4 vaColor;","   attribute vec3 mcol0;","   attribute vec3 mcol1;","   attribute vec3 mcol2;","   attribute vec3 mcol3;","   #if defined(USE_MAP)||defined(USE_BUMPMAP) ","       attribute vec2 muvCol0;","       attribute vec2 muvCol1;","       attribute vec2 muvCol2;","   #endif","#endif","mat3 inverse_mat3(in mat3 m)","{","   float determinant =","    m[0][0] * (m[1][1] * m[2][2] - m[2][1] * m[1][2])","    - m[1][0] * (m[0][1] * m[2][2] - m[2][1] * m[0][2])","    + m[2][0] * (m[0][1] * m[1][2] - m[1][1] * m[0][2]);","    mat3 inverse;","    inverse[0][0] = + (m[1][1] * m[2][2] - m[2][1] * m[1][2]);","    inverse[1][0] = - (m[1][0] * m[2][2] - m[2][0] * m[1][2]);","    inverse[2][0] = + (m[1][0] * m[2][1] - m[2][0] * m[1][1]);","    inverse[0][1] = - (m[0][1] * m[2][2] - m[2][1] * m[0][2]);","    inverse[1][1] = + (m[0][0] * m[2][2] - m[2][0] * m[0][2]);","    inverse[2][1] = - (m[0][0] * m[2][1] - m[2][0] * m[0][1]);","    inverse[0][2] = + (m[0][1] * m[1][2] - m[1][1] * m[0][2]);","    inverse[1][2] = - (m[0][0] * m[1][2] - m[1][0] * m[0][2]);","    inverse[2][2] = + (m[0][0] * m[1][1] - m[1][0] * m[0][1]);","    inverse /= determinant;","    return inverse;","}","void main()","{","   vUv = uv -  offsetRepeat.xy;","   vUv = mat2(rotateMatrix) * vec2(vUv.x , vUv.y) ;","   vUv = vUv * offsetRepeat.zw;","    Pos = vec3(modelMatrix * vec4(position, 1.0));","    Normal = normalize(mat3(modelMatrix) * normal);","    mvPosition = vec3(modelViewMatrix * vec4(position, 1.0));","    mvNormal = normalize(normalMatrix * normal);","#include <begin_vertex>","#include <beginnormal_vertex>","#include <defaultnormal_vertex>","#if (defined(USE_MAP)||defined(USE_BUMPMAP)) && defined(USE_INSTANCE)  ","   vUv = vec2(mat3(vec3(muvCol0, 0.0),","                   vec3(muvCol1, 0.0),","                   vec3(muvCol2, 1.0)) * vec3(uv, 1.0));","   vUv = vUv -  offsetRepeat.xy;","   vUv = mat2(rotateMatrix) * vec2(vUv.x, vUv.y) ;","   vUv = vUv * offsetRepeat.zw;","#endif","#if defined(USE_LIGHTMAP) && defined(USE_INSTANCE)  ","   vUv2.x = uv2OffsetRepeat.x*vUv2.x/ 65535.0 + uv2OffsetRepeat.z ;","   vUv2.y = uv2OffsetRepeat.y*vUv2.y/ 65535.0 + uv2OffsetRepeat.w ;","#endif","#ifdef USE_INSTANCE","   vaColor = aColor;","   fClipping = vClipping;","   #ifdef INSTANCE_STATE_SECONDARY","       fState = vState2;","   #else","       fState = vState;","   #endif","   transformed = vec3(mat4(vec4(mcol0, 0.0),","                   vec4(mcol1, 0.0),","                   vec4(mcol2, 0.0),","                   vec4(mcol3, 1.0)) * vec4(transformed, 1.0));","   #ifdef USE_INSTANCE_NORMAL","       mat3 normalMat = mat3(mcol0, mcol1, mcol2);","       normalMat = inverse_mat3(normalMat);","       normalMat = transpose(normalMat);","       objectNormal = normalMat * objectNormal;","       transformedNormal = normalMatrix * objectNormal;","   #ifdef FLIP_SIDED","       transformedNormal = - transformedNormal;","   #endif","       transformedNormal = normalize( transformedNormal );","   #endif","   mvNormal = transformedNormal;","   Normal = normalize(mat3(modelMatrix) * objectNormal);","    Pos = vec3(modelMatrix * vec4(transformed, 1.0));","#endif","#include <project_vertex>","#include <heightLimit_vertex>","#include <worldpos_vertex>","#include <shadowmap_vertex>","#include <logdepthbuf_vertex>","vViewPosition = - mvPosition.xyz;","vec3 vsWorldPosition = Pos;","#include <view_shed_vertex>","}"].join("\n"),w.varying_pars=["varying vec2 vUv;","varying vec3 Normal;","varying vec3 Pos;","varying vec3 mvPosition;","varying vec3 mvNormal;"].join("\n"),w.clipping_pars=["#if NUM_CLIPPING_PLANES > 0","    uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];","#endif"].join("\n"),w.maps_pars=["#ifdef USE_MAP","    uniform sampler2D map;","#endif","#ifdef USE_NORMALMAP","    uniform sampler2D normalMap;","    uniform vec2 normalScale;","vec3 perturbNormal2Arb(vec3 pos, vec3 normal)","{","    vec3 q0 = vec3(dFdx(pos.x), dFdx(pos.y), dFdx(pos.z));","    vec3 q1 = vec3(dFdy(pos.x), dFdy(pos.y), dFdy(pos.z));","    vec2 st0 = dFdx(vUv.st);","    vec2 st1 = dFdy(vUv.st);","    vec3 S = normalize(q0 * st1.t - q1 * st0.t);","    vec3 T = normalize(-q0 * st1.s + q1 * st0.s);","    vec3 N = normalize(normal);","    vec3 mapN = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;","    mapN.xy = normalScale * mapN.xy;","    mat3 tsn = mat3(S, T, N);","    return normalize(tsn * mapN);","}","#endif","#ifdef USE_ROUGHNESSMAP","    uniform sampler2D roughnessMap;","#endif","#ifdef USE_METALNESSMAP","    uniform sampler2D metalnessMap;","#endif","#ifdef USE_AOMAP","    uniform sampler2D aoMap;","    uniform float aoMapIntensity;","#endif"].join("\n"),w.iblMaps_pars=["uniform samplerCube irradianceMap;","uniform samplerCube prefilterMap;","uniform sampler2D brdfMap;"].join("\n"),w.lighting_pars=["#include <packing>","#include <shadowmap_pars_fragment>","uniform vec3 ambientLightColor;","#if NUM_DIR_LIGHTS > 0","struct DirectionalLight","{","    vec3 direction;","    vec3 color;","    int shadow;","    float shadowBias;","    float shadowRadius;","    vec2 shadowMapSize;","};","uniform DirectionalLight directionalLights[NUM_DIR_LIGHTS];","#endif","#if NUM_POINT_LIGHTS > 0","struct PointLight","{","    vec3 position;","    vec3 color;","    float distance;","    float decay;","    int shadow;","    float shadowBias;","    float shadowRadius;","    vec2 shadowMapSize;","};","uniform PointLight pointLights[NUM_POINT_LIGHTS];","#endif","#if NUM_SPOT_LIGHTS > 0","struct SpotLight","{","    vec3 position;","    vec3 direction;","    vec3 color;","    float distance;","    float decay;","    float coneCos;","    float penumbraCos;","    int shadow;","    float shadowBias;","    float shadowRadius;","    vec2 shadowMapSize;","};","uniform SpotLight spotLights[NUM_SPOT_LIGHTS];","#endif","float punctualLightIntensityToIrradianceFactor(const in float lightDistance, const in float cutoffDistance, const in float decayExponent)","{","    if(decayExponent > 0.0)","    {","        float distanceFalloff = 1.0 / max(pow(abs(lightDistance), decayExponent), 0.01);","        float maxDistanceCutoffFactor = pow(abs(clamp(1.0 - pow(abs(lightDistance / cutoffDistance), 4.0), 0.0, 1.0)), 2.0);","        return distanceFalloff * maxDistanceCutoffFactor;","    }","    float distanceFalloff = 1.0 / max(pow(abs(lightDistance), 2.0), 0.01);","    return distanceFalloff;","}"].join("\n"),w.toneMap_pars=["uniform float shift;","uniform float A;","uniform float B;","uniform float C;","uniform float D;","uniform float E;","uniform float F;","uniform float scale;","vec3 toneMapCanonFilmic(vec3 color)","{","    color *= (1.0 / shift);","    return (((color * (A * color + C * B)) / (color * (A * color + B) + D * F))) * (1.0 / scale);","}"].join("\n"),w.Uniforms=[w.varying_pars,w.clipping_pars,"uniform bool IBLEnabled;","uniform int debug;","uniform float gamma;","uniform vec3 albedo;","uniform float metalness;","uniform float roughness;","uniform float opacity;","uniform float iblFactor;","uniform vec4 blinkColor;","uniform float blinkCoefficient;","uniform float colorState;",w.maps_pars,w.iblMaps_pars,w.lighting_pars,w.toneMap_pars].join("\n"),
w.IBLFragmentShader=[w.Uniforms,"#include <heightLimit_pars_fragment>","const float PI = 3.14159265358979;","#include <bumpmap_pars_fragment>","#include <view_shed_pars_fragment>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","varying vec3 vViewPosition;","#include <csm_fragment>","float D_GGX(float NdotH, float roughness)","{","    float alpha = pow(roughness, 2.0);","    float alpha2 = pow(alpha, 2.0);","    return alpha2 / (PI * pow(abs(NdotH * NdotH * (alpha2 - 1.0) + 1.0), 2.0));","}","float GGX_Schlick(float NdotV, float roughness)","{","    float k = (roughness + 1.0) * 0.125;","    return NdotV / (NdotV * (1.0 - k) + k);","}","float G_Smith(float NdotV, float NdotL, float roughness)","{","    return GGX_Schlick(NdotV, roughness) * GGX_Schlick(NdotL, roughness);","}","vec3 F_Schlick(float HdotV, vec3 F0)","{","    return F0 + (vec3(1.0) - F0) * pow((1.0 - HdotV), 5.0);","}","vec3 F_SchlickRoughness(float NdotV, vec3 F0, float roughness)","{","    return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - NdotV, 5.0);","}","vec3 postProcessing(vec3 color, bool toneMap)","{","    vec3 result = toneMap ? toneMapCanonFilmic(color) : color;","    result = pow(result, vec3(1.0 / gamma));","    return result;","}","#ifdef USE_INSTANCE","   varying vec4 vaColor;","   varying float fState;","   varying float fClipping;","#endif","bool floatEqual(in float x, in float y) {","    return (x >= y - 0.01) && (x <= y + 0.01);","}","bool floatNotEqual(in float x, in float y) {","    return (x <= y - 0.01) || (x >= y + 0.01);","}","void main()","{","#if NUM_CLIPPING_PLANES > 0","    for (int i = 0; i < UNION_CLIPPING_PLANES; ++ i)","    {","        vec4 plane = clippingPlanes[ i ];","        if (dot(vViewPosition, plane.xyz) > plane.w) discard;","    }","    #if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES","        bool clipped = true;","        for (int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i)","        {","            vec4 plane = clippingPlanes[ i ];","            clipped = (dot(vViewPosition, plane.xyz) > plane.w) && clipped;","        }","        if (clipped) discard;","    #endif","#endif","    vec3 baseColor = pow(albedo, vec3(gamma));","float realOpacity = opacity;","#ifdef USE_INSTANCE","   if (floatEqual(fState, -1.0)) ","       discard;","   if (floatNotEqual(fState, 0.0)){","       baseColor =  pow(vaColor.rgb, vec3(gamma));","       realOpacity = vaColor.a; }","#endif","#ifdef USE_MAP","    baseColor = pow(texture2D(map, vUv).rgb, vec3(gamma));","   #ifdef USE_INSTANCE","       if (floatNotEqual(fState, 0.0)) ","           realOpacity = vaColor.a;","   #endif","#endif","#ifdef USE_ALPHAMAP","   realOpacity *= texture2D( map, vUv ).a;","#endif","#ifdef DOUBLE_SIDED","    float flipNormal = float(gl_FrontFacing) * 2.0 - 1.0;","#else","    float flipNormal = 1.0;","#endif","    vec3 normal = Normal * flipNormal;","    vec3 vNormal = mvNormal * flipNormal;","#ifdef USE_NORMALMAP","    normal = perturbNormal2Arb(Pos, normal);","    vNormal = perturbNormal2Arb(mvPosition, vNormal);","#endif","#ifdef USE_BUMPMAP","    normal = perturbNormalArb( mvPosition, normal, dHdxy_fwd() );","#endif","    float roughnessFactor = roughness;","#ifdef USE_ROUGHNESSMAP","    roughnessFactor = texture2D(roughnessMap, vUv).r;","#endif","    float metalnessFactor = metalness;","#ifdef USE_METALNESSMAP","    metalnessFactor = texture2D(metalnessMap, vUv).r;","#endif","    float aoFactor = 1.0;","#ifdef USE_AOMAP","    aoFactor = texture2D(aoMap, vUv).r;","#endif","    vec3 N = normal;","    vec3 V = normalize(cameraPosition - Pos);","    vec3 R = reflect(-V, N);","    vec3 F0 = vec3(0.04);","    F0 = mix(F0, baseColor, metalnessFactor);","    vec3 totalLightColor = vec3(0.0);","    vec3 viewVector = normalize(-mvPosition);","    vec3 normalVector = normalize(vNormal);","    float NdotV = max(dot(normalVector, viewVector), 0.0);","    totalLightColor += ambientLightColor * baseColor / PI;","#if NUM_DIR_LIGHTS > 0","    vec3 dirColor = vec3(0.0);","\n        #if defined(USE_CSM)\n            DirectionalLight directionalLight;\n            float shadowValue = calcShadowFactor(normalVector);\n            for (int i = 4; i < NUM_DIR_LIGHTS; ++i)\n            {\n                directionalLight = directionalLights[i];\n                vec3 dirVector = normalize(directionalLight.direction);\n                vec3 halfVector = normalize(dirVector + viewVector);\n    \n                float NdotL = max(dot(normalVector, dirVector), 0.0);\n                float NdotH = max(dot(normalVector, halfVector), 0.0);\n                float HdotV = max(dot(halfVector, viewVector), 0.0);\n    \n                vec3 F = F_Schlick(HdotV, F0);\n                vec3 kS = F;\n                vec3 kD = 1.0 - kS;\n                kD *= 1.0 - metalnessFactor;\n    \n                float D = D_GGX(NdotH, roughnessFactor);\n                float G = G_Smith(NdotV, NdotL, roughnessFactor);\n                vec3 specular = D * G * F / (4.0 * NdotV * NdotL + 0.001);\n    \n                #ifdef USE_SHADOWMAP\n                if(realOpacity > 0.9)\n                directionalLight.color *= shadowValue;\n                #endif\n    \n    \n                dirColor += (kD * baseColor / PI + specular) * directionalLight.color * NdotL;\n            }\n        #else\n            for (int i = 0; i < NUM_DIR_LIGHTS; ++i)\n            {\n                DirectionalLight directionalLight = directionalLights[i];\n                vec3 dirVector = normalize(directionalLight.direction);\n                vec3 halfVector = normalize(dirVector + viewVector);\n    \n                float NdotL = max(dot(normalVector, dirVector), 0.0);\n                float NdotH = max(dot(normalVector, halfVector), 0.0);\n                float HdotV = max(dot(halfVector, viewVector), 0.0);\n    \n                vec3 F = F_Schlick(HdotV, F0);\n                vec3 kS = F;\n                vec3 kD = 1.0 - kS;\n                kD *= 1.0 - metalnessFactor;\n    \n                float D = D_GGX(NdotH, roughnessFactor);\n                float G = G_Smith(NdotV, NdotL, roughnessFactor);\n                vec3 specular = D * G * F / (4.0 * NdotV * NdotL + 0.001);\n    \n                #ifdef USE_SHADOWMAP\n                if(realOpacity > 0.9)\n                directionalLight.color *= all( bvec2( directionalLight.shadow, true ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n                #endif\n    \n    \n                dirColor += (kD * baseColor / PI + specular) * directionalLight.color * NdotL;\n            }\n        #endif\n    ","    totalLightColor += dirColor;","#endif","#if NUM_POINT_LIGHTS > 0","    vec3 pointColor  = vec3(0.0);","    for (int i = 0; i < NUM_POINT_LIGHTS; ++i)","    {","        PointLight pointLight = pointLights[i];","        vec3 dirVector = pointLight.position - mvPosition;","        float distance = length(dirVector);","        dirVector = normalize(dirVector);","        vec3 halfVector = normalize(dirVector + viewVector);","        float NdotL = max(dot(normalVector, dirVector), 0.0);","        float NdotH = max(dot(normalVector, halfVector), 0.0);","        float HdotV = max(dot(halfVector, viewVector), 0.0);","        vec3 F = F_Schlick(HdotV, F0);","        vec3 kS = F;","        vec3 kD = 1.0 - kS;","        kD *= 1.0 - metalnessFactor;","        float D = D_GGX(NdotH, roughnessFactor);","        float G = G_Smith(NdotV, NdotL, roughnessFactor);","        vec3 specular = D * G * F / (4.0 * NdotV * NdotL + 0.001);","        pointColor += (kD * baseColor / PI + specular) * pointLight.color * NdotL * punctualLightIntensityToIrradianceFactor(distance, pointLight.distance, pointLight.decay);","    }","    totalLightColor += pointColor;","#endif","#if NUM_SPOT_LIGHTS > 0","    vec3 spotColor  = vec3(0.0);","    for (int i = 0; i < NUM_SPOT_LIGHTS; ++i)","    {","        SpotLight spotLight = spotLights[i];","        vec3 dirVector = spotLight.position - mvPosition;","        float distance = length(dirVector);","        dirVector = normalize(dirVector);","        vec3 halfVector = normalize(dirVector + viewVector);","        float angleCos = dot(dirVector, spotLight.direction);","        if (angleCos > spotLight.coneCos)","        {","            float spotEffect = smoothstep(spotLight.coneCos, spotLight.penumbraCos, angleCos);","            float NdotL = max(dot(normalVector, dirVector), 0.0);","            float NdotH = max(dot(normalVector, halfVector), 0.0);","            float HdotV = max(dot(halfVector, viewVector), 0.0);","            vec3 F = F_Schlick(HdotV, F0);","            vec3 kS = F;","            vec3 kD = 1.0 - kS;","            kD *= 1.0 - metalnessFactor;","            float D = D_GGX(NdotH, roughnessFactor);","            float G = G_Smith(NdotV, NdotL, roughnessFactor);","            vec3 specular = D * G * F / (4.0 * NdotV * NdotL + 0.001);","            spotColor += (kD * baseColor / PI + specular) * spotLights[i].color * spotEffect * NdotL","                * punctualLightIntensityToIrradianceFactor(distance, spotLight.distance, spotLight.decay);","            totalLightColor += spotColor;","        }","    }","#endif","    if (IBLEnabled)","    {","        vec3 Fr = F_SchlickRoughness(max(dot(N, V), 0.0), F0, roughnessFactor);","        vec3 kS = Fr;","        vec3 kD = 1.0 - kS;","        kD *= 1.0 - metalnessFactor;","        vec3 irradiance = textureCube(irradianceMap, N, 0.0).rgb;","        vec3 diffuse = irradiance * baseColor;","        const float MAX_REFLECTION_LOD = 1.0;","        vec3 prefilteredColor = textureCube(prefilterMap, R, roughnessFactor * MAX_REFLECTION_LOD).rgb;","        vec2 brdf = texture2D(brdfMap, vec2(max(dot(N, V), 0.0), roughnessFactor)).rg;","        vec3 specular = prefilteredColor* (Fr* brdf.x + brdf.y)*iblFactor;","        vec3 color = (kD * diffuse + specular + totalLightColor) * aoFactor;","        color = postProcessing(color, true);","        if (debug == 1) ","        {","            baseColor = postProcessing(baseColor, false);","            gl_FragColor = vec4(baseColor, realOpacity);","        }","        else if (debug == 2)","        {","            irradiance = postProcessing(irradiance, true);","            gl_FragColor = vec4(irradiance, realOpacity);","        }","        else if (debug == 3)","        {","            prefilteredColor = postProcessing(prefilteredColor, true);","            gl_FragColor = vec4(prefilteredColor, realOpacity);","        }","        else if (debug == 4)","        {","            diffuse = postProcessing(diffuse, true);","            gl_FragColor = vec4(diffuse, realOpacity);","        }","        else if (debug == 5)","        {","            specular = postProcessing(specular, true);","            gl_FragColor = vec4(specular, realOpacity);","        }","        else if (debug == 6)","        {","            gl_FragColor = vec4(brdf, 0.0, realOpacity);","        }","        else if (debug == 7)","        {","            gl_FragColor = vec4(normal, realOpacity);","        }","        else","        {","           if(iblFactor > 1.0 && realOpacity < 0.6) realOpacity = 0.6;","            gl_FragColor = vec4(color, realOpacity);","        }","    }","    else","    {","        totalLightColor = postProcessing(totalLightColor, true);","        gl_FragColor = vec4(totalLightColor, realOpacity);","    }","#ifdef USE_INSTANCE","       if (floatEqual(fState, 5.0) && floatEqual(colorState, 1.0)) {","           gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);","       }","#else","       if (floatEqual(colorState, 1.0)) {","           gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);","       }","#endif","#include <view_shed_fragment>","#include <heightLimit_fragment>","#include <fog_fragment>","#include <logdepthbuf_fragment>","}"].join("\n"),w.cube_vs=["varying vec3 pos;","void main()","{","    pos = position;","    gl_Position = projectionMatrix * mat4(mat3(viewMatrix)) * modelMatrix * vec4(position, 1.0);","    gl_Position = gl_Position.xyww;","}"].join("\n"),w.cube_fs=["varying vec3 pos;","uniform samplerCube environmentMap;","uniform bool hdr;","uniform float shift;","uniform float A;","uniform float B;","uniform float C;","uniform float D;","uniform float E;","uniform float F;","uniform float scale;","#include <fog_pars_fragment>","vec3 toneMapCanonFilmic(vec3 color)","{","    color *= (1.0 / shift);","    return (((color * (A * color + C * B)) / (color * (A * color + B) + D * F))) * (1.0 / scale);","}","void main()","{","    vec3 envColor = textureCube(environmentMap, pos, 0.0).rgb;","    if (hdr)","    {","        envColor = toneMapCanonFilmic(envColor);","        envColor = pow(envColor, vec3(1.0 / 2.2));","    }","    gl_FragColor = vec4(envColor, 1.0);","#include <fog_fragment>","}"].join("\n"),w.irradiance_vs=["varying vec3 pos;","void main() {","\tpos = vec3(modelMatrix * vec4(position, 1.0));","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),w.irradiance_fs=["varying vec3 pos;","uniform samplerCube environmentMap;","const float PI = 3.14159265358979;","vec3 caluIrradiance(vec3 normal, vec3 up, vec3 right)","{","\tvec3 irradiance = vec3(0.0);","\tint count = 0;","\tconst int phiSampleCount = 1024;","\tconst int thetaSampleCount = phiSampleCount / 4;","\tfloat phiDelta = 2.0 * PI / float(phiSampleCount);","\tfloat thetaDelta = 0.5 * PI / float(thetaSampleCount);","\tfor(int i = 0; i < phiSampleCount; ++i)","\t{","\t\tfloat phi = float(i) * phiDelta;","\t\tfor(int j = 0; j < thetaSampleCount; ++j)","\t\t{","\t\t\tfloat theta = float(j) * thetaDelta;","\t\t\tvec3 tangentSample = vec3(sin(theta) * cos(phi), sin(theta) * sin(phi), cos(theta));","\t\t\tvec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal; ","\t\t\tirradiance += textureCube(environmentMap, sampleVec, 0.0).rgb * cos(theta) * sin(theta);","\t\t\t++count;","\t\t}","\t}","\tirradiance = PI * irradiance * (1.0 / float(count));","\treturn irradiance;","}","void main()","{","\tvec3 normal = normalize(pos);","\tvec3 up = vec3(0.0, 1.0, 0.0);","\tvec3 right = cross(up, normal);","\tup = cross(normal, right);","\tvec3 irradiance = caluIrradiance(normal, up, right);","\tgl_FragColor = vec4(irradiance, 1.0);","}"].join("\n"),w.IrradianceMap=function(e,t){this.cubeTexture=null,this.resolution=t||32,this.irradianceMaterial=new THREE.ShaderMaterial({vertexShader:w.irradiance_vs,fragmentShader:w.irradiance_fs,uniforms:{environmentMap:{value:e}},lights:!1,side:THREE.BackSide}),this.cube=new THREE.Mesh(new THREE.BoxBufferGeometry(2,2,2),this.irradianceMaterial)},w.IrradianceMap.prototype.constructor=w.IrradianceMap,w.IrradianceMap.prototype.generateMap=function(e,t){var i=new THREE.Scene;i.add(this.cube);var r=new THREE.CubeCamera(.1,10,this.resolution);if(t){var n={type:THREE.FloatType,format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter};r.renderTarget=new THREE.WebGLRenderTargetCube(this.resolution,this.resolution,n)}r.updateCubeMap(e,i),this.cubeTexture=r.renderTarget.texture},w.prefilter_vs=["varying vec3 pos;","varying vec3 Normal;","void main() {","\tpos = vec3(modelMatrix * vec4(position, 1.0));","\tNormal = mat3(modelMatrix) * normal;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),w.prefilter_fs=["varying vec3 pos;","varying vec3 Normal;","uniform float roughness;","uniform samplerCube environmentMap;","uniform sampler2D HammersleyTable;","const float PI = 3.14159265358979;","float D_GGX(float NdotH, float roughness)","{","\tfloat alpha = pow(roughness, 2.0);","\tfloat alpha2 = pow(alpha, 2.0);","\treturn alpha2 / (PI * pow(NdotH * NdotH * (alpha2 - 1.0) + 1.0, 2.0));","}","vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness) ","{","\tfloat a = roughness * roughness;","\tfloat Phi = 2.0 * PI * Xi.x; ","\tfloat CosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y)); ","\tfloat SinTheta = sqrt(1.0 - CosTheta * CosTheta);","\tvec3 H;","\tH.x = SinTheta * cos(Phi); ","\tH.y = SinTheta * sin(Phi); ","\tH.z = CosTheta;","\tvec3 UpVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0); ","\tvec3 TangentX = normalize(cross(UpVector, N)); ","\tvec3 TangentY = cross(N, TangentX);","\treturn normalize(TangentX * H.x + TangentY * H.y + N * H.z);","}","void main()","{","\tvec3 N = normalize(pos);","\tvec3 R = N;","\tvec3 V = R;","\tconst int sampleCount = 1024;","\tfloat totalWeight = 0.0;","\tvec3 prefilteredColor = vec3(0.0);","\tfor (int i = 0; i < sampleCount; ++i) {","\t\tfloat u = float(i) / float(sampleCount);","\t\tvec2 Xi = vec2(u, texture2D(HammersleyTable, vec2(u)).r);","\t\tvec3 H = ImportanceSampleGGX(Xi, N, roughness);","\t\tvec3 L = normalize(2.0 * dot(V, H) * H - V);","\t\tfloat NdotL = max(dot(N, L), 0.0);","\t\tif(NdotL > 0.0)","\t\t{","\t\t\tfloat NdotH = max(dot(N, H), 0.0);","\t\t\tfloat D = D_GGX(NdotH, roughness);","\t\t\tfloat HdotV = max(dot(H, V), 0.0);","\t\t\tfloat pdf = D * NdotH / (4.0 * HdotV);","\t\t\tfloat resolution = 2048.0; // resolution of source cubemap (per face)","\t\t\tfloat solidAngleTexel= 4.0 * PI / (6.0 * resolution * resolution);","\t\t\tfloat solidAngleSample = 1.0 / (float(sampleCount) * pdf);","\t\t\tfloat mipLevel = roughness == 0.0 ? 0.0 : 0.5 * log2(solidAngleSample / solidAngleTexel);","\t\t\tprefilteredColor += textureCube(environmentMap, L, mipLevel).rgb * NdotL;","\t\t\ttotalWeight += NdotL;","\t\t}","\t}","\tprefilteredColor = prefilteredColor / totalWeight;","\tgl_FragColor = vec4(prefilteredColor, 1.0);","}"].join("\n"),w.PrefilterMap=function(e,t,i,r){this.cubeTexture=null,this.resolution=i||128,this.maxMipLevel=r||1,this.prefilterMaterial=new THREE.ShaderMaterial({vertexShader:w.prefilter_vs,fragmentShader:w.prefilter_fs,uniforms:{roughness:{value:0},environmentMap:{value:e},HammersleyTable:{value:t}},lights:!1,side:THREE.BackSide}),this.cube=new THREE.Mesh(new THREE.BoxBufferGeometry(2,2,2),this.prefilterMaterial)},w.PrefilterMap.prototype.constructor=w.PrefilterMap,w.PrefilterMap.prototype.generateMap=function(e,t){var i=new THREE.Scene;i.add(this.cube);var r=new THREE.CubeCamera(.1,10,this.resolution);if(t){var n={type:THREE.FloatType,format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter};r.renderTarget=new THREE.WebGLRenderTargetCube(this.resolution,this.resolution,n)}for(var a=this.maxMipLevel<=1?1:this.maxMipLevel-1,o=0;o<this.maxMipLevel;o++){var s=this.resolution*Math.pow(.5,o);r.renderTarget.width=r.renderTarget.height=s;var l=o/a;this.prefilterMaterial.uniforms.roughness.value=l,r.renderTarget.activeMipMapLevel=o,r.updateCubeMap(e,i)}this.cubeTexture=r.renderTarget.texture},THREE.HDRLoader=THREE.RGBELoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.RGBELoader.prototype=Object.create(THREE.DataTextureLoader.prototype),THREE.RGBELoader.prototype._parser=function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},i=function(e,t,i){t=t||1024;for(var r=e.pos,n=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(n=s.indexOf("\n"))&&a<t&&r<e.byteLength;)o+=s,a+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<n&&(!1!==i&&(e.pos+=a+n+1),o+s.slice(0,n))},r=new Uint8Array(e);r.pos=0;var n=function(e){var r,n,a=/^#\?(\S+)$/,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=i(e)))return t(1,"no header found");if(!(n=r.match(a)))return t(3,"bad initial token");for(c.valid|=1,c.programtype=n[1],c.string+=r+"\n";;){if(!1===(r=i(e)))break;if(c.string+=r+"\n","#"!==r.charAt(0)){if((n=r.match(o))&&(c.gamma=parseFloat(n[1],10)),(n=r.match(s))&&(c.exposure=parseFloat(n[1],10)),(n=r.match(l))&&(c.valid|=2,c.format=n[1]),(n=r.match(u))&&(c.valid|=4,c.height=parseInt(n[1],10),c.width=parseInt(n[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=r+"\n"}return 2&c.valid?4&c.valid?c:t(3,"missing image size specifier"):t(3,"missing format specifier")}(r);if(-1!==n){var a=n.width,o=n.height,s=function(e,i,r){var n,a,o,s,l,u,c,h,d,f,p,m,v,g=i,y=r;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(n=new Uint8Array(4*i*r))||!n.length)return t(4,"unable to allocate buffer space");for(a=0,o=0,h=4*g,v=new Uint8Array(4),u=new Uint8Array(h);y>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(v[0]=e[o++],v[1]=e[o++],v[2]=e[o++],v[3]=e[o++],2!=v[0]||2!=v[1]||(v[2]<<8|v[3])!=g)return t(3,"bad rgbe scanline format");for(c=0;c<h&&o<e.byteLength;){if(s=e[o++],m=s>128,m&&(s-=128),0===s||c+s>h)return t(3,"bad scanline data");if(m)for(l=e[o++],d=0;d<s;d++)u[c++]=l;else u.set(e.subarray(o,o+s),c),c+=s,o+=s}for(f=g,d=0;d<f;d++)p=0,n[a]=u[d+p],p+=g,n[a+1]=u[d+p],p+=g,n[a+2]=u[d+p],p+=g,n[a+3]=u[d+p],a+=4;y--}return n}(r.subarray(r.pos),a,o);if(-1!==s)return{width:a,height:o,data:s,header:n.string,gamma:n.gamma,exposure:n.exposure,format:THREE.RGBEFormat,type:THREE.UnsignedByteType}}return null},s.IBLManager=function(e){this.viewer=e,this.IBLConfig=null,this.host="",this.isHDR=!0,this.textureLoad=!1;var t=0,i=null,r=null;this.enableIBL=function(e){s.GlobalData.IBL!==e&&(s.GlobalData.IBL=e,this.viewer.setRenderStateChanged(!0),e?null!=i?this.initIBLByName(i):this.initIBLByIndex(t):(this.viewer.modelManager.changeAllMaterials(!1),this.removeSkyBox()))},this.loadIBLConfig=function(e){var t=this,i=this.viewer;(new THREE.FileLoader).load(e,function(e){t.IBLConfig=JSON.parse(e),s.GlobalData.IBL&&t.initIBLByIndex(0)},void 0,function(){i.modelManager.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_IBLCONFIG_ERROR,event:event})})},this.initIBLByIndex=function(e){if(s.GlobalData.IBL&&null!=this.IBLConfig){var r=Object.keys(this.IBLConfig);if(r.length>e){var n=this.IBLConfig[r[e]];this.loadIBLMaps(this.host+n.url,n.isHDR,!0,n.uniforms),t=e,i=r[e]}}},this.initIBLByName=function(e){if(s.GlobalData.IBL&&null!=this.IBLConfig&&this.IBLConfig.hasOwnProperty(e)){var t=this.IBLConfig[e];this.loadIBLMaps(this.host+t.url,t.isHDR,!0,t.uniforms),i=e}},this.loadIBLMaps=function(e,t,i,r,n){function a(e){o.modelManager.changeAllMaterials(!0),o.modelManager.updateMaterialsValue("IBLMaps",e,!0);for(var n in r)"shift"!=n&&o.modelManager.updateMaterialsValue(n,r[n],!0);i&&l.addSkyBox(t,r),l.textureLoad=!0,o.setRenderStateChanged(!0),o.render()}if(s.GlobalData.IBL){var o=this.viewer;!r.iblFactor&&o.modelManager.isMeterUnit()&&(r.iblFactor=10),this.IBLParams=r;var l=this,u=o.getScene();if(n)return void a(u.IBLMaps);u.IBLMaps.loadMaps(e,t,a)}},this.loadSkyBox=function(e,t){var i=this,r=this.viewer;r.getScene().IBLMaps.loadMaps(e,t,function(e,t){i.addSkyBox(t),r.render()})},this.addSkyBox=function(e,t){var e=void 0==e?this.isHDR:e;this.isHDR=e;var i=null,r=this.viewer.getScene();if(r.hasObjectGroup(s.ObjectGroupType.IBLCUBE)){var n=r.getObjectGroup(s.ObjectGroupType.IBLCUBE);i=n.children[0],i.material.uniforms.environmentMap.value=r.IBLMaps.environmentMap,i.material.uniforms.hdr.value=e}else{i=new THREE.Mesh(new THREE.BoxBufferGeometry(2e3,2e3,2e3),new THREE.ShaderMaterial({uniforms:{environmentMap:{value:r.IBLMaps.environmentMap},hdr:{value:e},shift:{value:.18},A:{value:.27},B:{value:.29},C:{value:.052},D:{value:.2},E:{value:0},F:{value:.18},scale:{value:.897105},fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new THREE.Color(16777215)},postProcessMap:{value:null},postProcessAdditiveMap:{value:null},postProcessMixRate:{value:0},postProcessAdditiveRate:{value:0},viewportWidth:{value:0},viewportHeight:{value:0}},vertexShader:w.cube_vs,fragmentShader:w.cube_fs,side:THREE.DoubleSide,depthTest:!0,depthWrite:!0,fog:!0})),i.frustumCulled=!1;var n=r.getOrCreateObjectGroup(s.ObjectGroupType.IBLCUBE,{priority:10});n.add(i)}if(t){var a=i.material;for(var o in t)a.uniforms.hasOwnProperty(o)&&(a.uniforms[o].value=t[o])}},this.renderWithOrthCamera=function(e,t,i){var r=e.getScene(),n=e.camera;if(t.autoClear=!0,r.hasObjectGroup(s.ObjectGroupType.IBLCUBE)&&(r.getOrCreateObjectGroup(s.ObjectGroupType.IBLCUBE).visible=!0,!n.isPerspective)){e.switchToCamera("persp"),s.GlobalData.IncrementRender&&0==i&&t.setObjectListUpdateState(!0);for(var a=r.getObjectGroups(),o=a.length,l=new Array(o),u=0;u<o;++u)l[u]=a[u].visible,a[u].visible=!1;r.getOrCreateObjectGroup(s.ObjectGroupType.IBLCUBE).visible=!0,t.render(r,n);for(var u=0;u<o;++u)a[u].visible=l[u];l=null,r.getOrCreateObjectGroup(s.ObjectGroupType.IBLCUBE).visible=!1,e.switchToCamera("orth"),t.autoClear=!1,s.GlobalData.IncrementRender&&t.resetIncrementRender()}},this.removeSkyBox=function(){var e=this.viewer.getScene();e.hasObjectGroup(s.ObjectGroupType.IBLCUBE)&&(e.removeObjectGroupByName(s.ObjectGroupType.IBLCUBE),this.viewer.render())},this.setSkyBoxType=function(e){r=e},this.getSkyBoxType=function(){return r}};var C=function(){function e(t){_classCallCheck(this,e),this.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,this.indexedDB||console.log("IndexedDB not supported"),this._db=null,this._opt=t,this._onOpening=!1,this._onOpeningResolves=[],this._onOpeningRejects=[],this._temp={}}return _createClass(e,[{key:"open",value:function(e,t){var i=this;this._onOpening=!0;var r=e||this._opt.name,n=t||this._opt.version,a=this.indexedDB.open(r,n);return new Promise(function(e,t){a.onsuccess=function(r){var n=a.result,o=!1;if(i._opt.storeList){var s=Object.values(n.objectStoreNames);i._opt.storeList.some(function(r){if(-1===s.indexOf(r)){var a=n.name,l=n.version;return l++,n.close(),i.open(a,l).then(e).catch(t),o=!0}})}o||(i._db=n,e(n))},a.onupgradeneeded=function(e){var t=i._db=e.target.result,r=i._opt.storeList||[];r.forEach(function(e){return!t.objectStoreNames.contains(e)&&t.createObjectStore(e)}),Object.values(t.objectStoreNames).forEach(function(e){return-1===r.indexOf(e)&&t.deleteObjectStore(e)})},a.onerror=function(e){t(e)}})}},{key:"getDB",value:function(){var e=this;return new Promise(function(t,i){e._db?t(e._db):e._onOpening?(e._onOpeningResolves.push(t),e._onOpeningRejects.push(i)):e.open().then(function(i){t(i),e._onOpeningResolves.forEach(function(e){return e(i)})}).catch(function(t){i(t),e._onOpeningRejects.forEach(function(e){return e(t)})})})}},{key:"addObject",value:function(e,t,i){var r=this;return new Promise(function(n,a){r.getDB().then(function(o){if(!o.objectStoreNames.contains(e))return void a();var s=o.transaction(e,"readwrite");s.objectStore(e).put(t,i).onsuccess=function(a){r._temp[e]&&r._temp[e].keys&&(r._temp[e].keys.push(i),r._temp[e].map[i]=t),n(a.target.result)},s.onerror=a}).catch(a)})}},{key:"getObject",value:function(e,t){var i=this;return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?new Promise(function(r,n){if(i._temp[e]){var a=i._temp[e].map[t];if(a)return void r(a);if(-1===i._temp[e].keys.indexOf(t))return void n()}i.getDB().then(function(a){if(!a.objectStoreNames.contains(e))return void n();var o=a.transaction(e,"readonly"),s=o.objectStore(e),l=new Promise(function(e){return s.getAllKeys().onsuccess=function(t){return e(t.target.result)}}),u=new Promise(function(e){return s.getAll().onsuccess=function(t){return e(t.target.result)}});Promise.all([l,u]).then(function(a){var o=_slicedToArray(a,2),s=o[0],l=o[1];i._temp[e]={keys:s,map:{}};var u=!1;s.forEach(function(n,a){t===n?(r(l[a]),u=!0):i._temp[e].map[n]=l[a]}),u||n()}),o.onerror=n}).catch(n)}):new Promise(function(r,n){i.getDB().then(function(i){if(!i.objectStoreNames.contains(e))return void n();var a=i.transaction(e,"readonly");a.objectStore(e).get(t).onsuccess=function(e){var t=e.target.result;t?r(t):n(e)},a.onerror=n}).catch(n)})}},{key:"deleteObject",value:function(e,t){var i=this;return new Promise(function(r,n){i.getDB().then(function(i){if(!i.objectStoreNames.contains(e))return void n();var a=i.transaction(e,"readwrite");a.objectStore(e).delete(t).onsuccess=function(e){r(e.target.result)},a.onerror=n}).catch(n)})}}]),e}();s.Storage=s.Storage||{},s.Storage.IndexedDBHelper=C,s.Storage.IndexedDBHelper.loadWithStorage=function(e,t,i,r,n){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=function(){i(t).then(function(i){var n=a?JSON.stringify(i):i;s.EnableStorage&&s.storageManager["add"+e](n,t),r&&r(i)}).catch(function(e){return n&&n(e)})};s.EnableStorage?s.storageManager["get"+e](t).then(function(e){var t=a?JSON.parse(e):e;r&&r(t)}).catch(function(e){o()}):o()};var S=function(){function e(){_classCallCheck(this,e),this.helperMap={},s.storageManager=this}return _createClass(e,[{key:"getHelper",value:function(e){return this.helperMap[e]=this.helperMap[e]||new s.Storage.IndexedDBHelper({name:"Bf_"+e,storeList:["i","m","t"]}),this.helperMap[e]}},{key:"getDatabagIdAndKeyByUrl",value:function(e){var t=/\/\/.*?\/(.+?)\/resource\/v3\/model\/(.+?)(\.gz)?$/.exec(e);return t?{databagId:t[1],key:t[2]}:{databagId:"i",key:e}}},{key:"getDatabagIdAndRootKeyByUrl",value:function(e){var t=/\/\/.*?\/(.+?)\/(.+?)(\.gz)?$/.exec(e);return t?{databagId:t[1],key:t[2]}:{databagId:"i",key:e}}},{key:"addData",value:function(e,t,i){var r=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(function(a,o){var s=n?r.getDatabagIdAndRootKeyByUrl(i):r.getDatabagIdAndKeyByUrl(i),l=s.databagId,u=s.key;r.getHelper(l).addObject(e,t,u).then(function(e){return a(e)}).catch(function(e){return o(e)})})}},{key:"addModelData",value:function(e,t){return this.addData("m",e,t)}},{key:"addInfoData",value:function(e,t){return this.addData("i",e,t)}},{key:"getData",value:function(e,t){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(n,a){var o=r?i.getDatabagIdAndRootKeyByUrl(e):i.getDatabagIdAndKeyByUrl(e),s=o.databagId,l=o.key;i.getHelper(s).getObject(t,l).then(function(e){n(e)}).catch(function(e){return a(e)})})}},{key:"getModelData",value:function(e){return this.getData(e,"m")}},{key:"getInfoData",value:function(e){return this.getData(e,"i")}},{key:"addTexture",value:function(e,t){var i=this,r=function(e,t){var r=i._canvas=i._canvas||document.createElement("canvas"),n=r.getContext("2d");return n.clearRect(0,0,r.width,r.height),r.width=t,r.height=t,n.drawImage(e,0,0,t,t),n.getImageData(0,0,t,t)};return new Promise(function(n,a){var o=i.getDatabagIdAndKeyByUrl(t),l=o.databagId,u=o.key,c=void 0,h=["anisotropy","encoding","flipY","format","generateMipmaps","magFilter","mapping","minFilter","mipmaps","premultiplyAlpha","rotateMatrix","type","unpackAlignment","wrapS","wrapT"];e.image instanceof HTMLImageElement?(e.image=s.MaterialUtil.ensurePowerOfTwo(e.image),c={type:"DataTexture",data:{image:r(e.image,e.image.width)}}):c={type:"CompressedTexture",data:{image:e.image}},h.forEach(function(t){return c.data[t]=e[t]}),i.getHelper(l).addObject("t",c,u).then(function(e){return n(e)}).catch(function(e){return a(e)})})}},{key:"getTexture",value:function(e){var t=this;return new Promise(function(i,r){var n=t.getDatabagIdAndKeyByUrl(e),a=n.databagId,o=n.key;t.getHelper(a).getObject("t",o).then(function(e){if(!["DataTexture","CompressedTexture"].includes(e.type)||!e.data)return void t.getHelper(a).deleteObject("t",o).then(function(e){return r(e)});var n=new THREE[e.type];Object.keys(e.data).forEach(function(t){return n[t]=e.data[t]}),n.needsUpdate=!0,i(n)
}).catch(function(e){return r(e)})})}},{key:"addBimtiles",value:function(e,t){var i=this;return new Promise(function(r,n){var a=i.getDatabagIdAndKeyByUrl(t),o=a.databagId,s=a.key;i.getHelper(o).addObject("t",e,s).then(function(e){return r(e)}).catch(function(e){return n(e)})})}},{key:"getBimtiles",value:function(e){var t=this;return new Promise(function(i,r){var n=t.getDatabagIdAndKeyByUrl(e),a=n.databagId,o=n.key;t.getHelper(a).getObject("t",o).then(function(e){i(e)}).catch(function(e){return r(e)})})}}]),e}();s.Storage.StorageManager=S;var A=function(){function e(t){_classCallCheck(this,e),this.helper=new s.Storage.IndexedDBHelper({name:"Bg_"+t.sceneId,storeList:["i"].concat(_toConsumableArray(t.databagIdList))}),s.storageManager=this}return _createClass(e,[{key:"getStoreNameAndKeyByUrl",value:function(e){var t=/\/\/.*?\/(.+?)\/resource\/v3\/model\/bimtiles\/(.+?)(\.gz)?$/.exec(e);return t?{storeName:t[1],key:t[2]}:{storeName:"i",key:e}}},{key:"addTexture",value:function(e,t){var i=this,r=function(e,t){var r=i._canvas=i._canvas||document.createElement("canvas"),n=r.getContext("2d");return n.clearRect(0,0,r.width,r.height),r.width=t,r.height=t,n.drawImage(e,0,0,t,t),n.getImageData(0,0,t,t)};return new Promise(function(n,a){var o=i.getStoreNameAndKeyByUrl(t),l=o.storeName,u=o.key,c=void 0,h=["anisotropy","encoding","flipY","format","generateMipmaps","magFilter","mapping","minFilter","mipmaps","premultiplyAlpha","rotateMatrix","type","unpackAlignment","wrapS","wrapT"];e.image instanceof HTMLImageElement?(e.image=s.MaterialUtil.ensurePowerOfTwo(e.image),c={type:"DataTexture",data:{image:r(e.image,e.image.width)}}):c={type:"CompressedTexture",data:{image:e.image}},h.forEach(function(t){return c.data[t]=e[t]}),i.helper.addObject(l,c,u).then(function(e){return n(e)}).catch(function(e){return a(e)})})}},{key:"getTexture",value:function(e){var t=this;return new Promise(function(i,r){var n=t.getStoreNameAndKeyByUrl(e),a=n.storeName,o=n.key;t.helper.getObject(a,o).then(function(e){if(!["DataTexture","CompressedTexture"].includes(e.type)||!e.data)return void t.helper.deleteObject(a,o).then(function(e){return r(e)});var n=new THREE[e.type];Object.keys(e.data).forEach(function(t){return n[t]=e.data[t]}),n.needsUpdate=!0,i(n)}).catch(function(e){return r(e)})})}},{key:"addBimtiles",value:function(e,t){var i=this;return new Promise(function(r,n){var a=i.getStoreNameAndKeyByUrl(t),o=a.storeName,s=a.key;i.helper.addObject(o,e,s).then(function(e){return r(e)}).catch(function(e){return n(e)})})}},{key:"getBimtiles",value:function(e){var t=this;return new Promise(function(i,r){var n=t.getStoreNameAndKeyByUrl(e),a=n.storeName,o=n.key;t.helper.getObject(a,o).then(function(e){i(e)}).catch(function(e){return r(e)})})}},{key:"addInfoData",value:function(e,t){return this.addBimtiles(e,t)}},{key:"getInfoData",value:function(e){return this.getBimtiles(e)}}]),e}();s.Storage.SceneStorageManager=A,function(){var e=function(){function e(t){_classCallCheck(this,e),this.modelManager=t,this.totalHeightMap={},this.explosionParamMap={},this.explodeCount=0,this.isElementExplodedMap={},this.isFloorExplodedMap={}}return _createClass(e,[{key:"destroy",value:function(){this.modelManager=null,this.totalHeightMap=null,this.explosionParamMap=null,this.isElementExplodedMap=null,this.isFloorExplodedMap=null}},{key:"getExplosionParam",value:function(e){return this.explosionParamMap[e]||(this.explosionParamMap[e]={explosionExtent:0,floorExplosionExtent:0,floorExplosionList:[],floorInfos:void 0,floorExplosionDirection:void 0}),this.explosionParamMap[e]}},{key:"getExplosionExtent",value:function(e){if(e)return this.getExplosionParam(e).explosionExtent}},{key:"setFloorInfos",value:function(e,t){if(t&&!this.getExplosionParam(t).floorInfos){for(var i=0,r=e.length;i<r;i++)e[i].explodedHeight=e[i].elevation,e[i].preExplodedHeight=e[i].elevation,e[i].preExplodedTranslation=null;this.getExplosionParam(t).floorInfos=e,this.totalHeightMap[t]={};var n=this.modelManager.getModel(t).getRawBoundingBox();this.totalHeightMap[t].totalHeight=n.getSize().z}}},{key:"setExplosionExtent",value:function(e,t){var i=this;if(t){var r=e-this.getExplosionParam(t).explosionExtent;if(0!=r){var n;this.modelManager.modelCollection.traverse(function(r){var a=r.id,o=new THREE.Box3,s=a==t?e:i.getExplosionParam(a).explosionExtent;a!=t&&0===s?o=r.getBoundingBoxWorld():r.modelExplosion.preElementExplode(o,s),o&&(n?n.union(o):n=o)});var a=this.modelManager.modelCollection.getById("ExternalComponent"),o=this.modelManager.getModel(t),l=o.getBoundingBoxWorld().getCenter();a&&a.elementExplode(t,r,l),this.explodeCount=1e4==this.explodeCount?0:this.explodeCount+1,this.isElementExplodedMap[t]=0!==e,this.modelManager.scene.setBoundingBoxWorld(n),4==s.GlobalData.LightPreset&&(this.modelManager.scene.lightManager.updateShadowLight(),this.modelManager.scene.lightManager.updateReceivingPlane()),s.GlobalData.EnableShadowMap&&this.modelManager.viewer.updateShadowMap(),this.modelManager.modelCollection.getById(t).modelExplosion.explode(),this.getExplosionParam(t).explosionExtent=e,this.modelManager.dispatchEvent({type:s.EVENTS.ON_EXPLOSION,extent:e})}}}},{key:"setFloorExplosion",value:function(e,t,i,r){var n=this;if(r&&(r=r.toString(),this.getExplosionParam(r).floorExplosionDirection=i,void 0!=this.getExplosionParam(r).floorInfos)){this.getExplosionParam(r).floorExplosionList=[];var a=!0,o={};if(t){for(var l=0,u=t.length;l<u;l++)o[t[l]]=!0;if(a=!1,0==t.length)return}for(var c=this.getExplosionParam(r).floorInfos,h=c.length,d=e*this.totalHeightMap[r].totalHeight/(h-1),f=0,p=0;p<h;p++){var m=(c[p].name,c[p].elevation+f*d);(a||o[c[p].id])&&(f++,this.getExplosionParam(r).floorExplosionList.push(c[p].id)),c[p].preExplodedHeight=c[p].explodedHeight,c[p].explodedHeight=m,c[p].preExplodedDirection=c[p].explodedDirection,c[p].explodedDirection=i}var v=this.modelManager.modelCollection.getById("ExtrudeBodyManager");v&&v.explode(r);var g=this.modelManager.modelCollection.getById("ExternalComponent");g&&g.explode(r);var y;this.modelManager.modelCollection.traverse(function(e){var t=e.id.toString(),i=n.getExplosionParam(t).floorExplosionDirection,r=new THREE.Box3,a=n.getExplosionParam(t).floorInfos;i&&a&&a.length>0&&(e.modelExplosion.preFloorExplode(r,a,i),r&&(y?y.union(r):y=r))}),this.explodeCount=1e4==this.explodeCount?0:this.explodeCount+1,this.isFloorExplodedMap[r]=0!==e,this.modelManager.scene.setBoundingBoxWorld(y),this.modelManager.getFilter().needUpdateBoxAfterExplode(),this.modelManager.modelCollection.getById(r).modelExplosion.explode(),4==s.GlobalData.LightPreset&&this.modelManager.scene.lightManager.updateShadowLight(),s.GlobalData.EnableShadowMap&&this.modelManager.viewer.updateShadowMap(),this.getExplosionParam(r).floorExplosionExtent=e,0===e&&(this.getExplosionParam(r).floorExplosionList=[]),this.modelManager.dispatchEvent({type:s.EVENTS.ON_FLOOR_EXPLOSION,floorInfos:c,modelId:r})}}},{key:"getFloorInfos",value:function(e){if(e)return this.getExplosionParam(e).floorInfos}},{key:"getFloorExplosionList",value:function(e){if(e)return this.getExplosionParam(e).floorExplosionList}},{key:"getFloorExplosionExtent",value:function(e){if(e)return this.getExplosionParam(e).floorExplosionExtent}},{key:"getFloorExplosionDirection",value:function(e){if(e)return this.getExplosionParam(e).floorExplosionDirection}},{key:"destroy",value:function(){delete this.explosionParamMap}},{key:"isExploded",value:function(e){return this.isElementExplodedMap[e]||this.isFloorExplodedMap[e]}}]),e}();s.ExplosionManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.model=t,this.explosionTranslation={}}return _createClass(e,[{key:"explode",value:function(){this.model.explode()}},{key:"preFloorExplode",value:function(e,t,i){}},{key:"preElementExplode",value:function(e,t){}}]),e}();s.BaseModelExplosion=e}(),s.ModelView=s.ModelView||{},function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.manager=t,this.setValues(i),this.castShadow=!0,this.receiveShadow=!0,i.loadConfig&&(this.castShadow=!s.Utils.isDefined(i.loadConfig.castShadow)||i.loadConfig.castShadow,this.receiveShadow=!s.Utils.isDefined(i.loadConfig.receiveShadow)||i.loadConfig.receiveShadow),this.localClippingMode=!1,this.localClippingPlanes=null,this.innerClippingMode=!1,this.innerClippingMatrix=null,this.filter=null,this.visible=!0,this.loaded=!1,this.emptyScene=!1,this.statistics={renderableCount:0,renderableTotal:s.GlobalData.maxObjectNumInPool,renderableTotalForPool:s.GlobalData.maxObjectNumInPool,numOfElements:0,numOfTriangles:0,numOfVertices:0,memoeryInfo:{maxMemorySize:0,minMemorySize:0,triangleNumber:0,instanceEnabled:s.GlobalData.Instance}},this.transformInfos={octreeTransformed:!1,boundingBox:new THREE.Box3,position:new THREE.Vector3,rotation:(new THREE.Quaternion).setFromEuler((new THREE.Euler).fromArray([-1.5708,0,0]),!1),scale:new THREE.Vector3(1,1,1),transformMatrix:new THREE.Matrix4},this.containsCamera=!1,this.destroyed=!1,this._config=void 0,this.boundaryPoints=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.modelExplosion=new s.BaseModelExplosion(this)}return _createClass(e,[{key:"destroy",value:function(){this.destroyed=!0,this.statistics=null,this.transformInfos=null,this.filter&&(this.filter.destroy(),this.filter=null),this.manager=null,this._config=void 0}},{key:"setValues",value:function(e){this.id=e.modelId,this.databagId=this.id,this._sequence=e.priority,this.transform={translation:new THREE.Vector3,rotation:new THREE.Quaternion,scale:new THREE.Vector3(1,1,1)},this.transformMatrix=new THREE.Matrix4,this.transformMatrixInverse=new THREE.Matrix4,this.setupTransformMatrix(e)}},{key:"setupTransformMatrix",value:function(e){var t=e.loadConfig?e.loadConfig.transformMatrix:void 0;if(!t){var i=new THREE.Vector3,r=new THREE.Quaternion,n=new THREE.Vector3(1,1,1);e.loadConfig&&e.loadConfig.translation&&i.fromArray(e.loadConfig.translation),e.loadConfig&&e.loadConfig.rotation&&r.setFromEuler((new THREE.Euler).fromArray(e.loadConfig.rotation)),e.loadConfig&&e.loadConfig.scale&&n.fromArray(e.loadConfig.scale),t=(new THREE.Matrix4).compose(i,r,n)}this.setTransformMatrix(t)}},{key:"calculateClippingIds",value:function(){}},{key:"load",value:function(e){}},{key:"prepare",value:function(e,t){}},{key:"isEmptyScene",value:function(){return!1}},{key:"isLayerData",value:function(){return!1}},{key:"isLoaded",value:function(){return!0}},{key:"isDataReady",value:function(){return!0}},{key:"isVisible",value:function(){return this.visible}},{key:"setVisible",value:function(e){this.visible=e}},{key:"isUseable",value:function(){return this.isLoaded()&&this.isVisible()}},{key:"isCulled",value:function(){return!0}},{key:"getTransforms",value:function(){return this.transformInfos}},{key:"getStatistics",value:function(){return this.statistics}},{key:"getBoundingBoxWorld",value:function(){return this.getTransforms().boundingBox}},{key:"getRawBoundingBox",value:function(){return this.getTransforms().boundingBox}},{key:"applyFilter",value:function(){}},{key:"applySelection",value:function(){}},{key:"clearSelection",value:function(){}},{key:"applyHover",value:function(){}},{key:"clearHover",value:function(){}},{key:"applyBlink",value:function(){}},{key:"clearBlink",value:function(){}},{key:"applyReplacement",value:function(){}},{key:"getId",value:function(){return this.id}},{key:"getDatabagId",value:function(){return this.databagId}},{key:"getEncodedDatabagId",value:function(){return this.databagId}},{key:"getOctreeRoots",value:function(e){}},{key:"updateOctreeNode",value:function(e){}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"setRenderableCount",value:function(e){}},{key:"updateMeshNodes",value:function(){}},{key:"getNodeInfosByUserId",value:function(e){return[]}},{key:"getAllNodeInfos",value:function(){return{}}},{key:"getMaterialByMaterialId",value:function(e){return null}},{key:"updateMaterialsValue",value:function(e,t,i,r){}},{key:"updateMaterials",value:function(){}},{key:"switchNewStyleMaterial",value:function(e){}},{key:"changeAllMaterials",value:function(e){}},{key:"getImageByUrl",value:function(e){}},{key:"getWireframeElementCount",value:function(){return 0}},{key:"getCameraNameList",value:function(){return[]}},{key:"getCamera",value:function(e){return null}},{key:"calculateCameraModelRelation",value:function(e){this.containsCamera=!1}},{key:"isUserIdExist",value:function(e){return!0}},{key:"hasUserId",value:function(e){return!1}},{key:"isHiddenUserId",value:function(e){return!1}},{key:"hasTransforms",value:function(){return!0}},{key:"explode",value:function(){}},{key:"getFilter",value:function(){return this.filter}},{key:"getModelManager",value:function(){return this.manager}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"getPickingMeshes",value:function(e,t,i,r,n){}},{key:"getBlinkMaterials",value:function(){return[]}},{key:"getLoadedUserIdsObject",value:function(){return null}},{key:"dispatchEvent",value:function(e){}},{key:"enableColorWithoutLight",value:function(e){}},{key:"adjustVisibility",value:function(e){}},{key:"changeVisibilityOfSelectedObjects",value:function(e){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){}},{key:"adjustInstanceVisibility",value:function(e){}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){}},{key:"changeInstanceVisibilityOfNonSelectedObjects",value:function(e){}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"calculateClippingIds",value:function(){}},{key:"calculateClippingContours",value:function(){}},{key:"preUpdate",value:function(){}},{key:"update",value:function(){}},{key:"postUpdate",value:function(){}},{key:"getTransformMatrix",value:function(){return this.transformMatrix.clone()}},{key:"setTransformMatrix",value:function(e){this.transformMatrix.copy(e),e.decompose(this.transform.translation,this.transform.rotation,this.transform.scale),this.transformMatrixInverse.getInverse(this.transformMatrix)}},{key:"rotateOnBasePoint",value:function(e,t,i){var r=this.transform.rotation.clone(),n=r.clone().inverse(),a=this.transform.translation.clone(),o=(new THREE.Quaternion).setFromAxisAngle(t,i);this.transform.rotation.multiply(o);var s=e.clone().sub(a).applyQuaternion(n).applyQuaternion(this.transform.rotation);this.transform.translation.sub(s).add(e.clone().sub(a)),this.updateTransformMatrix()}},{key:"scaleOnBasePoint",value:function(e,t){this.transform.scale.multiply(t);var i=t.clone().sub(new THREE.Vector3(1,1,1)),r=this.transform.rotation.clone(),n=r.clone().inverse(),a=this.transform.translation.clone(),o=e.clone().sub(a).applyQuaternion(n).multiply(i).applyQuaternion(r);this.transform.translation.sub(o),this.updateTransformMatrix()}},{key:"translate",value:function(e){this.transform.translation.add(e),this.updateTransformMatrix(),this.updateMatrix(),this.manager.updateSceneBoundingBox()}},{key:"updateMatrix",value:function(){}},{key:"updateTransformMatrix",value:function(){var e=this.transform.translation,t=this.transform.scale,i=this.transform.rotation;this.transformMatrix.compose(e,i,t)}},{key:"getBoundaryPoints",value:function(){var e=this.getRawBoundingBox(),t=this.getTransformMatrix(),i=this.boundaryPoints;return i[0].set(e.min.x,e.min.y,e.min.z).applyMatrix4(t),i[1].set(e.max.x,e.min.y,e.min.z).applyMatrix4(t),i[2].set(e.max.x,e.max.y,e.min.z).applyMatrix4(t),i[3].set(e.min.x,e.max.y,e.min.z).applyMatrix4(t),i[4].set(e.min.x,e.min.y,e.max.z).applyMatrix4(t),i[5].set(e.max.x,e.min.y,e.max.z).applyMatrix4(t),i[6].set(e.max.x,e.max.y,e.max.z).applyMatrix4(t),i[7].set(e.min.x,e.max.y,e.max.z).applyMatrix4(t),i}},{key:"getGeometryBuffersByUserId",value:function(e){return this._handler?this._handler.getGeometryBuffersByUserId(e):[]}},{key:"getRealUserId",value:function(e){return e}},{key:"setCastShadow",value:function(e){this.castShadow=e}},{key:"setReceiveShadow",value:function(e){this.receiveShadow=e}},{key:"enableLocalClippingMode",value:function(e){this.localClippingMode=e}},{key:"clone",value:function(t,i){i=s.Utils.defaultValue(i,{});var r=s.Utils.defaultValue(i.modelId,this.databagId);return s.Utils.defined(t)||(t=new e({modelId:r})),t}},{key:"_copy",value:function(e){this.manager=e.manager,this.transform={translation:e.transform.translation.clone(),rotation:e.transform.rotation.clone(),scale:e.transform.scale.clone()},this.emptyScene=e.emptyScene,this.statistics=s.Utils.clone(e.statistics,!0),this.transformInfos={octreeTransformed:e.transformInfos.octreeTransformed,boundingBox:e.transformInfos.boundingBox.clone(),position:e.transformInfos.position.clone(),rotation:e.transformInfos.rotation.clone(),scale:e.transformInfos.scale.clone(),transformMatrix:e.transformInfos.transformMatrix.clone()},this._config=s.Utils.clone(e._config,!0),this._sequence=e._sequence,this.modelExplosion=new s.BaseModelExplosion(this)}},{key:"isVisibleMesh",value:function(e){return!0}},{key:"sequence",get:function(){return this._sequence},set:function(e){this._sequence=e}},{key:"config",set:function(e){this._config=e},get:function(){return this._config}}]),e}();s.BaseModel=e}(),s.TaskWorker=function(e,t){this.MaxThreadCount=e||8;var i=this;i.todoList={},i.todoCount=0,i.doingCount=0,this.hasTask=function(){return i.todoCount>0},this.addItem=function(e,t){i.todoList[e]=t,i.todoCount++},this.clearTasks=function(){i.todoList={},i.todoCount=0},this.run=function(e,i){function r(i){if(i>=u)n.doingCount<1&&t();else{var o=a[i];e(o,i+c,r)}}var n=this;if(!(n.doingCount>0)){var a=[],o=n.todoList;for(var l in o)o.hasOwnProperty(l)&&a.push(l);n.todoList={},n.todoCount=0;var u=a.length;if(0!==u){i&&a.sort(i);var c=Math.min(this.MaxThreadCount,s.GlobalData.ConcurrencyRequestCount,u);n.doingCount=u;for(var h=0;h<c;++h)r(h)}}}},s.TaskWorker2=function(e){this.MaxThreadCount=e||8,this.todoList=[],this.doingCount=0,this.addItem=function(e){void 0!==e&&this.todoList.push(e)},this.run=function(e,t,i){function r(s){s>=a?l.doingCount<1&&(t(l.doingCount,a),i()):(t(l.doingCount,a),e(n[s],s+o,r))}if(!(this.doingCount>0)){if(0===this.todoList.length)return void i();var n=this.todoList,a=n.length;this.todoList=[],this.doingCount=a;for(var o=Math.min(this.MaxThreadCount,s.GlobalData.ConcurrencyRequestCount,a),l=this,u=0;u<o;++u)r(u)}}},s.TaskManager=function(){this.worker=new s.TaskWorker2(8)},s.TaskManager.prototype={constructor:s.TaskManager,addTask:function(e){this.worker.addItem(e)},processTasks:function(e,t,i){function r(t,i,r){e(t,function(){--n.doingCount,r(i)})}t=t||function(){},i=i||function(){};var n=this.worker;this.worker.run(r,t,i)}},function(){var e=function(){function e(t){_classCallCheck(this,e),this.instanceMaterials={},this.materials={},this.textures={},this.lightmaps={},this.ensureImagePowerOfTwo=!1,this.handlerUrl=null,this.textureLoader=null,this.textureManager=new s.TaskManager,this.enableCompressedTexture=!1,this.enableSmallTexture=!1,this.enablePkgTexture=!1,this.enableTexturePkgGz=!0,this.enableOrgTexture=!1,this.enableDdsTexture=!1,this.texturePkgLoadState=void 0,this.textureCount=0,this.pkgTextureMap={},this.pkgTextureArrayBufferMap={},this.texturePkgMap={},this.delayLoadTexture=!1,this.delayMaxCount=50,this.pkgCount=0,this.pkgLoadedCount=0,this.pkgLoadedParseCount=10,this.taskRunner=new s.LoadTaskRunner(5),this.delayLoadedTextureMap={},this.textureNameMap={},this.basisTextureLoader=s.MaterialUtil.getBasisTextureLoader(),this.viewer=t}return _createClass(e,[{key:"destroy",value:function(){this.instanceMaterials=null,this.materials=null,this.textures=null,this.lightmaps=null,this.textureCount=void 0,this.handlerUrl=null,this.textureLoader=null,this.textureConfig=null,this.textureManager=null,this.pkgTextureMap=null,this.pkgTextureArrayBufferMap=null,this.texturePkgMap=null,this.delayLoadTexture=void 0,this.delayMaxCount=void 0,this.pkgCount=void 0,this.pkgLoadedCount=void 0,this.taskRunner=null,this.textureNameMap=null}},{key:"disposeInstanceMaterials",value:function(e){var t=this.instanceMaterials;for(var i in t){var r=t[i];if(r instanceof Array)for(var n=0,a=r.length;n<a;n++)r[n].dispose();else r.dispose()}}},{key:"disposeMaterials",value:function(e){var t;for(var i in this.materials)t=this.materials[i],t.dispose();this.disposeInstanceMaterials(e)}},{key:"updateMaterialsValue",value:function(e,t,i,r){var n,a=this.materials,o=this.instanceMaterials;for(var s in a)if((n=a[s])&&n.hasOwnProperty(t)){if(r&&0==n.receiveIBL)continue;n[t]=i,void 0!==n.refreshUniforms&&n.refreshUniforms(),n.needsUpdate=!0}for(var s in o)if(n=o[s])if(n instanceof Array){for(var l=0,u=n.length;l<u;l++)if(n[l].hasOwnProperty(t)){if(r&&0==n[l].receiveIBL)continue;n[l][t]=i,void 0!==n[l].refreshUniforms&&n[l].refreshUniforms(),n[l].needsUpdate=!0}}else if(n.hasOwnProperty(t)){if(r&&0==n[l].receiveIBL)continue;n[t]=i,void 0!==n.refreshUniforms&&n.refreshUniforms(),n.needsUpdate=!0}}},{key:"enableColorWithoutLight",value:function(e){var t,i=this.materials,r=this.instanceMaterials;if(e){for(var n in i)(t=i[n])&&(t.defines.USE_COLORWITHOUTLIGHT="",t.needsUpdate=!0);for(var n in r)if(t=r[n])if(t instanceof Array)for(var a=0,o=t.length;a<o;a++)t[a].defines.USE_COLORWITHOUTLIGHT="",t[a].needsUpdate=!0;else t.defines.USE_COLORWITHOUTLIGHT="",t.needsUpdate=!0}else{for(var n in i)(t=i[n])&&(delete t.defines.USE_COLORWITHOUTLIGHT,t.needsUpdate=!0);for(var n in r)if(t=r[n])if(t instanceof Array)for(var a=0,o=t.length;a<o;a++)delete t[a].defines.USE_COLORWITHOUTLIGHT,t[a].needsUpdate=!0;else delete t.defines.USE_COLORWITHOUTLIGHT,t.needsUpdate=!0}}},{key:"_onLoadTexture",value:function(e){--this.textureCount<=0&&e&&e()}},{key:"_loadTextureByCrypto",value:function(e,t,i,r){var n=this,a=null,o=THREE.Loader.Handlers.get(e);if(null!==o)a=o.load(e,t);else{a=new THREE.Texture,a.src=e;var l=e.lastIndexOf("/"),u=e.substring(l+1);if(this.textureNameMap[u]=a,this.enablePkgTexture&&u in this.pkgTextureMap){var c=new THREE.FileLoader;c.setResponseType("arraybuffer");var h=this.handlerUrl.texturePkgFileName(s.Compatibility.useMergeTexturePkg,this.enableTexturePkgGz,this.pkgTextureMap[u].pkg,this.pkgTextureMap[u].type),d=this.handlerUrl.textureUrl(h),f=this.pkgTextureMap[u].offset,p=this.pkgTextureMap[u].length;if(h in this.pkgTextureArrayBufferMap){var m=this.pkgTextureArrayBufferMap[h].slice(f,f+p);this.creatTextureImage(a,m,t,r)}else c.load(d,function(e){n.pkgTextureArrayBufferMap[h]=e;var i=e.slice(f,f+p);n.creatTextureImage(a,i,t,r)},function(e){void 0!==r&&r(e)})}else{var v=function(i){var r=new Blob([i],{type:"jpeg"}),n=new Image;n.onload=function(){a.image=s.MaterialUtil.ensurePowerOfTwo(n),a.needsUpdate=!0,t&&t(a)},n.onerror=function(i){console.log(e+" load failed"),t(a)},n.src=URL.createObjectURL(r)},g=function(e){void 0!==r&&r(e)},y=function(){return new Promise(function(t,i){o=new TEST.CryptoResourceLoader,o.loadURL(e,t,i)})};s.Storage.IndexedDBHelper.loadWithStorage("ModelData",e,y,v,g)}}return a}},{key:"_loadCompressedTexture",value:function(e,t,i,r){e=e.substring(0,e.lastIndexOf("."))+".dds";var n=e.lastIndexOf("/"),a=e.substring(n+1),o=new THREE.DDSLoader;if(this.enableDdsTexture&&a in this.pkgTextureMap){var l=this.handlerUrl.texturePkgFileName(s.Compatibility.useMergeTexturePkg,this.enableTexturePkgGz,this.pkgTextureMap[a].pkg,this.pkgTextureMap[a].type),u=(this.handlerUrl.textureUrl(l),this.pkgTextureMap[a].offset),c=this.pkgTextureMap[a].length,h=this.pkgTextureArrayBufferMap[l].slice(u,u+c);o.loadBuffer(h,t)}else o.load(e,t,i,function(e){void 0!==r&&r(e)})}},{key:"_loadBasisTexture",value:function(e,t,i,r){e=e.substring(0,e.lastIndexOf("."))+".basis";var n=e.lastIndexOf("/"),a=e.substring(n+1),o=this.basisTextureLoader;if(o.detectedSupport||o.detectSupport(this.viewer.getRenderer()),a in this.pkgTextureMap){var l=this.handlerUrl.texturePkgFileName(s.Compatibility.useMergeTexturePkg,this.enableTexturePkgGz,this.pkgTextureMap[a].pkg,this.pkgTextureMap[a].type),u=(this.handlerUrl.textureUrl(l),this.pkgTextureMap[a].offset),c=this.pkgTextureMap[a].length,h=this.pkgTextureArrayBufferMap[l].slice(u,u+c),d=new Blob([h],{}),f=window.URL||window.webkitURL,p=f.createObjectURL(d);o.load(p,t)}else o.load(e,t,i,function(e){void 0!==r&&r(e)})}},{key:"creatTextureImage",value:function(e,t,i,r){(new TEST.CryptoResourceLoader).load(t,function(t){var n=new Blob([t],{type:"jpeg"}),a=new Image;a.onload=function(){e.image=s.MaterialUtil.ensurePowerOfTwo(a),e.needsUpdate=!0,i&&i(e)},a.onerror=function(e){r&&r(e)},a.src=URL.createObjectURL(n)})}},{key:"_parseTextureJson",value:function(e,t,i,r){var n=this,a=[],o=window.TEST||{},s=i.type,l=i.data,u=t.textureUrl(l.sourceFile),c=this.enableSmallTexture&&l.texture_small;if(this.textureLoader=null,l.basis)this.textureLoader=this._loadBasisTexture;else if(!c&&this.enableCompressedTexture&&l.dds)this.textureLoader=this._loadCompressedTexture;else if(o.CryptoResourceLoader&&(this.textureLoader=this._loadTextureByCrypto),c){var h=u.lastIndexOf(".");u=u.substring(0,h)+"_s"+u.substring(h)}this.textures[e.name]=a,this.textureLoader(u,function(t){t.repeat.fromArray([l.scale[0],l.scale[1]]),t.offset.fromArray([l.offset[0],l.offset[1]]),t.setRotateAngle&&t.setRotateAngle(l.angle),l.repeatU&&(t.wrapS=THREE.RepeatWrapping),l.repeatV&&(t.wrapT=THREE.RepeatWrapping),t.texturetype=s,"reliefMap"==s&&(t.texturetype="bumpMap"),l.dataType&&"NormalMap"==l.dataType&&(t.texturetype="normalMap"),l.alpha&&"map"==s&&(t.texturetype="alphaMap"),void 0!=l.depth&&(t.depth=l.depth),t&&a.push(t),n._updateMaterialTexture(e,a),n._onLoadTexture(r)},void 0,function(){n._updateMaterialTexture(e,a),n._onLoadTexture(r)})}},{key:"_updateMaterialTexture",value:function(e,t){if(t){if(void 0===t.length)e.map=t;else for(var i=0;i<t.length;i++)!this.ensureImagePowerOfTwo&&t[i].image&&(t[i]instanceof THREE.CompressedTexture?THREE.Math.isPowerOfTwo(t[i].image.width)&&THREE.Math.isPowerOfTwo(t[i].image.height)||console.log("Warning: THREE.CompressedTexture is not power of two."):t[i].image=s.MaterialUtil.ensurePowerOfTwo(t[i].image)),"map"==t[i].texturetype?e.map=t[i]:"bumpMap"==t[i].texturetype?(e.bumpMap=t[i],void 0!=t[i].depth&&(e.bumpScale=t[i].depth)):"specularMap"==t[i].texturetype?e.specularMap=t[i]:"alphaMap"==t[i].texturetype?(e.useAlphaMap=!0,e.transparent=!0,e.alphaTest=.01,e.map=t[i]):"emissiveMap"==t[i].texturetype?e.emissiveMap=t[i]:"environmentMap"==t[i].texturetype?e.envMap=t[i]:"normalMap"==t[i].texturetype?(e.normalMap=t[i],t[i].depth&&e.normalScale.set(t[i].depth,t[i].depth)):console.warn("This map type is not supported yet:",t[i].texturetype);e.refreshUniforms(),e.needsUpdate=!0}else e.textureColor&&e.color.setStyle(e.textureColor),e.needsUpdate=!0}},{key:"updateTexturePkgMapping",value:function(e,t){var i=this;!0===this.texturePkgLoadState&&(this._updateTextureMapping(e,t),t&&t()),void 0===this.texturePkgLoadState&&(this.texturePkgLoadState=!1,this._getPgkTexture(function(){if(!0===i.delayLoadTexture)return void(t&&t());i.lastTextureEnabled=!1,i._updateTextureMapping(e,t),t&&t()}))}},{key:"delayUpdateTexturePkgMapping",value:function(e,t){var i=this;if(!1===this.delayLoadTexture)return void(t&&t());var r=new THREE.FileLoader;r.setResponseType("arraybuffer");for(var n=0;n<this.pkgCount;++n)!function(n){var a=i.pkgTextureArrayBufferMap[n],o=i.handlerUrl.textureUrl(a);i.taskRunner.push(r,o,void 0,function(r){i.pkgLoadedCount++,i.pkgTextureArrayBufferMap[a]=r.context,i.texturePkgMap[n].map(function(e){i.delayLoadedTextureMap[e]=!0}),i.pkgLoadedCount%i.pkgLoadedParseCount!=i.pkgLoadedParseCount-1&&i.pkgLoadedCount!==i.pkgCount||(i.lastTextureEnabled=!1,s.GlobalData.EnableTextureMapping=!0,i._updateTextureMapping(e,t))})}(n)}},{key:"_parseMapTexture",value:function(e,t,i,r){for(var n=0,a=i.length;n<a;n++)this.textureCount++,this._parseTextureJson(e,t,i[n],r)}},{key:"_createTextureMap",value:function(e){var t=(this.textures,this.materials),i=this.handlerUrl,r=this.textureDataArray;this.textureCount=0;for(var n in t){var a=t[n];if(a){var o=s.Utils.splitCombinedKeyString(n,"_")[0],l=r[parseInt(o)];l&&this._parseMapTexture(a,i,l,e)}}}},{key:"_updateTextureMapping",value:function(e,t){var i=this,r=s.GlobalData.EnableTextureMapping;this.ensureImagePowerOfTwo;if(this.lastTextureEnabled!==r){var n=this.textures,a=this.materials,o=this.handlerUrl,l=this.textureDataArray;if(e)var u=e.manager.getMaterialOverrideSet(),c=u?u.materialsByName:null,h=u?u.textures:null;var d,f,p=this.instanceMaterials;if(r){this.textureCount=0;for(d in a)if(f=a[d]){var m=s.Utils.splitCombinedKeyString(d,"_")[0],v=n[m],g=l?l[parseInt(m)]:null;if(g&&this.delayLoadTexture){for(var y=!0,M=[],E=g.length,b=0;b<E;++b){var x=function(e){var t=e.data,r=t.sourceFile;if(!0===t.basis){var n=r.lastIndexOf(".");return r=r.substring(0,n)+".basis"}if(i.enableSmallTexture&&t.texture_small){var a=r.lastIndexOf(".");r=r.substring(0,a)+"_s"+r.substring(a)}return r}(g[b]);M.push(x),y=y&&this.delayLoadedTextureMap[x]}y&&(M.map(function(e){i.delayLoadedTextureMap[e]=!1}),this._parseMapTexture(f,o,g,t));continue}if(!this.delayLoadTexture||this.delayLoadTexture&&!g||!0!==this.texturePkgLoadState){this._updateMaterialTexture(f,v);continue}}for(d in p)if(f=p[d]){var m=s.Utils.splitCombinedKeyString(d,"_")[0],v=n[m],I=m.split("#")[0];if(h&&h[I]&&(v=h[I]),f instanceof Array)for(var T=0,w=f.length;T<w;T++)this._updateMaterialTexture(f[T],v);else this._updateMaterialTexture(f,v)}for(d in c)if(f=c[d]){var I=d.split("#")[0],v=h[I];this._updateMaterialTexture(f,v)}this.ensureImagePowerOfTwo=!0}else{for(d in a)(f=a[d])&&(f.map=null,f.needsUpdate=!0);for(d in p)if(f=p[d])if(f instanceof Array)for(var T=0,w=f.length;T<w;T++)f[T].pureColor&&(f[T].color.setStyle(f[T].pureColor),f[T].map=null,f[T].needsUpdate=!0),f[T].map=null,f[T].needsUpdate=!0;else f.pureColor&&(f.color.setStyle(f.pureColor),f.map=null,f.needsUpdate=!0),f.map=null,f.needsUpdate=!0;for(d in c)(f=c[d])&&(f.map=null,f.needsUpdate=!0,f.pureColor&&f.color.setStyle(f.pureColor))}this.lastTextureEnabled=r}}},{key:"updateMaterials",value:function(e){var t=this.materials;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];r.IBLMaps=e.manager.scene.IBLMaps,r.refreshUniforms()}}},{key:"_updateIBL",value:function(e){if(s.GlobalData.IBL){this.updateMaterials(e);var t=e.manager.viewer.getIBLManager(),i=t.IBLParams;for(var r in i)this.updateMaterialsValue(e,r,i[r])}}},{key:"changeAllMaterials",value:function(e,t){function i(i){if(!i.receiveIBL)return null;var r=s.MaterialUtil.getMaterialParameters(i);""!=i.defines.USE_INSTANCE&&""!=i.defines.USE_INSTANCE_NORMAL||(r.defines=i.defines);var n;return t?(delete r.textureColor,delete r.pureColor,delete r.imageFade,r.lights=!0,n=new w.IBLMaterial(r),n.type="IBL",n.refreshUniforms()):(delete r.iblProbe,r.lights=!e.lightmap,n=s.MaterialUtil.createStandardMaterial(r),n.roughness=r.originRoughness,n.metalness=r.originMetalness,n.refreshUniforms()),n.name=i.name,n._primary=i._primary,r=null,n}var r=this.materials;for(var n in r)if(r.hasOwnProperty(n)){var a=r[n],o=i(a);o&&(r[n]=o)}var l=this.instanceMaterials;for(var n in l){var a=l[n];if(a)if(a instanceof Array)for(var u=0,c=a.length;u<c;u++){var h=a[u],o=i(h);o&&(a[u]=o)}else{var o=i(a);o&&(l[n]=o)}}}},{key:"switchNewStyleMaterial",value:function(e,t){var i=this.materials;for(var r in i)if(i.hasOwnProperty(r)){var n,a=i[r],o=s.MaterialUtil.getMaterialParameters(a);n=t?s.MaterialUtil.createNewStyleMaterial(o):s.MaterialUtil.createStandardMaterial(o),n.name=r,i[r]=n,o=null}}},{key:"updateLightmapMaterial",value:function(e){if(!this.materials[e]){var t=this.materials,i=s.Utils.splitCombinedKeyString(e,"_"),r=i[0],n=i[1];if(n){var a=s.MaterialUtil.getMaterialParameters(t[r]);a.lights=!1;var o=this.lightmaps[n];a.lightMap=o,a.lightMapIntensity=s.GlobalData.LightmapIntensity,this.materials[e]=s.MaterialUtil.createStandardMaterial(a)}}}},{key:"getInstanceMaterialById",value:function(e,t){if(this.instanceMaterials[e])return this.instanceMaterials[e]
;var i=s.Utils.splitCombinedKeyString(e,"_"),r=i[0],n=i[1],a=s.MaterialUtil.getMaterialParameters(t.manager.getOverrideMaterialByName(r)||this.getMaterialById(r)),o=a.transparent;if(t.lightmap&&n){a.lights=!1;var l=this.lightmaps[n];a.lightMap=l,a.lightMapIntensity=s.GlobalData.LightmapIntensity}var u=s.MaterialUtil.createInstanceMaterial(a,!0);u.transparent=!1,u.name=e;var c=s.MaterialUtil.createInstanceMaterial(a,!0);return c.transparent=!0,c.name=e,s.GlobalData.TranslucentDepthDisabled&&(c.depthWrite=!1),o===u.transparent?u._primary=!0:c._primary=!0,this.instanceMaterials[e]=[u,c],this.instanceMaterials[e]}},{key:"getMaterialById",value:function(e){return this.materials[e]||s.MaterialUtil.getDefaultStandardMaterial()}},{key:"_loadFileByPromise",value:function(e,t){var i=new THREE.FileLoader;return new Promise(function(r,n){var a=function(e){"string"==typeof e?r(JSON.parse(e)):void 0==e.metadata?n(e):r(e)},o=function(){return new Promise(function(r,n){i.setResponseType(t),i.load(e,r)})};s.Storage.IndexedDBHelper.loadWithStorage("ModelData",e,o,a)})}},{key:"_loadTexturePkgByIndex",value:function(e,t){var i=this,r=this.pkgTextureArrayBufferMap[e],n=this.handlerUrl.textureUrl(r),a=new THREE.FileLoader,o=function(e){i.pkgTextureArrayBufferMap[r]=e,t()},l=function(){return new Promise(function(e,t){a.setResponseType("arraybuffer"),a.load(n,e,void 0,t)})};s.Storage.IndexedDBHelper.loadWithStorage("ModelData",n,l,o)}},{key:"_getPgkTexture",value:function(e){var t=this;if(!this.enablePkgTexture)return this._createTextureMap(e),void(this.texturePkgLoadState=!0);var i=this.handlerUrl,r=[];this.pkgTextureMap={},this.texturePkgMap={};var n=1==this.enableTexturePkgGz?"gzip":"json",a=".gz"==s.GlobalData.ZipResourcePostfix?"gzip":"json";s.Compatibility.useMergeTexturePkg?r.push(this._loadFileByPromise(i.texturePkgIndexUrl(this.enableTexturePkgGz),n)):(this.enableOrgTexture&&r.push(this._loadFileByPromise(i.texturePkgOrgIndexUrl(),a)),this.enableSmallTexture&&r.push(this._loadFileByPromise(i.texturePkgSmallIndexUrl(),a))),Promise.all(r.map(function(e){return e.catch(function(e){return e})})).then(function(i){var r=0;for(var n in i)for(var a in i[n].textures){t.pkgTextureMap[a]=i[n].textures[a],void 0==t.pkgTextureMap[a].type&&(t.pkgTextureMap[a].type=i[n].metadata.type);var o=t.pkgTextureMap[a].pkg;void 0===t.texturePkgMap[o]?t.texturePkgMap[o]=[a]:t.texturePkgMap[o].push(a);var l=t.handlerUrl.texturePkgFileName(s.Compatibility.useMergeTexturePkg,t.enableTexturePkgGz,i[n].textures[a].pkg,i[n].metadata.type);l in t.pkgTextureArrayBufferMap||(t.pkgTextureArrayBufferMap[r]=l,t.pkgTextureArrayBufferMap[l]={},t.textureManager.addTask(r),r++)}if(t.pkgCount=r,r>t.delayMaxCount)return t.delayLoadTexture=!0,void(e&&e());t.textureManager.processTasks(t._loadTexturePkgByIndex.bind(t),void 0,function(){t.texturePkgLoadState=!0,t._createTextureMap(e)})}).catch(function(e){console.log("promise reject failed reason",e)})}},{key:"getImageByUrl",value:function(e){var t=e.lastIndexOf("/"),i=e.substring(t+1),r=this.textureNameMap[i];return r&&r.image}}]),e}();s.MaterialManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.hiddenUserIdMap={}}return _createClass(e,[{key:"destroy",value:function(){this.hiddenUserIdMap=null}},{key:"hideByUserId",value:function(e,t){this.hiddenUserIdMap||(this.hiddenUserIdMap={}),this.hiddenUserIdMap[e]=!!t}},{key:"cancelHiddenByUserId",value:function(e){this.hiddenUserIdMap&&delete this.hiddenUserIdMap[e]}},{key:"cancelAllHidden",value:function(){this.hiddenUserIdMap=null}},{key:"isHidden",value:function(e){return!!this.hiddenUserIdMap[e]}},{key:"hasHidden",value:function(){return!s.Utils.isEmptyObject(this.hiddenUserIdMap)}}]),e}();s.SourceObjectManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.GlobalData.IsMobile&&(s.GlobalData.maxObjectNumInPool=6e3,s.GlobalData.maxDrawCacheNum=4e3),i.viewer=e,i.scene=new s.Scene({gisMode:e.gisMode}),i.filterHelper=new s.ModelView.FilterHelper(i),i.filter=new s.ModelView.FilterDirector(i),i.crossOrigin=!0,i.loadingModels={},i.materialPool=null,i.occlusionCamera=null,i.containsCamera=!1,i.highPriorityCategories={inner:{},outer:{}},i.octantToObjectMap={},i.sceneState=new s.SceneStateHelper(i),i.rotation=new THREE.Quaternion,i.boundingBox=new THREE.Box3,i.IBLMaterial=!1,i.clippingCaps=!1,i.addedCapPlane=null,i.selectPriority=!0,i.materialOverrideSet=null,i._renderStateChanged=!1,i.explosionManager=new s.ExplosionManager(i),i.isDrawableModel=!1,i.filterApplied=!1,i.modelLoader=new s.ModelLoader,i.modelCollection=new s.ModelView.LayerCollection,i.blinkManager=new s.BlinkManager(i),i.rootMatrix=void 0,i.firstLoadedBmdLayer=void 0,i.demLoaded=!1,i.tilesCacheScheduler=new s.TilesCacheScheduler({maximumMemoryUsage:e._options.maxMemoryUsage}),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.removeAllEventListener(),this.modelCollection.destroy(),this.blinkManager.destroy(),this.modelCollection=null,this.octantToObjectMap=null,this.materialPool&&(this.materialPool.destroy(),this.materialPool=null),this.occlusionCamera&&(this.occlusionCamera=null),this.loadOnDemandDirector&&(this.loadOnDemandDirector.destroy(),this.loadOnDemandDirector=null),this.highPriorityCategories=null,this.rotation=null,this.boundingBox=null,this.scene.destroy(),this.scene=null,this.filter.destroy(),this.filter=null,this.sceneState.destroy(),this.sceneState=null,this.filterHelper.destroy(),this.filterHelper=null,this.explosionManager.destroy(),this.explosionManager=null,this.rootMatrix=void 0,this.tilesCacheScheduler.destroy(),this.tilesCacheScheduler=void 0,this.viewer=void 0}},{key:"getFilter",value:function(){return this.filter}},{key:"getFilterHelper",value:function(){return this.filterHelper}},{key:"removeAllEventListener",value:function(){this._listeners=void 0}},{key:"prepareCapScene",value:function(){if(this.capsScene)return void(this.clippingCaps||this.initCapPlane());this.capsScene=new s.Scene,this.clippingCaps||this.initCapPlane(),this.scene.createCapStencilMaterials()}},{key:"resetClippingCapsStatus",value:function(){this.clippingCaps=!1}},{key:"initCapPlane",value:function(){var e=s.FillClipPlaneManager.getInstance(this.scene),t=e.initCapsPlane();null!==this.addedCapPlane&&(this.capsScene.remove(this.addedCapPlane.lineMesh),this.capsScene.remove(this.addedCapPlane.planeMesh)),this.capsScene.add(t.lineMesh),this.capsScene.add(t.planeMesh),this.addedCapPlane=t,this.clippingCaps=!0}},{key:"initCapBox",value:function(){var e=s.ClipPlaneManager.getInstance(this.scene),t=e.initCapsBox();t.material.needsUpdate=!0,t.visible=!0,this.capsScene.add(t),this.clippingCaps=!0}},{key:"_updateOcclusionCamera",value:function(e){var t=e.near,i=e.distanceFromWorldToDrawing(this.getMatrixWorldGlobal(),s.GlobalData.OcclusionDistanceToCamera);this.occlusionCamera?this.occlusionCamera.copy(e):this.occlusionCamera=e.clone(),this.occlusionCamera.setNearFar(t,i),this.occlusionCamera.updateMVP()}},{key:"_clearMaterialPool",value:function(){this.materialPool&&this.materialPool.clear()}},{key:"acquireMaterial",value:function(){return this.materialPool?this.materialPool.acquire():null}},{key:"getObjectPool",value:function(){return this.scene.getObjectPool()}},{key:"getFrustumFromOcclusionCamera",value:function(){return this.occlusionCamera.getFrustum(!1)}},{key:"getOcclusionCamera",value:function(){return this.occlusionCamera}},{key:"prepareScene",value:function(e,t){s.GlobalData.BatchMergeEnabled||(this.clearPool(),this.clearObjectRangeFromOctantMap()),s.GlobalData.OcclusionTranslucentEnabled&&(null==this.materialPool&&(this.materialPool=new s.ExpandableObjectPool,this.materialPool.init(s.MaterialEx,50)),this._clearMaterialPool(),this._updateOcclusionCamera(e)),this.modelCollection.traverse(function(i){i.isLoaded()&&!i.isEmptyScene()&&i.prepare(e,t)}),this.dealStateChanged()}},{key:"clearPool",value:function(){this.scene.getObjectPool().clear()}},{key:"clearObjectRangeFromOctantMap",value:function(){this.octantToObjectMap&&this.octantToObjectMap.pool&&(this.octantToObjectMap.pool={})}},{key:"setDrawableModel",value:function(e){this.isDrawableModel=e}},{key:"isDrawable",value:function(){return this.isDrawableModel}},{key:"load",value:function(e,t,i){var r=e.modelId=void 0!==e.modelId?e.modelId+"":s.Utils.getEncodedString(e.databagId);return e.shell?this._loadModelWithShell(e,t,i):this._loadModel(!0,e,t,i),r}},{key:"load_bak",value:function(e,t,i){var r=this,n=e.modelId=void 0!==e.modelId?e.modelId+"":s.Utils.getEncodedString(e.databagId);if(this.loadingModels[n])return n;this.loadingModels[n]=!0,this.setDrawableModel(!1);var a=this.modelCollection.getById(n);if(void 0!==a)return this.setDrawableModel(!0),a.isVisible()||(a.setVisible(!0),a.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:n})),n;e.notifyProgress=void 0===e.notifyProgress||e.notifyProgress;return this.modelLoader.load({viewer:this.viewer,manager:this,parameters:e,index:0,parseCfgFinish:t,debut:i},function(t){r.modelCollection.add(t),t.load(e.notifyProgress),delete r.loadingModels[n]},function(e){delete r.loadingModels[n]}),n}},{key:"_loadModel",value:function(e,t,i,r){var n=this,a=t.modelId;return new Promise(function(o,l){if(n.loadingModels[a])return void o(u);n.loadingModels[a]=!0;var u=n.modelCollection.getById(a);if(void 0!==u)return n.setDrawableModel(!0),u.isVisible()||(u.setVisible(!0),u.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:a})),void o(u);t.notifyProgress=void 0===t.notifyProgress||t.notifyProgress;var c=n;n.modelLoader.load({viewer:n.viewer,manager:n,parameters:t,index:0,parseCfgFinish:i,debut:r},function(i){c.modelCollection.add(i),e?i.setVisible(!0):i.setVisible(!1),c.checkIfFirstLodedModelLayer({isBmdLayer:i.isBmdLayer}),delete c.loadingModels[a];var r=i.load(t.notifyProgress);r&&r.then(function(){c.updateRenderLoopState(),o(i)}).catch(function(){c.modelCollection.remove(a,!0),console.log("some error occurred when load config of model "+a),l()})},function(e){c.modelCollection.remove(a,!0),delete c.loadingModels[a],l(e)})})}},{key:"_loadModelWithShell",value:function(e,t,i){var r=this;if(!e.shell)return null;if(!e.shell.databagId)return null;var n=s.Utils.clone(e.shell,!0),a=void 0!==n.modelId?n.modelId+"_shell":s.Utils.getEncodedString(n.databagId)+"_shell";n.modelId=a,n.loadShell=!0,n.serverUrl=void 0!==n.serverUrl?n.serverUrl:e.serverUrl;var o=void 0===e.visible||e.visible,l=!o;return this._loadModel(o,n,t,i).then(function(n){r._loadModel(l,e,t,i).then(function(e){e.shellModel=n})}).catch(function(){r._loadModel(!0,e,t,i),console.log("can not load shell-"+e.shell.databagId)}),a}},{key:"setModelShellVisibility",value:function(e,t){var i=this.modelCollection.getById(e);i&&i.shellModel&&(t?(i.setVisible(!1),i.shellModel.setVisible(!0)):(i.setVisible(!0),i.shellModel.setVisible(!1)))}},{key:"unload",value:function(e,t){e+="",this.modelCollection.remove(e,!0)&&(this.updateScene(),this.updateFilterManager(),this.getFilter().calculateVisibleComponentsBbox(),t&&t())}},{key:"unloadAll",value:function(){for(var e=this.modelCollection.getIds(),t=0,i=e.length;t<i;++t)this.unload(e[t]);this.clearPool()}},{key:"addModel",value:function(e){this.modelCollection.add(e)}},{key:"removeModel",value:function(e){this.modelCollection.remove(e)}},{key:"getModelIds",value:function(e){if(e){var t=[];return this.modelCollection.traverse(function(e){e.isUseable()&&t.push(e.id)}),t}return this.modelCollection.getIds()}},{key:"setModelVisibility",value:function(e,t,i){var r=this.getModel(e);r&&(r.setVisible(t),i&&i())}},{key:"updateScene",value:function(e,t){this._needUpdateScene()&&(t=s.Utils.defaultValue(t,{}),this.updateSceneBoundingBox(e),this.updateSceneRootMatrix(t.forceUpdate),this.updateSceneRenderable(),this.updateOctreeNode())}},{key:"_needUpdateScene",value:function(){return this.modelCollection.some(function(e){if(!e.isEmptyScene()){var t=e.getBoundingBoxWorld();if(t&&!t.isEmpty())return!0}})}},{key:"_calculateSceneBoundingBox",value:function(){var e=this.boundingBox.clone();e.makeEmpty();var t=this.boundingBox.clone();t.makeEmpty(),this.modelCollection.traverse(function(i){if(!i.isEmptyScene()){var r=i.getBoundingBoxWorld();r&&!r.isEmpty()&&(e.isEmpty()?(e.copy(r),i.id!=s.ObjectGroupType.TILEGROUP&&t.copy(r)):(e.expandByPoint(r.min),e.expandByPoint(r.max),i.id!=s.ObjectGroupType.TILEGROUP&&(t.expandByPoint(r.min),t.expandByPoint(r.max))))}}),e.isEmpty()||(this.boundingBox.copy(e),this.scene.setBoundingBoxWorld(e),this.scene.setBoundingBoxWorldWithoutDEM(t))}},{key:"updateSceneBoundingBox",value:function(e){if(s.Utils.isDefined(e)){var t=e.getBoundingBoxWorld();if(!s.Utils.isDefined(t))return;return this.scene.updateBoundingBoxWorld(t),e.id!=s.ObjectGroupType.TILEGROUP&&this.scene.updateBoundingBoxWorldWithoutDEM(t),this.boundingBox.expandByPoint(t.min),void this.boundingBox.expandByPoint(t.max)}this._calculateSceneBoundingBox()}},{key:"updateSceneRootMatrix",value:function(e){var t=!1,i=new THREE.Matrix4,r=new THREE.Matrix4,n=new THREE.Quaternion;if(this.modelCollection.some(function(e){if(!e.isEmptyScene()&&e.hasTransforms())return n.copy(e.getTransforms().rotation),i.copy(e.getTransforms().transformMatrix),t=e.getTransforms().octreeTransformed,!0}),e=s.Utils.defaultValue(e,!1),void 0===this.rootMatrix||e){if(this.scene.setTransformMatrixGlobal(i),t)r.copy(i);else{var a=new THREE.Vector3(1,1,1),o=s.GlobalData.SceneSize,l=this.boundingBox.getSize(),u=Math.max(l.x,l.y,l.z),c=o/u;a.multiplyScalar(c),r.makeRotationFromQuaternion(n),r.scale(a)}this.rootMatrix=r}this.scene.updateWorldMatrixByMatrix(this.rootMatrix),this.traverseValidModels(function(e){e.updateMatrix()})}},{key:"updateSceneRenderable",value:function(){var e=s.GlobalData.maxObjectNumInPool,t=[],i=0;this.modelCollection.traverse(function(e){e.isEmptyScene()||(i+=e.getStatistics().renderableTotalForPool,t.push(e.id))});for(var r=0,n=0,a=t.length;n<a;++n){var o=t[n],l=this.modelCollection.getById(o),u=Math.floor(l.getStatistics().renderableTotalForPool/i*e);u>l.getStatistics().renderableTotalForPool&&(u=l.getStatistics().renderableTotalForPool),l.setRenderableCount(u),r+=u}this.scene.resizePool(r>e?e:r)}},{key:"getVisibleLayersBoundingBox",value:function(){var e=new THREE.Box3;return this.modelCollection.traverse(function(t){if(t.id!=s.ObjectGroupType.TILEGROUP&&t.isCulled()&&!t.isEmptyScene()){var i=t.getBoundingBoxWorld();s.Utils.isDefined(i)&&(e.expandByPoint(i.min),e.expandByPoint(i.max))}}),e.applyMatrix4(this.scene.geometryGroup.matrix),e}},{key:"updateOctreeNode",value:function(){this.modelCollection.traverse(function(e){e.isLoaded()&&!e.isEmptyScene()&&e.updateOctreeNode(!0)})}},{key:"updateMaterials",value:function(){this.modelCollection.traverse(function(e){e.isLoaded()&&!e.isEmptyScene()&&e.updateMaterials()})}},{key:"updateMaterialsValue",value:function(e,t,i){this.modelCollection.traverse(function(r){r.isLoaded()&&!r.isEmptyScene()&&r.updateMaterialsValue(e,t,i)}),this.materialOverrideSet&&this.materialOverrideSet.updateMaterialsValue(e,t)}},{key:"enableColorWithoutLight",value:function(e){this.modelCollection.traverse(function(t){t.isLoaded()&&!t.isEmptyScene()&&t.enableColorWithoutLight(e)})}},{key:"switchNewStyleMaterial",value:function(e){this.modelCollection.traverse(function(t){t.isLoaded()&&!t.isEmptyScene()&&t.switchNewStyleMaterial(e)})}},{key:"changeAllMaterials",value:function(e){this.IBLMaterial!=e&&(this.modelCollection.traverse(function(t){t.isEmptyScene()||t.changeAllMaterials(e)}),this.IBLMaterial=e)}},{key:"setCrossOrigin",value:function(e){this.crossOrigin=e}},{key:"getMatrixWorldGlobal",value:function(){return this.scene.getMatrixWorldGlobal()}},{key:"hasModel",value:function(){return this.modelCollection.some(function(e){return e.isLoaded()})}},{key:"hasModelDataReady",value:function(){return 0!==this.modelCollection.length&&!this.modelCollection.some(function(e){return!e.isDataReady()})}},{key:"isLayerData",value:function(){return this.modelCollection.some(function(e){return e.isLayerData()})}},{key:"getModel",value:function(e){var t=this.modelCollection.getById(e+"");return t&&t.isLoaded()?t:null}},{key:"getFirstModel",value:function(){return this.modelCollection.getByIndex(0)}},{key:"showOctreeBox",value:function(e){if(s.GlobalData.ShowOctant){var t=this.scene.getOrCreateObjectGroup(s.ObjectGroupType.OCTREENODE,{pickable:0,priority:2});if(t.visible=!0,0===t.children.length){var i=new THREE.Box3(e.min,e.max),r=new s.BBoxNode(i,16711680);t.add(r),r.updateMatrixWorld(!0),function e(i){for(var r=0,n=i.childOctants.length;r<n;r++){var a=i.childOctants[r],o=new THREE.Box3(a.min,a.max),l=255;l<<=5*a.depth;var u=new s.BBoxNode(o,l);t.add(u),u.updateMatrixWorld(!0),e(a)}}(e)}}else this.scene.removeObjectGroupByName(s.ObjectGroupType.OCTREENODE)}},{key:"setCategoriesToHighPriority",value:function(e,t){var i=e.length;if(!(i<1))for(var r=this.highPriorityCategories[t]={},n=0;n<i;++n)r[e[n]]=!0}},{key:"getCategoriesFromHighPriority",value:function(e){return this.highPriorityCategories[e]}},{key:"clearCategoriesFromHighPriority",value:function(e){this.highPriorityCategories[e]={}}},{key:"clearAllCategoriesFromHighPriority",value:function(){this.clearCategoriesFromHighPriority("inner"),this.clearCategoriesFromHighPriority("outer")}},{key:"calculateCameraModelRelation",value:function(e){var t=!1;this.modelCollection.traverse(function(i){i.isLoaded()&&!i.isEmptyScene()&&(i.calculateCameraModelRelation(e),t=t||i.containsCamera)}),this.containsCamera=t}},{key:"getCameraNameList",value:function(){var e=[];return this.modelCollection.traverse(function(t){t.isEmptyScene()||(e=e.concat(t.getCameraNameList()))}),e}},{key:"getCamera",value:function(e){var t=null;return this.modelCollection.some(function(i){if(!i.isEmptyScene()&&(t=i.getCamera(e)))return!0}),t}},{key:"getNumOfElements",value:function(e){var t=0;if(e){var i=this.modelCollection.getById(e);i&&!i.isEmptyScene()&&(t+=i.getStatistics().numOfElements)}else this.modelCollection.traverse(function(e){e.isEmptyScene()||(t+=e.getStatistics().numOfElements)});return t}},{key:"getNumOfRenderables",value:function(e){var t=0;if(e){var i=this.modelCollection.getById(e);i&&!i.isEmptyScene()&&(t+=i.getStatistics().renderableTotal)}else this.modelCollection.traverse(function(e){e.isEmptyScene()||(t+=e.getStatistics().renderableTotal)});return t}},{key:"getNumOfTriangles",value:function(e){var t=0;if(e){var i=this.modelCollection.getById(e);i&&!i.isEmptyScene()&&(t+=i.getStatistics().numOfTriangles)}else this.modelCollection.traverse(function(e){e.isEmptyScene()||(t+=e.getStatistics().numOfTriangles)});return t}},{key:"getNumOfVertices",value:function(e){var t=0;if(e){var i=this.modelCollection.getById(e);i&&!i.isEmptyScene()&&(t+=i.getStatistics().numOfVertices)}else this.modelCollection.traverse(function(e){e.isEmptyScene()||(t+=e.getStatistics().numOfVertices)});return t}},{key:"getScene",value:function(){return this.scene}},{key:"getOctreeRoots",value:function(){var e={};return this.modelCollection.traverse(function(t){if(t.isLoaded()&&!t.isEmptyScene()){var i=t.getEncodedDatabagId();e[i]=[],t.getOctreeRoots(e[i])}}),e}},{key:"addMeshToOctantMap",value:function(e,t,i){var r=this.octantToObjectMap;r[e]||(r[e]={}),r[e].mesh||(r[e].mesh={}),r[e].mesh[t]||(r[e].mesh[t]=[]),r[e].mesh[t].push(i)}},{key:"addNodeInfoToOctantMap",value:function(e,t,i){var r=this.octantToObjectMap;r[e]||(r[e]={}),r[e].info||(r[e].info={}),r[e].info[t]||(r[e].info[t]=[]),r[e].info[t].push(i)}},{key:"removeNodeInfoFromOctantMap",value:function(e,t){var i=this.octantToObjectMap;if(i[e]&&i[e].info&&i[e].info[t.cellId])for(var r=i[e].info[t.cellId],n=r.length-1;n>=0;n--)if(t.nodeId===r[n].nodeId){r.splice(n);break}}},{key:"clearNodeInfosFromOctantMap",value:function(e){var t=this.octantToObjectMap;t[e]&&t[e].info&&(t[e]=null)}},{key:"removeAllFromOctantMap",value:function(e){var t=this.octantToObjectMap;t[e]&&delete t[e]}},{key:"clearMeshFromOctantMap",value:function(e){var t=this.octantToObjectMap;t[e]&&t[e].mesh&&delete t[e].mesh}},{key:"removeMeshFromOctantMap",value:function(e,t){var i=this.octantToObjectMap;if(i[e]&&i[e].mesh&&i[e].info){var r,n=i[e].info[t.cellId];for(r=n.length-1;r>=0;r--)if(t.nodeId===n[r].nodeId){n.splice(r);break}i[e].mesh[t.nodeId]&&delete i[e].mesh[t.nodeId]}}},{key:"getOctantMap",value:function(){return this.octantToObjectMap}},{key:"isFilterApplied",value:function(){return this.filterApplied}},{key:"setFilterApplied",value:function(e){this.filterApplied=e}},{key:"applyFilter",value:function(e){if(void 0===e)this.traverseValidModels(function(e){e.applyFilter()});else{var t=this.getModel(e);t&&t.applyFilter()}this.setFilterApplied(!0)}},{key:"applySelection",value:function(e){if(this.selectPriority=!0,void 0===e)this.traverseValidModels(function(e){e.applySelection()});else{var t=this.getModel(e);t&&t.applySelection()}}},{key:"clearSelection",value:function(e){if(this.selectPriority=!0,void 0===e)this.traverseValidModels(function(e){e.clearSelection()});else{var t=this.getModel(e);t&&t.clearSelection()}}},{key:"applyHover",value:function(e){if(s.GlobalData.Hover)if(void 0===e)this.traverseValidModels(function(e){e.applyHover()});else{var t=this.getModel(e);t&&t.applyHover()}}},{key:"clearHover",value:function(e){if(s.GlobalData.Hover)if(void 0===e)this.traverseValidModels(function(e){e.clearHover()});else{var t=this.getModel(e);t&&t.clearHover()}}},{key:"chooseRendering",value:function(e,t){if(!this.firstChooseRendering){if(this.firstChooseRendering=!0,t)return s.GlobalData.DynamicScheduling=!0,s.GlobalData.BatchMergeEnabled=!0,void(s.GlobalData.IncrementRender=!1);console.log("Maximum Memory (M):",e.maxMemorySize);switch(s.GlobalData.Renderer){case s.EnumRendererType.FULL:s.GlobalData.BatchMergeEnabled=!0,s.GlobalData.IncrementRender=!1;break;case s.EnumRendererType.INCREMENT:s.GlobalData.BatchMergeEnabled=!1,s.GlobalData.IncrementRender=!0;break;default:e.maxMemorySize<=s.GlobalData.MaxMemeorySizeToFullRender?(s.GlobalData.BatchMergeEnabled=!0,s.GlobalData.IncrementRender=!1):(s.GlobalData.BatchMergeEnabled=!1,s.GlobalData.IncrementRender=!0)}}}},{key:"isUserIdExist",value:function(e,t){if(void 0===t)return this.modelCollection.some(function(t){return t.isUserIdExist(e)});var i=this.getModel(t);return!(!i||!i.isUserIdExist(e))}},{key:"getNodeInfosByUserId",value:function(e,t){var i,r=function(e,t){i&&0!==i.length||(i=e.getNodeInfosByUserId(t))};return this.filterHelper.executeId(e,r,t),i&&i.length>0?i:null}},{key:"getNodeInfos",value:function(){var e={};return this.modelCollection.traverse(function(t){var i=t.getAllNodeInfos();i&&(e[t.id]=i)}),e}},{key:"getMaterialByNodeId",value:function(e,t,i){var r=this.modelCollection.getById(e);if(!r)return null;for(var n=r.getNodeInfosByUserId(t),a=-1,o=0,s=n.length;o<s;o++)if(n[o].nodeId===i){a=o;break}return-1!==a?r.getMaterialByMaterialId(n[a].materialId):null}},{key:"getImageByUrl",value:function(e){for(var t=this.modelCollection._layers,i=0;i<t.length;i++)if(t[i].dataUrl){var r=e.lastIndexOf("/")-8;if(e.substring(0,r)==t[i].dataUrl.databagPath){var n=t[i].getImageByUrl(e);if(n)return n}}return null}},{key:"getNodeInfoByNodeId",value:function(e,t,i){var r=this.modelCollection.getById(e);if(!r)return null;for(var n=r.getNodeInfosByUserId(t),a=-1,o=0,s=n.length;o<s;o++)if(n[o].nodeId===i){a=o;break}return-1!==a?n[a]:null}},{key:"getComponentInfoByUserId",value:function(e,t){var i=this.getNodeInfosByUserId(e,t);if(i&&i.length>0){for(var r=new THREE.Box3,n=[],a=0,o=i.length;a<o;a++){var s=i[0].transformMatrix||new THREE.Matrix4,l=i[a].boundingBox.clone().applyMatrix4(s);r.union(l),-1===n.indexOf(i[a].materialId)&&n.push(i[a].materialId)}return{userId:e,state:0,materials:n,boundingBox:r,userData:i[0].userData}}return null}},{key:"getBoundingBoxByIds",value:function(e,t){var i=this.viewer,r=new THREE.Box3;for(var n in e)if(!this.isHiddenUserId(n)){var a=this.getComponentInfoByUserId(n,t);if(a)r.union(a.boundingBox);else{var o=s.ExtrudeBodyManager.getInstance(i),l=o.getNode(n);if(l){var u=l.geometry.boundingBox.clone();l.matrix&&u.applyMatrix4(l.matrix),r.union(u)}}}return r}},{key:"createMaterialOverrideSet",value:function(e,t){this.materialOverrideSet=new s.MaterialOverriderSet(e,t),s.GlobalData.EnableTextureMapping=!0}},{key:"getMaterialOverrideSet",value:function(){return this.materialOverrideSet}},{key:"getOverrideMaterialByNodeInfo",value:function(e,t){return this.materialOverrideSet?this.materialOverrideSet.getOverrideMaterialByNodeInfo(e,t):null}},{key:"getOverrideMaterialByName",value:function(e){return this.materialOverrideSet?this.materialOverrideSet.getOverrideMaterialByName(e):null}},{key:"loadOverrideMaterialsByDemand",value:function(e,t){if(this.materialOverrideSet){var i=this.getConditions();this.materialOverrideSet.loadByDemand(i,e,t)}else t&&t()}},{key:"getConditions",value:function(){var e={},t={},i={};return this.modelCollection.traverse(function(r){var n=r.getAllNodeInfos();if(n)for(var a in n)if(n.hasOwnProperty(a))for(var o=0,s=n[a].length;o<s;o++){var l=n[a][o].userData;t[n[a][o].userId]=!0,i[l.systemTypeId]=!0,e[l.familyId]=!0}}),{familyIds:e,elementIds:t,systemTypeIds:i}}},{key:"isHiddenUserId",value:function(e){return this.modelCollection.some(function(t){return t.isHiddenUserId(e)})}},{key:"updateMeshNodes",value:function(){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(e){!e.isEmptyScene()&&e.isLoaded()&&e.updateMeshNodes()})}},{key:"getMinDistanceObjects",value:function(e,t){var i=this,r={},n=this.filterHelper.distributeId(e),a=n.modelId,o=n.objectId,l=this.filterHelper.distributeId(t),u=l.modelId,c=l.objectId;if(a&&u&&a===u){var h=this.modelCollection.getById(a);h.minDistanceObjects={},h.getMeshesByUserIds(o,c),h.minDistanceObjects[o].length>0&&h.minDistanceObjects[c].length>0&&(r[e]=h.minDistanceObjects[o],r[t]=h.minDistanceObjects[c])}else{if(a){var d=this.modelCollection.getById(a);d.minDistanceObjects={},d.getMeshesByUserIds(o,o),d.minDistanceObjects[o].length>0&&(r[e]=d.minDistanceObjects[o])}if(u){var f=this.modelCollection.getById(u);f.minDistanceObjects={},f.getMeshesByUserIds(c,c),f.minDistanceObjects[c].length>0&&(r[t]=f.minDistanceObjects[c])}if(a&&u||this.modelCollection.traverse(function(i){"ExtrudeBodyManager"!==i.id&&"ExternalComponent"!==i.id&&(i.minDistanceObjects={},i.getMeshesByUserIds(o,c),!r[e]&&i.minDistanceObjects[o].length>0&&(r[e]=i.minDistanceObjects[o]),!r[t]&&i.minDistanceObjects[c].length>0&&(r[t]=i.minDistanceObjects[c]))}),!r[e]||!r[t]){var p,m,v,g,y,M=function(){var n=function(e,t,i){var n={};n.mesh=e;var a=new THREE.Matrix4;i?a.multiplyMatrices(i,e.matrix):a=e.matrix,n.matrix=a;var o=e.geometry.boundingBox;o||(e.geometry.computeBoundingBox(),o=n.mesh.geometry.boundingBox);var s=o.clone().applyMatrix4(a);n.boundingBox=s,r[t]||(r[t]=[]),r[t].push(n)};if(!(p=i.scene.getObjectGroup("ExternalComponentManager")))return{v:void 0};for(m=p.children,v=0,g=m.length;v<g;v++)y=m[v],y.name!=e&&y.name!=t||(s.Utils.isGroupObject(y)?y.traverseVisible(function(e){s.Utils.isMeshObject(e)&&n(e,y.name,y.matrix)}):n(y,y.name))}();if("object"===(void 0===M?"undefined":_typeof(M)))return M.v}}return r[e]&&r[t]?r:null}},{key:"adjustVisibility",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.adjustVisibility&&t.adjustVisibility(e)})}},{key:"changeVisibilityOfSelectedObjects",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.changeVisibilityOfSelectedObjects&&t.changeVisibilityOfSelectedObjects(e)})}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.changeVisibilityOfNonSelectedObjects&&t.changeVisibilityOfNonSelectedObjects(e)})}},{key:"adjustInstanceVisibility",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.adjustInstanceVisibility&&t.adjustInstanceVisibility(e)})}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.changeInstanceVisibilityOfSelectedObjects&&t.changeInstanceVisibilityOfSelectedObjects(e)})}},{key:"changeInstanceVisibilityOfNonSelectedObjects",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.changeInstanceVisibilityOfNonSelectedObjects&&t.changeInstanceVisibilityOfNonSelectedObjects(e)})}},{key:"adjustDemVisibility",value:function(e){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(t){t.isDemLayer&&t.tileManager&&(e?t.tileManager.showAllLayers(!0):t.tileManager.hideAllLayers(!1))})}},{key:"restoreVisibilityOfObjects",value:function(){s.GlobalData.BatchMergeEnabled&&this.modelCollection.traverse(function(e){e.restoreVisibilityOfObjects&&e.restoreVisibilityOfObjects()})}},{key:"isSelectPriority",value:function(){return this.selectPriority}},{key:"getSceneState",value:function(){return this.sceneState}},{key:"disposeBufferAfterVbo",value:function(){s.GlobalData.EnableDisposeBufferAfterVbo&&this.modelCollection.traverse(function(e){e.disposeBufferAfterVbo()})}},{key:"getSourceObjectManager",value:function(){return this.sourceObjectManager||(this.sourceObjectManager=new s.SourceObjectManager),this.sourceObjectManager}},{key:"isHiddenSourceObjectUserId",value:function(e){return!!this.sourceObjectManager&&this.sourceObjectManager.isHidden(e)}},{key:"hasHiddenSourceObjectUserId",value:function(){return!!this.sourceObjectManager&&this.sourceObjectManager.hasHidden()}},{key:"traverseModels",value:function(e,t){this.modelCollection.traverseIf(e,t)}},{key:"traverseLoadedModels",value:function(e){this.traverseValidModels(e)}},{key:"traverseValidModels",value:function(e){this.viewer.globalRendering||this.modelCollection.traverse(function(t){t.isUseable()&&e(t)})}},{key:"dealStateChanged",value:function(){if(this.hasModelDataReady()&&(this.isRenderStateChanged()||this.filter.isStateChanged())){if(this.isRenderStateChanged()&&this.setRenderStateChanged(!1),this.filter.isStateChanged()){s.GlobalData.EnableShadowMap&&this.viewer.updateShadowMap();var e=this.scene.fillClipPlane;e&&e.update(),this.filter.disableStateChanged()}if(this.filter.isVisibleStateChanged()){var e=this.scene.fillClipPlane;e&&this.scene.hasObjectGroup(s.ObjectGroupType.CAPSWIREFRAME)&&(e.clearCapsWireframe(),this.calculateClippingIds(!0)),this.filter.disableVisibleStateChanged()}this.applyFilter(),this.viewer.viewshedManager&&this.viewer.viewshedManager.update()}}},{key:"setRenderStateChanged",value:function(e){this._renderStateChanged=e}},{key:"isRenderStateChanged",value:function(){return this._renderStateChanged}},{key:"hasLoadOnDemandDirector",value:function(){return!!this.loadOnDemandDirector}},{key:"getLoadOnDemandDirector",value:function(){return this.loadOnDemandDirector||(this.loadOnDemandDirector=new s.LoadOnDemandDirector(this)),this.loadOnDemandDirector}},{key:"checkLayerDataLoading",value:function(){return!!(this.isLayerData()&&this.hasLoadOnDemandDirector()&&this.getLoadOnDemandDirector().isLoading())&&(this.filter.isStateChanged()&&this.filter.disableStateChanged(),!0)}},{key:"updateFilterManager",value:function(){var e=this.getNodeInfos(),t=this.getFilter();t.clearFilterManager(),t.initFilterManager(e),t.isStateChanged()&&t.disableStateChanged(),this.updateMeshNodes(),this.applyFilter()}},{key:"isDrawingBoardlineEnabled",value:function(){return!(!s.GlobalData.DrawingBoardlineEnabled||s.GlobalData.DrawingStyle!==s.DrawingStyle.BOARDLINE&&s.GlobalData.DrawingStyle!==s.DrawingStyle.SHADINGWITHLINE)}},{key:"isOnlyWireframe",value:function(){return s.GlobalData.DrawingStyle===s.DrawingStyle.BOARDLINE}},{key:"calculateClippingIds",value:function(e){this.modelCollection.traverse(function(t){t.calculateClippingIds(e)})}},{key:"calculateClippingContours",
value:function(e){this.modelCollection.traverse(function(t){t.calculateClippingContours(e)})}},{key:"getInstanceDepthMaterial",value:function(){if(this.instanceDepthMaterial)return this.instanceDepthMaterial;var e=new s.InstancedDepthMaterial;return e.depthPacking=THREE.RGBADepthPacking,this.instanceDepthMaterial=e,this.instanceDepthMaterial}},{key:"createDemModel",value:function(e,t){if(this.removeModel(s.ObjectGroupType.TILEGROUP),e=e||{},!s.GlobalData.EnableLodDemDom&&!t){var i=new s.DemModel(this.viewer,this,{});return i.loadTile(this.viewer,e),this.addModel(i),i}var r=e.loadConfig?e:{loadConfig:e};r.manager=this,this.checkIfFirstLodedModelLayer({isDemLayer:!0});var n=s.ModelFactory.globe(this.viewer,r);return this.addModel(n),n.load(),n}},{key:"createLineModel",value:function(e){var t=new s.LineModel(this.viewer,this,e);return this.addModel(t),t.load(),t}},{key:"setDemLoadedState",value:function(e){this.demLoaded=e,this.updateRenderLoopState()}},{key:"isSceneChanged",value:function(){return this.isRenderStateChanged()||this.filter.isStateChanged()}},{key:"isMeterUnit",value:function(){var e=!1;return this.modelCollection.traverse(function(t){t._config&&t._config.metadata&&("bimtile"===t._config.metadata.asset||"bimtiles"===t._config.metadata.asset||"m"===t._config.metadata.model_unit)&&(e=!0)}),e}},{key:"checkIfFirstLodedModelLayer",value:function(e){void 0===this.firstLoadedBmdLayer&&(this.firstLoadedBmdLayer=!!e.isBmdLayer,s.Tile.TileMath.unitScale=this.firstLoadedBmdLayer?1e3:1)}},{key:"updateRenderLoopState",value:function(){if(this.viewer&&this.viewer.rendererManager){var e=this.viewer.rendererManager.renderer;if(e&&e.isBatched){this.firstLoadedBmdLayer&&!this.demLoaded?e.setRenderLoop(!1):e.setRenderLoop(!0)}}}}]),t}(THREE.EventDispatcher);s.ModelManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.modelManager=t,this.observerForSceneState=null,this.filterHelper=this.modelManager.getFilterHelper()}return _createClass(e,[{key:"destroy",value:function(){this.modelManager=null,this.observerForSceneState=null,this.filterHelper=null}},{key:"clear",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clear()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clear()}}},{key:"setIsolateMaterial",value:function(e,t){if(void 0===t)this.modelManager.traverseValidModels(function(t){t.getFilter()&&t.getFilter().setIsolateMaterial(e)});else{var i=this.modelManager.getModel(t);i&&i.getFilter()&&i.getFilter().setIsolateMaterial(e)}}},{key:"resetIsolateMaterial",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().resetIsolateMaterial()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().resetIsolateMaterial()}}},{key:"setFrozonMaterial",value:function(e,t){if(void 0===t)this.modelManager.traverseValidModels(function(t){t.getFilter()&&t.getFilter().setFrozonMaterial(e)});else{var i=this.modelManager.getModel(t);i&&i.getFilter()&&i.getFilter().setFrozonMaterial(e)}}},{key:"getFrozonMaterial",value:function(e){var t,i=[];if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&(t=e.getFilter().getFrozonMaterial())&&i.push(t)});else{var r=this.modelManager.getModel(e);r&&r.getFilter()&&(t=r.getFilter().getFrozonMaterial())&&i.push(t)}return i[0]}},{key:"_getMaterialByName",value:function(e,t){var i,r=[];if(void 0===t)this.modelManager.traverseValidModels(function(t){t.getFilter()&&(i=t.getFilter()._getMaterialByName(e))&&r.push(i)});else{var n=this.modelManager.getModel(t);n&&n.getFilter()&&(i=n.getFilter()._getMaterialByName(e))&&r.push(i)}return r[0]}},{key:"_isolate",value:function(e,t,i){var r=e.getFilter();switch(i){case"hide":r.setIsolateConditions(t,s.EnumIsolateState.HIDDEN_OTHERS);break;case"translucent":r.setIsolateConditions(t,s.EnumIsolateState.TRANSLUCENT_OTHERS);break;default:console.log("no this isolate state : "+i)}}},{key:"isolate",value:function(e,t,i){var r=this,n=function(e,i){r._isolate(e,i,t)};this.filterHelper.executeConditions(e,n,i)}},{key:"setConditions",value:function(e,t,i){var r=function(t,i){t.getFilter().setConditions(e,i)};this.filterHelper.executeConditions(t,r,i)}},{key:"isHidden",value:function(e,t){var i=!1,r=function(e,t){i||(i=e.getFilter().isHidden(t))};return this.filterHelper.executeId(e,r,t),i}},{key:"isFrozen",value:function(e,t){var i=!1,r=function(e,t){i||(i=e.getFilter().isFrozen(t))};return this.filterHelper.executeId(e,r,t),i}},{key:"isIsolate",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter().isIsolate())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter().isIsolate())}return t}},{key:"isFiltering",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter().isFiltering())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter().isFiltering())}return t}},{key:"getMatchIds",value:function(e,t){var i=[],r=function(e,t){i=i.concat(e.getFilter().getMatchIds(t))};return this.filterHelper.executeConditions(e,r,t),i}},{key:"isMatchConditions",value:function(e,t,i){var r=!1,n=function(t,i){r=r||t.getFilter().getObjectInfoManager().isMatchConditions(e,i)};return this.filterHelper.executeConditions(t,n,i),r}},{key:"deactivateByIds",value:function(e,t){var i=function(e,t){e.getFilter().deactivateByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"addToOverrideListByColor",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListByColor(i,t)};this.filterHelper.executeIds(e,r,i)}},{key:"addToOverrideListByOpacity",value:function(e,t,i){var r=this,n=function(e,n){if(e&&e instanceof s.BimTilesModel)for(var a=0;a<n.length;a++)e.getFilter().addToModifyOpacityList(n[a],t);else if(e&&e.getFilter()&&e._handler){for(var o={},l=[],a=0;a<n.length;a++){var u=!0,c=n[a],h=null,d=null,f=e.getFilter().getObjectInfoManager().getMaterial(c);if(f&&(h=f,h.name.indexOf("_opacity")<0&&(u=!1),h.map&&(d=h.map)),u&&t>.999)l.push(c);else{var p=e._handler.getGeometryBuffersByUserId(c);if(p&&p.length>0){d=null;for(var m=0;m<p.length;m++){var v=p[m],g=r.modelManager.getMaterialByNodeId(v.databagId,c,v.nodeId);if(g.map){d=g.map,h=g;break}g.dispose()}var v=p[0];h||(h=r.modelManager.getMaterialByNodeId(v.databagId,c,v.nodeId))}if(h){var y=h.color.getHex();h.dispose();var M=y+"";d&&(M+="_"+d.uuid),u&&(M+="_opacity"),o[M]?o[M].ids.push(c):(o[M]={color:{color:y,opacity:t},ids:[c]},u&&(o[M].color.setByOpacity=u),d&&(o[M].color.map=d)),d&&d.dispose(),d=null}}}for(var E in o){var b=o[E];e.getFilter().addToOverrideListByColor(b.ids,b.color)}l.length>0&&r.addToOverrideListByColor(l,null,i)}};if("conditions"===e.type){var a=e.param,o=function(e,t){var i=function(t,i){i&&n(e,t)};e.getFilter().addToOpacityListByConditions(t,i)};this.filterHelper.executeConditions(a,o,i)}else{var l=e.param,o=function(e,t){n(e,t)};this.filterHelper.executeIds(l,o,i)}}},{key:"addToOverrideListByMaterial",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListByMaterial(i,t)};this.filterHelper.executeConditions(e,r,i)}},{key:"addToOverrideListByConditions",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListByConditions(i,t)};this.filterHelper.executeConditions(e,r,i)}},{key:"addToOverrideListByMaterialAndId",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListByMaterialAndId(i,t)};this.filterHelper.executeIds(e,r,i)}},{key:"clearAllOverrideList",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearAllOverrideList()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearAllOverrideList()}}},{key:"addToOverrideListForWireFrameByColor",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListForWireFrameByColor(i,t)};this.filterHelper.executeIds(e,r,i)}},{key:"addToOverrideListForWireFrameByConditions",value:function(e,t,i){var r=function(e,i){e.getFilter().addToOverrideListForWireFrameByConditions(i,t)};this.filterHelper.executeConditions(e,r,i)}},{key:"addToLocalClippingList",value:function(e,t){var i=this,r=function(e,t){if(e&&e instanceof s.BimTilesModel)for(var r=e.getFilter().getLocalClippingList(),n=0;n<t.length;n++){var a=t[n],o=r[a];o||e.getFilter().addToLocalClippingList(a)}else if(e&&e.getFilter()&&e._handler)for(var r=e.getFilter().getLocalClippingList(),n=0;n<t.length;n++){var a=t[n],o=r[a];if(!o){var l=e._handler.instancedManager.meshManager;l.traverseNodeIdxMapByUserId(a,function(t,i){if(l.getInstanceGeometries(t)){var r=l.getMaterialIdByMeshId(t),n=e.materialManager.getInstanceMaterialById(r,e);if(n)if(n instanceof Array)for(var a=0;a<n.length;a++){var o=n[a];e.getFilter().addInstanceMaterialForClip(o.uuid,o)}else e.getFilter().addInstanceMaterialForClip(n.uuid,n)}});var u=!0,c=i.modelManager.getNodeInfosByUserId(a,e.id);if(c)for(var h=0;h<c.length;h++)if(!c[h].instanceOrNot){u=!1;break}if(u)e.getFilter().addToLocalClippingList(a);else{var d=e._handler.getGeometryBuffersByUserId(a);if(d&&d.length>0)for(var f=0;f<d.length;f++){var p=d[f],m=i.modelManager.getMaterialByNodeId(p.databagId,a,p.nodeId);if(m){var v={};v.color=m.color.getHex(),v.opacity=m.opacity,v.side=m.side,m.map&&(v.map=m.map);var g=e.getWireframeMaterial(),y={};y.color=g.color.getHex(),y.opacity=g.opacity,y.side=g.side,e.getFilter().addToLocalClippingList(a,v,y,p.nodeId)}}}}}};if("conditions"===e.type){var n=e.param,a=function(e,t){var i=function(t,i){i&&r(e,t)};e.getFilter().addToLocalClippingListByConditions(t,i)};this.filterHelper.executeConditions(n,a,t)}else{var o=e.param,a=function(e,t){r(e,t)};this.filterHelper.executeIds(o,a,t)}}},{key:"clearLocalClippingList",value:function(e){if(e){var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearLocalClippingList()}else this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearLocalClippingList()})}},{key:"addToIsolateList",value:function(e,t,i){var r=function(e,i){e.getFilter().addToIsolateList(i,t)};this.filterHelper.executeIds(e,r,i)}},{key:"setIsolateConditions",value:function(e,t,i){var r=function(e,i){e.getFilter().setIsolateConditions(i,t)};this.filterHelper.executeConditions(e,r,i)}},{key:"clearIsolation",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearIsolation()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearIsolation()}}},{key:"clearAllIsolateConditions",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearAllIsolateConditions()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearAllIsolateConditions()}}},{key:"showByIds",value:function(e,t){var i=function(e,t){e.getFilter().showByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"showByConditions",value:function(e,t){var i=function(e,t){e.getFilter().showByConditions(t)};this.filterHelper.executeConditions(e,i,t)}},{key:"hideByIds",value:function(e,t){var i=function(e,t){e.getFilter().hideByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"hideByConditions",value:function(e,t){var i=function(e,t){e.getFilter().hideByConditions(t)};this.filterHelper.executeConditions(e,i,t)}},{key:"hideOthersByConditions",value:function(e,t){var i=function(e,t){e.getFilter().hideOthersByConditions(t)};this.filterHelper.executeConditions(e,i,t)}},{key:"showAll",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().showAll()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().showAll()}}},{key:"hideAll",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().hideAll()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().hideAll()}}},{key:"showScene",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().showScene()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().showScene()}}},{key:"clearInactivatedIdMap",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearInactivatedIdMap()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearInactivatedIdMap()}}},{key:"makeTranslucentByIds",value:function(e,t){var i=function(e,t){e.getFilter().makeTranslucentByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"makeTranslucentByConditions",value:function(e,t){var i=function(e,t){e.getFilter().makeTranslucentByConditions(t)};this.filterHelper.executeConditions(e,i,t)}},{key:"makeTranslucentOthersByIds",value:function(e,t){var i=function(e,t){e.getFilter().makeTranslucentOthersByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"opaqueByIds",value:function(e,t){var i=function(e,t){e.getFilter().opaqueByIds(t)};this.filterHelper.executeIds(e,i,t)}},{key:"opaqueByConditions",value:function(e,t){var i=function(e,t){e.getFilter().opaqueByConditions(t)};this.filterHelper.executeConditions(e,i,t)}},{key:"opaqueAll",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().opaqueAll()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().opaqueAll()}}},{key:"_hasVisibleFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasVisibleFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasVisibleFilter())}return t}},{key:"_hasPickableFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasPickableFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasPickableFilter())}return t}},{key:"_hasHiddenFileIdFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasHiddenFileIdFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasHiddenFileIdFilter())}return t}},{key:"_hasOverrideMaterialFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasOverrideMaterialFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasOverrideMaterialFilter())}return t}},{key:"_hasTransparentFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasTransparentFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasTransparentFilter())}return t}},{key:"_hasOverrideMaterialFilterForWireFrame",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasOverrideMaterialFilterForWireFrame())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasOverrideMaterialFilterForWireFrame())}return t}},{key:"_hasRenderWithBoardlineFilter",value:function(e){var t=!1;if(void 0===e)this.modelManager.traverseModels(function(e){e.getFilter()&&(t=e.getFilter()._hasRenderWithBoardlineFilter())},function(e){return t||!e.isUseable()});else{var i=this.modelManager.getModel(e);i&&i.getFilter()&&(t=i.getFilter()._hasRenderWithBoardlineFilter())}return t}},{key:"_isRenderWithBoardline",value:function(e,t){var i=!1;if(void 0===t)this.modelManager.traverseModels(function(t){t.getFilter()&&(i=t.getFilter()._isRenderWithBoardline(e))},function(e){return i||!e.isUseable()});else{var r=this.modelManager.getModel(t);r&&r.getFilter()&&(i=r.getFilter()._isRenderWithBoardline(e))}return i}},{key:"_isVisible",value:function(e,t){var i=!0;if(void 0===t)this.modelManager.traverseModels(function(t){t.getFilter()&&(i=t.getFilter()._isVisible(e))},function(e){return!i||!e.isUseable()});else{var r=this.modelManager.getModel(t);r&&r.getFilter()&&(i=r.getFilter()._isVisible(e))}return i}},{key:"_isPickable",value:function(e,t){var i=!0;if(void 0===t)this.modelManager.traverseModels(function(t){t.getFilter()&&(i=t.getFilter()._isPickable(e))},function(e){return!i||!e.isUseable()});else{var r=this.modelManager.getModel(t);r&&r.getFilter()&&(i=r.getFilter()._isPickable(e))}return i}},{key:"initFilterManager",value:function(e,t){if(void 0===t)this.modelManager.traverseValidModels(function(t){if(t.getFilter()){var i={};i[t.id]=e[t.id]||{},t.getFilter().initFilterManager(i)}});else{var i=this.modelManager.getModel(t);if(i&&i.getFilter()){var r={};r[t]=e[t]||{},i.getFilter().initFilterManager(r)}}}},{key:"reinitFilterManager",value:function(e,t){if(void 0===t)this.modelManager.traverseValidModels(function(t){if(t.getFilter()){var i={};i[t.id]=e[t.id]||{},t.getFilter().reinitFilterManager(i)}});else{var i=this.modelManager.getModel(t);if(i&&i.getFilter()){var r={};r[t]=e[t]||{},i.getFilter().reinitFilterManager(r)}}}},{key:"clearFilterManager",value:function(e){if(void 0===e)this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().clearFilterManager()});else{var t=this.modelManager.getModel(e);t&&t.getFilter()&&t.getFilter().clearFilterManager()}}},{key:"isStateChanged",value:function(e){var t=!1,i=this.modelManager;if(void 0===e)i.traverseModels(function(e){e.getFilter()&&(t=e.getFilter().isStateChanged())},function(e){return t||!e.isUseable()});else{var r=i.getModel(e);r&&r.getFilter()&&(t=r.getFilter().isStateChanged())}return t}},{key:"disableStateChanged",value:function(e){var t=this.modelManager;if(void 0===e)t.traverseValidModels(function(e){e.getFilter()&&e.getFilter().disableStateChanged()});else{var i=t.getModel(e);i&&i.getFilter()&&i.getFilter().disableStateChanged()}}},{key:"isVisibleStateChanged",value:function(e){var t=!1,i=this.modelManager;if(void 0===e)i.traverseModels(function(e){e.getFilter()&&(t=e.getFilter().isVisibleStateChanged())},function(e){return t||!e.isUseable()});else{var r=i.getModel(e);r&&r.getFilter()&&(t=r.getFilter().isVisibleStateChanged())}return t}},{key:"disableVisibleStateChanged",value:function(e){var t=this.modelManager;if(void 0===e)t.traverseValidModels(function(e){e.getFilter()&&e.getFilter().disableVisibleStateChanged()});else{var i=t.getModel(e);i&&i.getFilter()&&i.getFilter().disableVisibleStateChanged()}}},{key:"calculateVisibleComponentsBbox",value:function(){this.modelManager.traverseValidModels(function(e){if(e.getFilter()){var t=!0;"ExternalComponent"==e.id&&(e.checkVisibleComponentsBox()||(t=!1)),t&&e.getFilter().getObjectInfoManager().calculateVisibleComponentsBbox()}})}},{key:"getVisibleComponentsBbox",value:function(){var e,t=new THREE.Box3;return this.modelManager.traverseValidModels(function(i){if(i.getFilter()&&(e=i.getFilter().getVisibleComponentsBbox(),!e.isEmpty())){var r=i.getTransformMatrix();e.applyMatrix4(r),t.union(e)}}),t}},{key:"setObserverForSceneState",value:function(e){this.observerForSceneState=e}},{key:"getObserverForSceneState",value:function(){return this.observerForSceneState}},{key:"isComponentActive",value:function(e,t){var i=!1,r=function(e,t){i||(i=e.getFilter().isComponentActive(t))};return this.filterHelper.executeId(e,r,t),i}},{key:"needUpdateBoxAfterExplode",value:function(){var e=!1;return this.modelManager.traverseModels(function(t){t.getFilter()&&(e=t.getFilter().needUpdateBoxAfterExplode())},function(t){return e||!t.isUseable()}),e}},{key:"getVisibleComponentSet",value:function(e){var t={};return this.modelManager.traverseValidModels(function(i){if(i.getFilter()){var r=i.getFilter().getVisibleComponentSet(e);for(var n in r)t[n]=r[n]}}),t}},{key:"saveState",value:function(){var e={};this.modelManager.traverseValidModels(function(t){t.getFilter()&&(e[t.id]=t.getFilter().saveState())});for(var t in e){var i=e[t].actions;if(!i)return;for(var r=i.length,n=0;n<r;++n){var a=i[n];if(a.material&&a.material.map){var o=a.material.clone();o.map=null,a.material=o}}}return JSON.stringify(e)}},{key:"loadState",value:function(e){var t=JSON.parse(e);t.version?this.modelManager.traverseValidModels(function(e){e.getFilter()&&e.getFilter().loadState(t)}):this.modelManager.traverseValidModels(function(e){e.getFilter()&&t[e.id]&&e.getFilter().loadState(t[e.id])})}},{key:"getObjectsMap",value:function(e){var t={},i=this.modelManager;if(void 0===e)i.traverseValidModels(function(e){if(e.getFilter()){var i=e.getFilter().getObjectInfoManager().getObjectsMap();for(var r in i)t[r]=i[r]}});else{var r=i.getModel(e);if(r&&r.getFilter()){var n=r.getFilter().getObjectInfoManager().getObjectsMap();for(var a in n)t[a]=n[a]}}return t}},{key:"deactivateAll",value:function(e){var t=this.modelManager;if(void 0===e)t.traverseValidModels(function(e){e.getFilter()&&e.getFilter().deactivateAll()});else{var i=t.getModel(e);i&&i.getFilter()&&i.getFilter().deactivateAll()}}},{key:"activateAll",value:function(e){var t=this.modelManager;if(void 0===e)t.traverseValidModels(function(e){e.getFilter()&&e.getFilter().activateAll()});else{var i=t.getModel(e);i&&i.getFilter()&&i.getFilter().activateAll()}}}]),e}();s.ModelView.FilterDirector=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.modelManager=t}return _createClass(e,[{key:"destroy",value:function(){this.modelManager=null}},{key:"distributeIdsByModelId",value:function(e){for(var t={},i=this.modelManager.getModelIds(!0),r=[],n=function(e,i){e&&(e=e.toString(),t[e]||(t[e]=[]),"[object String]"===Object.prototype.toString.call(i)?t[e].push(i):"[object Array]"===Object.prototype.toString.call(i)&&(t[e]=t[e].concat(i)))},a=0;a<e.length;a++){var o=this.distributeId(e[a]),s=o.modelId,l=o.objectId;s?n(s,l):r.push(l)}if(r.length>0)for(var u=0;u<i.length;u++)n(i[u],r);return t}},{key:"distributeId",value:function(e){if(!e)return{modelId:void 0,objectId:e};var t,i,r=/\[(.*?)\](.*)/.exec(e.toString());if(r){t=r[1],i=r[2];this.modelManager.getModelIds(!0).indexOf(t)<0&&(t=void 0,i=e)}else i=e;return{modelId:t,objectId:i}}},{key:"distributeConditionsByModelId",value:function(e){for(var t={},i=this.modelManager.getModelIds(!0),r=[],n=function(e,r){e&&(e=e.toString(),i.indexOf(e)>=0&&(t[e]||(t[e]=[]),"[object Object]"===Object.prototype.toString.call(r)?t[e].push(r):"[object Array]"===Object.prototype.toString.call(r)&&(t[e]=t[e].concat(r))))},a=0;a<e.length;a++){var o=e[a];if(o.hasOwnProperty("modelId")){var s=o.modelId;delete o.modelId,n(s,o)}else r.push(o)}if(r.length>0)for(var l=0;l<i.length;l++)n(i[l],r);return t}},{key:"executeConditions",value:function(e,t,i){if(i){var r=this.modelManager.getModel(i);if(r&&r.getFilter())if(e&&0!==e.length){var n=this.distributeConditionsByModelId(e);n[i]&&"[object Function]"===Object.prototype.toString.call(t)&&t(r,n[i])}else"[object Function]"===Object.prototype.toString.call(t)&&t(r,e)}else if(e&&0!==e.length){var n=this.distributeConditionsByModelId(e);for(var a in n){var r=this.modelManager.getModel(a),o=n[a];r&&r.getFilter()&&o&&o.length>0&&"[object Function]"===Object.prototype.toString.call(t)&&t(r,o)}}else this.modelManager.traverseValidModels(function(i){i.getFilter()&&"[object Function]"===Object.prototype.toString.call(t)&&t(i,e)})}},{key:"executeIds",value:function(e,t,i){if(i){var r=this.modelManager.getModel(i);if(r&&r.getFilter())if(e&&0!==e.length){var n=this.distributeIdsByModelId(e);n[i]&&"[object Function]"===Object.prototype.toString.call(t)&&t(r,n[i])}else"[object Function]"===Object.prototype.toString.call(t)&&t(r,e)}else if(e&&0!==e.length){var n=this.distributeIdsByModelId(e);for(var a in n){var r=this.modelManager.getModel(a),o=n[a];r&&r.getFilter()&&o&&o.length>0&&"[object Function]"===Object.prototype.toString.call(t)&&t(r,o)}}else this.modelManager.traverseValidModels(function(i){i.getFilter()&&"[object Function]"===Object.prototype.toString.call(t)&&t(i,e)})}},{key:"executeId",value:function(e,t,i){var r=this.distributeId(e),n=r.modelId,a=r.objectId;if(i){if(!n||n.toString()===i.toString()){var o=this.modelManager.getModel(i);o&&o.getFilter()&&"[object Function]"===Object.prototype.toString.call(t)&&t(o,a)}}else if(n){var o=this.modelManager.getModel(n);o&&o.getFilter()&&"[object Function]"===Object.prototype.toString.call(t)&&t(o,a)}else this.modelManager.traverseValidModels(function(e){e.getFilter()&&"[object Function]"===Object.prototype.toString.call(t)&&t(e,a)})}}]),e}();s.ModelView.FilterHelper=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this._manager=t,this.modelCollection=t.modelCollection,this.sceneState=t.sceneState,this.blinkStartTimeMap={},this.blinkLastTimeMap={},this.positiveSequenceMap={},this.blinkEnabled=!1,this.blinkPermited=!1,this.defaultBlinkColor=s.Blink.DefaultBlinkColor.color,this.defaultBlinkAlpha=s.Blink.DefaultBlinkColor.opacity,this.blinkColorMap={},this.blinkIntervalTimeMap={}}return _createClass(e,[{key:"destroy",value:function(){this.blinkIntervalTimeMap=null,this.defaultBlinkColor=null,this.blinkColorMap=null,this.blinkStartTimeMap=null,this.blinkLastTimeMap=null,this.positiveSequenceMap=null,this.sceneState=null,this.modelCollection=null,this._manager=null}},{key:"getBlinkMaterials",value:function(e){if(e)return this.modelCollection.getById(e).getBlinkMaterials();var t={};return this.modelCollection.traverse(function(e){e.getBlinkMaterials&&(t[e.id]=e.getBlinkMaterials())}),t}},{key:"resetBlinkMaterial",value:function(e){var t=this.getBlinkMaterials(e);if(e)for(var i=0,r=t.length;i<r;i++)t[i].resetBlinkUniformValue();else for(var n in t)for(var a=t[n],o=0,s=a.length;o<s;o++)a[o].resetBlinkUniformValue()}},{key:"updateBlinkMaterial",value:function(e){var t=this,i=function(e){var i=t.getBlinkColor(e),r=t.getBlinkMaterials(e);if(0!=r.length){var n=t._manager.getModel(e);if(n&&n.updateBlinkMaterial)return void n.updateBlinkMaterial();var a=0,o=s.EnumShaderColorState.BLINK;t.blinkIntervalTimeMap[e]=t.blinkIntervalTimeMap[e]||600;var l=t.blinkIntervalTimeMap[e],u=Date.now();void 0===t.blinkStartTimeMap[e]&&(t.positiveSequenceMap[e]=!0,t.blinkStartTimeMap[e]=u,t.blinkLastTimeMap[e]=u);if(!(u-t.blinkLastTimeMap[e]<=100)){u-t.blinkStartTimeMap[e]>l&&(t.positiveSequenceMap[e]=!t.positiveSequenceMap[e],t.blinkStartTimeMap[e]=u,t.blinkLastTimeMap[e]=u);var c=(u-t.blinkStartTimeMap[e])/l;a=t.positiveSequenceMap[e]?c:1-c;for(var h=0,d=r.length;h<d;h++)r[h].updateBlinkUniformValue(o,i,a);t.blinkLastTimeMap[e]=u}}};if(e)i(e);else{var r=this.getBlinkMaterials();Object.keys(r).forEach(function(e){i(e)})}}},{key:"getBlinkColor",value:function(e){return this.blinkColorMap[e]||this.setBlinkColor(void 0,void 0,e),this.blinkColorMap[e]}},{key:"setBlinkColor",value:function(e,t,i){var r=this,n=function(n){if(!r.blinkColorMap[n]&&(r.blinkColorMap[i]=new THREE.Vector4),e){var a=s.Utils.hexToRgb(e);r.blinkColorMap[n].fromArray([a.r,a.g,a.b,t||1])}else r.blinkColorMap[n].set(r.defaultBlinkColor.r,r.defaultBlinkColor.g,r.defaultBlinkColor.b,r.defaultBlinkAlpha)};if(i)n(i);else{var a=this.getBlinkMaterials();Object.keys(a).forEach(function(e){n(e)})}}},{key:"setBlinkIntervalTime",value:function(e,t){var i=this,r=function(t){i.blinkIntervalTimeMap[t]<=0||(i.blinkIntervalTimeMap[t]=e)};if(t)r(t);else{var n=this.getBlinkMaterials();Object.keys(n).forEach(function(e){r(e)})}}},{key:"enableBlink",value:function(e){this.blinkEnabled=e,!1===e&&(this.blinkStartTime=null,this.resetBlinkMaterial()),this.applyBlink()}},{key:"getBlinkEnabled",value:function(){return!this.isBlinkPermited()&&this.blinkEnabled}},{key:"getBlinkComponentsIdMap",value:function(e){return this.isBlinkPermited()?null:this.sceneState.getBlinkComponentsIdMap(e)}},{key:"applyBlink",value:function(e){this.isBlinkPermited()||(this._manager.selectPriority=!1,e?this.modelCollection.getById(e).applyBlink():this.modelCollection.traverse(function(e){e.applyBlink()}))}},{key:"clearBlink",value:function(e){this.isBlinkPermited()||(this._manager.selectPriority=!1,e?this.modelCollection.getById(e).clearBlink():this.modelCollection.traverse(function(e){e.clearBlink()}))}},{key:"permitBlink",value:function(e){this.blinkPermited=e}},{key:"isBlinkPermited",value:function(){return this.blinkPermited}}]),e}();s.BlinkManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this._layers=[],this._destroyed=!1,this.eventDispatcher=new s.EventDispatcher}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this.removeAll(!0),this.eventDispatcher.destroy(),this.eventDispatcher=null,this._layers=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"add",value:function(e){return!!e&&(!this.getById(e.id)&&(this._layers.push(e),void(void 0===e.sequence?e.sequence=this._layers.length-1:this.moveToIdx(e,e.sequence))))}},{key:"remove",value:function(e,t){t=s.Utils.isDefined(t,!0);var i=this.getById(e);if(!i)return!1;this._layers.splice(this._layers.findIndex(function(t){return t.id==e}),1);var r=this._getByFilter(),n=!0,a=!1,o=void 0;try{for(var l,u=r[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;!c.isDestroyed()&&c.sequence>i.sequence&&c.sequence--}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t&&i.destroy(),!0}},{key:"removeAll",value:function(e){if(e)for(var t=this._getByFilter(),i=0,r=t.length;i<r;++i){if(t[i].isDestroyed())return;t[i].destroy()}this._layers=[]}},{key:"_getByFilter",value:function(e){var t=[],i=!0,r=!1,n=void 0;try{for(var a,o=this._layers[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;e&&!e(s)||t.push(s)}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}return t}},{key:"getById",value:function(e){return e&&(e=e.toString()),this._getByFilter(function(t){return t.id===e})[0]}},{key:"getByIndex",value:function(e){return this._layers[e]}},{key:"getMaxSequence",value:function(){return this._layers.length-1}},{key:"getOrderedIds",value:function(){var e=Array.from(this._layers);return e.sort(function(e,t){return e.sequence-t.sequence}),e.map(function(e){return e.id})}},{key:"getIds",value:function(){return this._layers.map(function(e){return e.id})}},{key:"traverse",value:function(e,t){var i=t?Array.from(this._layers):this._layers;t&&i.sort(function(e,t){return e.sequence-t.sequence}),i.forEach(function(t){return e(t)})}},{key:"traverseIf",value:function(e,t){for(var i=this._layers,r=0,n=i.length;r<n;++r){var a=i[r];if(t&&t(a))break;e&&e(a)}}},{key:"some",value:function(e){return this._layers.some(function(t){return e(t)})}},{key:"moveToIdx",value:function(e,t){var i=this._layers,r=s.Math.clamp(t,0,i.length-1),n=e.sequence,a=!0,o=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;h.id===e.id?h.sequence=r:h.sequence>n&&h.sequence<=r?h.sequence--:h.sequence>=r&&h.sequence<n&&h.sequence++}}catch(e){o=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}}},{key:"shiftDown",value:function(e){e.sequence>0&&this.moveToIdx(e,e.sequence-1)}},{key:"shiftUp",value:function(e){var t=this.getMaxSequence();e.sequence<t&&this.moveToIdx(e,e.sequence+1)}},{key:"length",get:function(){return this._layers.length}}]),e}();s.ModelView.LayerCollection=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.loader=new THREE.FileLoader}return _createClass(e,[{key:"destroy",value:function(){this.loader=null}},{key:"load",value:function(e,t,i){var r=new s.Loader.Url({serverUrl:e.parameters.serverUrl,databagId:e.parameters.databagId,
lightmapDatabagId:e.parameters.lightmapDatabagId});if(null!=e.parameters.metaData){var n={};n.metadata=e.parameters.metaData,n.coordinateSystem=e.parameters.coordinateSystem;var a=this.getModel(n,e);return void(t&&t(a))}var o=this,l=this.loader;l.setResponseType("");var u=r.projectUrl(),c=function(r){var n;try{n=JSON.parse(r)}catch(e){return i(e),void s.eventsDispatcher.dispatchEvent({type:s.EVENTS.ON_LOAD_INVALID_SCENE})}var a=o.getModel(n,e);t&&t(a)},h=function(e){console.log("Config load error!"),i(e),s.eventsDispatcher.dispatchEvent({type:s.EVENTS.ON_LOAD_INVALID_SCENE})},d=function(){return new Promise(function(e,t){l.load(u,e,void 0,t)})};s.Storage.IndexedDBHelper.loadWithStorage("InfoData",u,d,c,h)}},{key:"getModel",value:function(e,t){var i=e.metadata.asset?e.metadata.asset:"bmd";s.Utils.isDefined(e.metadata.FeatureType)&&"point"===e.metadata.FeatureType&&(i="point");var r=e.metadata.root?e.metadata.root:void 0;t.parameters.rootPath=r;var n=e.metadata.FeatureType?"shp":e.metadata.content?e.metadata.content:"bim";t.parameters.resourceType=n;var a=!!(!0===e.metadata.onDemand||t.parameters.loadConfig&&!0===t.parameters.loadConfig.onDemand);t.parameters.onDemand=a;var o=!0===e.metadata.layer;t.parameters.demandConditions=t.parameters.loadConfig&&t.parameters.loadConfig.condition,t.parameters.hasLayerInfo=o;var l=void 0===e.metadata.detailLevel?[]:e.metadata.detailLevel;t.parameters.detailLevelList=l,t.parameters.visualRange=t.parameters.loadConfig&&t.parameters.loadConfig.visualRange,t.parameters.disableUserData=!(!t.parameters.loadConfig||!0!==t.parameters.loadConfig.disableUserData),t.parameters.enableBorderLine=!(!t.parameters.loadConfig||!0!==t.parameters.loadConfig.enableBorderLine),t.parameters.maxDetailLevel=t.parameters.loadConfig&&t.parameters.loadConfig.maxDetailLevel,t.parameters.borderLineCategoryIds=!t.parameters.loadConfig||void 0===t.parameters.loadConfig.borderLineCategoryIds||t.parameters.loadConfig.borderLineCategoryIds!==[]&&t.parameters.loadConfig.borderLineCategoryIds;var u=s.ModelFactory[i](t.viewer,t.manager,t.parameters,t.index,t.parseCfgFinish,t.debut);return u.config=e,void 0!==t.priority&&(u.sequence=t.priority),u}}]),e}();s.ModelLoader=e}(),function(){s.ModelFactory={pointCloud:function(e,t,i,r,n,a){return new s.PointCloudModel(e,t,i,r,n,a)},"3dtiles":function(e,t,i,r,n,a){return new s.$3dTilesModel(e,t,i,r,n,a)},dem:function(e,t,i,r,n,a){return new s.DemModel(e,t,i,r,n,a)},bimtile:function(e,t,i,r,n,a){return new s.BimTilesModel(e,t,i,r,n,a)},bimtiles:function(e,t,i,r,n,a){return new s.BimTilesModel(e,t,i,r,n,a)},point:function(e,t,i,r,n,a){return new s.PointModel(e,t,i,n,a)},bmd:function(e,t,i,r,n,a){return new s.Model(t,i,r,n,a)},globe:function(e,t){return new s.Layer.GlobeLayer(e,t)}}}(),function(){var e={split:function(e,t){if(e.indexOf("bimface.com")>=0){var i=/http[s]?(:\/\/m[1]?[0-9]?(-test)?.)/.exec(e);if(i){var r=i[1],n=r.indexOf("-test")>=0?"-test":"";e=e.replace(r,"://m"+t+n+".")}}return e},getHostNumByReg:function(e,t){var i=t.exec(e),r=i?i[1].charCodeAt()%10:0;return r+=1},splitByDatabagId:function(e){return this.split(e,this.getHostNumByReg(e,/.*\/(.+?).*\/resource/))},splitByTextureName:function(e){return this.split(e,this.getHostNumByReg(e,/texture\/(.+?).*/))},splitByContextId:function(e,t){var i=parseInt(t)%10+1;return this.split(e,i)}};s.RequestSpliter=e}(),function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getBox",value:function(e,t){var i=new THREE.Box3;if(Array.isArray(e)&&6===e.length&&i.setFromArray(e),e.region){var r=e.region;i.set(THREE.Math.radToDeg(r[0]),THREE.Math.radToDeg(r[2]),THREE.Math.radToDeg(r[1]),THREE.Math.radToDeg(r[3]))}if(e.box){var n=e.box,a=new THREE.Vector3(n[0],n[1],n[2]),o=a.x-Math.abs(n[3]),s=a.x+Math.abs(n[3]),l=a.y-Math.abs(n[7]),u=a.y+Math.abs(n[7]),c=a.z-Math.abs(n[11]),h=a.z+Math.abs(n[11]);i.set(new THREE.Vector3(o,l,c),new THREE.Vector3(s,u,h))}if(e.sphere){var d=new THREE.Sphere(new THREE.Vector3(e.sphere[0],e.sphere[1],e.sphere[2]),e.sphere[3]);i.copy(d.getBoundingBox())}return t&&i.applyMatrix4(t),i}},{key:"getDracoLibUrl",value:function(){return s.GlobalData.DracoLibUrl?s.GlobalData.DracoLibUrl:window.BimfaceLoaderConfig&&window.BimfaceLoaderConfig.fullStaticHost?(s.GlobalData.DracoLibUrl=window.BimfaceLoaderConfig.fullStaticHost+"/lib/draco/",s.GlobalData.DracoLibUrl):(s.GlobalData.DracoLibUrl="../../lib/draco/",s.GlobalData.DracoLibUrl)}},{key:"getDracoLoader",value:function(){return void 0===this.dracoLoader&&(this.dracoLoader=new THREE.DRACOLoader,this.dracoLoader.setDecoderPath(s.TilesUtil.getDracoLibUrl())),this.dracoLoader}},{key:"praseUserData",value:function(e){if(void 0!==e){var t={};return e.map(function(e){t[e[0]]=e[1]}),t}}},{key:"getDebugColor",value:function(e,t){if(-1===e)return s.Debug.DebugColor.BLACK;if(!t)return s.Debug.DebugColor.GRAY;var i=s.Debug.DebugColorArray;return i[e%i.length]}},{key:"nodeIndexGroupsSort",value:function(e){var t=[];for(var i in e)for(var r=e[i],n=0,a=r.length;n<a;++n)t.push({userId:i,indexGroup:r[n]});return t.sort(function(e,t){return e.indexGroup.indexStart-t.indexGroup.indexStart}),t}},{key:"matchLineCategory",value:function(e,t){if(!(t instanceof Object))return!0;var i=t.key;return e[i]&&!0===t.value[e[i]]}},{key:"isNodeInVisible",value:function(e){return!(e&&!1!==e.visible&&(!e.parent||!1!==e.parent.visible))}},{key:"isInstanceNodeInVisible",value:function(e){return!e||!1===e.visible}}]),e}();e.max_uncompressed_blob_size=8388608,e.TILE_DATA_INDEX="INDEX",e.TILE_DATA_USERDATA="USERDATA",e.TILE_DATA_MATERIAL="MATERIAL",e.TILE_TEXTURE_NONE="TEXTURENONE",e.TILE_TEXTURE_LOADING="TEXTURE_LOADING",e.TILE_TEXTURE_LOADED="TEXTURELOADED",e.TWO_ACCURACY=.01,e.SIX_ACCURACY=1e-7,e.BMD_GEOMETRIC_ERROR_COEFFICIENT=1,e.OP_GEOMETRIC_ERROR_COEFFICIENT=.25,e.Minimum_Setting_SSEHold=.001,e.MODEL_SSE_Threshold_MAP={"3dtiles":e.OP_GEOMETRIC_ERROR_COEFFICIENT,osgb:e.OP_GEOMETRIC_ERROR_COEFFICIENT,shp:e.OP_GEOMETRIC_ERROR_COEFFICIENT,bim:e.BMD_GEOMETRIC_ERROR_COEFFICIENT},e.PICK_EFFECT_MODEL_TYPE={bim:!0,shp:!0,kml:!0,citygml:!0},s.TilesUtil=e}(),function(){var e={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5};s.RequestState=Object.freeze(e);var t={TERRAIN:0,IMAGERY:1,BIMTILES:2,OTHER:3};s.RequestType=Object.freeze(t)}(),function(){var e=function(){function e(t){_classCallCheck(this,e),t=t||{},this.url=t.url,this.requestCallback=t.requestCallback,this.cancelCallback=t.cancelCallback,this.priorityCallback=t.priorityCallback,this.priority=t.priority||0,this.type=t.type||s.RequestType.OTHER,this.state=s.RequestState.UNISSUED,this.deferred=void 0,this.cancelled=!1,this.destroyed=!1}return _createClass(e,[{key:"destroy",value:function(){this.destroyed=!0,this.requestCallback=void 0,this.cancelCallback=void 0,this.priorityCallback=void 0,this.deferred=this.deferred&&this.deferred.destroy()}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"cancel",value:function(){this.cancelled=!0}},{key:"clone",value:function(t){return t?(t.url=this.url,t.requestCallback=this.requestCallback,t.cancelCallback=this.cancelCallback,t.priorityCallback=this.priorityCallback,t.priority=this.priority,t.state=s.RequestState.UNISSUED,t.deferred=void 0,t.cancelled=!1,t):new e(this)}}]),e}();s.Request=e}(),function(){function e(e,t){return e.priority-t.priority}function t(e){e.priorityCallback&&(e.priority=e.priorityCallback())}function i(e){if(!e.isDestroyed())return e.state===s.RequestState.UNISSUED&&(e.state=s.RequestState.ISSUED,e.deferred=new s.Deferred),e.deferred.promise}function r(e){return function(t){e.state!==s.RequestState.CANCELLED&&(--l.numberOfActiveRequests,f.fireEvent(),e.state=s.RequestState.RECEIVED,e.deferred.resolve(t),e.deferred=e.deferred.destroy())}}function n(e){return function(t){e.state!==s.RequestState.CANCELLED&&(++l.numberOfFailedRequests,--l.numberOfActiveRequests,f.fireEvent(t),e.state=s.RequestState.FAILED,e.deferred&&e.deferred.reject(t))}}function a(e){if(!e.isDestroyed()){var t=i(e);return e.state=s.RequestState.ACTIVE,h.push(e),++l.numberOfActiveRequests,e.requestCallback().then(r(e)).catch(n(e)),t}}function o(e){var t=e.state===s.RequestState.ACTIVE;e.state=s.RequestState.CANCELLED,++l.numberOfCancelledRequests,e.deferred&&(e.deferred.reject("cancelRequest:"+e.url),e.deferred=e.deferred.destroy()),t&&(--l.numberOfActiveRequests,++l.numberOfCancelledActiveRequests),e.cancelCallback&&e.cancelCallback()}var l={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},u=20,c=new s.Heap({comparator:e});c.maximumLength=u,c.reserve(u);var h=[],d=50,f=new s.Event,p=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"update",value:function(){var i,r,n,l=0;for(i=0,r=h.length;i<r;++i)n=h[i],n.cancelled&&o(n),n.state===s.RequestState.ACTIVE?l>0&&(h[i-l]=n):++l;h.length-=l;var u=c.internalArray;for(i=0,r=c.length;i<r;++i)t(u[i]);c.resort();for(var d=Math.max(e.maximumRequests-h.length,0),f=0;f<d&&c.length>0;)(n=c.pop())&&(n.cancelled?o(n):(a(n),++f))}},{key:"request",value:function(r){if(++l.numberOfAttemptedRequests,!(h.length>=e.maximumRequests)){t(r);var n=c.insert(r);if(n){if(n===r)return;o(n)}return i(r)}}},{key:"clear",value:function(){for(;c.length>0;){o(c.pop())}for(var e=0,t=h.length;e<t;++e)o(h[e]);h.length=0,l.numberOfAttemptedRequests=0,l.numberOfActiveRequests=0,l.numberOfCancelledRequests=0,l.numberOfCancelledActiveRequests=0,l.numberOfFailedRequests=0,l.numberOfActiveRequestsEver=0,l.lastNumberOfActiveRequests=0}},{key:"maximumRequests",get:function(){return d},set:function(e){d=e}},{key:"statistics",get:function(){return l}},{key:"priorityHeapLength",get:function(){return u},set:function(e){if(e<u)for(;c.length>e;){var t=c.pop();o(t)}u=e,c.maximumLength=e,c.reserve(e)}},{key:"requestHeap",get:function(){return c}}]),e}();s.RequestScheduler=p}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.camera=void 0,this.cameraPositionWc=new THREE.Vector3,this.cullingVolume=void 0,this.pixelRatio=window.devicePixelRatio||1,this.maximumScreenSpaceError=void 0,this.viewSize={width:0,height:0},this.globalInverseMatrix=void 0,this.globalMatrix=void 0,this.afterRenderFns=[],this.viewer=null}return _createClass(e,[{key:"destroy",value:function(){this.afterRenderFns=void 0,this.viewSize=void 0,this.camera=void 0,this.cameraPositionWc=void 0,this.cullingVolume=void 0,this.globalInverseMatrix=void 0,this.globalMatrix=void 0,this.viewer=null}}]),e}();s.FrameState=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.selected=0,this.visited=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfTilesLoadedTotal=0,this.numberOfTrianglesSelected=0,this.geometryByteLength=0,this.texturesByteLength=0}return _createClass(e,[{key:"destroy",value:function(){}},{key:"clear",value:function(){this.selected=0,this.visited=0,this.numberOfTrianglesSelected=0,this.numberOfAttemptedRequests=0}},{key:"_updateMemoryCount",value:function(e,t,i){var r=e.trianglesLength,n=e.geometryByteLength,a=e.texturesByteLength;i?(this.geometryByteLength+=t?-n:n,this.texturesByteLength+=t?-a:a):this.numberOfTrianglesSelected+=t?-r:r}},{key:"incrementSelectionCount",value:function(e){this._updateMemoryCount(e,!1,!1)}},{key:"incrementGeometryMemoryCount",value:function(e){this.geometryByteLength+=e.geometryByteLength}},{key:"incrementTextureMemoryCount",value:function(e){this.texturesByteLength+=e.texturesByteLength}},{key:"decrementTextureMemoryCount",value:function(e){this.texturesByteLength-=e.texturesByteLength}},{key:"incrementLoadCount",value:function(e){this._updateMemoryCount(e,!1,!0)}},{key:"decrementLoadCount",value:function(e){this._updateMemoryCount(e,!0,!0)}},{key:"copy",value:function(e){this.selected=e.selected,this.visited=e.visited,this.numberOfAttemptedRequests=e.numberOfAttemptedRequests,this.numberOfPendingRequests=e.numberOfPendingRequests,this.numberOfTilesProcessing=e.numberOfTilesProcessing,this.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,this.numberOfTilesTotal=e.numberOfTilesTotal,this.numberOfTrianglesSelected=e.numberOfTrianglesSelected,this.geometryByteLength=e.geometryByteLength,this.texturesByteLength=e.texturesByteLength}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();s.Statistics=e}(),function(){s.TileContentType={DATA_NULL:"NULL",DATA_TILE:"TILE",DATA_BIMTILE:"BIMTILE",DATA_MESH:"MESH",DATA_INSTANCE:"INSTANCE",DATA_B3DM:"B3DM",DATA_POINT:"POINT",DATA_LINE:"LINE",DATA_DEM:"DEM",DATA_CMPT:"CMPT"}}(),function(){s.TileContentState=Object.freeze({UNLOADED:0,LOADING:1,PROCESSING:2,CONSTRUCTING:3,READY:4,FAILED:5}),s.SharedGeometryState=Object.freeze({UNLOADED:0,PROCESSING:1,PROCESSED:2,FAILED:3,DESTROYED:4,CANCELED:5}),s.TileContentProcessState=Object.freeze({PENDING:0,PROCESSING:1,PROCESSED:2}),s.Layer.ImageryState=Object.freeze({UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7}),s.Layer.TerrainState=Object.freeze({FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6})}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this._list=new s.DoublyLinkedList,this._sentinel=this._list.add(),this._trimTiles=!1,this._tilesCacheScheduler=t}return _createClass(e,[{key:"destroy",value:function(){this._list=null,this._sentinel=null,this._tilesCacheScheduler=null}},{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var t=e.cacheNode;t&&this._list.splice(this._sentinel,t)}},{key:"add",value:function(e){e.cacheNode||(e.cacheNode=this._list.add(e))}},{key:"unloadTile",value:function(e){var t=e.cacheNode;t&&(e._tileset.unloadTile(e),e.cacheNode=void 0,this._list.remove(t))}},{key:"unloadTiles",value:function(){var e=this._trimTiles;this._trimTiles=!1;for(var t=this._list,i=this._sentinel,r=t.head;r!==i;){var n=r.item;r=r.next;var a=n._tileset;if(s.Utils.isDefined(a)){var o=1024*a.maximumMemoryUsage*1024;(this._tilesCacheScheduler.totalMemoryUsageInBytes>o||e)&&this.unloadTile(n)}}}},{key:"trim",value:function(){this._trimTiles=!0}}]),e}();s.TilesCache=e}(),function(){function e(e,t){return e._priority-t._priority}function t(e,t){return t._distance-e._distance}var i=new THREE.Box3,r=function(){function r(e){_classCallCheck(this,r),e=s.Utils.defaultValue(e,{}),this._destroyed=!1,this._id=e.id||"DefaultTileset",this._databagId=e.databagId||this._id,this._type=e.type||s.RequestType.BIMTILES,this._objectGroup=e.objectGroup||null,this._debugShowBoundingBox=e.debugShowBoundingBox||!1,this._debugShowGeometricError=e._debugShowGeometricError||!1,this.debugShowGeometricErrorHelper=e.debugShowGeometricErrorHelper,this._debugShowStatistics=e.debugShowStatistics||!1,this._transformMatrix=e.transformMatrix||new THREE.Matrix4,this._maxDetailLevel=e.maxDetailLevel,this._visualRange=e.visualRange,this._sequence=0,this._geometricError=void 0,this._root=void 0,this._boundingBox=void 0,this._tilesCacheScheduler=e.tilesCacheScheduler,this._processingTiles=[],this._selectedTiles=[],this._requestedTiles=[],this._requestedTilesInFlight=[],this._priorityRange={max:{depth:0,distance:0,sse:0},min:{depth:0,distance:0,sse:0}},this._skipLodEnabled=e.skipLodEnabled||!1,this.tileLoadedEvent=new s.Event,this.tileUnloadEvent=new s.Event,this.tileFailedEvent=new s.Event,this.traversalStack=[],this.emptyTraversalStack=[],this.traversalDescendants=[],this.onDemandManager=e.onDemandManager,this.hasLayerInfo=e.hasLayerInfo}return _createClass(r,[{key:"destroy",value:function(){this._destroyed=!0,this._destroyAllTiles(),this._boundingBox=void 0,this._objectGroup=void 0,this._transformMatrix=void 0,this._tilesCacheScheduler=void 0,this._processingTiles=void 0,this._selectedTiles=void 0,this._requestedTiles=void 0,this._requestedTilesInFlight=void 0,this._priorityRange=void 0,this.tileLoadedEvent=void 0,this.tileUnloadEvent=void 0,this.tileFailedEvent=void 0,this.traversalStack=void 0,this.emptyTraversalStack=void 0,this.traversalDescendants=void 0,this.onDemandManager&&this.onDemandManager.destroy(),this.onDemandManager=null}},{key:"_destroyAllTiles",value:function(){if(this._root){var e=[];for(e.push(this._root);e.length>0;){for(var t=e.pop(),i=t.childrenTree,r=0,n=i.length;r<n;++r)e.push(i[r]);t.destroy()}this._root=void 0}}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"preUpdate",value:function(e){this.ready&&this.processTiles(e)}},{key:"update",value:function(e){return!!this.ready&&(this.updateFrameState(e),this.resetMaxAndMinPriority(),this.selectTiles(e),this.requestTiles(e),this.updateTiles(e),!0)}},{key:"postUpdate",value:function(e){this.ready&&this.cancelTileRequests(e)}},{key:"selectTiles",value:function(e){this._requestedTiles.length=0,this._selectedTiles.length=0,this._clearDrawableOfTiles(),this.updateTile(this.root,e),this.root.visible&&this._inVisualRange(e)&&(this._traverseTiles(this.root,e),this._updatePriorityForRequestedTiles())}},{key:"requestTiles",value:function(t){if(!t.viewer.cameraControl.userInputWorking){var i=this._requestedTiles;i.sort(e);for(var r=0,n=i.length;r<n;++r)this.requestContent(i[r])}}},{key:"updateTiles",value:function(e){for(var t=this.statistics,i=this._selectedTiles,r=0,n=i.length;r<n;++r){var a=i[r];a.update(e),t.incrementSelectionCount(a.content),++t.selected}this.debugShowStatistics(e)}},{key:"processTiles",value:function(t){this._removeTilesFromProcessingQueue(t);var i=this._processingTiles;i.sort(e);for(var r=0,n=i.length;r<n;++r)i[r].process(t)}},{key:"updateTile",value:function(e,t){this.updateTileVisibility(e,t),this.updateMaxAndMinPriority(e)}},{key:"updateTileVisibility",value:function(e,t){if(e.updateVisibility(t),e.visible)return e.meetsSSE(t)?e.refineReplace&&e.hasChildren()&&!this.anyChildrenVisible(e,t)?void(e._visible=!1):void 0:void(e._visible=!1)}},{key:"anyChildrenVisible",value:function(e,t){var i=!1;return e.childrenTree.forEach(function(e){e.updateVisibility(t),i=i||e.visible}),i}},{key:"touchTile",value:function(e,t){e._touchedFrame!==t.frameNumber&&(this.cache.touch(e),e._touchedFrame=t.frameNumber)}},{key:"visitTile",value:function(e,t){++this.statistics.visited,e._visitedFrame=t.frameNumber}},{key:"cacheTile",value:function(e){var t=this.statistics;--t.numberOfTilesProcessing,++t.numberOfTilesWithContentReady,++t.numberOfTilesLoadedTotal,e.getTexturesByteLength(),t.incrementLoadCount(e.content),this.cache.add(e),this.tileLoadedEvent.fireEvent(e)}},{key:"updateTextureMemoryUsage",value:function(e){var t=this.statistics;t.decrementTextureMemoryCount(e.content),e.getTexturesByteLength(),t.incrementTextureMemoryCount(e.content)}},{key:"resetCache",value:function(e){}},{key:"requestContent",value:function(e){if(!e.contentTypeEmpty){var t=this.statistics;if(!e.requestContent())return void++t.numberOfAttemptedRequests;++t.numberOfPendingRequests,this._requestedTilesInFlight.push(e),e.contentProcessPromise&&e.contentProcessPromise.then(this._addTileToProcessingQueue(this,e)).catch(function(e){}),e.contentReadyPromise&&e.contentReadyPromise.then(this._handleTileContentSuccess(this,e)).catch(this._handleTileContentFailure(this,e))}}},{key:"cancelTileRequests",value:function(e){for(var t=this._requestedTilesInFlight,i=0,r=0,n=t.length;r<n;++r){var a=t[r];if(a._contentState===s.TileContentState.LOADING){e.frameNumber-a._touchedFrame>=1?(a._request.cancel(),++i):i>0&&(t[r-i]=a)}else++i}t.length-=i}},{key:"_canBeTraverse",value:function(e,t){return!!e.hasChildren()&&e.passSSE(t)}},{key:"onDemandJudgment",value:function(e){return this.onDemandManager.onDemandJudgment(e)}},{key:"_traverseTiles",value:function(e,t){var i=this.traversalStack;for(i.push(e);i.length>0;){var r=i.pop(),n=r.refineReplace,a=!r.parent||r.parent._refines,o=!1;if(this._isAvailableDetailLevel(r)){if(this._fetchChildrenOfTile(r,t),this.onDemandJudgment(r))continue;this._canBeTraverse(r,t)&&(o=this.subdivideTile(r,t),o=o&&a)}if(n){var s=!o&&a;this._addTileToRequestedQueue(r,t),s&&r.passSSE(t)&&this._addTileToSelectedQueue(r,t)}else this._addTileToRequestedQueue(r,t),r.passSSE(t)&&this._addTileToSelectedQueue(r,t);this.visitTile(r,t),this.touchTile(r,t),r._refines=o}}},{key:"subdivideTile",value:function(e,i){var r=this,n=this.traversalStack,a=e.childrenTree;if(a.sort(t),a.forEach(function(e){r.updateTile(e,i)}),this.isCheckChildrenPassSSE()&&!this.anyChildrenPassSSE(e,i))return!1;var o=e.refineReplace&&!e.contentTypeEmpty,s=!0,l=!1;return a.forEach(function(e){if(e.visible?(n.push(e),l=!0):o&&(r._addTileToRequestedQueue(e,i),r.visitTile(e,i),r.touchTile(e,i)),o){var t=e.contentTypeEmpty?r._traverseTileWithEmptyContent(e,i):e.contentAvailable;s=s&&t}}),l||(s=!1),s}},{key:"_traverseTileWithEmptyContent",value:function(e,t){var i=this,r=this.traversalDescendants;r.length=0;var n=this.emptyTraversalStack;for(n.push(e);n.length>0;){var a=n.pop();if(!a.contentTypeEmpty)r.push(a);else{this._fetchChildrenOfTile(a,t);var o=this._canBeTraverse(a,t);if(o&&this.isCheckChildrenPassSSE()&&(this.anyChildrenPassSSE(a,t)||(o=!1)),o){a.childrenTree.forEach(function(e){i.updateTile(e,t),e.visible||(i._addTileToRequestedQueue(e,t),i.visitTile(e,t),i.touchTile(e,t)),n.push(e)})}}}if(0===r.length)return!1;var s=!0;return r.forEach(function(e){e.contentAvailable||(s=!1)}),s}},{key:"isCheckChildrenPassSSE",value:function(){return!1}},{key:"anyChildrenPassSSE",value:function(e,t){var i=!1;return e.childrenTree.forEach(function(e){i=i||e.passSSE(t)}),i}},{key:"_fetchChildrenOfTile",value:function(e,t){this.needLoadChildrenOfTile(e)&&(e._childrenState=s.TileContentState.READY,e.contentTypeTile&&this.loadChildrenOfTile(e,void 0,function(){t.afterRenderFns.push(function(){})}))}},{key:"needLoadChildrenOfTile",value:function(e){return e.childrenUnload}},{key:"loadChildrenOfTile",value:function(e,t,i){}},{key:"updateFrameState",value:function(e){}},{key:"_clearDrawableOfTiles",value:function(){this._objectGroup&&this._objectGroup.children.forEach(function(e){e.visible=!1}),this.debugShowGeometricErrorHelper&&this.debugShowGeometricErrorHelper.hideAll()}},{key:"_updatePriorityForRequestedTiles",value:function(){for(var e=this._requestedTiles,t=0,i=e.length;t<i;++t)e[t].updatePriority()}},{key:"resetMaxAndMinPriority",value:function(){var e=this._priorityRange.max,t=this._priorityRange.min;t.depth=Number.MAX_VALUE,t.distance=Number.MAX_VALUE,t.sse=Number.MAX_VALUE,e.depth=-Number.MAX_VALUE,e.distance=-Number.MAX_VALUE,t.sse=Number.MAX_VALUE}},{key:"updateMaxAndMinPriority",value:function(e){var t=this._priorityRange.max,i=this._priorityRange.min;i.distance=Math.min(e._distance,i.distance),i.depth=Math.min(e._depth,i.depth),i.sse=Math.min(e.sse,i.sse),t.distance=Math.max(e._distance,t.distance),t.depth=Math.max(e._depth,t.depth),t.sse=Math.max(e.sse,t.sse)}},{key:"_addTileToSelectedQueue",value:function(e,t){e.contentAvailable&&e.isContentVisible(t)&&this._isAvailableDetailLevel(e,1)&&this._selectedTiles.push(e)}},{key:"_addTileToRequestedQueue",value:function(e,t){e._requestedFrame!==t.frameNumber&&e.contentUnloaded&&this._isAvailableDetailLevel(e,1)&&(e._requestedFrame=t.frameNumber,this._requestedTiles.push(e))}},{key:"_addTileToProcessingQueue",value:function(e,t){return function(){e._processingTiles.push(t),--e.statistics.numberOfPendingRequests,++e.statistics.numberOfTilesProcessing}}},{key:"_removeTilesFromProcessingQueue",value:function(e){for(var t=this._processingTiles,i=0,r=0,n=t.length;r<n;++r){var a=t[r];a.contentProcessing?i>0&&(t[r-i]=a):++i}t.length-=i}},{key:"_handleTileContentFailure",value:function(e,t){return function(i){var r=t.contentIndex,n=i.message?i.message:i;e.tileFailedEvent.numberOfListeners>0&&e.tileFailedEvent.fireEvent({url:r,message:n})}}},{key:"_handleTileContentSuccess",value:function(e,t){return function(){e.cacheTile(t)}}},{key:"unloadTile",value:function(e){this.tileUnloadEvent.fireEvent(e),--this.statistics.numberOfTilesWithContentReady,e.unloadContent()}},{key:"createTile",value:function(){return null}},{key:"loadTileset",value:function(e,t){}},{key:"debugShowStatistics",value:function(e){if(this._debugShowStatistics&&0!==this._selectedTiles.length){for(var t=0,i=0,r="",n=this._selectedTiles,a=0,o=n.length;a<o;++a){var l=n[a];r+="\nUrl: "+l._contentUrl,r+="\nLodLevel: "+l._debugLodLevel,l.content.trianglesLength>0&&(r+="\nTriangles: "+l.content.trianglesLength),r+="\nTexture Memory: "+s.Utils.toMemoryString(l.content.texturesByteLength),r+="\nGeometry Memory: "+s.Utils.toMemoryString(l.content.geometryByteLength),r+="\n",t+=l.content.geometryByteLength,i+=l.content.texturesByteLength}var u="";u+="\n -------------------------------- ",u+="\n[Statistics]",u+="\nFrameNumber: "+e.frameNumber,u+="\nTiles: "+n.length,u+="\nTotal Texture Memory: "+s.Utils.toMemoryString(i),u+="\nTotal Geometry Memory: "+s.Utils.toMemoryString(t),u+="\n",u+="\n[Detail]",u+=r,console.log(u)}}},{key:"explode",value:function(){}},{key:"clone",value:function(e){return s.Utils.defined(e)||(e=new r),e.tileLoadedEvent=new s.Event,e.tileUnloadEvent=new s.Event,e.tileFailedEvent=new s.Event,e._copy(this),e}},{key:"_copy",value:function(e){this._type=e._type,this._maximumMemoryUsage=e._maximumMemoryUsage,this._debugShowBoundingBox=e._debugShowBoundingBox,this._debugShowStatistics=e._debugShowStatistics,this._priorityRange=e._priorityRange,this._boundingBox=e._boundingBox.clone(),this._geometricError=e._geometricError,this.onDemand=e.onDemand,this.hasLayerInfo=e.hasLayerInfo,this._destroyed=e._destroyed}},{key:"_isAvailableDetailLevel",value:function(e,t){return t=void 0===t?0:t,void 0===this._maxDetailLevel||void 0===e.detailLevel||e.detailLevel<this._maxDetailLevel+t}},{key:"_inVisualRange",value:function(e){if(!this._boundingBox||!this._visualRange)return!0;var t=i.copy(this._boundingBox);t.copy(this._boundingBox),e.transformMatrix&&t.applyMatrix4(e.transformMatrix);var r=t.distanceToPoint(e.cameraPositionWc),n=void 0===this._visualRange.max?1/0:this._visualRange.max,a=void 0===this._visualRange.min?-1/0:this._visualRange.min;return r<=n&&r>=a}},{key:"root",set:function(e){this._root=e},get:function(){return this._root}},{key:"ready",get:function(){return!!this._root}},{key:"statistics",get:function(){return this._tilesCacheScheduler.statistics}},{key:"cache",get:function(){return this._tilesCacheScheduler.tilesCache}},{key:"maximumMemoryUsage",get:function(){return this._tilesCacheScheduler.maximumMemoryUsage}},{key:"totalMemoryUsageInBytes",get:function(){return this._tilesCacheScheduler.totalMemoryUsageInBytes}},{key:"sequence",set:function(e){this._sequence=e},get:function(){return this._sequence}},{key:"type",set:function(e){this._type=e},get:function(){return this._type}},{key:"maxDetailLevel",get:function(){return this._maxDetailLevel},set:function(e){this._maxDetailLevel=e}},{key:"visualRange",get:function(){return this._visualRange},set:function(e){this._visualRange=e}}]),r}();s.AbstractTileset=r}(),function(){var e=new THREE.Box3,t=function(){function t(e,i){_classCallCheck(this,t),this._tileset=s.Utils.defaultValue(e,null),this._parent=i,this._destroyed=!1,this._databagId=e._databagId,this._childrenTree=[],this._boundingBox=void 0,this._transformMatrix=new THREE.Matrix4,i?(i.childrenTree.push(this),this._depth=i._depth+1):this._depth=0,this._visible=!1,this._content=void 0,this._contentUrl=void 0,this._contentOutlineUrl=void 0,this._contentType=void 0,this._contentIndex=void 0,this._contentState=s.TileContentState.UNLOADED,this._childrenState=s.TileContentState.UNLOADED,this._priority=0,this._promotionalPriority=0,this._distance=0,this._contentProcessDeferred=void 0,this._contentReadyDeferred=void 0,this._request=void 0,this._instanceInfoArray=null,this._debugLodLevel=-1,this.refineReplace=void 0,this.geometricError=0,this.sse=0,i&&i.layerInfo?this.layerInfo=Object.assign({},i.layerInfo):this.layerInfo={},this._id=null,this.labelAdded=!1}return _createClass(t,[{key:"destroy",value:function(){this._destroyed=!0,this._clearContent(),this._tileset=void 0,this._parent=void 0,this._childrenTree=void 0,this._boundingBox=void 0,this._transformMatrix=void 0,this._contentType=void 0,this._contentState=void 0,this._contentUrl=void 0,this._contentOutlineUrl=void 0,this.labelAdded=void 0,this.debugShowGeometricErrorHelper&&this.debugShowGeometricErrorHelper.destroy(),this.debugShowGeometricErrorHelper=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"isContentVisible",value:function(e){return this.contentReady&&this.visible}},{key:"getAbsoluteContentUrl",value:function(){return this._contentIndex}},{key:"getOutlineContentUrl",value:function(){return this._contentOutlineUrl}},{key:"update",value:function(e){this.contentTypeEmpty||(this.explode(),this.applyFilter(),this._content.update(e),this.activateRenderables(),this.debugShowBoundingBox(e),this.debugShowGeometricError(e))}},{key:"process",value:function(e){this._content.update(e)}},{key:"_makeRequest",value:function(e,t){var i=this;e.url=t.url,e.requestCallback=function(){var t=new s.Deferred;return i.fetchContentBlock(e.url,function(e){t.resolve(e)},function(e){t.reject(e)}),e.cancelCallback=function(){},t.promise};var r=s.RequestScheduler.request(e);if(r)return r.then(function(t){return e.cancelCallback=void 0,t}).catch(function(t){return e.cancelCallback=void 0,Promise.reject(t)})}},{key:"requestContent",value:function(){var e=this.getAbsoluteContentUrl(),t=new s.Request({type:this._tileset.type,priorityCallback:this._createPriorityCallback(this)});this._request=t;var i=[e],r=this.getOutlineContentUrl();r&&i.push(r);var n=this._makeRequest(t,{url:i});if(!n)return!1;var a=this._contentState;this._contentState=s.TileContentState.LOADING,this._contentProcessDeferred=new s.Deferred,this._contentReadyDeferred=new s.Deferred;var o=this._handleFailedContent(this,this._tileset),l=this;return n.then(function(e){if(l.isDestroyed())return void o();l.parseContentBlock(e,function(e){l._initialContent(e)})}).catch(function(e){if(t.state===s.RequestState.CANCELLED)return l._contentState=a,--l._tileset.statistics.numberOfPendingRequests,++l._tileset.statistics.numberOfAttemptedRequests,void l._cancelSharedGeometryRequest();o(e)}),!0}},{key:"parseContentBlock",value:function(e,t){t(e)}},{key:"fetchContentBlock",value:function(e,t,i){s.Error.throwError(s.ERRORS.DEVELOPE_EXCEPTION,"Needs to be overridden by subclasses!")}},{key:"createContent",value:function(e){return null}},{key:"_initialContent",value:function(e){var t=this;t._content=t.createContent(e),t._contentState=s.TileContentState.PROCESSING,t._contentProcessDeferred.resolve(t._content),t._content.readyPromise.then(function(e){t._contentState=s.TileContentState.READY,t._contentReadyDeferred.resolve(e)})}},{key:"_createPriorityCallback",value:function(e){return function(){return e._priority}}},{key:"_handleFailedContent",value:function(e,t){return function(i){e._contentState===s.TileContentState.PROCESSING?--t.statistics.numberOfTilesProcessing:--t.statistics.numberOfPendingRequests,e._contentState=s.TileContentState.FAILED,e._contentReadyDeferred&&e._contentReadyDeferred.reject(i),e._contentProcessDeferred&&e._contentProcessDeferred.reject(i)}}},{key:"updateContent",value:function(e){this._content.update(e)}},{key:"_clearContent",value:function(){this.cacheNode?this._tileset.cache.unloadTile(this):this.unloadContent()}},{key:"unloadContent",value:function(){this.disposeMeshIdMap(),this.disposeDebugBoundingBox(),this.disposeDebugGeometricError(),this._content&&this._content.destroy(),s.Utils.defined(this._content)&&this._tileset.statistics.decrementLoadCount(this._content),this._content=void 0,this._contentState=s.TileContentState.UNLOADED,
this._request=this._request&&this._request.destroy(),this._contentProcessDeferred=this._contentProcessDeferred&&this._contentProcessDeferred.destroy(),this._contentReadyDeferred=this._contentReadyDeferred&&this._contentReadyDeferred.destroy()}},{key:"updateVisibility",value:function(e){this.computeDistanceToCamera(e),this.computeSSE(e),this.visible=this.culling(e)}},{key:"updatePriority",value:function(){var e=this._tileset,t=e._priorityRange.max,i=e._priorityRange.min,r=s.Math.isolateDigits(e.type,1,16),n=s.Math.isolateDigits(e.sequence,3,13),a=s.Math.isolateDigits(this._promotionalPriority+1,1,12),o=s.Math.isolateDigits(s.Math.normalize(t.sse-this.sse,i.sse,t.sse),4,8),l=s.Math.isolateDigits(s.Math.normalize(this._depth,i.depth,t.depth),4,4),u=s.Math.isolateDigits(s.Math.normalize(this._distance,i.distance,t.distance),4,0);this._priority=r,this._priority+=n,this._priority+=a,this._priority+=o,this._priority+=l,this._priority+=u}},{key:"subdivideNodeSubstractive",value:function(e){}},{key:"culling",value:function(t){var i=e.copy(this._boundingBox);return t.transformMatrix&&i.applyMatrix4(t.transformMatrix),i.applyMatrix4(t.globalMatrix),!!t.frustum.intersectsBox(i)}},{key:"computeDistanceToCamera",value:function(t){var i=e.copy(this._boundingBox);t.transformMatrix&&i.applyMatrix4(t.transformMatrix),this._distance=i.distanceToPoint(t.cameraPositionWc)}},{key:"passSSE",value:function(e){return this.sse>=e.maximumScreenSpaceError}},{key:"meetsSSE",value:function(e){var t=this.parent;return!(t&&!t.refineReplace)||t.sse>e.maximumScreenSpaceError}},{key:"computeSSE",value:function(e){var t=void 0!==e.geoErrScaleFactor?e.geoErrScaleFactor:1,i=this.geometricError*t;return this.sse=e.cameraPreSSE*(i/this._distance),this.sse}},{key:"disposeMeshIdMap",value:function(){var e=this,t=this._content&&this._content._meshes;t&&t.traverse(function(t){"MeshEx"===t.type&&t.name?!0===t.isInstanceMeshNode?e.disposeInstanceMeshNodeById(t.name):e.disposeMeshNodeById(t.name):"LineSegments"===t.type&&t.tileId&&(!0===t.isInstanceMeshNode?e.disposeInstanceLineNodeById(t.tileId):e.disposeLineNodeById(t.tileId))})}},{key:"disposeMeshNodeById",value:function(e){}},{key:"disposeInstanceLineNodeById",value:function(e){}},{key:"disposeLineNodeById",value:function(e){}},{key:"hasChildren",value:function(){return this._childrenTree.length>0}},{key:"debugShowBoundingBox",value:function(){if(this._tileset._debugShowBoundingBox){if(!this._debugBoundingBox){var e=this._tileset._objectGroup,t=s.TilesUtil.getDebugColor(this._debugLodLevel,this.refineReplace);this._debugBoundingBox=new s.BBoxNode(this._boundingBox,t),this._debugBoundingBox.renderOrder=99,this._debugBoundingBox.matrixAutoUpdate=!1,e.add(this._debugBoundingBox),e.updateMatrixWorld(!0)}this._debugBoundingBox.visible=!0}}},{key:"disposeDebugBoundingBox",value:function(){this._debugBoundingBox&&(this._debugBoundingBox.parent&&this._debugBoundingBox.parent.remove(this._debugBoundingBox),this._debugBoundingBox.geometry.dispose(),this._debugBoundingBox.material.dispose(),this._debugBoundingBox=void 0)}},{key:"debugShowGeometricError",value:function(){if(this._tileset._debugShowGeometricError){var e=this._tileset.debugShowGeometricErrorHelper;if(!1===this.labelAdded){this.labelAdded=!0;var t=this._boundingBox.getCenter();t.applyMatrix4(this._tileset._transformMatrix);var i={id:this._id,position:t,size:100,text:this._contentUrl+":"+this.geometricError,tooltip:this.geometricError};e.addLabel(i)}e.showById(this._id),e.update()}}},{key:"disposeDebugGeometricError",value:function(){if(this._tileset._debugShowGeometricError){this._tileset.debugShowGeometricErrorHelper.removeById(this._id),this.labelAdded=!1}}},{key:"applyFilter",value:function(){}},{key:"activateRenderables",value:function(){this.contentVisible=!0}},{key:"explode",value:function(){}},{key:"getTexturesByteLength",value:function(){this.content.getTexturesByteLength()}},{key:"sharedGeometryDestroy",value:function(){return!1}},{key:"_cancelSharedGeometryRequest",value:function(){}},{key:"clone",value:function(e){return s.Utils.defined(e)||(e=new t),e._copy(this),e}},{key:"_copy",value:function(e){this.refineReplace=e.refineReplace,this.geometricError=e.geometricError,this._boundingBox=e._boundingBox,this._contentUrl=e._contentUrl,this._contentType=e._contentType,this._contentIndex=e._contentIndex,this._childrenState=e._childrenState,this._destroyed=e._destroyed,this._childrenTree=[],this._transformMatrix=e._transformMatrix.clone(),this._depth=e._depth,this._visible=e._visible,this._priority=e._priority,this._instanceInfoArray=null,this._debugLodLevel=e._debugLodLevel,this.layerInfo=e.layerInfo}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e}},{key:"nodeId",get:function(){return this._id},set:function(e){this._id=e}},{key:"contentVisible",set:function(e){this._content&&(this._content.visible=e)},get:function(){return!!this._content&&this._content.visible}},{key:"parent",get:function(){return this._parent}},{key:"childrenTree",get:function(){return this._childrenTree}},{key:"boundingBox",get:function(){return this._boundingBox},set:function(e){return this._boundingBox=e}},{key:"depth",get:function(){return this._depth},set:function(e){return this._depth=e}},{key:"contentUrl",get:function(){return this._contentUrl},set:function(e){return this._contentUrl=e}},{key:"contentOutlineUrl",get:function(){return this._contentOutlineUrl},set:function(e){return this._contentOutlineUrl=e}},{key:"contentIndex",set:function(e){return this._contentIndex=e},get:function(){return this._contentIndex}},{key:"content",get:function(){return this._content},set:function(e){return this._content=e}},{key:"contentType",get:function(){return this._contentType},set:function(e){this._contentType=e}},{key:"contentState",get:function(){return this._contentState},set:function(e){this._contentState=e}},{key:"contentUnloaded",get:function(){return this._contentState===s.TileContentState.UNLOADED}},{key:"contentLoading",get:function(){return this._contentState===s.TileContentState.LOADING}},{key:"contentProcessing",get:function(){return this._contentState===s.TileContentState.PROCESSING}},{key:"contentConstructing",get:function(){return this._contentState===s.TileContentState.CONSTRUCTING}},{key:"childrenUnload",get:function(){return this._childrenState===s.TileContentState.UNLOADED}},{key:"childrenReady",get:function(){return this._childrenState===s.TileContentState.READY}},{key:"contentReady",get:function(){return this._contentState===s.TileContentState.READY}},{key:"contentAvailable",get:function(){return this.contentReady&&!this.contentTypeEmpty}},{key:"contentTypeTile",get:function(){return this.contentType===s.TileContentType.DATA_TILE||this.contentType===s.TileContentType.DATA_BIMTILE}},{key:"contentTypeMesh",get:function(){return this.contentType===s.TileContentType.DATA_MESH||this.contentType===s.TileContentType.DATA_B3DM}},{key:"contentTypeCMPT",get:function(){return this.contentType===s.TileContentType.DATA_CMPT}},{key:"contentTypePoint",get:function(){return this.contentType===s.TileContentType.DATA_POINT}},{key:"contentTypeInstance",get:function(){return this.contentType===s.TileContentType.DATA_INSTANCE}},{key:"contentTypeLine",get:function(){return this.contentType===s.TileContentType.DATA_LINE}},{key:"contentTypeMeshAvailable",get:function(){return this.contentTypeMesh||this.contentTypeInstance||this.contentTypePoint||this.contentTypeLine||this.contentTypeCMPT}},{key:"contentTypeEmpty",get:function(){return this.contentType===s.TileContentType.DATA_NULL||this.contentType===s.TileContentType.DATA_TILE||this.contentType===s.TileContentType.DATA_BIMTILE}},{key:"contentTypeNull",get:function(){return this.contentType===s.TileContentType.DATA_NULL}},{key:"contentProcessPromise",get:function(){if(this._contentProcessDeferred)return this._contentProcessDeferred.promise}},{key:"contentReadyPromise",get:function(){if(this._contentReadyDeferred)return this._contentReadyDeferred.promise}},{key:"instanceInfo",get:function(){return this._instanceInfoArray},set:function(e){this._instanceInfoArray=e}}]),t}();s.AbstractTile=t}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this._tile=t,this._ready=!1,this._destroyed=!1,this._contentBuffer=i,this._geometryByteLength=0;for(var r in i)this._geometryByteLength+=i[r].byteLength;this._texturesByteLength=0,this._trianglesLength=0,this._state=s.TileContentProcessState.PENDING,this._meshes=new THREE.Group,this._meshes.name=s.Utils.getEncodedString(this._tile.getAbsoluteContentUrl())||t.name,this._meshes.databagId=t._databagId,this._meshes.matrixAutoUpdate=!1,this._readyDeferred=new s.Deferred,this._geometryOwner=0}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this._contentBuffer=void 0,this._readyDeferred=this._readyDeferred.destroy(),this.disposeGeometry(),this._tile=void 0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"getTexturesByteLength",value:function(){var e=this._meshes.children,t=!0,i=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(o.children&&o.children.length>0){var s=!0,l=!1,u=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;if(d.material){var f=!0,p=!1,m=void 0;try{for(var v,g=d.material[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var y=v.value;y._imageByteSize&&!y._sizeCached&&(this._texturesByteLength+=y._imageByteSize,y._sizeCached=!0)}}catch(e){p=!0,m=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw m}}}}}catch(e){l=!0,u=e}finally{try{!s&&h.return&&h.return()}finally{if(l)throw u}}}else if(o.material){var M=!0,E=!1,b=void 0;try{for(var x,I=o.material[Symbol.iterator]();!(M=(x=I.next()).done);M=!0){var T=x.value;T._imageByteSize&&!T._sizeCached&&(this._texturesByteLength+=T._imageByteSize,T._sizeCached=!0)}}catch(e){E=!0,b=e}finally{try{!M&&I.return&&I.return()}finally{if(E)throw b}}}}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"disposeGeometry",value:function(){if(this._meshes.parent&&this._meshes.parent.remove(this._meshes),this.disposeShareGeometry()){this._texturesByteLength=0;for(var e=this._meshes.children,t=0,i=e.length;t<i;++t){var r=e[t];if(r.children&&r.children.length)for(var n=0,a=r.children.length;n<a;++n){var o=r.children[n],s=o.geometry;s&&s.dispose(),s.groups=void 0,s.index=void 0,s.attributes=void 0,o.geometry=void 0,this._disposeMaterials(o.material),o.material=void 0}else if(r.geometry){var l=r.geometry;l.dispose(),l.groups=void 0,l.index=void 0,l.attributes=void 0,r.geometry=void 0,this._disposeMaterials(r.material),r.material=void 0}}this._meshes=void 0}}},{key:"update",value:function(e){var t=this,i=!1;this._state===s.TileContentProcessState.PENDING?(this._state=s.TileContentProcessState.PROCESSING,t.parseTileContent(function(e){t.attachToTilesGroup(e),t.disposeContentBuffer(),t._state=s.TileContentProcessState.PROCESSED})):this._state===s.TileContentProcessState.PROCESSING||this._state===s.TileContentProcessState.PROCESSED&&(i=!0),this._ready||i&&e.afterRenderFns.push(function(){t._ready=!0,t._readyDeferred&&t._readyDeferred.resolve(t)})}},{key:"parseTileContent",value:function(e){e&&e(this._tile)}},{key:"attachToTilesGroup",value:function(e){var t=this._tile._tileset._objectGroup;t.add(this.meshes),t.updateMatrixWorld(!0)}},{key:"disposeContentBuffer",value:function(){this._contentBuffer=void 0}},{key:"disposeShareGeometry",value:function(){return!0}},{key:"clone",value:function(t,i){return i=s.Utils.defaultValue(i,{}),t=s.Utils.defaultValue(t,new e),t._copy(this,i),t}},{key:"_copy",value:function(e,t){this._tile=s.Utils.defaultValue(t.tile,e._tile),this._ready=e._ready,this._destroyed=e._destroyed,this._contentBuffer=e._contentBuffer,this._geometryByteLength=e._geometryByteLength,this._texturesByteLength=e._texturesByteLength,this._trianglesLength=0,this._state=s.TileContentProcessState.PENDING,this._meshes=e._meshes}},{key:"_disposeMaterials",value:function(e){var t=this,i=this._tile._tileset.materialManager;if(s.Utils.isDefined(i)){var r=function(e,i){var r=i._imageByteSize;e.disposeMaterial(i)&&r&&(t._texturesByteLength+=r)};if(!(e instanceof Array))return void r(i,e);var n=!0,a=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;c&&r(i,c)}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}}},{key:"tile",get:function(){return this._tile}},{key:"ready",get:function(){return this._ready}},{key:"geometryByteLength",get:function(){return this._geometryByteLength},set:function(e){this._geometryByteLength=e}},{key:"texturesByteLength",get:function(){return this._texturesByteLength}},{key:"trianglesLength",get:function(){return this._trianglesLength}},{key:"readyPromise",get:function(){return this._readyDeferred.promise}},{key:"meshes",get:function(){return this._meshes}},{key:"visible",set:function(e){this._meshes.visible=e},get:function(){return this._meshes.visible}}]),e}();s.AbstractTileContent=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.AbstractTileContent);s.EmptyTileContent=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),t=s.Utils.defaultValue(t,{}),this._maximumMemoryUsage=t.maximumMemoryUsage||2048,this._destroyed=!1,this._statistics=new s.Statistics,this._tilesCache=new s.TilesCache(this)}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this._tilesCache.destroy(),this._tilesCache=void 0,this._statistics.destroy(),this._statistics=void 0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"clearStatistics",value:function(){this._statistics.clear()}},{key:"resetTilesCache",value:function(e){e.newFrame&&this._tilesCache.reset()}},{key:"update",value:function(){this._tilesCache.unloadTiles()}},{key:"statistics",get:function(){return this._statistics}},{key:"tilesCache",get:function(){return this._tilesCache}},{key:"maximumMemoryUsage",get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},{key:"totalMemoryUsageInBytes",get:function(){var e=this._statistics;return e.texturesByteLength+e.geometryByteLength}}]),e}();s.TilesCacheScheduler=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this._textureMap={},this._typicalTextureLoader=new THREE.TextureLoader,this._typicalTextureLoader.crossOrigin=!0,this._basisTextureLoader=s.MaterialUtil.getBasisTextureLoader(),this._textureLoader=this._typicalTextureLoader,this._viewer=t}return _createClass(e,[{key:"destroy",value:function(){this._textureMap=null,this._typicalTextureLoader=null,this._basisTextureLoader=null,this._textureLoader=null,this._viewer=null}},{key:"getTextureFromURL",value:function(e,t,i){var r=this;return this._choseTextureLoader(i),new Promise(function(i){var n=r._textureMap[t];if(s.Utils.isDefined(n))return n._referenceCount++,void i(n);s.EnableStorage?r._createTextureWithIndexDB(e).then(function(e){e.name=t,r._textureMap[t]=e,e._referenceCount=1,i(e)}):r._loadTextureFromURL(e).then(function(e){e.name=t,r._textureMap[t]=e,e._referenceCount=1,i(e)})})}},{key:"getTextureFromBuffer",value:function(e,t,i){var r=this;return this._choseTextureLoader(i),new Promise(function(i){var n=r._textureMap[t];if(s.Utils.isDefined(n))n._referenceCount++,i(n);else{var a=new Blob([e],{type:"image/jpeg"}),o=window.URL||window.webkitURL,l=o.createObjectURL(a);r._textureLoader.load(l,function(e){e.flipY=!1,e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.image=s.MaterialUtil.ensurePowerOfTwo(e.image),e.name=t,r._textureMap[t]=e,e._referenceCount=1,i(e)})}})}},{key:"disposeTexture",value:function(e){return!--e._referenceCount&&(e.dispose(),delete this._textureMap[e.name],e=null,!0)}},{key:"_createTextureWithIndexDB",value:function(e){var t=this;return new Promise(function(i,r){s.storageManager.getTexture(e).then(function(e){e.needsUpdate=!0,e.image=s.MaterialUtil.ensurePowerOfTwo(e.image),e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,i(e)}).catch(function(){t._loadTextureFromURL(e).then(function(t){s.storageManager.addTexture(t,e).catch(function(e){}),i(t)}).catch(function(e){console.log(e),r()})})})}},{key:"_loadTextureFromURL",value:function(e){var t=this;return new Promise(function(i){t._textureLoader.load(e,function(e){e.image=s.MaterialUtil.ensurePowerOfTwo(e.image),e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,i(e)})})}},{key:"_choseTextureLoader",value:function(e){return e?(this._textureLoader=this._basisTextureLoader,this._textureLoader.detectedSupport||this._textureLoader.detectSupport(this._viewer.getRenderer())):this._textureLoader=this._typicalTextureLoader,this._textureLoader}}]),e}();s.TextureManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"explode",value:function(){var e=this.model._getHandler();e&&e.explode()}},{key:"preFloorExplode",value:function(e,t,i){for(var r={},n=0,a=t.length;n<a;n++){var o=t[n].explodedHeight-t[n].elevation,s=new THREE.Vector3(i.x*o,i.y*o,i.z*o);t[n].preExplodedTranslation?r[t[n].name]=s.clone().sub(t[n].preExplodedTranslation):r[t[n].name]=s,t[n].preExplodedTranslation=s}for(var l=this,u=this.model.getAllNodeInfos(),c=Object.keys(u),h=new THREE.Matrix4,d=0,f=c.length;d<f;d++)for(var p=c[d],m=u[p],v=0,g=m.length;v<g;v++){if(0==v){var y=m[v].userData.levelName,M=r[y]||new THREE.Vector3;h.makeTranslation(M.x,M.y,M.z),l.explosionTranslation[p]=M}m[v].boundingBox.applyMatrix4(h),m[v].matrix.multiplyMatrices(h,m[v].matrix),e.union(m[v].boundingBox)}}},{key:"getExplosionTranslation",value:function(e){return this.explosionTranslation[e]||new THREE.Vector3}},{key:"preElementExplode",value:function(e,t){var i=this.model.getBoundingBoxWorld();if(i){var r=t-this.model.manager.explosionManager.getExplosionExtent(this.model.id);if(0!=r)for(var n=new THREE.Matrix4,a=i.getCenter().applyMatrix4((new THREE.Matrix4).getInverse(this.model.transformMatrix)),o=this.model.getAllNodeInfos(),l=Object.keys(o),u=this.explosionTranslation,c=0,h=l.length;c<h;c++){for(var d=l[c],f=o[d],p=new THREE.Box3,m=0,v=f.length;m<v;m++)f[m].originBox||(f[m].originBox=f[m].boundingBox.clone()),p.union(f[m].originBox);var g=s.Utils.computeExplodeTranslation(a,p,r);u[d]=g,n.makeTranslation(g.x,g.y,g.z);for(var y=0,M=f.length;y<M;y++)f[y].boundingBox.applyMatrix4(n),f[y].matrix.multiplyMatrices(n,f[y].matrix),e.union(f[y].boundingBox)}}}}]),t}(s.BaseModelExplosion);s.BMDModelExplosion=e}(),s.Loader=s.Loader||{},function(){var e=function(){function e(t){_classCallCheck(this,e),this.databagPath=""+t.serverUrl+t.databagId,this.lightmapPath=t.lightmapDatabagId?""+t.serverUrl+t.lightmapDatabagId:t.lightmapDatabagId,this.shellDatabagId=t.shellDatabagId?""+t.serverUrl+t.shellDatabagId:null}return _createClass(e,[{key:"projectUrl",value:function(){return this.databagPath+"/config.json"}},{key:"sceneUrl",value:function(e){return e=e||0,this.databagPath+"/scene/scene_"+e+s.GlobalData.ZipResourcePostfix}},{key:"sceneIdUrl",value:function(){return this.databagPath+"/scene/scene_id"+s.GlobalData.ZipResourcePostfix}},{key:"userIdUrl",value:function(){return this.databagPath+"/scene/user_id"+s.GlobalData.ZipResourcePostfix}},{key:"octreeUrl",value:function(e){return e=e||"o",this.databagPath+"/scene/octree_"+e+s.GlobalData.ZipResourcePostfix}},{key:"symbolUrl",value:function(){return this.databagPath+"/symbol/symbol"+s.GlobalData.ZipResourcePostfix}},{key:"mpkUrl",value:function(e){return e=e||0,this.databagPath+"/mpk/mpk_"+e+s.GlobalData.ZipResourcePostfix}},{key:"bmpkUrl",value:function(e){e=e||0;var t=this.databagPath+"/bmpk/bmpk_"+e+s.GlobalData.ZipResourcePostfix;return s.RequestSpliter.splitByContextId(t,e)}},{key:"bmpkIndexUrl",value:function(){return this.databagPath+"/bmpk/index"+s.GlobalData.ZipResourcePostfix}},{key:"meshIdUrl",value:function(){return this.databagPath+"/mpk/mesh_id"+s.GlobalData.ZipResourcePostfix}},{key:"materialUrl",value:function(){return this.databagPath+"/material/material"+s.GlobalData.ZipResourcePostfix}},{key:"uv2Url",value:function(){return this.lightmapPath?this.lightmapPath+"/uv2/uvs1-export.buf":this.databagPath+"/uv2/uvs1-export.buf"}},{key:"uv2MapItemUrl",value:function(){return this.lightmapPath?this.lightmapPath+"/uv2/uvs1-export.json":this.databagPath+"/uv2/uvs1-export.json"}},{key:"lightmapTexUrl",value:function(e){return this.lightmapPath?this.lightmapPath+"/texture/"+e:this.databagPath+"/texture/"+e}},{key:"lightmapProjectUrl",value:function(){return this.lightmapPath?this.lightmapPath+"/config.json":this.lightmapPath}},{key:"materialIdUrl",value:function(){return this.databagPath+"/material/material_id"+s.GlobalData.ZipResourcePostfix}},{key:"texturePkgOrgIndexUrl",value:function(){return this.databagPath+"/texture/pkg_org_index"+s.GlobalData.ZipResourcePostfix}},{key:"texturePkgSmallIndexUrl",value:function(){return this.databagPath+"/texture/pkg_s_index"+s.GlobalData.ZipResourcePostfix}},{key:"texturePkgIndexUrl",value:function(e){return e?this.databagPath+"/texture/pkg_index"+s.GlobalData.ZipResourcePostfix:this.databagPath+"/texture/pkg_index"+s.GlobalData.JsonResourcePostfix}},{key:"texturePkgFileName",value:function(e,t,i,r){var n=void 0;return n=e?"pkg_"+i:"pkg_"+r+"_"+i,t&&(n+=s.GlobalData.ZipResourcePostfix),n}},{key:"bmpkPkgIndexUrl",value:function(){return this.databagPath+"/bmpk/pkg_index"+s.GlobalData.ZipResourcePostfix}},{key:"userDataUrl",value:function(){return this.databagPath+"/userdata/userdata"+s.GlobalData.ZipResourcePostfix}},{key:"cameraUrl",value:function(){return this.databagPath+"/scene/camera"+s.GlobalData.ZipResourcePostfix}},{key:"textureUrl",value:function(e){var t=this.databagPath+"/texture/"+e,i=e.replace(/[^0-9]/gi,"");return s.RequestSpliter.splitByContextId(t,i)}},{key:"layerUrl",value:function(){return this.databagPath+"/scene/layer"+s.GlobalData.ZipResourcePostfix}},{key:"layerKeyUrl",value:function(){return this.databagPath+"/scene/layer_key"+s.GlobalData.ZipResourcePostfix}},{key:"lineUrl",value:function(){return this.databagPath+"/line/line"+s.GlobalData.ZipResourcePostfix}},{key:"layerSceneUrl",value:function(e){return e=e||0,this.databagPath+"/layer/layer_"+e+s.GlobalData.ZipResourcePostfix}},{key:"layerSceneCell",value:function(){return this.databagPath+"/layer/layer_cell"+s.GlobalData.ZipResourcePostfix}},{key:"layerOctree",value:function(){return this.databagPath+"/layer/layer_octree"+s.GlobalData.ZipResourcePostfix}},{key:"borderLineUrl",value:function(e){return e=e||0,this.databagPath+"/outline/outline_"+e+s.GlobalData.ZipResourcePostfix}},{key:"mpkBorderLineUrl",value:function(e){return e=e||0,this.databagPath+"/outline/outline_mpk_"+e+s.GlobalData.ZipResourcePostfix}},{key:"terrainUrl",value:function(e,t,i){return this.databagPath+"/terrain/"+e+"/"+t+"/"+i+"/"+s.GlobalData.TerrainResourceFileName}},{key:"sceneStatisticsUrl",value:function(){return this.databagPath+"/sceneStatistics.json"}},{key:"shellModelUrl",value:function(){return this.shellDatabagId?this.shellDatabagId+"/config.json":null}}]),e}();s.Loader.Url=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.defaultWireframeColor=s.MaterialUtil.DefaultWireframeColor,this.wireframeMaterial=new s.MeshBasicClipMaterial(this.defaultWireframeColor),!1===s.GlobalData.TranslucentDepthDisabled&&(this.wireframeMaterial.transparent=!0),this.instanceWireframeMaterial=s.MaterialUtil.createInstanceMaterial(s.MaterialUtil.getMaterialParameters(this.wireframeMaterial)),!1===s.GlobalData.TranslucentDepthDisabled&&(this.instanceWireframeMaterial.transparent=!0),this.wireframeGeometryMap={}}return _createClass(e,[{key:"destroy",value:function(){this.wireframeMaterial.dispose(),this.wireframeMaterial=null,this.instanceWireframeMaterial.destroy(),this.instanceWireframeMaterial=null,this.wireframeGeometryMap=null,this.defaultWireframeColor=null}},{key:"setWireframeColor",value:function(e,t){this.wireframeMaterial.color=e,this.wireframeMaterial.opacity=t,this.wireframeMaterial.transparent=1!=t,this.instanceWireframeMaterial.color=e,this.instanceWireframeMaterial.opacity=t,this.instanceWireframeMaterial.transparent=1!=t}},{key:"getWireframeColor",value:function(){var e=this.wireframeMaterial.color.clone();return e.opacity=this.wireframeMaterial.opacity,e}},{key:"restoreWireframeColor",value:function(){var e=this.defaultWireframeColor;this.setWireframeColor(e.color,e.opacity)}}]),e}();s.ModelView.WireframeManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.model=t,this.config=null,this.statistics={renderableCount:0,renderableTotal:s.GlobalData.maxObjectNumInPool,renderableTotalForPool:s.GlobalData.maxObjectNumInPool,numOfElements:0,numOfTriangles:0,numOfVertices:0,memoeryInfo:null},this.transformInfos={octreeTransformed:!0,boundingBox:null,position:new THREE.Vector3,rotation:new THREE.Quaternion,scale:new THREE.Vector3(1,1,1),transformMatrix:new THREE.Matrix4},this.sceneStatistics=void 0}return _createClass(e,[{key:"destroy",value:function(){this.model=null,this.config=null,this.statistics=null,this.transformInfos=null,this.sceneStatistics=null}},{key:"load",value:function(e){var t=this,i=this.model,r=i.dataUrl,n=i.fileLoader;n.setResponseType(""),n.load(r.projectUrl(),function(r){var n;try{n=JSON.parse(r)}catch(e){return console.log("Config data exceptions!"),void i.dispatchEvent({type:s.EVENTS.ON_LOAD_INVALID_SCENE})}return s.Utils.checkVersionMatch(s.Version,n.metadata.version)?0===n.metadata.scenes?(i.setEmptyScene(!0),void i.dispatchEvent({type:s.EVENTS.ON_LOAD_EMPTY_SCENE})):(0==n.metadata.gz?s.GlobalData.ZipResourcePostfix="":s.GlobalData.ZipResourcePostfix=".gz",i.setEmptyScene(!1),void t._loadDataForSceneStatistics(function(){t._parse(n),e&&e()})):void i.dispatchEvent({type:s.EVENTS.ON_VERSION_NO_MATCH,version:{engine:s.Version,data:n.metadata.version}})},void 0,function(){console.log("Config load error!"),i.dispatchEvent({type:s.EVENTS.ON_LOAD_INVALID_SCENE})})}},{key:"loadWithConfig",value:function(e,t){var i=this,r=this.model;return s.Utils.checkVersionMatch(s.Version,e.metadata.version)?0===e.metadata.scenes?(r.setEmptyScene(!0),void r.dispatchEvent({type:s.EVENTS.ON_LOAD_EMPTY_SCENE})):(0==e.metadata.gz?s.GlobalData.ZipResourcePostfix="":s.GlobalData.ZipResourcePostfix=".gz",r.setEmptyScene(!1),void i._loadDataForSceneStatistics(function(){i._parse(e),t&&t()})):void r.dispatchEvent({type:s.EVENTS.ON_VERSION_NO_MATCH,version:{engine:s.Version,data:e.metadata.version}})}},{key:"_loadDataForSceneStatistics",value:function(e){var t=this,i=this.model.fileLoader,r=this.model.dataUrl,n=r.sceneStatisticsUrl(),a=function(i){var r=JSON.parse(i);t.sceneStatistics=r.sceneStatistics,e&&e()},o=function(){return new Promise(function(e,t){i.setResponseType(""),i.load(n,e,void 0,t)})};s.Storage.IndexedDBHelper.loadWithStorage("InfoData",n,o,a,e)}},{key:"_parse",value:function(e){this.config=e,this._setMetadata(e),this._toStatistics(e),this._setTransformInfos(e),this._chooseRendering(e),this._setHandler(e)}},{key:"_setMetadata",value:function(e){e.metadata.scenes=e.metadata.scenes?1:0,e.metadata.symbol=e.metadata.symbol?1:0,e.metadata.octree_o=e.metadata.octree_o?1:0,e.metadata.octree_i=e.metadata.octree_i?1:0,e.metadata.userdata=e.metadata.userdata?1:0,e.metadata.userId=1,e.metadata.camera=e.metadata.camera?1:0,e.metadata.material=e.metadata.material||0,e.metadata.material_json=e.metadata.material_json?1:0,e.metadata.lines=s.Compatibility.isLoadLinesEnabled(e.metadata.version)&&e.metadata.lines?1:0,e.metadata.outline_0=e.metadata.outline_0?1:0,e.metadata.outline_1=e.metadata.outline_1?1:0,e.metadata.outline_mpk=e.metadata.outline_mpk||0,e.metadata.mpk_shared_index=e.metadata.mpk_shared_index||e.metadata.outline_mpk}},{key:"_getDataProvider",value:function(e){if(s.GlobalData.DataProvider===s.EnumDataProvider.MERGED&&void 0!==e.bmpks&&e.bmpks>0)return console.log("data from: merged"),s.EnumDataProvider.MERGED;if(s.GlobalData.EnableLoadOnDemand&&e.layers){if(s.GlobalData.DataProvider===s.EnumDataProvider.LAYER_SCENE)return e.layers>1&&s.Compatibility.isLoadLayerSceneEnabled(e.version)?(console.log("data from: layer scene"),s.EnumDataProvider.LAYER_SCENE):(console.log("data from: layer"),s.EnumDataProvider.LAYER);if(s.GlobalData.DataProvider===s.EnumDataProvider.LAYER)return console.log("data from: layer"),s.EnumDataProvider.LAYER}if(s.GlobalData.DataProvider===s.EnumDataProvider.AUTO){if(s.GlobalData.EnableLoadOnDemand&&e.layers)return e.layers>1&&s.Compatibility.isLoadLayerSceneEnabled(e.version)?(console.log("data from: layer scene"),s.EnumDataProvider.LAYER_SCENE):(console.log("data from: layer"),s.EnumDataProvider.LAYER);if(s.GlobalData.BatchMergeEnabled&&s.Compatibility.isLoadBMpkEnabled(e.version)&&void 0!==e.bmpks&&e.bmpks>0)return console.log("data from: merged"),s.EnumDataProvider.MERGED}return console.log("data from: default"),s.EnumDataProvider.DEFAULT}},{key:"_chooseRendering",value:function(e){this.model.manager.chooseRendering(this.statistics.memoeryInfo)}},{key:"_setHandler",value:function(e){var t=!(!s.GlobalData.CanUseWireframeFromData||!e.metadata.outline_0&&!e.metadata.outline_1),i=this._getDataProvider(e.metadata),r=null,n=this.model;if(s.GlobalData.BatchMergeEnabled)switch(i){case s.EnumDataProvider.LAYER:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.LayerBatchedHandler(n,t);break;case s.EnumDataProvider.LAYER_SCENE:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.LayerSceneBatchedHandler(n,t);break;case s.EnumDataProvider.MERGED:s.GlobalData.EnableWorker?(r=new s.ModelView.WorkerDataBatchedHandler(n),console.log("strategy:","apply worker")):(r=new s.ModelView.DataBatchedHandler(n,t),console.log("strategy:","none"));break;default:s.GlobalData.EnableWorker?(r=new s.ModelView.WorkerBatchedHandler(n),console.log("strategy:","apply worker")):(r=new s.ModelView.BatchedHandler(n,t),console.log("strategy:","none"))}else if(s.GlobalData.OrganizeNodesByCameraView)switch(i){case s.EnumDataProvider.LAYER:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.LayerIncrementHandler(n);break;case s.EnumDataProvider.LAYER_SCENE:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.LayerSceneIncrementHandler(n);break;case s.EnumDataProvider.MERGED:r=new s.ModelView.DataBatchedHandler(n,t);break;default:r=new s.ModelView.IncrementHandler(n)}else switch(i){case s.EnumDataProvider.LAYER:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.FreeLayerIncrementHandler(n);break;case s.EnumDataProvider.LAYER_SCENE:s.GlobalData.HasLayerData=!0,s.GlobalData.LoadMpkOnDemand=!0,r=new s.ModelView.FreeLayerSceneIncrementHandler(n);break;case s.EnumDataProvider.MERGED:r=new s.ModelView.DataBatchedHandler(n);break;default:e.metadata.mpk_batched?(console.log("use batched mpks"),r=new s.ModelView.IncrementBatchedHandler(n)):r=new s.ModelView.FreeIncrementHandler(n)}n._handler=r}},{key:"_setTransformInfos",value:function(e){if(0!==e.view.transform?this.transformInfos.octreeTransformed=!0:this.transformInfos.octreeTransformed=!1,this.transformInfos.boundingBox=s.Utils.box3FromArray(e.view.bbox),e.view.rotation){var t=new THREE.Euler;t.fromArray(e.view.rotation),this.transformInfos.rotation.setFromEuler(t,!1)}e.view.position&&this.transformInfos.position.fromArray(e.view.position),e.view.scale&&this.transformInfos.scale.fromArray(e.view.scale),this.transformInfos.transformMatrix.compose(this.transformInfos.position,this.transformInfos.rotation,this.transformInfos.scale)}},{key:"_toStatistics",value:function(e){
e.count.texture_pixels&&e.count.texture_pixels>s.GlobalData.MaxTexturePixels&&(s.GlobalData.EnableTextureLoading=!1),void 0!==e.count&&(void 0!==e.count.mesh_face&&(this.statistics.numOfTriangles+=e.count.mesh_face),this.statistics.renderableTotal=0,this.statistics.renderableTotalForPool=0,void 0!==e.count.geom_box&&void 0!==e.count.geom_pipe&&void 0!==e.count.geom_tube&&void 0!==e.count.mesh?(this.statistics.renderableTotal+=e.count.geom_box,this.statistics.renderableTotal+=e.count.geom_pipe,this.statistics.renderableTotal+=e.count.geom_tube,this.statistics.renderableTotal+=e.count.mesh,this.statistics.renderableTotalForPool+=6*e.count.geom_box,this.statistics.renderableTotalForPool+=3*e.count.geom_pipe,this.statistics.renderableTotalForPool+=e.count.geom_tube,this.statistics.renderableTotalForPool+=e.count.mesh,this.statistics.numOfTriangles+=12*e.count.geom_box,this.statistics.numOfTriangles+=32*e.count.geom_pipe,this.statistics.numOfTriangles+=32*e.count.geom_tube):void 0!==e.count.geom&&void 0!==e.count.mesh&&(this.statistics.renderableTotal+=e.count.geom,this.statistics.renderableTotal+=e.count.mesh,this.statistics.numOfTriangles+=12*e.count.geom,this.statistics.numOfElements=this.statistics.renderableTotal,this.statistics.renderableTotalForPool=this.statistics.renderableTotal),void 0!==e.count.item&&(this.statistics.numOfElements=e.count.element||e.count.item)),this.sceneStatistics?(this.statistics.numOfTriangles=this.sceneStatistics.triangleTotalCount,this.statistics.numOfVertices=this.sceneStatistics.vertexTotalCount,this.statistics.numOfElements=this.sceneStatistics.elementCount,this.statistics.memoeryInfo=this._computeMaximumMemoryUsage(e)):(this.statistics.numOfVertices=this._computeNumOfVertices(e),this.statistics.memoeryInfo=this._computeApproximateMemoryUsage(e))}},{key:"_computeNumOfVertices",value:function(e){if(void 0===e.count)return 0;return(e.count.mesh_vertex||0)+24*(e.count.geom_box||0)+130*(e.count.geom_pipe||0)+24*(e.count.geom_box_m||0)}},{key:"_computeMaximumMemoryUsage",value:function(e){var t=this.sceneStatistics,i=t.vertexTotalCount,r=t.triangleTotalCount,n=0;n+=8*i,n+=3*r;var a=e.count.texture_pixels||0;return s.GlobalData.EnableTextureLoading&&(n+=4*a),n*=4,n*=1/1048576,n=Math.ceil(n),{maxMemorySize:n,triangleNumber:r}}},{key:"_computeApproximateMemoryUsage",value:function(e){var t=0,i=0,r=e.count.mesh_vertex||0,n=e.count.mesh_face||0,a=e.count.geom_box||0,o=e.count.geom_pipe||0,l=e.count.texture_pixels||0;i+=8*r,i+=3*n,i+=0,i+=0,t+=6*r,t+=3*n,t+=0,t+=0;var u=0;if(u+=n,a>0&&(u+=12*a),o>0&&(u+=124*o),u+=0,s.GlobalData.Instance){a>0&&(i+=192,i+=36,i+=24*a,t+=144,t+=36,t+=18*a),o>0&&(i+=1040,i+=372,i+=24*o,t+=780,t+=372,t+=18*o)}else a>0&&(i+=24*a*8,i+=12*a*3,t+=24*a*6,t+=12*a*3),o>0&&(i+=130*o*8,i+=124*o*3,t+=130*o*6,t+=124*o*3);return s.GlobalData.EnableTextureLoading&&(i+=4*l,t+=4*l),i*=4,t*=4,i*=1/1048576,t*=1/1048576,i=Math.ceil(i),t=Math.ceil(t),{maxMemorySize:i,minMemorySize:t,triangleNumber:u,instanceEnabled:s.GlobalData.Instance}}},{key:"getMemoryInfo",value:function(){return this.statistics.memoeryInfo}},{key:"getStatistics",value:function(){return this.statistics}},{key:"getConfig",value:function(){return this.config}},{key:"getTransforms",value:function(){return this.transformInfos}},{key:"setRenderableCount",value:function(e){this.statistics.renderableCount=e}},{key:"getVersion",value:function(){return this.config.metadata.version}}]),e}();s.ModelView.ConfigLoader=e}(),function(){var e=function(e){function t(e,i,r,n,a){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.isBmdLayer=!0,o.filter=new s.FilterManager,o.filter.setObserverForSceneState(o.manager.getFilter().getObserverForSceneState()),o.debut=a,o.dataUrl=new s.Loader.Url(i),o.fileLoader=new THREE.FileLoader(new THREE.LoadingManager),o.configLoader=new s.ModelView.ConfigLoader(o),o.pool=e.getObjectPool(),o.firstOctreeTransform=!0,o.selectedMaterial=o.manager.sceneState.selectionMaterial,o.materialManager=new s.MaterialManager(e.viewer),o.wireframeManager=new s.ModelView.WireframeManager,o.cameraList=[],o.index=r,o.parseCfgFinish=n,o.progressPercentage={load:.4,collect:.5,merge:.1},o.progressFrequency=10,o._rootNodeGroupName=s.ObjectGroupType.MODEL+"|"+o.databagId,o._rootNodeGroup=o.manager.scene.getOrCreateObjectGroup(o._rootNodeGroupName,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0}),o._handler=null,o.lightmap=void 0!=i.lightmapDatabagId,o.lightmapNum=0,o.enableLightmap=!1,o.lightmapIntensity=s.GlobalData.LightmapIntensity,o.minDistanceObjects={},o.prioritizedNodeCount=0,o.plugins=[],o.modelExplosion=new s.BMDModelExplosion(o),o.isAllMaterialChanged=!1,o}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.selectedMaterial=null,this.cameraList=null,this.occlusionCamera&&(this.occlusionCamera=null),this._handler&&(this._handler.destroy(),this._handler=null),this.wireframeManager.destroy(),this.wireframeManager=null,this.materialManager.disposeMaterials(this),this.materialManager.destroy(),this.materialManager=null,this.pool=null;for(var e=0,i=this.plugins.length;e<i;e++)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null,this.configLoader.destroy(),this.configLoader=null,this._removeMeshNodeGroup(),this.removeAllFromOctantMap(),this.dataUrl=null,this.fileLoader=null,this.debut=null,this.parseCfgFinish=null,this.progressPercentage=null,this.minDistanceObjects=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_getWireframeGroupName",value:function(){return s.ObjectGroupType.WIREFRAME+"|"+this.getEncodedDatabagId()}},{key:"load",value:function(e){var t=this,i=this;return new Promise(function(r,n){t.configLoader.loadWithConfig(t.config,function(){i.parseCfgFinish&&i.parseCfgFinish(),i.manager.updateScene(),i._getHandler().load(e),r()})})}},{key:"setCrossOrigin",value:function(e){this.fileLoader.setCrossOrigin(e)}},{key:"prepare",value:function(e,t){var i=this._getHandler();i&&i.prepare(e,t)}},{key:"dispatchEvent",value:function(e){this.manager.dispatchEvent(e)}},{key:"setLoaded",value:function(e){this.loaded=e}},{key:"isLoaded",value:function(){return!!this._handler&&this.loaded}},{key:"isEmptyScene",value:function(){return this.emptyScene}},{key:"setEmptyScene",value:function(e){this.emptyScene=e}},{key:"isLayerData",value:function(){return!(!this._handler||"layer"!==this._handler.tag)}},{key:"isVisible",value:function(){return this.visible}},{key:"setVisible",value:function(e){this.visible=e,this._rootNodeGroup.visible!==e&&(this._rootNodeGroup.visible=e,this._rootNodeGroup.pickableType=e?s.PICKABLETYPE.Geometry:s.PICKABLETYPE.UnPickable,this.manager.setRenderStateChanged(!0))}},{key:"calculateCameraModelRelation",value:function(e){this.containsCamera=this.getModelDescriptor().isOctreeOuter(e)}},{key:"addCamera",value:function(e){this.cameraList.push(e)}},{key:"getCameraNameList",value:function(){for(var e=[],t=this.cameraList.length-1;t>=0;t--)e.push(this.cameraList[t].name);return e}},{key:"getCamera",value:function(e){for(var t=this.cameraList.length-1;t>=0;t--)if(this.cameraList[t].name===e)return this.cameraList[t];return null}},{key:"updateOctreeNode",value:function(e){if(e||this.firstOctreeTransform){this.firstOctreeTransform&&(this.firstOctreeTransform=!1);var t=this.manager.scene.getMatrixGlobal();this.getModelDescriptor().updateOctreeNode(t,this.getTransformMatrix())}}},{key:"isDataReady",value:function(){var e=this._handler;return!!e&&e.isDataReady()}},{key:"updateMeshNodes",value:function(){var e=this._getHandler();e&&e.updateNodes()}},{key:"_getHandler",value:function(){return this._handler}},{key:"getMeshesByUserIds",value:function(e,t){if(e&&t){this.minDistanceObjects[e]=[],this.minDistanceObjects[t]=[];var i=this._getHandler();i&&i.getMeshesByUserIds(e,t);for(var r=0,n=this.plugins.length;r<n;r++)this.plugins[r].getMeshesByUserIds([e,t])}}},{key:"applyFilter",value:function(){for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].applyFilter();var i=this._getHandler();i&&i.applyFilter()}},{key:"applySelection",value:function(){for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].applySelection();var i=this._getHandler();if(i)return void i.applySelection()}},{key:"clearSelection",value:function(){for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].clearSelection();var i=this._getHandler();if(i)return void i.clearSelection()}},{key:"applyHover",value:function(){for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].applyHover();var i=this._getHandler();i&&i.applyHover()}},{key:"clearHover",value:function(){for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].clearHover();var i=this._getHandler();i&&i.clearHover()}},{key:"applyBlink",value:function(){var e=this._getHandler();e&&e.applyBlink()}},{key:"clearBlink",value:function(){var e=this._getHandler();e&&e.clearBlink()}},{key:"applyReplacement",value:function(){var e=this._getHandler();e&&e.applyReplacement()}},{key:"_removeMeshNodeGroup",value:function(){this._removeNodeGroup(s.ObjectGroupType.GEOMETRY),this._removeNodeGroup(s.ObjectGroupType.INSTANCEGEOMETRY),this._removeNodeGroup(s.ObjectGroupType.WIREFRAME),this._removeNodeGroup(s.ObjectGroupType.INSTANCEWIREFRAMEGEOMETRY),this._removeSceneGroup(),this._rootNodeGroup=null}},{key:"_getNodeGroup",value:function(e,t){for(var i=this._rootNodeGroup.children,r=0,n=i.length;r<n;r++)if(i[r].name==e)return i[r];var a=new s.ObjectGroup(e,t);return this._rootNodeGroup.add(a),a.globalSpace&&(a.matrixAutoUpdate=!1,a.updateMatrixWorld(!0)),a}},{key:"_removeNodeGroup",value:function(e){this._rootNodeGroup.removeByName(e)}},{key:"_hasNodeGroup",value:function(e){return this._rootNodeGroup.hasChild(e)}},{key:"_removeSceneGroup",value:function(){this.manager.scene.removeObjectGroupByName(this._rootNodeGroupName),this.manager.scene.removeObjectGroupByName(this._getWireframeGroupName())}},{key:"removeAllFromOctantMap",value:function(){this.manager.removeAllFromOctantMap(this.getEncodedDatabagId())}},{key:"clearMeshFromOctantMap",value:function(){this.manager.clearMeshFromOctantMap(this.getEncodedDatabagId())}},{key:"getMaterialManager",value:function(){return this.materialManager}},{key:"clearWireframeElementCount",value:function(){this.wireframeElementCount=void 0}},{key:"getWireframeElementCount",value:function(){if(void 0!==this.wireframeElementCount)return this.wireframeElementCount;var e=this.getModelDescriptor().getAllNodeInfos(),t=this.getFilter(),i=0;for(var r in e){var n=e[r];t._hasRenderWithBoardlineFilter()&&!t._isRenderWithBoardline(n[0])||(i+=n.length)}return this.wireframeElementCount=i,i}},{key:"isActivateWireframe",value:function(){return this.manager.isDrawingBoardlineEnabled()}},{key:"isOnlyWireframe",value:function(){return this.manager.isOnlyWireframe()}},{key:"getLoadedUserIdsObject",value:function(){return this._handler&&this._handler.getLoadedUserIdsObject?this._handler.getLoadedUserIdsObject():null}},{key:"clearNodeGroup",value:function(){var e=this._getNodeGroup(s.ObjectGroupType.GEOMETRY,{globalSpace:!0});e.clear(),e=this._getNodeGroup(s.ObjectGroupType.WIREFRAME,{globalSpace:!0}),e.clear(),e=this._getNodeGroup(s.ObjectGroupType.INSTANCEGEOMETRY,{globalSpace:!0}),e.clear(),e=this._getNodeGroup(s.ObjectGroupType.INSTANCEWIREFRAMEGEOMETRY,{globalSpace:!0}),e.clear(),(e=this.manager.scene.getObjectGroup(this._getWireframeGroupName()))&&e.clear()}},{key:"getWireframeMaterial",value:function(){return this.wireframeManager.wireframeMaterial}},{key:"getInstanceWireframeMaterial",value:function(){return this.wireframeManager.instanceWireframeMaterial}},{key:"getMaterialByMaterialId",value:function(e){return this.materialManager.materials[e]}},{key:"adjustProgressPercentage",value:function(e,t,i){this.progressPercentage.load=e,this.progressPercentage.collect=t,this.progressPercentage.merge=i}},{key:"setReplacedUserIdMap",value:function(e){s.Utils.isOwnEmptyObject(e)?this.replacedUserIdMap=null:this.replacedUserIdMap=e}},{key:"hasReplacedUserId",value:function(){return!s.Utils.isEmptyObject(this.replacedUserIdMap)}},{key:"isReplacedUserId",value:function(e){return this.replacedUserIdMap&&this.replacedUserIdMap[e]}},{key:"registerPlugin",value:function(e){this.plugins.push(e)}},{key:"disposeBufferAfterVbo",value:function(){var e=this._getHandler();e&&e.disposeBufferAfterVbo()}},{key:"isHiddenUserId",value:function(e){var t=this._getHandler();return!!t&&t.isHiddenNode(e)}},{key:"isHiddenSourceObjectUserId",value:function(e){return this.manager.isHiddenSourceObjectUserId(e)}},{key:"hasHiddenSourceObjectUserId",value:function(){return this.manager.hasHiddenSourceObjectUserId()}},{key:"getModelDescriptor",value:function(){return this._handler.loader.getDescriptor()}},{key:"getLoader",value:function(){return this._handler.loader}},{key:"getConfig",value:function(){return this.configLoader.getConfig()}},{key:"getVersion",value:function(){return this.configLoader.getVersion()}},{key:"getTransforms",value:function(){return this.configLoader.getTransforms()}},{key:"getStatistics",value:function(){return this.configLoader.getStatistics()}},{key:"setRenderableCount",value:function(e){this.configLoader.setRenderableCount(e),this._handler&&this._handler.clearPriorityNodesSet&&this._handler.clearPriorityNodesSet(!0)}},{key:"getRenderableCount",value:function(){return this.configLoader.getStatistics().renderableCount}},{key:"getBoundingBoxWorld",value:function(){return this.configLoader.getTransforms().boundingBox?this.configLoader.getTransforms().boundingBox.clone().applyMatrix4(this.getTransformMatrix()):null}},{key:"calculateClippingIds",value:function(e){var t=this._getHandler();t&&t.calculateClippingIds(e)}},{key:"calculateClippingContours",value:function(e){var t=this._getHandler();t&&t.calculateClippingContours(e)}},{key:"getOctreeRoots",value:function(e){this.getModelDescriptor().getOctreeRoots(e)}},{key:"isUserIdExist",value:function(e){return this.getModelDescriptor().isUserIdExist(e)}},{key:"getNodeInfosByUserId",value:function(e){var t=this.getModelDescriptor().getNodeInfosByUserId(e);return t&&t instanceof Array&&(t[0].transformMatrix=this.getTransformMatrix()),t}},{key:"getAllNodeInfos",value:function(){return this.getModelDescriptor().getAllNodeInfos()}},{key:"updateMaterialsValue",value:function(e,t,i){this.materialManager.updateMaterialsValue(this,e,t,i)}},{key:"updateMaterials",value:function(){this.materialManager.updateMaterials(this)}},{key:"switchNewStyleMaterial",value:function(e){this.materialManager.switchNewStyleMaterial(this,e)}},{key:"changeAllMaterials",value:function(e){this.materialManager.changeAllMaterials(this,e),this.isAllMaterialChanged=!0}},{key:"adjustVisibility",value:function(e){this._getHandler().adjustVisibility(e)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){this._getHandler().changeVisibilityOfSelectedObjects(e)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){this._getHandler().changeVisibilityOfNonSelectedObjects(e)}},{key:"adjustInstanceVisibility",value:function(e){this._getHandler().adjustInstanceVisibility(e)}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){this._getHandler().changeInstanceVisibilityOfSelectedObjects(e)}},{key:"changeInstanceVisibilityOfNonSelectedObjects",value:function(e){this._getHandler().changeInstanceVisibilityOfNonSelectedObjects(e)}},{key:"restoreVisibilityOfObjects",value:function(){this._getHandler().restoreVisibilityOfObjects()}},{key:"isUseable",value:function(){return this.isLoaded()&&this.isVisible()}},{key:"getFilter",value:function(){return this.filter}},{key:"getPickingMeshes",value:function(e,t,i,r,n){var a=this.getId();t[a]=new s.ObjectGroup,t[a].matrix.copy(this.getTransformMatrix()),t[a].matrixAutoUpdate=!1,this._dealNonInstancedNodesForPicking(e,t[a],i,r,n),this._dealInstancedNodesForPicking(e,t[a],i,r,n),this._dealPluginNodesForPicking(e,t[a],i,r,n)}},{key:"_dealNonInstancedNodesForPicking",value:function(e,t,i,r,n){if(this._handler){var a=this._handler.defaultManager;if(a.hasNodeInfo(this)){var o=a.getMeshManager().getPickingNodeGenerator(n),s=o.updatePickingMeshes(e,i,r,this);s&&t.add(s);var l=a.getWireFrameManager().getPickingNodeGenerator(n),u=l.updatePickingMeshes(e,i,r,this);u&&t.add(u)}}}},{key:"_dealInstancedNodesForPicking",value:function(e,t,i,r,n){if(this._handler){var a=this._handler.instancedManager;if(a.hasNodeInfo(this)){var o=a.getMeshManager().getPickingNodeGenerator(n),s=o.updatePickingMeshes(e,i,r,this);s&&t.add(s);var l=a.getWireFrameManager().getPickingNodeGenerator(n),u=l.updatePickingMeshes(e,i,r,this);u&&t.add(u)}}}},{key:"_dealPluginNodesForPicking",value:function(e,t,i,r,n){if(this._handler)for(var a=this.plugins,o=0,s=a.length;o<s;o++){var l=a[o].getPickingNodeGenerator(n),u=l.updatePickingMeshes(e,i,r);u&&t.add(u)}}},{key:"getBlinkMaterials",value:function(){var e=this._getHandler();return e?e.getBlinkMaterials():[]}},{key:"hasTransforms",value:function(){return!0}},{key:"enableColorWithoutLight",value:function(e){this.materialManager.enableColorWithoutLight(e)}},{key:"enableLocalClippingMode",value:function(e){this.localClippingMode=e;var t=this._handler.instancedManager.meshManager,i=this._handler.instancedManager.wireframeManager;if(t.updateInstanceClipping(e),i.updateInstanceWireframeClipping(e),!e){this.localClippingPlanes=null;for(var r in this.materialManager.materials){var n=this.materialManager.materials[r];n.clippingPlanes=null}for(var r in this.materialManager.instanceMaterials){var n=this.materialManager.instanceMaterials[r];if(n instanceof Array)for(var a=0,o=n.length;a<o;a++)n[a].clippingPlanes=null;else n.clippingPlanes=null}}}},{key:"clone",value:function(){}},{key:"getImageByUrl",value:function(e){return this.materialManager.getImageByUrl(e)}}]),t}(s.BaseModel);e.EnumFilterState={CLIPPING:-2,HIDDEN:-1,NONE:0,SELECTED:1,BLINK:2,HOVER:3,TRANSPARENT:4,LOCALCLIPPING:5,OVERRIDED:6},s.Model=e}(),s.Loader.IdReader=function(e){var t=new Uint32Array(e,0,2);this.size=t[0],this.count=t[1],this.cache={},this.idBuffer=e.slice(8),t=null},s.Loader.IdReader.prototype={constructor:s.Loader.IdReader,getSize:function(){return this.size},getCount:function(){return this.count},getString:function(e){if(void 0!==this.cache[e])return this.cache[e];if(e>=0&&e<this.count){var t=new Uint8Array(this.idBuffer,this.size*e,this.size),i=String.fromCharCode.apply(null,t),r=i.indexOf("\0");return this.cache[e]=-1!==r?i.substring(0,r):i,this.cache[e]}},getIndex:function(e){if(void 0==e)return-1;for(var t=0,i=this.count-1,r=e.length;t<=i;){var n=Math.floor((t+i)/2),a=new Uint8Array(this.idBuffer,this.size*n,r),o=String.fromCharCode.apply(null,a),s=o.indexOf("\0"),l=0;if(0==(l=-1!==s?e.localeCompare(o.substring(0,s)):e.localeCompare(o)))return n;l<0?i=n-1:l>0&&(t=n+1)}return-1}},s.Loader.UserDataReader=function(e){this.userData=JSON.parse(e),this.count=0;for(var t in this.userData)this.userData.hasOwnProperty(t)&&this.count++;this.getCount=function(){return this.count},this.getData=function(){return this.userData},this.getUserData=function(e){if(e>=0&&e<this.count)return this.userData[e+""]}},s.Loader.OctNode=function(e,t){var i=new Uint32Array(e,t,5);this.cell_id=i[0],this.child_s=i[3],this.child_e=i[4];var r=new Float32Array(e,t+20,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(r[0],r[1],r[2]),new THREE.Vector3(r[3],r[4],r[5]))},s.Loader.OctreeReader=function(e){var t=new Uint32Array(e,0,1);this.count=t[0],this.data=new Array(this.count);for(var i=0;i<this.count;++i)this.data[i]=new s.Loader.OctNode(e,4*(1+11*i))},s.Loader.OctreeReader.prototype={constructor:s.Loader.OctreeReader,getCount:function(){return this.count},getNode:function(e){if(e>=0&&e<this.count)return this.data[e]}},s.Loader.Material=function(e,t){var i=new Uint32Array(e,t,8);this.id=i[0],this.type=i[1],this.metal=i[2],this.color=i[3],this.emissive=i[4],this.specular=i[5],this.side=i[6],this.texture_n=i[7],this.texture_id=new Uint32Array(e,t+32,8);var r=new Float32Array(e,t+64,3);this.shininess=r[0],this.opacity=r[1],this.reflectivity=r[2],i=null,r=null},s.Loader.Texture=function(e,t){var i=new Uint32Array(e,t,4);this.id=i[0],this.type=i[1],this.repeat_u=i[2],this.repeat_v=i[3];var r=new Float32Array(e,t+16,5);this.angle=r[0],this.offset_u=r[1],this.offset_v=r[2],this.scale_u=r[3],this.scale_v=r[4];var n=new Uint8Array(e,t+36,8),a=String.fromCharCode.apply(null,n);this.file_name_ext=a.substring(0,a.indexOf("\0")),i=null,r=null,n=null},s.Loader.MaterialReader=function(e){var t=new Uint32Array(e,0,4);this.materialCount=t[0],this.materialOffset=t[1],this.textureCount=t[2],this.textureOffset=t[3],this.materialSize=76,this.textureSize=44,this.materialBuffer=e.slice(this.materialOffset,this.materialOffset+this.materialCount*this.materialSize),this.textureBuffer=e.slice(this.textureOffset,this.textureOffset+this.textureCount*this.textureSize),this.material_id=-1,this.texture_id=-1;var i=new ArrayBuffer(this.materialSize);this.material_cur=new s.Loader.Material(i,0),this.texture_cur=new s.Loader.Texture(i,0),t=null,i=null},s.Loader.MaterialReader.prototype={constructor:s.Loader.MaterialReader,getMaterial:function(e){if(e>=0&&e<this.materialCount)return new s.Loader.Material(this.materialBuffer,e*this.materialSize)},getTexture:function(e){if(e>=0&&e<this.textureCount)return new s.Loader.Texture(this.textureBuffer,e*this.textureSize)},getMaterialInfo:function(e){if(e==this.material_id)return this.material_cur;if(e>=0&&e<this.materialCount){var t=new Uint32Array(this.materialBuffer,e*this.materialSize,8);this.material_cur.id=t[0],this.material_cur.type=t[1],this.material_cur.metal=t[2],this.material_cur.color=t[3],this.material_cur.emissive=t[4],this.material_cur.specular=t[5],this.material_cur.side=t[6],this.material_cur.texture_n=t[7],this.material_cur.texture_id=new Uint32Array(this.materialBuffer,e*this.materialSize+32,8);var i=new Float32Array(this.materialBuffer,e*this.materialSize+64,3);return this.material_cur.shininess=i[0],this.material_cur.opacity=i[1],this.material_cur.reflectivity=i[2],t=null,i=null,this.material_id=e,this.material_cur}},getTextureInfo:function(e){if(e==this.texture_id)return this.texture_cur;if(e>=0&&e<this.textureCount){var t=new Uint32Array(this.textureBuffer,e*this.textureSize,4);this.texture_cur.id=t[0],this.texture_cur.type=t[1],this.texture_cur.repeat_u=t[2],this.texture_cur.repeat_v=t[3];var i=new Float32Array(this.textureBuffer,e*this.textureSize+16,5);this.texture_cur.angle=i[0],this.texture_cur.offset_u=i[1],this.texture_cur.offset_v=i[2],this.texture_cur.scale_u=i[3],this.texture_cur.scale_v=i[4];var r=new Uint8Array(this.textureBuffer,e*this.textureSize+36,8),n=String.fromCharCode.apply(null,r);return this.texture_cur.file_name_ext=n.substring(0,n.indexOf("\0")),t=null,i=null,r=null,this.texture_id=e,this.texture_cur}}},s.Loader.MaterialReaderJson=function(e){if(this.count=0,this.Data=JSON.parse(e),this.Data.hasOwnProperty("materials")&&(this.materials=this.Data.materials),this.Data.hasOwnProperty("metadata")&&(this.metadata=this.Data.metadata,this.metadata.hasOwnProperty("count")&&(this.count=this.metadata.count)),0===this.count)for(var t in this.materials)this.materials.hasOwnProperty(t)&&this.count++;this.getCount=function(){return this.count},this.getMaterial=function(e){if(e>=0&&e<this.count)return this.materials[e+""]}},s.Loader.LayerKeyReader=function(e){this.LayerKey=JSON.parse(e),this.count=0;for(var t in this.LayerKey)this.LayerKey.hasOwnProperty(t)&&this.count++;this.getCount=function(){return this.count},this.getData=function(){return this.LayerKey},this.getLayerKey=function(e){if(e>=0&&e<this.count)return this.LayerKey[e+""]}},s.Loader.LayerHeader=function(e){var t=new Uint32Array(e,0,4);this.layerCount=t[0],this.mpkBufferSize=t[1],this.layerOffset=t[2],this.mpkOffset=t[3];var i=new Float32Array(e,24,4);this.boundingBox=new THREE.Box3(new THREE.Vector3(i[0],i[1],i[2]),new THREE.Vector3(i[3],i[4],i[5])),t=null,i=null},s.Loader.LayerData=function(e,t){var i=new Int32Array(e,t,3);this.layer_id=i[0],this.layer_mpk_index=i[1],this.layer_mpk_count=i[2];var r=new Float32Array(e,t+12,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(r[0],r[1],r[2]),new THREE.Vector3(r[3],r[4],r[5])),i=null,r=null},s.Loader.LayerReader=function(e){this.header=new s.Loader.LayerHeader(e),this.DataSize=36,this.dataBuffer=e.slice(this.header.layerOffset,this.header.layerOffset+this.header.layerCount*this.DataSize),this.mpkBuffer=e.slice(this.header.mpkOffset,this.header.mpkOffset+this.header.mpkBufferSize)},s.Loader.LayerReader.prototype={constructor:s.Loader.LayerReader,getLayerData:function(e){if(e>=0&&e<this.header.layerCount)return new s.Loader.LayerData(this.dataBuffer,e*this.DataSize)},getMpkList:function(e){var t=this.getLayerData(e);if(void 0!=t)return new Uint32Array(this.mpkBuffer,4*t.layer_mpk_index,t.layer_mpk_count)},getLayerCount:function(){return this.header.layerCount}},s.Loader.SymbolHeader=function(e){var t=new Uint32Array(e,0,9);this.blockId=t[0],this.symbolCount=t[1],this.itemCount=t[2],this.matrixCount=t[3],this.geomBuffSize=t[4],this.symbolOffset=t[5],this.itemOffset=t[6],this.matrixOffset=t[7],this.geomOffset=t[8];var i=new Float32Array(e,36,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(i[0],i[1],i[2]),new THREE.Vector3(i[3],i[4],i[5])),t=null,i=null},s.Loader.Symbol=function(e,t){var i=new Int32Array(e,t,3);this.symbolId=i[0],this.itemIndex=i[1],this.itemCount=i[2];var r=new Float32Array(e,t+12,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(r[0],r[1],r[2]),new THREE.Vector3(r[3],r[4],r[5])),i=null,r=null},s.Loader.SymbolReader=function(e){this.header=new s.Loader.SymbolHeader(e),this.symbolSize=36,this.itemSize=52,this.matrixSize=64,this.geomSize=32,this.maxSize=256,this.boxUvSize=36,this.pipeUvSize=18,this.symbolBuffer=e.slice(this.header.symbolOffset,this.header.symbolOffset+this.header.symbolCount*this.symbolSize),this.itemBuffer=e.slice(this.header.itemOffset,this.header.itemOffset+this.header.itemCount*this.itemSize),this.matrixBuffer=e.slice(this.header.matrixOffset,this.header.matrixOffset+this.header.matrixCount*this.matrixSize),this.geomBuffer=e.slice(this.header.geomOffset,this.header.geomOffset+this.header.geomBuffSize),this.matr_cur_id=-1,this.pt_symb_min=new THREE.Vector3(0,0,0),this.pt_symb_max=new THREE.Vector3(0,0,0),this.pt_item_min=new THREE.Vector3(0,0,0),this.pt_item_max=new THREE.Vector3(0,0,0);var t=new ArrayBuffer(this.maxSize);this.symb_cur=new s.Loader.Symbol(t,0),this.item_cur=new s.Loader.Item(t,0),this.matr_cur=new s.Loader.Matrix(t,0),this.pipe_cur=new s.Loader.GeomPipe(t,0),this.symb_cur.boundingBox.set(this.pt_symb_min,this.pt_symb_max),this.item_cur.boundingBox.set(this.pt_item_min,this.pt_item_max)},s.Loader.SymbolReader.prototype={constructor:s.Loader.SymbolReader,getSymbol:function(e){if(e>=0&&e<this.header.symbolCount)return new s.Loader.Symbol(this.symbolBuffer,e*this.symbolSize)},getItem:function(e){if(e>=0&&e<this.header.itemCount)return new s.Loader.Item(this.itemBuffer,e*this.itemSize)},getMatrix:function(e){if(e>=0&&e<this.header.matrixCount)return new s.Loader.Matrix(this.matrixBuffer,e*this.matrixSize)},getGeomPipe:function(e){if(e>=0&&index<this.header.geomBuffSize)return new s.Loader.GeomPipe(this.geomBuffer,e)},getSymbolInfo:function(e){if(e>=0&&e<this.header.symbolCount){var t=new Int32Array(this.symbolBuffer,e*this.symbolSize,3);this.symb_cur.symbolId=t[0],this.symb_cur.itemIndex=t[1],this.symb_cur.itemCount=t[2];var i=new Float32Array(this.symbolBuffer,e*this.symbolSize+12,6);return this.pt_symb_min.set(i[0],i[1],i[2]),this.pt_symb_max.set(i[3],i[4],i[5]),this.symb_cur.boundingBox.set(this.pt_symb_min,this.pt_symb_max),this.symb_cur}},getItemInfo:function(e){if(e>=0&&e<this.header.itemCount){var t=new Int32Array(this.itemBuffer,e*this.itemSize,7);this.item_cur.ItemId=t[0],this.item_cur.originalId=t[1],this.item_cur.materialId=t[2],this.item_cur.userDataId=t[3],this.item_cur.matrixId=t[4],this.item_cur.type=t[5],this.item_cur.toData=t[6];var i=new Float32Array(this.itemBuffer,e*this.itemSize+28,6);return this.pt_item_min.set(i[0],i[1],i[2]),this.pt_item_max.set(i[3],i[4],i[5]),this.item_cur.boundingBox.set(this.pt_item_min,this.pt_item_max),this.item_cur}},getMatrixInfo:function(e){if(e==this.matr_cur_id)return this.matr_cur;if(e>=0&&e<this.header.matrixCount){var t=new Float32Array(this.matrixBuffer,e*this.matrixSize,16);return this.matr_cur.matrix.fromArray(t),this.matr_cur_id=e,this.matr_cur}},getGeomPipeInfo:function(e){if(e>=0&&e<this.header.geomBuffSize){var t=new Float32Array(this.geomBuffer,e,8);return this.pipe_cur.startPt.set(t[0],t[1],t[2]),this.pipe_cur.endPt.set(t[3],t[4],t[5]),this.pipe_cur.radius=t[6],this.pipe_cur.thickness=t[7],this.pipe_cur}},getGeomBoxUvInfo:function(e){if(e>=0&&e+4*this.boxUvSize<=this.header.geomBuffSize)return new Float32Array(this.geomBuffer,e,this.boxUvSize)},getGeomPipeUvInfo:function(e){if(e>=0&&e+4*this.pipeUvSize<=this.header.geomBuffSize)return new Float32Array(this.geomBuffer,e,this.pipeUvSize)},getMpkID:function(e){return parseInt(e/65536)},getMeshIndex:function(e){return parseInt(e%65536)}},s.Loader.MPKHeader=function(e){var t=new Uint32Array(e,0,6);this.blockId=t[0],this.vtFormat=t[1],this.meshCount=t[2],this.meshOffset=t[3],this.bufferSize=t[4],this.bufferOffset=t[5],t=null},s.Loader.MeshData=function(e,t){var i=new Uint32Array(e,t,5);this.mesh_id=i[0],this.ptCount=i[1],this.idxCount=i[2],this.dataOffset=i[3],this.vertexFormat=i[4];var r=new Float32Array(e,t+20,4);this.baseScale=r[0],this.baseX=r[1],this.baseY=r[2],this.baseZ=r[3],i=null,r=null},s.Loader.MPKReader=function(e){this.header=new s.Loader.MPKHeader(e),this.meshSize=36,this.maxSize=256,this.meshBuffer=e.slice(this.header.meshOffset,this.header.meshOffset+this.header.meshCount*this.meshSize),this.geomBuffer=e.slice(this.header.bufferOffset,this.header.bufferOffset+this.header.bufferSize),this.mesh_cur_id=-1;var t=new ArrayBuffer(this.maxSize);this.mesh_cur=new s.Loader.MeshData(t,0)},s.Loader.MPKReader.prototype={constructor:s.Loader.MPKReader,getMeshData:function(e){if(e>=0&&e<this.header.meshCount)return new s.Loader.MeshData(this.meshBuffer,e*this.meshSize)},getMeshInfo:function(e){if(e==this.mesh_cur_id)return this.mesh_cur;if(e>=0&&e<this.header.meshCount){var t=new Uint32Array(this.meshBuffer,e*this.meshSize,5);this.mesh_cur.mesh_id=t[0],this.mesh_cur.ptCount=t[1],this.mesh_cur.idxCount=t[2],this.mesh_cur.dataOffset=t[3],this.mesh_cur.vertexFormat=t[4];var i=new Float32Array(this.meshBuffer,e*this.meshSize+20,4);return this.mesh_cur.baseScale=i[0],this.mesh_cur.baseX=i[1],this.mesh_cur.baseY=i[2],this.mesh_cur.baseZ=i[3],this.mesh_cur_id=e,this.mesh_cur}},getPtBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;return 0==t.baseScale?new Float32Array(this.geomBuffer,t.dataOffset,3*t.ptCount):new Uint16Array(this.geomBuffer,t.dataOffset,3*t.ptCount)}},getIdxBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;var i=t.dataOffset;return 0==t.baseScale?i+=3*t.ptCount*4:(i+=3*t.ptCount*2,t.ptCount%2==1&&(i+=2)),s.Compatibility.use32MpkData?new Uint32Array(this.geomBuffer,i,t.idxCount):t.ptCount>65535?new Uint32Array(this.geomBuffer,i,t.idxCount):new Uint16Array(this.geomBuffer,i,t.idxCount)}},getNormalBuffer:function(e){if(2==(2&this.header.vtFormat)&&e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;var i=t.dataOffset;return 0==t.baseScale?i+=3*t.ptCount*4:(i+=3*t.ptCount*2,t.ptCount%2==1&&(i+=2)),s.Compatibility.use32MpkData?i+=4*t.idxCount:t.ptCount>65535?i+=4*t.idxCount:(i+=2*t.idxCount,t.idxCount%2==1&&(i+=2)),new Float32Array(this.geomBuffer,i,3*t.ptCount)}},getUVBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t||4!=(4&t.vertexFormat))return;var i=t.dataOffset
;return 0==t.baseScale?i+=3*t.ptCount*4:(i+=3*t.ptCount*2,t.ptCount%2==1&&(i+=2)),s.Compatibility.use32MpkData?i+=4*t.idxCount:t.ptCount>65535?i+=4*t.idxCount:(i+=2*t.idxCount,t.idxCount%2==1&&(i+=2)),2==(2&this.header.vtFormat)&&(i+=3*t.ptCount*4),new Float32Array(this.geomBuffer,i,2*t.ptCount)}},getOffsetIndexInfo:function(e,t){if(!(e<0||e>=this.header.meshCount)){var i=this.getMeshInfo(e),r=void 0!==t?!t:4==(4&i.vFormat);return{meshId:i.mesh_id,positionStart:i.vOffset/4,positionCount:3*i.ptCount,indexStart:i.iOffset/4,indexCount:i.idxCount,uvStart:r?i.tOffset/4:0,uvCount:r?2*i.ptCount:0}}},hasUV:function(e){if(!(e<0||e>=this.header.meshCount)){return 4==(4&this.getMeshInfo(e).vFormat)}}},s.Loader.BMPKHeader=function(e){var t=new Uint32Array(e,0,12);this.blockId=t[0],this.vtFormat=t[1],this.meshCount=t[2],this.meshOffset=t[3],this.ptBufferSize=t[4],this.ptBufferOffset=t[5],this.idxBufferSize=t[6],this.idxBufferOffset=t[7],this.norBufferSize=t[8],this.norBufferOffset=t[9],this.uvBufferSize=t[10],this.uvBufferOffset=t[11],t=null},s.Loader.BMeshData=function(e,t){var i=new Uint32Array(e,t,8);this.mesh_id=i[0],this.ptCount=i[1],this.idxCount=i[2],this.vFormat=i[3],this.vOffset=i[4],this.iOffset=i[5],this.nOffset=i[6],this.tOffset=i[7],i=null},s.Loader.BMPKReader=function(e){this.header=new s.Loader.BMPKHeader(e),this.meshSize=32,this.maxSize=256,this.meshBuffer=e.slice(this.header.meshOffset,this.header.meshOffset+this.header.meshCount*this.meshSize),this.vBuffer=e.slice(this.header.ptBufferOffset,this.header.ptBufferOffset+this.header.ptBufferSize),this.iBuffer=e.slice(this.header.idxBufferOffset,this.header.idxBufferOffset+this.header.idxBufferSize),this.nBuffer=e.slice(this.header.norBufferOffset,this.header.norBufferOffset+this.header.norBufferSize),this.tBuffer=e.slice(this.header.uvBufferOffset,this.header.uvBufferOffset+this.header.uvBufferSize),this.mesh_cur_id=-1;var t=new ArrayBuffer(this.maxSize);this.mesh_cur=new s.Loader.BMeshData(t,0)},s.Loader.BMPKReader.prototype={constructor:s.Loader.BMPKReader,getMeshData:function(e){if(e>=0&&e<this.header.meshCount)return new s.Loader.BMeshData(this.meshBuffer,e*this.meshSize)},getMeshInfo:function(e){if(e==this.mesh_cur_id)return this.mesh_cur;if(e>=0&&e<this.header.meshCount){var t=new Uint32Array(this.meshBuffer,e*this.meshSize,8);return this.mesh_cur.mesh_id=t[0],this.mesh_cur.ptCount=t[1],this.mesh_cur.idxCount=t[2],this.mesh_cur.vFormat=t[3],this.mesh_cur.vOffset=t[4],this.mesh_cur.iOffset=t[5],this.mesh_cur.nOffset=t[6],this.mesh_cur.tOffset=t[7],this.mesh_cur_id=e,this.mesh_cur}},getPtBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;return new Float32Array(this.vBuffer,t.vOffset,3*t.ptCount)}},getIdxBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;return new Uint32Array(this.iBuffer,t.iOffset,t.idxCount)}},getNormalBuffer:function(e){if(2==(2&this.header.vtFormat)&&e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t)return;return new Float32Array(this.nBuffer,t.nOffset,3*t.ptCount)}},getUVBuffer:function(e){if(e>=0&&e<this.header.meshCount){var t=this.getMeshInfo(e);if(void 0===t||4!=(4&t.vFormat))return;return new Float32Array(this.tBuffer,t.tOffset,2*t.ptCount)}},getOffsetIndexInfo:function(e,t){if(!(e<0||e>=this.header.meshCount)){var i=this.getMeshInfo(e),r=void 0!==t?!t:4==(4&i.vFormat);return{meshId:i.mesh_id,positionStart:i.vOffset/4,positionCount:3*i.ptCount,indexStart:i.iOffset/4,indexCount:i.idxCount,uvStart:r?i.tOffset/4:0,uvCount:r?2*i.ptCount:0}}},hasUV:function(e){if(!(e<0||e>=this.header.meshCount)){return 4==(4&this.getMeshInfo(e).vFormat)}}},s.Loader.BMeshIdReader=function(e){var t=new Uint32Array(e,0,1);this.count=t[0],this.cache={};for(var i=new Uint32Array(e,4,this.count),r=0;r<this.count;r+=2){var n=i[r];this.cache[n]=i[r+1]}t=null,i=null},s.Loader.BMeshIdReader.prototype={constructor:s.Loader.BMeshIdReader,getCount:function(){return this.count},getBMeshId:function(e){return this.cache[e]}},s.Loader.LineHeader=function(e){var t=new Uint32Array(e,0,7);this.blockId=t[0],this.lineCount=t[1],this.lineOffset=t[2],this.ptBufferSize=t[3],this.ptBufferOffset=t[4],this.idxBufferSize=t[5],this.idxBufferOffset=t[6],t=null},s.Loader.LineData=function(e,t){var i=new Uint32Array(e,t,6);this.line_id=i[0],this.lineType=i[1],this.ptCount=i[2],this.ptOffset=i[3],this.idxCount=i[4],this.idxOffset=i[5],i=null},s.Loader.LineReader=function(e){this.header=new s.Loader.LineHeader(e),this.lineSize=24,this.ptSize=12,this.lineBuffer=e.slice(this.header.lineOffset,this.header.lineOffset+this.header.lineCount*this.lineSize),this.ptBuffer=e.slice(this.header.ptBufferOffset,this.header.ptBufferOffset+this.header.ptBufferSize),this.idxBuffer=e.slice(this.header.idxBufferOffset,this.header.idxBufferOffset+this.header.idxBufferSize),this.line_cur_id=-1;var t=new ArrayBuffer(this.lineSize);this.line_cur=new s.Loader.LineData(t,0)},s.Loader.LineReader.prototype={constructor:s.Loader.LineReader,getLineData:function(e){if(e>=0&&e<this.header.lineCount)return new s.Loader.LineData(this.lineBuffer,e*this.lineSize)},getLineInfo:function(e){if(e==this.line_cur_id)return this.line_cur;if(e>=0&&e<this.header.lineCount){var t=new Uint32Array(this.lineBuffer,e*this.lineSize,6);return this.line_cur.line_id=t[0],this.line_cur.lineType=t[1],this.line_cur.ptCount=t[2],this.line_cur.ptOffset=t[3],this.line_cur.idxCount=t[4],this.line_cur.idxOffset=t[5],this.line_cur_id=e,this.line_cur}},getPtBuffer:function(e){if(e>=0&&e<this.header.lineCount){var t=this.getLineInfo(e);if(void 0===t)return;return new Float32Array(this.ptBuffer,t.ptOffset,3*t.ptCount)}},getIdxBuffer:function(e){if(e>=0&&e<this.header.lineCount){var t=this.getLineInfo(e);if(void 0===t)return;var i=new Uint32Array(this.idxBuffer,t.idxOffset,t.idxCount),r=t.ptOffset/this.ptSize;return i.forEach(function(e,t,i){i[t]-=r}),i}}},s.Loader.CameraReader=function(e){this.cameras=JSON.parse(e)},s.Loader.CameraReader.prototype.parse=function(e,t){function i(e,i){i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name);var r=new THREE.Matrix4;if(void 0!==e.matrix)r.fromArray(e.matrix);else{var n=new THREE.Vector3,a=new THREE.Quaternion,o=new THREE.Vector3;if(void 0!==e.position&&n.fromArray(e.position),void 0!==e.rotation){var s=new THREE.Vector3;s.fromArray(e.rotation);var l=new THREE.Euler(s[0]*Math.PI/180,s[1]*Math.PI/180,s[2]*Math.PI/180,"XYZ");a.setFromEuler(l)}void 0!==e.quaternion&&a.fromArray(e.quaternion,0),void 0!==e.scale&&i.scale.fromArray(e.scale),r.compose(n,a,o)}r.multiply(t),r.decompose(i.position,i.quaternion,i.scale)}var r,n,a=this.cameras;if(a.Orthographic){var o=a.Orthographic;for(var l in o)n=o[l],r=new s.Camera(s.CAMERATYPE.ORTHOGRAPHIC,n),i(n,r),e.addCamera(r)}if(a.Perspective){var u=a.Perspective;for(var l in u)n=u[l],r=new s.Camera(s.CAMERATYPE.PERSPECTIVE,n),void 0!==n.focus&&(r.focus=n.focus),void 0!==n.zoom&&(r.zoom=n.zoom),void 0!==n.filmGauge&&(r.filmGauge=n.filmGauge),void 0!==n.filmOffset&&(r.filmOffset=n.filmOffset),void 0!==n.view&&(r.view=Object.assign({},n.view)),i(n,r),e.addCamera(r)}},s.Loader.SceneHeader=function(e){var t=new Uint32Array(e,0,11);this.blockId=t[0],this.cellCount=t[1],this.itemCount=t[2],this.matrixCount=t[3],this.geomBuffSize=t[4],this.layerBuffSize=t[5],this.cellOffset=t[6],this.itemOffset=t[7],this.matrixOffset=t[8],this.geomOffset=t[9],this.layerOffset=t[10];var i=new Float32Array(e,44,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(i[0],i[1],i[2]),new THREE.Vector3(i[3],i[4],i[5])),t=null,i=null},s.Loader.Cell=function(e,t){var i=new Int32Array(e,t,5);this.cellId=i[0],this.depth=i[1],this.itemIndex=i[2],this.itemCount=i[3],this.layerType=i[4],this.layerSize=new Int32Array(e,t+20,8),this.layerOffset=new Int32Array(e,t+52,8);var r=new Float32Array(e,t+84,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(r[0],r[1],r[2]),new THREE.Vector3(r[3],r[4],r[5])),i=null,r=null},s.Loader.Item=function(e,t){var i=new Int32Array(e,t,7);this.ItemId=i[0],this.originalId=i[1],this.materialId=i[2],this.userDataId=i[3],this.matrixId=i[4],this.type=i[5],this.toData=i[6];var r=new Float32Array(e,t+28,6);this.boundingBox=new THREE.Box3(new THREE.Vector3(r[0],r[1],r[2]),new THREE.Vector3(r[3],r[4],r[5])),i=null,r=null},s.Loader.Matrix=function(e,t){var i=new Float32Array(e,t,16);this.matrix=(new THREE.Matrix4).fromArray(i),i=null},s.Loader.GeomPipe=function(e,t){var i=new Float32Array(e,t,8);this.startPt=new THREE.Vector3(i[0],i[1],i[2]),this.endPt=new THREE.Vector3(i[3],i[4],i[5]),this.radius=i[6],this.thickness=i[7],i=null},s.Loader.SceneReader=function(e){this.header=new s.Loader.SceneHeader(e),this.cellSize=108,this.itemSize=52,this.matrixSize=64,this.maxSize=1024,this.boxUvSize=36,this.pipeUvSize=18,this.cellBuffer=e.slice(this.header.cellOffset,this.header.cellOffset+this.header.cellCount*this.cellSize),this.itemBuffer=e.slice(this.header.itemOffset,this.header.itemOffset+this.header.itemCount*this.itemSize),this.matrixBuffer=e.slice(this.header.matrixOffset,this.header.matrixOffset+this.header.matrixCount*this.matrixSize),this.geomBuffer=e.slice(this.header.geomOffset,this.header.geomOffset+this.header.geomBuffSize),this.layerBuffer=e.slice(this.header.layerOffset,this.header.layerOffset+this.header.layerBuffSize),this.matr_cur_id=-1,this.pt_cell_min=new THREE.Vector3(0,0,0),this.pt_cell_max=new THREE.Vector3(0,0,0),this.pt_item_min=new THREE.Vector3(0,0,0),this.pt_item_max=new THREE.Vector3(0,0,0);var t=new ArrayBuffer(this.maxSize);this.cell_cur=new s.Loader.Cell(t,0),this.item_cur=new s.Loader.Item(t,0),this.matr_cur=new s.Loader.Matrix(t,0),this.pipe_cur=new s.Loader.GeomPipe(t,0),this.cell_cur.boundingBox.set(this.pt_cell_min,this.pt_cell_max),this.item_cur.boundingBox.set(this.pt_item_min,this.pt_item_max)},s.Loader.SceneReader.prototype={constructor:s.Loader.SceneReader,getCellMpks:function(e){if(e>=0&&e<this.header.cellCount){for(var t=[],i=this.getCellInfo(e),r=i.itemIndex;r<i.itemCount;++r){var n=this.getItemInfo(r);if(1===n.type){var a=this.getMpkID(n.toData);t.push(a)}}for(var o={},s=[],l=0;l<t.length;++l)o[t[l]]||(o[t[l]]=!0,s.push(t[l]));return s}},getCell:function(e){if(e>=0&&e<this.header.cellCount)return new s.Loader.Cell(this.cellBuffer,e*this.cellSize)},getItem:function(e){if(e>=0&&e<this.header.itemCount)return new s.Loader.Item(this.itemBuffer,e*this.itemSize)},getMatrix:function(e){if(e>=0&&e<this.header.matrixCount)return new s.Loader.Matrix(this.matrixBuffer,e*this.matrixSize)},getGeomPipe:function(e){if(e>=0&&e<this.header.geomBuffSize)return new s.Loader.GeomPipe(this.geomBuffer,e)},getCellInfo:function(e){if(e>=0&&e<this.header.cellCount){var t=new Int32Array(this.cellBuffer,e*this.cellSize,5);this.cell_cur.cellId=t[0],this.cell_cur.depth=t[1],this.cell_cur.itemIndex=t[2],this.cell_cur.itemCount=t[3],this.cell_cur.layerType=t[4],this.cell_cur.layerSize=new Int32Array(this.cellBuffer,e*this.cellSize+20,8),this.cell_cur.layerOffset=new Int32Array(this.cellBuffer,e*this.cellSize+52,8);var i=new Float32Array(this.cellBuffer,e*this.cellSize+84,6);return this.pt_cell_min.set(i[0],i[1],i[2]),this.pt_cell_max.set(i[3],i[4],i[5]),this.cell_cur.boundingBox.set(this.pt_cell_min,this.pt_cell_max),this.cell_cur}},getItemInfo:function(e){if(e>=0&&e<this.header.itemCount){var t=new Int32Array(this.itemBuffer,e*this.itemSize,7);this.item_cur.ItemId=t[0],this.item_cur.originalId=t[1],this.item_cur.materialId=t[2],this.item_cur.userDataId=t[3],this.item_cur.matrixId=t[4],this.item_cur.type=t[5],this.item_cur.toData=t[6];var i=new Float32Array(this.itemBuffer,e*this.itemSize+28,6);return this.pt_item_min.set(i[0],i[1],i[2]),this.pt_item_max.set(i[3],i[4],i[5]),this.item_cur.boundingBox.set(this.pt_item_min,this.pt_item_max),this.item_cur}},getMatrixInfo:function(e){if(e==this.matr_cur_id)return this.matr_cur;if(e>=0&&e<this.header.matrixCount){var t=new Float32Array(this.matrixBuffer,e*this.matrixSize,16);return this.matr_cur.matrix.fromArray(t),this.matr_cur_id=e,this.matr_cur}},getGeomPipeInfo:function(e){if(e>=0&&e<this.header.geomBuffSize){var t=new Float32Array(this.geomBuffer,e,8);return this.pipe_cur.startPt.set(t[0],t[1],t[2]),this.pipe_cur.endPt.set(t[3],t[4],t[5]),this.pipe_cur.radius=t[6],this.pipe_cur.thickness=t[7],this.pipe_cur}},getGeomBoxUvInfo:function(e){if(e>=0&&e+4*this.boxUvSize<=this.header.geomBuffSize)return new Float32Array(this.geomBuffer,e,this.boxUvSize)},getGeomPipeUvInfo:function(e){if(e>=0&&e+4*this.pipeUvSize<=this.header.geomBuffSize)return new Float32Array(this.geomBuffer,e,this.pipeUvSize)},getLayerInfo:function(e,t){if(e>=0&&e+t<=this.header.layerBuffSize){new Uint32Array(this.layerBuffer,e,t);return this.data}},getMpkID:function(e){return parseInt(e/65536)},getMeshIndex:function(e){return parseInt(e%65536)}},s.Loader.LayerIndex=function(e,t){var i=new Uint32Array(e,t,2);this.layer_id=i[0],this.item_index=i[1]},s.Loader.LayerIndexReader=function(e){var t=new Uint32Array(e,0,2);this.cell_count=t[0],this.data_count=t[1],this.headerSize=8,this.cellSize=108,this.dataSize=8;var i=this.cell_count*this.cellSize,r=this.data_count*this.dataSize;this.cellBuffer=e.slice(this.headerSize,this.headerSize+i),this.dataBuffer=e.slice(this.headerSize+i,this.headerSize+i+r)},s.Loader.LayerIndexReader.prototype={constructor:s.Loader.LayerIndexReader,getCell:function(e){if(e>=0&&e<this.cell_count)return new s.Loader.Cell(this.cellBuffer,e*this.cellSize)},getLayerIndex:function(e){if(e>=0&&e<this.data_count)return new s.Loader.LayerIndex(this.dataBuffer,e*this.dataSize)}},function(){var e=function(){function e(){_classCallCheck(this,e),this.geometries={}}return _createClass(e,[{key:"destroy",value:function(){this.disposeGeometries(),this.geometries=null}},{key:"disposeGeometries",value:function(){for(var e in this.geometries)this.disposeGeometry(e)}},{key:"disposeGeometry",value:function(e){var t=this.geometries[e];if(t){if(t instanceof Array)for(var i=0,r=t.length;i<r;i++)t[i].dispose();else t.dispose();delete this.geometries[e]}}},{key:"_hasGeometry",value:function(e){return!!this.geometries[e]}},{key:"_cacheGeometry",value:function(e,t){void 0===this.geometries[e]&&(this.geometries[e]=t)}},{key:"getGeometryById",value:function(e){return this.geometries[e]}},{key:"getGeometryByNodeInfo",value:function(e,t){return this._hasGeometry(t.geometryId)?this.getGeometryById(t.geometryId):this._createGeometryByNodeInfo(e,t)}},{key:"_createGeometryByNodeInfo",value:function(e,t){return this._createGeometry(t.type,t.geometryId,e.getModelDescriptor().getReferencedMeshBufferById(t.geometryId),e.lightmap)}},{key:"_createGeometry",value:function(e,t,i,r){if(this._hasGeometry(t))return this.getGeometryById(t);var n=r?this._createBufferGeometryWithLightmap(e,i):this._createBufferGeometry(e,i);return n?(this._cacheGeometry(t,n),n):null}},{key:"_createBufferGeometry",value:function(e,t){var i=s.ModelView.BaseDescriptor.EnumNodeItemType,r=null;switch(e){case i.MESH:case i.MESH_REF:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3)),t.N?r.addAttribute("normal",new THREE.BufferAttribute(t.N,3)):r.computeVertexNormals(),t.UV&&r.addAttribute("uv",new THREE.BufferAttribute(t.UV,2));break;case i.TUBE:case i.PIPE:r=s.GeomUtil.UnitCylinderInstance;break;case i.BOX:r=s.GeomUtil.UnitBoxInstance;break;case i.BOX_M:r=s.GeomUtil.getUnitTextureBox();break;case i.PIPE_M:r=s.GeomUtil.getUnitTextureCylinder();break;case i.LINE:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3))}return r}},{key:"_createBufferGeometryWithLightmap",value:function(e,t){var i=s.ModelView.BaseDescriptor.EnumNodeItemType,r=null;switch(e){case i.MESH:case i.MESH_REF:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3)),t.N?r.addAttribute("normal",new THREE.BufferAttribute(t.N,3)):r.computeVertexNormals(),t.UV&&r.addAttribute("uv",new THREE.BufferAttribute(t.UV,2));break;case i.PIPE:r=s.GeomUtil.getUnitLightmapPipe();break;case i.BOX:r=s.GeomUtil.getUnitLightmapBox();break;case i.BOX_M:r=s.GeomUtil.getUnitLightmapBoxM();break;case i.TUBE:case i.PIPE_M:r=s.GeomUtil.getUnitLightmapPipeM();break;case i.LINE:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3))}return r}},{key:"createBufferByBufferDataWithUV2",value:function(e,t,i,r){var n=this.createBufferByBufferData(t,i,r);if(!n)return null;if(!e.lightmap)return n;var a=[],o=n.index,s=e.getLoader().getUV2ById(t.itemIdUV2,o.length);s&&(t.lightmapIdx=s.lightmapIdx,t.materialId=t.materialId+"_"+t.lightmapIdx,a=s.uv2);for(var l=n.position,u=n.normal,c=n.uv,h=[],d=[],f=[],p=[],m=[],v=0,g=0;g<o.length;g++){var y=o[g];void 0==m[y]||a[2*m[y]]!=a[2*g]||a[2*m[y]+1]!=a[2*g+1]?(h.push(l[3*y]),h.push(l[3*y+1]),h.push(l[3*y+2]),u&&(d.push(u[3*y]),d.push(u[3*y+1]),d.push(u[3*y+2])),c&&(f.push(c[2*y]),f.push(c[2*y+1])),p.push(a[2*g]),p.push(a[2*g+1]),o[g]=v,v++,void 0==m[y]&&(m[y]=g)):o[g]=o[m[y]]}return l=null,u=null,c=null,a=null,m=null,n.uv2=p,n.position=h,n.normal=d,n.uv=f,n}},{key:"createBufferByBufferData",value:function(e,t,i){var r,n,a,o,l,u=s.ModelView.BaseDescriptor.EnumNodeItemType;switch(e.type){case u.MESH:case u.MESH_REF:if(!t||!t.buffer)return null;if(t.isDataView?(n=Uint32Array.from(t.buffer.I),r=Float32Array.from(t.buffer.P),a=Float32Array.from(t.buffer.N),o=t.buffer.UV&&t.buffer.UV.length?Float32Array.from(t.buffer.UV):null):(n=new Uint32Array(t.buffer.I),r=new Float32Array(t.buffer.P),a=new Float32Array(t.buffer.N),o=t.buffer.UV&&t.buffer.UV.byteLength?new Float32Array(t.buffer.UV):null),t.indexInfo){n=n.slice(t.indexInfo.indexStart,t.indexInfo.indexStart+t.indexInfo.indexCount),r=r.slice(t.indexInfo.positionStart,t.indexInfo.positionStart+t.indexInfo.positionCount),a=a.slice(t.indexInfo.positionStart,t.indexInfo.positionStart+t.indexInfo.positionCount),o=o&&t.indexInfo.uvCount?o.slice(t.indexInfo.uvStart,t.indexInfo.uvStart+t.indexInfo.uvCount):null;var c=t.indexInfo.positionStart/3;n.forEach(function(e,t,i){i[t]-=c})}if(s.Utils.isMirror(e.matrix.elements))for(var h=0,d=n.length;h<d;h+=3){var f=n[h+1];n[h+1]=n[h+2],n[h+2]=f}break;case u.PIPE:l=s.GeomUtil.UnitCylinderInstance,n=Uint32Array.from(l.index.array),r=Float32Array.from(l.attributes.position.array),a=Float32Array.from(l.attributes.normal.array),l=null;break;case u.BOX:case u.TUBE:case u.BOX_M:case u.PIPE_M:l=e.type===u.BOX_M||e.type===u.BOX?s.GeomUtil.getBoxMBuffer(e.uvArrayBuffer):s.GeomUtil.getPipeMBuffer(e.uvArrayBuffer),n=Uint32Array.from(l.index),r=Float32Array.from(l.vertex),a=Float32Array.from(l.normal),l.uv&&(o=Float32Array.from(l.uv),delete l.uv),l=null;break;case u.LINE:if(!t||!t.buffer)return null;if(t.isDataView?(n=Uint32Array.from(t.buffer.I),r=Float32Array.from(t.buffer.P),a=null,o=null):(n=new Uint32Array(t.buffer.I),r=new Float32Array(t.buffer.P),a=null,o=null),t.indexInfo){n=n.slice(t.indexInfo.indexStart,t.indexInfo.indexStart+t.indexInfo.indexCount),r=r.slice(t.indexInfo.positionStart,t.indexInfo.positionStart+t.indexInfo.positionCount);var c=t.indexInfo.positionStart/3;n.forEach(function(e,t,i){i[t]-=c})}break;default:console.log("error data!")}var p=e.matrix;if((i=void 0===i||i)&&(s.GeomUtil.applyMatrix4ToBuffer(p,r),a)){var m=new THREE.Matrix3;m.getNormalMatrix(p),s.GeomUtil.applyMatrix3ToBuffer(m,a),s.GeomUtil.normalizeBuffer(a)}return e.uv=!!o,{index:n,position:r,normal:a,uv:o}}}]),e}();s.ModelView.MeshBaseManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.symbolReader=null,this.userIdReader=null,this.userDataReader=null,this.mapSceneReader={},this.lightmap=!1,this.mapNodeInfoByCategory={},this.mapNodeInfoByUserId={},this.mapNodeInfoByCellId={},this.mapNodeInfoByParameterizedDesc={},this.mapStandardNodeInfoByGeometryId=null,this.mapInstancedNodeInfoByGeometryId=null,this.referencedMeshCache={},this.cellCount=0,this.borderLines={},this.fullNodeInfoArray=[],this.sharedGeometryCounter={},this.octreeRootNode={inner:null,outer:null,layer:null}}return _createClass(e,[{key:"destroy",value:function(){this.destroyReader(),this.mapNodeInfoByCategory=null,this.mapNodeInfoByUserId=null,this.mapNodeInfoByCellId=null,this.mapNodeInfoByParameterizedDesc=null,this.mapStandardNodeInfoByGeometryId=null,this.mapInstancedNodeInfoByGeometryId=null,this.referencedMeshCache=null,this.borderLines=null,this.octreeRootNode=null,this.fullNodeInfoArray=null,this.sharedGeometryCounter=null}},{key:"destroyReader",value:function(){this.userIdReader=null,this.userDataReader=null,this.symbolReader=null,this.mapSceneReader=null}},{key:"getSceneReaderMap",value:function(){return this.mapSceneReader}},{key:"isValidScene",value:function(){return!s.Utils.isEmptyObject(this.getSceneReaderMap())||(s.Logger.log("model load not started!"),!1)}},{key:"_classifyNodeInfo",value:function(e){this._cacheNodeInfoByCellId(e),this._cacheNodeInfoByUserId(e),this._cacheNodeInfoByCategory(e),this._cacheNodeInfoByParameterizedDesc(e)}},{key:"classifyAllNodeInfo",value:function(){var e=this;this.fullNodeInfoArray.forEach(function(t){t.instanceOrNot=e._isInstancedNode(t),e._classifyNodeInfo(t)}),this.fullNodeInfoArray.length=0,this.sharedGeometryCounter={}}},{key:"_cacheNodeInfoByCellId",value:function(e){void 0===this.mapNodeInfoByCellId[e.cellId]&&(this.mapNodeInfoByCellId[e.cellId]=[]),this.mapNodeInfoByCellId[e.cellId].push(e)}},{key:"_cacheNodeInfoByUserId",value:function(e){void 0===this.mapNodeInfoByUserId[e.userId]&&(this.mapNodeInfoByUserId[e.userId]=[]),this.mapNodeInfoByUserId[e.userId].push(e)}},{key:"_cacheNodeInfoByCategory",value:function(e){var t;t=e.instanceOrNot?s.ModelView.BaseDescriptor.NodeInfoCategory.INSTANCED:s.ModelView.BaseDescriptor.NodeInfoCategory.STANDARD,void 0===this.mapNodeInfoByCategory[t]&&(this.mapNodeInfoByCategory[t]={}),void 0===this.mapNodeInfoByCategory[t][e.userId]&&(this.mapNodeInfoByCategory[t][e.userId]=[]),this.mapNodeInfoByCategory[t][e.userId].push(e)}},{key:"_cacheNodeInfoByParameterizedDesc",value:function(e){e.parameterizedDesc&&(void 0===this.mapNodeInfoByParameterizedDesc[e.type]&&(this.mapNodeInfoByParameterizedDesc[e.type]=[]),this.mapNodeInfoByParameterizedDesc[e.type].push(e))}},{key:"_clearNodeInfoCacheWithParameterizedDesc",value:function(){this.mapNodeInfoByParameterizedDesc={}}},{key:"_clearNodeInfoCacheWithCellId",value:function(){this.mapNodeInfoByCellId={}}},{key:"_clearNodeInfoCacheWithCategory",value:function(){this.mapNodeInfoByCategory={}}},{key:"_clearNodeInfoCacheWithUserId",value:function(){this.mapNodeInfoByUserId={}}},{key:"clearNodeInfoCache",value:function(){this._clearNodeInfoCacheWithCellId(),this._clearNodeInfoCacheWithUserId(),this._clearNodeInfoCacheWithCategory(),this._clearNodeInfoCacheWithParameterizedDesc()}},{key:"getNodeInfosByCellId",value:function(e){return this.mapNodeInfoByCellId[e]}},{key:"getNodeInfosWithCellId",value:function(){return this.mapNodeInfoByCellId}},{key:"getNodeInfosWithParameterizedDesc",value:function(){return this.mapNodeInfoByParameterizedDesc}},{key:"getAllNodeInfos",value:function(){return this.mapNodeInfoByUserId}},{key:"getNodeInfosByUserId",value:function(e){return this.mapNodeInfoByUserId[e]}},{key:"getStandardNodeInfos",value:function(){return this.mapNodeInfoByCategory[s.ModelView.BaseDescriptor.NodeInfoCategory.STANDARD]}},{key:"getInstancedNodeInfos",value:function(){return this.mapNodeInfoByCategory[s.ModelView.BaseDescriptor.NodeInfoCategory.INSTANCED]}},{key:"getStandardUserIds",value:function(){return this.getStandardNodeInfos()?Object.keys(this.getStandardNodeInfos()):[]}},{key:"getInstancedUserIds",value:function(){return this.getInstancedNodeInfos()?Object.keys(this.getInstancedNodeInfos()):[]}},{key:"getStandardNodeInfosById",value:function(e){var t=this.getStandardNodeInfos();return t?t[e]:null}},{key:"getInstancedNodeInfosById",value:function(e){var t=this.getInstancedNodeInfos();return t?t[e]:null}},{key:"_getUserIdsByCategory",value:function(e,t){var i,r=[];if(i=t===s.ModelView.BaseDescriptor.NodeInfoCategory.INSTANCED?this.getInstancedNodeInfos():this.getStandardNodeInfos())for(var n=0,a=e.length;n<a;n++)i[e[n]]&&r.push(e[n]);return r}},{key:"getInstancedUserIdsByCategory",value:function(e){return this._getUserIdsByCategory(e,s.ModelView.BaseDescriptor.NodeInfoCategory.INSTANCED)}},{key:"getStandardUserIdsByCategory",value:function(e){return this._getUserIdsByCategory(e,s.ModelView.BaseDescriptor.NodeInfoCategory.STANDARD)}},{key:"_traverseNodeInfosByIds",value:function(e,t,i){for(var r=0,n=t.length;r<n;r++){var a=t[r];i(a,e[a])}}},{key:"traverseStandardNodeInfos",value:function(e,t){var i=this.getStandardNodeInfos();i&&(e=e||this.getStandardUserIds(),this._traverseNodeInfosByIds(i,e,t))}},{key:"traverseInstancedNodeInfos",value:function(e,t){var i=this.getInstancedNodeInfos();i&&(e=e||this.getInstancedUserIds(),this._traverseNodeInfosByIds(i,e,t))}},{key:"traverseNodeInfosByCell",value:function(e){for(var t=Object.keys(this.mapNodeInfoByCellId),i=0,r=t.length;i<r;i++)for(var n=t[i],a=this.mapNodeInfoByCellId[n],o=0,s=a.length;o<s;o++)e(n,a[o])}},{key:"clearReferencedMeshCache",value:function(){for(var e in this.referencedMeshCache)delete this.referencedMeshCache[e];this.referencedMeshCache=null}},{key:"cacheReferencedMeshBufferData",value:function(e,t){this.referencedMeshCache.bufferData||(this.referencedMeshCache.bufferData={}),this.referencedMeshCache.bufferData[e]=t}},{key:"getReferencedMeshBufferData",value:function(){return this.referencedMeshCache.bufferData}},{key:"getReferencedMeshBufferById",value:function(e){return this.referencedMeshCache&&this.referencedMeshCache.bufferData?this.referencedMeshCache.bufferData[e]:null}},{key:"cacheReferencedMeshMpkIds",value:function(e,t){this.referencedMeshCache.mpkIds||(this.referencedMeshCache.mpkIds={}),this.referencedMeshCache.mpkIds[e]||(this.referencedMeshCache.mpkIds[e]=[]),this.referencedMeshCache.mpkIds[e].push(t)}},{key:"clearReferencedMeshCacheByMpkIdxs",value:function(e,t){if(this.referencedMeshCache.mpkIds)for(var i=0,r=e.length;i<r;i++){var n=e[i],a=this.referencedMeshCache.mpkIds[n];if(a){for(var o=0,s=a.length;o<s;o++)t&&t(a[o]),delete this.referencedMeshCache[a[o]];delete this.referencedMeshCache.mpkIds[n]}}}},{key:"cacheBorderLine",value:function(e,t){var i=e?"shared":"unique";this.borderLines[i]||(this.borderLines[i]=[]),this.borderLines[i].push(t)}},{key:"getSharedBorderLineCache",value:function(){return this.borderLines.shared}},{key:"getUniqueBorderLineCache",value:function(){return this.borderLines.unique}},{key:"_isParameterizedNode",value:function(t){return e.isParameterizedNode(t)}},{key:"_isGeometrySharedNode",value:function(t){return e.isGeometrySharedNode(t)}},{key:"_isInstancedNode",value:function(e){if(!s.GlobalData.Instance)return!1;if(e.parameterizedDesc)return!0;if(!s.GlobalData.InstanceSharedMeshEnabled)return!1;if(!this._isGeometrySharedNode(e))return!1;var t=s.GlobalData.InstanceSharedMeshThreshold;return(this.sharedGeometryCounter[e.geometryId]||0)>t}},{key:"getCellCount",value:function(){return this.cellCount}},{key:"getOctreeRootNode",value:function(){return this.octreeRootNode}},{key:"isUseInnerAndOuterOctree",value:function(){return!0}},{key:"isOctreeOuter",value:function(e){var t=this.octreeRootNode.inner||this.octreeRootNode.outer;return!(e.x<t.min.x||e.x>t.max.x||e.y<t.min.y||e.y>t.max.y||e.z<t.min.z||e.z>t.max.z)}},{key:"getOctreeRoots",value:function(e){this.octreeRootNode.outer&&e.push(this.octreeRootNode.outer),this.octreeRootNode.inner&&e.push(this.octreeRootNode.inner)}},{key:"updateOctreeNodeBy",value:function(e,t){function i(e,t){n.copy(e.boundingBoxWorld),n.applyMatrix4(t),e.min.copy(n.min),e.max.copy(n.max),e.center=n.getCenter(),e.size=n.getSize().lengthSq()}function r(e,t){for(var n=0,a=e.childOctants.length;n<a;++n){var o=e.childOctants[n];i(o,t),r(o,t)}}var n=new THREE.Box3;i(e,t),r(e,t)}},{key:"updateOctreeNode",value:function(e,t){var i=t.clone().premultiply(e),r=this.getOctreeRootNode();r.outer&&this.updateOctreeNodeBy(r.outer,i),r.inner&&this.updateOctreeNodeBy(r.inner,i)}},{key:"removeFromSceneReaderMap",value:function(e){for(var t=0,i=e.length;t<i;t++)this.mapSceneReader[e[t]]&&delete this.mapSceneReader[e[t]]}},{key:"isUserIdExist",value:function(e){return!!this.getNodeInfosByUserId(e)}},{key:"addToNodeInfoMap",value:function(e){for(var t=0,i=e.length;t<i;t++)this._cacheNodeInfoByUserId(e[t])}},{key:"removeFromNodeInfoMap",value:function(e){for(var t=this.getAllNodeInfos(),i=0,r=e.length;i<r;i++){var n=e[i].userId;t[n]&&delete t[n]}}},{key:"cacheNodeInfosOnGeometryId",value:function(){this.cacheStandardNodeInfosOnGeometryId(),this.cacheInstancedNodeInfosOnGeometryId()}},{key:"cacheStandardNodeInfosOnGeometryId",value:function(){this.mapStandardNodeInfoByGeometryId={},this._cacheNodeInfosOnGeometryIdBy(this.getStandardNodeInfos(),this.mapStandardNodeInfoByGeometryId)}},{key:"cacheInstancedNodeInfosOnGeometryId",value:function(){this.mapInstancedNodeInfoByGeometryId={},this._cacheNodeInfosOnGeometryIdBy(this.getInstancedNodeInfos(),this.mapInstancedNodeInfoByGeometryId)}},{key:"_cacheNodeInfosOnGeometryIdBy",value:function(e,t){var i=this;if(e){Object.keys(e).forEach(function(r){e[r].forEach(function(e){e.geometryId=i.convertGeometryId(e.geometryId),t[e.geometryId]||(t[e.geometryId]=[]),t[e.geometryId].push(e)})})}}},{key:"getStandardNodeInfosOnGeometryId",value:function(){return this.mapStandardNodeInfoByGeometryId?this.mapStandardNodeInfoByGeometryId:(this.cacheStandardNodeInfosOnGeometryId(),this.mapStandardNodeInfoByGeometryId)}},{key:"getInstancedNodeInfosOnGeometryId",value:function(){return this.mapInstancedNodeInfoByGeometryId?this.mapInstancedNodeInfoByGeometryId:(this.cacheInstancedNodeInfosOnGeometryId(),this.mapInstancedNodeInfoByGeometryId)}},{key:"clearNodeInfosWithGeometryId",value:function(){this.mapStandardNodeInfoByGeometryId=null,this.mapInstancedNodeInfoByGeometryId=null}},{key:"convertGeometryId",value:function(e){return e}}],[{key:"getMeshIdFromOctantMap",value:function(t){return t.single?t.nodeId:t.instanceOrNot?t.uv2Info?s.Utils.getCombinedKeyString([t.materialId,t.geometryId,t.uv2Info.byteOffset]):s.Utils.getCombinedKeyString([t.materialId,t.geometryId]):s.GlobalData.BatchMergeEnabled?s.Utils.getCombinedKeyString([t.materialId,t.uv?"1":"0",t.type===e.EnumNodeItemType.LINE?"lines":"meshes"]):t.nodeId}},{key:"isParameterizedNode",value:function(t){return t.type===e.EnumNodeItemType.TUBE||t.type===e.EnumNodeItemType.PIPE||t.type===e.EnumNodeItemType.BOX||t.type===e.EnumNodeItemType.BOX_M||t.type===e.EnumNodeItemType.PIPE_M}},{key:"isParameterizedNodeType",value:function(t){return t===e.parameterizedNodeType.TUBE||t===e.parameterizedNodeType.PIPE||t===e.parameterizedNodeType.PIPE_M||t===e.parameterizedNodeType.BOX||t===e.parameterizedNodeType.BOX_M}},{key:"isGeometrySharedNode",value:function(t){return t.type===e.EnumNodeItemType.MESH_REF}},{key:"isLineNode",value:function(t){return t.type===e.EnumNodeItemType.LINE}}]),e}();e.EnumNodeItemType={SYMBOL:0,MESH:1,TUBE:2,PIPE:3,BOX:4,BOX_M:5,PIPE_M:6,MESH_REF:7,LINE:8},e.NodeInfoCategory={INSTANCED:0,STANDARD:1},e.parameterizedNodeType={BOX:"box",BOX_M:"boxM",PIPE:"pipe",PIPE_M:"pipeM",TUBE:"tube"},s.ModelView.BaseDescriptor=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.handler=t,this.model=t.model,this.url=t.model.dataUrl,this.fileLoader=t.model.fileLoader,this.descriptor=null,this.loadTaskCount=0,this.maxLoadTaskCount=0,this.loadTextureCount=0,this.maxLoadTextureCount=0,this.textruesLoaded=!1,this.dataLoaded=!1,this.mpkTaskManager=new s.TaskManager,this.enableCompressedTexture=!1,this.startCallback=null,this.progressCallback=null,
this.finishCallback=null}return _createClass(e,[{key:"destroy",value:function(){this.mpkTaskManager=null,this.textureManager=null,this.url=null,this.fileLoader=null,this.descriptor&&(this.descriptor.destroy(),this.descriptor=null),this.model=null,this.handler=null,this.startCallback=null,this.progressCallback=null,this.finishCallback=null}},{key:"getDescriptor",value:function(){return this.descriptor}},{key:"setNotifyProgress",value:function(e){this.notifyProgress=e}},{key:"load",value:function(e,t,i){this.startCallback=e,this.progressCallback=t,this.finishCallback=i;var r=this.url.lightmapProjectUrl();if(r){var n=this;this._loadLightmapConfig(r,function(){n.loadData()})}else this.loadData()}},{key:"loadData",value:function(){var e=this,t=e.model,i=t.getConfig().metadata,r=this.model.materialManager;s.GlobalData.CanUseCompressedTexture&&i.texture_dds&&(r.enableCompressedTexture=!0,this.enableCompressedTexture=!0),s.GlobalData.CanUseSmallTexture&&i.texture_small&&(r.enableSmallTexture=!0),i.texture_pkg&&(r.enablePkgTexture=!0),i.texture_org&&(r.enableOrgTexture=!0),i.texture_dds&&(r.enableDdsTexture=!0),0==i.texture_pkg_gz&&(r.enableTexturePkgGz=!1),s.Compatibility.isUseMergeTexturePkg(i.version)?s.Compatibility.useMergeTexturePkg=!0:s.Compatibility.useMergeTexturePkg=!1,s.Compatibility.isUse32MpkData(i.version)?s.Compatibility.use32MpkData=!0:s.Compatibility.use32MpkData=!1;var n=this.getSceneTaskCount(i);e.maxLoadTaskCount=0,e.maxLoadTaskCount+=n,e.maxLoadTaskCount+=i.material,e.maxLoadTaskCount+=i.userId,e.maxLoadTaskCount+=i.userdata,e.maxLoadTaskCount+=i.camera,e.maxLoadTaskCount+=i.octree_o,e.maxLoadTaskCount+=i.octree_i,t.lightmap&&(e.maxLoadTaskCount+=2),e.startCallback&&e.startCallback();this.url;i.material?e._loadMaterial(i.material_json):e.textruesLoaded=!0,i.userId&&e._loadUserId(),i.userdata&&e._loadUserData(),i.camera&&e._loadCamera(),(i.octree_o||i.octree_i)&&e._loadOctree(i.octree_o,i.octree_i),t.lightmap&&e._loadUV2(),n&&e.loadSceneAndMpks(i)}},{key:"loadSceneAndMpks",value:function(e){}},{key:"getSceneTaskCount",value:function(e){return 0}},{key:"loadWithStorage",value:function(e,t,i,r){s.Storage.IndexedDBHelper.loadWithStorage("ModelData",e,t,i,r)}},{key:"_loadLightmapConfig",value:function(e,t){var i=this,r=this.model,n=this.descriptor,a=e,o=function(e){var i;try{i=JSON.parse(e)}catch(e){return void console.log("Lightmap config data exceptions!")}void 0!==i.count.lightmapNum&&i.count.lightmapNum>0&&(r.lightmapNum=i.count.lightmapNum,n.lightmap=!0,s.GlobalData.EnableLightmap=!0),t&&t()},l=function(){return new Promise(function(e,t){i.fileLoader.load(a,e)})};this.loadWithStorage(a,l,o)}},{key:"_onTaskFinished",value:function(){var e=this.model;this.loadTaskCount++;var t=this.dealProgressSegment(e,this.loadTaskCount);if(this.notifyProgress){var i={total:this.maxLoadTaskCount,loaded:t};this.progressCallback&&this.progressCallback(i)}this.loadTaskCount>=this.maxLoadTaskCount&&(this.dataLoaded=!0,this.textruesLoaded&&this.finishCallback&&this.finishCallback())}},{key:"_onLoadTexture",value:function(){++this.loadTextureCount>=this.maxLoadTextureCount&&(this.textruesLoaded=!0,this.pkgTextureMap=null,this.pkgTextureArrayBufferMap=null,this.textureManager=null,this.dataLoaded&&this.finishCallback&&this.finishCallback())}},{key:"_loadScene",value:function(e){var t=this,i=this.model,r=this.url,n=this.fileLoader,a=r.sceneUrl(e),o=function(i){t._parseScene(i,e),t._onTaskFinished()},l=function(e){i.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_SCENE_ERROR,event:e}),t._onTaskFinished()},u=function(){return new Promise(function(e,t){n.setResponseType("arraybuffer"),n.load(a,e,void 0,t)})};this.loadWithStorage(a,u,o,l)}},{key:"_parseScene",value:function(e,t){var i=new s.Loader.SceneReader(e);this.descriptor.mapSceneReader[t]=i,i=null}},{key:"_loadLine",value:function(){var e=this,t=this.model,i=this.url,r=this.fileLoader,n=i.lineUrl(),a=function(t){e._parseLine(t),e._onTaskFinished()},o=function(i){t.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MATERIAL_ERROR,event:i}),e._onTaskFinished()},l=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(n,e,void 0,t)})};this.loadWithStorage(n,l,a,o)}},{key:"_parseLine",value:function(e){for(var t=new s.Loader.LineReader(e),i=0,r=t.header.lineCount;i<r;++i){var n=t.getPtBuffer(i),a=t.getIdxBuffer(i);if(void 0!=n&&void 0!=a){var o=t.getLineData(i);if(0===o.lineType){for(var l=[],u=1,c=a.length;u<c;u++)l.push(a[u-1]),l.push(a[u]);l.length&&(a=l)}this.descriptor.cacheReferencedMeshBufferData("line-"+o.line_id,{P:n,I:a})}else s.Logger.log("Error Geometry!")}t=null}},{key:"_loadMaterial",value:function(e){var t=this,i=this.model,r=this.url,n=this.fileLoader,a=r.materialUrl(),o=function(i){t._parseMaterial(i,e),t._onTaskFinished()},l=function(e){i.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MATERIAL_ERROR,event:e}),t.textruesLoaded=!0,t._onTaskFinished()},u=function(){return new Promise(function(t,i){e?n.setResponseType(""):n.setResponseType("arraybuffer"),n.load(a,t,void 0,i)})};this.loadWithStorage(a,u,o,l)}},{key:"_parseMaterial",value:function(e,t){t?this._parseMaterialJson(e):this._parseMaterialBinary(e)}},{key:"_parseMaterialBinary",value:function(e){var t,i=this.url,r=this.model.materialManager,n=r.materials,a=r.textures,o=new s.Loader.MaterialReader(e),l=o.materialCount,u=this,c=[];if(!(l<0)){var h=this.model.manager.scene;for(t=0;t<l;++t){var d={},f=o.getMaterial(t);void 0!==f.color&&(d.color=f.color),void 0!==f.opacity&&(d.opacity=f.opacity,f.opacity<1&&(d.transparent=!0)),void 0!==f.side&&f.side&&(d.side=THREE.DoubleSide),void 0!==f.emissive&&(d.emissive=f.emissive),void 0!==f.environment&&(d.envMapIntensity=f.environment),void 0!==f.roughness&&(d.roughness=f.roughness,d.originRoughness=f.roughness),void 0!==f.metalness&&(d.metalness=f.metalness,d.originMetalness=f.metalness);var p;if(s.GlobalData.IBL?(d.iblProbe=h.iblProbe,p=new w.IBLMaterial(d),p.type="IBL"):p=s.MaterialUtil.createStandardMaterial(d),p.name=t,n[t]=p,d=null,s.GlobalData.EnableTextureLoading){var m=f.texture_n,v=null;m>0&&(v=o.getTexture(f.texture_id[0])),v&&c.push({id:t,data:v})}}if(c.length>0){for(l=this.maxLoadTextureCount=c.length,t=0;t<l;t++)this._parseTexture(i,c[t],a);c=null}if(this.model.lightmap){var g=this.model.lightmapNum;for(this.maxLoadTextureCount+=g,t=0;t<g;t++){var y=this._loadTexture(i.textureUrl("lightmap-rgbm"+t+".png"),function(){u._onLoadTexture()},void 0,function(){u._onLoadTexture()});r.lightmaps[t]=y}}0==this.maxLoadTextureCount&&u._onLoadTexture(),o=null}}},{key:"_parseMaterialJson",value:function(e){var t,i=this,r=this.url,n=this.model.materialManager,a=n.materials,o=(n.textures,new s.Loader.MaterialReaderJson(e)),l=o.count,u=this,c={};if(!(l<0)){var h=this.model.manager.scene;for(t=0;t<l;++t){var d={},f=o.getMaterial(t),p=f.parameters;if(void 0!==p.color&&(d.color=p.color),void 0!==p.opacity&&(d.opacity=p.opacity,p.opacity<1&&(d.transparent=!0)),void 0!==p.side&&"double"==p.side&&(d.side=THREE.DoubleSide),void 0!==p.emissive&&(d.emissive=p.emissive),void 0!==p.environment&&(d.envMapIntensity=p.environment),void 0!==p.roughness&&(d.roughness=p.roughness,d.originRoughness=p.roughness),void 0!==p.metalness&&(d.metalness=p.metalness,d.originMetalness=p.metalness),void 0!==p.refractionRatio&&(d.refractionRatio=p.refractionRatio),void 0!==p.imageFade&&(d.imageFade=p.imageFade),void 0!=f.fillPattern){d.fillMap=this._loadFillMap(f.fillPattern);var m=this.model.getModelManager().viewer.domElement;d.viewportSize=new THREE.Vector2(m.offsetWidth,m.offsetHeight)}"user"==f.tag&&(d.tag="user"),void 0!=f.receiveIBL&&(d.receiveIBL=f.receiveIBL);var v;if(s.GlobalData.IBL?(d.iblProbe=h.iblProbe,v=new w.IBLMaterial(d),v.type="IBL"):(v=s.MaterialUtil.createStandardMaterial(d),v.refreshUniforms()),v.name=t,a[t]=v,d=null,s.GlobalData.EnableTextureLoading){var g=[],y=f.textures;for(var M in y){var E=y[M];"reliefMap"==M&&y.bumpMap||g.push({type:M,data:E})}g.length>0&&(c[t]=g)}}if(n.handlerUrl=r,n.textureDataArray=c,Object.keys(c).length>0&&(this.maxLoadTextureCount++,n.updateTexturePkgMapping(void 0,function(){i._onLoadTexture()})),this.model.lightmap){var b=this.model.lightmapNum;for(this.maxLoadTextureCount+=b,t=0;t<b;t++){var x=this._loadTexture(r.lightmapTexUrl("lightmap-rgbm"+t+".png"),function(){u._onLoadTexture()},void 0,function(){u._onLoadTexture()});n.lightmaps[t]=x}}0==this.maxLoadTextureCount&&u._onLoadTexture(),o=null}}},{key:"_loadTexture",value:function(e,t,i,r){var n,a=THREE.Loader.Handlers.get(e),o=this;if(null!==a)n=a.load(e,t);else{n=new THREE.Texture;var l=function(e){var i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").putImageData(e,0,0),n.image=s.MaterialUtil.ensurePowerOfTwo(i),n.needsUpdate=!0,t&&t(n)},u=function(e){void 0!==r&&r(e),o.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_TEXTURE_ERROR,event:e})},c=function(){return new Promise(function(t,r){a=new THREE.ImageLoader,a.setCrossOrigin("anonymous"),a.load(e,function(e){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");r.drawImage(e,0,0),t(r.getImageData(0,0,i.width,i.height))},i,r)})};this.loadWithStorage(e,c,l,u)}return n}},{key:"_loadFillMap",value:function(e){var t,i=[],r=s.FILLPATTERN[e];if(!r)return t;for(var n=0;n<1024;n++){var a=r[Math.floor(n/8)],o=Math.floor(Math.pow(2,n%8));a=Math.floor(a&o),0==a?(i.push(0),i.push(0),i.push(0)):(i.push(255),i.push(255),i.push(255))}return t=new THREE.DataTexture(new Uint8Array(i),32,32,THREE.RGBFormat,THREE.UnsignedByteType),t.minFilter=THREE.NearestFilter,t.magFilter=THREE.NearestFilter,t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.needsUpdate=!0,t}},{key:"_parseTexture",value:function(e,t,i){var r=window.TEST||{},n=t.id,a=t.data,o=a.id+a.file_name_ext,s=this.model.materialManager;this.enableCompressedTexture&&a.dds?this.textureLoader=s._loadCompressedTexture:this.textureLoader=r.CryptoResourceLoader?s._loadTextureByCrypto:s._loadTexture;var l=this;this.textureLoader(e.textureUrl(o),function(e){e.repeat.fromArray([a.scale_u,a.scale_v]),e.offset.fromArray([a.offset_u,a.offset_v]),e.setRotateAngle&&e.setRotateAngle(a.angle),a.repeat_u&&(e.wrapS=THREE.RepeatWrapping),a.repeat_v&&(e.wrapT=THREE.RepeatWrapping),e&&(i[n]=e),l._onLoadTexture()},void 0,function(){l._onLoadTexture()})}},{key:"_loadUV2",value:function(){var e=this,t=this,i=this.url,r=this.fileLoader;!function(){var n=i.uv2Url(),a=function(e){t.uv2Buffer=new Uint16Array(e),t._onTaskFinished()},o=function(e){t._onTaskFinished()},s=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(n,e,void 0,t)})};e.loadWithStorage(n,s,a,o)}();!function(){var n=i.uv2MapItemUrl(),a=function(e){t.uv2MapItem=JSON.parse(e),t._onTaskFinished()},o=function(e){t._onTaskFinished()},s=function(){return new Promise(function(e,t){r.setResponseType(""),r.load(n,e,void 0,t)})};e.loadWithStorage(n,s,a,o)}()}},{key:"getUV2ById",value:function(e,t){if(this.uv2MapItem&&t){var i=this.uv2MapItem[e];if(i){var r=i.uv1Scale,n=i.uv1Translation,a=i.uv1ByteOffset/2,o=2*t;if(this.uv2Buffer){for(var s=this.uv2Buffer,l=[],u=a;u<a+o;u+=2)l.push(r[0]*(s[u]/65535)+n[0]),l.push(r[1]*(s[u+1]/65535)+n[1]);return{lightmapIdx:i.lightmapIdx,uv2:l}}}}}},{key:"getInstanceUV2InfoById",value:function(e){if(this.uv2MapItem){var t=this.uv2MapItem[e];if(t){var i=t.uv1Scale,r=t.uv1Translation,n=[];return n.push(i[0]),n.push(i[1]),n.push(r[0]),n.push(r[1]),{lightmapIdx:t.lightmapIdx,byteOffset:t.uv1ByteOffset,offsetRepeat:n}}}}},{key:"getInstanceUV2ById",value:function(e,t){var i=e/2;if(this.uv2Buffer){return this.uv2Buffer.slice(i,i+t)}}},{key:"_loadSymbol",value:function(e){var t=this,i=this.url,r=this.fileLoader,n=i.symbolUrl(),a=function(i){t.parseSymbol(i),t._onTaskFinished(),e&&e()},o=function(i){t.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_SYMBOL_ERROR,event:i}),t._onTaskFinished(),e&&e()},l=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(n,e,void 0,t)})};this.loadWithStorage(n,l,a,o)}},{key:"parseSymbol",value:function(e){this.descriptor.symbolReader=new s.Loader.SymbolReader(e)}},{key:"_loadOctree",value:function(e,t){var i=null,r=this.model.configLoader.transformInfos.transformMatrix;this.model.configLoader.transformInfos.octreeTransformed&&(i=new THREE.Matrix4,i.getInverse(r)),e&&this._loadOctreeBy(i,!1),t&&this._loadOctreeBy(i,!0)}},{key:"_loadOctreeBy",value:function(e,t){var i,r=this,n=this.url,a=this.fileLoader;i=t?n.octreeUrl("i"):n.octreeUrl("o");var o=i,l=function(i){r._parseOctree(i,e,t),r._onTaskFinished()},u=function(e){r.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_OCTREEINNER_ERROR,event:e}),r._onTaskFinished()},c=function(){return new Promise(function(e,t){a.setResponseType("arraybuffer"),a.load(o,e,void 0,t)})};this.loadWithStorage(o,c,l,u)}},{key:"_parseOctree",value:function(e,t,i){this.descriptor.octreeRootNode[i?"inner":"outer"]=this._getOctreeRootNode(e,t)}},{key:"_getOctreeRootNode",value:function(e,t){function i(e,i){t&&i.boundingBox.applyMatrix4(t),e.boundingBoxWorld=i.boundingBox.clone(),e.min=i.boundingBox.min,e.max=i.boundingBox.max,e.center=i.boundingBox.getCenter(),e.size=i.boundingBox.getSize().lengthSq(),e.childStart=i.child_s,e.childEnd=i.child_e}function r(e,t){e.octType=0,e.center.x<t.center.x&&(e.octType+=1),e.center.y<t.center.y&&(e.octType+=2),e.center.z<t.center.z&&(e.octType+=4)}function n(e,t){for(var a=e.childStart,o=e.childEnd,l=a;l<o;++l){var u=t.getNode(l),c=u.cell_id,h=new s.Loader.OctreeNode(c,e.depth);i(h,u),e.add(h),r(h,e),h.updateMaxDepth(),n(h,t)}}var a=null,o=new s.Loader.OctreeReader(e);if(o.getCount()>0){var l=o.getNode(0),u=l.cell_id;a=new s.Loader.OctreeNode(u,0),i(a,l),n(a,o)}return o=null,a}},{key:"_loadUserId",value:function(){var e=this,t=this.url,i=this.fileLoader,r=t.userIdUrl(),n=function(t){e._parseUserId(t),e._onTaskFinished()},a=function(t){e.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_USERID_ERROR,event:t}),e._onTaskFinished()},o=function(){return new Promise(function(e,t){i.setResponseType("arraybuffer"),i.load(r,e,void 0,t)})};this.loadWithStorage(r,o,n,a)}},{key:"_parseUserId",value:function(e){this.descriptor.userIdReader=new s.Loader.IdReader(e)}},{key:"_loadUserData",value:function(){var e=this,t=this.url,i=this.fileLoader,r=t.userDataUrl(),n=function(t){e._parseUserData(t),e._onTaskFinished()},a=function(t){e.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_USERDATA_ERROR,event:t}),e._onTaskFinished()},o=function(){return new Promise(function(e,t){i.setResponseType(""),i.load(r,e,void 0,t)})};this.loadWithStorage(r,o,n,a)}},{key:"_parseUserData",value:function(e){this.descriptor.userDataReader=new s.Loader.UserDataReader(e)}},{key:"_loadCamera",value:function(){var e=this,t=this.url,i=this.fileLoader,r=t.cameraUrl(),n=function(t){e._parseCamera(t),e._onTaskFinished()},a=function(t){e.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_CAMERA_ERROR,event:t}),e._onTaskFinished()},o=function(){return new Promise(function(e,t){i.setResponseType(""),i.load(r,e,void 0,t)})};this.loadWithStorage(r,o,n,a)}},{key:"_parseCamera",value:function(e){var t=this.model.configLoader.transformInfos.transformMatrix;new s.Loader.CameraReader(e).parse(this.model,t)}},{key:"_loadMpk",value:function(e,t){var i=this,r=this.fileLoader,n=this.url,a=n.mpkUrl(e),o=function(r){i._parseMpk(r,e),t(),i._onTaskFinished()},l=function(e){i.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MPK_ERROR,event:e}),i._onTaskFinished()},u=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(a,e,void 0,t)})};this.loadWithStorage(a,u,o,l)}},{key:"_loadAllMpks",value:function(e){for(var t=0;t<e;++t)this.mpkTaskManager.addTask(t);this.mpkTaskManager.processTasks(this._loadMpk.bind(this))}},{key:"_parseMpk",value:function(e,t){for(var i=this.model.getConfig().metadata.mpk_batched?s.Loader.BMPKReader:s.Loader.MPKReader,r=new i(e),n=new THREE.Matrix4,a=0,o=r.header.meshCount;a<o;++a){var l=r.getPtBuffer(a),u=r.getIdxBuffer(a),c=r.getNormalBuffer(a),h=r.getMeshData(a),d=r.getUVBuffer(a);void 0!=l&&void 0!=u?(void 0!==h.baseScale&&0!==h.baseScale&&(l=new Float32Array(l),n.identity(),n.setPosition(new THREE.Vector3(h.baseX,h.baseY,h.baseZ)),n.scale(new THREE.Vector3(h.baseScale,h.baseScale,h.baseScale)),s.GeomUtil.applyMatrix4ToBuffer(n,l)),this.descriptor.cacheReferencedMeshBufferData(h.mesh_id,{P:l,I:u,N:c,UV:d}),this.descriptor.cacheReferencedMeshMpkIds(t,h.mesh_id)):s.Logger.log("Error Geometry!")}r=null}},{key:"_loadBorderline",value:function(e){var t=this,i=this.url,r=this.fileLoader,n=e?i.borderLineUrl(1):i.borderLineUrl(0),a=n,o=function(i){t._parseBorderLine(i,e),t._onTaskFinished()},l=function(e){t.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MATERIAL_ERROR,event:e}),t._onTaskFinished()},u=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(a,e,void 0,t)})};this.loadWithStorage(a,u,o,l)}},{key:"_parseBorderLine",value:function(e,t){for(var i=new s.Loader.LineReader(e),r=[],n=0,a=i.header.lineCount;n<a;++n){var o=i.getLineData(n);r.push({meshId:o.line_id,positionStart:o.ptOffset/4,positionCount:3*o.ptCount,indexStart:o.idxOffset/4,indexCount:o.idxCount})}this.descriptor.cacheBorderLine(t,{P:i.ptBuffer,I:i.idxBuffer,IndexInfos:r}),i=null}},{key:"_isLoadMpkBorderlines",value:function(){var e=this.model.getConfig().metadata;return!(!s.GlobalData.BorderLineBatched||!e.outline_mpk)}},{key:"getAllBorderlineCount",value:function(){var e=this.model.getConfig().metadata;return this._isLoadMpkBorderlines()?e.outline_mpk:e.outline_0+e.outline_1}},{key:"_loadAllBorderlines",value:function(e){this._isLoadMpkBorderlines()?e.outline_mpk&&this._loadAllMpkBorderLines(e.outline_mpk):(e.outline_0&&this._loadBorderline(!1),e.outline_1&&this._loadBorderline(!0))}},{key:"delayLoadBorderlines",value:function(e){this._isLoadMpkBorderlines()?this._delayLoadMpkBorderlines(e):this._delayLoadTogetherBorderlines(e)}},{key:"_delayLoadMpkBorderlines",value:function(e){var t=this.model.getConfig().metadata;this.startCallback=null,this.progressCallback=null,this.finishCallback=e,this.loadTaskCount=0,this.maxLoadTaskCount=t.outline_mpk,t.outline_mpk&&this._loadAllMpkBorderLines(t.outline_mpk)}},{key:"_delayLoadTogetherBorderlines",value:function(e){var t=this.model.getConfig().metadata;this.startCallback=null,this.progressCallback=null,this.finishCallback=e,this.loadTaskCount=0,this.maxLoadTaskCount=t.outline_0+t.outline_1,t.outline_0&&this._loadBorderline(!1),t.outline_1&&this._loadBorderline(!0)}},{key:"_loadAllMpkBorderLines",value:function(e){this.mpkBorderLineTaskManager||(this.mpkBorderLineTaskManager=new s.TaskManager);for(var t=0;t<e;++t)this.mpkBorderLineTaskManager.addTask(t);this.mpkBorderLineTaskManager.processTasks(this._loadMpkBorderLine.bind(this))}},{key:"_loadMpkBorderLine",value:function(e,t){var i=this,r=this.fileLoader,n=this.url,a=this.model.getConfig().metadata,o=a.mpk_shared_index,s=e>=o,l=n.mpkBorderLineUrl(e),u=function(e){i._parseMpkBorderLine(e,s),t(),i._onTaskFinished()},c=function(e){i._onTaskFinished()},h=function(){return new Promise(function(e,t){r.setResponseType("arraybuffer"),r.load(l,e,void 0,t)})};this.loadWithStorage(l,h,u,c)}},{key:"_parseMpkBorderLine",value:function(e,t){for(var i=new s.Loader.LineReader(e),r=[],n=0,a=i.header.lineCount;n<a;++n){var o=i.getLineData(n);r.push({meshId:o.line_id,positionStart:o.ptOffset/4,positionCount:3*o.ptCount,indexStart:o.idxOffset/4,indexCount:o.idxCount})}this.descriptor.cacheBorderLine(t,{P:i.ptBuffer,I:i.idxBuffer,IndexInfos:r}),i=null}},{key:"dealProgressSegment",value:function(e,t){return s.GlobalData.BatchMergeEnabled?t*e.progressPercentage.load:t}}]),e}();s.ModelView.BaseLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=null,i}return _inherits(t,e),_createClass(t,[{key:"loadSceneAndMpks",value:function(e){e.symbol&&this._loadSymbol(),this._loadScene(0),e.lines&&this._loadLine(),e.mpks&&this._loadAllMpks(e.mpks),s.GlobalData.BorderLineDelayLoaded||this._loadAllBorderlines(e)}},{key:"getSceneTaskCount",value:function(e){var t=e.scenes;return t+=e.symbol,t+=e.lines,t+=e.mpks,s.GlobalData.BorderLineDelayLoaded||(t+=this.getAllBorderlineCount()),t}}]),t}(s.ModelView.BaseLoader);s.ModelView.DefaultBaseLoader=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.model=t,this.defaultManager=null,this.instancedManager=null,this.loader=null,this.loaded=!1,this.dataReady=!1,this.borderlinesLoaded=!1,this.borderlinesGenerated=!1}return _createClass(e,[{key:"destroy",value:function(){this.model=null,this.defaultManager.destroy(),this.defaultManager=null,this.instancedManager.destroy(),this.instancedManager=null,this.loader&&(this.loader.destroy(),this.loader=null)}},{key:"load",value:function(e){var t=this,i=this.model;this.loader.setNotifyProgress(e),this.loader.load(function(){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START})},function(e){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:e})},function(){console.time("PrepareData:"),t.prepareData(function(){console.timeEnd("PrepareData:"),t.processLoadCompleted(function(){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:i.id})})})})}},{key:"processLoadCompleted",value:function(e){var t=this.model;t.materialManager._updateTextureMapping(),t.materialManager._updateIBL(t),t.updateOctreeNode();var i=t.getFilter(),r=t.manager.getNodeInfos();i.initFilterManager(r),requestAnimationFrame(function(){t.setLoaded(!0),e&&e(),t.updateMeshNodes(),t.applyFilter(),t.debut(t)})}},{key:"prepareData",value:function(e){if(!this.dataReady){var t=this;this.loader.getDescriptor().parseItemData(function(){t.dataReady=!0,t.settleData(e)})}}},{key:"prepareWireframe",value:function(e,t){if(e.isActivateWireframe())if(s.GlobalData.BorderLineDelayLoaded&&this.loader.getAllBorderlineCount())if(this.borderlinesLoaded)this.borderlinesGenerated&&(this.defaultManager.asyncGenerateWireframe(e),this.instancedManager.generateWireframe(e));else{this.borderlinesLoaded=!0;var i=this;this.loader.delayLoadBorderlines(function(){i.instancedManager.generateWireframe(e),i.defaultManager.asyncGenerateWireframe(e,function(){console.log("Delay loading borderline OK!"),i.borderlinesGenerated=!0,t&&t()})})}else this.defaultManager.generateWireframe(e),this.instancedManager.generateWireframe(e)}},{key:"prepare",value:function(e){}},{key:"needUpdate",value:function(){return!0}},{key:"updateNodes",value:function(){this.needUpdate()&&(this.defaultManager.updateNodes(this.model),s.GlobalData.Instance&&this.instancedManager.updateNodes(this.model))}},{key:"isLoaded",value:function(){return this.loaded}},{key:"isDataReady",value:function(){return this.loaded}},{key:"isAllReady",value:function(){return!0}},{key:"isHidden",value:function(){var e=this.model;return!e.visible&&(e.manager.scene.removeObjectGroupByName(e._getWireframeGroupName()),!0)}},{key:"settleData",value:function(e){}},{key:"addNodeInfoToOctantMap",value:function(){}},{key:"applyFilter",value:function(){this.isLoaded()&&(this.defaultManager.applyFilter(this.model),s.GlobalData.Instance&&this.instancedManager.applyFilter(this.model))}},{key:"applySelection",value:function(){this.isLoaded()&&(this.defaultManager.applySelection(this.model),s.GlobalData.Instance&&this.instancedManager.applySelection(this.model))}},{key:"clearSelection",value:function(){this.isLoaded()&&(this.defaultManager.clearSelection(this.model),s.GlobalData.Instance&&this.instancedManager.clearSelection(this.model))}},{key:"applyHover",value:function(){this.isLoaded()&&(this.defaultManager.applyHover(this.model),s.GlobalData.Instance&&this.instancedManager.applyHover(this.model))}},{key:"clearHover",value:function(){this.isLoaded()&&(this.defaultManager.clearHover(this.model),s.GlobalData.Instance&&this.instancedManager.clearHover(this.model))}},{key:"applyBlink",value:function(){this.isLoaded()&&(this.defaultManager.applyBlink(this.model),s.GlobalData.Instance&&this.instancedManager.applyBlink(this.model))}},{key:"clearBlink",value:function(){this.isLoaded()&&(this.defaultManager.clearBlink(this.model),s.GlobalData.Instance&&this.instancedManager.clearBlink(this.model))}},{key:"applyReplacement",value:function(){this.isLoaded()&&(this.defaultManager.applyReplacement(this.model),s.GlobalData.Instance&&this.instancedManager.applyReplacement(this.model))}},{key:"getMeshesByUserIds",value:function(e,t){this.isLoaded()&&(this.defaultManager.getMeshesByUserIds(this.model,e,t),s.GlobalData.Instance&&(this.instancedManager.getMeshesByUserId(this.model,e),this.instancedManager.getMeshesByUserId(this.model,t)))}},{key:"rebuildIndicesforLightmap",value:function(){this.defaultManager.rebuildIndices(this.model)}},{key:"adjustVisibility",value:function(e){this.defaultManager.adjustVisibility(this.model,e)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){this.defaultManager.changeVisibilityOfSelectedObjects(this.model,e)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){this.defaultManager.changeVisibilityOfNonSelectedObjects(this.model,e)}},{key:"adjustInstanceVisibility",value:function(e){this.instancedManager.adjustVisibility(this.model,e)}},{key:"changeInstanceVisibilityOfSelectedObjects",value:function(e){this.instancedManager.changeVisibilityOfSelectedObjects(this.model,e)}},{key:"changeInstanceVisibilityOfNonSelectedObjects",value:function(e){this.instancedManager.changeVisibilityOfNonSelectedObjects(this.model,e)}},{key:"restoreVisibilityOfObjects",value:function(){this.defaultManager.restoreVisibilityOfObjects(),this.instancedManager.restoreVisibilityOfObjects()}},{key:"getBlinkMaterials",value:function(){var e=[],t=this.model.materialManager.instanceMaterials;for(var i in t)for(var r=t[i],n=0,a=r.length;n<a;n++)e.push(r[n]);return e=e.concat(this.defaultManager.meshManager.getBlinkMaterials())}},{key:"disposeBufferAfterVbo",value:function(){this.isLoaded()&&(this.defaultManager.disposeBufferAfterVbo(),this.instancedManager.disposeBufferAfterVbo())}},{key:"getGeometryBuffersByUserId",value:function(e){if(!this.isLoaded())return[];var t=[];return t=t.concat(this.defaultManager.getGeometryBuffersByUserId(this.model,e)),t=t.concat(this.instancedManager.getGeometryBuffersByUserId(this.model,e))}},{key:"explode",value:function(){this.isLoaded()&&(this.defaultManager.explode(this.model),s.GlobalData.Instance&&this.instancedManager.explode(this.model))}},{key:"calculateClippingIds",value:function(e){if(this.isLoaded()&&s.GlobalData.BatchMergeEnabled){if(e){var t=this.model.getModelDescriptor().getStandardUserIds(),i=this.model.getModelDescriptor().getStandardNodeInfos();if(this.defaultManager._collectFilteredUserIds(this.model,t,i),s.GlobalData.Instance){var r=this.model.getModelDescriptor().getInstancedUserIds(),n=this.model.getModelDescriptor().getInstancedNodeInfos();this.instancedManager._collectFilteredUserIds(this.model,r,n)}}var a=s.FillClipPlaneManager.getInstance(this.model.manager.scene),o=a.renderClipPlane;this.defaultManager.calculateClippingIds(o,a.capsIntersectPosition),s.GlobalData.Instance&&this.instancedManager.calculateClippingIds(o,a.capsIntersectPosition),a.addToCapsWireframe(this.model)}}},{key:"calculateClippingContours",value:function(e){var t=this.model.manager.scene,i=s.FillClipPlaneManager.getInstance(t),r=i.planeMesh,n=i.renderClipPlane,a=s.FillClipPlaneManager.getFillClipPlaneBoundingBoxWorld(t),o=this.model.id;i.capsIntersectContour[o]={},this.defaultManager.calculateClippingContours(o,n,r,a,e,i.capsIntersectContour),s.GlobalData.Instance&&this.instancedManager.calculateClippingContours(o,n,r,a,e,i.capsIntersectContour)}},{key:"isHiddenNode",value:function(e){return this.defaultManager.isHiddenNode(e)||this.defaultManager.isHiddenNode(e)}}]),e}();s.ModelView.ModelBaseHandler=e}(),function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"parseItemData",value:function(e){var t=this.getSceneReaderMap();for(var i in t)for(var r=t[i],n=0,a=r.header.cellCount;n<a;++n)for(var o=r.getCellInfo(n),s=o.itemIndex;s<o.itemCount;++s)this._readItemData(r,s,n);e&&e()}},{key:"asyncParseItemData",value:function(e){for(var t=this.getSceneReaderMap(),i=Object.keys(t),r=i.length,n=0,a=this,o=0;o<r;o++){var l=(i[o],t[i[o]]);s.Utils.asyncProcess(l,l.header.cellCount,100,function(e,t){a._parseItemDataBy(e,t)},function(){++n===r&&e&&e()})}}},{key:"_parseItemDataBy",value:function(e,t){for(var i=e.getCellInfo(t),r=i.itemIndex;r<i.itemCount;++r)this._readItemData(e,r,t)}},{key:"parseItemDataByCellId",value:function(e){var t=this.getSceneReaderMap();for(var i in t)this._parseItemDataBy(t[i],e)}},{key:"_readItemData",value:function(e,t,i){var r=e.getItemInfo(t);void 0!==r&&(r.type===s.ModelView.BaseDescriptor.EnumNodeItemType.SYMBOL?this._readSymbolInfo(e,i,r):this._readMeshInfo(e,i,r,null))}},{key:"_readSymbolInfo",value:function(e,t,i){var r=this.symbolReader;if(r){var n=r.header.symbolCount,a=i.toData,o=e.getMatrixInfo(i.matrixId).matrix.clone(),l={matrix:o,ItemId:i.ItemId,originalId:i.originalId,userDataId:i.userDataId,materialId:i.materialId};if(a>=0&&a<n)for(var u=r.getSymbolInfo(a),c=u.itemIndex;c<u.itemCount;++c){var h=r.getItemInfo(c);h.type!==s.ModelView.BaseDescriptor.EnumNodeItemType.SYMBOL&&this._readMeshInfo(r,t,h,l)}o=null,l=null,r=null}}},{key:"_readMeshInfo",value:function(e,t,i,r){var n,a,o;null===r?(n=i.userDataId,a=i.originalId,o=i.materialId):(n=r.userDataId,a=r.originalId,o=r.materialId>-1?r.materialId:i.materialId);var l=null,u=s.ModelView.BaseDescriptor.EnumNodeItemType;switch(i.type){case u.MESH:l=this._getMeshNodeAttr(e,i,r);break;case u.TUBE:l=this._getMeshNodeAttrOfTube(e,i,r);break;case u.PIPE:l=this._getMeshNodeAttrOfPipe(e,i,r);break;case u.BOX:l=this._getMeshNodeAttrOfBox(e,i,r);break;case u.BOX_M:l=this._getMeshNodeAttrOfBoxM(e,i,r);break;case u.PIPE_M:l=this._getMeshNodeAttrOfPipeM(e,i,r);break;case u.MESH_REF:l=this._getMeshNodeAttrOfMeshRef(e,i,r);break;case u.LINE:l=this._getLineNodeAttr(e,i,r)}if(l){if(l.userId=this.userIdReader?this.userIdReader.getString(a):a,l.userData=this.userDataReader?this.userDataReader.getUserData(n):null,l.name=l.userId,l.type=i.type,l.cellId=t,l.materialId=o,l.state=s.EnumObjectState.Visible,l.material=null,this.lightmap){var c=i.ItemId;r&&(c=r.ItemId+"_"+i.ItemId),l.itemIdUV2=c}l.parameterizedDesc=this._isParameterizedNode(l),this._isGeometrySharedNode(l)&&(void 0===this.sharedGeometryCounter[l.geometryId]&&(this.sharedGeometryCounter[l.geometryId]=0),this.sharedGeometryCounter[l.geometryId]+=1),this.fullNodeInfoArray.push(l),l=null}}},{key:"_getMeshNodeAttrOfPipe",value:function(e,t,i){var r=e.getMatrixInfo(t.matrixId).matrix.clone();i&&r.multiplyMatrices(i.matrix,r);var n=t.boundingBox.clone();n.applyMatrix4(r);var a=e.getGeomPipeInfo(t.toData),o=a.startPt,l=a.endPt,u=new THREE.Vector3;u.subVectors(l,o);var c=u.length();u.normalize();var h=a.radius;h<=1&&(h=100);var d=new THREE.Vector3(0,1,0),f=new THREE.Vector3(h,c,h),p=(new THREE.Quaternion).setFromUnitVectors(d,u),m=o.clone().addScaledVector(u,.5*c),v=(new THREE.Matrix4).compose(m,p,f);r.multiply(v),a=null;var g=s.ModelView.BaseDescriptor.parameterizedNodeType.PIPE;return{nodeId:(i?i.ItemId+"_"+t.ItemId:t.ItemId)+"_"+g,geometryId:g,boundingBox:n,matrix:r}}},{
key:"_getMeshNodeAttrOfTube",value:function(e,t,i){var r=s.ModelView.BaseDescriptor.parameterizedNodeType.TUBE,n=this._getMeshNodeAttrOfPipe(e,t,i);return n.nodeId+="_"+r,n.geometryId=r,n}},{key:"_getMeshNodeAttrOfBox",value:function(e,t,i){var r=e.getMatrixInfo(t.matrixId).matrix.clone();i&&r.multiplyMatrices(i.matrix,r);var n=t.boundingBox.clone();n.applyMatrix4(r);var a=t.boundingBox,o=a.getSize(),l=a.getCenter(),u=(new THREE.Matrix4).scale(new THREE.Vector3(o.x,o.y,o.z));u.setPosition(l),r.multiply(u);var c=s.ModelView.BaseDescriptor.parameterizedNodeType.BOX;return{nodeId:(i?i.ItemId+"_"+t.ItemId:t.ItemId)+"_"+c,geometryId:c,boundingBox:n,matrix:r}}},{key:"_getMeshNodeAttrOfBoxM",value:function(e,t,i){var r=e.getMatrixInfo(t.matrixId).matrix.clone();i&&r.multiplyMatrices(i.matrix,r);var n=t.boundingBox.clone();n.applyMatrix4(r);var a=s.ModelView.BaseDescriptor.parameterizedNodeType.BOX_M;return{nodeId:(i?i.ItemId+"_"+t.ItemId:t.ItemId)+"_"+a,geometryId:a,boundingBox:n,matrix:r,uvArrayBuffer:e.getGeomBoxUvInfo(t.toData)}}},{key:"_getMeshNodeAttrOfPipeM",value:function(e,t,i){var r=e.getMatrixInfo(t.matrixId).matrix.clone();i&&r.multiplyMatrices(i.matrix,r);var n=t.boundingBox.clone();n.applyMatrix4(r);var a=s.ModelView.BaseDescriptor.parameterizedNodeType.PIPE_M;return{nodeId:(i?i.ItemId+"_"+t.ItemId:t.ItemId)+"_"+a,geometryId:a,boundingBox:n,matrix:r,uvArrayBuffer:e.getGeomPipeUvInfo(t.toData)}}},{key:"_getMeshNodeAttrOfMeshRef",value:function(e,t,i){var r=e.getMatrixInfo(t.matrixId).matrix.clone();i&&r.multiplyMatrices(i.matrix,r);var n=t.boundingBox.clone();return n.applyMatrix4(r),{nodeId:"refMesh|"+(i?i.ItemId+"_"+t.ItemId:t.ItemId),geometryId:t.toData,boundingBox:n,matrix:r}}},{key:"_getMeshNodeAttr",value:function(e,t,i){var r,n=t.boundingBox.clone();return-1!==t.matrixId?(r=e.getMatrixInfo(t.matrixId).matrix.clone(),i&&r.multiplyMatrices(i.matrix,r),n.applyMatrix4(r)):(r=new THREE.Matrix4,i&&n.applyMatrix4(i.matrix)),{nodeId:i?i.ItemId+"_"+t.ItemId:t.ItemId,geometryId:t.toData,boundingBox:n,matrix:r}}},{key:"_getLineNodeAttr",value:function(e,t,i){var r,n=t.boundingBox.clone();return-1!==t.matrixId?(r=e.getMatrixInfo(t.matrixId).matrix.clone(),i&&r.multiplyMatrices(i.matrix,r),n.applyMatrix4(r)):(r=new THREE.Matrix4,i&&n.applyMatrix4(i.matrix)),{nodeId:i?"line-"+i.ItemId+"-"+t.ItemId:"line-"+t.ItemId,geometryId:"line-"+t.toData,boundingBox:n,matrix:r}}}]),t}(s.ModelView.BaseDescriptor);s.ModelView.DefaultDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.DefaultDescriptor,i}return _inherits(t,e),t}(s.ModelView.DefaultBaseLoader);s.ModelView.DefaultLoader=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=null,this.wireframeManager=null}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null}},{key:"clearData",value:function(){this.meshManager.clearData(),this.wireframeManager.clearData()}},{key:"getGeometryByNodeInfo",value:function(e,t){return this.meshManager.getGeometryByNodeInfo(e,t)}},{key:"getInstanceGeometries",value:function(){return this.meshManager.instanceGeometryMap}},{key:"traverseInstanceGeometryMap",value:function(e){this.meshManager.traverseInstanceGeometryMap(e)}},{key:"getCachedInstanceData",value:function(){return this.meshManager.cachedInstance}},{key:"getBufferAttributesBy",value:function(e){return this.meshManager.getBufferAttributesBy(e)}},{key:"traverseNodeIdxMapByUserId",value:function(e,t){this.meshManager.traverseNodeIdxMapByUserId(e,t)}},{key:"traverseNodeIdxMap",value:function(e,t){this.meshManager.traverseNodeIdxMap(e,t)}},{key:"getMeshesByUserId",value:function(e,t){this.meshManager.getMeshesByUserId(e,t)}},{key:"_updateInstanceMaterialByUserId",value:function(e,t,i,r){this.meshManager.updateInstanceStateByUserId(e,t,i,r)}},{key:"_updateInstanceClippingByUserId",value:function(e){this.meshManager.updateInstanceClippingByUserId(e)}},{key:"_updateInstanceMaterialForWireFrameByUserId",value:function(e,t,i,r){this.wireframeManager.updateInstanceWireframeByUserId(e,t,i,r)}},{key:"_updateInstanceWireframeClippingByUserId",value:function(e){this.wireframeManager.updateInstanceWireframeClippingByUserId(e)}},{key:"_updateInstanceMaterial",value:function(e){s.Logger.time("update instance material");var t=s.Model.EnumFilterState;this.clearSelectedObjectIds();var i=null,r=e.getFilter();if(r&&(i=r.getLocalClippingList()),i)for(var n in i)this._updateInstanceClippingByUserId(n),this._updateInstanceWireframeClippingByUserId(n);for(var n in this.filteredIds){var a=this.filteredIds[n];if(a[t.HIDDEN])this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.HIDDEN),this._updateInstanceMaterialForWireFrameByUserId(e,n,s.EnumInstanceState.HIDDEN);else if(a[t.TRANSPARENT])this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.TRANSPARENT);else{if(e.manager.isSelectPriority()){if(a[t.SELECTED]){s.GlobalData.PickingEffect?a[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.OVERRIDED,a[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.SELECTED);continue}if(a[t.BLINK]){a[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.BLINK,a[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.BLINK);continue}}else{if(a[t.BLINK]){a[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.BLINK,a[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.BLINK);continue}if(a[t.SELECTED]){s.GlobalData.PickingEffect?a[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.OVERRIDED,a[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.SELECTED);continue}}a[t.HOVER]?a[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.HOVER,a[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.HOVER):a[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,n,s.EnumInstanceState.OVERRIDED,a[t.OVERRIDED])}}this._updateInstanceMaterialForWireFrame(e),s.Logger.timeEnd("update instance material")}},{key:"_updateInstanceMaterialForWireFrame",value:function(e){var t=this.mapFilteredUserIdsForWireFrame;if(t)for(var i=Object.keys(t),r=0,n=i.length;r<n;r++){var a=i[r];this.filteredIds&&this.filteredIds[a]&&this.filteredIds[a][s.Model.EnumFilterState.HIDDEN]||this._updateInstanceMaterialForWireFrameByUserId(e,a,s.EnumInstanceState.OVERRIDED,t[a])}}},{key:"_resetInstanceMaterial",value:function(e,t){this.meshManager.resetInstanceMaterial(e),this.wireframeManager.resetInstanceMaterial(t)}},{key:"_collectFilteredUserIds",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter(),a=r._hasVisibleFilter(),o=r._hasOverrideMaterialFilter(),l=r._hasTransparentFilter(),u=e.hasReplacedUserId(),c=e.hasHiddenSourceObjectUserId(),h=this.filteredIds={};if(n||a||o||l||u||c)for(var d=s.Model.EnumFilterState,f=0;f<t.length;++f){var p=t[f],m=i[p];if(m&&m.length){var v=m[0];if(n&&r._isHiddenFileId(v)||a&&!1===r._isVisible(v)||e.isReplacedUserId(p)||e.isHiddenSourceObjectUserId(p))h[p]||(h[p]={}),h[p][d.HIDDEN]=!0;else if(l&&r._isTransparent(v))h[p]||(h[p]={}),h[p][d.TRANSPARENT]=!0;else if(o&&r._hasOverrideMaterial(v)){var g=r._getOverrideMaterial(v),y=null!=g?g.name:"";""!==y&&(h[p]||(h[p]={}),h[p][d.OVERRIDED]=y)}else;}}}},{key:"_collectFilteredUserIdsForWireFrame",value:function(e,t,i){var r=e.getFilter(),n=r._hasOverrideMaterialFilterForWireFrame();if(this.mapFilteredUserIdsForWireFrame={},n)for(var a=s.Model.EnumFilterState,o=0;o<t.length;++o){var l=t[o];if(!(this.filteredIds&&this.filteredIds[l]&&this.filteredIds[l][a.HIDDEN])){var u=i[l];if(u&&u.length){var c=u[0];if(r._hasOverrideMaterialForWireFrame(c)){var h=r._getOverrideMaterialForWireFrame(c),d=null!=h?h.name:"";""!==d&&(this.mapFilteredUserIdsForWireFrame[l]=d)}}}}}},{key:"_collectSelectedUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{},r=s.Model.EnumFilterState,n={};for(var a in e)t[a]&&(i[a]||(i[a]={}),i[a][r.SELECTED]=!0,n[a]=!0);this.selectedUserIds=Object.keys(n)}},{key:"_clearSelectedState",value:function(e){if(this.filteredIds&&this.selectedUserIds&&this.selectedUserIds.length){for(var t=0,i=this.selectedUserIds.length;t<i;t++){var r=this.selectedUserIds[t];this.filteredIds[r]&&(this.meshManager.clearInstanceStateByUserId(r),delete this.filteredIds[r][s.Model.EnumFilterState.SELECTED])}this.selectedUserIds=null}}},{key:"_collectHoveredUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{};this.hoverdUserId=void 0,e&&t[e]&&(i[e]||(i[e]={}),i[e][s.Model.EnumFilterState.HOVER]=!0,this.hoverdUserId=e)}},{key:"_clearHoveredState",value:function(e){this.filteredIds&&this.hoverdUserId&&this.filteredIds[this.hoverdUserId]&&(this.meshManager.clearInstanceStateByUserId(this.hoverdUserId),delete this.filteredIds[this.hoverdUserId][s.Model.EnumFilterState.HOVER],this.hoverdUserId=void 0)}},{key:"_collectBlinkedUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{},r=s.Model.EnumFilterState,n={};for(var a in e)t[a]&&(i[a]||(i[a]={}),i[a][r.BLINK]=!0,n[a]=!0);this.blinkUserIds=Object.keys(n)}},{key:"_clearBlinkedState",value:function(e){if(this.filteredIds&&this.blinkUserIds&&this.blinkUserIds.length){for(var t=0,i=this.blinkUserIds.length;t<i;t++){var r=this.blinkUserIds[t];this.filteredIds[r]&&(this.meshManager.clearInstanceStateByUserId(r),delete this.filteredIds[r][s.Model.EnumFilterState.BLINK])}this.blinkUserIds=null}}},{key:"applyFilter",value:function(e,t){if(this.hasNodeInfo(e)){this.updateNodes(e),this._resetInstanceMaterial(e.isAllMaterialChanged?e.materialManager.instanceMaterials:null,e),e.isAllMaterialChanged=!1;var i;i=t||e.getModelDescriptor().getInstancedUserIds();var r=e.getModelDescriptor().getInstancedNodeInfos();this._collectFilteredUserIds(e,i,r),this._collectFilteredUserIdsForWireFrame(e,i,r),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,r),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),r),this._collectHoveredUserIds(e.manager.sceneState.hoverId,r),this._updateInstanceMaterial(e)}}},{key:"applySelection",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearSelectedState(e),this._clearHoveredState(e),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearSelection",value:function(e){this._clearSelectedState(e),this.applyHover(e)}},{key:"applyHover",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearHoveredState(e),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearHover",value:function(e){this._clearHoveredState(e),this._updateInstanceMaterial(e),this.updateNodes(e)}},{key:"applyBlink",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearBlinkedState(e),this._clearHoveredState(e),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearBlink",value:function(e){this._clearBlinkedState(e),this.applyHover(e)}},{key:"applyReplacement",value:function(e){this._updateInstanceMaterial(e),this.updateNodes(e)}},{key:"hasNodeInfo",value:function(e){return!!e.getModelDescriptor().getInstancedNodeInfos()}},{key:"updateNodes",value:function(e){this.hasNodeInfo(e)&&(this.meshManager.updateNodes(e),this.wireframeManager.updateNodes(e))}},{key:"generateWireframe",value:function(e,t){this.wireframeManager.generateWireframe(e,t)}},{key:"createMeshNodes",value:function(e,t){this.meshManager.createMeshNodes(e,t)}},{key:"asyncCreateMeshNodes",value:function(e,t,i){this.meshManager.asyncCreateMeshNodes(e,t,i)}},{key:"clearCachedData",value:function(){this.meshManager.disposeGeometries()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"clearSelectedObjectIds",value:function(){this.meshManager.clearSelectedObjectIds()}},{key:"adjustVisibility",value:function(e,t){this.meshManager.adjustVisibility(e,t),this.wireframeManager.adjustVisibility(e,t)}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfSelectedObjects(e,t)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfNonSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfNonSelectedObjects(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){this.meshManager.restoreVisibilityOfObjects(),this.wireframeManager.restoreVisibilityOfObjects()}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"addAllInstanceNodeToScene",value:function(e){this.meshManager.addAllInstanceNodeToScene(e)}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"explode",value:function(e){this.meshManager.explode(e)}},{key:"calculateClippingIds",value:function(e,t){this.meshManager.calculateClippingIds(e,t)}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a){this.meshManager.calculateClippingContours(e,t,i,r,n,a)}},{key:"isPickableNode",value:function(e){if(!this.filteredIds||!this.filteredIds[e])return!0;var t=this.filteredIds[e],i=s.Model.EnumFilterState;return!t[i.HIDDEN]&&!t[i.TRANSPARENT]}},{key:"isHiddenNode",value:function(e){return!!(this.filteredIds&&this.filteredIds[e]&&this.filteredIds[e][s.Model.EnumFilterState.HIDDEN])}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}}]),e}();s.ModelView.InstancedBaseManager=e}(),function(){function e(e,t,i){for(var r=e.getAttribute("vState").array,n=0,a=t.length;n<a;++n)r[t[n]]=i;e.getAttribute("vState").needsUpdate=!0}function t(t,i,r){t.forEach(function(t){e(t.geometry,i,r)})}function i(e,t,i,r){for(var n=e.getAttribute("vState").array,a=e.getAttribute("aColor"),o=a?a.array:null,s=0,l=t.length;s<l;++s){var u=t[s];n[u]=i,null!==o&&null!==r&&(o[4*u]=r[0],o[4*u+1]=r[1],o[4*u+2]=r[2],o[4*u+3]=r[3])}e.getAttribute("vState").needsUpdate=!0,a&&(a.needsUpdate=!0)}function r(e,t,r,n){e.forEach(function(e){i(e.geometry,t,r,n)})}function n(e,t,i){e.forEach(function(e){var r=e.geometry.getAttribute("vState");if(r.array.fill(t),r.needsUpdate=!0,i){var n=i[e.material.name];e.material=e.material.transparent?n[1]:n[0]}})}var a=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.manager=e,t.instanceGeometryMap={},t.bufferAttributeMap={},t.instanceNodeMap={},t.nodeIdxMapFromUserId={},t.matrixInfoMapFromUserId={},t.cachedInstance={vState:{},vClipping:{},vColor:{},mcol0:{},mcol1:{},mcol2:{},mcol3:{},muvCol0:{},muvCol1:{},muvCol2:{},uv2OffsetRepeat:{},uv2:{}},t.selectedMeshes=[],t.nonSelectedMeshes=[],t.selectedObjectIds=[],t.meshesVisible=!0,t}return _inherits(i,e),_createClass(i,[{key:"destroy",value:function(){if(_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this.cachedInstance=null,this.instanceNodeMap=null,this.bufferAttributeMap=null,this.nodeIdxMapFromUserId=null,this.matrixInfoMapFromUserId=null,this.disposeInstanceGeometries(),this.instanceGeometryMap=null,this.manager=null,this.selectedMeshes=null,this.nonSelectedMeshes=null,this.selectedObjectIds=null,this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}}},{key:"clearData",value:function(){if(this.bufferDestroyed=!1,this.disposeGeometries(),this.disposeInstanceGeometries(),this.clearInstanceCache(),this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData()}},{key:"clearInstanceCache",value:function(){this.cachedInstance.vState={},this.cachedInstance.vClipping={},this.cachedInstance.vColor={},this.cachedInstance.mcol0={},this.cachedInstance.mcol1={},this.cachedInstance.mcol2={},this.cachedInstance.mcol3={},this.cachedInstance.muvCol0={},this.cachedInstance.muvCol1={},this.cachedInstance.muvCol2={},this.cachedInstance.uv2OffsetRepeat={},this.cachedInstance.uv2={},this.bufferAttributeMap={},this.nodeIdxMapFromUserId={},this.instanceNodeMap={},this.instanceGeometryMap={},this.matrixInfoMapFromUserId={},this.geometries={}}},{key:"updateNodes",value:function(e){this.meshesVisible=!e.isOnlyWireframe();var t=this._getNodeGroup(e);this.meshesVisible?t._adjustActivated||(t.visible=!0):t.visible=!1}},{key:"createMeshNodes",value:function(e,t){this._collectSharedMeshBufferIds(e),this._createInstanceGeometries(e,t),this._makeInstanceNodes(e)}},{key:"asyncCreateMeshNodes",value:function(e,t,i){if(0===t.length)return void(i&&i());var r=this,n=s.GlobalData.InstanceAsyncProcessingStep;this._collectSharedMeshBufferIds(e),s.Utils.asyncProcess(t,t.length,n,function(t,i){r._createInstanceGeometries(e,[t[i]])},function(){r._makeInstanceNodes(e),i&&i()})}},{key:"_createInstanceGeometries",value:function(e,t){var i=this;e.getModelDescriptor().traverseInstancedNodeInfos(t,function(t,r){for(var n=0,a=r.length;n<a;n++){var o=r[n],s=i.getGeometryByNodeInfo(e,o),l=e.manager.getOverrideMaterialByNodeInfo(o,e.materialManager.getMaterialById(o.materialId));if(l&&(o.materialId=l.name),e.lightmap){var u=e.getLoader().getInstanceUV2InfoById(o.itemIdUV2);o.uv2Info=u,o.materialId=o.uv2Info?o.materialId+"_"+o.uv2Info.lightmapIdx:o.materialId}var c=i.getMeshIdByNodeInfo(o),h=i.cacheInstanceAttributeStateBy(e,c,s,o,l);i.cacheNodeIdxByUserId(o.userId,c,h),i.cacheMatrixInfoByUserId(o.userId,c,{matrix:o.matrix,boundingBox:o.boundingBox}),i.cacheInstanceGeometries(c,s,o.uv2Info,e)}})}},{key:"getBufferAttributesBy",value:function(e){if(this.bufferAttributeMap[e])return this.bufferAttributeMap[e];var t=this.cachedInstance,i=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol0[e]),3,1),r=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol1[e]),3,1),n=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol2[e]),3,1),a=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol3[e]),3,1),o=[],s=[],l=[];if(t.muvCol0[e])for(var u=0,c=t.muvCol0[e].length;u<c;u++)o.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol0[e][u]),2,1)),s.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol1[e][u]),2,1)),l.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol2[e][u]),2,1));var h=new THREE.InstancedBufferAttribute(new Float32Array(t.uv2OffsetRepeat[e]),4,1);new THREE.BufferAttribute(t.uv2[e],2);return this.bufferAttributeMap[e]={attributeMcol0:i,attributeMcol1:r,attributeMcol2:n,attributeMcol3:a,attributeMuvCol0Array:o,attributeMuvCol1Array:s,attributeMuvCol2Array:l,attributeUv2OffsetRepeat:h},this.bufferAttributeMap[e]}},{key:"_addInstanceNodeToScene",value:function(e,t,i){this._getNodeGroup(e).add(i),i.updateMatrixWorld(!0),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),t,new s.InstancedCapsuleObject(t,i))}},{key:"addAllInstanceNodeToScene",value:function(e){var t=e.getEncodedDatabagId();this.traverseInstanceNodeMap(null,function(i,r){var n=r[0],a=r[1],o=void 0,l=void 0;for(o=0,l=n.length;o<l;++o)e.manager.addMeshToOctantMap(t,i,new s.InstancedCapsuleObject(i,n[o]));for(o=0,l=a.length;o<l;++o)e.manager.addMeshToOctantMap(t,i,new s.InstancedCapsuleObject(i,a[o]))})}},{key:"_getMeshFrom",value:function(e,t,i,r,n,a,o){i.addAttribute("mcol0",o.attributeMcol0),i.addAttribute("mcol1",o.attributeMcol1),i.addAttribute("mcol2",o.attributeMcol2),i.addAttribute("mcol3",o.attributeMcol3),o.attributeMuvCol0Array.length>0&&(i.addAttribute("muvCol0",o.attributeMuvCol0Array[r]),i.addAttribute("muvCol1",o.attributeMuvCol1Array[r]),i.addAttribute("muvCol2",o.attributeMuvCol2Array[r])),e.lightmap&&i.addAttribute("uv2OffsetRepeat",o.attributeUv2OffsetRepeat),i.addAttribute("aColor",new THREE.InstancedBufferAttribute(new Float32Array(a.vColor[t]),4,1)),i.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(a.vState[t]),1,1)),i.addAttribute("vClipping",new THREE.InstancedBufferAttribute(new Float32Array(a.vClipping[t]),1,1)),i.getAttribute("vClipping").array.fill(e.localClippingMode?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE);var l=new s.MeshEx(i,n);return l.alive=!0,l.databagId=e.databagId,l.frustumCulled=!1,s.GlobalData.EnableShadowMap&&(l.customDepthMaterial=e.manager.getInstanceDepthMaterial(),l.castShadow=e.castShadow,l.receiveShadow=e.receiveShadow),l}},{key:"_cloneMeshFrom",value:function(e,t){var i=e.geometry,r=new THREE.InstancedBufferGeometry;r.addAttribute("position",i.getAttribute("position")),r.addAttribute("normal",i.getAttribute("normal")),i.getAttribute("uv")&&r.addAttribute("uv",i.getAttribute("uv")),i.getAttribute("uv2")&&r.addAttribute("uv2",i.getAttribute("uv2")),r.addAttribute("mcol0",i.getAttribute("mcol0")),r.addAttribute("mcol1",i.getAttribute("mcol1")),r.addAttribute("mcol2",i.getAttribute("mcol2")),r.addAttribute("mcol3",i.getAttribute("mcol3")),r.addAttribute("mcol0",i.getAttribute("mcol0")),r.addAttribute("mcol1",i.getAttribute("mcol1")),r.addAttribute("mcol2",i.getAttribute("mcol2")),r.addAttribute("mcol3",i.getAttribute("mcol3")),i.getAttribute("muvCol0")&&(r.addAttribute("muvCol0",i.getAttribute("muvCol0")),r.addAttribute("muvCol1",i.getAttribute("muvCol1")),r.addAttribute("muvCol2",i.getAttribute("muvCol2"))),i.getAttribute("uv2OffsetRepeat")&&r.addAttribute("uv2OffsetRepeat",i.getAttribute("uv2OffsetRepeat")),r.addAttribute("aColor",i.getAttribute("aColor")),r.addAttribute("vClipping",i.getAttribute("vClipping")),r.addAttribute("vState",i.getAttribute("vState").clone()),r.setIndex(i.getIndex());var n=new s.MeshEx(r,t);return n.alive=e.alive,n.databagId=e.databagId,n.frustumCulled=e.frustumCulled,e.customDepthMaterial&&(n.customDepthMaterial=e.customDepthMaterial,n.castShadow=e.castShadow,n.receiveShadow=e.receiveShadow),n}},{key:"_makeInstanceNodeById",value:function(e,t,i){var r=e.materialManager,a=this.getMaterialIdByMeshId(t),o=r.getInstanceMaterialById(a,e);if(2!==o.length)return void console.log("instance material error!");var l=this.cachedInstance,u=this.getBufferAttributesBy(t),c=o[0],h=o[1],d=[],f=[],p=void 0,m=i.length;for(p=0;p<m;p++){var v=this._getMeshFrom(e,t,i[p],p,c,l,u);d.push(v),this._addInstanceNodeToScene(e,t,v)}for(p=0;p<m;p++){var g=this._cloneMeshFrom(d[p],h);f.push(g),this._addInstanceNodeToScene(e,t,g)}var y=c._primary,M=s.EnumInstanceState.NONE,E=s.EnumInstanceState.HIDDEN;n(d,y?M:E),n(f,y?E:M),this.instanceNodeMap[t]=[d,f]}},{key:"_makeInstanceNodes",value:function(e){var t=this;this.traverseInstanceGeometryMap(function(i,r){t._makeInstanceNodeById(e,i,r)})}},{key:"resetInstanceMaterial",value:function(e){var t=s.EnumInstanceState.NONE,i=s.EnumInstanceState.HIDDEN;this.traverseInstanceNodeMap(null,function(r,a){var o=a[0],s=a[1],l=!!o[0].material._primary;n(o,l?t:i,e),n(s,l?i:t,e)})}},{key:"clearInstanceStateByUserId",value:function(e){var i=this,r=s.EnumInstanceState.NONE,n=s.EnumInstanceState.HIDDEN;this.traverseNodeIdxMapByUserId(e,function(e,a){var o=i.getInstanceNodesById(e),s=o[0],l=o[1],u=!!s[0].material._primary;t(s,a,u?r:n),t(l,a,u?n:r)})}},{key:"updateInstanceStateByUserId",value:function(e,i,n,a){var o=e.materialManager,l=this;this.traverseNodeIdxMapByUserId(i,function(u,c){var h=l.getInstanceNodesById(u);if(h){var d=h[0],f=h[1],p=l.getMaterialIdByMeshId(u),m=o.getInstanceMaterialById(p,e),v=m[0],g=m[1],y=!!v._primary,M=l.getOriginalMaterialIdByMeshId(u),E=l.getUsableMaterialColorParamsBy(e,M,n,a),b=E.rgbaColor,x=n,I=s.EnumInstanceState.HIDDEN;if(n===s.EnumInstanceState.TRANSPARENT&&(x=s.EnumInstanceState.OVERRIDED),n===s.EnumInstanceState.SELECTED&&l.cacheSelectedObjectIds(i,u),x===s.EnumInstanceState.BLINK){var T=e.manager.blinkManager.getBlinkColor(e.id);v.setBlinkColor(T),g.setBlinkColor(T)}if(x===s.EnumInstanceState.OVERRIDED&&(g.isOverrideOpacity=E.transparent),y){var w=v.transparent===E.transparent;r(d,c,w?x:I,b),t(f,c,w?I:x)}else{var C=g.transparent===E.transparent;r(f,c,C?x:I,b),t(d,c,C?I:x)}}})}},{key:"updateInstanceClippingByUserId",value:function(e){function t(e,t){for(var i=e.getAttribute("vClipping").array,r=0;r<t.length;++r){i[t[r]]=s.EnumInstanceState.CLIPPING}e.getAttribute("vClipping").needsUpdate=!0}var i=this;this.traverseNodeIdxMapByUserId(e,function(e,r){var n=i.getInstanceGeometries(e);if(n)for(var a=0,o=n.length;a<o;a++)t(n[a],r)})}},{key:"updateInstanceClipping",value:function(e){var t=this,i=e?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;this.traverseNodeIdxMap(function(e,r){var n=t.getInstanceNodesById(e),a=n[0],o=n[1];a.forEach(function(e){for(var t=e.geometry.getAttribute("vClipping").array,n=0,a=r.length;n<a;++n)t[r[n]]=i;e.geometry.getAttribute("vClipping").needsUpdate=!0}),o.forEach(function(e){for(var t=e.geometry.getAttribute("vClipping").array,n=0,a=r.length;n<a;++n)t[r[n]]=i;e.geometry.getAttribute("vClipping").needsUpdate=!0})})}},{key:"getUsableMaterialColorParamsBy",value:function(e,t,i,r){var n,a,o=e.selectedMaterial,l=e.getFilter()._getMaterialByName("scene"),u=e.materialManager,c=e.manager.getOverrideMaterialByName(t),h=c||u.getMaterialById(t);switch(i){case s.EnumInstanceState.HOVER:r?(n=e.getFilter()._getMaterialByName(r),a=e.manager.sceneState.getHoverColorByMaterial(n)):a=e.manager.sceneState.getHoverColorByMaterial(h);break;case s.EnumInstanceState.SELECTED:a=s.MaterialUtil.getColorParamsByMaterial(o);break;case s.EnumInstanceState.TRANSPARENT:a=s.MaterialUtil.getColorParamsByMaterial(l);break;case s.EnumInstanceState.OVERRIDED:case s.EnumInstanceState.BLINK:r?(n=e.getFilter()._getMaterialByName(r),a=s.MaterialUtil.getColorParamsByMaterial(n)):a=s.MaterialUtil.getColorParamsByMaterial(h);break;default:a=s.MaterialUtil.getColorParamsByMaterial(h)}return a}},{key:"getInstanceNodesById",value:function(e){return this.instanceNodeMap[e]}},{key:"traverseInstanceNodeMap",value:function(e,t){var i=this.instanceNodeMap;e=e||Object.keys(this.instanceNodeMap);for(var r=0,n=e.length;r<n;r++){var a=e[r];t(a,i[a])}}},{key:"getInstanceGeometries",value:function(e){return this.instanceGeometryMap[e]}},{key:"cacheInstanceGeometries",value:function(e,t,i,r){if(!this.instanceGeometryMap[e]){var n=this.instanceGeometryMap[e]=[];t instanceof Array||(t=[t]);for(var a=i?i.byteOffset:0,o=0,s=t.length;o<s;++o)if(n[o]=new THREE.InstancedBufferGeometry,n[o].setIndex(t[o].index),n[o].addAttribute("position",t[o].attributes.position),n[o].addAttribute("normal",t[o].attributes.normal),t[o].attributes.uv&&n[o].addAttribute("uv",t[o].attributes.uv),i){var l=2*t[o].index.count,u=r.getLoader().getInstanceUV2ById(a,l);n[o].addAttribute("uv2",new THREE.Float32BufferAttribute(u,2)),a+=2*l}}}},{key:"traverseInstanceGeometryMap",value:function(e){var t=this.instanceGeometryMap;for(var i in t)e(i,t[i])}},{key:"disposeInstanceGeometries",value:function(){this.traverseInstanceGeometryMap(function(e,t){for(var i=0,r=t.length;i<r;i++)t[i].dispose()})}},{key:"cacheInstanceAttributeStateBy",value:function(e,t,i,r,n){var a=r.uv2Info?s.Utils.splitCombinedKeyString(r.materialId,"_")[0]:r.materialId,o=r.uvArrayBuffer;i instanceof Array||(i=[i]);var l=i.length,u=this.cachedInstance;if(!u.vState[t]){u.vState[t]=[],u.vClipping[t]=[],u.vColor[t]=[],u.mcol0[t]=[],u.mcol1[t]=[],u.mcol2[t]=[],u.mcol3[t]=[],u.muvCol0[t]=[],u.muvCol1[t]=[],u.muvCol2[t]=[];for(var c=0;c<l;++c)u.muvCol0[t][c]=[],u.muvCol1[t][c]=[],u.muvCol2[t][c]=[];r.uv2Info&&(u.uv2OffsetRepeat[t]=[])}var h=n||e.materialManager.getMaterialById(a);u.vColor[t].push(h.color.r,h.color.g,h.color.b,h.opacity),u.vState[t].push(0),u.vClipping[t].push(0);var d=r.matrix.elements;if(u.mcol0[t].push(d[0],d[1],d[2]),u.mcol1[t].push(d[4],d[5],d[6]),u.mcol2[t].push(d[8],d[9],d[10]),u.mcol3[t].push(d[12],d[13],d[14]),r.uv2Info){var f=r.uv2Info.offsetRepeat;u.uv2OffsetRepeat[t].push(f[0],f[1],f[2],f[3])}if(o)for(var c=0;c<l;++c)u.muvCol0[t][c].push(o[6*c],o[6*c+1]),u.muvCol1[t][c].push(o[6*c+2],o[6*c+3]),u.muvCol2[t][c].push(o[6*c+4],o[6*c+5]);else for(var c=0;c<l;++c)u.muvCol0[t][c].push(1,0),u.muvCol1[t][c].push(0,1),u.muvCol2[t][c].push(0,0);return u.vState[t].length-1}},{key:"cacheNodeIdxByUserId",value:function(e,t,i){var r=this.nodeIdxMapFromUserId;r[e]||(r[e]={}),r[e][t]||(r[e][t]=[]),r[e][t].push(i)}},{key:"getNodeIdxMapByUserId",value:function(e){return this.nodeIdxMapFromUserId[e]}},{key:"traverseNodeIdxMapByUserId",value:function(e,t){var i=this.nodeIdxMapFromUserId[e];for(var r in i)t(r,i[r])}},{key:"traverseNodeIdxMap",value:function(e,t){for(var i=Object.keys(this.nodeIdxMapFromUserId),r=0,n=i.length;r<n;r++){var a=i[r],o=this.nodeIdxMapFromUserId[a];if(!t||!t(a))for(var s in o)e(s,o[s])}}},{key:"cacheMatrixInfoByUserId",value:function(e,t,i){var r=this.matrixInfoMapFromUserId;r[e]||(r[e]={}),r[e][t]||(r[e][t]=[]),r[e][t].push(i)}},{key:"traverseMatrixInfoMapByUserId",value:function(e,t){var i=this.matrixInfoMapFromUserId[e];for(var r in i)t(r,i[r])}},{key:"getMeshesByUserId",value:function(e,t){var i=this;this.traverseMatrixInfoMapByUserId(t,function(r,n){for(var a=i.getInstanceNodesById(r),o=a[0],s=0,l=n.length;s<l;s++)for(var u=0,c=o.length;u<c;u++){var h={};if(h.matrix=n[s].matrix,h.mesh=o[u],1===c)h.boundingBox=n[s].boundingBox;else{var d=h.mesh.geometry.boundingBox;d?d=d.clone():(h.mesh.geometry.computeBoundingBox(),d=h.mesh.geometry.boundingBox.clone()),d.applyMatrix4(h.matrix),h.boundingBox=d}e.minDistanceObjects[t].push(h)}})}},{key:"_getNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.INSTANCEGEOMETRY,{globalSpace:!0})}},{key:"_hasNodeGroup",value:function(e){return e._hasNodeGroup(s.ObjectGroupType.INSTANCEGEOMETRY)}},{key:"clearSelectedObjectIds",value:function(){this.selectedObjectIds.length=0}},{key:"cacheSelectedObjectIds",value:function(e,t){this.selectedObjectIds.push({uid:e,mgId:t})}},{key:"adjustVisibility",value:function(e,t){if(this.meshesVisible){var i=this._getNodeGroup(e);i._adjustActivated=!t,i.visible!==t&&(i.visible=t)}}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){function i(e,t){for(var i=0,r=e.length;i<r;i++){for(var n=e[i],a=[],o=n.geometry.getAttribute("vState").array,l=0,u=o.length;l<u;l++)o[l]===s.EnumInstanceState.SELECTED&&(a.push({idx:l,state:o[l]}),o[l]=s.EnumInstanceState.HIDDEN);a.length?(n.geometry.getAttribute("vState").needsUpdate=!0,t.push({object:n,indices:a})):(t.push({object:n,indices:null,visibility:n.visible}),n.visible=!1)}}var r=void 0;if(t){r=this.selectedMeshes;for(var n=0,a=r.length;n<a;n++){var o=r[n].object,l=r[n].indices;if(l){if(l.length){for(var u=o.geometry.getAttribute("vState").array,c=0,h=l.length;c<h;c++)l[c].state&&(u[l[c].idx]=l[c].state);o.geometry.getAttribute("vState").needsUpdate=!0}}else o.visible=r[n].visibility}}else{this.selectedMeshes.length=0,r=this.selectedMeshes;for(var d={},f=0,p=this.selectedObjectIds.length;f<p;f++)d[this.selectedObjectIds[f].mgId]=!0;var m=Object.keys(d);this.traverseInstanceNodeMap(m,function(e,t){var n=t[0],a=t[1];i(n,r),i(a,r)})}}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){function i(e,t,i){if(i)for(var r=0,n=e.length;r<n;r++){
for(var a=e[r],o=[],l=a.geometry.getAttribute("vState").array,u=0,c=l.length;u<c;u++)l[u]!==s.EnumInstanceState.SELECTED&&l[u]!==s.EnumInstanceState.HIDDEN&&(o.push({idx:u,state:l[u]}),l[u]=s.EnumInstanceState.HIDDEN);o.length?(a.geometry.getAttribute("vState").needsUpdate=!0,t.push({object:a,indices:o})):(t.push({object:a,indices:null,visibility:a.visible}),a.visible=!1)}else for(var h=0,d=e.length;h<d;h++){var f=e[h];t.push({object:f,indices:null,visibility:f.visible}),f.visible=!1}}var r=void 0;if(t){r=this.nonSelectedMeshes;for(var n=0,a=r.length;n<a;n++){var o=r[n].object,l=r[n].indices;if(l){if(l.length){for(var u=o.geometry.getAttribute("vState").array,c=0,h=l.length;c<h;c++)l[c].state&&(u[l[c].idx]=l[c].state);o.geometry.getAttribute("vState").needsUpdate=!0}}else o.visible=r[n].visibility}}else{this.nonSelectedMeshes.length=0,r=this.nonSelectedMeshes;for(var d={},f=0,p=this.selectedObjectIds.length;f<p;f++)d[this.selectedObjectIds[f].mgId]=!0;this.traverseInstanceNodeMap(null,function(e,t){var n=t[0],a=t[1],o=d[e];i(n,r,o),i(a,r,o)})}}},{key:"restoreVisibilityOfObjects",value:function(){this.selectedMeshes.length=0,this.nonSelectedMeshes.length=0}},{key:"getMeshIdByNodeInfo",value:function(e){return e.uv2Info?s.Utils.getCombinedKeyString([e.materialId,e.geometryId,e.uv2Info.byteOffset]):s.Utils.getCombinedKeyString([e.materialId,e.geometryId])}},{key:"getMaterialIdByMeshId",value:function(e){return s.Utils.splitCombinedKeyString(e)[0]}},{key:"getOriginalMaterialIdByMeshId",value:function(e){var t=s.Utils.splitCombinedKeyString(e);return s.Utils.splitCombinedKeyString(t[0],"_")[0]}},{key:"disposeBufferAfterVbo",value:function(){if(!this.bufferDestroyed){this.bufferDestroyed=!0;var e;s.GlobalData.PickingEffect?e=["muvCol0","muvCol1","muvCol2","uv2OffsetRepeat"]:(e=["muvCol0","muvCol1","muvCol2","uv2OffsetRepeat","mcol0","mcol1","mcol2","mcol3"],s.GlobalData.EnableExplosion&&e.pop()),this.traverseInstanceGeometryMap(function(t,i){for(var r=0,n=i.length;r<n;r++)s.GeomUtil.disposeBufferFromGeometry(i[r],e)})}}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=e.getModelDescriptor().getInstancedNodeInfosById(t);if(!i)return[];for(var r=[],n=e.getDatabagId(),a=s.ModelView.BaseDescriptor.EnumNodeItemType,o=0,l=i.length;o<l;o++){var u,c=i[o];switch(c.type){case a.BOX_M:u=s.GeomUtil.getBoxBufferGeometryWithUvMatrices(c.uvArrayBuffer);break;case a.PIPE_M:u=s.GeomUtil.getPipeBufferGeometryWithUvMatrices(c.uvArrayBuffer);break;default:u=this.getGeometryByNodeInfo(e,c)}var h=s.ModelView.BaseDescriptor.isLineNode(c);if(u instanceof Array)for(var d=0,f=u.length;d<f;d++){var p=u[d].getAttribute("uv");r.push({isLines:h,databagId:n,nodeId:c.nodeId,position:u[d].getAttribute("position").array,index:u[d].getIndex().array,matrix:c.matrix,uv:p?p.array:null})}else{var p=u.getAttribute("uv");r.push({isLines:h,databagId:n,nodeId:c.nodeId,position:u.getAttribute("position").array,index:u.getIndex().array,matrix:c.matrix,uv:p?p.array:null})}}return r}},{key:"explode",value:function(e){function t(e,t,i){for(var r=e.getAttribute("mcol3").array,n=0;n<t.length;++n){var a=t[n];r[3*a]+=i.x,r[3*a+1]+=i.y,r[3*a+2]+=i.z}e.getAttribute("mcol3").needsUpdate=!0}var i=this;for(var r in i.nodeIdxMapFromUserId)i.traverseNodeIdxMapByUserId(r,function(n,a){var o=e.modelExplosion.getExplosionTranslation(r),s=i.getInstanceGeometries(n);s&&t(s[0],a,o)})}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingInstancedMeshGenerator(this)),this.pickingNodeGenerators[e]}},{key:"_traverseIntersectNode",value:function(e,t){var i=this;for(var r in this.nodeIdxMapFromUserId){(function(r){if(i.manager.isHiddenNode(r))return"continue";i.traverseMatrixInfoMapByUserId(r,function(n,a){for(var o=i.getInstanceNodesById(n),s=o[0],l=0,u=a.length;l<u;l++)for(var c=0,h=s.length;c<h;c++)s[c].intersectBoxWithClipPlane(e,a[l])&&t&&t(r,s[c],a[l])})})(r)}}},{key:"_traverseIntersectNodeLimit",value:function(e,t,i){var r=this;for(var n in this.nodeIdxMapFromUserId){(function(n){if(r.manager.isHiddenNode(n))return"continue";r.traverseMatrixInfoMapByUserId(n,function(a,o){for(var s=r.getInstanceNodesById(a),l=s[0],u=0,c=o.length;u<c;u++)for(var h=0,d=l.length;h<d;h++)l[h].intersectBoxWithClipPlane(e,o[u])&&l[h].intersectBoxWithPlaneMesh(t,o[u])&&i&&i(n,l[h],o[u])})})(n)}}},{key:"calculateClippingIds",value:function(e,t){this._traverseIntersectNode(e,function(i,r,n){r.getIntersectionPoints(e,n,t,!0)})}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a){this._traverseIntersectNodeLimit(t,i,function(i,o,s){if(-1!==n.indexOf(i)){var l=[];if(o.getIntersectionContours(t,s,l,!0),0!==l.length){var u=[],c=o.material.color,h={red:parseInt(255*c.r),green:parseInt(255*c.g),blue:parseInt(255*c.b)};l.map(function(e){var t=[];e.map(function(e){r.containsPoint(e)&&t.push(e)}),t.length>0&&u.push(t)}),void 0===a[e][i]?a[e][i]={clippingContours:[u],colors:[h]}:(a[e][i].clippingContours.push(u),a[e][i].colors.push(h))}}})}},{key:"_createGeometryByNodeInfo",value:function(e,t){if(s.ModelView.BaseDescriptor.isParameterizedNode(t))return this._createGeometry(t.type,t.geometryId,null,e.lightmap);var i=void 0!==t.bufferId?t.bufferId:t.geometryId,r=e.getModelDescriptor().getReferencedMeshBufferById(i);if(!r)return null;if(r.IndexInfos){var n=r.IndexInfos[t.indexInfoIdx],a={buffer:r,indexInfo:n};return this._createNodeBufferByMpkBufferData(e,t,a)}return this._createGeometry(t.type,t.geometryId,r,e.lightmap)}},{key:"_collectSharedMeshBufferIds",value:function(e){var t=e.getModelDescriptor().getInstancedNodeInfosOnGeometryId(),i=!1;for(var r in t)if(!s.ModelView.BaseDescriptor.isParameterizedNodeType(r)){i=!0;break}if(i){var n=!1,a=e.getModelDescriptor().getReferencedMeshBufferData();for(var o in t)if(!s.ModelView.BaseDescriptor.isParameterizedNodeType(o)){var l=a[o];if(!l){n=!0;break}}if(n){Object.keys(a).forEach(function(e){var i=a[e],r=i.IndexInfos;if(r)for(var n=0,o=r.length;n<o;n++)!function(i,n){var a=t[r[i].meshId];a&&a.length&&a.forEach(function(t){t.bufferId=e,t.indexInfoIdx=i})}(n)})}}}},{key:"_createNodeBufferByMpkBufferData",value:function(e,t,i){var r=this.createBufferByBufferData(t,i,!1);if(!r)return null;var n=new THREE.BufferGeometry;return n.setIndex(new THREE.BufferAttribute(new Uint32Array(r.index),1)),n.addAttribute("position",new THREE.BufferAttribute(new Float32Array(r.position),3)),r.normal&&n.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(r.normal),3)),r.uv&&n.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(r.uv),2)),this._cacheGeometry(t.geometryId,n),n}}]),i}(s.ModelView.MeshBaseManager);s.ModelView.InstancedMeshManager=a}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.wireframeGeometryMap={},this.noNeedWireframingIdMap={},this.generated=!1,this.meshesVisible=!0}return _createClass(e,[{key:"destroy",value:function(){if(this.disposeGeometries(),this.wireframeGeometryMap=null,this.noNeedWireframingIdMap=null,this.manager=null,this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}}},{key:"clearData",value:function(){if(this.generated=!1,this.bufferDestroyed=!1,this.disposeGeometries(),this.wireframeGeometryMap={},this.noNeedWireframingIdMap={},this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData()}},{key:"disposeGeometries",value:function(){this._traverseWireframeGeometryMap(function(e,t){for(var i=0,r=t.length;i<r;i++)t[i].dispose()})}},{key:"updateNodes",value:function(e){this.meshesVisible=e.isActivateWireframe();var t=this._getNodeGroup(e);this.meshesVisible?t._adjustActivated||(t.updateMatrixWorld(!0),t.visible=!0):t.visible=!1}},{key:"resetInstanceMaterial",value:function(e){var t=s.EnumInstanceState.NONE,i=e.localClippingMode?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;this._traverseWireframeGeometryMap(function(e,r){for(var n=0,a=r.length;n<a;++n){for(var o=r[n].getAttribute("vState").array,s=r[n].getAttribute("vClipping").array,l=0,u=o.length;l<u;l++)o[l]=t,s[l]=i;r[n].getAttribute("vState").needsUpdate=!0,r[n].getAttribute("vClipping").needsUpdate=!0}}),this._updateNoWireframingState()}},{key:"updateInstanceWireframeByUserId",value:function(e,t,i,r){if(i===s.EnumInstanceState.HIDDEN||i===s.EnumInstanceState.NONE||i===s.EnumInstanceState.OVERRIDED){var n;if(r){var a=e.getFilter()._getMaterialByName(r),o=s.MaterialUtil.getColorParamsByMaterial(a);n=o.rgbaColor}var l=this;this.manager.traverseNodeIdxMapByUserId(t,function(e,t){l._setInstanceWireframeState(e,t,i,n)})}}},{key:"updateInstanceWireframeClippingByUserId",value:function(e){var t=this;this.manager.traverseNodeIdxMapByUserId(e,function(e,i){var r=t._getWireframeGeometryById(e);if(r)for(var n=0,a=r.length;n<a;++n){for(var o=r[n].getAttribute("vClipping").array,l=0,u=i.length;l<u;++l){var c=i[l];o[c]=s.EnumInstanceState.CLIPPING}r[n].getAttribute("vClipping").needsUpdate=!0}})}},{key:"updateInstanceWireframeClipping",value:function(e){var t=this,i=e?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;this.manager.traverseNodeIdxMap(function(e,r){var n=t._getWireframeGeometryById(e);if(n)for(var a=0,o=n.length;a<o;++a){for(var s=n[a].getAttribute("vClipping").array,l=0,u=r.length;l<u;++l){var c=r[l];s[c]=i}n[a].getAttribute("vClipping").needsUpdate=!0}})}},{key:"_updateNoWireframingState",value:function(){var e=this,t=s.EnumInstanceState.HIDDEN;this.manager.traverseNodeIdxMap(function(i,r){e._setInstanceWireframeState(i,r,t)},function(t){return e._isNeedWireframing(t)})}},{key:"_setInstanceWireframeState",value:function(e,t,i,r){var n=this._getWireframeGeometryById(e);if(n)for(var a=0,o=n.length;a<o;++a){var s=n[a].getAttribute("vState").array,l=null,u=null;r&&(l=n[a].getAttribute("aColor"),u=l?l.array:null);for(var c=0,h=t.length;c<h;++c){var d=t[c];s[d]=i,null!==u&&(u[4*d]=r[0],u[4*d+1]=r[1],u[4*d+2]=r[2],u[4*d+3]=r[3])}n[a].getAttribute("vState").needsUpdate=!0,l&&(l.needsUpdate=!0)}}},{key:"_generateInstanceWireframe",value:function(e){this._collectNoWireframingIds(e),this._createInstanceWireframeGeometries(),this._makeInstanceWireframe(e),this._updateNoWireframingState()}},{key:"generateWireframe",value:function(e){this.generated||(this._generateInstanceWireframe(e),this.generated=!0)}},{key:"_collectNoWireframingIds",value:function(e){var t=this,i=e.getFilter();e.getModelDescriptor().traverseInstancedNodeInfos(null,function(e,r){r&&i._hasRenderWithBoardlineFilter()&&!i._isRenderWithBoardline(r[0])&&(t.noNeedWireframingIdMap[e]=!0)})}},{key:"_createInstanceWireframeGeometries",value:function(){var e=this,t={};this.manager.traverseInstanceGeometryMap(function(i,r){for(var n=e._getWireframeBufferById(i,r,t),a=e.wireframeGeometryMap[i]=[],o=0,s=n.length;o<s;o++){var l=new THREE.InstancedBufferGeometry;l.setIndex(n[o].index),l.addAttribute("position",n[o].position),a.push(l)}}),t=null}},{key:"_makeInstanceWireframe",value:function(e){var t=this,i=this.manager,r=i.getCachedInstanceData(),n=this._getWireframeMaterial(e),a=e.localClippingMode?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;this._traverseWireframeGeometryMap(function(o,s){for(var l=i.getBufferAttributesBy(o),u=0,c=s.length;u<c;u++){s[u].addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(r.vState[o]),1,1)),s[u].addAttribute("vClipping",new THREE.InstancedBufferAttribute(new Float32Array(r.vClipping[o]),1,1)),s[u].addAttribute("mcol0",l.attributeMcol0),s[u].addAttribute("mcol1",l.attributeMcol1),s[u].addAttribute("mcol2",l.attributeMcol2),s[u].addAttribute("mcol3",l.attributeMcol3);s[u].getAttribute("vClipping").array.fill(a),t._setDefaultColorAttribute(e,s[u],r.vState[o].length);var h=new THREE.LineSegments(s[u],n);h.frustumCulled=!1,t._addWireframeNodeToScene(e,h)}})}},{key:"_setDefaultColorAttribute",value:function(e,t,i){for(var r=this._getWireframeMaterial(e),n=[],a=0;a<i;a++)n.push(r.color.r,r.color.g,r.color.b,r.opacity);t.addAttribute("aColor",new THREE.InstancedBufferAttribute(new Float32Array(n),4,1))}},{key:"_addWireframeNodeToScene",value:function(e,t){this._getNodeGroup(e).add(t),t.updateMatrixWorld(!0)}},{key:"_isNeedWireframing",value:function(e){return!this.noNeedWireframingIdMap||!this.noNeedWireframingIdMap[e]}},{key:"_getWireframeMaterial",value:function(e){return e.getInstanceWireframeMaterial()}},{key:"_getWireframeBufferById",value:function(e,t,i){var r=this.getGeometryIdByMeshId(e);if(i[r])return i[r];i[r]=[];for(var n=0,a=t.length;n<a;n++){var o=t[n];i[r].push({index:s.BuildEdge(o.attributes.position.array,o.index.array),position:o.attributes.position})}return i[r]}},{key:"_getWireframeGeometryById",value:function(e){return this.wireframeGeometryMap[e]}},{key:"_traverseWireframeGeometryMap",value:function(e){var t=this.wireframeGeometryMap;for(var i in t)e(i,t[i])}},{key:"_getNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.INSTANCEWIREFRAMEGEOMETRY,{globalSpace:!0})}},{key:"_hasNodeGroup",value:function(e){return e._hasNodeGroup(s.ObjectGroupType.INSTANCEWIREFRAMEGEOMETRY)}},{key:"getGeometryIdByMeshId",value:function(e){return s.Utils.splitCombinedKeyString(e)[1]}},{key:"adjustVisibility",value:function(e,t){if(this.meshesVisible){var i=this._getNodeGroup(e);i._adjustActivated=!t,i.visible!==t&&(i.visible=t)}}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.adjustVisibility(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"disposeBufferAfterVbo",value:function(){if(this.generated&&!this.bufferDestroyed){this.bufferDestroyed=!0;var e=["mcol0","mcol1","mcol2","mcol3"];s.GlobalData.EnableExplosion&&e.pop(),this._traverseWireframeGeometryMap(function(t,i){for(var r=0,n=i.length;r<n;r++)s.GeomUtil.disposeBufferFromGeometry(i[r],e)})}}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingInstancedWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.InstancedWireframeManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.InstancedMeshManager(e),e.wireframeManager=new s.ModelView.InstancedWireframeManager(e),e}return _inherits(t,e),t}(s.ModelView.InstancedBaseManager);s.ModelView.InstancedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="default",i.defaultManager=null,i.instancedManager=null,i.loader=null,i}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e,t){if(this.isLoaded()&&!this.isHidden()){this.prepareWireframe(this.model,t);var i=this.model.getMaterialManager().lastTextureEnabled;this.model.getMaterialManager()._updateTextureMapping(this.model,t),!this.model.lightmap||this.model.enableLightmap==s.GlobalData.EnableLightmap&&this.model.lightmapIntensity==s.GlobalData.LightmapIntensity&&i==s.GlobalData.EnableTextureMapping||(this.model.enableLightmap=s.GlobalData.EnableLightmap,this.model.lightmapIntensity=s.GlobalData.LightmapIntensity,this.rebuildIndicesforLightmap(),this.updateNodes())}}},{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.addNodeInfoToOctantMap(),this.createMeshNodes(e)}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.loader.getDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"createMeshNodes",value:function(e){var t=this,i=this.model,r=this.loader.getDescriptor();this.instancedManager.createMeshNodes(i,r.getInstancedUserIds()),this.defaultManager.asyncCreateMeshNodes(i,r.getStandardUserIds(),function(){i.getMaterialManager()._updateTextureMapping(),t.clearCachedData(i),t.loaded=!0,e&&e()})}},{key:"clearCachedData",value:function(){this.loader.getDescriptor().destroyReader(),this.loader.getDescriptor().clearReferencedMeshCache(),this.defaultManager.clearCachedData(),this.instancedManager.clearCachedData()}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.BatchedBaseHandler=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=null,this.wireframeManager=null}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null,this._clearFilteredState(),this._clearSelectedState(),this._clearHoveredState(),this._clearBlinkedState()}},{key:"updateNodes",value:function(e){this.meshManager.update(e),this.wireframeManager.update(e)}},{key:"generateWireframe",value:function(e,t){this.wireframeManager.generateWireframe(e,t)}},{key:"asyncGenerateWireframe",value:function(e,t){this.wireframeManager.asyncGenerateWireframe(e,t)}},{key:"rebuildIndices",value:function(e){this._rebuildIndices(e)}},{key:"clearData",value:function(){this.meshManager.clearData(),this.wireframeManager.clearData(),this._clearFilteredState(),this._clearSelectedState(),this._clearHoveredState(),this._clearBlinkedState()}},{key:"createMeshNodes",value:function(e,t){this.meshManager.createMeshNodes(e,t)}},{key:"asyncCreateMeshNodes",value:function(e,t,i){this.meshManager.asyncCreateMeshNodes(e,t,i)}},{key:"hasNodeInfo",value:function(e){return!!e.getModelDescriptor().getStandardNodeInfos()}},{key:"disposeGeometry",value:function(e){this.meshManager.disposeGeometry(e)}},{key:"getMeshNode",value:function(){return this.meshManager.getMeshNode()}},{key:"getPropertyValueByMaterialKey",value:function(e){return this.meshManager.getPropertyValueByMaterialKey(e)}},{key:"getFilteredUserIds",value:function(){return this.mapMaterialIdToUserIdsForFilter}},{key:"getSelectedUserIds",value:function(){return this.mapMaterialIdToUserIdsForSelection}},{key:"getHoveredUserIds",value:function(){return this.mapMaterialIdToUserIdsForHover}},{key:"getBlinkedUserIds",value:function(){return this.mapBlinkUserIds}},{key:"getHiddenUserIds",value:function(){return this.hiddenUserIdSetObject}},{key:"getTransparentUserIds",value:function(){return this.transparentUserIdSetObject}},{key:"applyFilter",value:function(e,t){if(this.hasNodeInfo(e)){var i;i=t||e.getModelDescriptor().getStandardUserIds();var r=e.getModelDescriptor().getStandardNodeInfos();this._collectFilteredUserIds(e,i,r),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,r),this._collectHoveredUserIds(e.manager.sceneState.hoverId,r),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"applySelection",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearSelectedState(e),this._clearHoveredState(e),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearSelection",value:function(e){this._clearSelectedState(e),this.applyHover(e)}},{key:"applyHover",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearHoveredState(e),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearHover",value:function(e){this._clearHoveredState(e),this._rebuildIndices(e),this.updateNodes(e)}},{key:"applyBlink",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearBlinkedState(e),this._clearHoveredState(e),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearBlink",value:function(e){this._clearBlinkedState(e),this.applyHover(e)}},{key:"applyReplacement",value:function(e){this._rebuildIndices(e),this.updateNodes(e)}},{key:"_collectFilteredUserIds",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter(),a=r._hasVisibleFilter(),o=r._hasOverrideMaterialFilter(),l=r._hasTransparentFilter(),u=e.hasReplacedUserId(),c=e.hasHiddenSourceObjectUserId(),h=this.mapMaterialIdToUserIdsForFilter={};if(this.hiddenUserIdSetObject={},this.overrideUserIdSetObject={},this.transparentUserIdSetObject={},n||a||o||l||u||c)for(var d=0;d<t.length;++d){var f=t[d],p=i[f];if(p&&p.length)for(var m=0,v=p.length;m<v;m++){var g=p[m];if(n&&r._isHiddenFileId(g)||a&&!1===r._isVisible(g)||e.isReplacedUserId(f)||e.isHiddenSourceObjectUserId(f))void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.HIDDEN]&&(h[g.materialId][s.Model.EnumFilterState.HIDDEN]={}),h[g.materialId][s.Model.EnumFilterState.HIDDEN][f]=!0,this.hiddenUserIdSetObject[f]=!0;else if(l&&r._isTransparent(g))void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.TRANSPARENT]&&(h[g.materialId][s.Model.EnumFilterState.TRANSPARENT]={}),h[g.materialId][s.Model.EnumFilterState.TRANSPARENT][f]=!0,this.transparentUserIdSetObject[f]=!0;else if(o&&r._hasOverrideMaterial(g)){var y=r._getOverrideMaterial(g),M=null!=y?y.name:"";""!==M&&(void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.OVERRIDED]&&(h[g.materialId][s.Model.EnumFilterState.OVERRIDED]={}),h[g.materialId][s.Model.EnumFilterState.OVERRIDED][f]=M,this.overrideUserIdSetObject[f]=M)}else;}}}},{key:"_clearFilteredState",value:function(){this.mapMaterialIdToUserIdsForFilter=null}},{key:"_collectSelectedUserIds",value:function(e,t){var i=this.mapMaterialIdToUserIdsForSelection={};for(var r in e){var n=t[r];if(n&&n.length)for(var a=0,o=n.length;a<o;a++)void 0===i[n[a].materialId]&&(i[n[a].materialId]={}),void 0===i[n[a].materialId][r]&&(i[n[a].materialId][r]=!0)}}},{key:"_clearSelectedState",value:function(){this.mapMaterialIdToUserIdsForSelection&&(this.mapMaterialIdToUserIdsForSelection=null)}},{key:"_collectHoveredUserIds",value:function(e,t){var i=this.mapMaterialIdToUserIdsForHover={};if(e&&t[e])for(var r=t[e],n=0,a=r.length;n<a;n++)void 0===i[r[n].materialId]&&(i[r[n].materialId]={}),void 0===i[r[n].materialId][e]&&(i[r[n].materialId][e]=!0)}},{key:"_clearHoveredState",value:function(){this.mapMaterialIdToUserIdsForHover&&(this.mapMaterialIdToUserIdsForHover=null)}},{key:"_collectBlinkedUserIds",value:function(e,t){var i=this.mapBlinkUserIds={};for(var r in e){var n=t[r];if(n&&n.length)for(var a=0,o=n.length;a<o;a++)void 0===i[n[a].materialId]&&(i[n[a].materialId]={}),void 0===i[n[a].materialId][r]&&(i[n[a].materialId][r]=!0)}}},{key:"_clearBlinkedState",value:function(){this.mapBlinkUserIds&&(this.mapBlinkUserIds=null)}},{key:"_rebuildIndices",value:function(e){this.meshManager.rebuildIndices(e),this.wireframeManager.rebuildIndices(e)}},{key:"clearCachedData",value:function(){this.meshManager.clearAllNodeBuffer()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"adjustVisibility",value:function(e,t){this.meshManager.adjustVisibility(e,t),this.wireframeManager.adjustVisibility(e,t)}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfSelectedObjects(e,t)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfNonSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfNonSelectedObjects(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){this.meshManager.restoreVisibilityOfObjects(),this.wireframeManager.restoreVisibilityOfObjects()}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"explode",value:function(e){this.meshManager.explode(e),this.wireframeManager.explode(e)}},{key:"isPickableNode",value:function(e){var t=this.getHiddenUserIds();if(t&&t[e])return!1;var i=this.getTransparentUserIds();return!i||!i[e]}},{key:"isHiddenNode",value:function(e){var t=this.getHiddenUserIds();return!(!t||!t[e])}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}}]),e}();s.ModelView.BatchedBaseManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.BatchedDescriptor,i}return _inherits(t,e),t}(s.ModelView.DefaultBaseLoader);s.ModelView.BatchedLoader=e}(),function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),t}(s.ModelView.DefaultDescriptor);s.ModelView.BatchedDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.manager=e,i._maxIndiceseNum=0,i._materialList=[],i.mapMaterialIdToMergedNode={},i.selectedMeshes=[],i.nonSelectedMeshes=[],i.selectedObjectIds=[],i.blinkMaterials=[],i.mapDestroyedBufferKey={},i.mapClippingIds={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.clearData(),this.mapMaterialIdToMergedNode=null,this.manager=null,this._materialList=null,this.selectedMeshes=null,this.nonSelectedMeshes=null,this.selectedObjectIds=null,this.blinkMaterials=null,this.mapDestroyedBufferKey=null,this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}}},{key:"clearData",value:function(){if(this.bufferDestroyed=!1,this.clearAllNodeBuffer(),this._disposeMergedGeometries(),this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData()}},{key:"getMeshesByUserIds",value:function(e,t,i){for(var r in this.mapMaterialIdToMergedNode)for(var n=this.mapMaterialIdToMergedNode[r],a=0,o=n.length;a<o;a++){var s=n[a],l=s.indices;for(var u in l)if(u==t||u==i)for(var c=l[u],h=0,d=c.length;h<d;h++){var f={};f.mesh=s.mesh,f.indexInfo=c[h],f.boundingBox=c[h].boundingBox,e.minDistanceObjects[u].push(f)}}}},{key:"_traverseIntersectNodeLimit",value:function(e,t,i){var r=this.manager.getHiddenUserIds();for(var n in this.mapMaterialIdToMergedNode)for(var a=this.mapMaterialIdToMergedNode[n],o=0,s=a.length;o<s;o++){var l=a[o],u=l.mesh,c=l.indices;for(var h in c)if(!r||!r[h])for(var d=c[h],f=0,p=d.length;f<p;f++)"LineSegmentsEx"!=u.type&&u.intersectBoxWithClipPlane(e,d[f])&&u.intersectBoxWithPlaneMesh(t,d[f])&&i&&i(u,d[f])}}},{key:"_traverseIntersectNode",value:function(e,t){var i=this.manager.getHiddenUserIds();for(var r in this.mapMaterialIdToMergedNode)for(var n=this.mapMaterialIdToMergedNode[r],a=0,o=n.length;a<o;a++){var s=n[a],l=s.mesh,u=s.indices;for(var c in u)if(!i||!i[c])for(var h=u[c],d=0,f=h.length;d<f;d++)"LineSegmentsEx"!=l.type&&l.intersectBoxWithClipPlane(e,h[d])&&t&&t(l,h[d])}}},{key:"calculateClippingIds",value:function(e,t){var i=this;this.mapClippingIds={},this._traverseIntersectNode(e,function(r,n){r.getIntersectionPoints(e,n,t),i.mapClippingIds[n.userId]=!0})}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a){this._traverseIntersectNodeLimit(t,i,function(i,o){var s=o.userId;if(-1!==n.indexOf(s)){var l=[];if(i.getIntersectionContours(t,o,l),0!==l.length){var u=[],c=i.material[0].color,h={red:parseInt(255*c.r),green:parseInt(255*c.g),blue:parseInt(255*c.b)};l.map(function(e){var t=[];e.map(function(e){r.containsPoint(e)&&t.push(e)}),t.length>0&&u.push(t)}),void 0===a[e][s]?a[e][s]={clippingContours:[u],colors:[h]}:(a[e][s].clippingContours.push(u),a[e][s].colors.push(h))}}})}},{key:"rebuildIndices",value:function(e){this._materialList.length=0,this.clearSelectedObjectIds();var t=this.manager.getFilteredUserIds(),i=this.manager.getSelectedUserIds(),r=this.manager.getHoveredUserIds(),n=this.manager.getBlinkedUserIds(),a=this.mapClippingIds,o=!1,l=null,u=e.getFilter();u&&(o=u._hasLocalClipping(),l=u.getLocalClippingList());for(var c in this.mapMaterialIdToMergedNode){var h,d,f,p,m=this.getPropertyValueByMaterialKey(c),v=m.materialId,g=null,y=null,M=null,E=null,b=null,x=null;i&&i[v]&&(E=i[v]),r&&r[v]&&(b=r[v]),n&&n[v]&&(x=n[v]),t&&t[v]&&(g=t[v][s.Model.EnumFilterState.HIDDEN],y=t[v][s.Model.EnumFilterState.OVERRIDED],M=t[v][s.Model.EnumFilterState.TRANSPARENT]);var I=this.mapMaterialIdToMergedNode[c];for(f=0,p=I.length;f<p;f++){var T=I[f],w=(T.mesh,T.indices),C=T.geometry;if(C.clearGroups(),C._visible=!0,E||g||y||b||M||a||o||x){var S=[];for(var A in w)if(w.hasOwnProperty(A)){if(g&&g[A])continue;var k=w[A];if(k&&k.length>0){if(k.sort(function(e,t){return e.indexStart-t.indexStart}),l&&l[A]){var R="localClipping#"+A+"#"+k[0].nodeId;M&&M[A]?R+="#transparent":x&&x[A]?(R+="#blink",y&&y[A]&&(R+="#"+y[A])):b&&b[A]?(R+="#hover",y&&y[A]&&(R+="#"+y[A])):y&&y[A]&&(R+="#override#"+y[A]),this._materialList.push(R);var B=this._materialList.length-1;for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}if(M&&M[A]){for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.TRANSPARENT});continue}if(e.manager.isSelectPriority()){if(E&&E[A]){if(this.cacheSelectedObjectIds(A,c,f),s.GlobalData.PickingEffect){if(y&&y[A]){var L="selected#"+y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.NONE});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.SELECTED});continue}if(x&&x[A]){if(y&&y[A]){var L="blink#"+y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.BLINK});continue}}else{if(x&&x[A]){if(y&&y[A]){var L="blink#"+y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.BLINK});continue}if(E&&E[A]){if(this.cacheSelectedObjectIds(A,c,f),s.GlobalData.PickingEffect){if(y&&y[A]){var L="selected#"+y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,
indexCount:k[h].indexCount,state:s.Model.EnumFilterState.NONE});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.SELECTED});continue}}if(b&&b[A]){if(y&&y[A]){var L="hover#"+y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.HOVER});continue}if(y&&y[A]){var L=y[A],B=this._materialList.indexOf(L);for(-1===B&&(this._materialList.push(L),B=this._materialList.length-1),h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.OVERRIDED+B});continue}if(a[A]){for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:s.Model.EnumFilterState.CLIPPING});continue}for(h=0,d=k.length;h<d;h++)S.push({indexStart:k[h].indexStart,indexCount:k[h].indexCount,state:0})}}if(S.length>0)for(h=0,d=S.length;h<d;h++){var O=S[h].indexStart,P=S[h].indexCount,D=S[h].state;if(0===h)C.addGroup(O,P,D);else{var N=S[h-1].indexStart,_=S[h-1].indexCount,H=S[h-1].state,F=N+_;D===H&&O===F?C.groups[C.groups.length-1].count+=P:C.addGroup(O,P,D)}}else C._visible=!1}}}}},{key:"update",value:function(e){var t,i,r,n,a=e.getFilter(),o=e.materialManager.materials,l=e.selectedMaterial,u=e.manager.sceneState;if(e.isOnlyWireframe())for(var c in this.mapMaterialIdToMergedNode){var h=this.mapMaterialIdToMergedNode[c];for(r=0,n=h.length;r<n;r++){var d=h[r].mesh;d&&(d.visible=!1)}}else{s.GlobalData.TranslucentDepthDisabled&&(l.transparent?l.depthWrite=!1:l.depthWrite=!0);var f=a._getMaterialByName("scene");s.GlobalData.TranslucentDepthDisabled&&(f.depthWrite=!1);var p=[];this.blinkMaterials.length=0;var m={},v=a.getLocalClippingList();for(t=0,i=this._materialList.length;t<i;t++){var g,y=this._materialList[t],M=y.split("#");if("hover"===M[0])g=a._getMaterialByName(M[1]),g=u.getHoverMaterial(g);else if("blink"===M[0])g=a._getMaterialByName(M[1]),g=u.getBlinkMaterial(g,e.id),m[y]||this.blinkMaterials.push(g);else if("localClipping"===M[0]){var E=M[1],b=M[2],x=v[E].nodeMap.get(b),I=a.getMaterialForClipBy(x);if(M[3]&&"transparent"==M[3]){var T=x+M[3];g=a.getMaterialForClipBy(T,I),g.copy(f),g.isOverrideOpacity=g.transparent}else if(M[3]&&"blink"==M[3]){if(M[4]){var T=x+M[3]+M[4];g=a.getMaterialForClipBy(T,I);var w=a._getMaterialByName(M[4]);w=u.getBlinkMaterial(w,e.id),g.copy(w)}else{var T=x+M[3];g=a.getMaterialForClipBy(T,I);var C=u.getBlinkMaterial(g,e.id);g.copy(C)}m[g.name]||this.blinkMaterials.push(g)}else if(M[3]&&"hover"==M[3])if(M[4]){var T=x+M[3]+M[4];g=a.getMaterialForClipBy(T,I);var w=a._getMaterialByName(M[4]);w=u.getHoverMaterial(w),g.copy(w)}else{var T=x+M[3];g=a.getMaterialForClipBy(T,I);var S=u.getHoverMaterial(g);g.copy(S)}else if(M[3]&&"override"==M[3]){var T=x+M[3]+M[4];g=a.getMaterialForClipBy(T,I);var w=a._getMaterialByName(M[4]);g.copy(w),g.isOverrideOpacity=w.transparent}else g=I;g.clippingPlanes=I.clippingPlanes}else g=a._getMaterialByName(y);s.GlobalData.TranslucentDepthDisabled&&(g.transparent?g.depthWrite=!1:g.depthWrite=!0),p[t]=g}for(var c in this.mapMaterialIdToMergedNode){var A=this.getPropertyValueByMaterialKey(c),k=A.materialId,R=e.manager.getOverrideMaterialByName(k),B=R||o[k]||s.MaterialUtil.getDefaultStandardMaterial();s.GlobalData.TranslucentDepthDisabled&&(B.transparent?B.depthWrite=!1:B.depthWrite=!0);var L=u.getHoverMaterial(o[k]);s.GlobalData.TranslucentDepthDisabled&&(L.transparent?L.depthWrite=!1:L.depthWrite=!0);var h=this.mapMaterialIdToMergedNode[c];for(r=0,n=h.length;r<n;r++){var O=h[r],P=O.geometry;if(null!==P){var d=O.mesh;if(P._visible){if(P.groups.length>0){s.GeomUtil.limitGeometryBufferSize(P);var D=m[k];D||(D=m[k]=u.getBlinkMaterial(B,e.id),this.blinkMaterials.push(D));var N=[B,l,D,L,f,void 0];for(t=0,i=p.length;t<i;t++)N.push(p[t]);d.material=N}else s.GeomUtil.limitGeometryBufferSize(P),d.material=P.groups.length?[B]:B;d.visible=!0}else d.visible=!1}}B=null}}}},{key:"explode",value:function(e){for(var t in this.mapMaterialIdToMergedNode)for(var i=this.mapMaterialIdToMergedNode[t],r=0,n=i.length;r<n;r++){var a=i[r],o=a.geometry;if(null!==o){var s=a.indices;for(var l in s){var u=e.modelExplosion.getExplosionTranslation(l),c=s[l];if(c)for(var h=0,d=c.length;h<d;h++){var f=c[h].positionStart,p=f+c[h].positionCount;!function(e,t,i,r){for(var n=e.getAttribute("position").array,a=t;a<i;a+=3)n[a]+=r.x,n[a+1]+=r.y,n[a+2]+=r.z;e.getAttribute("position").needsUpdate=!0}(o,f,p,u)}}}}}},{key:"_getNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.GEOMETRY,{globalSpace:!0})}},{key:"_hasNodeGroup",value:function(e){return e._hasNodeGroup(s.ObjectGroupType.GEOMETRY)}},{key:"_resetMaxIndicesNumberPerBathSegment",value:function(e){s.GlobalData.SegmentedBatchMergeEnable&&s.GlobalData.maxIndicesNumberPerBathSegment<this._maxIndiceseNum&&(console.log("adjust maxIndicesNumberPerBathSegment value from "+s.GlobalData.maxIndicesNumberPerBathSegment+" to "+this._maxIndiceseNum+"!"),s.GlobalData.maxIndicesNumberPerBathSegment=e)}},{key:"asyncCreateMeshNodes",value:function(e,t,i){var r=this;t&&t.length?this._asyncMergeData(e,t,function(){r._makeMeshNodes(e),i&&i()}):i&&i()}},{key:"_asyncMergeData",value:function(e,t,i){function r(f){var p=f;return function(){var f,m;for(m=p+h>c?c:p+h,f=p;f<m;f++){var v=t[f];if(a._collectMergedNodeInfosById(e,v,d,n),f===m-1)if(m!==c){var g={total:o,loaded:(f/c*u+l)*o};e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:g}),requestAnimationFrame(r(f+1))}else{var g={total:o,loaded:(u+l)*o};e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:g}),a._asyncMergeGeometry(n,e,i)}}}}var n={},a=this,o=e.getLoader().maxLoadTaskCount,l=e.progressPercentage.load,u=e.progressPercentage.collect,c=t.length,h=Math.ceil(c/e.progressFrequency),d=e.getModelDescriptor().getStandardNodeInfos();requestAnimationFrame(r(0))}},{key:"_asyncMergeGeometry",value:function(e,t,i){function r(a){var m=a;return function(){var a,v;for(v=m+f>d?d:m+f,a=m;a<v;a++)if(o._collectMergedGeometriesById(n[a],e,p),a===v-1)if(v!==n.length){var g={total:l,loaded:(a/d*h+u+c)*l};t.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:g}),requestAnimationFrame(r(a+1))}else i()}}var n=[];for(var a in e)n.push(a);if(0===n.length)return void i();this._resetMaxIndicesNumberPerBathSegment(this._maxIndiceseNum);var o=this,l=t.getLoader().maxLoadTaskCount,u=t.progressPercentage.load,c=t.progressPercentage.collect,h=t.progressPercentage.merge,d=n.length,f=Math.ceil(d/t.progressFrequency),p=this.mapMaterialIdToMergedNode;requestAnimationFrame(r(0))}},{key:"_collectMergedNodeInfosById",value:function(e,t,i,r){for(var n=i[t],a=0,o=n.length;a<o;a++){var s=n[a];this._createNodeBuffer(e,s);var l=this._getNodeBufferBy(s.nodeId);if(l){var u=l.index;u&&u.length>this._maxIndiceseNum&&(this._maxIndiceseNum=u.length);var c=this._getMaterialKeyByNodeInfo(s,e);void 0===r[c]&&(r[c]=[]),r[c].push(s)}}}},{key:"_collectMergedGeometriesById",value:function(e,t,i){var r=t[e],n=0,a=0,o=0,l=0,u=0,c=null;void 0===i[e]&&(i[e]=[]);var h=[],d=0;r.sort(function(e,t){return e.userId-t.userId});for(var f=0,p=r.length;f<p;f++){var m=r[f];c=this._getNodeBufferBy(m.nodeId),c?(a+=c.index.length,n+=c.position.length,c.normal&&(o+=c.normal.length),c.uv&&(l+=c.uv.length),c.uv2&&(u+=c.uv2.length),s.GlobalData.SegmentedBatchMergeEnable&&a>s.GlobalData.maxIndicesNumberPerBathSegment?(a-=c.index.length,n-=c.position.length,c.normal&&(o-=c.normal.length),c.uv&&(l-=c.uv.length),c.uv2&&(u-=c.uv2.length),h.push({start:d,end:f,arrayPositionLength:n,arrayIndexLength:a,arrayNormalLength:o,arrayUVLength:l,arrayUV2Length:u}),n=0,a=0,o=0,l=0,u=0,d=f,f-=1):f===p-1&&h.push({start:d,end:p,arrayPositionLength:n,arrayIndexLength:a,arrayNormalLength:o,arrayUVLength:l,arrayUV2Length:u}),c=null):f===p-1&&h.push({start:d,end:p,arrayPositionLength:n,arrayIndexLength:a,arrayNormalLength:o,arrayUVLength:l,arrayUV2Length:u})}for(var v=0,g=h.length;v<g;v++){for(var y=h[v],M=new THREE.BufferGeometry,E={},b=new Float32Array(y.arrayPositionLength),x=new Uint32Array(y.arrayIndexLength),I=new Float32Array(y.arrayNormalLength),T=new Float32Array(y.arrayUVLength),w=new Float32Array(y.arrayUV2Length),C=0,S=0,A=0,k=0,R=0,B=[],f=y.start,p=y.end;f<p;f++){var m=r[f];if(c=this._getNodeBufferBy(m.nodeId)){B.push(m.nodeId);var L=c.index,O=c.position,P=c.normal,D=c.uv,N=c.uv2;b.set(O,C);for(var _=Uint32Array.from(L),H=0,F=_.length;H<F;H++)_[H]+=C/3;x.set(_,S),void 0===E[m.userId]&&(E[m.userId]=[]),E[m.userId].push({userId:m.userId,nodeId:m.nodeId,positionStart:C,positionCount:O.length,indexStart:S,indexCount:L.length,lightmapIdx:m.lightmapIdx,boundingBox:m.boundingBox}),S+=L.length,C+=O.length,P&&(I.set(P,A),A+=P.length),D&&(T.set(D,k),k+=D.length),N&&(w.set(N,R),R+=N.length),L=null,O=null,P=null,D=null,N=null,c=null}}this.clearNodeBufferByNodeIds(B),M._visible=!0,M.setIndex(new THREE.BufferAttribute(x,1)),M.addAttribute("position",new THREE.BufferAttribute(b,3)),A>0&&M.addAttribute("normal",new THREE.BufferAttribute(I,3)),k>0&&M.addAttribute("uv",new THREE.BufferAttribute(T,2)),R>0&&M.addAttribute("uv2",new THREE.BufferAttribute(w,2)),i[e].push({geometry:M,indices:E})}}},{key:"clearAllNodeBuffer",value:function(){this.cachedNodeBuffer&&(this.cachedNodeBuffer=null)}},{key:"clearNodeBufferByNodeIds",value:function(e){if(this.cachedNodeBuffer)for(var t=0,i=e.length;t<i;t++)this.cachedNodeBuffer[e[t]]=null}},{key:"_getNodeBufferByNodeInfo",value:function(e,t){return this.cachedNodeBuffer||this._createNodeBuffer(e,t),this.cachedNodeBuffer[t.nodeId]}},{key:"_getNodeBufferBy",value:function(e){return this.cachedNodeBuffer?this.cachedNodeBuffer[e]:null}},{key:"_createNodeBufferByMpkBufferData",value:function(e,t,i){this.cachedNodeBuffer||(this.cachedNodeBuffer={}),this.cachedNodeBuffer[t.nodeId]||(this.cachedNodeBuffer[t.nodeId]=this.createBufferByBufferDataWithUV2(e,t,i))}},{key:"_createNodeBuffer",value:function(e,t){this._createNodeBufferByMpkBufferData(e,t,{buffer:e.getModelDescriptor().getReferencedMeshBufferById(t.geometryId),isDataView:!0})}},{key:"_createGeometries",value:function(e,t){var i=this,r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=e.getModelDescriptor().getReferencedMeshBufferData(),a=this._getClassifiedMeshes(r,n);this._dealDataMergedMeshs(e,a,n,r,function(){i._dealDataMergeableMeshs(e,a,n,r,t)})}},{key:"_getClassifiedMeshes",value:function(e,t){var i={},r={};for(var n in t){var a=t[n],o=a.IndexInfos,l=void 0;if(o){if(o.length<1)continue;for(var u=0,c=o.length;u<c;u++){var h=e[o[u].meshId];if(h&&h.length){l=o[u].meshId;break}}}else{var h=e[n];h&&h.length&&(l=n)}if(void 0!==l){var h=e[l];h&&h.length&&(h[0].type===s.ModelView.BaseDescriptor.EnumNodeItemType.LINE||!h[0].instanceOrNot&&h[0].type===s.ModelView.BaseDescriptor.EnumNodeItemType.MESH_REF?i[n]=!0:r[n]=!0)}}if(!s.GlobalData.Instance)for(var n in e)r[n]||i[n]||(i[n]=!0);return{mergeableIdxs:Object.keys(i),mergedIdxs:Object.keys(r)}}},{key:"_collectMergeableMeshesByIdxId",value:function(e,t,i,r,n){i[t]&&i[t].IndexInfos?this._collectSharedMeshesByIdxId(e,t,i,r,n):this._collectLineOrIntanceMeshesByIdxId(e,t,i,r,n)}},{key:"_collectLineOrIntanceMeshesByIdxId",value:function(e,t,i,r,n){for(var a=r[t],o=e.getModelDescriptor().getReferencedMeshBufferById(t),s={buffer:o},l=0,u=a.length;l<u;l++){var c=a[l];this._createNodeBufferByMpkBufferData(e,c,s);var h=this._getMaterialKeyByNodeInfo(c);n[h]||(n[h]=[]),n[h].push(c)}}},{key:"_collectSharedMeshesByIdxId",value:function(e,t,i,r,n){for(var a=i[t],o=a.IndexInfos,s=0,l=o.length;s<l;s++){var u=r[o[s].meshId];if(u)for(var c=e.getModelDescriptor().getReferencedMeshBufferById(t),h={buffer:c,indexInfo:o[s]},d=0,f=u.length;d<f;d++){var p=u[d];this._createNodeBufferByMpkBufferData(e,p,h);var m=this._getMaterialKeyByNodeInfo(p);n[m]||(n[m]=[]),n[m].push(p)}}}},{key:"_mergeMergeableMeshes",value:function(e,t,i,r){function n(p){var m=p;return function(){var p,v;for(v=m+f>u?u:m+f,p=m;p<v;p++)o._collectMergedGeometriesById(a[p],t,i),p===v-1&&(v!==u?(e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:l,loaded:(p/u*d+c+h)*l}}),requestAnimationFrame(n(p+1))):o._makeMeshNodes(e,r))}}var a=Object.keys(t);if(0===a.length)return void this._makeMeshNodes(e,r);var o=this,l=e.getLoader().maxLoadTaskCount,u=a.length,c=e.progressPercentage.load,h=e.progressPercentage.collect,d=e.progressPercentage.merge,f=Math.ceil(u/e.progressFrequency);requestAnimationFrame(n(0))}},{key:"_dealDataMergeableMeshs",value:function(e,t,i,r,n){function a(t){var y=t;return function(){var t,M;for(M=y+g>h?h:y+g,t=y;t<M;t++)o._collectMergeableMeshesByIdxId(e,f[t],i,r,u),t===M-1&&(M!==h?(e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:p,loaded:((t+c)/d*v+m)*p}}),requestAnimationFrame(a(t+1))):(e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:p,loaded:(v+m)*p}}),o._mergeMergeableMeshes(e,u,l,n)))}}if(0===t.mergeableIdxs.length)return void this._makeMeshNodes(e,n);var o=this,l=this.mapMaterialIdToMergedNode,u={},c=t.mergedIdxs.length,h=t.mergeableIdxs.length,d=c+h,f=t.mergeableIdxs,p=e.getLoader().maxLoadTaskCount,m=e.progressPercentage.load,v=e.progressPercentage.collect,g=Math.ceil(h/e.progressFrequency);requestAnimationFrame(a(0))}},{key:"_collectDataMergedMeshesByIdxId",value:function(e,t,i,r,n){var a=t[e],o=a.IndexInfos;if(o&&0!==o.length){var s=!1;a.UV&&(a.UV.byteLength||a.UV.length)&&(s=!0),n.lightmap&&(a=this.getAttributeForLightmapWithDataMerged(a,n,e));for(var l=void 0,u=-1,c=0,h=o.length;c<h;c++){var d=i[o[c].meshId];if(d&&0!==d.length){if(void 0!=a.lightmapIdx){var f=o[c];f.positionStart=3*(u+1),f.uvStart=2*(u+1);for(var p=f.indexStart,m=f.indexCount+f.indexStart;p<m;p++)u=u<a.I[p]?a.I[p]:u;var v=u+1;f.positionCount=3*v-f.positionStart,f.uvCount=2*v-f.uvStart}l=o[c].meshId;for(var g=0,y=d.length;g<y;g++)d[g].uv=s,void 0!=a.lightmapIdx&&(d[g].lightmapIdx=a.lightmapIdx,d[g].materialId=d[g].materialId+"_"+d[g].lightmapIdx)}}if(void 0!==l){var M=i[l][0],E={},b=this._getMaterialKeyByNodeInfo(M);void 0===r[b]&&(r[b]=[]);for(var p=0,m=o.length;p<m;p++)i[o[p].meshId]&&(M=i[o[p].meshId][0],void 0===E[M.userId]&&(E[M.userId]=[]),o[p].userId=M.userId,o[p].nodeId=M.nodeId,o[p].boundingBox=M.boundingBox,E[M.userId].push(o[p]));var x=new THREE.BufferGeometry;x._visible=!0,x.setIndex(new THREE.BufferAttribute(new Uint32Array(a.I),1)),x.addAttribute("position",new THREE.BufferAttribute(new Float32Array(a.P),3)),a.N&&(a.N.byteLength||a.N.length)&&x.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(a.N),3)),s&&x.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(a.UV),2)),a.UV2&&(x.addAttribute("uv2",new THREE.BufferAttribute(new Float32Array(a.UV2),2)),x.lightmapIdx=a.lightmapIdx),r[b].push({geometry:x,indices:E})}}}},{key:"getAttributeForLightmapWithDataMerged",value:function(e,t,i){var r=[],n=new Uint32Array(e.I),a=t.getLoader().getUV2ById("bmpk_"+i,n.length);if(!a)return e;var o=a.lightmapIdx;r=a.uv2;for(var s=new Float32Array(e.P),l=new Float32Array(e.N),u=new Float32Array(e.UV),c=[],h=[],d=[],f=[],p=[],m=0,v=0;v<n.length;v++){var g=n[v];void 0==p[g]||r[2*p[g]]!=r[2*v]||r[2*p[g]+1]!=r[2*v+1]?(c.push(s[3*g]),c.push(s[3*g+1]),c.push(s[3*g+2]),l.length>0&&(h.push(l[3*g]),h.push(l[3*g+1]),h.push(l[3*g+2])),u.length>0&&(d.push(u[2*g]),d.push(u[2*g+1])),f.push(r[2*v]),f.push(r[2*v+1]),n[v]=m,m++,void 0==p[g]&&(p[g]=v)):n[v]=n[p[g]]}return s=null,l=null,u=null,r=null,p=null,{I:n,UV2:f,P:c,N:h,UV:d,lightmapIdx:o}}},{key:"_dealDataMergedMeshs",value:function(e,t,i,r,n){function a(t){var v=t;return function(){var t,g;for(g=v+m>c?c:v+m,t=v;t<g;t++)o._collectDataMergedMeshesByIdxId(u[t],i,r,l,e),t===g-1&&(g!==c?(e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:d,loaded:(t/h*p+f)*d}}),requestAnimationFrame(a(t+1))):(e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:d,loaded:(t/h*p+f)*d}}),n&&n()))}}if(0===t.mergedIdxs.length)return void(n&&n());var o=this,l=this.mapMaterialIdToMergedNode,u=t.mergedIdxs,c=u.length,h=t.mergedIdxs.length+t.mergeableIdxs.length,d=e.getLoader().maxLoadTaskCount,f=e.progressPercentage.load,p=e.progressPercentage.collect,m=Math.ceil(c/e.progressFrequency);requestAnimationFrame(a(0))}},{key:"_makeMeshNodes",value:function(e,t){var i=e.manager,r=e.databagId,n=e.getEncodedDatabagId(),a=this._getNodeGroup(e),o=this.mapMaterialIdToMergedNode;for(var l in o){var u=this.getPropertyValueByMaterialKey(l),c=o[l];if(e.lightmap){var h=u.materialId;e.materialManager.updateLightmapMaterial(h)}for(var d=0,f=c.length;d<f;d++){var p=c[d].geometry,m=c[d].indices,v=null;if("lines"===u.type)v=new s.LineSegmentsEx(p),v.databagId=r;else{var g={databagId:r};v=new s.MeshEx(p),v.spawn(g)}s.GlobalData.EnableShadowMap&&(v.castShadow=e.castShadow,v.receiveShadow=e.receiveShadow),v._indicesGroup=m,a.add(v),c[d].mesh=v,i.addMeshToOctantMap(n,l,new s.BatchedCapsuleObject(l,v)),m=null,v=null}}a.updateMatrixWorld(!0),e.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:{total:e.getLoader().maxLoadTaskCount,loaded:e.getLoader().maxLoadTaskCount}}),t&&t()}},{key:"createMeshNodes",value:function(e,t){if(!e.getModelDescriptor().getStandardNodeInfos())return void(t&&t());this._createGeometries(e,function(){t&&t()})}},{key:"applySelection",value:function(e){}},{key:"clearSelection",value:function(e){}},{key:"applyHover",value:function(e){}},{key:"clearHover",value:function(e){}},{key:"getMeshNode",value:function(){return this.mapMaterialIdToMergedNode}},{key:"_disposeMergedGeometries",value:function(){for(var e in this.mapMaterialIdToMergedNode){for(var t=this.mapMaterialIdToMergedNode[e],i=0,r=t.length;i<r;i++){t[i].geometry.dispose(),delete t[i].geometry,delete t[i].indices,t[i].mesh._indicesGroup=null,delete t[i].mesh}delete this.mapMaterialIdToMergedNode[e]}}},{key:"_getMaterialKeyByNodeInfo",value:function(e,t){var i=e.materialId;if(t){var r=t.manager.getOverrideMaterialByNodeInfo(e,t.materialManager.getMaterialById(e.materialId));r&&(i=r.name,e.materialId=i)}return s.Utils.getCombinedKeyString([e.materialId,e.uv?"1":"0",e.type===s.ModelView.BaseDescriptor.EnumNodeItemType.LINE?"lines":"meshes"])}},{key:"getPropertyValueByMaterialKey",value:function(e){var t=s.Utils.splitCombinedKeyString(e);return{materialId:t[0],uvProp:t[1],type:t[2]}}},{key:"clearSelectedObjectIds",value:function(){this.selectedObjectIds.length=0}},{key:"cacheSelectedObjectIds",value:function(e,t,i){this.selectedObjectIds.push({uid:e,mKey:t,idx:i})}},{key:"adjustVisibility",value:function(e,t){var i=this._getNodeGroup(e),r=i.visible;r!=t&&(t&&!i.bVisible||(i.visible=t),i.bVisible=r)}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){if(t)for(var i=0,r=this.selectedMeshes.length;i<r;i++)for(var n=this.selectedMeshes[i].object,a=this.selectedMeshes[i].indices,o=0,l=a.length;o<l;o++){var u=n.geometry.groups[a[o].idx];u.start=a[o].start,u.count=a[o].count}else{this.selectedMeshes.length=0;for(var c={},i=0,r=this.selectedObjectIds.length;i<r;i++)c[this.selectedObjectIds[i].mKey+"&"+this.selectedObjectIds[i].idx]=!0;for(var h=Object.keys(c),i=0,r=h.length;i<r;i++){for(var d=h[i].split("&"),f=d[0],p=d[1],m=this.mapMaterialIdToMergedNode[f][p],n=m.mesh,v=m.geometry,a=[],g=v.groups,o=0,l=g.length;o<l;o++){var u=g[o];u.materialIndex===s.Model.EnumFilterState.SELECTED&&(a.push({idx:o,start:u.start,count:u.count}),u.start=0,u.count=0)}a.length&&this.selectedMeshes.push({object:n,indices:a})}}}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){if(t)for(var i=0,r=this.nonSelectedMeshes.length;i<r;i++){var n=this.nonSelectedMeshes[i].object,a=this.nonSelectedMeshes[i].indices;if(a)for(var o=0,l=a.length;o<l;o++){var u=n.geometry.groups[a[o].idx];u.start=a[o].start,u.count=a[o].count}else n.visible=this.nonSelectedMeshes[i].visibility}else{this.nonSelectedMeshes.length=0;for(var c={},i=0,r=this.selectedObjectIds.length;i<r;i++){var h=this.selectedObjectIds[i];c[h.mKey]||(c[h.mKey]={}),c[h.mKey][h.idx]=!0}for(var d in this.mapMaterialIdToMergedNode){var f=this.mapMaterialIdToMergedNode[d];if(c[d])for(var o=0,l=f.length;o<l;o++){var n=f[o].mesh;if(c[d][o]){for(var a=[],p=n.geometry.groups,i=0,r=p.length;i<r;i++){var u=p[i];u.materialIndex!==s.Model.EnumFilterState.SELECTED&&(a.push({idx:i,start:u.start,count:u.count}),u.start=0,u.count=0)}a.length?this.nonSelectedMeshes.push({object:n,indices:a}):(this.nonSelectedMeshes.push({object:n,indices:null,visibility:n.visible}),n.visible=!1)}else this.nonSelectedMeshes.push({object:n,indices:null,visibility:n.visible}),n.visible=!1}else for(var i=0,r=f.length;i<r;i++){var n=f[i].mesh;this.nonSelectedMeshes.push({object:n,indices:null,visibility:n.visible}),n.visible=!1}}}}},{key:"restoreVisibilityOfObjects",value:function(){this.selectedMeshes.length=0,this.nonSelectedMeshes.length=0}},{key:"getBlinkMaterials",value:function(){return this.blinkMaterials}},{key:"disposeBufferAfterVbo",value:function(){if(!this.bufferDestroyed){var e=0;for(var t in this.mapMaterialIdToMergedNode)for(var i=this.mapMaterialIdToMergedNode[t],r=0,n=i.length;r<n;r++){var a=i[r],o=a.geometry;if(null!==o){e++;var l=t+"-"+r;this.mapDestroyedBufferKey[l]||a.mesh.visible&&(this.mapDestroyedBufferKey[l]=!0,s.GlobalData.EnableSplitComponent?s.GeomUtil.disposeBufferFromGeometry(o,["normal","uv2"]):s.GeomUtil.disposeBufferFromGeometry(o,["normal","uv","uv2"]))}}Object.keys(this.mapDestroyedBufferKey).length===e&&(this.mapDestroyedBufferKey={},this.bufferDestroyed=!0)}}},{key:"_traverseMeshNodeMap",value:function(e){for(var t in this.mapMaterialIdToMergedNode)for(var i=this.mapMaterialIdToMergedNode[t],r=0,n=i.length;r<n;r++)e&&e(t,i[r])}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=[],r=e.getDatabagId(),n=this;return this._traverseMeshNodeMap(function(e,a){var o=a.indices[t];if(o)for(var s=a.geometry,l=s.getIndex().array,u=s.getAttribute("position").array,c=s.getAttribute("uv"),h=c?c.array:null,d="lines"===n.getPropertyValueByMaterialKey(e).type,f=0,p=o.length;f<p;f++){var m=o[f],v=m.indexStart,g=m.indexStart+m.indexCount,y=l.slice(v,g),M=null;h&&(v=m.positionStart/3*2,g=v+m.positionCount/3*2,M=h.slice(v,g)),v=m.positionStart,g=m.positionStart+m.positionCount;var E=u.slice(v,g);v/=3,y.forEach(function(e,t,i){i[t]-=v}),i.push({isLines:d,databagId:r,nodeId:m.nodeId,position:E,index:y,uv:M})}}),i}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingBatchedMeshGenerator(this)),this.pickingNodeGenerators[e]}}]),t}(s.ModelView.MeshBaseManager);s.ModelView.BatchedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.generated=!1,this.wireframeLineSegment=null,this.wireframeGeometryMap=null,this.userIdMapForNoWireFrame={}}return _createClass(e,[{key:"destroy",value:function(){if(this.clearData(),this.manager=null,this.userIdMapForNoWireFrame=null,this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}}},{key:"clearData",value:function(){if(this.generated=!1,this.bufferDestroyed=!1,this.wireframeLineSegment&&(this.wireframeLineSegment._indicesGroup=null,this.wireframeLineSegment.geometry.dispose(),this.wireframeLineSegment=null),this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this.wireframeGeometryMap=null,this.userIdMapForNoWireFrame={}}},{key:"_createWireframeGeometry",value:function(e,t){if(this.wireframeGeometryMap||(this.wireframeGeometryMap={}),!this.wireframeGeometryMap[t.nodeId]){for(var i=e.attributes.position.array.slice(t.positionStart,t.positionStart+t.positionCount),r=e.getIndex().array.slice(t.indexStart,t.indexStart+t.indexCount),n=0,a=r.length;n<a;n++)r[n]-=t.positionStart/3;var o=s.BuildEdge(i,r),l=new THREE.BufferGeometry;l.setIndex(new THREE.Uint32BufferAttribute(o,1)),l.addAttribute("position",new THREE.BufferAttribute(Float32Array.from(i),3)),l._userId=t.userId,this.wireframeGeometryMap[t.nodeId]=l}}},{key:"_createWireframeGeometries",value:function(e){var t=e.getFilter(),i=e.getModelDescriptor().getStandardNodeInfos(),r=this.manager.getMeshNode();for(var n in r){if("meshes"===this.manager.getPropertyValueByMaterialKey(n).type)for(var a=r[n],o=0,s=a.length;o<s;o++){var l=a[o],u=l.geometry;if(null!==u){var c=l.indices;for(var h in c){(function(e){var r=i[e];return!(r&&t._hasRenderWithBoardlineFilter()&&!t._isRenderWithBoardline(r[0]))})(h)||(this.userIdMapForNoWireFrame[h]=!0);for(var d=c[h],f=0,p=d.length;f<p;f++)this._createWireframeGeometry(u,d[f])}}}}return!0}},{key:"_makeWireframe",value:function(e){var t={},i=e.getWireframeMaterial();for(var r in this.wireframeGeometryMap){var n=this.wireframeGeometryMap[r],a=n._userId,o=new THREE.LineSegments(n,i);o.name=a,o.nodeId=a,t[a]||(t[a]=[]),t[a].push(o),o=null}var l=[];for(var a in t)for(var u=t[a],c=0,h=u.length;c<h;c++)l.push(u[c]);if(l.length>0){var d={},f=s.GeomUtil.mergeBufferGeometries(l,d);f&&(this.wireframeLineSegment=new THREE.LineSegments(f,e.getWireframeMaterial()),this.wireframeLineSegment._indicesGroup=d)}l=null;for(var a in t)delete t[a];t=null,this.wireframeGeometryMap=null}},{key:"generateWireframe",value:function(e,t){this.generated||(this._createWireframeGeometries(e),this._makeWireframe(e),this.generated=!0,t&&t())}},{key:"update",value:function(e){if(this.manager.hasNodeInfo(e))if(e.isActivateWireframe()){if(this.wireframeLineSegment){var t=this._getNodeGroup(e);t.clear(),t.add(this.wireframeLineSegment),t.updateMatrixWorld(!0)}}else e._hasNodeGroup(s.ObjectGroupType.WIREFRAME)&&e._removeNodeGroup(s.ObjectGroupType.WIREFRAME)}},{key:"rebuildIndices",value:function(e){if(this.needDealWireframeLine(e)){this.wireframeLineSegment.visible=!0;var t=this.wireframeLineSegment._indicesGroup,i=this.wireframeLineSegment.geometry;i.clearGroups();var r=e.getWireframeMaterial();this.wireframeLineSegment.material=r;var n=this.manager.getFilteredUserIdsForWireFrame(),a=!(!n||!Object.keys(n).length);if(this._existHiddenUserId()||a){var o,s,l=[],u=[];for(var c in t)if(!this._isHiddenUserId(c)){var h=t[c];if(h&&h.length>0){if(n[c]){var d=n[c],f=l.indexOf(d);for(-1===f&&(l.push(d),f=l.length-1),o=0,s=h.length;o<s;o++)u.push({indexStart:h[o].indexStart,indexCount:h[o].indexCount,state:1+f});continue}for(o=0,s=h.length;o<s;o++)u.push({indexStart:h[o].indexStart,indexCount:h[o].indexCount,state:0})}}if(0===u.length)return void(this.wireframeLineSegment.visible=!1);for(u.sort(function(e,t){return e.indexStart-t.indexStart}),o=0,s=u.length;o<s;o++){var p=u[o].indexStart,m=u[o].indexCount,v=u[o].state;if(0===o)i.addGroup(p,m,v);else{var g=u[o-1].indexStart,y=u[o-1].indexCount,M=u[o-1].state,E=g+y;v===M&&p===E?i.groups[i.groups.length-1].count+=m:i.addGroup(p,m,v)}}var b=e.getFilter(),x=[r];for(o=0,s=l.length;o<s;o++){var I=b._getMaterialByName(l[o]);x.push(I)}this.wireframeLineSegment.material=x}}}},{key:"explode",value:function(e){if(this.wireframeLineSegment){var t=this.wireframeLineSegment._indicesGroup,i=this.wireframeLineSegment.geometry;for(var r in t){var n=t[r];if(n)for(var a=e.modelExplosion.getExplosionTranslation(r),o=0,s=n.length;o<s;o++){var l=n[o].indexStart,u=l+n[o].indexCount;!function(e,t,i,r){for(var n=e.getAttribute("position").array,a=e.getIndex().array,o={},s=t;s<i;s++){var l=a[s];o[l]||(n[3*l]+=r.x,n[3*l+1]+=r.y,n[3*l+2]+=r.z,o[l]=!0)}e.getAttribute("position").needsUpdate=!0,o=null}(i,l,u,a)}}}}},{key:"_getNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.WIREFRAME,{globalSpace:!0})}},{key:"needDealWireframeLine",value:function(e){return!(!e.isActivateWireframe()||!this.wireframeLineSegment)}},{key:"adjustVisibility",value:function(e,t){if(this.needDealWireframeLine(e)){var i=this._getNodeGroup(e),r=i.visible;r!=t&&(t&&!i.bVisible||(i.visible=t),i.bVisible=r)}}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.adjustVisibility(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"disposeBufferAfterVbo",value:function(){this.generated&&!this.bufferDestroyed&&this.wireframeLineSegment&&this.wireframeLineSegment.visible&&(this.bufferDestroyed=!0,s.GeomUtil.disposeBufferFromGeometry(this.wireframeLineSegment.geometry,["normal","uv","uv2"]))}},{key:"_existHiddenUserId",value:function(){var e=this.manager.getHiddenUserIds();return!!(this.userIdMapForNoWireFrame&&Object.keys(this.userIdMapForNoWireFrame).length||e&&Object.keys(e).length)}},{key:"_isHiddenUserId",value:function(e){if(this.userIdMapForNoWireFrame[e])return!0;var t=this.manager.getHiddenUserIds();return!(!t||!t[e])}},{key:"getWireFrameLineSegments",value:function(){return this.wireframeLineSegment?[this.wireframeLineSegment]:null}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingBatchedWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.BatchedWireframeManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.meshManager=new s.ModelView.BatchedMeshManager(this),this.wireframeManager=t?new s.ModelView.DataBatchedWireframeManager(this):new s.ModelView.BatchedWireframeManager(this)}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null,this._clearFilteredState(),this._clearSelectedState(),this._clearHoveredState(),this._clearBlinkedState()}},{key:"updateNodes",value:function(e){this.meshManager.update(e),this.wireframeManager.update(e)}},{key:"generateWireframe",value:function(e,t){this.wireframeManager.generateWireframe(e,t)}},{key:"asyncGenerateWireframe",value:function(e,t){this.wireframeManager.asyncGenerateWireframe(e,t)}},{key:"rebuildIndices",value:function(e){this._rebuildIndices(e)}},{key:"clearData",value:function(){this.meshManager.clearData(),this.wireframeManager.clearData(),this._clearFilteredState(),this._clearSelectedState(),this._clearHoveredState(),this._clearBlinkedState()}},{key:"createMeshNodes",value:function(e,t){this.meshManager.createMeshNodes(e,t)}},{key:"asyncCreateMeshNodes",value:function(e,t,i){this.meshManager.asyncCreateMeshNodes(e,t,i)}},{key:"hasNodeInfo",value:function(e){return!!e.getModelDescriptor().getStandardNodeInfos()}},{key:"disposeGeometry",value:function(e){this.meshManager.disposeGeometry(e)}},{key:"getMeshNode",value:function(){return this.meshManager.getMeshNode()}},{key:"getPropertyValueByMaterialKey",value:function(e){return this.meshManager.getPropertyValueByMaterialKey(e)}},{key:"getFilteredUserIds",value:function(){return this.mapMaterialIdToUserIdsForFilter}},{key:"getSelectedUserIds",value:function(){return this.mapMaterialIdToUserIdsForSelection}},{key:"getHoveredUserIds",value:function(){return this.mapMaterialIdToUserIdsForHover}},{key:"getBlinkedUserIds",value:function(){return this.mapBlinkUserIds}},{key:"getHiddenUserIds",value:function(){return this.hiddenUserIdSetObject}},{key:"getTransparentUserIds",value:function(){return this.transparentUserIdSetObject}},{key:"applyFilter",value:function(e,t){if(this.hasNodeInfo(e)){var i;i=t||e.getModelDescriptor().getStandardUserIds();var r=e.getModelDescriptor().getStandardNodeInfos();this._collectFilteredUserIds(e,i,r),this._collectFilteredUserIdsForWireFrame(e,i,r),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,r),
this._collectHoveredUserIds(e.manager.sceneState.hoverId,r),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"applySelection",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearSelectedState(e),this._clearHoveredState(e),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearSelection",value:function(e){this._clearSelectedState(e),this.applyHover(e)}},{key:"applyHover",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearHoveredState(e),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearHover",value:function(e){this._clearHoveredState(e),this._rebuildIndices(e),this.updateNodes(e)}},{key:"applyBlink",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getStandardNodeInfos();this._clearBlinkedState(e),this._clearHoveredState(e),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._rebuildIndices(e),this.updateNodes(e)}}},{key:"clearBlink",value:function(e){this._clearBlinkedState(e),this.applyHover(e)}},{key:"applyReplacement",value:function(e){this._rebuildIndices(e),this.updateNodes(e)}},{key:"_collectFilteredUserIds",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter(),a=r._hasVisibleFilter(),o=r._hasOverrideMaterialFilter(),l=r._hasTransparentFilter(),u=e.hasReplacedUserId(),c=e.hasHiddenSourceObjectUserId(),h=this.mapMaterialIdToUserIdsForFilter={};if(this.hiddenUserIdSetObject={},this.overrideUserIdSetObject={},this.transparentUserIdSetObject={},n||a||o||l||u||c)for(var d=0;d<t.length;++d){var f=t[d],p=i[f];if(p&&p.length)for(var m=0,v=p.length;m<v;m++){var g=p[m];if(n&&r._isHiddenFileId(g)||a&&!1===r._isVisible(g)||e.isReplacedUserId(f)||e.isHiddenSourceObjectUserId(f))void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.HIDDEN]&&(h[g.materialId][s.Model.EnumFilterState.HIDDEN]={}),h[g.materialId][s.Model.EnumFilterState.HIDDEN][f]=!0,this.hiddenUserIdSetObject[f]=!0;else if(l&&r._isTransparent(g))void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.TRANSPARENT]&&(h[g.materialId][s.Model.EnumFilterState.TRANSPARENT]={}),h[g.materialId][s.Model.EnumFilterState.TRANSPARENT][f]=!0,this.transparentUserIdSetObject[f]=!0;else if(o&&r._hasOverrideMaterial(g)){var y=r._getOverrideMaterial(g),M=null!=y?y.name:"";""!==M&&(void 0===h[g.materialId]&&(h[g.materialId]={}),void 0===h[g.materialId][s.Model.EnumFilterState.OVERRIDED]&&(h[g.materialId][s.Model.EnumFilterState.OVERRIDED]={}),h[g.materialId][s.Model.EnumFilterState.OVERRIDED][f]=M,this.overrideUserIdSetObject[f]=M)}else;}}}},{key:"_collectFilteredUserIdsForWireFrame",value:function(e,t,i){var r=e.getFilter(),n=r._hasOverrideMaterialFilterForWireFrame();if(this.mapFilteredUserIdsForWireFrame={},n)for(var a=0;a<t.length;++a){var o=t[a];if(!this.hiddenUserIdSetObject[o]){var s=i[o];if(s&&s.length)for(var l=0,u=s.length;l<u;l++){var c=s[l];if(r._hasOverrideMaterialForWireFrame(c)){var h=r._getOverrideMaterialForWireFrame(c),d=null!=h?h.name:"";""!==d&&(this.mapFilteredUserIdsForWireFrame[o]=d)}else;}}}}},{key:"_clearFilteredState",value:function(){this.mapMaterialIdToUserIdsForFilter=null}},{key:"_collectSelectedUserIds",value:function(e,t){var i=this.mapMaterialIdToUserIdsForSelection={};for(var r in e){var n=t[r];if(n&&n.length)for(var a=0,o=n.length;a<o;a++)void 0===i[n[a].materialId]&&(i[n[a].materialId]={}),void 0===i[n[a].materialId][r]&&(i[n[a].materialId][r]=!0)}}},{key:"_clearSelectedState",value:function(){this.mapMaterialIdToUserIdsForSelection&&(this.mapMaterialIdToUserIdsForSelection=null)}},{key:"_collectHoveredUserIds",value:function(e,t){var i=this.mapMaterialIdToUserIdsForHover={};if(e&&t[e])for(var r=t[e],n=0,a=r.length;n<a;n++)void 0===i[r[n].materialId]&&(i[r[n].materialId]={}),void 0===i[r[n].materialId][e]&&(i[r[n].materialId][e]=!0)}},{key:"_clearHoveredState",value:function(){this.mapMaterialIdToUserIdsForHover&&(this.mapMaterialIdToUserIdsForHover=null)}},{key:"_collectBlinkedUserIds",value:function(e,t){var i=this.mapBlinkUserIds={};for(var r in e){var n=t[r];if(n&&n.length)for(var a=0,o=n.length;a<o;a++)void 0===i[n[a].materialId]&&(i[n[a].materialId]={}),void 0===i[n[a].materialId][r]&&(i[n[a].materialId][r]=!0)}}},{key:"calculateClippingIds",value:function(e,t){this.meshManager.calculateClippingIds(e,t)}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a){this.meshManager.calculateClippingContours(e,t,i,r,n,a)}},{key:"_clearBlinkedState",value:function(){this.mapBlinkUserIds&&(this.mapBlinkUserIds=null)}},{key:"_rebuildIndices",value:function(e){this.meshManager.rebuildIndices(e),this.wireframeManager.rebuildIndices(e)}},{key:"clearCachedData",value:function(){this.meshManager.clearAllNodeBuffer()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"adjustVisibility",value:function(e,t){this.meshManager.adjustVisibility(e,t),this.wireframeManager.adjustVisibility(e,t)}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfSelectedObjects(e,t)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfNonSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfNonSelectedObjects(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){this.meshManager.restoreVisibilityOfObjects(),this.wireframeManager.restoreVisibilityOfObjects()}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"explode",value:function(e){this.meshManager.explode(e),this.wireframeManager.explode(e)}},{key:"isPickableNode",value:function(e){var t=this.getHiddenUserIds();if(t&&t[e])return!1;var i=this.getTransparentUserIds();return!i||!i[e]}},{key:"isHiddenNode",value:function(e){var t=this.getHiddenUserIds();return!(!t||!t[e])}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}},{key:"getFilteredUserIdsForWireFrame",value:function(){return this.mapFilteredUserIdsForWireFrame}}]),e}();s.ModelView.BatchedManager=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.defaultManager=new s.ModelView.BatchedManager(i),r.instancedManager=new s.ModelView.InstancedManager,r.loader=new s.ModelView.BatchedLoader(r),r}return _inherits(t,e),t}(s.ModelView.BatchedBaseHandler);s.ModelView.BatchedHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=null,i.enableBmpkMerged=!1,i.bmpkPkgIndex=null,i}return _inherits(t,e),_createClass(t,[{key:"praseBmpkPkgIndex",value:function(e){var t=this,i=this.url,r=this.fileLoader;t.bmpkPkgIndex={};var n=i.bmpkPkgIndexUrl(),a=function(i){for(var r in i.bmpks){var n=i.bmpks[r],a=parseInt(r.substring(5,r.length));t.bmpkPkgIndex[a]={};for(var o in n)t.bmpkPkgIndex[a][o]=n[o]}t._loadAllMpks(e)},o=function(){return new Promise(function(e,t){r.setResponseType("json"),r.load(n,e,void 0,t)})};s.Storage.IndexedDBHelper.loadWithStorage("ModelData",n,o,a)}},{key:"loadSceneAndMpks",value:function(e){var t=this;e.bmpk_merged&&(t.enableBmpkMerged=!0),t.url.mpkUrl=t.url.bmpkUrl,e.symbol?this._loadSymbol(function(){t._loadScene(0)}):t._loadScene(0),t._loadBMpkIndex(),e.lines&&t._loadLine(),e.bmpks&&(t.enableBmpkMerged?t.praseBmpkPkgIndex(e.bmpks):t._loadAllMpks(e.bmpks)),s.GlobalData.BorderLineDelayLoaded||t._loadAllBorderlines(e)}},{key:"getSceneTaskCount",value:function(e){var t=2;return t+=e.symbol,t+=e.lines,t+=e.bmpks,s.GlobalData.BorderLineDelayLoaded||(t+=this.getAllBorderlineCount()),t}},{key:"_loadBMpkIndex",value:function(){var e=this,t=this.url,i=this.fileLoader,r=t.bmpkIndexUrl(),n=function(t){e._paserBMeshId(t),e._onTaskFinished()},a=function(t){e.model.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_USERID_ERROR,event:t}),e._onTaskFinished()},o=function(){return new Promise(function(e,t){i.setResponseType("arraybuffer"),i.load(r,e,void 0,t)})};s.Storage.IndexedDBHelper.loadWithStorage("ModelData",r,o,n,a)}},{key:"_paserBMeshId",value:function(e){this.descriptor.bmeshIdReader=new s.Loader.BMeshIdReader(e)}},{key:"_parseReferencedMeshBufferData",value:function(e,t,i,r,n,a){var o=[],l=this,u=l.model.getVersion();s.Compatibility.isUseMergeTextureOptimize(u)||n&&i>0&&(a=e.hasUV(t));for(var c=void 0!==a?!a:void 0,h=t;h<i;++h){var d=e.getOffsetIndexInfo(h,c);d&&o.push(d)}var f=o.length,p=4*o[0].positionStart,m=4*(o[f-1].positionStart+o[f-1].positionCount),v=e.vBuffer.slice(p,m),g=4*o[0].indexStart,y=4*(o[f-1].indexStart+o[f-1].indexCount),M=e.iBuffer.slice(g,y);if(n){var E=new Uint32Array(M),b=o[0].positionStart/3;E.forEach(function(e,t,i){i[t]-=b}),M=E}var x,I=e.getMeshData(t).nOffset,T=e.getMeshData(i-1).nOffset+3*e.getMeshData(i-1).ptCount*4,w=e.nBuffer.slice(I,T);if(c)x=null;else if(n){var C=4*o[0].uvStart,S=4*(o[f-1].uvStart+o[f-1].uvCount);x=e.tBuffer.slice(C,S)}else x=e.tBuffer.slice();var A=o[0].positionStart,k=o[0].indexStart,R=o[0].uvStart;if(0!=A)for(var h=0;h<f;++h)o[h].positionStart-=A,o[h].indexStart-=k,o[h].uvStart-=R;l.descriptor.cacheReferencedMeshBufferData(r,{P:v,I:M,N:w,UV:x,IndexInfos:o})}},{key:"_parseMpk",value:function(e,t){var i=new s.Loader.BMPKReader(e),r=this;if(r.enableBmpkMerged){var n=65536*t;if(t in r.bmpkPkgIndex){var a=Object.keys(r.bmpkPkgIndex[t]).length;if(1===a)r._parseReferencedMeshBufferData(i,0,i.header.meshCount,n);else{for(var o,l=r.bmpkPkgIndex[t],u=0,c=1;c<=a-1;c++){var h=l[c].mesh_index,d=h,f=n+u;o=l[c-1].texture,r._parseReferencedMeshBufferData(i,u,d,f,!0,o),u=d}u=l[a-1].mesh_index,o=l[a-1].texture;var f=n+u;r._parseReferencedMeshBufferData(i,u,i.header.meshCount,f,!0,o)}}else r._parseReferencedMeshBufferData(i,0,i.header.meshCount,n)}else r._parseReferencedMeshBufferData(i,0,i.header.meshCount,t);i=null}}]),t}(s.ModelView.BaseLoader);s.ModelView.DataBatchedBaseLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.DataBatchedDescriptor,i}return _inherits(t,e),t}(s.ModelView.DataBatchedBaseLoader);s.ModelView.DataBatchedLoader=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.bmeshIdReader=null,e}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.bmeshIdReader=null}},{key:"convertGeometryId",value:function(e){var t=this.bmeshIdReader.getBMeshId(e);return void 0===t&&(t=e),t}}]),t}(s.ModelView.DefaultDescriptor);s.ModelView.DataBatchedDescriptor=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.generated=!1,this.wireframeLineSegments=[],this.parameterizedShapeWireframeBufferMap={},this.userIdMapForNoWireFrame={},this.processedThresholdPerShared=1e3,this.splitSegmentEnabled=!0,this.splitCountPerSegment=1e4}return _createClass(e,[{key:"destroy",value:function(){this.manager=null,this.userIdMapForNoWireFrame=null;for(var e=0,t=this.wireframeLineSegments.length;e<t;e++)this.wireframeLineSegments[e]._indicesGroup=null,this.wireframeLineSegments[e].geometry.dispose(),this.wireframeLineSegments[e]=null;if(this.wireframeLineSegments=null,this.pickingNodeGenerators){for(var i in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(i)&&this.pickingNodeGenerators[i].destroy();this.pickingNodeGenerators=null}this.parameterizedShapeWireframeBufferMap=null}},{key:"clearData",value:function(){this.generated=!1,this.userIdMapForNoWireFrame={};for(var e=0,t=this.wireframeLineSegments.length;e<t;e++)this.wireframeLineSegments[e]._indicesGroup=null,this.wireframeLineSegments[e].geometry.dispose(),this.wireframeLineSegments[e]=null;if(this.wireframeLineSegments=[],this.pickingNodeGenerators)for(var i in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(i)&&this.pickingNodeGenerators[i].clearData()}},{key:"_needWireframing",value:function(e,t){var i=e.getFilter(),r=e.getModelDescriptor().getStandardNodeInfos();return!(!r||!r[t.userId])&&!(i._hasRenderWithBoardlineFilter()&&!i._isRenderWithBoardline(t))}},{key:"_getWireframeBufferByIdForParameterizedShape",value:function(e,t){var i=this.parameterizedShapeWireframeBufferMap;if(i[e])return i[e];i[e]=[];for(var r=0,n=t.length;r<n;r++){var a=t[r];i[e].push({index:s.BuildEdge(a.attributes.position.array,a.index.array),position:a.attributes.position.array})}return i[e]}},{key:"_dealWireframesForParameterizedShape",value:function(e){if(!s.GlobalData.Instance){for(var t=e.getModelDescriptor().getNodeInfosWithParameterizedDesc(),i={},r=e.getWireframeMaterial(),n=Object.keys(t),a=0,o=n.length;a<o;a++)for(var l=t[n[a]],u=0,c=l.length;u<c;u++){var h=l[u];this._needWireframing(e,h)||(this.userIdMapForNoWireFrame[h.userId]=!0);var d=this.manager.meshManager.getGeometryByNodeInfo(e,h);d instanceof Array||(d=[d]);for(var f=this._getWireframeBufferByIdForParameterizedShape(h.geometryId,d),p=0,m=f.length;p<m;p++){var v=f[p].index,g=f[p].position.slice();s.GeomUtil.applyMatrix4ToBuffer(h.matrix,g);var y=new THREE.BufferGeometry;y.setIndex(new THREE.Uint32BufferAttribute(v,1)),y.addAttribute("position",new THREE.BufferAttribute(g,3));var M=new THREE.LineSegments(y,r);M.name=h.userId,M.nodeId=h.userId,i[h.userId]||(i[h.userId]=[]),i[h.userId].push(M)}}var E=[];for(var b in i)for(var x=i[b],p=0,I=x.length;p<I;p++)E.push(x[p]);if(E.length>0){var T={},w=s.GeomUtil.mergeBufferGeometries(E,T);if(w){var C=new THREE.LineSegments(w,r);C._indicesGroup=T,this.wireframeLineSegments.push(C)}}}}},{key:"_dealSharedBorderLines",value:function(e){var t=e.getModelDescriptor().getSharedBorderLineCache();if(t){for(var i=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),r={},n=e.getWireframeMaterial(),a=this.processedThresholdPerShared,o=0,l=t.length;o<l;o++)for(var u=t[o],c=u.IndexInfos,h=0,d=c.length;h<d;h++){var f=c[h],p=e.getModelDescriptor().convertGeometryId(f.meshId),m=i[p];if(m&&!(m.length>a))for(var v=new Uint32Array(u.I),g=new Float32Array(u.P),y=0,M=m.length;y<M;y++){var E=m[y];this._needWireframing(e,E)||(this.userIdMapForNoWireFrame[E.userId]=!0);var b=g.slice(f.positionStart,f.positionStart+f.positionCount),x=f.positionStart/3,I=v.slice(f.indexStart,f.indexStart+f.indexCount);I.forEach(function(e,t,i){i[t]-=x}),s.GeomUtil.applyMatrix4ToBuffer(E.matrix,b);var T=new THREE.BufferGeometry;T.setIndex(new THREE.Uint32BufferAttribute(I,1)),T.addAttribute("position",new THREE.BufferAttribute(b,3));var w=new THREE.LineSegments(T,n);w.name=E.userId,w.nodeId=E.userId,r[E.userId]||(r[E.userId]=[]),r[E.userId].push(w)}}var C=[];for(var S in r)for(var A=r[S],h=0,k=A.length;h<k;h++)C.push(A[h]);if(!(C.length<1))if(this.splitSegmentEnabled){for(var R=this.splitCountPerSegment,B=Math.floor(C.length/R),L=C.length%R,h=0;h<B;h++){var O=C.slice(h*R,(h+1)*R),P={},D=s.GeomUtil.mergeBufferGeometries(O,P);if(D){var N=new THREE.LineSegments(D,n);N._indicesGroup=P,this.wireframeLineSegments.push(N)}}if(L){var O=C.slice(B*R,B*R+L),P={},D=s.GeomUtil.mergeBufferGeometries(O,P);if(D){var N=new THREE.LineSegments(D,n);N._indicesGroup=P,this.wireframeLineSegments.push(N)}}}else{var P={},D=s.GeomUtil.mergeBufferGeometries(C,P);if(D){var N=new THREE.LineSegments(D,n);N._indicesGroup=P,this.wireframeLineSegments.push(N)}}}}},{key:"_dealUniqueBorderLines",value:function(e){var t=e.getModelDescriptor().getUniqueBorderLineCache();if(t)for(var i=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),r={},n=0,a=t.length;n<a;n++){for(var o=t[n],s=o.IndexInfos,l=0,u=s.length;l<u;l++){var c=s[l],h=e.getModelDescriptor().convertGeometryId(c.meshId),d=i[h];if(d)for(var f=0,p=d.length;f<p;f++){var m=d[f];r[m.userId]||(r[m.userId]=[]);var v,g;this._needWireframing(e,m)||(this.userIdMapForNoWireFrame[m.userId]=!0),v=c.indexStart,g=c.indexCount,r[m.userId].push({nodeId:m.nodeId,indexStart:v,indexCount:g})}}var y=new THREE.BufferGeometry;y.setIndex(new THREE.Uint32BufferAttribute(new Uint32Array(o.I),1)),y.addAttribute("position",new THREE.BufferAttribute(new Float32Array(o.P),3));var M=new THREE.LineSegments(y,e.getWireframeMaterial());M._indicesGroup=r,this.wireframeLineSegments.push(M)}}},{key:"_createWireframeGeometries",value:function(e){this._dealWireframesForParameterizedShape(e),this._dealUniqueBorderLines(e),this._dealSharedBorderLines(e)}},{key:"generateWireframe",value:function(e,t){e.isActivateWireframe()&&(this.generated||(this._createWireframeGeometries(e),this.generated=!0))}},{key:"_asyncDealSharedBorderLines",value:function(e,t){var i=e.getModelDescriptor().getSharedBorderLineCache();if(!i)return void(t&&t());for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n={},a=e.getWireframeMaterial(),o=i.length,l=0,u=this,c=0;c<o;c++){var h=i[c];s.Utils.asyncProcess(h,h.IndexInfos.length,10,function(t,i){var o=t,l=o.IndexInfos[i],c=e.getModelDescriptor().convertGeometryId(l.meshId),h=r[c];if(h)for(var d=new Uint32Array(o.I),f=new Float32Array(o.P),p=0,m=h.length;p<m;p++){var v=h[p];u._needWireframing(e,v)||(u.userIdMapForNoWireFrame[v.userId]=!0);var g=f.slice(l.positionStart,l.positionStart+l.positionCount),y=l.positionStart/3,M=d.slice(l.indexStart,l.indexStart+l.indexCount);M.forEach(function(e,t,i){i[t]-=y}),s.GeomUtil.applyMatrix4ToBuffer(v.matrix,g);var E=new THREE.BufferGeometry;E.setIndex(new THREE.Uint32BufferAttribute(M,1)),E.addAttribute("position",new THREE.BufferAttribute(g,3));var b=new THREE.LineSegments(E,a);b.name=v.userId,b.nodeId=v.userId,n[v.userId]||(n[v.userId]=[]),n[v.userId].push(b)}},function(){if(++l===o){var e=[];for(var i in n)for(var r=n[i],c=0,h=r.length;c<h;c++)e.push(r[c]);if(e.length>0){var d={},f=s.GeomUtil.mergeBufferGeometries(e,d);if(f){var p=new THREE.LineSegments(f,a);p._indicesGroup=d,u.wireframeLineSegments.push(p)}}t&&t()}})}}},{key:"_asyncDealUniqueBorderLines",value:function(e,t){var i=e.getModelDescriptor().getUniqueBorderLineCache();if(!i)return void(t&&t());for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n={},a=this,o=0,l=i.length,u=0;u<l;u++){var c=i[u];s.Utils.asyncProcess(c,c.IndexInfos.length,10,function(t,i){var o=t,s=o.IndexInfos[i],l=e.getModelDescriptor().convertGeometryId(s.meshId),u=r[l];if(u)for(var c=0,h=u.length;c<h;c++){var d=u[c];n[d.userId]||(n[d.userId]=[]);var f,p;a._needWireframing(e,d)||(a.userIdMapForNoWireFrame[d.userId]=!0),f=s.indexStart,p=s.indexCount,n[d.userId].push({nodeId:d.nodeId,indexStart:f,indexCount:p})}},function(i){o++;var r=i,s=new THREE.BufferGeometry;s.setIndex(new THREE.Uint32BufferAttribute(new Uint32Array(r.I),1)),s.addAttribute("position",new THREE.BufferAttribute(new Float32Array(r.P),3));var u=new THREE.LineSegments(s,e.getWireframeMaterial());u._indicesGroup=n,a.wireframeLineSegments.push(u),o===l&&t&&t()})}}},{key:"_asyncCreateWireframeGeometries",value:function(e,t){var i=this;this._dealWireframesForParameterizedShape(e),this._asyncDealUniqueBorderLines(e,function(){i._asyncDealSharedBorderLines(e,function(){t&&t()})})}},{key:"asyncGenerateWireframe",value:function(e,t){e.isActivateWireframe()&&(this.generated||(this._asyncCreateWireframeGeometries(e,t),this.generated=!0))}},{key:"update",value:function(e){if(this.manager.hasNodeInfo(e))if(e.isActivateWireframe()){if(this.wireframeLineSegments.length){var t=this._getNodeGroup(e);t.clear();for(var i=0,r=this.wireframeLineSegments.length;i<r;i++)t.add(this.wireframeLineSegments[i]);t.updateMatrixWorld(!0)}}else e._hasNodeGroup(s.ObjectGroupType.WIREFRAME)&&e._removeNodeGroup(s.ObjectGroupType.WIREFRAME)}},{key:"rebuildIndicesForLineSegment",value:function(e,t){t.visible=!0;var i=t._indicesGroup,r=t.geometry;r.clearGroups();var n=e.getWireframeMaterial();t.material=n;var a=this.manager.getFilteredUserIdsForWireFrame(),o=null,s=e.getFilter();s&&(o=s.getLocalClippingList());var l,u,c=[],h=[];for(var d in i)if(!this._isHiddenUserId(d)){var f=i[d];if(f&&f.length>0){if(o&&o[d]){var p="localClipping|"+d;a&&a[d]&&(p+="|override|"+a[d]),c.push(p);var m=c.length-1;for(l=0,u=f.length;l<u;l++)h.push({indexStart:f[l].indexStart,indexCount:f[l].indexCount,state:1+m});continue}if(a&&a[d]){var p=a[d],m=c.indexOf(p);for(-1===m&&(c.push(p),m=c.length-1),l=0,u=f.length;l<u;l++)h.push({indexStart:f[l].indexStart,indexCount:f[l].indexCount,state:1+m});continue}for(l=0,u=f.length;l<u;l++)h.push({indexStart:f[l].indexStart,indexCount:f[l].indexCount,state:0})}}if(0===h.length)return void(t.visible=!1);for(h.sort(function(e,t){return e.indexStart-t.indexStart}),l=0,u=h.length;l<u;l++){var v=h[l].indexStart,g=h[l].indexCount,y=h[l].state;if(0===l)r.addGroup(v,g,y);else{var M=h[l-1].indexStart,E=h[l-1].indexCount,b=h[l-1].state,x=M+E;y===b&&v===x?r.groups[r.groups.length-1].count+=g:r.addGroup(v,g,y)}}var s=e.getFilter(),I=[n];for(l=0,u=c.length;l<u;l++){var T,w=c[l].split("|");if("localClipping"==w[0]){var C=o[w[1]].wireframeMaterialName,S=s.getMaterialForClipBy(C);if(w[2]&&"override"==w[2]){var A=C+w[2]+w[3];T=s.getMaterialForClipBy(A,S);var k=s._getMaterialByName(w[3]);T.copy(k)}else T=S;T.clippingPlanes=S.clippingPlanes}else T=s._getMaterialByName(c[l]);I.push(T)}t.material=I}},{key:"rebuildIndices",value:function(e){if(this.needDealWireframeLine(e))for(var t=0,i=this.wireframeLineSegments.length;t<i;t++)this.rebuildIndicesForLineSegment(e,this.wireframeLineSegments[t])}},{key:"_getNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.WIREFRAME,{globalSpace:!0})}},{key:"needDealWireframeLine",value:function(e){return!!(e.isActivateWireframe()&&this.wireframeLineSegments&&this.wireframeLineSegments.length)}},{key:"adjustVisibility",value:function(e,t){if(this.needDealWireframeLine(e)){var i=this._getNodeGroup(e),r=i.visible;r!=t&&(t&&!i.bVisible||(i.visible=t),i.bVisible=r)}}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.adjustVisibility(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"disposeBufferAfterVbo",value:function(){this.generated&&!this.bufferDestroyed&&this.wireframeLineSegment&&(this.bufferDestroyed=!0,s.GeomUtil.disposeBufferFromGeometry(this.wireframeLineSegment.geometry,["position","normal","uv","uv2"]))}},{key:"explode",value:function(e){for(var t=0,i=this.wireframeLineSegments.length;t<i;t++){var r=this.wireframeLineSegments[t],n=r._indicesGroup,a=r.geometry;for(var o in n){var s=n[o];if(s)for(var l=e.modelExplosion.getExplosionTranslation(o),u=0,c=s.length;u<c;u++){var h=s[u].indexStart,d=h+s[u].indexCount;!function(e,t,i,r){for(var n=e.getAttribute("position").array,a=e.getIndex().array,o={},s=t;s<i;s++){var l=a[s];o[l]||(n[3*l]+=r.x,n[3*l+1]+=r.y,n[3*l+2]+=r.z,o[l]=!0)}e.getAttribute("position").needsUpdate=!0,o=null}(a,h,d,l)}}}}},{key:"_isHiddenUserId",value:function(e){if(this.userIdMapForNoWireFrame[e])return!0;var t=this.manager.getHiddenUserIds();return!(!t||!t[e])}},{key:"getWireFrameLineSegments",value:function(){return this.wireframeLineSegments}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingBatchedWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.DataBatchedWireframeManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="merge_data",i.defaultManager=null,i.instancedManager=null,i.loader=null,i}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e,t){if(this.isLoaded()&&!this.isHidden()){this.prepareWireframe(this.model,t);var i=this.model.getMaterialManager().lastTextureEnabled;this.model.getMaterialManager()._updateTextureMapping(this.model,t),!this.model.lightmap||this.model.enableLightmap==s.GlobalData.EnableLightmap&&this.model.lightmapIntensity==s.GlobalData.LightmapIntensity&&i==s.GlobalData.EnableTextureMapping||(this.model.enableLightmap=s.GlobalData.EnableLightmap,this.model.lightmapIntensity=s.GlobalData.LightmapIntensity,this.rebuildIndicesforLightmap(),this.updateNodes())}}},{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.model.getModelDescriptor().cacheNodeInfosOnGeometryId(),this.addNodeInfoToOctantMap(),this.createMeshNodes(e)}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"createMeshNodes",value:function(e){var t=this,i=this,r=this.model;if(s.GlobalData.InstanceAsyncProcessing){var n=this.loader.getDescriptor();this.instancedManager.asyncCreateMeshNodes(r,n.getInstancedUserIds(),function(){t.defaultManager.createMeshNodes(r,function(){r.getMaterialManager()._updateTextureMapping(),i.clearCachedData(r),i.loaded=!0,e&&e()})})}else this.instancedManager.createMeshNodes(r),this.defaultManager.createMeshNodes(r,function(){r.getMaterialManager()._updateTextureMapping(),i.clearCachedData(r),i.loaded=!0,e&&e()})}},{key:"clearCachedData",value:function(e){e.getModelDescriptor().destroyReader(),e.getModelDescriptor().clearReferencedMeshCache(),this.defaultManager.clearCachedData(),this.instancedManager.clearCachedData()}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.DataBatchedBaseHandler=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.defaultManager=new s.ModelView.BatchedManager(i),r.instancedManager=new s.ModelView.InstancedManager,r.loader=new s.ModelView.DataBatchedLoader(r),r}return _inherits(t,e),t}(s.ModelView.DataBatchedBaseHandler);s.ModelView.DataBatchedHandler=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.model=t,this.conditionsChanged=!0,this.nodeInfosWithLayerKey={},this.cachedLayerData={},this.cacheAttributes=null,this.cacheSpecialtysLevels={},this.mapLayerKeys={},this.lastUsedMpkIdxsObject=null,this.lastUsedLayerIdsObject=null,this.lastUsedLayerData=null,this.mapNeededConditions=null}return _createClass(e,[{key:"destroy",value:function(){this.cachedLayerData=null,this.nodeInfosWithLayerKey=null,this.cacheAttributes=null,this.cacheSpecialtysLevels=null,this.mapLayerKeys=null,this.lastUsedLayerData=null,this.lastUsedMpkIdxsObject=null,this.lastUsedLayerIdsObject=null,this.mapNeededConditions=null,this.lastLayerKeyMap=null,this.cachedLayerKeys=null}},{key:"clearData",value:function(){}},{key:"loadLayerDataByIdxs",value:function(e,t,i,r){}},{key:"dealLayerDataLoading",value:function(e,t,i,r,n){}},{key:"loadMpkOnDemand",value:function(e,t,i,r,n){var a=e?this.getAllLayerIdxData():this.getUsedLayerIdxData();this.dealLayerDataLoading(this.getLayerIdxInfoByLayerData(a),t,i,r,n)}},{key:"getUsedIdxsInfoFrom",value:function(e,t){var i,r={},n={},a={},o={};if(e&&e.length)for(var l=0,u=e.length;l<u;++l)i=e[l],r[i]=!0;if(t)if(s.Utils.isEmptyObject(r))a=t;else{for(i in t)r[i]&&(o[i]=!0);if(s.Utils.isEmptyObject(o))n=r,a=t;else{for(i in t)o[i]||(a[i]=!0);for(i in r)o[i]||(n[i]=!0)}}else s.Utils.isEmptyObject(r)||(n=r);return{objCurrUsedIdxs:r,addIdxs:Object.keys(n),removeIdxs:Object.keys(a)}}},{key:"getLayerIdxInfoByLayerData",value:function(e){var t,i;e?(t=e.layerIds,i=e.mpkIdxs):(t=null,i=null);var r=this.getUsedIdxsInfoFrom(t,this.lastUsedLayerIdsObject);this.lastUsedLayerIdsObject=r.objCurrUsedIdxs;var n=this.getUsedIdxsInfoFrom(i,this.lastUsedMpkIdxsObject);return this.lastUsedMpkIdxsObject=n.objCurrUsedIdxs,{layerScene:r,mpk:n}}},{key:"getUsedLayerIdxData",value:function(){if(!this.isConditionsChanged()&&this.lastUsedLayerData)return this.lastUsedLayerData;this.setConditionsChanged(!1);var e=this.getConditionsOnDemand();if(!e)return this.lastUsedLayerData=null,null;var t=this.getCachedLayerData(),i=[],r=[],n=[],a=[];for(var o in e)if(t[o]){for(var s=t[o].mpkIdxs,l=0,u=s.length;l<u;++l)n.push(s[l]);i.push(o),r.push(t[o].layerId),a.push(t[o].boundingBox)}return this.lastUsedLayerData={layerIds:r,layerKeys:i,boundingBoxes:a,mpkIdxs:n},this.lastUsedLayerData}},{key:"getAllLayerIdxData",value:function(){this.setConditionsChanged(!1);var e=this.getCachedLayerData();if(!e)return null;var t=[],i=[],r=[],n=[];for(var a in e){for(var o=e[a].mpkIdxs,s=0,l=o.length;s<l;++s)r.push(o[s]);t.push(a),i.push(e[a].layerId),n.push(e[a].boundingBox)}return{layerIds:i,layerKeys:t,boundingBoxes:n,mpkIdxs:r}}},{key:"getUserIdsOnDemand",value:function(){var e={},t=this.nodeInfosWithLayerKey,i=this.getConditionsOnDemand();if(i)for(var r in i){var n=t[r];if(n)for(var a=0,o=n.length;a<o;a++)e[n[a].userId]=!0}else for(var r in t){var n=t[r];if(n)for(var a=0,o=n.length;a<o;a++)e[n[a].userId]=!0}return e}},{key:"cacheLayerData",value:function(e,t){this.cachedLayerData[e]=t}},{key:"getCachedLayerData",value:function(){return this.cachedLayerData}},{key:"getCachedLayerKeys",value:function(){if(this.cachedLayerKeys)return this.cachedLayerKeys;this.cachedLayerKeys={};var e=this.getCachedLayerData();for(var t in e)e.hasOwnProperty(t)&&(this.cachedLayerKeys[t]=!0);return this.cachedLayerKeys}},{key:"clearNodeInfoCacheWithLayerKey",value:function(){this.nodeInfosWithLayerKey={}}},{key:"cacheNodeInfoByLayerKey",value:function(e,t){this.nodeInfosWithLayerKey[e]||(this.nodeInfosWithLayerKey[e]=[]),this.nodeInfosWithLayerKey[e].push(t)}},{key:"cacheNodeInfosWithLayerKey",value:function(){var e=this.model.getModelDescriptor().getAllNodeInfos();for(var t in e)for(var i=e[t],r=0,n=i.length;r<n;r++){var a=i[r],o=this.formatLayerIds(a.userData);this.cacheNodeInfoByLayerKey(o[0],a)}}},{key:"cacheLayerKeys",value:function(e){this.mapLayerKeys=e;var t={},i=this.getLayerKeyAttributes();for(var r in e){var n=e[r],a=n[i[0]],o=n[i[1]];t.hasOwnProperty(a)||(t[a]=[]),t.hasOwnProperty(o)||(t[o]=[]),t[a].push(o),t[o].push(a)}this.cacheSpecialtysLevels=t}},{key:"getLayerKeyAttributes",value:function(){if(this.cacheAttributes)return this.cacheAttributes;var e=[],t=Object.keys(this.mapLayerKeys),i=t[0],r=this.mapLayerKeys[i];for(var n in r)r.hasOwnProperty(n)&&e.push(n);return this.cacheAttributes=e,this.cacheAttributes}},{key:"formatLayerIds",value:function(e){var t=[];if(!e)return t.push("unknown"),t;var i=this.getLayerKeyAttributes(),r=e[i[0]],n=e[i[1]];if(e.hasOwnProperty(i[0])&&e.hasOwnProperty(i[1]))if(r instanceof Array&&n instanceof Array)for(var a=0;a<r.length;a++)for(var o=0;o<n.length;o++){var s=r[a]+"-"+n[o];t.push(s)}else if(r instanceof Array)for(var o=0;o<r.length;o++){var s=r[o]+"-"+n;t.push(s)}else if(n instanceof Array)for(var o=0;o<n.length;o++){var s=r+"-"+n[o];t.push(s)}else{var s=r+"-"+n;t.push(s)}else if(e.hasOwnProperty(i[0]))if(e.hasOwnProperty(i[1]))t.push("unknown"),console.warn("Object has no "+i[0]+" and "+i[1]);else if(r instanceof Array)for(var o=0;o<r.length;o++)for(var l=r[o],u=this.getLevelsOrSpecialtys(l),a=0;a<u.length;a++)s=l+"-"+u[a],
t.push(s);else for(var l=r,u=this.getLevelsOrSpecialtys(l),a=0;a<u.length;a++)s=l+"-"+u[a],t.push(s);else if(n instanceof Array)for(var o=0;o<n.length;o++)for(var l=n[o],u=this.getLevelsOrSpecialtys(l),a=0;a<u.length;a++)s=u[a]+"-"+l,t.push(s);else for(var l=n,u=this.getLevelsOrSpecialtys(l),a=0;a<u.length;a++)s=u[a]+"-"+l,t.push(s);return t}},{key:"getLevelsOrSpecialtys",value:function(e){return this.cacheSpecialtysLevels.hasOwnProperty(e)?this.cacheSpecialtysLevels[e]:(console.warn("Attribute "+e+"has no according levels or specialtys."),[])}},{key:"getUnionBoundingBoxOnDemand",value:function(){var e=this.getBoundingBoxesOnDemand();if(e&&e.length>0){for(var t=new THREE.Box3,i=0,r=e.length;i<r;++i)t.union(e[i]);return t}return null}},{key:"getBoundingBoxesOnDemand",value:function(){var e=this.getUsedLayerIdxData();return e?e.boundingBoxes:null}},{key:"setConditionsOnDemandLoad",value:function(e){var t={};if(e&&e instanceof Array){t={};for(var i=0,r=e.length;i<r;i++)for(var n=e[i],a=this.formatLayerIds(n),o=0;o<a.length;o++)t.hasOwnProperty(a[o])||(t[a[o]]=!0)}else t=this.getCachedLayerKeys();var s=this._isLayerKeysChanged(t);return s&&(this.mapNeededConditions=t,this.setConditionsChanged(!0)),s}},{key:"_isLayerKeysChanged",value:function(e){var t=!1;if(void 0!==this.lastLayerKeyMap){var i=Object.keys(this.lastLayerKeyMap),r=Object.keys(e);if(i.length!==r.length)t=!0;else for(var n=0,a=r.length;n<a;n++){var o=r[n];if(void 0===this.lastLayerKeyMap[o]){t=!0;break}}}else t=!0;return t&&(this.lastLayerKeyMap=e),t}},{key:"setConditionsChanged",value:function(e){this.conditionsChanged=e}},{key:"getConditionsOnDemand",value:function(){return this.mapNeededConditions}},{key:"isConditionsChanged",value:function(){return this.conditionsChanged}}]),e}();s.ModelView.LayerBaseProvider=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._loadingOnDemand=!1,i}return _inherits(t,e),_createClass(t,[{key:"loadMpkOnDemand",value:function(e,t,i){for(var r=0,n=e.length;r<n;++r)this.mpkTaskManager.addTask(e[r]);var a=this;this.mpkTaskManager.processTasks(this._loadMpk.bind(this),t,function(){a._loadingOnDemand=!1,i&&i()})}},{key:"resetProcessState",value:function(e){this.loadTaskCount=0,this.maxLoadTaskCount=e,this._loadingOnDemand=!0}},{key:"dealProgressSegment",value:function(e,t){return s.GlobalData.BatchMergeEnabled&&this._loadingOnDemand?t*e.progressPercentage.load:t}},{key:"_loadLayerKey",value:function(){var e=this,t=this.fileLoader,i=this.url,r=this.model,n=this.handler.getLayerProvider();t.setResponseType(""),t.load(i.layerKeyUrl(),function(t){var i=new s.Loader.LayerKeyReader(t),r=[],a=i.getData();n.cacheLayerKeys(a);for(var o=0,l=i.getCount();o<l;++o){var u=i.getLayerKey(o),c=n.formatLayerIds(u);r.push(c[0])}e._loadLayer(r)},void 0,function(t){r.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MPK_ERROR,event:t}),e._onTaskFinished()})}},{key:"_loadLayer",value:function(e){var t=this,i=this.fileLoader,r=this.url,n=this.model,a=this.handler.getLayerProvider();i.setResponseType("arraybuffer"),i.load(r.layerUrl(),function(i){for(var r=new s.Loader.LayerReader(i),n=0,o=r.getLayerCount();n<o;++n)if(void 0!==e[n]){for(var l=[],u=r.getLayerData(n),c=r.getMpkList(n),h=0,d=c.length;h<d;++h)l.push(c[h]);a.cacheLayerData(e[n],{layerId:u.layer_id,boundingBox:u.boundingBox,mpkIdxs:l})}t._onTaskFinished()},void 0,function(e){n.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MPK_ERROR,event:e}),t._onTaskFinished()})}},{key:"delayLoadResources",value:function(e){var t=this.model.getConfig().metadata;if(0===t.lines)return void(e&&e());this.startCallback=null,this.progressCallback=null,this.finishCallback=e,this.loadTaskCount=0,this.maxLoadTaskCount=0,this.maxLoadTaskCount+=t.lines,t.lines&&this._loadLine()}}]),t}(s.ModelView.BaseLoader);s.ModelView.LayerBaseLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.layerDataLoaded=!1,i.loadedUserIdsObject=null,i.loadedUserIds=null,i.layerProvider=null,i.firstToLoad=!0,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.loadedUserIdsObject=null,this.loadedUserIds=null,this.layerProvider.destroy(),this.layerProvider=null}},{key:"getLayerProvider",value:function(){return this.layerProvider}},{key:"load",value:function(e){var t=this,i=this.model;this.loader.setNotifyProgress(e),this.loader.load(function(){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START})},function(e){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_PROGRESS,progress:e})},function(){t.processLoadCompleted(function(){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:i.id})})})}},{key:"unload",value:function(e,t){}},{key:"loadMpkOnDemand",value:function(e,t,i,r){var n=this,a=this.model,o=!e,l=function(e){a.manager.dispatchEvent({type:s.EVENTS.ON_DEMAND_LOAD_PROGRESS,progress:e})};if(this.firstToLoad)this.loader.delayLoadResources(function(){n.firstToLoad=!1,n.loader.finishCallback=null,n.prepareData(function(){n.loader.progressCallback=l,n.getLayerProvider().setConditionsOnDemandLoad(e),n._loadMpkOnDemand(o,t,i,r)})});else{n.loader.progressCallback=l;n.getLayerProvider().setConditionsOnDemandLoad(e)?n._loadMpkOnDemand(o,t,i,r):(t&&t(),r&&r())}}},{key:"_loadMpkOnDemand",value:function(e,t,i,r){var n=this,a=this.model;this.layerDataLoaded=!1,t&&t(),a.manager.dispatchEvent({type:s.EVENTS.ON_DEMAND_LOAD_START}),this.getLayerProvider().loadMpkOnDemand(e,function(e){n.dealData(e)},function(e,t){n.unload(e,t)},i,function(){n.layerDataLoaded=!0,a.manager.updateFilterManager(),console.log("load finish"),a.manager.dispatchEvent({type:s.EVENTS.ON_DEMAND_LOAD_COMPLETE,data:{boundingBox:a.manager.getLoadOnDemandDirector().getBoundingBoxForUsedComponent()}}),r&&r()})}},{key:"processLoadCompleted",value:function(e){var t=this.model;t.materialManager._updateTextureMapping(),t.materialManager._updateIBL(t),t.loaded=!0,t.updateOctreeNode(),requestAnimationFrame(function(){e&&e(),t.debut(t)})}},{key:"isAllReady",value:function(){return!(!this.isLoaded()||this.isHidden()||!this.isLayerDataLoaded())}},{key:"applyFilter",value:function(){if(this.isLoaded()&&this.isLayerDataLoaded()){var e=this.model.getModelDescriptor().getStandardUserIdsByCategory(this.loadedUserIds);if(e.length&&this.defaultManager.applyFilter(this.model,e),s.GlobalData.Instance){var t=this.model.getModelDescriptor().getInstancedUserIdsByCategory(this.loadedUserIds);t.length&&this.instancedManager.applyFilter(this.model,t)}}}},{key:"needUpdate",value:function(){return!!this.isLayerDataLoaded()}},{key:"clearData",value:function(){}},{key:"initData",value:function(e){}},{key:"dealMeshNodes",value:function(e){}},{key:"dealData",value:function(e){var t=this;this.clearData(),this.initData(function(){t.model.manager.loadOverrideMaterialsByDemand(function(){t.dealMeshNodes(e)},function(){t.dealMeshNodes(e)})})}},{key:"getLoadedUserIdsObject",value:function(){return this.loadedUserIdsObject}},{key:"isLayerDataLoaded",value:function(){return this.layerDataLoaded}},{key:"clearLoadedState",value:function(){this.layerDataLoaded=!1,this.loadedUserIdsObject=null,this.loadedUserIds=null}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.LayerBaseHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.layerProvider=new s.ModelView.LayerProvider(e),i}return _inherits(t,e),_createClass(t,[{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.addNodeInfoToOctantMap(),this.getLayerProvider().cacheNodeInfosWithLayerKey(),this.model.getModelDescriptor().destroyReader(),this.loaded=!0,e&&e()}},{key:"clearData",value:function(){this.model.clearNodeGroup(),this.model.clearMeshFromOctantMap(),this.getLayerProvider().clearData(),this.model.clearWireframeElementCount(),this.defaultManager.clearData(),this.instancedManager.clearData(),this.clearLoadedState()}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"initData",value:function(e){this.loadedUserIdsObject=this.getLayerProvider().getUserIdsOnDemand(),this.loadedUserIds=Object.keys(this.loadedUserIdsObject),e&&e()}},{key:"unload",value:function(e,t){var i=this;this.model.getModelDescriptor().clearReferencedMeshCacheByMpkIdxs(t,function(e){i.defaultManager.disposeGeometry(e)})}}]),t}(s.ModelView.LayerBaseHandler);s.ModelView.LayerHandler=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"loadLayerDataByIdxs",value:function(e,t,i,r){this.model.getLoader().resetProcessState(t.length),this.model.getLoader().loadMpkOnDemand(t,function(e,t){i&&i(t-e,t)},r)}},{key:"dealLayerDataLoading",value:function(e,t,i,r,n){var a=e.mpk;if(0===a.addIdxs.length&&0===a.removeIdxs.length)return void(t&&t(n));var o=!1;a.removeIdxs.length>0&&(o=!0,i&&i(null,a.removeIdxs)),a.addIdxs.length>0?this.loadLayerDataByIdxs(null,a.addIdxs,r,function(){t&&t(n)}):o?t&&t(n):n&&n()}}]),t}(s.ModelView.LayerBaseProvider);s.ModelView.LayerProvider=e}(),function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),t}(s.ModelView.DefaultDescriptor);s.ModelView.LayerDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.LayerDescriptor,i}return _inherits(t,e),_createClass(t,[{key:"loadSceneAndMpks",value:function(e){e.symbol&&this._loadSymbol(),this._loadScene(0),this._loadLayerKey(),s.GlobalData.BorderLineDelayLoaded||this._loadAllBorderlines(e)}},{key:"getSceneTaskCount",value:function(e){var t=2;return t+=e.symbol,s.GlobalData.BorderLineDelayLoaded||(t+=this.getAllBorderlineCount()),t}}]),t}(s.ModelView.LayerBaseLoader);s.ModelView.LayerLoader=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.tag="layer",r.defaultManager=new s.ModelView.BatchedManager(i),r.instancedManager=new s.ModelView.InstancedManager,r.loader=new s.ModelView.LayerLoader(r),r}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e,t){this.isAllReady()&&(this.prepareWireframe(this.model,t),this.model.getMaterialManager()._updateTextureMapping(this.model))}},{key:"dealMeshNodes",value:function(e){var t=this.model.getModelDescriptor().getInstancedUserIdsByCategory(this.loadedUserIds);t.length&&this.instancedManager.createMeshNodes(this.model,t);var i=this.model.getModelDescriptor().getStandardUserIdsByCategory(this.loadedUserIds);i.length?this.defaultManager.asyncCreateMeshNodes(this.model,i,e):e&&e()}}]),t}(s.ModelView.LayerHandler);s.ModelView.LayerBatchedHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.layerProvider=new s.ModelView.LayerSceneProvider(e),i}return _inherits(t,e),_createClass(t,[{key:"prepareData",value:function(e){this.dataReady||(this.dataReady=!0,this.settleData(e))}},{key:"settleData",value:function(e){this.loaded=!0,e&&e()}},{key:"clearData",value:function(){this.model.clearNodeGroup(),this.model.removeAllFromOctantMap(),this.model.getModelDescriptor().clearNodeInfosWithGeometryId(),this.getLayerProvider().clearData(),this.model.clearWireframeElementCount(),this.defaultManager.clearData(),this.instancedManager.clearData(),this.clearLoadedState()}},{key:"initData",value:function(e){this.model.getModelDescriptor().parseItemData(),this.model.getModelDescriptor().classifyAllNodeInfo(),this.getLayerProvider().cacheNodeInfosWithLayerKey(),this.addNodeInfoToOctantMap(),this.loadedUserIdsObject=this.getLayerProvider().getUserIdsOnDemand(),this.loadedUserIds=Object.keys(this.loadedUserIdsObject),e&&e()}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"unload",value:function(e,t){var i=this;this.model.getModelDescriptor().removeFromSceneReaderMap(e),this.model.getModelDescriptor().clearReferencedMeshCacheByMpkIdxs(t,function(e){i.defaultManager.disposeGeometry(e)})}}]),t}(s.ModelView.LayerBaseHandler);s.ModelView.LayerSceneHandler=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"clearData",value:function(){this.model.getModelDescriptor().clearNodeInfoCache(),this.clearNodeInfoCacheWithLayerKey()}},{key:"loadLayerDataByIdxs",value:function(e,t,i,r){var n=this.model.getLoader(),a=e.length,o=t.length;if(a&&o){var s=a+o;n.resetProcessState(s),n.loadLayerScenesOnDemand(e,function(e,t){i&&i(t-e,s)},function(){n.loadMpkOnDemand(t,function(e,t){i&&i(t-e+a,s)},r)})}else a?(n.resetProcessState(a),n.loadLayerScenesOnDemand(e,function(e,t){i&&i(t-e,t)},r)):o&&(n.resetProcessState(o),n.loadMpkOnDemand(t,function(e,t){i&&i(t-e,t)},r))}},{key:"dealLayerDataLoading",value:function(e,t,i,r,n){var a=e.mpk,o=e.layerScene;if(0===a.addIdxs.length&&0===a.removeIdxs.length&&0===o.addIdxs.length&&0===o.removeIdxs.length)return void(t&&t(n));var s=!1;(a.removeIdxs.length>0||o.removeIdxs.length>0)&&(s=!0,i&&i(o.removeIdxs,a.removeIdxs)),o.addIdxs.length>0||a.addIdxs.length>0?this.loadLayerDataByIdxs(o.addIdxs,a.addIdxs,r,function(){t&&t(n)}):s?t&&t(n):n&&n()}}]),t}(s.ModelView.LayerBaseProvider);s.ModelView.LayerSceneProvider=e}(),function(){var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"parseItemData",value:function(){var e=this.getSceneReaderMap();for(var t in e)for(var i=e[t],r=0,n=i.header.itemCount;r<n;++r)this._readItemData(i,r,this.getCellId(t,r));return!0}},{key:"parseItemDataByCellId",value:function(e){var t=this.getSceneReaderMap();for(var i in t){var r=t[i],n=this.getItemIdsBy(e,i);if(n)for(var a=0,o=n.length;a<o;++a){var s=n[a];this._readItemData(r,s,this.getCellId(i,s))}}return!0}},{key:"getLayerIdsByCellId",value:function(e){return this.cellIdMap&&this.cellIdMap[e]?Object.keys(this.cellIdMap[e]):null}},{key:"getItemIdsBy",value:function(e,t){return this.cellIdMap&&this.cellIdMap[e]?this.cellIdMap[e][t]:null}},{key:"cacheToCellIdMap",value:function(e,t,i){this.layerIdMap||(this.layerIdMap={}),this.layerIdMap[t]||(this.layerIdMap[t]={}),this.layerIdMap[t][i]=e,this.cellIdMap||(this.cellIdMap={}),this.cellIdMap[e]||(this.cellIdMap[e]={}),this.cellIdMap[e][t]||(this.cellIdMap[e][t]=[]),this.cellIdMap[e][t].push(i)}},{key:"getCellId",value:function(e,t){return this.layerIdMap&&this.layerIdMap[e]?this.layerIdMap[e][t]||0:0}},{key:"isOctreeOuter",value:function(e){var t=this.octreeRootNode.layer;return t||(t=this.octreeRootNode.inner||this.octreeRootNode.outer),!(e.x<t.min.x||e.x>t.max.x||e.y<t.min.y||e.y>t.max.y||e.z<t.min.z||e.z>t.max.z)}},{key:"isUseInnerAndOuterOctree",value:function(){return!this.octreeRootNode.layer}},{key:"getOctreeRoots",value:function(e){this.octreeRootNode.layer?e.push(this.octreeRootNode.layer):(this.octreeRootNode.inner&&e.push(this.octreeRootNode.inner),this.octreeRootNode.outer&&e.push(this.octreeRootNode.outer))}},{key:"updateOctreeNode",value:function(e){this.octreeRootNode.layer?this.updateOctreeNodeBy(this.octreeRootNode.layer,e):(this.octreeRootNode.inner&&this.updateOctreeNodeBy(this.octreeRootNode.inner,e),this.octreeRootNode.outer&&this.updateOctreeNodeBy(this.octreeRootNode.outer,e))}}]),t}(s.ModelView.DefaultDescriptor);s.ModelView.LayerSceneDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.layerSceneTaskManager=new s.TaskManager,i.descriptor=new s.ModelView.LayerSceneDescriptor,i}return _inherits(t,e),_createClass(t,[{key:"loadLayerScenesOnDemand",value:function(e,t,i){for(var r=0,n=e.length;r<n;++r)this.layerSceneTaskManager.addTask(e[r]);this.layerSceneTaskManager.processTasks(this._loadLayerScene.bind(this),t,i)}},{key:"loadSceneAndMpks",value:function(e){e.symbol&&this._loadSymbol(),this._loadLayerCellIndex(),this._loadLayerOctree(),this._loadLayerKey(),s.GlobalData.BorderLineDelayLoaded||this._loadAllBorderlines(e)}},{key:"getSceneTaskCount",value:function(e){var t=3;return t+=e.symbol,s.GlobalData.BorderLineDelayLoaded||(t+=this.getAllBorderlineCount()),t}},{key:"_loadLayerCellIndex",value:function(){var e=this,t=this.fileLoader,i=this.url,r=i.layerSceneCell();t.setResponseType("arraybuffer"),t.load(r,function(t){e._parseLayerCellIndex(t),e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_parseLayerCellIndex",value:function(e){for(var t=new s.Loader.LayerIndexReader(e),i=this.descriptor,r=0,n=t.cell_count;r<n;r++)for(var a=t.getCell(r),o=a.itemIndex;o<a.itemCount;o++){var l=t.getLayerIndex(o);i.cacheToCellIdMap(a.cellId,l.layer_id,l.item_index)}}},{key:"_loadLayerOctree",value:function(){var e=this.fileLoader,t=this.url,i=this;e.setResponseType("arraybuffer"),e.load(t.layerOctree(),function(e){i._parseLayerOctree(e),i._onTaskFinished()},void 0,function(e){i._onTaskFinished()})}},{key:"_parseLayerOctree",value:function(e){this.descriptor.octreeRootNode.layer=this._getOctreeRootNode(e)}},{key:"_loadLayerScene",value:function(e,t){var i=this,r=this.model,n=this.fileLoader,a=this.url;n.setResponseType("arraybuffer"),n.load(a.layerSceneUrl(e),function(r){i._parseScene(r,e),t(),i._onTaskFinished()},void 0,function(e){r.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_MPK_ERROR,event:e}),i._onTaskFinished()})}}]),t}(s.ModelView.LayerBaseLoader);s.ModelView.LayerSceneLoader=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.tag="layer",r.defaultManager=new s.ModelView.BatchedManager(i),r.instancedManager=new s.ModelView.InstancedManager,r.loader=new s.ModelView.LayerSceneLoader(r),r}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e,t){this.isAllReady()&&(this.prepareWireframe(this.model,t),this.model.getMaterialManager()._updateTextureMapping(this.model))}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"dealMeshNodes",value:function(e){var t=this.model.getModelDescriptor().getInstancedUserIdsByCategory(this.loadedUserIds);t.length&&this.instancedManager.createMeshNodes(this.model,t);var i=this.model.getModelDescriptor().getStandardUserIdsByCategory(this.loadedUserIds);i.length?this.defaultManager.asyncCreateMeshNodes(this.model,i,e):e&&e()}}]),t}(s.ModelView.LayerSceneHandler);s.ModelView.LayerSceneBatchedHandler=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.requestCount=0,this.maxRequestCount=1e5,this.loading=!1,this.delayIntervalTime=300}return _createClass(e,[{key:"destroy",value:function(){this.manager=null,this.currentConditions=null,this.delayLoadTimer&&(clearTimeout(this.delayLoadTimer),this.delayLoadTimer=null)}},{key:"isValidModel",value:function(e){return!(e.isEmptyScene()||!e.isLayerData())}},{key:"loadMpkOnDemandByConditionsWithDelay",value:function(e,t,i,r){var n=this,a=this.delayIntervalTime;!function(){n.delayLoadTimer&&clearTimeout(n.delayLoadTimer),n.delayLoadTimer=setTimeout(function(){n.loadMpkOnDemandByConditions(e,t,i,r)},a)}()}},{key:"loadMpkOnDemandByConditions",value:function(e,t,i,r){function n(e){var o=e,s=a.currentConditions;return function(){a._loadMpkOnDemandByConditions(s,t,i,function(){o!==a.requestCount?requestAnimationFrame(n(a.requestCount)):(a.loading=!1,r&&r(s),s=null)})}}if(this.currentConditions=e,++this.requestCount,this.requestCount>this.maxRequestCount&&(this.requestCount=0),!this.loading){this.loading=!0;var a=this;requestAnimationFrame(n(this.requestCount))}}},{key:"_loadMpkOnDemandByConditions",value:function(e,t,i,r){var n=this;this.manager.traverseModels(function(a){n.isValidModel(a)&&a._getHandler().loadMpkOnDemand(e,t,i,r)})}},{key:"getBoundingBoxOnDemand",value:function(){var e=new THREE.Box3,t=this;return this.manager.traverseModels(function(i){if(t.isValidModel(i)){var r=i._getHandler().getLayerProvider().getUnionBoundingBoxOnDemand();r&&e.union(r)}}),e.isEmpty()?null:e}},{key:"isLoading",value:function(){return this.loading}},{key:"getBoundingBoxForUsedComponent",value:function(){var e=this.manager,t=new THREE.Box3;return e.traverseModels(function(i){var r=i.getLoadedUserIdsObject();r&&t.union(e.getBoundingBoxByIds(r))}),t.isEmpty()?null:t}}]),e}();s.LoadOnDemandDirector=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.nodeInfoMapOnSceneId={},e.symbolBufferData=null,e}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.nodeInfoMapOnSceneId=null,this.symbolBufferData=null}},{key:"updateNodeInfos",value:function(){for(var e=this.nodeInfoMapOnSceneId,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=Object.keys(n),o=0,l=a.length;o<l;o++)for(var u=a[o],c=n[u],h=this.userIdReader?this.userIdReader.getString(u):u,d=this.userDataReader?this.userDataReader.getUserData(c[0].userDataId):null,f=0,p=c.length;f<p;f++){var m=c[f];m.userId=h,m.userData=d,m.name=m.userId,m.boundingBox=new THREE.Box3(new THREE.Vector3(m.boundingBox.min.x,m.boundingBox.min.y,m.boundingBox.min.z),new THREE.Vector3(m.boundingBox.max.x,m.boundingBox.max.y,m.boundingBox.max.z)),m.state=s.EnumObjectState.Visible,m.material=null,m.parameterizedDesc=this._isParameterizedNode(m),m.instanceOrNot=this._isInstancedNode(m),this._classifyNodeInfo(m)}}}]),t}(s.ModelView.BaseDescriptor);s.ModelView.WorkerBatchedDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.WorkerBatchedDescriptor,i}return _inherits(t,e),_createClass(t,[{key:"parseSymbol",value:function(e){this.descriptor.symbolBufferData=e}},{key:"loadSceneAndMpks",value:function(e){var t=this;e.symbol?this._loadSymbol(function(){t._loadScene(0)}):t._loadScene(0),e.lines&&this._loadLine(),e.mpks&&this._loadAllMpks(e.mpks),s.GlobalData.BorderLineDelayLoaded||this._loadAllBorderlines(e)}},{key:"getSceneTaskCount",value:function(e){var t=e.scenes;return t+=e.symbol,t+=e.lines,t+=e.mpks,s.GlobalData.BorderLineDelayLoaded||(t+=this.getAllBorderlineCount()),t}},{key:"_loadScene",value:function(e){var t=this,i=this.model,r=this.url,n=this.fileLoader;n.setResponseType("arraybuffer"),n.load(r.sceneUrl(e),function(i){t._parseScene(i,e)},void 0,function(e){i.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_SCENE_ERROR,event:e}),t._onTaskFinished()})}},{key:"_parseScene",value:function(e,t){var i=this,r=s.Workers.WorkerLib.getSceneParseWorker();r.addEventListener("message",function(e){var n=e.data;i.descriptor.nodeInfoMapOnSceneId[t]=JSON.parse(s.Utils.ab2str(n.nodeInfoMap)),i._onTaskFinished(),r.terminate()},!1);var n=this.descriptor.symbolBufferData?[e,this.descriptor.symbolBufferData]:[e];r.postMessage({sceneBufferData:e,symbolBufferData:this.descriptor.symbolBufferData},n)}}]),t}(s.ModelView.BaseLoader);s.ModelView.WorkerBatchedLoader=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"_getUV2BufferData",value:function(e){var t=e.getLoader().uv2MapItem,i=e.getLoader().uv2Buffer;if(e.lightmap&&t&&i)return{uv2MapItem:t,uv2Buffer:i}}},{key:"_createGeometries",value:function(e,t){var i=this,r=this._classifyGeometryIdxIds(e),n=!0,a=0,o=r.generalGeometryIdxIds.length?1:0;o+=r.parameterizedGeometryIdxIds.length?1:0,o>0&&(n=!1),r.generalGeometryIdxIds.length&&this._dealGeneralGeometries(e,r.generalGeometryIdxIds,function(){++a===o&&i._makeMeshNodes(e,t)}),r.parameterizedGeometryIdxIds.length&&this._dealParameterizedGeometries(e,r.parameterizedGeometryIdxIds,function(){++a===o&&i._makeMeshNodes(e,t)}),n&&this._makeMeshNodes(e,t)}},{key:"_classifyGeometryIdxIds",value:function(e){for(var t=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),i=[],r=[],n=Object.keys(t),a=0,o=n.length;a<o;a++){var s=n[a],l=t[s];l.length<1||(l[0].parameterizedDesc?i.push(s):r.push(s))}return{generalGeometryIdxIds:r,parameterizedGeometryIdxIds:i}}},{key:"_dealGeneralGeometries",value:function(e,t,i){for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=e.getModelDescriptor().getReferencedMeshBufferData(),a=this.mapMaterialIdToMergedNode,o=[],l=[],u=0,c=t.length;u<c;u++){var h=t[u],d=n[h];d&&(d.meshId=h,l.push(d),-1===o.indexOf(d.P.buffer)&&o.push(d.P.buffer),-1===o.indexOf(d.I.buffer)&&o.push(d.I.buffer),d.N&&-1===o.indexOf(d.N.buffer)&&o.push(d.N.buffer),d.UV&&-1===o.indexOf(d.UV.buffer)&&o.push(d.UV.buffer))}var f=s.Workers.WorkerLib.getMeshCreateWorker();f.addEventListener("message",function(e){for(var t=e.data,r=t.dataBuffers,n=Object.keys(r),o=0,s=n.length;o<s;o++)for(var l=n[o],u=r[l],c=0,h=u.length;c<h;c++){var d=u[c],p=d.bufferData,m=d.indices,v=new THREE.BufferGeometry;v._visible=!0,v.setIndex(new THREE.BufferAttribute(new Uint32Array(p.index),1)),v.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p.position),3)),p.normal>0&&v.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(p.normal),3)),p.uv>0&&v.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(p.uv),2)),p.uv2>0&&v.addAttribute("uv2",new THREE.BufferAttribute(new Float32Array(p.uv2),2)),a[l]||(a[l]=[]),a[l].push({geometry:v,indices:m})}i&&i(),f.terminate()},!1);var p={type:"unique",segmentMergeEnabled:!!s.GlobalData.SegmentedBatchMergeEnable,maxIndicesNumberPerBathSegment:s.GlobalData.maxIndicesNumberPerBathSegment,nodeItemType:s.ModelView.BaseDescriptor.EnumNodeItemType,nodeInfoMap:r,uv2BufferData:this._getUV2BufferData(e)},m=s.Utils.str2ab(JSON.stringify(p));o.push(m),f.postMessage({brief:m,dataBuffers:l},o)}},{key:"_dealParameterizedGeometries",value:function(e,t,i){for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=this.mapMaterialIdToMergedNode,a=[],o=[],l=0,u=t.length;l<u;l++)a.push({meshId:t[l]});var c=s.Workers.WorkerLib.getMeshCreateWorker();c.addEventListener("message",function(e){for(var t=e.data,r=t.dataBuffers,a=Object.keys(r),o=0,s=a.length;o<s;o++)for(var l=a[o],u=r[l],h=0,d=u.length;h<d;h++){var f=u[h],p=f.bufferData,m=f.indices,v=new THREE.BufferGeometry;v._visible=!0,v.setIndex(new THREE.BufferAttribute(new Uint32Array(p.index),1)),v.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p.position),3)),p.normal>0&&v.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(p.normal),3)),p.uv>0&&v.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(p.uv),2)),n[l]||(n[l]=[]),n[l].push({geometry:v,indices:m})}i&&i(),c.terminate()},!1);var h={type:"parameterized",segmentMergeEnabled:!!s.GlobalData.SegmentedBatchMergeEnable,maxIndicesNumberPerBathSegment:s.GlobalData.maxIndicesNumberPerBathSegment,nodeItemType:s.ModelView.BaseDescriptor.EnumNodeItemType,nodeInfoMap:r},d=s.Utils.str2ab(JSON.stringify(h));o.push(d),c.postMessage({brief:d,dataBuffers:a},o)}}]),t}(s.ModelView.BatchedMeshManager);s.ModelView.WorkerBatchedMeshManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.BatchedWireframeManager);s.ModelView.WorkerBatchedWireframeManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.WorkerBatchedMeshManager(e),e.wireframeManager=new s.ModelView.WorkerBatchedWireframeManager(e),e}return _inherits(t,e),t}(s.ModelView.BatchedBaseManager);s.ModelView.WorkerBatchedManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedMeshManager);s.ModelView.WorkerBatchedInstancedMeshManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedWireframeManager);s.ModelView.WorkerBatchedInstancedWireframeManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.WorkerBatchedInstancedMeshManager(e),e.wireframeManager=new s.ModelView.WorkerBatchedInstancedWireframeManager(e),e}return _inherits(t,e),t}(s.ModelView.InstancedBaseManager);s.ModelView.WorkerBatchedInstancedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="batched",i.defaultManager=new s.ModelView.WorkerBatchedManager,i.instancedManager=new s.ModelView.WorkerBatchedInstancedManager,i.loader=new s.ModelView.WorkerBatchedLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepareData",value:function(e){this.dataReady||(this.dataReady=!0,this.settleData(e))}},{key:"settleData",value:function(e){this.loader.descriptor.updateNodeInfos(),this.model.getModelDescriptor().cacheNodeInfosOnGeometryId(),this.addNodeInfoToOctantMap(),this.createMeshNodes(e)}},{key:"createMeshNodes",value:function(e){var t=this,i=this.model;this.defaultManager.createMeshNodes(i,function(){i.getMaterialManager()._updateTextureMapping(),t.clearCachedData(i),t.loaded=!0,e&&e()}),this.instancedManager.createMeshNodes(i)}}]),t}(s.ModelView.BatchedBaseHandler);s.ModelView.WorkerBatchedHandler=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.bmeshIdReader=null,e.nodeInfoMapOnSceneId={},e.symbolBufferData=null,e}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.bmeshIdReader=null,this.nodeInfoMapOnSceneId=null,this.symbolBufferData=null}},{key:"convertGeometryId",value:function(e){var t=this.bmeshIdReader.getBMeshId(e);return void 0===t&&(t=e),t}},{key:"updateNodeInfos",value:function(){
for(var e=this.nodeInfoMapOnSceneId,t=Object.keys(e),i=0,r=t.length;i<r;i++)for(var n=e[t[i]],a=Object.keys(n),o=0,l=a.length;o<l;o++)for(var u=a[o],c=n[u],h=this.userIdReader?this.userIdReader.getString(u):u,d=this.userDataReader?this.userDataReader.getUserData(c[0].userDataId):null,f=0,p=c.length;f<p;f++){var m=c[f];m.userId=h,m.userData=d,m.name=m.userId,m.boundingBox=new THREE.Box3(new THREE.Vector3(m.boundingBox.min.x,m.boundingBox.min.y,m.boundingBox.min.z),new THREE.Vector3(m.boundingBox.max.x,m.boundingBox.max.y,m.boundingBox.max.z)),m.state=s.EnumObjectState.Visible,m.material=null,m.parameterizedDesc=this._isParameterizedNode(m),m.instanceOrNot=this._isInstancedNode(m),this._classifyNodeInfo(m)}}}]),t}(s.ModelView.BaseDescriptor);s.ModelView.WorkerDataBatchedDescriptor=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.WorkerDataBatchedDescriptor,i}return _inherits(t,e),_createClass(t,[{key:"parseSymbol",value:function(e){this.descriptor.symbolBufferData=e}},{key:"_loadScene",value:function(e){var t=this,i=this.model,r=this.url,n=this.fileLoader;n.setResponseType("arraybuffer"),n.load(r.sceneUrl(e),function(i){t._parseScene(i,e)},void 0,function(e){i.dispatchEvent({type:s.LOADERROREVENTS.LOAD_ERROR,errorType:s.LOADERROREVENTS.LOAD_SCENE_ERROR,event:e}),t._onTaskFinished()})}},{key:"_parseScene",value:function(e,t){var i=this,r=s.Workers.WorkerLib.getSceneParseWorker();r.addEventListener("message",function(e){var n=e.data;i.descriptor.nodeInfoMapOnSceneId[t]=JSON.parse(s.Utils.ab2str(n.nodeInfoMap)),i._onTaskFinished(),r.terminate()},!1);var n=this.descriptor.symbolBufferData?[e,this.descriptor.symbolBufferData]:[e];r.postMessage({sceneBufferData:e,symbolBufferData:this.descriptor.symbolBufferData},n)}}]),t}(s.ModelView.DataBatchedBaseLoader);s.ModelView.WorkerDataBatchedLoader=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"_createGeometries",value:function(e,t){var i=this,r=this._classifyGeometryIdxIds(e),n=!0,a=0,o=r.sharedGeometryIdxIds.length?1:0;o+=r.lineGeometryIdxIds.length?1:0,o+=r.parameterizedGeometryIdxIds.length?1:0,o>0&&(n=!1),r.sharedGeometryIdxIds.length&&this._dealSharedGeometries(e,r.sharedGeometryIdxIds,function(){++a===o&&i._makeMeshNodes(e,t)}),r.lineGeometryIdxIds.length&&this._dealLineGeometries(e,r.lineGeometryIdxIds,function(){++a===o&&i._makeMeshNodes(e,t)}),r.parameterizedGeometryIdxIds.length&&this._dealParameterizedGeometries(e,r.parameterizedGeometryIdxIds,function(){++a===o&&i._makeMeshNodes(e,t)}),r.uniqueGeometryIdxIds.length&&this._dealUniqueGeometries(e,r.uniqueGeometryIdxIds),n&&this._makeMeshNodes(e,t)}},{key:"_classifyGeometryIdxIds",value:function(e){for(var t=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),i=e.getModelDescriptor().getReferencedMeshBufferData(),r=Object.keys(i),n=[],a=[],o=[],l=[],u=0,c=r.length;u<c;u++){var h=r[u],d=i[h],f=d.IndexInfos;if(f){if(f.length<1)continue;var p=t[f[0].meshId];if(!p||p.length<1)continue;p[0].instanceOrNot||p[0].type!==s.ModelView.BaseDescriptor.EnumNodeItemType.MESH_REF?n.push(h):a.push(h)}else{var p=t[h];p&&p.length&&o.push(h)}}if(!s.GlobalData.Instance)for(var m=Object.keys(t),v=0,g=m.length;v<g;v++){var y=m[v],p=t[y];p.length<1||p[0].parameterizedDesc&&l.push(y)}return{uniqueGeometryIdxIds:n,sharedGeometryIdxIds:a,lineGeometryIdxIds:o,parameterizedGeometryIdxIds:l}}},{key:"_dealUniqueGeometries",value:function(e,t){for(var i=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),r=e.getModelDescriptor().getReferencedMeshBufferData(),n=this.mapMaterialIdToMergedNode,a=0,o=t.length;a<o;a++){var s=t[a],l=r[s],u=l.IndexInfos;e.lightmap&&(l=this.getAttributeForLightmapWithDataMerged(l,e,s));var c,h,d=!(!l.UV||!l.UV.byteLength&&!l.UV.length),f=void 0;for(c=0,h=u.length;c<h;c++){var p=i[u[c].meshId];if(p&&0!==p.length){e.lightmap&&(u[c].lightmapIdx=l.lightmapIdx,u[c].positionStart=3*u[c].indexStart,u[c].positionCount=3*u[c].indexCount),f=u[c].meshId;for(var m=0,v=p.length;m<v;m++)p[m].uv=d}}if(void 0!==f){var g=i[f][0],y={},M=this._getMaterialKeyByNodeInfo(g);for(void 0===n[M]&&(n[M]=[]),c=0,h=u.length;c<h;c++)i[u[c].meshId]&&(g=i[u[c].meshId][0],void 0===y[g.userId]&&(y[g.userId]=[]),u[c].userId=g.userId,u[c].nodeId=g.nodeId,u[c].boundingBox=g.boundingBox,y[g.userId].push(u[c]));var E=new THREE.BufferGeometry;E._visible=!0,E.setIndex(new THREE.BufferAttribute(new Uint32Array(l.I),1)),E.addAttribute("position",new THREE.BufferAttribute(new Float32Array(l.P),3)),l.N&&(l.N.byteLength||l.N.length)&&E.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(l.N),3)),d&&E.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(l.UV),2)),l.UV2&&(E.addAttribute("uv2",new THREE.BufferAttribute(new Float32Array(l.UV2),2)),E.lightmapIdx=l.lightmapIdx),n[M].push({geometry:E,indices:y})}}}},{key:"_getUV2BufferData",value:function(e){var t=e.getLoader().uv2MapItem,i=e.getLoader().uv2Buffer;if(e.lightmap&&t&&i)return{uv2MapItem:t,uv2Buffer:i}}},{key:"_dealSharedGeometries",value:function(e,t,i){for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=e.getModelDescriptor().getReferencedMeshBufferData(),a=this.mapMaterialIdToMergedNode,o=[],l=[],u=0,c=t.length;u<c;u++){var h=t[u],d=n[h];d&&(l.push(d),o.push(d.P),o.push(d.I),d.N&&o.push(d.N),d.UV&&o.push(d.UV))}var f=s.Workers.WorkerLib.getMeshCreateWorker();f.addEventListener("message",function(e){for(var t=e.data,r=t.dataBuffers,n=Object.keys(r),o=0,s=n.length;o<s;o++)for(var l=n[o],u=r[l],c=0,h=u.length;c<h;c++){var d=u[c],p=d.bufferData,m=d.indices,v=new THREE.BufferGeometry;v._visible=!0,v.setIndex(new THREE.BufferAttribute(new Uint32Array(p.index),1)),v.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p.position),3)),p.normal>0&&v.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(p.normal),3)),p.uv>0&&v.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(p.uv),2)),p.uv2>0&&v.addAttribute("uv2",new THREE.BufferAttribute(new Float32Array(p.uv2),2)),a[l]||(a[l]=[]),a[l].push({geometry:v,indices:m})}i&&i(),f.terminate()},!1);var p={type:"shared",segmentMergeEnabled:!!s.GlobalData.SegmentedBatchMergeEnable,maxIndicesNumberPerBathSegment:s.GlobalData.maxIndicesNumberPerBathSegment,nodeItemType:s.ModelView.BaseDescriptor.EnumNodeItemType,nodeInfoMap:r,uv2BufferData:this._getUV2BufferData(e)},m=s.Utils.str2ab(JSON.stringify(p));o.push(m),f.postMessage({brief:m,dataBuffers:l},o)}},{key:"_dealLineGeometries",value:function(e,t,i){for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=e.getModelDescriptor().getReferencedMeshBufferData(),a=this.mapMaterialIdToMergedNode,o=[],l=[],u=0,c=t.length;u<c;u++){var h=t[u],d=n[h];d&&(d.meshId=h,l.push(d),-1===o.indexOf(d.P.buffer)&&o.push(d.P.buffer),-1===o.indexOf(d.I.buffer)&&o.push(d.I.buffer))}var f=s.Workers.WorkerLib.getMeshCreateWorker();f.addEventListener("message",function(e){for(var t=e.data,r=t.dataBuffers,n=Object.keys(r),o=0,s=n.length;o<s;o++)for(var l=n[o],u=r[l],c=0,h=u.length;c<h;c++){var d=u[c],p=d.bufferData,m=d.indices,v=new THREE.BufferGeometry;v._visible=!0,v.setIndex(new THREE.BufferAttribute(new Uint32Array(p.index),1)),v.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p.position),3)),a[l]||(a[l]=[]),a[l].push({geometry:v,indices:m})}i&&i(),f.terminate()},!1);var p={type:"unique",segmentMergeEnabled:!!s.GlobalData.SegmentedBatchMergeEnable,maxIndicesNumberPerBathSegment:s.GlobalData.maxIndicesNumberPerBathSegment,nodeItemType:s.ModelView.BaseDescriptor.EnumNodeItemType,nodeInfoMap:r,uv2BufferData:this._getUV2BufferData(e)},m=s.Utils.str2ab(JSON.stringify(p));o.push(m),f.postMessage({brief:m,dataBuffers:l},o)}},{key:"_dealParameterizedGeometries",value:function(e,t,i){for(var r=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),n=this.mapMaterialIdToMergedNode,a=[],o=0,l=t.length;o<l;o++)a.push({meshId:t[o]});var u=s.Workers.WorkerLib.getMeshCreateWorker();u.addEventListener("message",function(e){for(var t=e.data,r=t.dataBuffers,a=Object.keys(r),o=0,s=a.length;o<s;o++)for(var l=a[o],c=r[l],h=0,d=c.length;h<d;h++){var f=c[h],p=f.bufferData,m=f.indices,v=new THREE.BufferGeometry;v._visible=!0,v.setIndex(new THREE.BufferAttribute(new Uint32Array(p.index),1)),v.addAttribute("position",new THREE.BufferAttribute(new Float32Array(p.position),3)),p.normal>0&&v.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(p.normal),3)),p.uv>0&&v.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(p.uv),2)),n[l]||(n[l]=[]),n[l].push({geometry:v,indices:m})}i&&i(),u.terminate()},!1);var c={type:"parameterized",segmentMergeEnabled:!!s.GlobalData.SegmentedBatchMergeEnable,maxIndicesNumberPerBathSegment:s.GlobalData.maxIndicesNumberPerBathSegment,nodeItemType:s.ModelView.BaseDescriptor.EnumNodeItemType,nodeInfoMap:r},h=s.Utils.str2ab(JSON.stringify(c));transferableObjects.push(h),u.postMessage({brief:h,dataBuffers:a})}}]),t}(s.ModelView.BatchedMeshManager);s.ModelView.WorkerDataBatchedMeshManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"_dealSharedBorderLines",value:function(e){var t=e.getModelDescriptor().getSharedBorderLineCache();if(t){console.time("T_createBorderLines");for(var i=this,r=[],n=0,a=t.length;n<a;n++){var o=t[n];r.push(o.P),r.push(o.I);for(var l=o.IndexInfos,u=0,c=l.length;u<c;u++)l[u].meshId=e.getModelDescriptor().convertGeometryId(l[u].meshId)}var h=e.getModelDescriptor().getStandardNodeInfosOnGeometryId(),d=e.getWireframeMaterial(),f=s.Workers.WorkerLib.getBorderLineCreateWorker();f.addEventListener("message",function(e){var t=e.data,r=JSON.parse(t.groupIndices),n=t.bufferData.index,a=t.bufferData.position,o=new THREE.BufferGeometry;o.setIndex(new THREE.BufferAttribute(n.array,n.itemSize,n.normalized)),o.addAttribute("position",new THREE.BufferAttribute(a.array,a.itemSize,a.normalized));var s=new THREE.LineSegments(o,d);s._indicesGroup=r,i.wireframeLineSegments.push(s),console.timeEnd("T_createBorderLines"),f.terminate()},!1);var p=s.Utils.str2ab(JSON.stringify(h));r.push(p),f.postMessage({infos:p,bufferDataArray:t},r)}}}]),t}(s.ModelView.DataBatchedWireframeManager);s.ModelView.WorkerDataBatchedWireframeManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.WorkerDataBatchedMeshManager(e),e.wireframeManager=new s.ModelView.WorkerDataBatchedWireframeManager(e),e}return _inherits(t,e),t}(s.ModelView.BatchedBaseManager);s.ModelView.WorkerDataBatchedManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedMeshManager);s.ModelView.WorkerDataBatchedInstancedMeshManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedWireframeManager);s.ModelView.WorkerDataBatchedInstancedWireframeManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.WorkerDataBatchedInstancedMeshManager(e),e.wireframeManager=new s.ModelView.WorkerDataBatchedInstancedWireframeManager(e),e}return _inherits(t,e),t}(s.ModelView.InstancedBaseManager);s.ModelView.WorkerDataBatchedInstancedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="worker_merge_data",i.defaultManager=new s.ModelView.WorkerDataBatchedManager,i.instancedManager=new s.ModelView.WorkerDataBatchedInstancedManager,i.loader=new s.ModelView.WorkerDataBatchedLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepareData",value:function(e){this.dataReady||(this.dataReady=!0,this.settleData(e))}},{key:"settleData",value:function(e){this.loader.descriptor.updateNodeInfos(),this.model.getModelDescriptor().cacheNodeInfosOnGeometryId(),this.addNodeInfoToOctantMap(),this.createMeshNodes(e)}}]),t}(s.ModelView.DataBatchedBaseHandler);s.ModelView.WorkerDataBatchedHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.manager=e,i.occlusionVisibleOctant=[],i.usedNodeInfoMap={},i.lineNodes={},i.activeMeshMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.clearData(),this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.activeMeshMap=null,this.manager=null,this.occlusionVisibleOctant=null,this.usedNodeInfoMap=null,this.lineNodes=null}},{key:"disposeLineNodes",value:function(){for(var e in this.lineNodes){var t=this.lineNodes[e];t.geometry.dispose(),t=null,delete this.lineNodes[e]}}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearActiveMeshMap(),this.disposeGeometries(),this.disposeLineNodes(),this.usedNodeInfoMap={},this.occlusionVisibleOctant.length=0}},{key:"updateNode",value:function(e,t,i){var r,n=this,a=e.getFilter()._hasOverrideMaterialFilter(),o=e.selectedMaterial;r=0===i?n._getUsableMaterial(e,t,o,a):n._getUsableMaterial(e,t,null,a),s.ModelView.BaseDescriptor.isLineNode(t)?n._dealLineSegments(e,t,r):n._dealMeshes(e,t,r),r=null}},{key:"cullNodes",value:function(e,t,i){var r=this._getUsedNodeInfosByOctantId(t),n=this;if(r||(this.manager.traverseNodeInfoMapByOctantId(t,function(t,i){n._isSatisfied(e,i)&&n._cacheToUsedNodeInfoMap(t,i)}),r=this._getUsedNodeInfosByOctantId(t)),!r)return i;for(var a=0,o=r.length;a<o&&(i=this.collectNodeInfo(e,r[a],i),!this.manager.isFull(e,i));a++);return i}},{key:"_getUsableMaterial",value:function(e,t,i,r){var n=t.materialId,a=t.userId,o=e.materialManager.materials,l=e.manager.sceneState,u=e.getFilter(),c=null,h=l.isSelected(a);1!=h||u._isPickable(t)||(h=!1),i?s.GlobalData.PickingEffect?c=u._getOverrideMaterial(t):(c=u._getOverrideMaterial(t))&&!h||(c=i):r&&(c=u._getOverrideMaterial(t));var d=e.manager.getOverrideMaterialByNodeInfo(t,e.materialManager.getMaterialById(t.materialId));return c=c||d||o[n]||s.MaterialUtil.getDefaultStandardMaterial(),s.GlobalData.Hover&&l.hoverId===a&&!1===h&&(c=l.getHoverMaterial(c)),c}},{key:"collectNodeInfo",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter(),a=r._hasOverrideMaterialFilter(),o=e.manager.sceneState.selectionSet,s=r._hasRenderPromotionFilter(),l=e.manager.getCategoriesFromHighPriority("inner");return e.isReplacedUserId(t.userId)||e.isHiddenSourceObjectUserId(t.userId)?i:n&&r._isHiddenFileId(t)||!1===r._isVisible(t)?i:o[t.userId]||a&&r._hasHighPriorityOverrideMaterial(t)?(this.manager.addToPriorityNodesSet(0,t),++i):s&&r._isRenderPromotion(t)||t.userData&&t.userData.categoryId&&l[t.userData.categoryId]?(this.manager.addToPriorityNodesSet(1,t),++i):(this.manager.isFull(e,i)||(this.manager.addToPriorityNodesSet(2,t),i++),i)}},{key:"getMeshesByUserIds",value:function(e,t,i){for(var r=e.pool._pool,n=t.toString(),a=i.toString(),o=0;o<r.length;o++){var s=r[o];if(s.name==n||s.name==a){var l={};l.mesh=s,l.matrix=s.matrix;var u=s.geometry.boundingBox;u||(s.geometry.computeBoundingBox(),u=l.mesh.geometry.boundingBox),l.boundingBox=u,e.minDistanceObjects[s.name].push(l)}}}},{key:"_getUsedGeometry",value:function(e,t){var i;if(!s.GlobalData.Instance&&t.uvArrayBuffer){var r=t.geometryId+"|"+t.nodeId,i=this.getGeometryById(r);if(i)return i;var n=this._createGeometryByNodeInfo(e,t);n instanceof Array||(n=[n]),i=[];for(var a=new THREE.Matrix3,o=new THREE.Vector3,l=t.uvArrayBuffer,u=0,c=n.length;u<c;u++){var h=new THREE.BufferGeometry;h.setIndex(n[u].index),h.addAttribute("position",n[u].attributes.position),h.addAttribute("normal",n[u].attributes.normal),a.set(l[6*u],l[6*u+2],l[6*u+4],l[6*u+1],l[6*u+3],l[6*u+5],0,0,1);for(var d=[],f=n[u].attributes.uv.array,p=0,m=f.length;p<m;p+=2)o.set(f[p],f[p+1],1),o.applyMatrix3(a),d.push(o.x),d.push(o.y);h.addAttribute("uv",new THREE.Float32BufferAttribute(d,2)),i.push(h)}this._cacheGeometry(r,i)}else i=this.getGeometryByNodeInfo(e,t);return i}},{key:"_dealMeshes",value:function(e,t,i){var r=this._getUsedGeometry(e,t);r instanceof Array||(r=[r]);for(var n=0,a=r.length;n<a;n++){var o=e.pool.get({databagId:e.databagId,meshId:t.nodeId,userId:t.userId,originalId:t.originalId,userData:t.userData,geometry:r[n],matrix:t.matrix,material:i,isMesh:!0,isLine:!1,isLineSegments:!1,renderOrder:i.transparent?0:s.GlobalData.MaximumDepth-t.cellDepth});o&&(o.geometryId=t.geometryId,this._cacheActiveMesh(t.userId,t.nodeId,o),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),t.nodeId,new s.SingleCapsuleObject(t.nodeId,o)))}}},{key:"_dealLineSegments",value:function(e,t,i){var r=this.getGeometryByNodeInfo(e,t);if(r){var n=e.pool.get({databagId:e.databagId,meshId:t.nodeId,userId:t.userId,originalId:t.originalId,userData:t.userData,geometry:r,matrix:t.matrix,material:i,isMesh:!1,isLine:!0,isLineSegments:!0,renderOrder:i.transparent?0:s.GlobalData.MaximumDepth-t.octantDepth});n&&(n.geometryId=t.geometryId,this._cacheActiveMesh(t.userId,t.nodeId,n),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),t.nodeId,new s.SingleCapsuleObject(t.nodeId,n)))}}},{key:"_getUsedNodeInfosByOctantId",value:function(e){return this.usedNodeInfoMap[e]}},{key:"_cacheToUsedNodeInfoMap",value:function(e,t){this.usedNodeInfoMap[e]||(this.usedNodeInfoMap[e]=[]),this.usedNodeInfoMap[e].push(t)}},{key:"traverseUsedNodeInfoMap",value:function(e,t){for(var i=this.usedNodeInfoMap[e],r=0,n=i.length;r<n;r++)t(e,i[r])}},{key:"_isSatisfied",value:function(e,t){var i=e.getLoadedUserIdsObject();return!i||!!i[t.userId]}},{key:"_applyOcclusionTranslucent",value:function(e){if(s.GlobalData.OcclusionTranslucentEnabled){var t=e.pool.getObjects(),i=e.manager.octantToObjectMap,r=this.occlusionVisibleOctant.length;if(r>0)for(var n=e.manager.getFrustumFromOcclusionCamera(),a=0;a<r;++a){var o=this.occlusionVisibleOctant[a].octantId,l=i[o];if(l&&l.length>0)for(var u=0,c=l.length;u<c;u+=2)for(var h=l[u];h<=l[u+1];h++){var d=t[h];s.CameraUtil.intersectObjectWithFrustum(d,n)&&this._overrideOcclusionMaterial(d)}}}}},{key:"_overrideOcclusionMaterial",value:function(e,t){var i=t.material;if(i&&!1===i.transparent){var r=e.manager.acquireMaterial(),n=r.material;i.color?n.color.copy(i.color):r.resetColor(),n.opacity=s.GlobalData.OcclusionOpacity,t.material=n,t.material.needsUpdate=!0}}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=e.getModelDescriptor().getStandardNodeInfosById(t);if(!i)return[];for(var r=[],n=e.getDatabagId(),a=0,o=i.length;a<o;a++){var l=i[a],u=this.getGeometryByNodeInfo(e,l);if(u){var c=s.ModelView.BaseDescriptor.isLineNode(l);if(u instanceof Array)for(var h=0,d=u.length;h<d;h++)r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u[h].getAttribute("position").array,index:u[h].getIndex().array,matrix:l.matrix});else r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u.getAttribute("position").array,index:u.getIndex().array,matrix:l.matrix})}}return r}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"traverseActiveMeshMap",value:function(e,t){e=e||Object.keys(this.activeMeshMap);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(this.activeMeshMap[n])for(var a=Object.keys(this.activeMeshMap[n]),o=0,s=a.length;o<s;o++){var l=a[o],u=this.activeMeshMap[n][l];t(n,l,u)}}}},{key:"getActiveMeshMapById",value:function(e){return this.activeMeshMap[e]}},{key:"_cacheActiveMesh",value:function(e,t,i){this.activeMeshMap[e]||(this.activeMeshMap[e]={}),this.activeMeshMap[e][t]||(this.activeMeshMap[e][t]=[]),this.activeMeshMap[e][t].push(i)}},{key:"_clearActiveMeshMap",value:function(){this.activeMeshMap={}}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingMeshGenerator(this)),this.pickingNodeGenerators[e]}}]),t}(s.ModelView.MeshBaseManager);s.ModelView.IncrementedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.wireframeGeometryMap={},this.usedNodeInfoMap={}}return _createClass(e,[{key:"destroy",value:function(){if(this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this._disposeGeometries(),this.wireframeGeometryMap=null,this.usedNodeInfoMap=null,this.manager=null}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._disposeGeometries(),this.wireframeGeometryMap={},this.usedNodeInfoMap={}}},{key:"cullNodes",value:function(e,t,i){var r=this,n=this._getUsedNodeInfosByOctantId(t);if(n||(this.manager.traverseNodeInfoMapByOctantId(t,function(t,i){r._isSatisfied(e,i)&&r._cacheToUsedNodeInfoMap(t,i)}),n=this._getUsedNodeInfosByOctantId(t)),!n)return i;for(var a=0,o=n.length;a<o&&(i=this._collectNodeInfo(e,n[a],i),!this.manager.isFull(e,i));a++);return i}},{key:"updateNode",value:function(e,t){for(var i=e.getFilter()._getOverrideWireFrameMaterial(t)||e.getWireframeMaterial(),r=this._getWireframeGeometryByNodeInfo(e,t),n=0,a=r.length;n<a;n++)e.pool.get({databagId:e.databagId,meshId:t.nodeId,userId:t.userId,geometry:r[n],matrix:t.matrix,material:i,isMesh:!1,isLine:!0,isLineSegments:!0,pickable:!1,renderOrder:i.transparent?0:s.GlobalData.MaximumDepth-t.cellDepth})}},{key:"_getUsedNodeInfosByOctantId",value:function(e){return this.usedNodeInfoMap[e]}},{key:"_cacheToUsedNodeInfoMap",value:function(e,t){this.usedNodeInfoMap[e]||(this.usedNodeInfoMap[e]=[]),this.usedNodeInfoMap[e].push(t)}},{key:"_collectNodeInfo",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter();return e.isReplacedUserId(t.userId)||e.isHiddenSourceObjectUserId(t.userId)?i:n&&r._isHiddenFileId(t)||!1===r._isVisible(t)?i:(this.manager.isFull(e,i)||(this.manager.addToPriorityNodesSet(2,{nodeInfo:t,wireframe:!0}),i++),i)}},{key:"_getWireframeGeometryByNodeInfo",value:function(e,t){return this._getWireframeGeometryById(t.geometryId,this.manager.getGeometryByNodeInfo(e,t))}},{key:"_getWireframeGeometryById",value:function(e,t){if(this.wireframeGeometryMap[e])return this.wireframeGeometryMap[e];var i,r,n=[];if(t instanceof Array)for(var a=0,o=t.length;a<o;a++)r=s.BuildEdge(t[a].attributes.position.array,t[a].index.array),i=new THREE.BufferGeometry,i.setIndex(new THREE.Uint32BufferAttribute(r,1)),i.addAttribute("position",t[a].attributes.position,3),n.push(i);else r=s.BuildEdge(t.attributes.position.array,t.index.array),i=new THREE.BufferGeometry,i.setIndex(new THREE.Uint32BufferAttribute(r,1)),i.addAttribute("position",t.attributes.position,3),n.push(i);return this.wireframeGeometryMap[e]=n,this.wireframeGeometryMap[e]}},{key:"_traverseWireframeGeometryMap",value:function(e){for(var t=Object.keys(this.wireframeGeometryMap),i=0,r=t.length;i<r;i++){var n=this.wireframeGeometryMap[t[i]];if(n)for(var a=0,o=n.length;a<o;a++)e(n[a])}}},{key:"_disposeGeometries",value:function(){this._traverseWireframeGeometryMap(function(e){e.dispose()})}},{key:"_isSatisfied",value:function(e,t){if(!this.manager.isNeedWireframing(t.userId))return!1;var i=e.getLoadedUserIdsObject();return!(i&&!i[t.userId])}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.IncrementedWireframeManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.manager=e,i.instanceGeometryMap={},i.bufferAttributeMap={},i.nodeIdxMapFromUserId={},i.matrixInfoMapFromUserId={},i.cachedInstance={vState:{},vColor:{},mcol0:{},mcol1:{},mcol2:{},mcol3:{},muvCol0:{},muvCol1:{},muvCol2:{}},i.selectedMeshes=[],i.nonSelectedMeshes=[],i.selectedObjectIds=[],i.mgIdMapFromOctantId={},i.activeMeshMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.activeMeshMap=null,this.cachedInstance=null,this.bufferAttributeMap=null,this.nodeIdxMapFromUserId=null,this.matrixInfoMapFromUserId=null,this.disposeInstanceGeometries(),this.instanceGeometryMap=null,this.manager=null,this.selectedMeshes=null,this.nonSelectedMeshes=null,this.selectedObjectIds=null,this.mgIdMapFromOctantId=null}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearActiveMeshMap(),this.bufferDestroyed=!1,this.disposeGeometries(),this.disposeInstanceGeometries(),this.clearInstanceCache()}},{key:"clearInstanceCache",value:function(){this.cachedInstance.vState={},this.cachedInstance.vColor={},this.cachedInstance.mcol0={},this.cachedInstance.mcol1={},this.cachedInstance.mcol2={},this.cachedInstance.mcol3={},this.cachedInstance.muvCol0={},this.cachedInstance.muvCol1={},this.cachedInstance.muvCol2={},this.bufferAttributeMap={},this.nodeIdxMapFromUserId={},this.instanceGeometryMap={},this.matrixInfoMapFromUserId={},this.geometries={}}},{key:"getBufferAttributesBy",value:function(e){if(this.bufferAttributeMap[e])return this.bufferAttributeMap[e];var t=this.cachedInstance,i=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol0[e]),3,1),r=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol1[e]),3,1),n=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol2[e]),3,1),a=new THREE.InstancedBufferAttribute(new Float32Array(t.mcol3[e]),3,1),o=[],s=[],l=[];if(t.muvCol0[e])for(var u=0,c=t.muvCol0[e].length;u<c;u++)o.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol0[e][u]),2,1)),s.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol1[e][u]),2,1)),l.push(new THREE.InstancedBufferAttribute(new Float32Array(t.muvCol2[e][u]),2,1));return this.bufferAttributeMap[e]={attributeMcol0:i,attributeMcol1:r,attributeMcol2:n,attributeMcol3:a,attributeMuvCol0Array:o,attributeMuvCol1Array:s,attributeMuvCol2Array:l},this.bufferAttributeMap[e]}},{key:"resetInstanceMaterial",value:function(){var e=this;this.traverseInstanceGeometryMap(function(t,i){for(var r=0,n=i.length;r<n;++r)e._hasStateAttribute(i[r])&&(i[r].getAttribute("vState").array.fill(s.EnumInstanceState.NONE),i[r].getAttribute("vState").needsUpdate=!0,i[r].getAttribute("vState2").array.fill(s.EnumInstanceState.HIDDEN),i[r].getAttribute("vState2").needsUpdate=!0)})}},{key:"clearInstanceStateByUserId",value:function(e){function t(e,t,i,r){for(var n=e.getAttribute("vState").array,a=e.getAttribute("vState2").array,o=0;o<t.length;++o){var s=t[o];n[s]=i,a[s]=r}e.getAttribute("vState").needsUpdate=!0,e.getAttribute("vState2").needsUpdate=!0}var i=this,r=s.EnumInstanceState.NONE,n=s.EnumInstanceState.HIDDEN;this.traverseNodeIdxMapByUserId(e,function(e,a){var o=i.getInstanceGeometries(e);if(o)for(var s=0,l=o.length;s<l;s++)i._hasStateAttribute(o[s])&&t(o[s],a,r,n)})}},{key:"updateInstanceStateByUserId",value:function(e,t,i,r){function n(e,t,i,r,n){for(var a=e.getAttribute("vState").array,o=e.getAttribute("vState2").array,s=e.getAttribute("aColor"),l=s?s.array:null,u=0;u<t.length;++u){var c=t[u];a[c]=i,o[c]=r,null!==l&&null!==n&&(l[4*c]=n[0],l[4*c+1]=n[1],l[4*c+2]=n[2],l[4*c+3]=n[3])}e.getAttribute("vState").needsUpdate=!0,e.getAttribute("vState2").needsUpdate=!0,s&&(s.needsUpdate=!0)}var a=e.materialManager,o=this;this.traverseNodeIdxMapByUserId(t,function(l,u){var c=o.getInstanceGeometries(l);if(c){var h=o.manager.getMaterialIdByMeshId(l),d=o.getUsableMaterialColorParamsBy(e,h,i,r),f=d.rgbaColor,p=i;i===s.EnumInstanceState.TRANSPARENT&&(p=s.EnumInstanceState.OVERRIDED),i===s.EnumInstanceState.SELECTED&&o.cacheSelectedObjectIds(t,l);var m,v,g=a.getInstanceMaterialById(h,e)[0];g.transparent===d.transparent?(m=p,v=s.EnumInstanceState.HIDDEN):(m=s.EnumInstanceState.HIDDEN,v=p),p===s.EnumInstanceState.BLINK&&g.setBlinkColor(e.manager.blinkManager.getBlinkColor(e.id));for(var y=0,M=c.length;y<M;y++)o._hasStateAttribute(c[y])&&n(c[y],u,m,v,f)}})}},{key:"getUsableMaterialColorParamsBy",value:function(e,t,i,r){var n,a,o=e.selectedMaterial,l=e.getFilter()._getMaterialByName("scene"),u=e.materialManager,c=e.manager.getOverrideMaterialByName(t),h=c||u.getMaterialById(t);switch(i){case s.EnumInstanceState.HOVER:r?(n=e.getFilter()._getMaterialByName(r),a=e.manager.sceneState.getHoverColorByMaterial(n)):a=e.manager.sceneState.getHoverColorByMaterial(h);break;case s.EnumInstanceState.SELECTED:a=s.MaterialUtil.getColorParamsByMaterial(o);break;case s.EnumInstanceState.TRANSPARENT:a=s.MaterialUtil.getColorParamsByMaterial(l);break;case s.EnumInstanceState.OVERRIDED:case s.EnumInstanceState.BLINK:r?(n=e.getFilter()._getMaterialByName(r),a=s.MaterialUtil.getColorParamsByMaterial(n)):a=s.MaterialUtil.getColorParamsByMaterial(h);break;default:a=s.MaterialUtil.getColorParamsByMaterial(h)}return a}},{key:"getInstanceGeometries",value:function(e){return this.instanceGeometryMap[e]}},{key:"_cacheInstanceGeometries",value:function(e,t){if(!this.instanceGeometryMap[e]){t instanceof Array||(t=[t]);for(var i=this.instanceGeometryMap[e]=[],r=0,n=t.length;r<n;++r)i[r]=new THREE.InstancedBufferGeometry,i[r].setIndex(t[r].index),i[r].addAttribute("position",t[r].attributes.position),i[r].addAttribute("normal",t[r].attributes.normal),i[r].addAttribute("uv",t[r].attributes.uv)}}},{key:"traverseInstanceGeometryMap",value:function(e){var t=this.instanceGeometryMap;for(var i in t)e(i,t[i])}},{key:"traverseInstanceGeometryMapById",value:function(e,t){var i=this.instanceGeometryMap[e];if(i)for(var r=0,n=i.length;r<n;r++)t(i[r],e)}},{key:"disposeInstanceGeometries",value:function(){this.traverseInstanceGeometryMap(function(e,t){for(var i=0,r=t.length;i<r;i++)t[i].dispose()})}},{key:"cacheInstanceAttributeStateBy",value:function(e,t,i,r,n){var a=r.materialId,o=r.uvArrayBuffer;i instanceof Array||(i=[i]);var s=i.length,l=this.cachedInstance;if(!l.vState[t]){l.vState[t]=[],l.vColor[t]=[],l.mcol0[t]=[],l.mcol1[t]=[],l.mcol2[t]=[],l.mcol3[t]=[],l.muvCol0[t]=[],l.muvCol1[t]=[],l.muvCol2[t]=[];for(var u=0;u<s;++u)l.muvCol0[t][u]=[],l.muvCol1[t][u]=[],l.muvCol2[t][u]=[]}var c=n||e.materialManager.getMaterialById(a);l.vColor[t].push(c.color.r,c.color.g,c.color.b,c.opacity),l.vState[t].push(0);var h=r.matrix.elements;if(l.mcol0[t].push(h[0],h[1],h[2]),l.mcol1[t].push(h[4],h[5],h[6]),l.mcol2[t].push(h[8],h[9],h[10]),
l.mcol3[t].push(h[12],h[13],h[14]),o)for(var u=0;u<s;++u)l.muvCol0[t][u].push(o[6*u],o[6*u+1]),l.muvCol1[t][u].push(o[6*u+2],o[6*u+3]),l.muvCol2[t][u].push(o[6*u+4],o[6*u+5]);else for(var u=0;u<s;++u)l.muvCol0[t][u].push(1,0),l.muvCol1[t][u].push(0,1),l.muvCol2[t][u].push(0,0);return l.vState[t].length-1}},{key:"_cacheNodeIdxByUserId",value:function(e,t,i){var r=this.nodeIdxMapFromUserId;r[e]||(r[e]={}),r[e][t]||(r[e][t]=[]),r[e][t].push(i)}},{key:"getNodeIdxMapByUserId",value:function(e){return this.nodeIdxMapFromUserId[e]}},{key:"traverseNodeIdxMapByUserId",value:function(e,t){var i=this.nodeIdxMapFromUserId[e];for(var r in i)t(r,i[r])}},{key:"traverseNodeIdxMap",value:function(e,t){for(var i=Object.keys(this.nodeIdxMapFromUserId),r=0,n=i.length;r<n;r++){var a=i[r];if(!t||!t(a)){var o=this.nodeIdxMapFromUserId[a];for(var s in o)e(s,o[s])}}}},{key:"_cacheMatrixInfoByUserId",value:function(e,t,i){var r=this.matrixInfoMapFromUserId;r[e]||(r[e]={}),r[e][t]||(r[e][t]=[]),r[e][t].push(i)}},{key:"traverseMatrixInfoMapByUserId",value:function(e,t){var i=this.matrixInfoMapFromUserId[e];for(var r in i)t(r,i[r])}},{key:"getMeshesByUserId",value:function(e,t){var i=this;this.traverseMatrixInfoMapByUserId(t,function(r,n){for(var a=i.getInstanceNodesById(r),o=0,s=n.length;o<s;o++)for(var l=0,u=a.length;l<u;l++){var c={};if(c.matrix=n[o].matrix,c.mesh=a[l],1===u)c.boundingBox=n[o].boundingBox;else{var h=c.mesh.geometry.boundingBox;h?h=h.clone():(c.mesh.geometry.computeBoundingBox(),h=c.mesh.geometry.boundingBox.clone()),h.applyMatrix4(c.matrix),c.boundingBox=h}e.minDistanceObjects[t].push(c)}})}},{key:"clearSelectedObjectIds",value:function(){}},{key:"cacheSelectedObjectIds",value:function(e,t){}},{key:"adjustVisibility",value:function(e,t){}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"_cacheToMgIdMapFromOctantId",value:function(e,t,i){this.mgIdMapFromOctantId[e]||(this.mgIdMapFromOctantId[e]={}),this.mgIdMapFromOctantId[e][i]||(this.mgIdMapFromOctantId[e][i]={cellId:e,cellDepth:t,mgId:i})}},{key:"traverseMgIdMapByOctantId",value:function(e,t,i){if(this.mgIdMapFromOctantId[e])for(var r=this.mgIdMapFromOctantId[e],n=Object.keys(r),a=0,o=n.length;a<o;a++){var s=r[n[a]];if(i&&i(s.mgId))break;t(e,s)}}},{key:"_createGeometryById",value:function(e){if(this.geometryMap||(this.geometryMap={}),!this.geometryMap[e]){this.geometryMap[e]=!0;for(var t=this.cachedInstance,i=this.getBufferAttributesBy(e),r=this.getInstanceGeometries(e),n=0,a=r.length;n<a;n++){r[n].addAttribute("mcol0",i.attributeMcol0),r[n].addAttribute("mcol1",i.attributeMcol1),r[n].addAttribute("mcol2",i.attributeMcol2),r[n].addAttribute("mcol3",i.attributeMcol3),i.attributeMuvCol0Array.length>0&&(r[n].addAttribute("muvCol0",i.attributeMuvCol0Array[n]),r[n].addAttribute("muvCol1",i.attributeMuvCol1Array[n]),r[n].addAttribute("muvCol2",i.attributeMuvCol2Array[n])),r[n].addAttribute("aColor",new THREE.InstancedBufferAttribute(new Float32Array(t.vColor[e]),4,1)),r[n].addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(t.vState[e]),1,1)),r[n].addAttribute("vState2",new THREE.InstancedBufferAttribute(new Float32Array(t.vState[e]),1,1));var o=r[n].getAttribute("vState").array,l=r[n].getAttribute("vState2").array;o.fill(s.EnumInstanceState.NONE),l.fill(s.EnumInstanceState.HIDDEN);var u=r[n].index;r[n].addGroup(0,u.count,0),r[n].addGroup(0,u.count,1)}}}},{key:"cullNodes",value:function(e,t,i){var r=this;return this.traverseMgIdMapByOctantId(t,function(e,t){r.manager.addToPriorityNodesSet(2,t)},function(t){return i+=1,!!r.manager.isFull(e,i)&&(i-=1,!0)}),i}},{key:"updateNode",value:function(e,t){var i=this,r=this.manager.getMaterialIdByMeshId(t.mgId),n=e.materialManager.getInstanceMaterialById(r,e);this._createGeometryById(t.mgId),this.traverseInstanceGeometryMapById(t.mgId,function(r,a){var o=e.pool.get({databagId:e.databagId,meshId:a,geometry:r,material:n,isMesh:!0,isLine:!1,isLineSegments:!1,instanceOrNot:!0,renderOrder:n[0].transparent?0:s.GlobalData.MaximumDepth-t.cellDepth});o&&(i._cacheActiveMesh(t.mgId,o),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),a,new s.InstancedCapsuleObject(a,o)))})}},{key:"createInstanceNodeInfo",value:function(e,t,i){var r=this;this.octantIdMap||(this.octantIdMap={}),this.octantIdMap[t]||(this.octantIdMap[t]=!0,this.manager.traverseNodeInfoMapByOctantId(t,function(t,n){var a=r.getGeometryByNodeInfo(e,n),o=e.manager.getOverrideMaterialByNodeInfo(n,e.materialManager.getMaterialById(n.materialId));o&&(n.materialId=o.name);var s=r.manager.getMeshIdByNodeInfo(n),l=r.cacheInstanceAttributeStateBy(e,s,a,n,o);r._cacheNodeIdxByUserId(n.userId,s,l),r._cacheMatrixInfoByUserId(n.userId,s,{matrix:n.matrix,boundingBox:n.boundingBox}),r._cacheInstanceGeometries(s,a),r._cacheToMgIdMapFromOctantId(t,i,s)}))}},{key:"getCachedInstanceData",value:function(){return this.cachedInstance}},{key:"_hasStateAttribute",value:function(e){return!!e.attributes.vState}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=e.getModelDescriptor().getInstancedNodeInfosById(t);if(!i)return[];for(var r=[],n=e.getDatabagId(),a=0,o=i.length;a<o;a++){var l=i[a],u=this.getGeometryByNodeInfo(e,l);if(u){var c=s.ModelView.BaseDescriptor.isLineNode(l);if(u instanceof Array)for(var h=0,d=u.length;h<d;h++)r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u[h].getAttribute("position").array,index:u[h].getIndex().array,matrix:l.matrix});else r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u.getAttribute("position").array,index:u.getIndex().array,matrix:l.matrix})}}return r}},{key:"traverseActiveMeshMap",value:function(e,t){e=e||Object.keys(this.activeMeshMap);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(this.activeMeshMap[n]){t(n,this.activeMeshMap[n])}}}},{key:"getActiveMeshMapById",value:function(e){return this.activeMeshMap[e]}},{key:"_cacheActiveMesh",value:function(e,t){this.activeMeshMap[e]||(this.activeMeshMap[e]=[]),this.activeMeshMap[e].push(t)}},{key:"_clearActiveMeshMap",value:function(){this.activeMeshMap={}}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingIncrementInstancedMeshGenerator(this)),this.pickingNodeGenerators[e]}}]),t}(s.ModelView.MeshBaseManager);s.ModelView.IncrementInstancedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.wireframeGeometryMap={},this.wireframeBufferMap={}}return _createClass(e,[{key:"destroy",value:function(){if(this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.disposeGeometries(),this.wireframeGeometryMap=null,this.wireframeBufferMap=null,this.manager=null}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this.disposeGeometries(),this.wireframeGeometryMap={},this.wireframeBufferMap={}}},{key:"disposeGeometries",value:function(){this._traverseWireframeGeometryMap(function(e){e.dispose()})}},{key:"cullNodes",value:function(e,t,i){var r=this;return this.manager.getMeshManager().traverseMgIdMapByOctantId(t,function(e,t){r.manager.addToPriorityNodesSet(2,{wireframe:!0,nodeInfo:t})},function(t){return i+=1,!!r.manager.isFull(e,i)&&(i-=1,!0)}),i}},{key:"updateNode",value:function(e,t){var i=e.getInstanceWireframeMaterial(),r=e.pool;this._createGeometryById(t.mgId),this._traverseWireframeGeometryMapById(t.mgId,function(n,a){r.get({databagId:e.databagId,meshId:a,geometry:n,material:i,isMesh:!1,isLine:!0,isLineSegments:!0,renderOrder:i.transparent?0:s.GlobalData.MaximumDepth-t.cellDepth})})}},{key:"resetInstanceMaterial",value:function(){var e=s.EnumInstanceState.NONE,t=this;this._traverseWireframeGeometryMap(function(i){if(t._hasStateAttribute(i)){for(var r=i.getAttribute("vState").array,n=0,a=r.length;n<a;n++)r[n]=e;i.getAttribute("vState").needsUpdate=!0}}),this._updateNoWireframingState()}},{key:"updateInstanceWireframeByUserId",value:function(e,t){if(t===s.EnumInstanceState.HIDDEN||t===s.EnumInstanceState.NONE){var i=this;this.manager.traverseNodeIdxMapByUserId(e,function(e,r){i._setInstanceWireframeState(e,r,t)})}}},{key:"_getWireframeBufferById",value:function(e){var t=this.manager.getCombinedKeys(e).geometryId;if(this.wireframeBufferMap[t])return this.wireframeBufferMap[t];var i=this.manager.getMeshManager().getInstanceGeometries(e);if(!i)return[];for(var r=this.wireframeBufferMap[t]=[],n=0,a=i.length;n<a;n++){var o=i[n];r.push({index:s.BuildEdge(i[n].attributes.position.array,o.index.array),position:o.attributes.position})}return r}},{key:"_traverseWireframeGeometryMap",value:function(e){for(var t=Object.keys(this.wireframeGeometryMap),i=0,r=t.length;i<r;i++)this._traverseWireframeGeometryMapById(t[i],e)}},{key:"_traverseWireframeGeometryMapById",value:function(e,t){var i=this.wireframeGeometryMap[e];if(i)for(var r=0,n=i.length;r<n;r++)t(i[r],e)}},{key:"_createGeometryById",value:function(e){if(!this.wireframeGeometryMap[e])for(var t=this.wireframeGeometryMap[e]=[],i=this.manager.getMeshManager().getBufferAttributesBy(e),r=this.manager.getMeshManager().getCachedInstanceData(),n=this._getWireframeBufferById(e),a=0,o=n.length;a<o;a++){var s=new THREE.InstancedBufferGeometry;s.setIndex(n[a].index),s.addAttribute("position",n[a].position),s.addAttribute("vState",new THREE.InstancedBufferAttribute(new Float32Array(r.vState[e]),1,1)),s.addAttribute("mcol0",i.attributeMcol0),s.addAttribute("mcol1",i.attributeMcol1),s.addAttribute("mcol2",i.attributeMcol2),s.addAttribute("mcol3",i.attributeMcol3),t.push(s)}}},{key:"_updateNoWireframingState",value:function(){var e=this,t=s.EnumInstanceState.HIDDEN;this.manager.traverseNodeIdxMap(function(i,r){e._setInstanceWireframeState(i,r,t)},function(t){return e.manager.isNeedWireframing(t)})}},{key:"_setInstanceWireframeState",value:function(e,t,i){var r=this;this._traverseWireframeGeometryMapById(e,function(e){if(r._hasStateAttribute(e)){for(var n=e.getAttribute("vState").array,a=0,o=t.length;a<o;++a)n[t[a]]=i;e.getAttribute("vState").needsUpdate=!0}})}},{key:"adjustVisibility",value:function(e,t){}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.adjustVisibility(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"_hasStateAttribute",value:function(e){return!!e.attributes.vState}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingIncrementInstancedWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.IncrementInstancedWireframeManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=new s.ModelView.IncrementInstancedMeshManager(this),this.wireframeManager=new s.ModelView.IncrementInstancedWireframeManager(this),this.nodeInfoMapFromOctant={}}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null,this.nodeInfoMapFromOctant=null}},{key:"clearData",value:function(){this.clearNodeInfoMap(),this.meshManager.clearData(),this.wireframeManager.clearData()}},{key:"getGeometryByNodeInfo",value:function(e,t){return this.meshManager.getGeometryByNodeInfo(e,t)}},{key:"traverseInstanceGeometryMap",value:function(e){this.meshManager.traverseInstanceGeometryMap(e)}},{key:"traverseNodeIdxMapByUserId",value:function(e,t){this.meshManager.traverseNodeIdxMapByUserId(e,t)}},{key:"traverseNodeIdxMap",value:function(e,t){this.meshManager.traverseNodeIdxMap(e,t)}},{key:"getMeshesByUserId",value:function(e,t){this.meshManager.getMeshesByUserId(e,t)}},{key:"_updateInstanceMaterialByUserId",value:function(e,t,i,r){this.meshManager.updateInstanceStateByUserId(e,t,i,r),this.wireframeManager.updateInstanceWireframeByUserId(t,i)}},{key:"_updateInstanceMaterial",value:function(e){s.Logger.time("update instance material");var t=s.Model.EnumFilterState;this.clearSelectedObjectIds();for(var i in this.filteredIds){var r=this.filteredIds[i];if(r[t.HIDDEN])this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.HIDDEN);else if(r[t.TRANSPARENT])this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.TRANSPARENT);else{if(e.manager.isSelectPriority()){if(r[t.SELECTED]){s.GlobalData.PickingEffect?r[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.OVERRIDED,r[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.SELECTED);continue}if(r[t.BLINK]){r[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.BLINK,r[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.BLINK);continue}}else{if(r[t.BLINK]){r[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.BLINK,r[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.BLINK);continue}if(r[t.SELECTED]){s.GlobalData.PickingEffect?r[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.OVERRIDED,r[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.SELECTED);continue}}r[t.HOVER]?r[t.OVERRIDED]?this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.HOVER,r[t.OVERRIDED]):this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.HOVER):r[t.OVERRIDED]&&this._updateInstanceMaterialByUserId(e,i,s.EnumInstanceState.OVERRIDED,r[t.OVERRIDED])}}s.Logger.timeEnd("update instance material")}},{key:"_resetInstanceMaterial",value:function(){this.meshManager.resetInstanceMaterial(),this.wireframeManager.resetInstanceMaterial()}},{key:"_collectFilteredUserIds",value:function(e,t,i){var r=e.getFilter(),n=r._hasHiddenFileIdFilter(),a=r._hasVisibleFilter(),o=r._hasOverrideMaterialFilter(),l=r._hasTransparentFilter(),u=e.hasReplacedUserId(),c=e.hasHiddenSourceObjectUserId(),h=this.filteredIds={};if(n||a||o||l||u||c)for(var d=s.Model.EnumFilterState,f=0;f<t.length;++f){var p=t[f],m=i[p];if(m&&m.length){var v=m[0];if(n&&r._isHiddenFileId(v)||a&&!1===r._isVisible(v)||e.isReplacedUserId(p)||e.isHiddenSourceObjectUserId(p))h[p]||(h[p]={}),h[p][d.HIDDEN]=!0;else if(l&&r._isTransparent(v))h[p]||(h[p]={}),h[p][d.TRANSPARENT]=!0;else if(o&&r._hasOverrideMaterial(v)){var g=r._getOverrideMaterial(v),y=null!=g?g.name:"";""!==y&&(h[p]||(h[p]={}),h[p][d.OVERRIDED]=y)}else;}}}},{key:"_collectSelectedUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{},r=s.Model.EnumFilterState,n={};for(var a in e)t[a]&&(i[a]||(i[a]={}),i[a][r.SELECTED]=!0,n[a]=!0);this.selectedUserIds=Object.keys(n)}},{key:"_clearSelectedState",value:function(e){if(this.filteredIds&&this.selectedUserIds&&this.selectedUserIds.length){for(var t=0,i=this.selectedUserIds.length;t<i;t++){var r=this.selectedUserIds[t];this.filteredIds[r]&&(this.meshManager.clearInstanceStateByUserId(r),delete this.filteredIds[r][s.Model.EnumFilterState.SELECTED])}this.selectedUserIds=null}}},{key:"_collectHoveredUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{};this.hoverdUserId=void 0,e&&t[e]&&(i[e]||(i[e]={}),i[e][s.Model.EnumFilterState.HOVER]=!0,this.hoverdUserId=e)}},{key:"_clearHoveredState",value:function(e){this.filteredIds&&this.hoverdUserId&&this.filteredIds[this.hoverdUserId]&&(this.meshManager.clearInstanceStateByUserId(this.hoverdUserId),delete this.filteredIds[this.hoverdUserId][s.Model.EnumFilterState.HOVER],this.hoverdUserId=void 0)}},{key:"_collectBlinkedUserIds",value:function(e,t){var i=this.filteredIds=this.filteredIds||{},r=s.Model.EnumFilterState,n={};for(var a in e)t[a]&&(i[a]||(i[a]={}),i[a][r.BLINK]=!0,n[a]=!0);this.blinkUserIds=Object.keys(n)}},{key:"_clearBlinkedState",value:function(e){if(this.filteredIds&&this.blinkUserIds&&this.blinkUserIds.length){for(var t=0,i=this.blinkUserIds.length;t<i;t++){var r=this.blinkUserIds[t];this.filteredIds[r]&&(this.meshManager.clearInstanceStateByUserId(r),delete this.filteredIds[r][s.Model.EnumFilterState.BLINK])}this.blinkUserIds=null}}},{key:"applyFilter",value:function(e,t){if(this.hasNodeInfo(e)){this.updateNodes(e),this._resetInstanceMaterial();var i;i=t||e.getModelDescriptor().getInstancedUserIds();var r=e.getModelDescriptor().getInstancedNodeInfos();this._collectFilteredUserIds(e,i,r),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,r),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),r),this._collectHoveredUserIds(e.manager.sceneState.hoverId,r),this._updateInstanceMaterial(e)}}},{key:"applySelection",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearSelectedState(e),this._clearHoveredState(e),this._collectSelectedUserIds(e.manager.sceneState.selectionSet,t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearSelection",value:function(e){this._clearSelectedState(e),this.applyHover(e)}},{key:"applyHover",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearHoveredState(e),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearHover",value:function(e){this._clearHoveredState(e),this._updateInstanceMaterial(e),this.updateNodes(e)}},{key:"applyBlink",value:function(e){if(this.hasNodeInfo(e)){var t=e.getModelDescriptor().getInstancedNodeInfos();this._clearBlinkedState(e),this._clearHoveredState(e),this._collectBlinkedUserIds(e.manager.sceneState.getBlinkComponentsIdMap(e.id),t),this._collectHoveredUserIds(e.manager.sceneState.hoverId,t),this._updateInstanceMaterial(e),this.updateNodes(e)}}},{key:"clearBlink",value:function(e){this._clearBlinkedState(e),this.applyHover(e)}},{key:"applyReplacement",value:function(e){this._updateInstanceMaterial(e),this.updateNodes(e)}},{key:"updateNode",value:function(e,t){t.wireframe?this.wireframeManager.updateNode(e,t.nodeInfo):this.meshManager.updateNode(e,t)}},{key:"updateNodes",value:function(e){}},{key:"createMeshNodes",value:function(e,t,i){this.meshManager.createMeshNodes(e,t,i)}},{key:"clearCachedData",value:function(){this.meshManager.disposeGeometries()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"clearSelectedObjectIds",value:function(){this.meshManager.clearSelectedObjectIds()}},{key:"adjustVisibility",value:function(e,t){this.meshManager.adjustVisibility(e,t),this.wireframeManager.adjustVisibility(e,t)}},{key:"changeVisibilityOfSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfSelectedObjects(e,t)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e,t){this.meshManager.changeVisibilityOfNonSelectedObjects(e,t),this.wireframeManager.changeVisibilityOfNonSelectedObjects(e,t)}},{key:"restoreVisibilityOfObjects",value:function(){this.meshManager.restoreVisibilityOfObjects(),this.wireframeManager.restoreVisibilityOfObjects()}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"cullNodes",value:function(e,t,i,r,n){return this.hasOctantId(t)?(this.meshManager.createInstanceNodeInfo(e,t,i),0===r?this.meshManager.cullNodes(e,t,n):1===r?this.wireframeManager.cullNodes(e,t,n):n):n}},{key:"clearNodeInfoMap",value:function(){this.nodeInfoMapFromOctant={}}},{key:"cacheToNodeInfoMap",value:function(e,t){this.nodeInfoMapFromOctant[e]||(this.nodeInfoMapFromOctant[e]=[]),this.nodeInfoMapFromOctant[e].push(t)}},{key:"traverseNodeInfoMapByOctantId",value:function(e,t){if(this.nodeInfoMapFromOctant[e])for(var i=0,r=this.nodeInfoMapFromOctant[e].length;i<r;i++)t(e,this.nodeInfoMapFromOctant[e][i])}},{key:"traverseNodeInfoMap",value:function(e){for(var t=Object.keys(this.nodeInfoMapFromOctant),i=0,r=t.length;i<r;i++)this.traverseNodeInfoMapByOctantId(t[i],e)}},{key:"traverseNodeInfoMapByIds",value:function(e,t){if(!e)return void this.traverseNodeInfoMap(t);for(var i=Object.keys(this.nodeInfoMapFromOctant),r=0,n=i.length;r<n;r++)for(var a=i[r],o=this.nodeInfoMapFromOctant[a],s=0,l=o.length;s<l;s++)e[o[s].userId]&&t(a,o[s])}},{key:"hasNodeInfo",value:function(){return!s.Utils.isEmptyObjectSimple(this.nodeInfoMapFromOctant)}},{key:"hasOctantId",value:function(e){return!(!this.nodeInfoMapFromOctant[e]||!this.nodeInfoMapFromOctant[e].length)}},{key:"addToPriorityNodesSet",value:function(e,t){this.handler.addToPriorityNodesSet(e,t)}},{key:"isFull",value:function(e,t){return this.handler.isFull(e,t)}},{key:"isNeedWireframing",value:function(e){return this.handler.isNeedWireframing(e)}},{key:"getMeshIdByNodeInfo",value:function(e){return s.Utils.getCombinedKeyString([e.materialId,e.geometryId,e.cellId])}},{key:"getMaterialIdByMeshId",value:function(e){return s.Utils.splitCombinedKeyString(e)[0]}},{key:"getCombinedKeys",value:function(e){var t=s.Utils.splitCombinedKeyString(e);return{materialId:t[0],geometryId:t[1],cellId:t[2]}}},{key:"getNodeInfoCountById",value:function(e){var t=this.meshManager.getCachedInstanceData();if(!t.vState[e])return 0;return t.muvCol0&&t.muvCol0[e]&&t.muvCol0[e].length?t.muvCol0[e].length*t.vState[e].length:t.vState[e].length}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"isPickableNode",value:function(e){if(!this.filteredIds||!this.filteredIds[e])return!0;var t=this.filteredIds[e],i=s.Model.EnumFilterState;return!t[i.HIDDEN]&&!t[i.TRANSPARENT]}},{key:"isHiddenNode",value:function(e){return!!(this.filteredIds&&this.filteredIds[e]&&this.filteredIds[e][s.Model.EnumFilterState.HIDDEN])}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}}]),e}();s.ModelView.IncrementInstancedManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=new s.ModelView.IncrementedMeshManager(this),this.wireframeManager=new s.ModelView.IncrementedWireframeManager(this),this.nodeInfoMapFromOctant={},this.handler=null}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null,this.nodeInfoMapFromOctant=null,this.handler=null}},{key:"clearData",value:function(){this.clearNodeInfoMap(),this.meshManager.clearData(),this.wireframeManager.clearData()}},{key:"disposeGeometry",value:function(e){this.meshManager.disposeGeometry(e)}},{key:"clearNodeInfoMap",value:function(){this.nodeInfoMapFromOctant={}}},{key:"cacheToNodeInfoMap",value:function(e,t){this.nodeInfoMapFromOctant[e]||(this.nodeInfoMapFromOctant[e]=[]),this.nodeInfoMapFromOctant[e].push(t)}},{key:"traverseNodeInfoMapByOctantId",value:function(e,t){if(this.nodeInfoMapFromOctant[e])for(var i=0,r=this.nodeInfoMapFromOctant[e].length;i<r;i++)t(e,this.nodeInfoMapFromOctant[e][i])}},{key:"hasNodeInfo",value:function(){return!s.Utils.isEmptyObjectSimple(this.nodeInfoMapFromOctant)}},{key:"hasOctantId",value:function(e){return!(!this.nodeInfoMapFromOctant[e]||!this.nodeInfoMapFromOctant[e].length)}},{key:"cullNodes",value:function(e,t,i,r,n){return this.hasOctantId(t)?0===r?this.meshManager.cullNodes(e,t,n):1===r?this.wireframeManager.cullNodes(e,t,n):n:n}},{key:"updateNode",value:function(e,t,i){t.wireframe?this.wireframeManager.updateNode(e,t.nodeInfo,i):this.meshManager.updateNode(e,t,i)}},{key:"updateNodes",value:function(e){}},{key:"applyFilter",value:function(e,t){}},{key:"applySelection",value:function(e){}},{key:"clearSelection",value:function(e){}},{key:"applyHover",value:function(e){}},{key:"clearHover",value:function(e){}},{key:"applyBlink",value:function(e){}},{key:"clearBlink",value:function(e){}},{key:"applyReplacement",value:function(e){}},{key:"getGeometryByNodeInfo",value:function(e,t){return this.meshManager.getGeometryByNodeInfo(e,t)}},{key:"getLoader",value:function(e){return e.loader}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"addToPriorityNodesSet",value:function(e,t){this.handler.addToPriorityNodesSet(e,t)}},{key:"isFull",value:function(e,t){return this.handler.isFull(e,t)}},{key:"isNeedWireframing",value:function(e){return this.handler.isNeedWireframing(e)}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"isPickableNode",value:function(e){return!0}},{key:"isHiddenNode",value:function(e){return!1}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}}]),e}();s.ModelView.IncrementedManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.defaultManager=new s.ModelView.IncrementedManager,this.instancedManager=new s.ModelView.IncrementInstancedManager,this.defaultManager.handler=this,this.instancedManager.handler=this,this.priorityNodesSet=[[],[],[]],this.octantManager=new s.OctantManager,this.noNeedWireframingIdMap={}}return _createClass(e,[{key:"destroy",value:function(){this.defaultManager.handler=null,this.instancedManager.handler=null,this.defaultManager=null,this.instancedManager=null,this.clearPriorityNodesSet(),this.priorityNodesSet=null,this.octantManager.destroy(),this.octantManager=null,this.noNeedWireframingIdMap=null}},{key:"clearData",value:function(){this.clearNoNeedWireframingIdMap(),this.defaultManager.clearData(),this.instancedManager.clearData()}},{key:"settleData",value:function(e,t){var i=this.octantManager.getAllOctants(e);i.length>0?this._parseItemDataByOctants(e,i,function(){t&&t()}):t&&t()}},{key:"cullNodes",value:function(e,t){this.clearPriorityNodesSet(),this._collectNoWireframingIds(e);var i=this.octantManager.getVisibleOctants(e,t,!0);if(i.length){var r=0;return e.isOnlyWireframe()?void this._cullNodesByVisibleOctant(e,i,1,r):e.isActivateWireframe()?(r=this._cullNodesByVisibleOctant(e,i,0,r),void this._cullNodesByVisibleOctant(e,i,1,r)):void this._cullNodesByVisibleOctant(e,i,0,r)}}},{key:"_cullNodesByVisibleOctant",value:function(e,t,i,r){for(var n=0,a=t.length;n<a;++n){var o=t[n].octantId,s=t[n].depth;if(r=this.defaultManager.cullNodes(e,o,s,i,r),r=this.instancedManager.cullNodes(e,o,s,i,r),this.isFull(e,r))break}return r}},{key:"updateNodes",value:function(e){var t=this;this.traversePriorityNodesSet(function(i,r){t._isInstanceNode(r)?t.instancedManager.updateNode(e,r):t.defaultManager.updateNode(e,r,i)}),s.GlobalData.DEBUG&&this.octantManager.showOctreeBox(e)}},{key:"_collectNoWireframingIds",value:function(e){if(!this.wireframingIdCollected){this.wireframingIdCollected=!0;var t=this,i=e.getFilter();e.getModelDescriptor().traverseNodeInfosByCell(function(e,r){(r.type===s.ModelView.BaseDescriptor.EnumNodeItemType.LINE||i._hasRenderWithBoardlineFilter()&&!i._isRenderWithBoardline(r))&&(t.noNeedWireframingIdMap[r.userId]=!0)})}}},{key:"isNeedWireframing",value:function(e){return!this.noNeedWireframingIdMap||!this.noNeedWireframingIdMap[e]}},{key:"clearNoNeedWireframingIdMap",value:function(){this.wireframingIdCollected=!1,this.noNeedWireframingIdMap={}}},{key:"disposeBufferAfterVbo",value:function(){this.defaultManager.disposeBufferAfterVbo(),this.instancedManager.disposeBufferAfterVbo()}},{key:"isFull",value:function(e,t){return!(t<e.getRenderableCount())}},{key:"clearPriorityNodesSet",value:function(){this.priorityNodesSet[0]=[],this.priorityNodesSet[1]=[],this.priorityNodesSet[2]=[]}},{key:"addToPriorityNodesSet",value:function(e,t){e=e<0||e>2?2:e,this.priorityNodesSet[e].push(t)}},{key:"traversePriorityNodesSet",value:function(e){for(var t=this.priorityNodesSet,i=0,r=t.length;i<r;++i)for(var n=t[i],a=0,o=Object.keys(n).length;a<o;++a)e(i,n[a])}},{key:"_parseItemDataByOctants",value:function(e,t,i){function r(o){var s=o;return function(){var o=t[s].octantId,l=t[s].depth;n._parseItemDataByOctantId(e,o,l),s<a-1?requestAnimationFrame(r(s+1)):i&&i()}}var n=this,a=t.length;requestAnimationFrame(r(0))}},{key:"_parseItemDataByOctantId",value:function(e,t,i){e.getModelDescriptor().parseItemDataByCellId(t);var r=e.getModelDescriptor().getNodeInfosByCellId(t);if(r)for(var n,a=0,o=r.length;a<o;a++)n=r[a],n.cellDepth=i,n.instanceOrNot?this.instancedManager.cacheToNodeInfoMap(t,n):this.defaultManager.cacheToNodeInfoMap(t,n),e.manager.addNodeInfoToOctantMap(e.getEncodedDatabagId(),t,n)}},{key:"_isInstanceNode",value:function(e){return!!(e.mgId||e.nodeInfo&&e.nodeInfo.mgId)}}]),e}();s.ModelView.IncrementCompositedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="default",i.compositedManager=new s.ModelView.IncrementCompositedManager,i.defaultManager=i.compositedManager.defaultManager,i.instancedManager=i.compositedManager.instancedManager,i.loader=new s.ModelView.DefaultLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.compositedManager.destroy(),this.compositedManager=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"prepareData",value:function(e){if(!this.dataReady){var t=this;this.compositedManager.settleData(this.model,function(){t.dataReady=!0,t.settleData(e)})}}},{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.model.getModelDescriptor().destroyReader(),this.loaded=!0,e&&e()}},{key:"isAllReady",value:function(){return!(!this.isLoaded()||this.isHidden())}},{key:"prepare",value:function(e){this.isAllReady()&&(this.model.getMaterialManager()._updateTextureMapping(),this.model.clearMeshFromOctantMap(),this.compositedManager.cullNodes(this.model,e),this.compositedManager.updateNodes(this.model))}},{key:"updateNodes",value:function(){}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.IncrementHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.manager=e,i.nodePriority={high:[],medium:[],low:[]},i.visibleOctant=[],i.occlusionVisibleOctant=[],i.usedNodeInfosObject={},i.lineNodes={},i.blinkMaterials=[],i.activeMeshMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.clearData(),this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.activeMeshMap=null,this.manager=null,this.nodePriority=null,this.visibleOctant=null,this.occlusionVisibleOctant=null,this.nodePriority=null,this.lineNodes=null,this.blinkMaterials=null}},{key:"disposeLineNodes",value:function(){for(var e in this.lineNodes){var t=this.lineNodes[e];t.geometry.dispose(),t=null,delete this.lineNodes[e]}}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearActiveMeshMap(),this.disposeGeometries(),this.disposeLineNodes(),
this._clearNodePriorityData(!0),this._clearUsedNodeInfosObject(),this.visibleOctant.length=0,this.occlusionVisibleOctant.length=0}},{key:"update",value:function(e){var t=this._updateMeshNodes(e);return this._applyOcclusionTranslucent(e),t}},{key:"cullNodes",value:function(e,t){this._clearNodePriorityData(!0),this._adjustLowNodePriorityLength(e);var i=0;i=s.GlobalData.EnableOctant?this._cullNodesWithOctant(e,t):this._cullNodesWithFull(e),e.prioritizedNodeCount=this._calcPrioritizedNodeCount(e,i)}},{key:"getPriorityNodes",value:function(){return[this.nodePriority.high,this.nodePriority.medium,this.nodePriority.low]}},{key:"_cullNodesWithInnerAndOuterOctree",value:function(e,t){var i=0,r=0,n=e.getModelDescriptor().getOctreeRootNode(),a=n.inner,o=n.outer;if(this.manager.getContainsCamera(e)||!o)return this.visibleOctant.length=0,a&&this._frustumCull(e,t,a),o&&this._frustumCull(e,t,o),r=this.visibleOctant.length,r>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!0,i,r)),i;o&&(this.visibleOctant.length=0,this._frustumCull(e,t,o),(r=this.visibleOctant.length)>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!1,i,r)));var s=this.manager.getFilter(e);return(Object.keys(this.nodePriority.low).length+this.nodePriority.high.length+this.nodePriority.medium.length<this.manager.getRenderableCount(e)||s._hasRenderPromotionFilter())&&a&&(this.visibleOctant.length=0,this._frustumCull(e,t,a),(r=this.visibleOctant.length)>0&&(this._sortVisibleOctant(e,t),i=this._logicCull(e,!0,!1,i,r))),i}},{key:"_cullNodesWithLayerOctree",value:function(e,t){var i=0;this.visibleOctant.length=0;var r=e.getModelDescriptor().getOctreeRootNode().layer;this._frustumCull(e,t,r);var n=this.visibleOctant.length;return n>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!0,i,n)),i}},{key:"_cullNodesWithOctant",value:function(e,t){return e.getModelDescriptor().isUseInnerAndOuterOctree()?this._cullNodesWithInnerAndOuterOctree(e,t):this._cullNodesWithLayerOctree(e,t)}},{key:"_cullNodesWithFull",value:function(e){var t=e.getModelDescriptor().getCellCount();return 0===t?0:this._logicCullWithFull(e,t)}},{key:"_calcPrioritizedNodeCount",value:function(e,t){var i=t+this.nodePriority.high.length+this.nodePriority.medium.length;return i>this.manager.getRenderableCount(e)&&(i=this.manager.getRenderableCount(e)),i}},{key:"_updateMeshNodes",value:function(e){if(this._clearActiveMeshMap(),this._clearLineSegmentsNodeGroup(e),this.filter=e.getFilter(),e.isOnlyWireframe())return 0;var t=e.prioritizedNodeCount;if(0===t)return 0;var i=[this.nodePriority.high,this.nodePriority.medium,this.nodePriority.low],r=null;i[0].length>0&&(r=e.selectedMaterial);var n=e.getFilter()._hasOverrideMaterialFilter(),a={octantStartIndex:-1,curOctantId:-1};this.blinkMaterials.length=0;for(var o=0,l=0,u=0,c=i.length;u<c;++u)for(var h=i[u],d=0,f=Object.keys(h).length;d<f&&!(o>t);++d){l++;var p,m=h[d];p=0===u?this._getUsableMaterial(e,m,r,n):this._getUsableMaterial(e,m,null,n);var v=!m.instanceOrNot;if(s.ModelView.BaseDescriptor.isLineNode(m))this._dealLineSegments(e,m,v,p);else{var g=e.pool.counter;this._dealMeshes(e,m,v,p,a);var y=e.pool.counter-g;o+=y,t+=y-1}p=null}return r=null,i=null,l}},{key:"_getUsableMaterial",value:function(e,t,i,r){var n=t.materialId,a=t.userId,o=e.materialManager.materials,l=e.manager.sceneState,u=e.getFilter(),c=null,h=l.isSelected(a);1!=h||u._isPickable(t)||(h=!1),i?s.GlobalData.PickingEffect?c=u._getOverrideMaterial(t):(c=u._getOverrideMaterial(t))&&!h||(c=i):r&&(c=u._getOverrideMaterial(t));var d=e.manager.getOverrideMaterialByNodeInfo(t,e.materialManager.getMaterialById(t.materialId));return c=c||d||o[n]||s.MaterialUtil.getDefaultStandardMaterial(),s.GlobalData.Hover&&l.hoverId===a&&!1===h&&(c=l.getHoverMaterial(c)),c}},{key:"getMeshesByUserIds",value:function(e,t,i){for(var r=e.pool._pool,n=t.toString(),a=i.toString(),o=0;o<r.length;o++){var s=r[o];if(s.name==n||s.name==a){var l={};l.mesh=s,l.matrix=s.matrix;var u=s.geometry.boundingBox;u||(s.geometry.computeBoundingBox(),u=l.mesh.geometry.boundingBox),l.boundingBox=u,e.minDistanceObjects[s.name].push(l)}}}},{key:"explode",value:function(e){for(var t=e.pool._pool,i=0;i<t.length;i++){var r=t[i],n=e.modelExplosion.getExplosionTranslation(r.name);r.translateZ(n.z),r.updateMatrix(),r.updateMatrixWorld()}}},{key:"_getUsedGeometry",value:function(e,t){var i;if(!s.GlobalData.Instance&&t.uvArrayBuffer){var r=t.geometryId+"|"+t.nodeId,i=this.getGeometryById(r);if(i)return i;var n=this._createGeometryByNodeInfo(e,t);n instanceof Array||(n=[n]),i=[];for(var a=new THREE.Matrix3,o=new THREE.Vector3,l=t.uvArrayBuffer,u=0,c=n.length;u<c;u++){var h=new THREE.BufferGeometry;h.setIndex(n[u].index),h.addAttribute("position",n[u].attributes.position),h.addAttribute("normal",n[u].attributes.normal),a.set(l[6*u],l[6*u+2],l[6*u+4],l[6*u+1],l[6*u+3],l[6*u+5],0,0,1);for(var d=[],f=n[u].attributes.uv.array,p=0,m=f.length;p<m;p+=2)o.set(f[p],f[p+1],1),o.applyMatrix3(a),d.push(o.x),d.push(o.y);h.addAttribute("uv",new THREE.Float32BufferAttribute(d,2)),i.push(h)}this._cacheGeometry(r,i)}else i=this.getGeometryByNodeInfo(e,t);return i}},{key:"_dealMeshes",value:function(e,t,i,r,n){var a=this._getUsedGeometry(e,t),o=e.pool;a instanceof Array||(a=[a]);for(var l=0,u=a.length;l<u;l++){var c=o.get({databagId:e.databagId,nodeId:t.nodeId,userId:t.userId,userData:t.userData,geometry:a[l],matrix:t.matrix,material:r,renderOrder:r.transparent?0:s.GlobalData.MaximumDepth-t.cellDepth,visible:i});c&&(c.geometryId=t.geometryId,this._cacheActiveMesh(t.userId,t.nodeId,c),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),t.nodeId,new s.SingleCapsuleObject(t.nodeId,c)))}}},{key:"_dealLineSegments",value:function(e,t,i,r){var n=this.getGeometryByNodeInfo(e,t);if(n){var a=this._getLineSegmentsNodeGroup(e),o=this.lineNodes[t.nodeId];o||(o=new s.LineSegmentsEx(n,r),o.databagId=e.databagId,o.name=t.userId,o.nodeId=t.nodeId,o.geometryId=t.geometryId,t.matrix&&(o.matrix.copy(t.matrix),o.matrixAutoUpdate=!1),this.lineNodes[t.nodeId]=o),o.material=r,o.visible=i,a.add(o),o.updateMatrixWorld(!0),this._cacheActiveMesh(t.userId,t.nodeId,o)}}},{key:"_frustumCull",value:function(e,t,i){function r(e,t,i,n,a){var o,s;if(t&&e.depth<i&&(u.set(e.min,e.max),o=t.intersectsBox(u)),o){if(n){var c=u.applyMatrix4(l),h=c.getSize().length(),d=c.getCenter().z;d=d>1e-6?d:1e-6,e.priority=h/d,a.push(e)}else a.push(e);for(var f=0,p=e.childOctants.length;f<p;++f)s=e.childOctants[f],r(s,t,i,n,a)}}var n=e.manager,a=t.getFrustum(),o=s.GlobalData.OctantDepth,l=t.projScreenMatrix,u=new THREE.Box3;(s.GlobalData.DEBUG&&n.showOctreeBox(i),r(i,a,o,!0,this.visibleOctant),s.GlobalData.OcclusionTranslucentEnabled)&&r(i,this.manager.getFrustumFromOcclusionCamera(),o,!1,this.occlusionVisibleOctant);return!0}},{key:"_logicCull",value:function(e,t,i,r,n){var a=e.manager,o=e.getFilter(),l=o._hasHiddenFileIdFilter(),u=o._hasOverrideMaterialFilter(),c=a.sceneState.selectionSet,h=o._hasRenderPromotionFilter(),d=this.nodePriority.high,f=this.nodePriority.medium,p=this.nodePriority.low,m=this.nodePriority.low.length,v=e.getModelDescriptor().getNodeInfosWithCellId(),g=a.getCategoriesFromHighPriority("outer");!0===i&&(g=a.getCategoriesFromHighPriority("inner"));for(var y,M=0,E=0;E<n;++E){var b,x=0;t?(b=this.visibleOctant[E].octantId,x=this.visibleOctant[E].depth):b=E;var I=v[b];if(I){var T=this._getUsedNodeInfosByCellId(b);if(!T){for(y=0,M=I.length;y<M;++y){var w=I[y];w.octantId=b,w.cellDepth=x,this._isSatisfied(e,w)&&this._cacheUsedNodeInfosByCellId(b,w)}T=this._getUsedNodeInfosByCellId(b)}if(T){var C=T.default;for(y=0,M=C.length;y<M;y++){var w=C[y];!function(t,i){if(!e.isReplacedUserId(t.userId)&&!e.isHiddenSourceObjectUserId(t.userId)&&!(l&&o._isHiddenFileId(t)||!1===o._isVisible(t))){if(c.hasOwnProperty(t.userId)||u&&o._hasHighPriorityOverrideMaterial(t))return void d.push(t);var n=!1;if(h&&o._isRenderPromotion(t)&&(n=!0),i){var a=t.userData,s=a?a.categoryId:void 0;s&&i[s]&&(n=!0)}if(n)return void f.push(t);r<m&&(p[r]=t,r++)}}(w,g)}}}}return s.Logger.timeEnd("collectNodeInfo"),r}},{key:"_clearUsedNodeInfosObject",value:function(){for(var e in this.usedNodeInfosObject)delete this.usedNodeInfosObject[e].default,delete this.usedNodeInfosObject[e].instance,delete this.usedNodeInfosObject[e];this.usedNodeInfosObject={}}},{key:"_getUsedNodeInfosByCellId",value:function(e){return this.usedNodeInfosObject[e]}},{key:"_cacheUsedNodeInfosByCellId",value:function(e,t){this.usedNodeInfosObject[e]||(this.usedNodeInfosObject[e]={},this.usedNodeInfosObject[e].default=[],this.usedNodeInfosObject[e].instance=[]),t.instanceOrNot||this.usedNodeInfosObject[e].default.push(t)}},{key:"_isSatisfied",value:function(e,t){var i=e.getLoadedUserIdsObject();return!i||!!i[t.userId]}},{key:"_logicCullWithFull",value:function(e,t){return this._logicCull(e,!1,!0,0,t)}},{key:"_sortVisibleOctant",value:function(e,t){var i=null;if(this.manager.getContainsCamera(e)&&null!=this.manager.getLoader(e).octreeRootNodeI){var r=new s.OctantNeighborUtil(t,this.manager.getLoader(e).octreeRootNodeI);i=r.getAncestorAndNeighbors()}this.visibleOctant.sort(function(e,t){if(null!=i){if(void 0!=i[e.octantId])return-1;if(void 0!=i[t.octantId])return 1}return e.priority>t.priority?-1:e.priority<t.priority?1:0})}},{key:"_applyOcclusionTranslucent",value:function(e){if(s.GlobalData.OcclusionTranslucentEnabled){var t=e.pool.getObjects(),i=e.manager.octantToObjectMap,r=this.occlusionVisibleOctant.length;if(r>0)for(var n=e.manager.getFrustumFromOcclusionCamera(),a=0;a<r;++a){var o=this.occlusionVisibleOctant[a].octantId,l=i[o];if(l&&l.length>0)for(var u=0,c=l.length;u<c;u+=2)for(var h=l[u];h<=l[u+1];h++){var d=t[h];s.CameraUtil.intersectObjectWithFrustum(d,n)&&this._overrideOcclusionMaterial(d)}}}}},{key:"_overrideOcclusionMaterial",value:function(e,t){var i=t.material;if(i&&!1===i.transparent){var r=e.manager.acquireMaterial(),n=r.material;i.color?n.color.copy(i.color):r.resetColor(),n.opacity=s.GlobalData.OcclusionOpacity,t.material=n,t.material.needsUpdate=!0}}},{key:"_clearNodePriorityData",value:function(e){var t=this.nodePriority;t.high.length=0,t.medium.length=0,e&&(t.low.length=0)}},{key:"_adjustLowNodePriorityLength",value:function(e){0===this.nodePriority.low.length&&(this.nodePriority.low.length=this.manager.getRenderableCount(e))}},{key:"_clearLineSegmentsNodeGroup",value:function(e){this._getLineSegmentsNodeGroup(e).clear()}},{key:"_getLineSegmentsNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.LINESEGMENTS,{globalSpace:!0})}},{key:"getBlinkMaterials",value:function(){return this.blinkMaterials}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=e.getModelDescriptor().getStandardNodeInfosById(t);if(!i)return[];for(var r=[],n=e.getDatabagId(),a=0,o=i.length;a<o;a++){var l=i[a],u=this.getGeometryByNodeInfo(e,l);if(u){var c=s.ModelView.BaseDescriptor.isLineNode(l);if(u instanceof Array)for(var h=0,d=u.length;h<d;h++){var f=u[h].getAttribute("uv");r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u[h].getAttribute("position").array,index:u[h].getIndex().array,matrix:l.matrix,uv:f?f.array:null})}else{var f=u.getAttribute("uv");r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u.getAttribute("position").array,index:u.getIndex().array,matrix:l.matrix,uv:f?f.array:null})}}}return r}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"traverseActiveMeshMap",value:function(e,t){e=e||Object.keys(this.activeMeshMap);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(this.activeMeshMap[n])for(var a=Object.keys(this.activeMeshMap[n]),o=0,s=a.length;o<s;o++){var l=a[o],u=this.activeMeshMap[n][l];t(n,l,u)}}}},{key:"getActiveMeshMapById",value:function(e){return this.activeMeshMap[e]}},{key:"_cacheActiveMesh",value:function(e,t,i){this.activeMeshMap[e]||(this.activeMeshMap[e]={}),this.activeMeshMap[e][t]||(this.activeMeshMap[e][t]=[]),this.activeMeshMap[e][t].push(i)}},{key:"_clearActiveMeshMap",value:function(){this.activeMeshMap={}}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingMeshGenerator(this)),this.pickingNodeGenerators[e]}},{key:"isPickableNode",value:function(e){return!this.filter||this.filter._isPickable({name:e})}}]),t}(s.ModelView.MeshBaseManager);s.ModelView.FreeIncrementedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.wireframeGeometryMap={},this.wireframeLineMeshes={}}return _createClass(e,[{key:"destroy",value:function(){if(this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this._clearWireframeLineMeshes(),this.wireframeLineMeshes=null,this._disposeGeometries(),this.wireframeGeometryMap=null,this.manager=null}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearWireframeLineMeshes(),this._disposeGeometries()}},{key:"update",value:function(e,t){if(0===t)return void this._clearWireframeGroupNode(e);this.isActivateWireframe(e)?(this._clearWireframeGroupNode(e),this._generateWireframeNodes(e,t),this._getWireWireframeGroupNode(e).updateMatrixWorld(!0)):this._removeWireframeGroupNode(e)}},{key:"_disposeGeometries",value:function(){for(var e in this.wireframeGeometryMap)this._disposeGeometry(e)}},{key:"_disposeGeometry",value:function(e){var t=this.wireframeGeometryMap[e];if(t){if(t instanceof Array)for(var i=0,r=t.length;i<r;i++)t[i].dispose();else t.dispose();delete this.wireframeGeometryMap[e]}}},{key:"_clearWireframeLineMeshes",value:function(){for(var e in this.wireframeLineMeshes)delete this.wireframeLineMeshes[e];this.wireframeLineMeshes={}}},{key:"_clearWireframeGroupNode",value:function(e){this._getWireWireframeGroupNode(e).clear()}},{key:"_removeWireframeGroupNode",value:function(e){e.manager.scene.removeObjectGroupByName(this._getWireframeGroupName(e))}},{key:"isActivateWireframe",value:function(e){return e.isActivateWireframe()}},{key:"_getWireWireframeGroupNode",value:function(e){return e.manager.scene.getOrCreateObjectGroup(this._getWireframeGroupName(e),{globalSpace:!0})}},{key:"_getWireframeGeometryByNodeInfo",value:function(e,t){return this._getWireframeGeometryById(t.geometryId,this.manager.getGeometryByNodeInfo(e,t))}},{key:"_getWireframeGeometryById",value:function(e,t){if(this.wireframeGeometryMap[e])return this.wireframeGeometryMap[e];var i,r,n=[];if(t instanceof Array)for(var a=0,o=t.length;a<o;a++)r=s.BuildEdge(t[a].attributes.position.array,t[a].index.array),i=new THREE.BufferGeometry,i.setIndex(new THREE.Uint32BufferAttribute(r,1)),i.addAttribute("position",t[a].attributes.position,3),n.push(i);else r=s.BuildEdge(t.attributes.position.array,t.index.array),i=new THREE.BufferGeometry,i.setIndex(new THREE.Uint32BufferAttribute(r,1)),i.addAttribute("position",t.attributes.position,3),n.push(i);return this.wireframeGeometryMap[e]=n,this.wireframeGeometryMap[e]}},{key:"_makeWireframeLineMeshes",value:function(e,t,i){if(t.type!==s.ModelView.BaseDescriptor.EnumNodeItemType.LINE){var r=this.wireframeLineMeshes[t.nodeId];if(!r){r=this.wireframeLineMeshes[t.nodeId]=[];for(var n=this._getWireframeGeometryByNodeInfo(e,t),a=0,o=n.length;a<o;a++){var l=new THREE.LineSegments(n[a],this._getWireframeMaterial(e));l.name=t.nodeId+"_"+a,l.applyMatrix(t.matrix),r.push(l)}}if(!e.isReplacedUserId(t.userId)&&!e.isHiddenSourceObjectUserId(t.userId)&&function(e,t){return(!s.GlobalData.Instance||e.geometryId!==s.ModelView.BaseDescriptor.parameterizedNodeType.BOX&&e.geometryId!=s.ModelView.BaseDescriptor.parameterizedNodeType.BOX_M)&&!(t._hasRenderWithBoardlineFilter()&&!t._isRenderWithBoardline(e))}(t,this._getFilter(e)))for(var u=this._getFilter(e)._getOverrideWireFrameMaterial(t)||this._getWireframeMaterial(e),c=0,h=r.length;c<h;c++)r[c].material=u,i.add(r[c])}}},{key:"_generateWireframeNodes",value:function(e,t){for(var i=this._getWireWireframeGroupNode(e),r=this.manager.getPriorityNodes(),n=0,a=0,o=r.length;a<o;++a)for(var s=r[a],l=0,u=Object.keys(s).length;l<u&&!(++n>t);++l){var c=s[l];this._makeWireframeLineMeshes(e,c,i)}}},{key:"_getWireframeGroupName",value:function(e){return e._getWireframeGroupName()}},{key:"_getWireframeMaterial",value:function(e){return e.getWireframeMaterial()}},{key:"_getFilter",value:function(e){return e.getFilter()}},{key:"explode",value:function(e){for(var t=new THREE.Matrix4,i=e.getModelDescriptor().getAllNodeInfos(),r=Object.keys(i),n=0,a=r.length;n<a;n++){var o=r[n],s=i[o],l=e.modelExplosion.getExplosionTranslation(o);t.makeTranslation(l.x,l.y,l.z);for(var u=0,c=s.length;u<c;u++){var h=this.wireframeLineMeshes[s[u].nodeId];if(h)for(var d=0;d<h.length;d++)h[d].applyMatrix(t)}}}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.FreeIncrementedWireframeManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=new s.ModelView.FreeIncrementedMeshManager(this),this.wireframeManager=new s.ModelView.FreeIncrementedWireframeManager(this)}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null}},{key:"clearData",value:function(){this.meshManager.clearData(),this.wireframeManager.clearData()}},{key:"disposeGeometry",value:function(e){this.meshManager.disposeGeometry(e)}},{key:"cullNodes",value:function(e,t){this.hasNodeInfo(e)&&this.meshManager.cullNodes(e,t)}},{key:"hasNodeInfo",value:function(e){return!!e.getModelDescriptor().getStandardNodeInfos()}},{key:"updateNodes",value:function(e){if(this.hasNodeInfo(e)){var t=this.meshManager.update(e);this.wireframeManager.update(e,t)}}},{key:"applyFilter",value:function(e,t){}},{key:"applySelection",value:function(e){}},{key:"clearSelection",value:function(e){}},{key:"applyHover",value:function(e){}},{key:"clearHover",value:function(e){}},{key:"applyBlink",value:function(e){}},{key:"clearBlink",value:function(e){}},{key:"applyReplacement",value:function(e){}},{key:"getPriorityNodes",value:function(){return this.meshManager.getPriorityNodes()}},{key:"getGeometryByNodeInfo",value:function(e,t){return this.meshManager.getGeometryByNodeInfo(e,t)}},{key:"getRenderableCount",value:function(e){return e.getRenderableCount()}},{key:"getLoader",value:function(e){return e.getLoader()}},{key:"getContainsCamera",value:function(e){return e.containsCamera}},{key:"getFilter",value:function(e){return e.getFilter()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"explode",value:function(e){this.hasNodeInfo(e)&&(this.meshManager.explode(e),this.wireframeManager.explode(e))}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}},{key:"isHiddenNode",value:function(e){return!1}}]),e}();s.ModelView.FreeIncrementedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="default",i.defaultManager=new s.ModelView.FreeIncrementedManager,i.instancedManager=new s.ModelView.InstancedManager,i.loader=new s.ModelView.DefaultLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepareData",value:function(e){if(!this.dataReady){var t=this;this.loader.getDescriptor().asyncParseItemData(function(){t.dataReady=!0,t.settleData(e)})}}},{key:"prepare",value:function(e){this.isLoaded()&&!this.isHidden()&&(this.model.getMaterialManager()._updateTextureMapping(),this.model.clearMeshFromOctantMap(),this.instancedManager.addAllInstanceNodeToScene(this.model),this.defaultManager.cullNodes(this.model,e),this.prepareWireframe(this.model),this.updateNodes())}},{key:"prepareWireframe",value:function(e,t){e.isActivateWireframe()&&this.instancedManager.generateWireframe(e)}},{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.addNodeInfoToOctantMap(),this.model.getModelDescriptor().destroyReader(),this.createMeshNodes(e)}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"createMeshNodes",value:function(e){var t=this,i=this.model.getModelDescriptor().getInstancedUserIds();if(0===i.length)return this.loaded=!0,void(e&&e());this.instancedManager.asyncCreateMeshNodes(this.model,i,function(){t.loaded=!0,e&&e()})}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.FreeIncrementHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="layer",i.defaultManager=new s.ModelView.FreeIncrementedManager,i.instancedManager=new s.ModelView.InstancedManager,i.loader=new s.ModelView.LayerLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e){!this.isHidden()&&this.loaded&&this.layerDataLoaded&&(this.model.getMaterialManager()._updateTextureMapping(this.model),this.model.clearMeshFromOctantMap(),this.instancedManager.addAllInstanceNodeToScene(this.model),this.defaultManager.cullNodes(this.model,e),this.prepareWireframe(this.model),this.updateNodes())}},{key:"prepareWireframe",value:function(e,t){e.isActivateWireframe()&&this.instancedManager.generateWireframe(e)}},{key:"dealMeshNodes",value:function(e){var t=this.model.getModelDescriptor().getInstancedUserIdsByCategory(this.loadedUserIds);t.length&&this.instancedManager.createMeshNodes(this.model,t),e&&e()}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.LayerHandler);s.ModelView.FreeLayerIncrementHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="layer",i.defaultManager=new s.ModelView.FreeIncrementedManager,i.instancedManager=new s.ModelView.InstancedManager,i.loader=new s.ModelView.LayerSceneLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepare",value:function(e){!this.isHidden()&&this.loaded&&this.layerDataLoaded&&(this.model.getMaterialManager()._updateTextureMapping(this.model),this.model.clearMeshFromOctantMap(),this.instancedManager.addAllInstanceNodeToScene(this.model),this.defaultManager.cullNodes(this.model,e),this.prepareWireframe(this.model),this.updateNodes())}},{key:"prepareWireframe",value:function(e,t){e.isActivateWireframe()&&this.instancedManager.generateWireframe(e)}},{key:"dealMeshNodes",value:function(e){var t=this.model.getModelDescriptor().getInstancedUserIdsByCategory(this.loadedUserIds);t.length&&this.instancedManager.createMeshNodes(this.model,t),e&&e()}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.LayerSceneHandler);s.ModelView.FreeLayerSceneIncrementHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="layer",i.compositedManager=new s.ModelView.IncrementCompositedManager,i.defaultManager=i.compositedManager.defaultManager,i.instancedManager=i.compositedManager.instancedManager,i.loader=new s.ModelView.LayerLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.compositedManager.destroy(),this.compositedManager=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"prepareData",value:function(e){if(!this.dataReady){var t=this;this.compositedManager.settleData(this.model,function(){t.dataReady=!0,t.settleData(e)})}}},{key:"prepare",value:function(e){this.isAllReady()&&(this.model.getMaterialManager()._updateTextureMapping(),this.model.clearMeshFromOctantMap(),this.compositedManager.cullNodes(this.model,e),this.compositedManager.updateNodes(this.model))}},{key:"updateNodes",value:function(){}},{key:"addNodeInfoToOctantMap",value:function(){}},{key:"dealMeshNodes",value:function(e){e&&e()}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.LayerHandler);s.ModelView.LayerIncrementHandler=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="layer",i.compositedManager=new s.ModelView.IncrementCompositedManager,i.defaultManager=i.compositedManager.defaultManager,i.instancedManager=i.compositedManager.instancedManager,i.loader=new s.ModelView.LayerSceneLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.compositedManager.destroy(),this.compositedManager=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"initData",value:function(e){var t=this;this.compositedManager.settleData(this.model,function(){t.model.getModelDescriptor().classifyAllNodeInfo(),t.getLayerProvider().cacheNodeInfosWithLayerKey(),t.addNodeInfoToOctantMap(),t.loadedUserIdsObject=t.getLayerProvider().getUserIdsOnDemand(),t.loadedUserIds=Object.keys(t.loadedUserIdsObject),e&&e()})}},{key:"prepare",value:function(e){this.isAllReady()&&(this.model.getMaterialManager()._updateTextureMapping(),this.model.clearMeshFromOctantMap(),this.compositedManager.cullNodes(this.model,e),this.compositedManager.updateNodes(this.model))}},{key:"updateNodes",value:function(){}},{key:"addNodeInfoToOctantMap",value:function(){}},{key:"clearData",value:function(){this.model.removeAllFromOctantMap(),this.getLayerProvider().clearData(),this.model.clearWireframeElementCount(),this.compositedManager.clearData(),this.clearLoadedState()}},{key:"dealMeshNodes",value:function(e){e&&e()}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.LayerSceneHandler);s.ModelView.LayerSceneIncrementHandler=e}(),function(){var e=function(){function e(t,i,r){_classCallCheck(this,e),this.id=t,this.positionOffsetMap=i,this.geometry=r,this.object=new s.MeshEx(r)}return _createClass(e,[{key:"destroy",value:function(){this.positionOffsetMap=null,this.geometry.dispose(),this.geometry=null}},{key:"getPositionAndIndexOffset",value:function(e){return this.positionOffsetMap?this.positionOffsetMap[e]:null}}]),e}(),t=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.bufferDataObjectMap={},e.bufferDataObjectIdMap={},e.parameterizedBufferMap={},e.geometryIdMapOnBufferDataObjectId={},e.mpkIdMapOnCellId={},e}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.geometryIdMapOnbufferDataObjectId=void 0}},{key:"setToBufferDataObjectMap",value:function(e,t){if(!this.bufferDataObjectMap[e]){var i=null;if(t){var r=t.bufferData,n=t.positionOffsetMap;return i=new THREE.BufferGeometry,i.setIndex(new THREE.BufferAttribute(r.index,1)),i.addAttribute("position",new THREE.BufferAttribute(r.position,3)),r.normal?i.addAttribute("normal",new THREE.BufferAttribute(r.normal,3)):i.computeVertexNormals(),r.uv&&i.addAttribute("uv",new THREE.BufferAttribute(r.uv,2)),void(this.bufferDataObjectMap[e]=new s.ModelView.BatchedBufferDataObject(e,n,i))}var a=s.ModelView.BaseDescriptor.parameterizedNodeType;switch(e){case a.PIPE:i=s.GeomUtil.UnitCylinderInstance;break;case a.PIPE_M:i=s.GeomUtil.getUnitTextureCylinder();break;case a.BOX:i=s.GeomUtil.UnitBoxInstance;break;case a.BOX_M:i=s.GeomUtil.getUnitTextureBox()}i&&(i.clearGroups&&i.clearGroups(),this.bufferDataObjectMap[e]=new s.ModelView.BatchedBufferDataObject(e,void 0,i))}}},{key:"removeFromBufferDataObjectMap",value:function(e){var t=this.bufferDataObjectMap[e];t&&(t.destroy(),delete this.bufferDataObjectMap[e])}},{key:"getBufferDataObjectById",value:function(e){return this.bufferDataObjectMap[e]}},{key:"getBufferDataObjectByGeometryId",value:function(e){var t=this.getBufferDataObjectIdByGeometryId(e);return void 0!==t?this.getBufferDataObjectById(t):void 0}},{key:"setToBufferDataObjectIdMap",value:function(e,t){this.bufferDataObjectIdMap[e]=t}},{key:"_isParameterizedNodeType",value:function(e){return s.ModelView.BaseDescriptor.isParameterizedNodeType(e)}},{key:"getBufferDataObjectIdByGeometryId",value:function(e){var t=this.bufferDataObjectIdMap[e];if(void 0!==t)return t;if(this._isParameterizedNodeType(e)){var i=s.ModelView.BaseDescriptor.parameterizedNodeType;return t=e===i.TUBE?i.PIPE:e,this.setToBufferDataObjectMap(t),this.setToBufferDataObjectIdMap(e,t),this.setToGeometryIdMap(t,e),this.bufferDataObjectIdMap[e]}}},{key:"setToGeometryIdMap",value:function(e,t){this.geometryIdMapOnBufferDataObjectId[e]||(this.geometryIdMapOnBufferDataObjectId[e]={}),this.geometryIdMapOnBufferDataObjectId[e][t]=!0}},{key:"getGeometryIdsByBufferDataObjectId",value:function(e){return this.geometryIdMapOnBufferDataObjectId[e]}},{key:"_classifyNodeInfo",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_classifyNodeInfo",this).call(this,e),this._cacheMpkIdsByCellId(e)}},{key:"_cacheMpkIdsByCellId",value:function(e){void 0===this.mpkIdMapOnCellId[e.cellId]&&(this.mpkIdMapOnCellId[e.cellId]={});var t=this.getBufferDataObjectIdByGeometryId(e.geometryId);void 0!==t&&(this.mpkIdMapOnCellId[e.cellId][t]=!0)}},{key:"getMpkIdsByCellId",value:function(){return this.mpkIdMapOnCellId[nodeInfo.cellId]}}]),t}(s.ModelView.DefaultDescriptor);s.ModelView.IncrementBatchedDescriptor=t,s.ModelView.BatchedBufferDataObject=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.descriptor=new s.ModelView.IncrementBatchedDescriptor,i}return _inherits(t,e),_createClass(t,[{key:"_parseMpkWithNoBatch",value:function(e,t){var i,r,n=new s.Loader.MPKReader(e),a=new THREE.Matrix4,o=[],l=0,u=0,c=[],h=0,d=0;for(i=0,r=n.header.meshCount;i<r;++i){var f=n.getPtBuffer(i),p=n.getIdxBuffer(i),m=n.getNormalBuffer(i);if(void 0!=f&&void 0!=p&&void 0!=m){var v=n.getMeshData(i),g=n.getUVBuffer(i);0!==v.baseScale&&(f=new Float32Array(f),a.identity(),a.setPosition(new THREE.Vector3(v.baseX,v.baseY,v.baseZ)),a.scale(new THREE.Vector3(v.baseScale,v.baseScale,v.baseScale)),s.GeomUtil.applyMatrix4ToBuffer(a,f)),p instanceof Uint16Array&&(p=Uint32Array.from(p)),g&&g.length?(c.push({meshId:v.mesh_id,position:f,index:p,normal:m,uv:g,positionOffset:h,indexOffset:d}),h+=f.length,d+=p.length):(o.push({meshId:v.mesh_id,position:f,index:p,normal:m,positionOffset:l,indexOffset:u}),l+=f.length,u+=p.length)}else s.Logger.log("Error Geometry!")}var y,M,E,b,x,I,T={},w={};if(c.length){for(M=new Uint32Array(d),y=new Float32Array(h),E=new Float32Array(h),b=new Float32Array(h),i=0,r=c.length;i<r;i++){var C=c[i],S=C.meshId,A=C.positionOffset,k=C.position.length,R=C.indexOffset,B=C.index.length;for(x=0,I=C.index.length;x<I;x++)C.index[x]+=A/3;y.set(C.position,A),M.set(C.index,R),E.set(C.normal,A),b.set(C.uv,2*A/3),T[S]={positionStart:A,positionCount:k,indexStart:R,indexCount:B,uvStart:2*A/3,uvCount:2*k/3},
this.descriptor.setToGeometryIdMap(t,S),this.descriptor.setToBufferDataObjectIdMap(S,t)}w={index:new Uint32Array(M),position:new Float32Array(y),normal:new Float32Array(E),uv:new Float32Array(b)}}else{for(M=new Uint32Array(u),y=new Float32Array(l),E=new Float32Array(l),i=0,r=o.length;i<r;i++){var C=o[i],S=C.meshId,A=C.positionOffset,R=C.indexOffset,k=C.position.length,B=C.index.length;for(C.index instanceof Uint16Array&&(C.index=Uint32Array.from(C.index)),x=0,I=C.index.length;x<I;x++)C.index[x]+=A/3;y.set(C.position,A),M.set(C.index,R),E.set(C.normal,A),T[S]={positionStart:A,positionCount:k,indexStart:R,indexCount:B},this.descriptor.setToGeometryIdMap(t,S),this.descriptor.setToBufferDataObjectIdMap(S,t)}w={index:new Uint32Array(M),position:new Float32Array(y),normal:new Float32Array(E)}}this.descriptor.setToBufferDataObjectMap(t,{bufferData:w,positionOffsetMap:T}),n=null}},{key:"_parseMpk",value:function(e,t){var i,r,n,a,o=new s.Loader.BMPKReader(e),l={},u={};if(o.tBuffer.byteLength){for(i=0,r=o.header.meshCount;i<r;++i)n=o.getMeshData(i),a=n.mesh_id,l[a]={positionStart:n.vOffset/4,positionCount:3*n.ptCount,indexStart:n.iOffset/4,indexCount:n.idxCount,uvStart:n.tOffset/4,uvCount:2*n.ptCount},this.descriptor.setToGeometryIdMap(t,a),this.descriptor.setToBufferDataObjectIdMap(a,t);u={index:new Uint32Array(o.iBuffer),position:new Float32Array(o.vBuffer),normal:new Float32Array(o.nBuffer),uv:new Float32Array(o.tBuffer)}}else{for(i=0,r=o.header.meshCount;i<r;++i)n=o.getMeshData(i),a=n.mesh_id,l[a]={positionStart:n.vOffset/4,positionCount:3*n.ptCount,indexStart:n.iOffset/4,indexCount:n.idxCount},this.descriptor.setToGeometryIdMap(t,a),this.descriptor.setToBufferDataObjectIdMap(a,t);u={index:new Uint32Array(o.iBuffer),position:new Float32Array(o.vBuffer),normal:new Float32Array(o.nBuffer)}}this.descriptor.setToBufferDataObjectMap(t,{bufferData:u,positionOffsetMap:l}),o=null}}]),t}(s.ModelView.DefaultBaseLoader);s.ModelView.IncrementBatchedLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.manager=e,i.nodePriority={high:[],medium:[],low:[]},i.visibleOctant=[],i.occlusionVisibleOctant=[],i.usedNodeInfosObject={},i.lineNodes={},i.blinkMaterials=[],i.activeMeshMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.clearData(),this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.activeMeshMap=null,this.manager=null,this.nodePriority=null,this.visibleOctant=null,this.occlusionVisibleOctant=null,this.nodePriority=null,this.lineNodes=null,this.blinkMaterials=null}},{key:"disposeLineNodes",value:function(){for(var e in this.lineNodes){var t=this.lineNodes[e];t.geometry.dispose(),t=null,delete this.lineNodes[e]}}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearActiveMeshMap(),this.disposeGeometries(),this.disposeLineNodes(),this._clearNodePriorityData(!0),this._clearUsedNodeInfosObject(),this.visibleOctant.length=0,this.occlusionVisibleOctant.length=0}},{key:"update",value:function(e){var t=this._updateMeshNodes(e);return this._applyOcclusionTranslucent(e),t}},{key:"cullNodes",value:function(e,t){this._clearNodePriorityData(!0),this._adjustLowNodePriorityLength(e);var i=0;i=s.GlobalData.EnableOctant?this._cullNodesWithOctant(e,t):this._cullNodesWithFull(e),e.prioritizedNodeCount=this._calcPrioritizedNodeCount(e,i)}},{key:"getPriorityNodes",value:function(){return[this.nodePriority.high,this.nodePriority.medium,this.nodePriority.low]}},{key:"_cullNodesWithInnerAndOuterOctree",value:function(e,t){var i=0,r=0,n=e.getModelDescriptor().getOctreeRootNode(),a=n.inner,o=n.outer;if(this.manager.getContainsCamera(e)||!o)return this.visibleOctant.length=0,a&&this._frustumCull(e,t,a),o&&this._frustumCull(e,t,o),r=this.visibleOctant.length,r>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!0,i,r)),i;o&&(this.visibleOctant.length=0,this._frustumCull(e,t,o),(r=this.visibleOctant.length)>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!1,i,r)));var s=this.manager.getFilter(e);return(Object.keys(this.nodePriority.low).length+this.nodePriority.high.length+this.nodePriority.medium.length<this.manager.getRenderableCount(e)||s._hasRenderPromotionFilter())&&a&&(this.visibleOctant.length=0,this._frustumCull(e,t,a),(r=this.visibleOctant.length)>0&&(this._sortVisibleOctant(e,t),i=this._logicCull(e,!0,!1,i,r))),i}},{key:"_cullNodesWithLayerOctree",value:function(e,t){var i=0;this.visibleOctant.length=0;var r=e.getModelDescriptor().getOctreeRootNode().layer;this._frustumCull(e,t,r);var n=this.visibleOctant.length;return n>0&&(this._sortVisibleOctant(t),i=this._logicCull(e,!0,!0,i,n)),i}},{key:"_cullNodesWithOctant",value:function(e,t){return e.getModelDescriptor().isUseInnerAndOuterOctree()?this._cullNodesWithInnerAndOuterOctree(e,t):this._cullNodesWithLayerOctree(e,t)}},{key:"_cullNodesWithFull",value:function(e){var t=e.getModelDescriptor().getCellCount();return 0===t?0:this._logicCullWithFull(e,t)}},{key:"_calcPrioritizedNodeCount",value:function(e,t){var i=t+this.nodePriority.high.length+this.nodePriority.medium.length;return i>this.manager.getRenderableCount(e)&&(i=this.manager.getRenderableCount(e)),i}},{key:"_updateMeshNodes",value:function(e){if(this._clearActiveMeshMap(),this._clearLineSegmentsNodeGroup(e),e.isOnlyWireframe())return 0;var t=e.prioritizedNodeCount;if(0===t)return 0;var i=[this.nodePriority.high,this.nodePriority.medium,this.nodePriority.low],r=null;i[0].length>0&&(r=e.selectedMaterial);var n=e.getFilter()._hasOverrideMaterialFilter(),a={octantStartIndex:-1,curOctantId:-1};this.blinkMaterials.length=0;for(var o=0,l=0,u=0,c=i.length;u<c;++u)for(var h=i[u],d=0,f=Object.keys(h).length;d<f&&!(o>t);++d){l++;var p,m=h[d];p=0===u?this._getUsableMaterial(e,m,r,n):this._getUsableMaterial(e,m,null,n);var v=!m.instanceOrNot;if(s.ModelView.BaseDescriptor.isLineNode(m))this._dealLineSegments(e,m,v,p);else{var g=e.pool.counter;this._dealMeshes(e,m,v,p,a);var y=e.pool.counter-g;o+=y,t+=y-1}p=null}return r=null,i=null,l}},{key:"_getUsableMaterial",value:function(e,t,i,r){var n=t.materialId,a=t.userId,o=e.materialManager.materials,l=e.manager.sceneState,u=e.getFilter(),c=null,h=l.isSelected(a);1!=h||u._isPickable(t)||(h=!1),i?s.GlobalData.PickingEffect?c=u._getOverrideMaterial(t):(c=u._getOverrideMaterial(t))&&!h||(c=i):r&&(c=u._getOverrideMaterial(t));var d=e.manager.getOverrideMaterialByNodeInfo(t,e.materialManager.getMaterialById(t.materialId));return c=c||d||o[n]||s.MaterialUtil.getDefaultStandardMaterial(),s.GlobalData.Hover&&l.hoverId===a&&!1===h&&(c=l.getHoverMaterial(c)),c}},{key:"getMeshesByUserIds",value:function(e,t,i){for(var r=e.pool._pool,n=t.toString(),a=i.toString(),o=0;o<r.length;o++){var s=r[o];if(s.name==n||s.name==a){var l={};l.mesh=s,l.matrix=s.matrix;var u=s.geometry.boundingBox;u||(s.geometry.computeBoundingBox(),u=l.mesh.geometry.boundingBox),l.boundingBox=u,e.minDistanceObjects[s.name].push(l)}}}},{key:"explode",value:function(e){for(var t=e.pool._pool,i=0;i<t.length;i++){var r=t[i],n=e.modelExplosion.getExplosionTranslation(r.name);r.translateZ(n.z),r.updateMatrix(),r.updateMatrixWorld()}}},{key:"getGeometryByNodeInfo",value:function(e,t){var i=!!e.getModelDescriptor()._isParameterizedNodeType(t.geometryId),r=i?t.geometryId+"|"+t.nodeId:t.nodeId;if(this._hasGeometry(r))return this.getGeometryById(r);if(s.ModelView.BaseDescriptor.isLineNode(t))return this._createGeometryForLineNodeByNodeInfo(e,t);var n=i?this._createGeometryForParameterizedNodeByNodeInfo(e,t):this._createGeometryByNodeInfo(e,t);return n?(this._cacheGeometry(r,n),n):null}},{key:"_createGeometryForParameterizedNodeByNodeInfo",value:function(e,t){if(t.instanceOrNot)return null;var i=e.getModelDescriptor(),r=i.getBufferDataObjectByGeometryId(t.geometryId);if(!r)return null;if(!t.uvArrayBuffer)return r.geometry;var n=[],a=r.geometry;a instanceof Array||(a=[a]);for(var o=new THREE.Matrix3,s=new THREE.Vector3,l=t.uvArrayBuffer,u=0,c=a.length;u<c;u++){var h=new THREE.BufferGeometry;h.setIndex(a[u].index),h.addAttribute("position",a[u].attributes.position),h.addAttribute("normal",a[u].attributes.normal),o.set(l[6*u],l[6*u+2],l[6*u+4],l[6*u+1],l[6*u+3],l[6*u+5],0,0,1);for(var d=[],f=a[u].attributes.uv.array,p=0,m=f.length;p<m;p+=2)s.set(f[p],f[p+1],1),s.applyMatrix3(o),d.push(s.x),d.push(s.y);h.addAttribute("uv",new THREE.Float32BufferAttribute(d,2)),n.push(h)}return n}},{key:"_createGeometryByNodeInfo",value:function(e,t){var i=t.geometryId,r=e.getModelDescriptor(),n=r.getBufferDataObjectByGeometryId(i);if(!n)return null;var a=new THREE.BufferGeometry;a.setIndex(n.geometry.getIndex()),a.addAttribute("position",n.geometry.getAttribute("position"));var o=n.geometry.getAttribute("normal");o&&a.addAttribute("normal",o);var s=n.geometry.getAttribute("uv");s&&a.addAttribute("uv",s);var l=n.getPositionAndIndexOffset(i);return a.setDrawRange(l.indexStart,l.indexCount),a._withDrawRange=!0,a._positionOffset=l,a}},{key:"_createGeometryForLineNodeByNodeInfo",value:function(e,t){return this._createGeometryByNodeInfo(e,t)}},{key:"_dealMeshes",value:function(e,t,i,r,n){var a=this.getGeometryByNodeInfo(e,t);if(a){a instanceof Array||(a=[a]);for(var o=e.pool,l=0,u=a.length;l<u;l++){var c=o.get({databagId:e.databagId,nodeId:t.nodeId,userId:t.userId,userData:t.userData,geometry:a[l],matrix:t.matrix,material:r,renderOrder:r.transparent?0:s.GlobalData.MaximumDepth-t.cellDepth,visible:i});c&&(c.geometryId=t.geometryId,this._cacheActiveMesh(t.userId,t.nodeId,c),e.manager.addMeshToOctantMap(e.getEncodedDatabagId(),t.nodeId,new s.SingleCapsuleObjectWithDrawRange(t.nodeId,c)))}}}},{key:"_dealLineSegments",value:function(e,t,i,r){var n=this.getGeometryByNodeInfo(e,t);if(n){var a=this._getLineSegmentsNodeGroup(e),o=this.lineNodes[t.nodeId];o||(o=new s.LineSegmentsEx(n,r),o.databagId=e.databagId,o.name=t.userId,o.nodeId=t.nodeId,o.geometryId=t.geometryId,t.matrix&&(o.matrix.copy(t.matrix),o.matrixAutoUpdate=!1),this.lineNodes[t.nodeId]=o),o.material=r,o.visible=i,a.add(o),o.updateMatrixWorld(!0),this._cacheActiveMesh(t.userId,t.nodeId,new s.SingleCapsuleObject(o))}}},{key:"_frustumCull",value:function(e,t,i){function r(e,t,i,n,a){var o,s;if(t&&e.depth<i&&(u.set(e.min,e.max),o=t.intersectsBox(u)),o){if(n){var c=u.applyMatrix4(l),h=c.getSize().length(),d=c.getCenter().z;d=d>1e-6?d:1e-6,e.priority=h/d,a.push(e)}else a.push(e);for(var f=0,p=e.childOctants.length;f<p;++f)s=e.childOctants[f],r(s,t,i,n,a)}}var n=e.manager,a=t.getFrustum(),o=s.GlobalData.OctantDepth,l=t.projScreenMatrix,u=new THREE.Box3;(s.GlobalData.DEBUG&&n.showOctreeBox(i),r(i,a,o,!0,this.visibleOctant),s.GlobalData.OcclusionTranslucentEnabled)&&r(i,this.manager.getFrustumFromOcclusionCamera(),o,!1,this.occlusionVisibleOctant);return!0}},{key:"_logicCull",value:function(e,t,i,r,n){var a=e.manager,o=e.getFilter(),l=o._hasHiddenFileIdFilter(),u=o._hasOverrideMaterialFilter(),c=a.sceneState.selectionSet,h=o._hasRenderPromotionFilter(),d=this.nodePriority.high,f=this.nodePriority.medium,p=this.nodePriority.low,m=this.nodePriority.low.length,v=e.getModelDescriptor().getNodeInfosWithCellId(),g=a.getCategoriesFromHighPriority("outer");!0===i&&(g=a.getCategoriesFromHighPriority("inner"));for(var y,M=0,E=0;E<n;++E){var b,x=0;t?(b=this.visibleOctant[E].octantId,x=this.visibleOctant[E].depth):b=E;var I=v[b];if(I){var T=this._getUsedNodeInfosByCellId(b);if(!T){for(y=0,M=I.length;y<M;++y){var w=I[y];w.octantId=b,w.cellDepth=x,this._isSatisfied(e,w)&&this._cacheUsedNodeInfosByCellId(b,w)}T=this._getUsedNodeInfosByCellId(b)}if(T){var C=T.default;for(y=0,M=C.length;y<M;y++){var w=C[y];!function(t,i){if(!e.isReplacedUserId(t.userId)&&!e.isHiddenSourceObjectUserId(t.userId)&&!(l&&o._isHiddenFileId(t)||!1===o._isVisible(t))){if(c.hasOwnProperty(t.userId)||u&&o._hasHighPriorityOverrideMaterial(t))return void d.push(t);var n=!1;if(h&&o._isRenderPromotion(t)&&(n=!0),i){var a=t.userData,s=a?a.categoryId:void 0;s&&i[s]&&(n=!0)}if(n)return void f.push(t);r<m&&(p[r]=t,r++)}}(w,g)}}}}return s.Logger.timeEnd("collectNodeInfo"),r}},{key:"_clearUsedNodeInfosObject",value:function(){for(var e in this.usedNodeInfosObject)delete this.usedNodeInfosObject[e].default,delete this.usedNodeInfosObject[e].instance,delete this.usedNodeInfosObject[e];this.usedNodeInfosObject={}}},{key:"_getUsedNodeInfosByCellId",value:function(e){return this.usedNodeInfosObject[e]}},{key:"_cacheUsedNodeInfosByCellId",value:function(e,t){this.usedNodeInfosObject[e]||(this.usedNodeInfosObject[e]={},this.usedNodeInfosObject[e].default=[],this.usedNodeInfosObject[e].instance=[]),t.instanceOrNot||this.usedNodeInfosObject[e].default.push(t)}},{key:"_isSatisfied",value:function(e,t){var i=e.getLoadedUserIdsObject();return!i||!!i[t.userId]}},{key:"_logicCullWithFull",value:function(e,t){return this._logicCull(e,!1,!0,0,t)}},{key:"_sortVisibleOctant",value:function(e,t){var i=null;if(this.manager.getContainsCamera(e)&&null!=this.manager.getLoader(e).octreeRootNodeI){var r=new s.OctantNeighborUtil(t,this.manager.getLoader(e).octreeRootNodeI);i=r.getAncestorAndNeighbors()}this.visibleOctant.sort(function(e,t){if(null!=i){if(void 0!=i[e.octantId])return-1;if(void 0!=i[t.octantId])return 1}return e.priority>t.priority?-1:e.priority<t.priority?1:0})}},{key:"_applyOcclusionTranslucent",value:function(e){if(s.GlobalData.OcclusionTranslucentEnabled){var t=e.pool.getObjects(),i=e.manager.octantToObjectMap,r=this.occlusionVisibleOctant.length;if(r>0)for(var n=e.manager.getFrustumFromOcclusionCamera(),a=0;a<r;++a){var o=this.occlusionVisibleOctant[a].octantId,l=i[o];if(l&&l.length>0)for(var u=0,c=l.length;u<c;u+=2)for(var h=l[u];h<=l[u+1];h++){var d=t[h];s.CameraUtil.intersectObjectWithFrustum(d,n)&&this._overrideOcclusionMaterial(d)}}}}},{key:"_overrideOcclusionMaterial",value:function(e,t){var i=t.material;if(i&&!1===i.transparent){var r=e.manager.acquireMaterial(),n=r.material;i.color?n.color.copy(i.color):r.resetColor(),n.opacity=s.GlobalData.OcclusionOpacity,t.material=n,t.material.needsUpdate=!0}}},{key:"_clearNodePriorityData",value:function(e){var t=this.nodePriority;t.high.length=0,t.medium.length=0,e&&(t.low.length=0)}},{key:"_adjustLowNodePriorityLength",value:function(e){0===this.nodePriority.low.length&&(this.nodePriority.low.length=this.manager.getRenderableCount(e))}},{key:"_clearLineSegmentsNodeGroup",value:function(e){this._getLineSegmentsNodeGroup(e).clear()}},{key:"_getLineSegmentsNodeGroup",value:function(e){return e._getNodeGroup(s.ObjectGroupType.LINESEGMENTS,{globalSpace:!0})}},{key:"getBlinkMaterials",value:function(){return this.blinkMaterials}},{key:"getGeometryBuffersByUserId",value:function(e,t){var i=e.getModelDescriptor().getStandardNodeInfosById(t);if(!i)return[];for(var r=[],n=e.getDatabagId(),a=0,o=i.length;a<o;a++){var l=i[a],u=this.getGeometryByNodeInfo(e,l);if(u){var c=s.ModelView.BaseDescriptor.isLineNode(l);if(u instanceof Array)for(var h=0,d=u.length;h<d;h++)r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u[h].getAttribute("position").array,index:u[h].getIndex().array,matrix:l.matrix});else r.push({isLines:c,databagId:n,nodeId:l.nodeId,position:u.getAttribute("position").array,index:u.getIndex().array,matrix:l.matrix})}}return r}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"traverseActiveMeshMap",value:function(e,t){e=e||Object.keys(this.activeMeshMap);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(this.activeMeshMap[n])for(var a=Object.keys(this.activeMeshMap[n]),o=0,s=a.length;o<s;o++){var l=a[o],u=this.activeMeshMap[n][l];t(n,l,u)}}}},{key:"getActiveMeshMapById",value:function(e){return this.activeMeshMap[e]}},{key:"_cacheActiveMesh",value:function(e,t,i){this.activeMeshMap[e]||(this.activeMeshMap[e]={}),this.activeMeshMap[e][t]||(this.activeMeshMap[e][t]=[]),this.activeMeshMap[e][t].push(i)}},{key:"_clearActiveMeshMap",value:function(){this.activeMeshMap={}}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingMeshGenerator(this)),this.pickingNodeGenerators[e]}}]),t}(s.ModelView.MeshBaseManager);s.ModelView.IncrementBatchedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.manager=t,this.wireframeGeometryMap={},this.wireframeLineMeshes={}}return _createClass(e,[{key:"destroy",value:function(){if(this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this._clearWireframeLineMeshes(),this.wireframeLineMeshes=null,this._disposeGeometries(),this.wireframeGeometryMap=null,this.manager=null}},{key:"clearData",value:function(){if(this.pickingNodeGenerators)for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].clearData();this._clearWireframeLineMeshes(),this._disposeGeometries()}},{key:"update",value:function(e,t){if(0===t)return void this._clearWireframeGroupNode(e);this.isActivateWireframe(e)?(this._clearWireframeGroupNode(e),this._generateWireframeNodes(e,t),this._getWireWireframeGroupNode(e).updateMatrixWorld(!0)):this._removeWireframeGroupNode(e)}},{key:"_disposeGeometries",value:function(){for(var e in this.wireframeGeometryMap)this._disposeGeometry(e)}},{key:"_disposeGeometry",value:function(e){var t=this.wireframeGeometryMap[e];if(t){if(t instanceof Array)for(var i=0,r=t.length;i<r;i++)t[i].dispose();else t.dispose();delete this.wireframeGeometryMap[e]}}},{key:"_clearWireframeLineMeshes",value:function(){for(var e in this.wireframeLineMeshes)delete this.wireframeLineMeshes[e];this.wireframeLineMeshes={}}},{key:"_clearWireframeGroupNode",value:function(e){this._getWireWireframeGroupNode(e).clear()}},{key:"_removeWireframeGroupNode",value:function(e){e.manager.scene.removeObjectGroupByName(this._getWireframeGroupName(e))}},{key:"isActivateWireframe",value:function(e){return e.isActivateWireframe()}},{key:"_getWireWireframeGroupNode",value:function(e){return e.manager.scene.getOrCreateObjectGroup(this._getWireframeGroupName(e),{globalSpace:!0})}},{key:"_getWireframeGeometryByNodeInfo",value:function(e,t){return this._getWireframeGeometryById(t.geometryId,this.manager.getGeometryByNodeInfo(e,t))}},{key:"_buildGeometryEdge",value:function(e){var t,i=e.attributes.position.array,r=e.index.array;if(e._withDrawRange){var n=e._positionOffset,a=r.slice(n.indexStart,n.indexStart+n.indexCount),o=i.slice(n.positionStart,n.positionStart+n.positionCount),l=n.positionStart/3;a.forEach(function(e,t,i){i[t]-=l}),t=s.BuildEdge(o,a),t.forEach(function(e,t,i){i[t]+=l})}else t=s.BuildEdge(i,r);return t}},{key:"_getWireframeGeometryById",value:function(e,t){if(this.wireframeGeometryMap[e])return this.wireframeGeometryMap[e];Array.isArray(t)||(t=[t]);for(var i,r=[],n=0,a=t.length;n<a;n++){var o=t[n],s=this._buildGeometryEdge(o);i=new THREE.BufferGeometry,i.setIndex(new THREE.Uint32BufferAttribute(s,1)),i.addAttribute("position",o.getAttribute("position")),r.push(i)}return this.wireframeGeometryMap[e]=r,this.wireframeGeometryMap[e]}},{key:"_makeWireframeLineMeshes",value:function(e,t,i){if(!s.ModelView.BaseDescriptor.isLineNode(t)){var r=this.wireframeLineMeshes[t.nodeId];if(!r){r=this.wireframeLineMeshes[t.nodeId]=[];for(var n=this._getWireframeGeometryByNodeInfo(e,t),a=0,o=n.length;a<o;a++){var l=new THREE.LineSegments(n[a],this._getWireframeMaterial(e));l.name=t.nodeId+"_"+a,l.applyMatrix(t.matrix),r.push(l)}}if(!e.isReplacedUserId(t.userId)&&!e.isHiddenSourceObjectUserId(t.userId)&&function(e,t){return(!s.GlobalData.Instance||e.geometryId!==s.ModelView.BaseDescriptor.parameterizedNodeType.BOX&&e.geometryId!==s.ModelView.BaseDescriptor.parameterizedNodeType.BOX_M)&&!(t._hasRenderWithBoardlineFilter()&&!t._isRenderWithBoardline(e))}(t,this._getFilter(e)))for(var u=0,c=r.length;u<c;u++)i.add(r[u])}}},{key:"_generateWireframeNodes",value:function(e,t){for(var i=this._getWireWireframeGroupNode(e),r=this.manager.getPriorityNodes(),n=0,a=0,o=r.length;a<o;++a)for(var s=r[a],l=0,u=Object.keys(s).length;l<u&&!(++n>t);++l){var c=s[l];this._makeWireframeLineMeshes(e,c,i)}}},{key:"_getWireframeGroupName",value:function(e){return e._getWireframeGroupName()}},{key:"_getWireframeMaterial",value:function(e){return e.getWireframeMaterial()}},{key:"_getFilter",value:function(e){return e.getFilter()}},{key:"explode",value:function(e){for(var t=new THREE.Matrix4,i=e.getModelDescriptor().getAllNodeInfos(),r=Object.keys(i),n=0,a=r.length;n<a;n++){var o=r[n],s=i[o],l=e.modelExplosion.getExplosionTranslation(o);t.makeTranslation(l.x,l.y,l.z);for(var u=0,c=s.length;u<c;u++){var h=this.wireframeLineMeshes[s[u].nodeId];if(h)for(var d=0;d<h.length;d++)h[d].applyMatrix(t)}}}},{key:"disposeBufferAfterVbo",value:function(){}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingWireFrameGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();s.ModelView.IncrementBatchedWireFrameManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.meshManager=new s.ModelView.IncrementBatchedMeshManager(this),this.wireframeManager=new s.ModelView.IncrementBatchedWireFrameManager(this)}return _createClass(e,[{key:"destroy",value:function(){this.meshManager.destroy(),this.meshManager=null,this.wireframeManager.destroy(),this.wireframeManager=null}},{key:"clearData",value:function(){this.meshManager.clearData(),this.wireframeManager.clearData()}},{key:"disposeGeometry",value:function(e){this.meshManager.disposeGeometry(e)}},{key:"cullNodes",value:function(e,t){this.hasNodeInfo(e)&&this.meshManager.cullNodes(e,t)}},{key:"hasNodeInfo",value:function(e){return!!e.getModelDescriptor().getStandardNodeInfos()}},{key:"updateNodes",value:function(e){if(this.hasNodeInfo(e)){var t=this.meshManager.update(e);this.wireframeManager.update(e,t)}}},{key:"applyFilter",value:function(e,t){}},{key:"applySelection",value:function(e){}},{key:"clearSelection",value:function(e){}},{key:"applyHover",value:function(e){}},{key:"clearHover",value:function(e){}},{key:"applyBlink",value:function(e){}},{key:"clearBlink",value:function(e){}},{key:"applyReplacement",value:function(e){}},{key:"getPriorityNodes",value:function(){return this.meshManager.getPriorityNodes()}},{key:"getGeometryByNodeInfo",value:function(e,t){return this.meshManager.getGeometryByNodeInfo(e,t)}},{key:"getRenderableCount",value:function(e){return e.getRenderableCount()}},{key:"getLoader",value:function(e){return e.getLoader()}},{key:"getContainsCamera",value:function(e){return e.containsCamera}},{key:"getFilter",value:function(e){return e.getFilter()}},{key:"getMeshesByUserIds",value:function(e,t,i){this.meshManager.getMeshesByUserIds(e,t,i)}},{key:"disposeBufferAfterVbo",value:function(){this.meshManager.disposeBufferAfterVbo(),this.wireframeManager.disposeBufferAfterVbo()}},{key:"getGeometryBuffersByUserId",value:function(e,t){return this.meshManager.getGeometryBuffersByUserId(e,t)}},{key:"explode",value:function(e){this.hasNodeInfo(e)&&(this.meshManager.explode(e),this.wireframeManager.explode(e))}},{key:"getMeshManager",value:function(){return this.meshManager}},{key:"getWireFrameManager",value:function(){return this.wireframeManager}},{key:"isHiddenNode",value:function(e){return!1}},{key:"isParameterizedNode",value:function(e){}}]),e}();s.ModelView.IncrementBatchedManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedMeshManager);s.ModelView.IncrementInstanceBatchedMeshManager=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(s.ModelView.InstancedWireframeManager);s.ModelView.IncrementInstanceBatchedWireFrameManager=e}(),function(){var e=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.meshManager=new s.ModelView.IncrementInstanceBatchedMeshManager(e),e.wireframeManager=new s.ModelView.IncrementInstanceBatchedWireFrameManager(e),e}return _inherits(t,e),t}(s.ModelView.InstancedBaseManager);s.ModelView.IncrementInstanceBatchedManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.tag="default",i.defaultManager=new s.ModelView.IncrementBatchedManager,i.instancedManager=new s.ModelView.IncrementInstanceBatchedManager,i.loader=new s.ModelView.IncrementBatchedLoader(i),i}return _inherits(t,e),_createClass(t,[{key:"prepareData",value:function(e){if(!this.dataReady){var t=this;this.loader.getDescriptor().asyncParseItemData(function(){t.dataReady=!0,t.settleData(e)})}}},{key:"prepare",value:function(e){this.isLoaded()&&!this.isHidden()&&(this.model.getMaterialManager()._updateTextureMapping(),this.model.clearMeshFromOctantMap(),this.instancedManager.addAllInstanceNodeToScene(this.model),this.defaultManager.cullNodes(this.model,e),this.prepareWireframe(this.model),this.updateNodes())}},{key:"prepareWireframe",value:function(e,t){e.isActivateWireframe()&&this.instancedManager.generateWireframe(e)}},{key:"settleData",value:function(e){this.model.getModelDescriptor().classifyAllNodeInfo(),this.addNodeInfoToOctantMap(),this.model.getModelDescriptor().destroyReader(),this.createMeshNodes(e)}},{key:"addNodeInfoToOctantMap",value:function(){var e=this.model.manager,t=this.model.getEncodedDatabagId();this.model.getModelDescriptor().traverseNodeInfosByCell(function(i,r){e.addNodeInfoToOctantMap(t,i,r)})}},{key:"createMeshNodes",value:function(e){var t=this,i=this.model.getModelDescriptor().getInstancedUserIds();if(0===i.length)return t.loaded=!0,void(e&&e());s.Utils.asyncProcess(i,i.length,500,function(e,i){t.instancedManager.meshManager._createInstanceGeometries(t.model,[e[i]])},function(){t.instancedManager.meshManager._makeInstanceNodes(t.model),t.loaded=!0,e&&e()})}},{key:"disposeBufferAfterVbo",value:function(){}}]),t}(s.ModelView.ModelBaseHandler);s.ModelView.IncrementBatchedHandler=e}(),s.OctantNeighborUtil=function(e,t){this.camera=e,this.root=t,this.searchNeighborOfNeighbor=!1,this.containChildOfNeighbor=!1,this.containedOctants=[],this.father=function(e){return e++,e<this.containedOctants.length?this.containedOctants[e]:null},this.adjFace=function(e,t){return i[8*e+t]},this.adjEdge=function(e,t){return r[8*e+t]},this.adjVertex=function(e,t){return e==t},this.refelectFace=function(e,t){return n[8*e+t]},this.refelectEdge=function(e,t){return a[8*e+t]},this.refelectVertex=function(e,t){return this.OctType.MAXTYPEID-t},this.common_face_edge=function(e,t){return o[8*e+t]},this.common_face_vertex=function(e,t){return s[8*e+t]},this.common_edge=function(e,t){return l[8*e+t]},this.son=function(e,t){var i,r=e.childOctants.length;for(i=0;i<r;i++)if(e.childOctants[i].octType==t)return e.childOctants[i];return null},this.FaceType={L:0,R:1,D:2,U:3,B:4,F:5,UNKNOWN:6},this.EdgeType={LD:0,LU:1,LB:2,LF:3,RD:4,RU:5,RB:6,RF:7,DB:8,DF:9,UB:10,UF:11,UNKNOWN:12},this.OctType={RUF:0,LUF:1,RDF:2,LDF:3,RUB:4,LUB:5,RDB:6,LDB:7,MAXTYPEID:7};var i=[!1,!0,!1,!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0,!1,!1,!1,!0,!0,!1,!1,!0,!0,!0,!0,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1],r=[!1,!1,!1,!0,!1,!1,!1,!0,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!0,!1,!0,!1,!0,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!0,!1,!0,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1],n=[1,0,3,2,5,4,7,6,1,0,3,2,5,4,7,6,2,3,0,1,6,7,4,5,2,3,0,1,6,7,4,5,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3],a=[3,2,1,0,7,6,5,4,3,2,1,0,7,6,5,4,5,4,7,6,1,0,3,2,5,4,7,6,1,0,3,2,3,2,1,0,7,6,5,4,3,2,1,0,7,6,5,4,5,4,7,6,1,0,3,2,5,4,7,6,1,0,3,2,6,7,4,5,2,3,0,1,6,7,4,5,2,3,0,1,6,7,4,5,2,3,0,1,6,7,4,5,2,3,0,1],o=[6,0,2,6,6,0,2,6,3,6,6,0,3,6,6,0,6,0,6,0,4,6,4,6,5,6,5,6,6,0,6,0,1,6,6,2,1,6,6,2,6,3,1,6,6,3,1,6,1,6,1,6,6,4,6,4,6,5,6,5,1,6,1,6,6,6,2,2,4,4,6,6,5,5,6,6,6,6,2,2,3,3,6,6,6,6,4,4,6,6,5,5,3,3,6,6],s=[6,6,6,5,6,3,1,6,6,6,5,6,3,6,6,0,6,5,6,6,1,6,6,2,5,6,6,6,6,0,2,6,6,3,1,6,6,6,6,4,3,6,6,0,6,6,4,6,1,6,6,2,6,4,6,6,6,0,2,6,1,6,6,6],l=[12,11,7,12,5,12,12,12,11,12,12,3,12,1,12,12,7,12,12,9,12,12,4,12,12,3,9,12,12,12,12,0,5,12,12,12,12,10,6,12,12,1,12,12,10,12,12,2,12,12,4,12,6,12,12,8,12,12,12,0,12,2,8,12]},s.OctantNeighborUtil.prototype.findFaceNeighborImpl=function(e,t){var i={node:null,cont:!1},r=this.containedOctants,n=r[e];if(e>=r.length)return i;if(this.father(e)&&this.adjFace(t,n.octType)?i=this.findFaceNeighborImpl(e+1,t):(i.node=this.father(e),i.cont=!0),i.cont&&null!==i.node&&i.node.childOctants.length>0){var a=this.son(i.node,this.refelectFace(t,n.octType));return a?{node:a,cont:!0}:{node:i.node,cont:!1}}return i},s.OctantNeighborUtil.prototype.findFaceNeighbor=function(e,t){var i=this.findFaceNeighborImpl(e,t);return i.node&&!i.node.isRoot()?i.node:null},s.OctantNeighborUtil.prototype.findEdgeNeighborImpl=function(e,t){var i={node:null,cont:!1},r=this.containedOctants,n=r[e];if(e>=r.length)return i;if(this.father(e)&&(this.adjEdge(t,n.octType)?i=this.findEdgeNeighborImpl(e+1,t):this.common_face_edge(t,n.octType)!==this.FaceType.UNKNOWN?i=this.findFaceNeighborImpl(e+1,this.common_face_edge(t,n.octType)):(i.node=this.father(e),i.cont=!0)),i.cont&&null!==i.node&&i.node.childOctants.length>0){var a=this.son(i.node,this.refelectEdge(t,n.octType));return a?{node:a,cont:!0}:{node:i.node,cont:!1}}return i},s.OctantNeighborUtil.prototype.findEdgeNeighbor=function(e,t){var i=this.findEdgeNeighborImpl(e,t);return i.node&&!i.node.isRoot()?i.node:null},s.OctantNeighborUtil.prototype.findVertexNeighborImpl=function(e,t){var i={node:null,cont:!1},r=this.containedOctants,n=r[e];if(e>=r.length)return i;if(this.father(e)&&(this.adjVertex(t,n.octType)?i=this.findVertexNeighborImpl(e+1,t):this.common_edge(t,n.octType)!==this.EdgeType.UNKNOWN?i=this.findVertexNeighborImpl(e+1,this.common_edge(t,n.octType)):this.common_face_vertex(t,n.octType)!=this.FaceType.UNKNOWN?i=this.findVertexNeighborImpl(e+1,this.common_face_vertex(t,n.octType)):(i.node=this.father(e),i.cont=!0)),i.cont&&null!==i.node&&i.node.childOctants.length>0){var a=this.son(i.node,this.refelectVertex(t,n.octType));return a?{node:a,cont:!0}:{node:i.node,cont:!1}}return i},s.OctantNeighborUtil.prototype.findVertexNeighbor=function(e,t){var i=this.findVertexNeighborImpl(e,t);return i.node&&!i.node.isRoot()?i.node:null},s.OctantNeighborUtil.prototype.findContainNode=function(e){var t,i=this.camera,r=i.position;if(!(r.x<e.min.x||r.x>e.max.x||r.y<e.min.y||r.y>e.max.y||r.z<e.min.z||r.z>e.max.z)){if(0!=e.childOctants.length){var n,a;for(n=0,a=e.childOctants.length;n<a&&(t=e.childOctants[n],!this.findContainNode(t));++n);}return this.containedOctants.push(e),!0}return!1},s.OctantNeighborUtil.prototype.findNeighborNode=function(){var e,t=this.searchNeighborOfNeighbor,i=this.containChildOfNeighbor,r=this.camera,n=this.containedOctants,a=this.OctType,o=this.EdgeType,s=[];if(0==n.length)return s;var l,u,c,h,d,f,p,m,v=r.frustum,g=n[0];p=g.min,m=g.max
;var y=r.target,M=r.position,E=new THREE.Vector3(y.x-M.x,y.y-M.y,y.z-M.z),b=new THREE.Ray(M,E),x=[],I=new THREE.Box3(p,m),T=b.intersectBox(I);if(T&&(T.y==p.y||T.y==m.y?T.x<=m.x&&T.x>=p.x&&T.z<=m.z&&T.z>=p.z&&(T.y==p.y?x.push(2):x.push(3)):T.z==p.z||T.z==m.z?T.x<=m.x&&T.x>=p.x&&T.y<=m.y&&T.y>=p.y&&(T.z==p.z?x.push(4):x.push(5)):T.x!=p.x&&T.x!=m.x||T.z<=m.z&&T.z>=p.z&&T.y<=m.y&&T.y>=p.y&&(T.x==p.x?x.push(0):x.push(1))),0==x.length)return s;h=m.x-p.x,d=m.y-p.y,f=m.z-p.z,d>h&&(h=d),f>h&&(h=f);var w=h,C=new THREE.Vector3;for(l=0;l<6;l++)if(l!=x[0]){switch(C.copy(g.center),l){case 0:C.x-=w;break;case 1:C.x+=w;break;case 2:C.y-=w;break;case 3:C.y+=w;break;case 4:C.z-=w;break;case 5:C.z+=w}var S=w/2,A=new THREE.Box3(new THREE.Vector3(C.x-S,C.y-S,C.z-S),new THREE.Vector3(C.x+S,C.y+S,C.z+S));v.intersectsBox(A)&&x.push(l)}if(x.length>1&&x.sort(),x.length>2){var k=0;for(l=0;l<x.length;l++)for(u=l+1;u<x.length;u++)for(c=u+1;c<x.length;c++){if(1==x[l]&&3==x[u]&&5==x[c])k=a.RUF;else if(0==x[l]&&3==x[u]&&5==x[c])k=a.LUF;else if(1==x[l]&&2==x[u]&&5==x[c])k=a.RDF;else if(0==x[l]&&2==x[u]&&5==x[c])k=a.LDF;else if(1==x[l]&&3==x[u]&&4==x[c])k=a.RUB;else if(0==x[l]&&3==x[u]&&4==x[c])k=a.LUB;else if(1==x[l]&&2==x[u]&&4==x[c])k=a.RDB;else{if(0!=x[l]||2!=x[u]||4!=x[c])continue;k=a.LDB}e=this.findVertexNeighbor(0,k),e&&(s.push(e),i&&this.getChildOfOctant(e,2,k,s),t&&(e=this.getNeighborOfSecondLevel(e,2,k))&&s.push(e))}}if(x.length>1){var R=0;for(l=0;l<x.length;l++)for(u=l+1;u<x.length;u++){if(0==x[l]&&2==x[u])R=o.LD;else if(0==x[l]&&3==x[u])R=o.LU;else if(0==x[l]&&4==x[u])R=o.LB;else if(0==x[l]&&5==x[u])R=o.LF;else if(1==x[l]&&2==x[u])R=o.RD;else if(1==x[l]&&3==x[u])R=o.RU;else if(1==x[l]&&4==x[u])R=o.RB;else if(1==x[l]&&5==x[u])R=o.RF;else if(2==x[l]&&4==x[u])R=o.DB;else if(2==x[l]&&5==x[u])R=o.DF;else if(3==x[l]&&4==x[u])R=o.UB;else{if(3!=x[l]||5!=x[u])continue;R=o.UF}e=this.findEdgeNeighbor(0,R),e&&(s.push(e),i&&this.getChildOfOctant(e,1,R,s),t&&(e=this.getNeighborOfSecondLevel(e,1,R))&&s.push(e))}}for(l=0;l<x.length;l++)(e=this.findFaceNeighbor(0,x[l]))&&(s.push(e),i&&this.getChildOfOctant(e,0,x[l],s),t&&(e=this.getNeighborOfSecondLevel(e,0,x[l]))&&s.push(e));return s.sort(function(e,t){return e.octantId<t.octantId?-1:1}),s},s.OctantNeighborUtil.prototype.getChildOfOctant=function(e,t,i,r){if(!(0==e.childOctants.length||e.depth<4)){var n=this.FaceType,a=[];switch(t){case 0:a.push(i%2==0?i+1:i-1);break;case 1:var o=this.EdgeType;switch(i){case o.LD:a.push(n.R),a.push(n.U);break;case o.LU:a.push(n.R),a.push(n.D);break;case o.LB:a.push(n.R),a.push(n.F);break;case o.LF:a.push(n.R),a.push(n.B);break;case o.RD:a.push(n.L),a.push(n.U);break;case o.RU:a.push(n.L),a.push(n.D);break;case o.RB:a.push(n.L),a.push(n.F);break;case o.RF:a.push(n.L),a.push(n.B);break;case o.DB:a.push(n.U),a.push(n.F);break;case o.DF:a.push(n.U),a.push(n.B);break;case o.UB:a.push(n.D),a.push(n.F);break;case o.UF:a.push(n.D),a.push(n.B)}break;case 2:var s=this.OctType;switch(i){case s.RUF:a.push(n.L),a.push(n.D),a.push(n.B);break;case s.LUF:a.push(n.R),a.push(n.D),a.push(n.B);break;case s.RDF:a.push(n.L),a.push(n.U),a.push(n.B);break;case s.LDF:a.push(n.R),a.push(n.U),a.push(n.B);break;case s.RUB:a.push(n.L),a.push(n.D),a.push(n.F);break;case s.LUB:a.push(n.R),a.push(n.D),a.push(n.F);break;case s.RDB:a.push(n.L),a.push(n.U),a.push(n.F);break;case s.LDB:a.push(n.R),a.push(n.U),a.push(n.F)}}for(var l=0;l<a.length;l++)this.getFaceChildOfOctant(e,a[l],r)}},s.OctantNeighborUtil.prototype.getFaceChildOfOctant=function(e,t,i){for(var r,n,a=0,o=e.childOctants.length;a<o;a++)if(r=e.childOctants[a],this.adjFace(t,r.octType))i.push(r),this.getFaceChildOfOctant(r,t,i);else{n=this.refelectFace(t,r.octType);for(var s=0;s<o&&e.childOctants[s].octType!=n;s++);s==o&&(i.push(r),this.getFaceChildOfOctant(r,t,i))}},s.OctantNeighborUtil.prototype.getNeighborOfSecondLevel=function(e,t,i){var r=[],n=[],a=[];a[0]=e,this.getAncestorNodes(this.root,a,0,r,n);var o=new s.OctantNeighborUtil(this.camera,this.root);o.containedOctants=n;var l=null;switch(t){case 0:l=o.findFaceNeighbor(0,i);break;case 1:l=o.findEdgeNeighbor(0,i);break;case 2:l=o.findVertexNeighbor(0,i)}return l},s.OctantNeighborUtil.prototype.getAncestorAndNeighbors=function(){this.searchNeighborOfNeighbor=!0,this.containChildOfNeighbor=!0;var e=this.containedOctants;this.findContainNode(this.root);var t=this.findNeighborNode(this.camera,e),i=[],r=[];this.getAncestorNodes(this.root,t,0,i,r);var n,a,o={};for(n=0,a=e.length;n<a;n++)o[e[n].octantId]=1;for(n=0,a=t.length;n<a;n++)o[t[n].octantId]=1;for(n=0,a=r.length;n<a;n++)o[r[n].octantId]=1;return o},s.OctantNeighborUtil.prototype.getAncestorNodes=function(e,t,i,r,n){var a,o,s;for(a=0,o=e.childOctants.length;a<o&&i<t.length;a++){if(s=e.childOctants[a],r.push(s),s.octantId==t[i].octantId){for(var l=r.length-1;l>=0;l--)n.push(r[l]);i++}else(a==o-1||e.childOctants[a+1].octantId>t[i].octantId)&&(i=this.getAncestorNodes(s,t,i,r,n));r.pop()}return i},s.OctantNeighborUtil.prototype.outputOctants=function(e,t){console.group(),console.log("Node that contains camera: %d",t.octantId);var i="",r=0;for(var n in e)i+=n,i+="  ",r%9==0&&(i+="\n"),r++;console.log("nodes: %s",i),console.groupEnd()},s.OctantNeighborUtil.prototype.outputOctree=function(e,t){console.group();var i,r="";for(i=0;i<e.depth;i++)r+="  ";console.log("%sNode id: %i, depth: %i, octType: %i, parent: %i",r,e.octantId,e.depth,e.octType,t),console.log("%s  size: %f, center: %f, %f, %f",r,e.size,e.center.x,e.center.y,e.center.z),console.log("%s  child number: %i",r,e.childOctants.length);var n="";for(i=0;i<e.childOctants.length;i++)n+=e.childOctants[i].octantId,n+="  ";for(console.log("%s  children: %i",r,n),i=0;i<e.childOctants.length;i++)this.outputOctree(e.childOctants[i],e.octantId);console.groupEnd()},s.Loader.OctreeNode=function(e,t){void 0===e&&alert("Invalid Octant Id"),this.octantId=e,this.childOctants=new Array,this.min=null,this.max=null,this.depth=t||0,this.center=null,this.size=-1,this.priority=-1,this.octType=-1},s.Loader.OctreeNode.prototype.isRoot=function(){return 0==this.depth},s.Loader.OctreeNode.prototype.add=function(e){e.depth=this.depth+1,this.childOctants.push(e)},s.Loader.OctreeNode.prototype.updateMaxDepth=function(){this.depth>s.GlobalData.MaximumDepth&&(s.GlobalData.MaximumDepth=this.depth)},function(){var e=function(){function e(){_classCallCheck(this,e),this.visibleOctantList=[]}return _createClass(e,[{key:"destroy",value:function(){this.visibleOctantList=null}},{key:"_getVisibleOctantsWithInnerAndOuterOctree",value:function(e,t,i){this.visibleOctantList.length=0;var r=e.getModelDescriptor().getOctreeRootNode(),n=r.inner,a=r.outer;if(!n&&!a)return[];var o=e.containsCamera,l=null;if(o)n&&(l=new s.OctantNeighborUtil(t,n).getAncestorAndNeighbors(),this._frustumCull(t,n,i,this.visibleOctantList)),a&&this._frustumCull(t,a,i,this.visibleOctantList),this._sortOctantList(this.visibleOctantList,l);else{var u=[],c=[];a&&(this._frustumCull(t,a,!0,u),this._sortOctantList(u,l)),n&&(l=new s.OctantNeighborUtil(t,n).getAncestorAndNeighbors(),this._frustumCull(t,n,i,c),this._sortOctantList(c,l));var h,d=u.length,f=c.length;for(h=0;h<d;h++)this.visibleOctantList[h]=u[h];for(h=0;h<f;h++)this.visibleOctantList[d+h]=c[h]}return this.visibleOctantList}},{key:"_getVisibleOctantsWithLayerOctree",value:function(e,t,i){this.visibleOctantList.length=0;var r=e.getModelDescriptor().getOctreeRootNode().layer;return this._frustumCull(t,r,i,this.visibleOctantList),this._sortOctantList(this.visibleOctantList),this.visibleOctantList}},{key:"getVisibleOctants",value:function(e,t,i){return e.getModelDescriptor().isUseInnerAndOuterOctree()?this._getVisibleOctantsWithInnerAndOuterOctree(e,t,i):this._getVisibleOctantsWithLayerOctree(e,t,i)}},{key:"_sortOctantList",value:function(e,t){e.sort(function(e,i){if(null!=t){if(void 0!=t[e.octantId])return-1;if(void 0!=t[i.octantId])return 1}return e.priority>i.priority?-1:e.priority<i.priority?1:0})}},{key:"showOctreeBox",value:function(e){if(s.GlobalData.DEBUG){var t=e.getModelDescriptor().getOctreeRootNode();e.getModelDescriptor().isUseInnerAndOuterOctree()?(t.inner&&e.manager.showOctreeBox(t.inner),t.outer&&e.manager.showOctreeBox(t.outer)):t.layer&&e.manager.showOctreeBox(t.layer)}}},{key:"_frustumCull",value:function(e,t,i,r){function n(e,t,i,r,a){var o;if(t&&e.depth<i&&(u.set(e.min,e.max),o=t.intersectsBox(u)),o){if(r){var s=u.applyMatrix4(l),h=s.getSize().length(),d=s.getCenter().z;d=d>c?d:c,e.priority=h/d,a.push(e)}else a.push(e);for(var f=0,p=e.childOctants.length;f<p;++f){n(e.childOctants[f],t,i,r,a)}}}var a=e.getFrustum(),o=s.GlobalData.OctantDepth,l=e.projScreenMatrix,u=new THREE.Box3,c=1e-6;n(t,a,o,i,r)}},{key:"_traverseOctants",value:function(e,t){function i(e,t){t.push(e);for(var r=0,n=e.childOctants.length;r<n;++r){i(e.childOctants[r],t)}}i(e,t)}},{key:"getAllOctants",value:function(e){var t=[],i=e.getModelDescriptor().getOctreeRootNode();return e.getModelDescriptor().isUseInnerAndOuterOctree()?(i.inner&&this._traverseOctants(i.inner,t),i.outer&&this._traverseOctants(i.outer,t)):i.layer&&this._traverseOctants(i.layer,t),t}}]),e}();s.OctantManager=e}(),s.MaterialSelector=function(){var e=[{name:"scene",param:{name:"scene",color:8947848,opacity:.4,transparent:!0,side:THREE.DoubleSide}},{name:"darkRed",param:{name:"darkRed",color:10496040,opacity:1,transparent:!1,side:THREE.DoubleSide}},{name:"lightBlue",param:{name:"lightBlue",color:1275840,opacity:1,transparent:!1,side:THREE.DoubleSide}},{name:"black",param:{name:"black",color:0,opacity:.3,transparent:!0,side:THREE.DoubleSide}},{name:"add",param:{name:"add",color:65280,opacity:1,transparent:!0,side:THREE.DoubleSide}},{name:"delete",param:{name:"delete",color:16711680,opacity:.5,transparent:!0,side:THREE.DoubleSide}},{name:"beforeEdit",param:{name:"beforeEdit",color:16432389,opacity:.5,transparent:!0,side:THREE.DoubleSide}},{name:"afterEdit",param:{name:"afterEdit",color:16432389,opacity:1,transparent:!0,side:THREE.DoubleSide}}],t={};t.selection=s.MaterialUtil.createHighlightMaterial(),t.selection.name="selection";for(var i=0,r=e.length;i<r;++i){var n=e[i],a=n.name,o=n.param;t[a]=s.MaterialUtil.createStandardMaterial(o)}t.red=t.delete,t.green=t.add,t.yellow=t.beforeEdit,t.blue=t.selection;var l={color:8947848,opacity:.2,transparent:!0,side:THREE.DoubleSide},u=s.MaterialUtil.createStandardMaterial(l);u.name="isolate";var c={color:8947848,opacity:.2,transparent:!0,side:THREE.DoubleSide},h=s.MaterialUtil.createStandardMaterial(c);h.name="frozen";var d={color:15293,side:THREE.DoubleSide},f=s.MaterialUtil.createStandardMaterial(d);f.name="selected";var p={},m={},v={};this.getDefaultMaterialName=function(){return"lightBlue"},this.get=function(e){return t[e]},this.getAll=function(){return t},this.add=function(e){var i,r,n={};return e&&e.hasOwnProperty("uuid")?(i="override_"+e.uuid,delete e.uuid,r=t[i],r||(e.name=i,r=s.MaterialUtil.createStandardMaterial(e),t[i]=r),i):(e&&e.hasOwnProperty("color")&&(n.color=e.color,e.hasOwnProperty("opacity")&&(n.opacity=e.opacity,n.transparent=1!=e.opacity),e.hasOwnProperty("map")&&(n.map=e.map,e.hasOwnProperty("bumpMap")&&(n.bumpMap=e.bumpMap))),i=this._getMaterialName(e),r=t[i],r||(n.name=i,r=s.MaterialUtil.createStandardMaterial(n),t[i]=r),i)},this.remove=function(e){var i,r;i=this._getMaterialName(e),(r=t[i])&&delete t[i]},this.has=function(e){return!!t[e]},this.getMaterialNameByColor=function(e){var i,r;return i=this._getMaterialName(e),r=t[i],r?i:this.add(e)},this.addOverrideMaterial=function(e){if(e){var i=e.name;t[i]||(t[i]=e)}},this.getMaterialParamsFromName=function(e){var t={},i=e.split("_");return"mat"==i[0]?(t.color=parseInt(i[1]),t.opacity=1):(t.color=parseInt(i[0]),t.opacity=parseFloat(i[1])),t},this._getMaterialName=function(e){var t;return e&&e.hasOwnProperty("color")?(t=e.hasOwnProperty("opacity")?e.color+"_"+e.opacity:"mat_"+e.color,e.hasOwnProperty("map")&&(t+="_"+e.map.uuid),e.hasOwnProperty("setByOpacity")&&(t+="_opacity")):t="mat_"+e,t},this.setFrozonMaterial=function(e){void 0!==e.color?h.color.setHex(e.color):h.color.setHex(c.color),void 0!==e.opacity?h.opacity=e.opacity:h.opacity=c.opacity,void 0!==e.transparent?h.transparent=e.transparent:h.transparent=c.transparent,void 0!==e.side?h.side=e.side:h.side=c.side,h.needsUpdate=!0},this.getFrozonMaterial=function(){return h},this.setSelectedMaterial=function(e){void 0!==e.color?f.color.setHex(e.color):f.color.setHex(d.color),void 0!==e.opacity?f.opacity=e.opacity:f.opacity=d.opacity,void 0!==e.transparent?f.transparent=e.transparent:f.transparent=d.transparent,void 0!==e.side?f.side=e.side:f.side=d.side,f.needsUpdate=!0},this.getSelectedMaterial=function(){return f},this.setIsolateMaterial=function(e){void 0!==e.color?u.color.setHex(e.color):u.color.setHex(l.color),void 0!==e.opacity?u.opacity=e.opacity:u.opacity=l.opacity,void 0!==e.transparent?u.transparent=e.transparent:u.transparent=l.transparent,void 0!==e.side?u.side=e.side:u.side=l.side,u.needsUpdate=!0},this.getIsolateMaterial=function(){return u},this.resetIsolateMaterial=function(){u.color.setHex(l.color),u.opacity=l.opacity,u.transparent=l.transparent,u.side=l.side,u.needsUpdate=!0},this.addInstanceMaterialForClip=function(e,t){void 0===p[e]&&(p[e]={}),p[e].instanceMaterial=t},this.getAllInstanceMaterialsForClip=function(){return p},this.clearInstanceMaterialsForClip=function(){p={}},this.addMaterialForClip=function(e){var t=this.getMaterialNameBy(e),i=m[t];if(!i){var r={};e.hasOwnProperty("color")&&(r.color=e.color),e.hasOwnProperty("opacity")&&(r.opacity=e.opacity,r.transparent=1!=e.opacity),e.hasOwnProperty("map")&&(r.map=e.map),r.side=s.Utils.isDefined(e.side)?e.side:THREE.DoubleSide,r.name=t,i=s.MaterialUtil.createStandardMaterial(r),m[t]=i}return i},this.getMaterialForClipBy=function(e,t){var i=m[e];return i||t&&(i=t.clone(),i.name=e,m[e]=i),i},this.getAllMaterialsForClip=function(){return m},this.clearMaterialsForClip=function(){for(var e in m)m[e].dispose();m={}},this.getMaterialForModifyOpacityBy=function(e,t){var i=v[e];return i||t&&(i=t.clone(),i.name=e,v[e]=i),i},this.clearMaterialsForModifyOpacity=function(){for(var e in v)v[e].dispose();v={}},this.getMaterialNameBy=function(e){var t="";return e.hasOwnProperty("color")&&(t+=e.color),e.hasOwnProperty("opacity")&&(t+="_"+e.opacity),e.hasOwnProperty("map")&&(t+="_"+e.map.uuid),t}},function(){s.EnumConditionType={HIDDEN_OTHERS:0,TRANSLUCENT_OTHERS:1,OVERRIDE:2,BORDERLINE:3},s.EnumIdBasedType={FILE_VISIBLE:0,FILE_HIDDEN:1,VISIBLE:2,HIDDEN:3,TRANSLUCENT:4,TRANSLUCENT_OTHERS:5,RENDER_PROMOTION:6},s.EnumUserType={HIDDEN_DATA:0,OVERRIDE_DATA:1},s.EnumIsolateState={HIDDEN:0,HIDDEN_OTHERS:1,TRANSLUCENT:2,TRANSLUCENT_OTHERS:3},s.EnumSceneState={DISABLED:0,TRANSLUCENT:1,HIDDEN:2};var e=function(){function e(){_classCallCheck(this,e),this.sceneStateHelper=null,this._filterImpl=new s.FilterManager2,this.filterActionList=[],this.isolateFilterAction=null,this.materialSelector=this._filterImpl.getMaterialSelector(),this.objectInfoManager=new s.ObjectInfoManager,this.filterManagerIO=new s.FilterManagerIO(this.materialSelector),this.observerForSceneState=null,this._stateChanged=!1,this._visibleStateChanged=!1}return _createClass(e,[{key:"destroy",value:function(){}},{key:"setObserverForSceneState",value:function(e){this.observerForSceneState=e}},{key:"setSceneStateHelper",value:function(e){this.sceneStateHelper=e}},{key:"getFilterActionList",value:function(){return this.filterActionList}},{key:"clearFilterActionList",value:function(){this.filterActionList=[]}},{key:"initFilterManager",value:function(e){this.objectInfoManager.init(e)}},{key:"reinitFilterManager",value:function(e){this.objectInfoManager.reinit(e)}},{key:"clearFilterManager",value:function(){this.objectInfoManager.clearData()}},{key:"isStateChanged",value:function(){return this._stateChanged}},{key:"enableStateChanged",value:function(){this._stateChanged=!0}},{key:"disableStateChanged",value:function(){this._stateChanged=!1}},{key:"isVisibleStateChanged",value:function(){return this._visibleStateChanged}},{key:"disableVisibleStateChanged",value:function(){this._visibleStateChanged=!1}},{key:"enableVisibleStateChanged",value:function(){this._visibleStateChanged=!0}},{key:"getIsolateFilterAction",value:function(){return this.isolateFilterAction}},{key:"setIsolateAction",value:function(e){this.isolateFilterAction=e,this.isolateFilterAction.apply()}},{key:"getVisibleComponentsBbox",value:function(){return this.objectInfoManager.getVisibleComponentsBbox()}},{key:"pushBack",value:function(e){var t=e.getClassName();"IsolateIdsFA"==t||"IsolateConditionFA"==t?this.isolateFilterAction=e:this.filterActionList.push(e),"VisibleIdsFA"!=t&&"VisibleConditionFA"!=t||this.enableVisibleStateChanged(!0),this._stateChanged=!0,e.applyFilter(this.objectInfoManager)}},{key:"removeFilterActionByName",value:function(e){for(var t=0;t<this.filterActionList.length;){e==this.filterActionList[t].getClassName()?this.filterActionList.splice(t,1):t++}}},{key:"showAll",value:function(){this.removeFilterActionByName("VisibleIdsFA"),this.removeFilterActionByName("VisibleConditionFA"),this.objectInfoManager.clearVisible(),this.objectInfoManager.calculateVisibleComponentsBbox(),this.enableStateChanged()}},{key:"hideAll",value:function(){var e=new s.VisibleIdsFA(!1,!1);e.ids=[],this.pushBack(e)}},{key:"getObjectInfoManager",value:function(){return this.objectInfoManager}},{key:"getMatchIds",value:function(e){return this.objectInfoManager.getMatchIds(e)}},{key:"_isVisible",value:function(e){var t=e.name;return!this.objectInfoManager.isHidden(t)}},{key:"isHidden",value:function(e){return this.objectInfoManager.isHidden(e)}},{key:"isFrozen",value:function(e){return this.objectInfoManager.isFrozen(e)}},{key:"_isTransparent",value:function(e){var t=e.name;return this.objectInfoManager.isTransparent(t)}},{key:"_isPickable",value:function(e){var t=e.name;return this.isComponentActive(t)&&!this.objectInfoManager.isFrozen(t)}},{key:"_getOverrideMaterial",value:function(e){var t=e.name;return this._getOverrideMaterialById(t)}},{key:"_getOverrideMaterialById",value:function(e){return this.objectInfoManager.isFrozen(e)?this._filterImpl.getFrozonMaterial():this.objectInfoManager.getMaterial(e)}},{key:"_getMaterialName",value:function(e){return this._filterImpl._getMaterialName(e)}},{key:"_getMaterialByName",value:function(e){return this._filterImpl._getMaterialByName(e)}},{key:"_hasOverrideMaterial",value:function(e){var t=e.name;return this.objectInfoManager.hasOverrideMaterial(t)}},{key:"_hasHighPriorityOverrideMaterial",value:function(e){return this._filterImpl._hasHighPriorityOverrideMaterial(e)}},{key:"_isHiddenFileId",value:function(e){return this._filterImpl._isHiddenFileId(e)}},{key:"_isRenderPromotion",value:function(e){return this._filterImpl._isRenderPromotion(e)}},{key:"_isRenderWithBoardline",value:function(e){return this._filterImpl._isRenderWithBoardline(e)}},{key:"_hasHiddenFileIdFilter",value:function(){return this._filterImpl._hasHiddenFileIdFilter()}},{key:"_hasVisibleFilter",value:function(){return this.objectInfoManager.hasObjectHidden()}},{key:"_hasPickableFilter",value:function(){return this.objectInfoManager.hasObjectCantSelected()}},{key:"_hasTransparentFilter",value:function(){return this.objectInfoManager.hasObjectTransparent()}},{key:"_hasOverrideMaterialFilter",value:function(){return this.objectInfoManager.hasOverrideMaterial()}},{key:"_hasLowPriorityOverride",value:function(){return this._filterImpl._hasLowPriorityOverride()}},{key:"_hasRenderPromotionFilter",value:function(){return this._filterImpl._hasRenderPromotionFilter()}},{key:"_hasRenderWithBoardlineFilter",value:function(){return this._filterImpl._hasRenderWithBoardlineFilter()}},{key:"saveState",value:function(){return this.filterManagerIO.saveState(this)}},{key:"loadState",value:function(e){this.filterManagerIO.loadState(e,this)}},{key:"clear",value:function(){this.objectInfoManager.resetAll(),this._stateChanged=!0}},{key:"clearAll",value:function(){return this.enableStateChanged(),this._filterImpl.clearAll()}},{key:"clearIsolate",value:function(){this.objectInfoManager.clearIsolates()}},{key:"clearFrozenList",value:function(){return this.enableStateChanged(),this._filterImpl.clearFrozenList()}},{key:"addToFrozenList",value:function(e){return this.enableStateChanged(),this._filterImpl.addToFrozenList(e)}},{key:"removeFromFrozenList",value:function(e){return this.enableStateChanged(),this._filterImpl.removeFromFrozenList(e)}},{key:"setFrozenList",value:function(e){return this.enableStateChanged(),this._filterImpl.setFrozenList(e)}},{key:"setFrozenConditions",value:function(e){this.enableStateChanged(),this._filterImpl.setFrozenConditions(e)}},{key:"getFrozenConditions",value:function(){return this._filterImpl.getFrozenConditions()}},{key:"clearFrozenConditions",value:function(){this.enableStateChanged(),this._filterImpl.clearFrozenConditions()}},{key:"clearFrozen",value:function(){this.enableStateChanged(),this.clearFrozenList(),this.clearFrozenConditions()}},{key:"clearAllIdList",value:function(){return this.enableStateChanged(),this._filterImpl.clearAllIdList()}},{key:"clearIdList",value:function(e){return this.enableStateChanged(),this._filterImpl.clearIdList(e)}},{key:"addToIdList",value:function(e,t){return this.enableStateChanged(),this._filterImpl.addToIdList(e,t)}},{key:"removeFromIdList",value:function(e,t){return this.enableStateChanged(),this._filterImpl.removeFromIdList(e,t)}},{key:"setIdList",value:function(e,t){return this.enableStateChanged(),this._filterImpl.setIdList(e,t)}},{key:"clearAllOverrideList",value:function(){this.removeFilterActionByName("OverrideIdsFA"),this.removeFilterActionByName("OverrideConditionFA"),this.objectInfoManager.clearMaterial(),this.clearModifyOpacityList(),this.enableStateChanged()}},{key:"clearOverrideList",value:function(e){return this.enableStateChanged(),this._filterImpl.clearOverrideList(e)}},{key:"addToOverrideList",value:function(e,t,i){return this.enableStateChanged(),this._filterImpl.addToOverrideList(e,t,i)}},{key:"removeFromOverrideList",value:function(e,t){return this.enableStateChanged(),this._filterImpl.removeFromOverrideList(e,t)}},{key:"setOverrideList",value:function(e,t,i){return this.enableStateChanged(),this._filterImpl.setOverrideList(e,t,i)}},{key:"addToOverrideListByColor",value:function(e,t){var i=null;if(t){var r=this._filterImpl.getMaterialNameByColor(t);i=this._filterImpl.getMaterialByName(r)}var n=new s.OverrideIdsFA(!0,i);n.ids=e,this.pushBack(n)}},{key:"addToOverrideListByConditions",value:function(e,t){var i=null;if(t){var r=this._filterImpl.getMaterialNameByColor(t);i=this._filterImpl.getMaterialByName(r)}var n=new s.OverrideConditionFA(!0,i);n.conditions=e,this.pushBack(n)}},{key:"addToOverrideListByMaterial",value:function(e,t){this._filterImpl.addOverrideMaterial(t);var i=new s.OverrideConditionFA(!0,t);i.conditions=e,this.pushBack(i)}},{key:"addToOverrideListByMaterialAndId",value:function(e,t){this._filterImpl.addOverrideMaterial(t);var i=new s.OverrideIdsFA(!0,t);i.ids=e,this.pushBack(i)}},{key:"setOverrideListByColor",value:function(e,t,i){for(var r=0;r<t.length;r++){var n=this._filterImpl.getMaterialNameByColor(i),a=this._filterImpl.getMaterialByName(n);this.objectInfoManager.setMaterial(t[r],a)}}},{key:"getVisibleComponentSet",value:function(e){for(var t={},i=Object.keys(e),r=0;r<i.length;r++)this._isVisible({name:i[r]})&&(t[i[r]]=!0);return t}},{key:"clearAllUserList",value:function(){return this.enableStateChanged(),this._filterImpl.clearAllUserList()}},{key:"clearUserListByType",value:function(e){return this.enableStateChanged(),this._filterImpl.clearUserListByType(e)}},{key:"clearUserList",value:function(e,t){return this.enableStateChanged(),this._filterImpl.clearUserList(e,t)}},{key:"addToUserList",value:function(e,t,i,r){return this.enableStateChanged(),this._filterImpl.addToUserList(e,t,i,r)}},{key:"removeFromUserList",value:function(e,t,i){this.enableStateChanged(),this._filterImpl.removeFromUserList(e,t,i)}},{key:"setUserList",value:function(e,t,i,r){this.enableStateChanged(),this._filterImpl.setUserList(e,t,i,r)}},{key:"isIsolate",value:function(){var e=this.objectInfoManager.getObjectsMap();for(var t in e){if(e.hasOwnProperty(t))var i=e[t];for(var r in i){var n=this.objectInfoManager.isIsolateHide(r);if(n|=this.objectInfoManager.isIsolateTransparent(r),n)return!0}}return!1}},{key:"isFiltering",value:function(){var e=this.filterActionList.length>0;return this.isIsolate()||e}},{key:"getFrozonMaterial",value:function(){return this._filterImpl.getFrozonMaterial()}},{key:"setIsolateMaterial",value:function(e){this.enableStateChanged(),this._filterImpl.setIsolateMaterial(e)}},{key:"getIsolateMaterial",value:function(){return this._filterImpl.getIsolateMaterial()}},{key:"resetIsolateMaterial",value:function(){this.enableStateChanged(),this._filterImpl.resetIsolateMaterial()}},{key:"clearAllIsolateList",value:function(){this.objectInfoManager.clearIsolates()}},{key:"clearIsolation",value:function(){this.objectInfoManager.clearIsolates(),this.isolateFilterAction=null,this._stateChanged=!0}},{key:"addToIsolateList",value:function(e,t){var i="HideOthers"==t,r=new s.IsolateIdsFA(i);r.ids=e,this.pushBack(r),this.clearFilterActionList()}},{key:"removeFromIsolateList",value:function(e,t){this.enableStateChanged(),this._filterImpl.removeFromIsolateList(e,t)}},{key:"setIsolateList",value:function(e,t){var i=new s.IsolateIdsFA(t);i.ids=e,this.pushBack(i)}},{key:"removeFromIsolateList",value:function(e,t){this.enableStateChanged(),this._filterImpl.removeFromIsolateList(e,t)}},{key:"setIsolateConditions",value:function(e,t){var i=t==s.EnumIsolateState.HIDDEN_OTHERS,r=new s.IsolateConditionFA(i);r.conditions=e,this.pushBack(r),this.clearFilterActionList(),i&&this.enableVisibleStateChanged(!0)}},{key:"getIsolateConditions",value:function(e){return this._filterImpl.getIsolateConditions(e)}},{key:"clearIsolateConditions",value:function(e){this.enableStateChanged(),this._filterImpl.clearIsolateConditions(e)}},{key:"clearAllIsolateConditions",value:function(){this.enableStateChanged(),this._filterImpl.clearAllIsolateConditions()}},{key:"setConditions",value:function(e,t){if(0==e){this.objectInfoManager.hideAll();var i=new s.VisibleConditionFA(!0,!0);i.conditions=t,this.pushBack(i)}3==e&&this._filterImpl.setConditions(e,t)}},{key:"getConditions",value:function(e){return this._filterImpl.getConditions(e)}},{key:"clearConditions",value:function(e){this.enableStateChanged(),this._filterImpl.clearConditions(e)}},{key:"clearAllConditions",value:function(){this.enableStateChanged(),this._filterImpl.clearAllConditions()}},{key:"makeSceneTranslucent",value:function(){this.enableStateChanged(),this._filterImpl.makeSceneTranslucent()}},{key:"cancelSceneTranslucent",value:function(){this.enableStateChanged(),this._filterImpl.cancelSceneTranslucent()}},{key:"hideScene",value:function(){this.enableStateChanged(),this._filterImpl.hideScene()}},{key:"showScene",value:function(){this.enableStateChanged(),this._filterImpl.showScene()}},{key:"setSceneState",value:function(e){this.enableStateChanged(),this._filterImpl.setSceneState(e)}},{key:"getSceneState",value:function(){return this._filterImpl.getSceneState()}},{key:"cancelHidden",value:function(){this.enableStateChanged(),this._filterImpl.cancelHidden()}},{key:"cancelTranslucent",value:function(){this.enableStateChanged(),this._filterImpl.cancelTranslucent()}},{key:"hideByIds",value:function(e){var t=new s.VisibleIdsFA(!0,!1);t.ids=e,this.pushBack(t)}},{key:"hideByConditions",value:function(e){var t=new s.VisibleConditionFA(!0,!1);t.conditions=e,this.pushBack(t)}},{key:"hideOthersByConditions",value:function(e){var t=new s.VisibleConditionFA(!1,!1);t.conditions=e,this.pushBack(t)}},{key:"showByIds",value:function(e){var t=new s.VisibleIdsFA(!0,!0);t.ids=e,this.pushBack(t)}},{key:"showByConditions",value:function(e){var t=new s.VisibleConditionFA(!0,!0);t.conditions=e,this.pushBack(t)}},{key:"makeTranslucentByIds",value:function(e){var t=new s.TransparentIdsFA(!0,!1);t.ids=e,this.pushBack(t)}},{key:"makeTranslucentByConditions",value:function(e){var t=new s.TransparentConditionFA(!0,!1);t.conditions=e,this.pushBack(t)}},{key:"opaqueByIds",value:function(e){var t=new s.TransparentIdsFA(!0,!0);t.ids=e,this.pushBack(t)}},{key:"opaqueByConditions",value:function(e){var t=new s.TransparentConditionFA(!0,!0);t.conditions=e,this.pushBack(t)}},{key:"setFrozonMaterial",value:function(e){this._filterImpl.setFrozonMaterial(e),this.enableStateChanged()}},{key:"makeTranslucentOthersByIds",value:function(e){var t=new s.TransparentIdsFA(!1,!1);t.ids=e,this.pushBack(t)}},{key:"opaqueAll",value:function(){this.removeFilterActionByName("TransparentIdsFA"),this.removeFilterActionByName("TransparentConditionFA"),this.objectInfoManager.clearTransparent(),this.enableStateChanged()}},{key:"deactivateByIds",value:function(e){this.objectInfoManager.deactivateByIds(e),this.observerForSceneState&&this.observerForSceneState(e)}},{key:"clearInactivatedIdMap",value:function(){this.objectInfoManager.clearInactivatedIdMap()}},{key:"getInactivatedIdMap",value:function(){return this.objectInfoManager.getInactivatedIdMap()}},{key:"deactivateAll",value:function(){this.objectInfoManager.deactivateAll()}},{key:"activateAll",value:function(){this.objectInfoManager.activateAll()}},{key:"isComponentActive",value:function(e){return this.objectInfoManager.isActive(e)}},{key:"getFilterType",value:function(){return this._filterImpl.getFilterType()}},{key:"_hasOverrideMaterialForWireFrame",value:function(e){var t=e.name;return this.objectInfoManager.hasOverrideMaterialForWireFrame(t)}},{key:"_hasOverrideMaterialFilterForWireFrame",value:function(){return this.objectInfoManager.hasOverrideMaterialForWireFrame()}},{key:"_getOverrideMaterialForWireFrame",value:function(e){return this.objectInfoManager.getWireFrameMaterial(e.name)}},{key:"_getOverrideWireFrameMaterial",value:function(e){return this.objectInfoManager.getWireFrameMaterial(e.name)}},{key:"addToOverrideListForWireFrameByColor",value:function(e,t){var i=null;if(t){var r=this._filterImpl.getMaterialNameByColor(t);i=this._filterImpl.getMaterialByName(r)}var n=new s.OverrideIdsForWireFrameFA(!0,i);n.ids=e,this.pushBack(n)}},{key:"addToOverrideListForWireFrameByConditions",value:function(e,t){var i=null;if(t){var r=this._filterImpl.getMaterialNameByColor(t);i=this._filterImpl.getMaterialByName(r)}var n=new s.OverrideConditionForWireFrameFA(!0,i);n.conditions=e,this.pushBack(n)}},{key:"needUpdateBoxAfterExplode",value:function(){this.getObjectInfoManager().needUpdateBoxAfterExplode()}},{key:"addToOpacityListByConditions",value:function(e,t){this.getObjectInfoManager().matchConditions(e,t)}},{key:"addToModifyOpacityList",value:function(e,t){this.getObjectInfoManager().addToModifyOpacityList(e,t)}},{key:"getModifyOpacityList",value:function(){return this.objectInfoManager.modifyOpacityList}},{key:"clearModifyOpacityList",value:function(){this.objectInfoManager.clearModifyOpacityList(),this._filterImpl.clearMaterialsForModifyOpacity()}},{key:"_hasModifyOpacityList",value:function(){return this.objectInfoManager.hasModifyOpacityList}},{key:"getMaterialForModifyOpacityFrom",value:function(e,t){if(e){var i={};i.color=e.color.getHex(),i.opacity=t,i.side=e.side,e.map&&(i.map=e.map);var r=this._filterImpl.getMaterialNameBy(i),n=this._filterImpl.getMaterialForModifyOpacityBy(r,e);return n.opacity=t,n.transparent=t<1,n}}},{key:"addToLocalClippingListByConditions",value:function(e,t){this.getObjectInfoManager().matchConditions(e,t)}},{key:"addToLocalClippingList",value:function(e,t,i,r){if(t&&i){this.addMaterialForClip(t),this.addMaterialForClip(i);var n=this._filterImpl.getMaterialNameBy(t),a=this._filterImpl.getMaterialNameBy(i);this.objectInfoManager.addToLocalClippingList(e,n,a,r)}else this.objectInfoManager.addToLocalClippingList(e);this.enableStateChanged()}},{key:"getLocalClippingList",
value:function(){return this.objectInfoManager.localClippingList}},{key:"clearLocalClippingList",value:function(){this.objectInfoManager.clearLocalClippingList(),this._filterImpl.clearInstanceMaterialsForClip(),this._filterImpl.clearMaterialsForClip(),this.enableStateChanged()}},{key:"_hasLocalClipping",value:function(){return this.objectInfoManager.hasLocalClipping}},{key:"addInstanceMaterialForClip",value:function(e,t){this._filterImpl.addInstanceMaterialForClip(e,t),this.enableStateChanged()}},{key:"getAllInstanceMaterialsForClip",value:function(){return this._filterImpl.getAllInstanceMaterialsForClip()}},{key:"addMaterialForClip",value:function(e){this._filterImpl.addMaterialForClip(e),this.enableStateChanged()}},{key:"getMaterialForClipBy",value:function(e,t){return this._filterImpl.getMaterialForClipBy(e,t)}},{key:"getMaterialForClipFrom",value:function(e){if(e){var t={};t.color=e.color.getHex(),t.opacity=e.opacity,t.side=e.side,e.map&&(t.map=e.map);var i=this._filterImpl.getMaterialNameBy(t);return this._filterImpl.getMaterialForClipBy(i,e)}}},{key:"getAllMaterialsForClip",value:function(){return this._filterImpl.getAllMaterialsForClip()}}]),e}();s.FilterManager=e}(),s.FilterManager2=function(){var e,t,i=s.EnumIdBasedType,r=s.EnumSceneState,n=s.FilterResultMode,a={IDFILTER_OFFSET:0,FILE_VISIBLE:0,FILE_HIDDEN:1,VISIBLE:2,HIDDEN:3,TRANSLUCENT:4,TRANSLUCENT_OTHERS:5,RENDER_PROMOTION:6,IDFILTER_ENDOFFSET:6,ISOLATEFILTER_OFFSET:7,ISOLATE_HIDDEN:7,ISOLATE_HIDDEN_OTHERS:8,ISOLATE_TRANSLUCENT:9,ISOLATE_TRANSLUCENT_OTHERS:10,ISOLATEFILTER_ENDOFFSET:10,USERFILTER_OFFSET:11,USER_HIDDEN:11,USER_OVERRIDE:12,USERFILTER_ENDOFFSET:12,CONDITIONFILTER_OFFSET:13,CONDITION_HIDDEN_OTHERS:13,CONDITION_TRANSLUCENT_OTHERS:14,CONDITION_OVERRIDE:15,CONDITION_BORDERLINE:16,CONDITIONFILTER_ENDOFFSET:16,ISOLATECONDITIONFILTER_OFFSET:17,ISOLATE_CONDITION_HIDDEN:17,ISOLATE_CONDITION_HIDDEN_OTHERS:18,ISOLATE_CONDITION_TRANSLUCENT:19,ISOLATE_CONDITION_TRANSLUCENT_OTHERS:20,ISOLATECONDITIONFILTER_ENDOFFSET:20,FROZENFILTER:21,FROZENCONDITIONFILTER:22,OVERRIDEFILTER:23,BASICFILTER_COUNT:23},o=new s.CompoundFilter(!0),l=new s.CompoundFilter(!0),u=new s.CompoundFilter(!1),c=new s.CompoundFilter(!0),h=new s.CompoundFilter(!1),d=new s.CompoundFilter(!1),f=new s.CompoundFilter(!1),p=[],m=r.DISABLED,v=new s.MaterialSelector;!function(){p[a.FILE_VISIBLE]=new s.FileIdFilter(a.FILE_VISIBLE,"FILE_VISIBLE"),p[a.FILE_HIDDEN]=new s.FileIdFilter(a.FILE_HIDDEN,"FILE_HIDDEN"),p[a.VISIBLE]=new s.GeneralIdFilter(a.VISIBLE,"VISIBLE"),p[a.HIDDEN]=new s.GeneralIdFilter(a.HIDDEN,"HIDDEN"),p[a.TRANSLUCENT]=new s.GeneralIdFilter(a.TRANSLUCENT,"TRANSLUCENT"),p[a.TRANSLUCENT_OTHERS]=new s.GeneralIdFilter(a.TRANSLUCENT_OTHERS,"TRANSLUCENT_OTHERS"),p[a.RENDER_PROMOTION]=new s.GeneralIdFilter(a.RENDER_PROMOTION,"RENDER_PROMOTION"),p[a.ISOLATE_HIDDEN]=new s.GeneralIdFilter(a.ISOLATE_HIDDEN,"ISOLATE_HIDDEN"),p[a.ISOLATE_HIDDEN_OTHERS]=new s.GeneralIdFilter(a.ISOLATE_HIDDEN_OTHERS,"ISOLATE_HIDDEN_OTHERS"),p[a.ISOLATE_TRANSLUCENT]=new s.GeneralIdFilter(a.ISOLATE_TRANSLUCENT,"ISOLATE_TRANSLUCENT"),p[a.ISOLATE_TRANSLUCENT_OTHERS]=new s.GeneralIdFilter(a.ISOLATE_TRANSLUCENT_OTHERS,"ISOLATE_TRANSLUCENT_OTHERS"),p[a.USER_HIDDEN]=new s.UserListFilter(a.USER_HIDDEN,"USER_HIDDEN"),p[a.USER_OVERRIDE]=new s.UserListFilter(a.USER_OVERRIDE,"USER_OVERRIDE"),p[a.CONDITION_HIDDEN_OTHERS]=new s.ConditionFilter(a.CONDITION_HIDDEN_OTHERS,"CONDITION_HIDDEN_OTHERS"),p[a.CONDITION_TRANSLUCENT_OTHERS]=new s.ConditionFilter(a.CONDITION_TRANSLUCENT_OTHERS,"CONDITION_TRANSLUCENT_OTHERS"),p[a.CONDITION_OVERRIDE]=new s.MultiConditionFilter(a.CONDITION_OVERRIDE,"CONDITION_OVERRIDE"),p[a.CONDITION_BORDERLINE]=new s.ConditionFilter(a.CONDITION_BORDERLINE,"CONDITION_BORDERLINE"),p[a.ISOLATE_CONDITION_HIDDEN]=new s.ConditionFilter(a.ISOLATE_CONDITION_HIDDEN,"ISOLATE_CONDITION_HIDDEN"),p[a.ISOLATE_CONDITION_HIDDEN_OTHERS]=new s.ConditionFilter(a.ISOLATE_CONDITION_HIDDEN_OTHERS,"ISOLATE_CONDITION_HIDDEN_OTHERS"),p[a.ISOLATE_CONDITION_TRANSLUCENT]=new s.ConditionFilter(a.ISOLATE_CONDITION_TRANSLUCENT,"ISOLATE_CONDITION_TRANSLUCENT"),p[a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=new s.ConditionFilter(a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS,"ISOLATE_CONDITION_TRANSLUCENT_OTHERS"),t=new s.GeneralIdFilter(a.FROZENFILTER,"FROZENFILTER"),p[a.FROZENCONDITIONFILTER]=new s.ConditionFilter(a.FROZENCONDITIONFILTER,"FROZENCONDITIONFILTER"),p[a.FROZENFILTER]=t,e=new s.OverrideListFilter(a.OVERRIDEFILTER,"OVERRIDEFILTER"),p[a.OVERRIDEFILTER]=e;var i,r={};r[a.HIDDEN]=n.MATCH_RETURN_FALSE,r[a.VISIBLE]=n.NOMATCH_RETURN_FALSE,r[a.USER_HIDDEN]=n.MATCH_RETURN_FALSE,r[a.CONDITION_HIDDEN_OTHERS]=n.NOMATCH_RETURN_FALSE,r[a.ISOLATE_HIDDEN]=n.MATCH_RETURN_FALSE,r[a.ISOLATE_HIDDEN_OTHERS]=n.NOMATCH_RETURN_FALSE,r[a.ISOLATE_CONDITION_HIDDEN_OTHERS]=n.NOMATCH_RETURN_FALSE,o.setFilterMode(r);for(i in r)p[i].registerToCompoundFilter(o);var m={};m[a.FROZENFILTER]=n.MATCH_RETURN_FALSE,m[a.FROZENCONDITIONFILTER]=n.MATCH_RETURN_FALSE,m[a.TRANSLUCENT]=n.MATCH_RETURN_FALSE,m[a.TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_FALSE,m[a.CONDITION_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_FALSE,m[a.ISOLATE_TRANSLUCENT]=n.MATCH_RETURN_FALSE,m[a.ISOLATE_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_FALSE,m[a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_FALSE,c.setFilterMode(m);for(i in m)p[i].registerToCompoundFilter(c);var v={};v[a.ISOLATE_TRANSLUCENT]=n.MATCH_RETURN_TRUE,v[a.ISOLATE_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_TRUE,v[a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_TRUE,v[a.CONDITION_TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_TRUE,v[a.TRANSLUCENT]=n.MATCH_RETURN_TRUE,v[a.TRANSLUCENT_OTHERS]=n.NOMATCH_RETURN_TRUE,v[a.OVERRIDEFILTER]=n.MATCH_RETURN_TRUE,v[a.USER_OVERRIDE]=n.MATCH_RETURN_TRUE,v[a.CONDITION_OVERRIDE]=n.MATCH_RETURN_TRUE,v[a.FROZENFILTER]=n.MATCH_RETURN_TRUE,v[a.FROZENCONDITIONFILTER]=n.MATCH_RETURN_TRUE;var g={};g[a.ISOLATE_TRANSLUCENT]=5,g[a.ISOLATE_TRANSLUCENT_OTHERS]=5,g[a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=5,g[a.CONDITION_TRANSLUCENT_OTHERS]=5,g[a.TRANSLUCENT]=5,g[a.TRANSLUCENT_OTHERS]=5,g[a.OVERRIDEFILTER]=0,g[a.USER_OVERRIDE]=0,g[a.CONDITION_OVERRIDE]=0,g[a.FROZENFILTER]=3,g[a.FROZENCONDITIONFILTER]=3,l.setFilterMode(v),l.setFilterPriority(g);for(i in v)p[i].registerToCompoundFilter(l);var y={};y[a.OVERRIDEFILTER]=n.MATCH_RETURN_TRUE,y[a.USER_OVERRIDE]=n.MATCH_RETURN_TRUE,y[a.CONDITION_OVERRIDE]=n.MATCH_RETURN_TRUE,y[a.CONDITION_TRANSLUCENT_OTHERS]=n.MATCH_RETURN_TRUE,u.setFilterMode(y);for(i in y)p[i].registerToCompoundFilter(u);var M={};M[a.FILE_VISIBLE]=n.NOMATCH_RETURN_TRUE,M[a.FILE_HIDDEN]=n.MATCH_RETURN_TRUE,h.setFilterMode(M);for(i in M)p[i].registerToCompoundFilter(h);var E={};E[a.RENDER_PROMOTION]=n.MATCH_RETURN_TRUE,E[a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS]=n.MATCH_RETURN_TRUE,d.setFilterMode(E);for(i in E)p[i].registerToCompoundFilter(d);var b={};b[a.CONDITION_BORDERLINE]=n.MATCH_RETURN_TRUE,f.setFilterMode(b);for(i in b)p[i].registerToCompoundFilter(f)}(),this.getMaterialSelector=function(){return v},this.getBasicFilterList=function(){return p},this.getFilterType=function(){return a},this.saveState=function(){for(var e,t={},i=0,r=p.length;i<r;i++)e=p[i],t[e.getName()]=e.getAll();return t.sceneState=this.getSceneState(),t.version="0.4",t},this.loadState=function(e){if(this.clearAll(),e.hasOwnProperty("version")){if("0.4"==e.version){for(var t={},i=0,r=p.length;i<r;i++)t[p[i].getName()]=i;for(var n in e)"sceneState"!==n&&"version"!==n&&(t.hasOwnProperty(n)?p[t[n]].setByData(e[n]):s.Logger.warn("Warning: Not supported filter '"+n+"'"))}}else for(var o in e)"sceneState"!==o&&(o<2?p[o].setByData(e[o]):o>2?o<a.BASICFILTER_COUNT+2&&p[o-1].setByData(e[o]):2==o&&s.Logger.warn("Warning: Old version filter data! The selection state is out of the filter, can not restore it."));this.setSceneState(e.sceneState)},this.clear=function(){for(var e=0,t=p.length;e<t;e++){var i=p[e].getType();i!==a.FROZENFILTER&&i!==a.CONDITION_BORDERLINE&&p[e].clearAll()}this.setSceneState(r.DISABLED)},this.clearAll=function(){for(var e=0,t=p.length;e<t;e++)p[e].clearAll();this.setSceneState(r.DISABLED)},this.clearIsolate=function(){this.clearAllIsolateList(),this.clearAllIsolateConditions()},this.clearFrozenList=function(){t.clearAll()},this.addToFrozenList=function(e){t.add(e)},this.removeFromFrozenList=function(e){t.remove(e)},this.setFrozenList=function(e){this.clearFrozenList(),this.addToFrozenList(e)},this.setFrozenConditions=function(e){p[a.FROZENCONDITIONFILTER].setByData(e)},this.getFrozenConditions=function(){return p[a.FROZENCONDITIONFILTER].getAll()},this.clearFrozenConditions=function(){p[a.FROZENCONDITIONFILTER].clear()},this.clearFrozen=function(){this.clearFrozenList(),this.clearFrozenConditions()},this.clearAllIdList=function(){var e;for(e=a.IDFILTER_OFFSET;e<=a.IDFILTER_ENDOFFSET;e++)p[e].clearAll()},this.clearIdList=function(e){var t=a.IDFILTER_OFFSET+e;t>=a.IDFILTER_OFFSET&&t<=a.IDFILTER_ENDOFFSET&&p[t].clear()},this.addToIdList=function(e,t){var i=a.IDFILTER_OFFSET+e;i>=a.IDFILTER_OFFSET&&i<=a.IDFILTER_ENDOFFSET&&p[i].add(t)},this.removeFromIdList=function(e,t){var i=a.IDFILTER_OFFSET+e;i>=a.IDFILTER_OFFSET&&i<=a.IDFILTER_ENDOFFSET&&p[i].remove(t)},this.setIdList=function(e,t){this.clearIdList(e),this.addToIdList(e,t)},this.clearAllOverrideList=function(){e.clearAll()},this.clearOverrideList=function(t){e.clear(t)},this.addToOverrideList=function(t,i,r){i&&i.length>0&&(v.has(r)||(r=v.getDefaultMaterialName()),e.add(t,i,r))},this.removeFromOverrideList=function(t,i){e.remove(t,i)},this.setOverrideList=function(e,t,i){this.clearOverrideList(e),this.addToOverrideList(e,t,i)},this.addToOverrideListByColor=function(t,i,r){var n=v.add(r);e.add(t,i,n)},this.setOverrideListByColor=function(e,t,i){this.clearOverrideList(e),this.addToOverrideListByColor(e,t,i)},this.clearAllUserList=function(){var e;for(e=a.USERFILTER_OFFSET;e<=a.USERFILTER_ENDOFFSET;e++)p[e].clearAll()},this.clearUserListByType=function(e){var t=a.USERFILTER_OFFSET+e;t>=a.USERFILTER_OFFSET&&t<=a.USERFILTER_ENDOFFSET&&p[t].clearAll()},this.clearUserList=function(e,t){var i=a.USERFILTER_OFFSET+e;i>=a.USERFILTER_OFFSET&&i<=a.USERFILTER_ENDOFFSET&&p[i].clear(t)},this.addToUserList=function(e,t,i,r){var n=a.USERFILTER_OFFSET+e;n>=a.USERFILTER_OFFSET&&n<=a.USERFILTER_ENDOFFSET&&p[n].add(t,i,r)},this.removeFromUserList=function(e,t,i){var r=a.USERFILTER_OFFSET+e;r>=a.USERFILTER_OFFSET&&r<=a.USERFILTER_ENDOFFSET&&p[r].remove(t,i)},this.setUserList=function(e,t,i,r){this.clearUserList(e,t),this.addToUserList(e,t,i,r)},this.isIsolate=function(){var e;for(e=a.ISOLATEFILTER_OFFSET;e<=a.ISOLATEFILTER_ENDOFFSET;e++)if(!p[e].isEmpty())return!0;return!1},this.isFiltering=function(){return!!this.isIsolate()||!(p[a.HIDDEN].isEmpty()&&p[a.VISIBLE].isEmpty()&&p[a.TRANSLUCENT].isEmpty()&&p[a.TRANSLUCENT_OTHERS].isEmpty()&&this.getSceneState()===r.DISABLED)},this.setFrozonMaterial=function(e){v.setFrozonMaterial(e)},this.getFrozonMaterial=function(){return v.getFrozonMaterial()},this.setSelectedMaterial=function(e){v.setSelectedMaterial(e)},this.getSelectedMaterial=function(){return v.getSelectedMaterial()},this.setIsolateMaterial=function(e){v.setIsolateMaterial(e)},this.getIsolateMaterial=function(){return v.getIsolateMaterial()},this.resetIsolateMaterial=function(){v.resetIsolateMaterial()},this.clearAllIsolateList=function(){var e;for(e=a.ISOLATEFILTER_OFFSET;e<=a.ISOLATEFILTER_ENDOFFSET;e++)p[e].clear()},this.clearIsolateList=function(e){var t=a.ISOLATEFILTER_OFFSET+e;t>=a.ISOLATEFILTER_OFFSET&&t<=a.ISOLATEFILTER_ENDOFFSET&&p[t].clear()},this.addToIsolateList=function(e,t){var i=a.ISOLATEFILTER_OFFSET+e;i>=a.ISOLATEFILTER_OFFSET&&i<=a.ISOLATEFILTER_ENDOFFSET&&p[i].add(t)},this.removeFromIsolateList=function(e,t){var i=a.ISOLATEFILTER_OFFSET+e;i>=a.ISOLATEFILTER_OFFSET&&i<=a.ISOLATEFILTER_ENDOFFSET&&p[i].remove(t)},this.setIsolateList=function(e,t){this.clearIsolateList(e),this.addToIsolateList(e,t)},this.setIsolateConditions=function(e,t){var i=a.ISOLATECONDITIONFILTER_OFFSET+t;i>=a.ISOLATECONDITIONFILTER_OFFSET&&i<=a.ISOLATECONDITIONFILTER_ENDOFFSET&&p[i].setByData(e)},this.getIsolateConditions=function(e){var t=null,i=a.ISOLATECONDITIONFILTER_OFFSET+e;return i>=a.ISOLATECONDITIONFILTER_OFFSET&&i<=a.ISOLATECONDITIONFILTER_ENDOFFSET&&(t=p[i].getAll()),t},this.clearIsolateConditions=function(e){var t=a.ISOLATECONDITIONFILTER_OFFSET+e;t>=a.ISOLATECONDITIONFILTER_OFFSET&&t<=a.ISOLATECONDITIONFILTER_ENDOFFSET&&p[t].clear()},this.clearAllIsolateConditions=function(){var e;for(e=a.ISOLATECONDITIONFILTER_OFFSET;e<=a.ISOLATECONDITIONFILTER_ENDOFFSET;e++)p[e].clearAll()},this.setConditions=function(e,t){var i=a.CONDITIONFILTER_OFFSET+e;i>=a.CONDITIONFILTER_OFFSET&&i<=a.CONDITIONFILTER_ENDOFFSET&&p[i].setByData(t)},this.getConditions=function(e){var t=null,i=a.CONDITIONFILTER_OFFSET+e;return i>=a.CONDITIONFILTER_OFFSET&&i<=a.CONDITIONFILTER_ENDOFFSET&&(t=p[i].get()),t},this.clearConditions=function(e){var t=a.CONDITIONFILTER_OFFSET+e;t>=a.CONDITIONFILTER_OFFSET&&t<=a.CONDITIONFILTER_ENDOFFSET&&p[t].clearAll()},this.clearAllConditions=function(){var e;for(e=a.CONDITIONFILTER_OFFSET;e<=a.CONDITIONFILTER_ENDOFFSET;e++)p[e].clear()},this.makeSceneTranslucent=function(){this.setSceneState(r.TRANSLUCENT)},this.cancelSceneTranslucent=function(){this.setSceneState(r.DISABLED)},this.hideScene=function(){this.setSceneState(r.HIDDEN)},this.showScene=function(){this.setSceneState(r.DISABLED)},this.setSceneState=function(e){m=e},this.getSceneState=function(){return m},this.cancelTranslucent=function(){this.clearIdList(i.TRANSLUCENT),this.clearIdList(i.TRANSLUCENT_OTHERS)},this._addIdsToFilter=function(e,t){var i=a.IDFILTER_OFFSET+e;i>=a.IDFILTER_OFFSET&&i<=a.IDFILTER_ENDOFFSET&&p[i].add(t)},this.hideByIds=function(e){this._addIdsToFilter(i.HIDDEN,e)},this.showByIds=function(e){this._addIdsToFilter(i.VISIBLE,e)},this.makeTranslucentByIds=function(e){this._addIdsToFilter(i.TRANSLUCENT,e)},this.makeTranslucentOthersByIds=function(e){this._addIdsToFilter(i.TRANSLUCENT_OTHERS,e)},this._isVisible=function(e){return this.getSceneState()!==r.HIDDEN&&o.apply(e)},this._isSelectable=function(e){return this.getSceneState()!==r.TRANSLUCENT&&c.apply(e,this.getSceneState())},this.getMaterialNameByColor=function(e){return v.getMaterialNameByColor(e)},this.addOverrideMaterial=function(e){v.addOverrideMaterial(e)},this.getMaterialByName=function(e){return v.get(e)},this._getOverrideMaterial=function(e){if(this.getSceneState()===r.TRANSLUCENT)return v.get("scene");var t=l.getApplyFilterId(e),i=null,n="";switch(t){case a.ISOLATE_TRANSLUCENT:case a.ISOLATE_TRANSLUCENT_OTHERS:case a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS:i=this.getIsolateMaterial();break;case a.CONDITION_TRANSLUCENT_OTHERS:case a.TRANSLUCENT:case a.TRANSLUCENT_OTHERS:i=v.get("scene");break;case a.FROZENFILTER:case a.FROZENCONDITIONFILTER:break;case a.OVERRIDEFILTER:case a.USER_OVERRIDE:case a.CONDITION_OVERRIDE:var o=p[t].getMatchItem(e);n=o.hasOwnProperty("color")?v.getMaterialNameByColor(o.color):o.material?o.material:o}return i||""===n||(v.has(n)||(n=v.getDefaultMaterialName()),i=v.get(n)),i},this._getMaterialName=function(e){if(this.getSceneState()===r.TRANSLUCENT)return"scene";var t=l.getApplyFilterId(e),i=null,n="";switch(t){case a.ISOLATE_TRANSLUCENT:case a.ISOLATE_TRANSLUCENT_OTHERS:case a.ISOLATE_CONDITION_TRANSLUCENT_OTHERS:i=this.getIsolateMaterial(),n=i.name;break;case a.CONDITION_TRANSLUCENT_OTHERS:case a.TRANSLUCENT:case a.TRANSLUCENT_OTHERS:n="scene";break;case a.FROZENFILTER:case a.FROZENCONDITIONFILTER:break;case a.OVERRIDEFILTER:case a.USER_OVERRIDE:case a.CONDITION_OVERRIDE:var o=p[t].getMatchItem(e);n=o.hasOwnProperty("color")?v.getMaterialNameByColor(o.color):o.material?o.material:o}return n},this._getMaterialByName=function(e){return"isolate"==e?v.getIsolateMaterial():"frozen"==e||"scene"==e?v.getFrozonMaterial():"selected"==e?v.getSelectedMaterial():v.get(e)},this._hasHighPriorityOverrideMaterial=function(e){return this.getSceneState()===r.TRANSLUCENT||u.apply(e)},this._hasOverrideMaterial=function(e){return this.getSceneState()===r.TRANSLUCENT||u.apply(e)||l.apply(e)},this._isHiddenFileId=function(e){return h.apply(e)},this._hasHiddenFileIdFilter=function(){return!h.isEmpty()},this._hasVisibleFilter=function(){return this.getSceneState()===r.HIDDEN||!o.isEmpty()},this._hasSelectableFilter=function(){return this.getSceneState()===r.TRANSLUCENT||!c.isEmpty()},this._hasOverrideMaterialFilter=function(){return this.getSceneState()===r.TRANSLUCENT||!l.isEmpty()},this._hasLowPriorityOverride=function(){return l.hasFilterNotIn(u)},this._isRenderPromotion=function(e){return d.apply(e)},this._hasRenderPromotionFilter=function(){return!d.isEmpty()},this._isRenderWithBoardline=function(e){return f.apply(e)},this._hasRenderWithBoardlineFilter=function(){return!f.isEmpty()},this.addInstanceMaterialForClip=function(e,t){v.addInstanceMaterialForClip(e,t)},this.clearInstanceMaterialsForClip=function(){v.clearInstanceMaterialsForClip()},this.getAllInstanceMaterialsForClip=function(){return v.getAllInstanceMaterialsForClip()},this.addMaterialForClip=function(e){v.addMaterialForClip(e)},this.getMaterialForClipBy=function(e,t){return v.getMaterialForClipBy(e,t)},this.getAllMaterialsForClip=function(){return v.getAllMaterialsForClip()},this.clearMaterialsForClip=function(){v.clearMaterialsForClip()},this.getMaterialForModifyOpacityBy=function(e,t){return v.getMaterialForModifyOpacityBy(e,t)},this.clearMaterialsForModifyOpacity=function(){v.clearMaterialsForModifyOpacity()},this.getMaterialNameBy=function(e){return v.getMaterialNameBy(e)}},s.BasicFilter=function(e,t){this._type=e,this._name=t,this._enabled=!1,this._items={},this._relatedCompoundFilterList=[]},s.BasicFilter.prototype.getType=function(){return this._type},s.BasicFilter.prototype.getName=function(){return this._name},s.BasicFilter.prototype.get=function(){return this._items},s.BasicFilter.prototype.getAll=function(){return this._items},s.BasicFilter.prototype.clearAll=function(){var e=this;e._items={},e._enabled&&(e._enabled=!1,e.enableStateChanged())},s.BasicFilter.prototype.clear=function(){this.clearAll()},s.BasicFilter.prototype.isEmpty=function(){return!this._enabled};s.BasicFilter.prototype.forceEnable=function(){this._enabled||(this._enabled=!0,this.enableStateChanged())},s.BasicFilter.prototype.setByData=function(e){var t=this;!function(e){if(null==e)return!0;if("object"!==(void 0===e?"undefined":_typeof(e)))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)?(t._items=e,t._enabled||(t._enabled=!0,t.enableStateChanged())):(t._items={},t._enabled&&(t._enabled=!1,t.enableStateChanged()))},s.BasicFilter.prototype.match=function(e){return!1},s.BasicFilter.prototype.registerToCompoundFilter=function(e){this._relatedCompoundFilterList.push(e)},s.BasicFilter.prototype.enableStateChanged=function(){for(var e=this,t=0,i=e._relatedCompoundFilterList.length;t<i;t++)e._enabled?e._relatedCompoundFilterList[t].addBaseFilter(e):e._relatedCompoundFilterList[t].removeBaseFilter(e)},s.BasicIdFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.BasicIdFilter.prototype=Object.create(s.BasicFilter.prototype),s.BasicIdFilter.prototype.constructor=s.BasicIdFilter,s.BasicIdFilter.prototype.add=function(e){var t=this,i=t._items;if(e&&e.length>0){for(var r=0,n=e.length;r<n;++r)i[e[r]]=!0;t._enabled||(t._enabled=!0,t.enableStateChanged())}},s.BasicIdFilter.prototype.remove=function(e){var t=this,i=t._items;if(e&&e.length>0){for(var r=0,n=e.length;r<n;++r){var a=e[r];i.hasOwnProperty(a)&&delete i[a]}0===i.length&&t._enabled&&(t._enabled=!1,t.enableStateChanged())}},s.ListFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.ListFilter.prototype=Object.create(s.BasicFilter.prototype),s.ListFilter.prototype.constructor=s.ListFilter,s.ListFilter.prototype.remove=function(e,t){var i=this,r=i._items[e];if(r&&t&&t.length>0){for(var n=0,a=t.length;n<a;++n){var o=t[n];r.hasOwnProperty(o)&&delete r[o]}s.Utils.isEmptyObject(i._items)&&i._enabled&&(i._enabled=!1,i.enableStateChanged())}},s.ListFilter.prototype.add=function(e,t,i){var r=this,n=r._items,a=n[e];if(t&&t.length>0){void 0===i&&(i=!0),a||(a=n[e]={});for(var o=0,s=t.length;o<s;++o)a[t[o]]=i;r._enabled||(r._enabled=!0,r.enableStateChanged())}},s.ListFilter.prototype.clear=function(e){var t=this,i=t._items;i.hasOwnProperty(e)&&(delete i[e],s.Utils.isEmptyObject(i)&&t._enabled&&(t._enabled=!1,t.enableStateChanged()))},s.UserListFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.UserListFilter.prototype=Object.create(s.ListFilter.prototype),s.UserListFilter.prototype.constructor=s.UserListFilter,s.UserListFilter.prototype.match=function(e){return null!==this.getMatchItem(e)},s.UserListFilter.prototype.getMatchItem=function(e){var t=this._items,i=e.userData;if(i)for(var r in t){var n=t[r],a=i[r];if(a&&void 0!==n[a])return n[a]}return null},s.OverrideListFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.OverrideListFilter.prototype=Object.create(s.ListFilter.prototype),s.OverrideListFilter.prototype.constructor=s.OverrideListFilter,s.OverrideListFilter.prototype.match=function(e){return null!==this.getMatchItem(e)},s.OverrideListFilter.prototype.getMatchItem=function(e){var t=this._items,i=e.name;for(var r in t){var n=t[r];if(n[i])return n[i]}return null},s.ConditionFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.ConditionFilter.prototype=Object.create(s.BasicFilter.prototype),s.ConditionFilter.prototype.constructor=s.ConditionFilter,s.ConditionFilter.prototype.match=function(e){var t=e.userData;return!!t&&function(e,t){for(var i,r=0,n=e.length;r<n;++r){i=!0;var a=e[r];for(var o in a){if(!(a[o]instanceof Array)&&t[o]!=a[o]){i=!1;break}if(a[o]instanceof Array&&-1==a[o].indexOf(t[o])){i=!1;break}}if(i)return!0}return!1}(this._items,t)},s.MultiConditionFilter=function(e,t){s.BasicFilter.call(this,e,t)},s.MultiConditionFilter.prototype=Object.create(s.BasicFilter.prototype),s.MultiConditionFilter.prototype.constructor=s.MultiConditionFilter,s.MultiConditionFilter.prototype.match=function(e){return null!==this.getMatchItem(e)},s.MultiConditionFilter.prototype.getMatchItem=function(e){var t,i=this._items,r=e.userData;if(r)for(var n=i.length,a=0;a<n;++a){var o=i[a],s=o.condition;t=!0;for(var l in s)if(s[l]!=r[l]){t=!1;break}if(t)return o}return null},s.FileIdFilter=function(e,t){s.BasicIdFilter.call(this,e,t)},s.FileIdFilter.prototype=Object.create(s.BasicIdFilter.prototype),s.FileIdFilter.prototype.constructor=s.FileIdFilter,s.FileIdFilter.prototype.match=function(e){var t=e.name;if(t){var i=t.indexOf(".");if(-1!==i){var r=t.substring(0,i);return!!this._items[r]}}var n=e.userData;if(n){var r=n.sceneId;if(r)return!!this._items[r]}return!1},s.GeneralIdFilter=function(e,t){s.BasicIdFilter.call(this,e,t)},s.GeneralIdFilter.prototype=Object.create(s.BasicIdFilter.prototype),s.GeneralIdFilter.prototype.constructor=s.GeneralIdFilter,s.GeneralIdFilter.prototype.match=function(e){return!!this._items[e.name]},s.FilterResultMode={MATCH_RETURN_TRUE:0,MATCH_RETURN_FALSE:1,NOMATCH_RETURN_TRUE:2,NOMATCH_RETURN_FALSE:3},s.CompoundFilter=function(e){this._activeFilterList=[],this._filterResultModes={},this._defaultRetValue=e,this._filterPriority=null},s.CompoundFilter.prototype.setFilterMode=function(e){this._filterResultModes=e},s.CompoundFilter.prototype.setFilterPriority=function(e){this._filterPriority=e},s.CompoundFilter.prototype.addBaseFilter=function(e){var t=this._activeFilterList,i=t.indexOf(e);if(null===this._filterPriority)-1===i?t.push(e):i!==t.length-1&&(t.splice(i,1),t.push(e));else if(0===t.length)t.push(e);else{-1!==i&&i!==t.length-1&&t.splice(i,1);for(var r=this._filterPriority[e.getType()],n=0,a=t.length;n<a;n++)if(this._filterPriority[t[n].getType()]>r){t.splice(n,0,e);break}n===a&&t.push(e)}},s.CompoundFilter.prototype.removeBaseFilter=function(e){var t=this._activeFilterList.indexOf(e);-1!==t&&this._activeFilterList.splice(t,1)},s.CompoundFilter.prototype.isEmpty=function(){return 0===this._activeFilterList.length},s.CompoundFilter.prototype.hasFilterNotIn=function(e){for(var t=this._activeFilterList,i=t.length-1;i>=0;i--){var r=t[i];if(void 0===e._filterResultModes[r.getType()])return!0}return!1},s.CompoundFilter.prototype.apply=function(e){for(var t,i=this,r=s.FilterResultMode,n=i._activeFilterList.length-1;n>=0;n--)switch(t=i._activeFilterList[n],i._filterResultModes[t.getType()]){case r.MATCH_RETURN_TRUE:if(t.match(e))return!0;break;case r.MATCH_RETURN_FALSE:if(t.match(e))return!1;break;case r.NOMATCH_RETURN_TRUE:if(!t.match(e))return!0;break;case r.NOMATCH_RETURN_FALSE:if(!t.match(e))return!1}return i._defaultRetValue},s.CompoundFilter.prototype.getApplyFilterId=function(e){for(var t,i=this,r=s.FilterResultMode,n=i._activeFilterList.length-1;n>=0;n--)switch(t=i._activeFilterList[n],i._filterResultModes[t.getType()]){case r.MATCH_RETURN_TRUE:case r.MATCH_RETURN_FALSE:if(t.match(e))return t.getType();break;case r.NOMATCH_RETURN_TRUE:case r.NOMATCH_RETURN_FALSE:if(!t.match(e))return t.getType()}return-1},s.FilterAction=function(){this.className="FilterAction"},s.FilterAction.prototype.getClassName=function(){return this.className},s.FilterAction.prototype.applyFilter=function(e){},s.IdsFilterAction=function(){s.FilterAction.call(this),this.className="IdsFilterAction",this.ids=[]},s.IdsFilterAction.prototype=Object.create(s.FilterAction.prototype),s.IdsFilterAction.prototype.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++){var r=e[i];t[r]=r}return t},s.IdsFilterAction.prototype.constructor=s.IdsFilterAction,s.VisibleIdsFA=function(e,t){s.IdsFilterAction.call(this),this.className="VisibleIdsFA",this.flag=e,this.isVisible=t},s.IdsFilterAction.prototype.setIds=function(e){this.ids=e},s.VisibleIdsFA.prototype=Object.create(s.IdsFilterAction.prototype),s.VisibleIdsFA.prototype.constructor=s.VisibleIdsFA,s.VisibleIdsFA.prototype.applyFilter=function(e){this.ids instanceof Array?(e.setVisible(this.ids,this.isVisible,this.flag),e.calculateVisibleComponentsBbox()):console.warn("Ids should be type of array.")},s.OverrideIdsFA=function(e,t){s.IdsFilterAction.call(this),this.className="OverrideIdsFA",this.flag=e,this.material=t},s.OverrideIdsFA.prototype=Object.create(s.IdsFilterAction.prototype),s.OverrideIdsFA.prototype.constructor=s.OverrideIdsFA,s.OverrideIdsFA.prototype.applyFilter=function(e){this.ids instanceof Array?e.setMaterial(this.ids,this.material,this.flag):console.warn("Ids should be type of array.")},s.OverrideIdsForWireFrameFA=function(e,t){s.IdsFilterAction.call(this),this.className="OverrideIdsForWireFrameFA",this.flag=e,this.material=t},s.OverrideIdsForWireFrameFA.prototype=Object.create(s.IdsFilterAction.prototype),s.OverrideIdsForWireFrameFA.prototype.constructor=s.OverrideIdsForWireFrameFA,s.OverrideIdsForWireFrameFA.prototype.applyFilter=function(e){this.ids instanceof Array?e.setWireFrameMaterial(this.ids,this.material,this.flag):console.warn("Ids should be type of array.")},s.IsolateIdsFA=function(e){s.IdsFilterAction.call(this),this.className="IsolateIdsFA",this.isolateHide=e},s.IsolateIdsFA.prototype=Object.create(s.IdsFilterAction.prototype),s.IsolateIdsFA.prototype.constructor=s.IsolateIdsFA,s.IsolateIdsFA.prototype.applyFilter=function(e){this.ids instanceof Array?(e.clearIsolates(),this.isolateHide?(e.setIsolateHide(this.ids,!0,!1),e.calculateVisibleComponentsBbox()):e.setIsolateTransparent(this.ids,!0,!1)):console.warn("Ids should be type of array.")},s.TransparentIdsFA=function(e,t){s.IdsFilterAction.call(this),this.className="TransparentIdsFA",this.flag=e,this.isOpaque=t},s.TransparentIdsFA.prototype=Object.create(s.IdsFilterAction.prototype),s.TransparentIdsFA.prototype.constructor=s.TransparentIdsFA,s.TransparentIdsFA.prototype.applyFilter=function(e){this.ids instanceof Array?e.setTransparent(this.ids,!this.isOpaque,this.flag):console.warn("Ids should be type of array.")},s.ConditionFilterAction=function(){s.FilterAction.call(this),this.className="ConditionFilterAction",this.conditions=null},s.ConditionFilterAction.prototype=Object.create(s.FilterAction.prototype),s.ConditionFilterAction.prototype.constructor=s.ConditionFilterAction,s.VisibleConditionFA=function(e,t){s.ConditionFilterAction.call(this),this.className="VisibleConditionFA",this.flag=e,this.isVisible=t},s.VisibleConditionFA.prototype=Object.create(s.ConditionFilterAction.prototype),s.VisibleConditionFA.prototype.constructor=s.VisibleConditionFA,s.VisibleConditionFA.prototype.applyFilter=function(e){var t=this,i=function(i,r){t.flag==r&&(e.setVisible(i,t.isVisible),i=null)};this.conditions instanceof Array?(e.matchConditions(this.conditions,i),e.calculateVisibleComponentsBbox()):console.warn("Conditions should be type of array.")},s.OverrideConditionFA=function(e,t){s.ConditionFilterAction.call(this),this.className="OverrideConditionFA",this.flag=e,this.material=t},s.OverrideConditionFA.prototype=Object.create(s.ConditionFilterAction.prototype),s.OverrideConditionFA.prototype.constructor=s.OverrideConditionFA,s.OverrideConditionFA.prototype.applyFilter=function(e,t){var i=this,r=function(t,r){i.flag==r&&(e.setMaterial(t,i.material),t=null)};this.conditions instanceof Array?e.matchConditions(this.conditions,r):console.warn("Conditions should be type of array.")},s.OverrideConditionForWireFrameFA=function(e,t){s.ConditionFilterAction.call(this),this.className="OverrideConditionForWireFrameFA",this.flag=e,this.material=t},s.OverrideConditionForWireFrameFA.prototype=Object.create(s.ConditionFilterAction.prototype),s.OverrideConditionForWireFrameFA.prototype.constructor=s.OverrideConditionForWireFrameFA,s.OverrideConditionForWireFrameFA.prototype.applyFilter=function(e,t){var i=this,r=function(t,r){i.flag==r&&(e.setWireFrameMaterial(t,i.material),t=null)};this.conditions instanceof Array?e.matchConditions(this.conditions,r):console.warn("Conditions should be type of array.")},s.TransparentConditionFA=function(e,t){s.ConditionFilterAction.call(this),this.className="TransparentConditionFA",this.flag=e,this.isOpaque=t},s.TransparentConditionFA.prototype=Object.create(s.ConditionFilterAction.prototype),s.TransparentConditionFA.prototype.constructor=s.TransparentConditionFA,s.TransparentConditionFA.prototype.applyFilter=function(e){var t=this,i=function(i,r){t.flag==r&&(e.setTransparent(i,!t.isOpaque),i=null)};this.conditions instanceof Array?e.matchConditions(this.conditions,i):console.warn("Conditions should be type of array.")},s.IsolateConditionFA=function(e){s.ConditionFilterAction.call(this),this.className="IsolateConditionFA",this.isolateHide=e},s.IsolateConditionFA.prototype=Object.create(s.ConditionFilterAction.prototype),s.IsolateConditionFA.prototype.constructor=s.IsolateConditionFA,s.IsolateConditionFA.prototype.applyFilter=function(e){e.clearIsolates();var t=this.isolateHide,i=function(i,r){if(1==r)return void(i=null);t?(e.setIsolateHide(i,!r),e.calculateVisibleComponentsBbox()):e.setIsolateTransparent(i,!r),i=null};this.conditions instanceof Array?e.matchConditions(this.conditions,i):console.warn("Conditions should be type of array.")},s.EnumObjectState={Visible:1,HideByIsolate:2,Transparent:4,TransparentByIsolate:8},s.ObjectInfo={userData:null,state:s.EnumObjectState.Visible,material:null},s.ObjectInfoDict=function(){var e={},t={};this.init=function(i){e=i;for(var r in e)t.hasOwnProperty(r)||void 0===e[r]||(t[r]=Object.keys(e[r]))},this.reinit=function(i){e=i;for(var r in e)t[r]=Object.keys(i[r])},this.clear=function(){e={},t={}},this.getObjectsMap=function(){return e},this.getObjectIds=function(e){return t.hasOwnProperty(e)?t[e]:[]}},s.ObjectInfoManager=function(){var e=new s.ObjectInfoDict,t=!1,i=!1,r=!1,n=!1,a=!1,o=!1,l=new THREE.Box3,u=!1;this.inactivatedIdMap={},this.inactivatedIds=[],this.bIsInactivateAll=!1,this.localClippingList={},this.hasLocalClipping=!1,this.modifyOpacityList={},this.hasModifyOpacityList=!1,this.init=function(t){e.init(t)},this.reinit=function(t){e.reinit(t)},this.clearData=function(){e.clear()},
this.getObjectsMap=function(){return e.getObjectsMap()},this.calculateVisibleComponentsBbox=function(){l.makeEmpty();var t=e.getObjectsMap();for(var i in t)for(var r=t[i],n=e.getObjectIds(i),a=0,o=n.length;a<o;a++){var s=n[a];if(!this.isHidden(s)){var c=r[s][0].boundingBox;c&&!c.isEmpty()?(l.expandByPoint(c.min),l.expandByPoint(c.max)):console.warn("Object has no boundingBox, id is "+s)}}u=!1},this.getVisibleComponentsBbox=function(){return(u||l.isEmpty())&&this.calculateVisibleComponentsBbox(),l.clone()},this.needUpdateBoxAfterExplode=function(){u=!0},this.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++){var r=e[i];t[r]=r}return t},this.isMatchConditions=function(e,t){for(var i=!0,r=0,n=t.length;r<n;r++){var a=t[r];for(var o in a){if(!(a[o]instanceof Array)&&e[o]!=a[o]){i=!1;break}if(a[o]instanceof Array&&-1==a[o].indexOf(e[o])){i=!1;break}}if(1==i)break;r<t.length-1&&(i=!0)}return i},this.matchConditions=function(t,i){var r=e.getObjectsMap();for(var n in r){for(var a=[],o=[],s=r[n],l=e.getObjectIds(n),u=0,c=l.length;u<c;u++){var h=l[u],d=s[h][0].userData||{};d.elementId=s[h][0].userId;this.isMatchConditions(d,t)?a.push(h):o.push(h)}i&&i(a,!0),i&&i(o,!1)}},this.getMatchIds=function(t){var i=e.getObjectsMap(),r=[];for(var n in i)for(var a=i[n],o=e.getObjectIds(n),s=0,l=o.length;s<l;s++){var u=o[s],c=a[u][0].userData||{};c.elementId=a[u][0].userId;var h=this.isMatchConditions(c,t);1==h&&r.push(u)}return r},this.setVisible=function(t,i,n){var a=function(e){i?e.state=e.state|s.EnumObjectState.Visible:(r=!0,e.state=e.state&~s.EnumObjectState.Visible)},o=e.getObjectsMap();for(var l in o){var u=o[l];if(void 0==n||!0===n)for(var c=0,h=t.length;c<h;c++){var d=t[c];if(u.hasOwnProperty(d)){var f=u[d][0];a(f)}}else{for(var p=this.arrayToMap(t),m=e.getObjectIds(l),v=0,g=m.length;v<g;v++){var d=m[v];p.hasOwnProperty(d)||(f=u[d][0],a(f))}p=null}}},this.isVisible=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){return n[t][0].state&s.EnumObjectState.Visible>0}}},this.clearVisible=function(){var t=e.getObjectsMap();r=!1;for(var i in t)for(var n=t[i],a=e.getObjectIds(i),o=0,l=a.length;o<l;o++){var u=a[o],c=n[u][0];c.state=c.state|s.EnumObjectState.Visible}},this.hideAll=function(){var t=e.getObjectsMap();r=!0;for(var i in t)for(var n=t[i],a=e.getObjectIds(i),o=0,l=a.length;o<l;o++){var u=a[o],c=n[u][0];c.state=c.state&~s.EnumObjectState.Visible}},this.setTransparent=function(i,r,n){var o=function(e){r?(e.state=e.state|s.EnumObjectState.Transparent,t=!0,a=!0):e.state=e.state&~s.EnumObjectState.Transparent},l=e.getObjectsMap();for(var u in l){var c=l[u];if(void 0==n||!0===n)for(var h=0,d=i.length;h<d;h++){var f=i[h];if(this.isActive(f)&&c.hasOwnProperty(f)){var p=c[f][0];o(p)}}else{for(var m=this.arrayToMap(i),v=e.getObjectIds(u),g=0,y=v.length;g<y;g++){var f=v[g];this.isActive(f)&&!m.hasOwnProperty(f)&&(p=c[f][0],o(p))}m=null}}},this.isTransparent=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){var a=n[t][0],o=(a.state&s.EnumObjectState.Transparent)>0;return o=o||(a.state&s.EnumObjectState.TransparentByIsolate)>0}}},this.clearTransparent=function(){var t=e.getObjectsMap();a=!1;for(var i in t)for(var r=t[i],n=e.getObjectIds(i),o=0,l=n.length;o<l;o++){var u=n[o];if(this.isActive(u)){var c=r[u][0];c.state=c.state&~s.EnumObjectState.Transparent}}},this.setMaterial=function(i,r,n){var a=e.getObjectsMap();for(var o in a){var s=a[o];if(void 0==n||!0===n)for(var l=0,u=i.length;l<u;l++){var c=i[l];if(this.isActive(c)&&s.hasOwnProperty(c)){var h=s[c][0];h.material=r,t=!0}}else{for(var d=this.arrayToMap(i),f=e.getObjectIds(o),p=0,m=f.length;p<m;p++){var c=f[p];this.isActive(c)&&!d.hasOwnProperty(c)&&(h=s[c][0],h.material=r,t=!0)}d=null}}},this.getMaterial=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){return n[t][0].material}}},this.clearMaterial=function(){var t=e.getObjectsMap();for(var i in t){var r=t[i];for(var n in r)this.isActive(n)&&(r[n][0].material=null)}},this.setWireFrameMaterial=function(t,r,n){var a=e.getObjectsMap();for(var o in a){var s=a[o];if(void 0==n||!0===n)for(var l=0,u=t.length;l<u;l++){var c=t[l];if(s.hasOwnProperty(c)){var h=s[c][0];h.wireFrameMaterial=r,i=!0}}else{for(var d=this.arrayToMap(t),f=e.getObjectIds(o),p=0,m=f.length;p<m;p++){var c=f[p];d.hasOwnProperty(c)||(h=s[c][0],h.wireFrameMaterial=r,i=!0)}d=null}}},this.getWireFrameMaterial=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){return n[t][0].wireFrameMaterial}}},this.clearWireFrameMaterial=function(){var t=e.getObjectsMap();for(var i in t){var r=t[i];for(var n in r)r[n][0].wireFrameMaterial=null}},this.setIsolateHide=function(t,i,r){var a=function(e){i?(n=!0,e.state=e.state|s.EnumObjectState.HideByIsolate):e.state=e.state&~s.EnumObjectState.HideByIsolate},o=e.getObjectsMap();for(var l in o){var u=o[l];if(void 0==r||!0===r)for(var c=0,h=t.length;c<h;c++){var d=t[c];if(u.hasOwnProperty(d)){var f=u[d][0];a(f)}}else{for(var p=this.arrayToMap(t),m=e.getObjectIds(l),v=0,g=m.length;v<g;v++){var d=m[v];p.hasOwnProperty(d)||(f=u[d][0],a(f))}p=null}}},this.isIsolateHide=function(t){var i=e.getObjectsMap();for(var r in i){return(i[r][t][0].state&s.EnumObjectState.HideByIsolate)>0}},this.setIsolateTransparent=function(i,r,n){var a=function(e){r?(e.state=e.state|s.EnumObjectState.TransparentByIsolate,t=!0,o=!0):e.state=e.state&~s.EnumObjectState.TransparentByIsolate},l=e.getObjectsMap();for(var u in l){var c=l[u];if(void 0==n||!0===n)for(var h=0,d=i.length;h<d;h++){var f=i[h];if(this.isActive(f)&&c.hasOwnProperty(f)){var p=c[f][0];a(p)}}else{for(var m=this.arrayToMap(i),v=e.getObjectIds(u),g=0,y=v.length;g<y;g++){var f=v[g];this.isActive(f)&&!m.hasOwnProperty(f)&&(p=c[f][0],a(p))}m=null}}},this.isIsolateTransparent=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){return(n[t][0].state&s.EnumObjectState.TransparentByIsolate)>0}}},this.clearIsolateHide=function(){var t=e.getObjectsMap();n=!1;for(var i in t){var r=e.getObjectIds(i);r.length>0&&this.setIsolateHide(r,!1)}},this.clearIsolates=function(){var t=e.getObjectsMap();o=!1,n=!1;for(var i in t){var r=e.getObjectIds(i);r.length>0&&(this.setIsolateHide(r,!1),this.setIsolateTransparent(r,!1))}},this.clearTransparentByIsolate=function(){var t=e.getObjectsMap();o=!1;for(var i in t)for(var r=t[i],n=e.getObjectIds(i),a=0,l=n.length;a<l;a++){var u=n[a];if(this.isActive(u)){var c=r[u][0];c.state=c.state&~s.EnumObjectState.TransparentByIsolate}}},this.isHidden=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n&&n.hasOwnProperty(t)){var a=n[t][0],o=0==(a.state&s.EnumObjectState.Visible);return o=o||(a.state&s.EnumObjectState.HideByIsolate)>0}}},this.isFrozen=function(t){var i=e.getObjectsMap();for(var r in i){var n=i[r];if(n.hasOwnProperty(t)){var a=n[t][0],o=(a.state&s.EnumObjectState.Transparent)>0;return o=o||(a.state&s.EnumObjectState.TransparentByIsolate)>0}}},this.resetAll=function(){var i=e.getObjectsMap();for(var l in i)for(var u=i[l],c=e.getObjectIds(l),h=0,d=c.length;h<d;h++){var f=c[h];u[f][0].state|=s.EnumObjectState.Visible,this.isActive(f)&&(u[f][0].material=null)}t=!1,r=n=!1,a=o=!1},this.hasOverrideMaterial=function(i){var r=e.getObjectsMap();if(void 0==i)return t;for(var n in r){var a=r[n];if(a.hasOwnProperty(i)){return null!=a[i][0].material||this.isTransparent(i)}}},this.hasOverrideMaterialForWireFrame=function(t){var r=e.getObjectsMap();if(void 0==t)return i;for(var n in r){var a=r[n];if(a.hasOwnProperty(t)){return null!=a[t][0].wireFrameMaterial}}},this.hasObjectInactivated=function(){return this.inactivatedIds.length>0},this.hasObjectHidden=function(){return r||n},this.hasObjectCantSelected=function(){return this.hasObjectHidden()||this.hasObjectTransparent()||this.hasObjectInactivated()},this.hasObjectTransparent=function(){if(this.hasObjectInactivated()){var e=!1,t=!0,i=!1,r=void 0;try{for(var n,s=this.inactivatedIds[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var l=n.value;if(this.isTransparent(l)){e=!0;break}}}catch(e){i=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw r}}return e}return a||o},this.deactivateByIds=function(e){var t=!0,i=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;this.inactivatedIdMap[o]=!0}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}this.inactivatedIds=Object.keys(this.inactivatedIdMap)},this.clearInactivatedIdMap=function(){this.inactivatedIdMap={},this.inactivatedIds=[]},this.isActive=function(e){return 0==this.bIsInactivateAll&&!(1==this.inactivatedIdMap[e])},this.deactivateAll=function(){this.bIsInactivateAll=!0},this.activateAll=function(){this.bIsInactivateAll=!1},this.getInactivatedIdMap=function(){return this.inactivatedIdMap},this.addToModifyOpacityList=function(e,t){var i=this.modifyOpacityList;void 0===i[e]&&(i[e]={}),i[e].opacity=t,this.hasModifyOpacityList=!0},this.clearModifyOpacityList=function(){this.modifyOpacityList={},this.hasModifyOpacityList=!1},this.addToLocalClippingList=function(e,t,i,r){var n=this.localClippingList;void 0===n[e]&&(n[e]={}),s.Utils.isDefined(r)&&(void 0==n[e].nodeMap&&(n[e].nodeMap=new Map),n[e].nodeMap.set(r.toString(),t)),i&&(n[e].wireframeMaterialName=i),this.hasLocalClipping=!0},this.clearLocalClippingList=function(){this.localClippingList={},this.hasLocalClipping=!1}},s.FilterManagerIO=function(e){this.materialSelector=e;var t=function(e){var t=[];for(var i in e)1==e[i]&&t.push(i);return t};this.saveState=function(e){return{isolateAction:e.getIsolateFilterAction(),actions:e.getFilterActionList(),sceneState:e.getSceneState(),version:"1.0"}},this.createAction=function(e){var t=e.className,i=null;switch(t){case"IsolateIdsFA":i=new s.IsolateIdsFA(e.isolateHide),i.ids=e.ids;break;case"VisibleIdsFA":i=new s.VisibleIdsFA(e.flag,e.isVisible),i.ids=e.ids;break;case"OverrideIdsFA":case"OverrideIdsForWireFrameFA":var r=e.material;if(r){var n={color:r.color};r.hasOwnProperty("opacity")&&(n.opacity=r.opacity);var a=this.materialSelector.getMaterialNameByColor(n);r=this.materialSelector.get(a)}i="OverrideIdsFA"===t?new s.OverrideIdsFA(e.flag,r):new s.OverrideIdsForWireFrameFA(e.flag,r),i.ids=e.ids;break;case"TransparentIdsFA":i=new s.TransparentIdsFA(e.flag,e.isOpaque),i.ids=e.ids;break;case"VisibleConditionFA":i=new s.VisibleConditionFA(e.flag,e.isVisible),i.conditions=e.conditions;break;case"OverrideConditionFA":case"OverrideConditionForWireFrameFA":var r=e.material;if(r){var n={opacity:r.opacity,color:r.color},a=this.materialSelector.getMaterialNameByColor(n);r=this.materialSelector.get(a)}i="OverrideConditionFA"===t?new s.OverrideConditionFA(e.flag,r):new s.OverrideConditionForWireFrameFA(e.flag,r),i.conditions=e.conditions;break;case"TransparentConditionFA":i=new s.TransparentConditionFA(e.flag,e.isOpaque),i.conditions=e.conditions;break;case"IsolateConditionFA":i=new s.IsolateConditionFA(e.isolateHide),i.conditions=e.conditions;break;default:s.Logger.warn("Warning: Not supported filterAction '"+t+"'")}return i},this.createActionByOldFilter=function(e,i){var r=[];switch(e){case"CONDITION_OVERRIDE":for(var n=[],a=0;a<i.length;a++){var o=i[a];n.push(o.condition)}var l=o.color,u=this.materialSelector.add(l),c=this.materialSelector.get(u),h=new s.OverrideConditionFA(!0,c);h.conditions=n,r.push(h);break;case"CONDITION_TRANSLUCENT_OTHERS":var h=new s.TransparentConditionFA(!1,!1);h.conditions=i,r.push(h);break;case"ISOLATE_CONDITION_HIDEEN_OTHERS":var h=new s.IsolateConditionFA(!0);h.conditions=i,r.push(h);break;case"ISOLATE_CONDITION_TRANSLUCENT_OTHERS":var h=new s.IsolateConditionFA(!1);h.conditions=i,r.push(h);break;case"ISOLATE_HIDDEN_OTHERS":var h=new s.IsolateIdsFA(!0);h.ids=t(i),r.push(h);break;case"ISOLATE_TRANSLUCENT_OTHERS":var h=new s.IsolateIdsFA(!1);h.ids=t(i),r.push(h);break;case"OVERRIDEFILTER":for(var d in i)if(i.hasOwnProperty(d)){var f=[],p=i[d];for(var m in p)f.push(m);var l=this.materialSelector.getMaterialParamsFromName(p[m]),u=this.materialSelector.add(l),c=this.materialSelector.get(u),h=new s.OverrideIdsFA(!0,c);h.ids=f,r.push(h)}break;case"TRANSLUCENT":var h=new s.TransparentIdsFA(!0,!1);h.ids=t(i),r.push(h);break;case"TRANSLUCTANT_OTHERS":var h=new s.TransparentIdsFA(!1,!1);h.ids=t(i),r.push(h);break;case"VISIBLE":var h=new s.VisibleIdsFA(!0,!0);h.ids=t(i),r.push(h);break;default:s.Logger.warn("Warning: Not supported filter '"+e+"'")}return r},this.loadState=function(e,t){t.clearFilterActionList(),t.getObjectInfoManager().resetAll();var i=e;if(i.hasOwnProperty("version"))if("1.0"==i.version){var r=i.isolateAction;if(r){var n=this.createAction(r);t.pushBack(n)}for(var a=i.actions,o=0;o<a.length;o++){var n=this.createAction(a[o]);t.pushBack(n)}}else if("0.4"==i.version){for(var s={},l=t._filterImpl.getBasicFilterList(),o=0,u=l.length;o<u;o++)s[l[o].getName()]=o;for(var c in i)if("sceneState"!==c&&"version"!==c&&s.hasOwnProperty(c)){if("{}"==JSON.stringify(i[c])||"[]"==JSON.stringify(i[c]))continue;for(var h=this.createActionByOldFilter(c,i[c]),o=0;o<h.length;o++)t.pushBack(h[o])}}t.setSceneState(i.sceneState)}},s.Workers=s.Workers||{},s.Workers.WorkerChunk=s.Workers.WorkerChunk||{},s.Workers.WorkerLib=s.Workers.WorkerLib||{},function(){s.Workers.WorkerChunk.NamespaceChunk="\n        var CLOUD = {};\n        CLOUD.Utils = {};        \n        CLOUD.Math = {};\n        CLOUD.GeomUtil = {};\n        CLOUD.Reader = {};\n    "}(),function(){
s.Workers.WorkerChunk.MathChunk="\n\n        (function(){\n\n            var _Math = {\n\n                DEG2RAD: Math.PI / 180,\n                RAD2DEG: 180 / Math.PI,\n\n                generateUUID: function () {\n\n                    // http://www.broofa.com/Tools/Math.uuid.htm\n\n                    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n                    var uuid = new Array(36);\n                    var rnd = 0,\n                        r;\n\n                    return function generateUUID() {\n\n                        for (var i = 0; i < 36; i++) {\n\n                            if (i === 8 || i === 13 || i === 18 || i === 23) {\n\n                                uuid[i] = '-';\n\n                            } else if (i === 14) {\n\n                                uuid[i] = '4';\n\n                            } else {\n\n                                if (rnd <= 0x02) rnd = 0x2000000 + (Math.random() * 0x1000000) | 0;\n                                r = rnd & 0xf;\n                                rnd = rnd >> 4;\n                                uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\n\n                            }\n\n                        }\n\n                        return uuid.join('');\n\n                    };\n\n                }(),\n\n                clamp: function (value, min, max) {\n\n                    return Math.max(min, Math.min(max, value));\n\n                },\n\n                // compute euclidian modulo of m % n\n                // https://en.wikipedia.org/wiki/Modulo_operation\n\n                euclideanModulo: function (n, m) {\n\n                    return ((n % m) + m) % m;\n\n                },\n\n                // Linear mapping from range <a1, a2> to range <b1, b2>\n\n                mapLinear: function (x, a1, a2, b1, b2) {\n\n                    return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n\n                },\n\n                // https://en.wikipedia.org/wiki/Linear_interpolation\n\n                lerp: function (x, y, t) {\n\n                    return (1 - t) * x + t * y;\n\n                },\n\n                // http://en.wikipedia.org/wiki/Smoothstep\n\n                smoothstep: function (x, min, max) {\n\n                    if (x <= min) return 0;\n                    if (x >= max) return 1;\n\n                    x = (x - min) / (max - min);\n\n                    return x * x * (3 - 2 * x);\n\n                },\n\n                smootherstep: function (x, min, max) {\n\n                    if (x <= min) return 0;\n                    if (x >= max) return 1;\n\n                    x = (x - min) / (max - min);\n\n                    return x * x * x * (x * (x * 6 - 15) + 10);\n\n                },\n\n                // Random integer from <low, high> interval\n\n                randInt: function (low, high) {\n\n                    return low + Math.floor(Math.random() * (high - low + 1));\n\n                },\n\n                // Random float from <low, high> interval\n\n                randFloat: function (low, high) {\n\n                    return low + Math.random() * (high - low);\n\n                },\n\n                // Random float from <-range/2, range/2> interval\n\n                randFloatSpread: function (range) {\n\n                    return range * (0.5 - Math.random());\n\n                },\n\n                degToRad: function (degrees) {\n\n                    return degrees * _Math.DEG2RAD;\n\n                },\n\n                radToDeg: function (radians) {\n\n                    return radians * _Math.RAD2DEG;\n\n                },\n\n                isPowerOfTwo: function (value) {\n\n                    return (value & (value - 1)) === 0 && value !== 0;\n\n                },\n\n                nearestPowerOfTwo: function (value) {\n\n                    return Math.pow(2, Math.round(Math.log(value) / Math.LN2));\n\n                },\n\n                nextPowerOfTwo: function (value) {\n\n                    value--;\n                    value |= value >> 1;\n                    value |= value >> 2;\n                    value |= value >> 4;\n                    value |= value >> 8;\n                    value |= value >> 16;\n                    value++;\n\n                    return value;\n\n                }\n\n            };\n\n            function Vector3(x, y, z) {\n\n                this.x = x || 0;\n                this.y = y || 0;\n                this.z = z || 0;\n\n            }\n\n            Object.assign(Vector3.prototype, {\n\n                isVector3: true,\n\n                set: function (x, y, z) {\n\n                    this.x = x;\n                    this.y = y;\n                    this.z = z;\n\n                    return this;\n\n                },\n\n                setScalar: function (scalar) {\n\n                    this.x = scalar;\n                    this.y = scalar;\n                    this.z = scalar;\n\n                    return this;\n\n                },\n\n                setX: function (x) {\n\n                    this.x = x;\n\n                    return this;\n\n                },\n\n                setY: function (y) {\n\n                    this.y = y;\n\n                    return this;\n\n                },\n\n                setZ: function (z) {\n\n                    this.z = z;\n\n                    return this;\n\n                },\n\n                setComponent: function (index, value) {\n\n                    switch (index) {\n\n                        case 0:\n                            this.x = value;\n                            break;\n                        case 1:\n                            this.y = value;\n                            break;\n                        case 2:\n                            this.z = value;\n                            break;\n                        default:\n                            throw new Error('index is out of range: ' + index);\n\n                    }\n\n                    return this;\n\n                },\n\n                getComponent: function (index) {\n\n                    switch (index) {\n\n                        case 0:\n                            return this.x;\n                        case 1:\n                            return this.y;\n                        case 2:\n                            return this.z;\n                        default:\n                            throw new Error('index is out of range: ' + index);\n\n                    }\n\n                },\n\n                clone: function () {\n\n                    return new this.constructor(this.x, this.y, this.z);\n\n                },\n\n                copy: function (v) {\n\n                    this.x = v.x;\n                    this.y = v.y;\n                    this.z = v.z;\n\n                    return this;\n\n                },\n\n                add: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n                        return this.addVectors(v, w);\n\n                    }\n\n                    this.x += v.x;\n                    this.y += v.y;\n                    this.z += v.z;\n\n                    return this;\n\n                },\n\n                addScalar: function (s) {\n\n                    this.x += s;\n                    this.y += s;\n                    this.z += s;\n\n                    return this;\n\n                },\n\n                addVectors: function (a, b) {\n\n                    this.x = a.x + b.x;\n                    this.y = a.y + b.y;\n                    this.z = a.z + b.z;\n\n                    return this;\n\n                },\n\n                addScaledVector: function (v, s) {\n\n                    this.x += v.x * s;\n                    this.y += v.y * s;\n                    this.z += v.z * s;\n\n                    return this;\n\n                },\n\n                sub: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n                        return this.subVectors(v, w);\n\n                    }\n\n                    this.x -= v.x;\n                    this.y -= v.y;\n                    this.z -= v.z;\n\n                    return this;\n\n                },\n\n                subScalar: function (s) {\n\n                    this.x -= s;\n                    this.y -= s;\n                    this.z -= s;\n\n                    return this;\n\n                },\n\n                subVectors: function (a, b) {\n\n                    this.x = a.x - b.x;\n                    this.y = a.y - b.y;\n                    this.z = a.z - b.z;\n\n                    return this;\n\n                },\n\n                multiply: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');\n                        return this.multiplyVectors(v, w);\n\n                    }\n\n                    this.x *= v.x;\n                    this.y *= v.y;\n                    this.z *= v.z;\n\n                    return this;\n\n                },\n\n                multiplyScalar: function (scalar) {\n\n                    this.x *= scalar;\n                    this.y *= scalar;\n                    this.z *= scalar;\n\n                    return this;\n\n                },\n\n                multiplyVectors: function (a, b) {\n\n                    this.x = a.x * b.x;\n                    this.y = a.y * b.y;\n                    this.z = a.z * b.z;\n\n                    return this;\n\n                },\n\n                applyEuler: function () {\n\n                    var quaternion = new Quaternion();\n\n                    return function applyEuler(euler) {\n\n                        if ((euler && euler.isEuler) === false) {\n\n                            console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.');\n\n                        }\n\n                        return this.applyQuaternion(quaternion.setFromEuler(euler));\n\n                    };\n\n                }(),\n\n                applyAxisAngle: function () {\n\n                    var quaternion = new Quaternion();\n\n                    return function applyAxisAngle(axis, angle) {\n\n                        return this.applyQuaternion(quaternion.setFromAxisAngle(axis, angle));\n\n                    };\n\n                }(),\n\n                applyMatrix3: function (m) {\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z;\n                    var e = m.elements;\n\n                    this.x = e[0] * x + e[3] * y + e[6] * z;\n                    this.y = e[1] * x + e[4] * y + e[7] * z;\n                    this.z = e[2] * x + e[5] * y + e[8] * z;\n\n                    return this;\n\n                },\n\n                applyMatrix4: function (m) {\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z;\n                    var e = m.elements;\n\n                    this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\n                    this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\n                    this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\n                    var w = e[3] * x + e[7] * y + e[11] * z + e[15];\n\n                    return this.divideScalar(w);\n\n                },\n\n                applyQuaternion: function (q) {\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z;\n                    var qx = q.x,\n                        qy = q.y,\n                        qz = q.z,\n                        qw = q.w;\n\n                    // calculate quat * vector\n\n                    var ix = qw * x + qy * z - qz * y;\n                    var iy = qw * y + qz * x - qx * z;\n                    var iz = qw * z + qx * y - qy * x;\n                    var iw = -qx * x - qy * y - qz * z;\n\n                    // calculate result * inverse quat\n\n                    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n                    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n                    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\n                    return this;\n\n                },\n\n                project: function () {\n\n                    var matrix = new Matrix4();\n\n                    return function project(camera) {\n\n                        matrix.multiplyMatrices(camera.projectionMatrix, matrix.getInverse(camera.matrixWorld));\n                        return this.applyMatrix4(matrix);\n\n                    };\n\n                }(),\n\n                unproject: function () {\n\n                    var matrix = new Matrix4();\n\n                    return function unproject(camera) {\n\n                        matrix.multiplyMatrices(camera.matrixWorld, matrix.getInverse(camera.projectionMatrix));\n                        return this.applyMatrix4(matrix);\n\n                    };\n\n                }(),\n\n                transformDirection: function (m) {\n\n                    // input: THREE.Matrix4 affine matrix\n                    // vector interpreted as a direction\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z;\n                    var e = m.elements;\n\n                    this.x = e[0] * x + e[4] * y + e[8] * z;\n                    this.y = e[1] * x + e[5] * y + e[9] * z;\n                    this.z = e[2] * x + e[6] * y + e[10] * z;\n\n                    return this.normalize();\n\n                },\n\n                divide: function (v) {\n\n                    this.x /= v.x;\n                    this.y /= v.y;\n                    this.z /= v.z;\n\n                    return this;\n\n                },\n\n                divideScalar: function (scalar) {\n\n                    return this.multiplyScalar(1 / scalar);\n\n                },\n\n                min: function (v) {\n\n                    this.x = Math.min(this.x, v.x);\n                    this.y = Math.min(this.y, v.y);\n                    this.z = Math.min(this.z, v.z);\n\n                    return this;\n\n                },\n\n                max: function (v) {\n\n                    this.x = Math.max(this.x, v.x);\n                    this.y = Math.max(this.y, v.y);\n                    this.z = Math.max(this.z, v.z);\n\n                    return this;\n\n                },\n\n                clamp: function (min, max) {\n\n                    // This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n                    this.x = Math.max(min.x, Math.min(max.x, this.x));\n                    this.y = Math.max(min.y, Math.min(max.y, this.y));\n                    this.z = Math.max(min.z, Math.min(max.z, this.z));\n\n                    return this;\n\n                },\n\n                clampScalar: function () {\n\n                    var min = new Vector3();\n                    var max = new Vector3();\n\n                    return function clampScalar(minVal, maxVal) {\n\n                        min.set(minVal, minVal, minVal);\n                        max.set(maxVal, maxVal, maxVal);\n\n                        return this.clamp(min, max);\n\n                    };\n\n                }(),\n\n                clampLength: function (min, max) {\n\n                    var length = this.length();\n\n                    return this.multiplyScalar(Math.max(min, Math.min(max, length)) / length);\n\n                },\n\n                floor: function () {\n\n                    this.x = Math.floor(this.x);\n                    this.y = Math.floor(this.y);\n                    this.z = Math.floor(this.z);\n\n                    return this;\n\n                },\n\n                ceil: function () {\n\n                    this.x = Math.ceil(this.x);\n                    this.y = Math.ceil(this.y);\n                    this.z = Math.ceil(this.z);\n\n                    return this;\n\n                },\n\n                round: function () {\n\n                    this.x = Math.round(this.x);\n                    this.y = Math.round(this.y);\n                    this.z = Math.round(this.z);\n\n                    return this;\n\n                },\n\n                roundToZero: function () {\n\n                    this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n                    this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n                    this.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\n\n                    return this;\n\n                },\n\n                negate: function () {\n\n                    this.x = -this.x;\n                    this.y = -this.y;\n                    this.z = -this.z;\n\n                    return this;\n\n                },\n\n                dot: function (v) {\n\n                    return this.x * v.x + this.y * v.y + this.z * v.z;\n\n                },\n\n                // TODO lengthSquared?\n\n                lengthSq: function () {\n\n                    return this.x * this.x + this.y * this.y + this.z * this.z;\n\n                },\n\n                length: function () {\n\n                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\n                },\n\n                lengthManhattan: function () {\n\n                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n\n                },\n\n                normalize: function () {\n\n                    return this.divideScalar(this.length());\n\n                },\n\n                setLength: function (length) {\n\n                    return this.multiplyScalar(length / this.length());\n\n                },\n\n                lerp: function (v, alpha) {\n\n                    this.x += (v.x - this.x) * alpha;\n                    this.y += (v.y - this.y) * alpha;\n                    this.z += (v.z - this.z) * alpha;\n\n                    return this;\n\n                },\n\n                lerpVectors: function (v1, v2, alpha) {\n\n                    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\n                },\n\n                cross: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');\n                        return this.crossVectors(v, w);\n\n                    }\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z;\n\n                    this.x = y * v.z - z * v.y;\n                    this.y = z * v.x - x * v.z;\n                    this.z = x * v.y - y * v.x;\n\n                    return this;\n\n                },\n\n                crossVectors: function (a, b) {\n\n                    var ax = a.x,\n                        ay = a.y,\n                        az = a.z;\n                    var bx = b.x,\n                        by = b.y,\n                        bz = b.z;\n\n                    this.x = ay * bz - az * by;\n                    this.y = az * bx - ax * bz;\n                    this.z = ax * by - ay * bx;\n\n                    return this;\n\n                },\n\n                projectOnVector: function (vector) {\n\n                    var scalar = vector.dot(this) / vector.lengthSq();\n\n                    return this.copy(vector).multiplyScalar(scalar);\n\n                },\n\n                projectOnPlane: function () {\n\n                    var v1 = new Vector3();\n\n                    return function projectOnPlane(planeNormal) {\n\n                        v1.copy(this).projectOnVector(planeNormal);\n\n                        return this.sub(v1);\n\n                    };\n\n                }(),\n\n                reflect: function () {\n\n                    // reflect incident vector off plane orthogonal to normal\n                    // normal is assumed to have unit length\n\n                    var v1 = new Vector3();\n\n                    return function reflect(normal) {\n\n                        return this.sub(v1.copy(normal).multiplyScalar(2 * this.dot(normal)));\n\n                    };\n\n                }(),\n\n                angleTo: function (v) {\n\n                    var theta = this.dot(v) / (Math.sqrt(this.lengthSq() * v.lengthSq()));\n\n                    // clamp, to handle numerical problems\n\n                    return Math.acos(_Math.clamp(theta, -1, 1));\n\n                },\n\n                distanceTo: function (v) {\n\n                    return Math.sqrt(this.distanceToSquared(v));\n\n                },\n\n                distanceToSquared: function (v) {\n\n                    var dx = this.x - v.x,\n                        dy = this.y - v.y,\n                        dz = this.z - v.z;\n\n                    return dx * dx + dy * dy + dz * dz;\n\n                },\n\n                distanceToManhattan: function (v) {\n\n                    return Math.abs(this.x - v.x) + Math.abs(this.y - v.y) + Math.abs(this.z - v.z);\n\n                },\n\n                setFromSpherical: function (s) {\n\n                    var sinPhiRadius = Math.sin(s.phi) * s.radius;\n\n                    this.x = sinPhiRadius * Math.sin(s.theta);\n                    this.y = Math.cos(s.phi) * s.radius;\n                    this.z = sinPhiRadius * Math.cos(s.theta);\n\n                    return this;\n\n                },\n\n                setFromCylindrical: function (c) {\n\n                    this.x = c.radius * Math.sin(c.theta);\n                    this.y = c.y;\n                    this.z = c.radius * Math.cos(c.theta);\n\n                    return this;\n\n                },\n\n                setFromMatrixPosition: function (m) {\n\n                    return this.setFromMatrixColumn(m, 3);\n\n                },\n\n                setFromMatrixScale: function (m) {\n\n                    var sx = this.setFromMatrixColumn(m, 0).length();\n                    var sy = this.setFromMatrixColumn(m, 1).length();\n                    var sz = this.setFromMatrixColumn(m, 2).length();\n\n                    this.x = sx;\n                    this.y = sy;\n                    this.z = sz;\n\n                    return this;\n\n                },\n\n                setFromMatrixColumn: function (m, index) {\n\n\n                    return this.fromArray(m.elements, index * 4);\n\n                },\n\n                equals: function (v) {\n\n                    return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z));\n\n                },\n\n                fromArray: function (array, offset) {\n\n                    if (offset === undefined) offset = 0;\n\n                    this.x = array[offset];\n                    this.y = array[offset + 1];\n                    this.z = array[offset + 2];\n\n                    return this;\n\n                },\n\n                toArray: function (array, offset) {\n\n                    if (array === undefined) array = [];\n                    if (offset === undefined) offset = 0;\n\n                    array[offset] = this.x;\n                    array[offset + 1] = this.y;\n                    array[offset + 2] = this.z;\n\n                    return array;\n\n                },\n\n                fromBufferAttribute: function (attribute, index, offset) {\n\n                    if (offset !== undefined) {\n\n                        console.warn('THREE.Vector3: offset has been removed from .fromBufferAttribute().');\n\n                    }\n\n                    this.x = attribute.getX(index);\n                    this.y = attribute.getY(index);\n                    this.z = attribute.getZ(index);\n\n                    return this;\n\n                }\n\n            });\n\n            function Vector4(x, y, z, w) {\n\n                this.x = x || 0;\n                this.y = y || 0;\n                this.z = z || 0;\n                this.w = (w !== undefined) ? w : 1;\n\n            }\n\n            Object.assign(Vector4.prototype, {\n\n                isVector4: true,\n\n                set: function (x, y, z, w) {\n\n                    this.x = x;\n                    this.y = y;\n                    this.z = z;\n                    this.w = w;\n\n                    return this;\n\n                },\n\n                setScalar: function (scalar) {\n\n                    this.x = scalar;\n                    this.y = scalar;\n                    this.z = scalar;\n                    this.w = scalar;\n\n                    return this;\n\n                },\n\n                setX: function (x) {\n\n                    this.x = x;\n\n                    return this;\n\n                },\n\n                setY: function (y) {\n\n                    this.y = y;\n\n                    return this;\n\n                },\n\n                setZ: function (z) {\n\n                    this.z = z;\n\n                    return this;\n\n                },\n\n                setW: function (w) {\n\n                    this.w = w;\n\n                    return this;\n\n                },\n\n                setComponent: function (index, value) {\n\n                    switch (index) {\n\n                        case 0:\n                            this.x = value;\n                            break;\n                        case 1:\n                            this.y = value;\n                            break;\n                        case 2:\n                            this.z = value;\n                            break;\n                        case 3:\n                            this.w = value;\n                            break;\n                        default:\n                            throw new Error('index is out of range: ' + index);\n\n                    }\n\n                    return this;\n\n                },\n\n                getComponent: function (index) {\n\n                    switch (index) {\n\n                        case 0:\n                            return this.x;\n                        case 1:\n                            return this.y;\n                        case 2:\n                            return this.z;\n                        case 3:\n                            return this.w;\n                        default:\n                            throw new Error('index is out of range: ' + index);\n\n                    }\n\n                },\n\n                clone: function () {\n\n                    return new this.constructor(this.x, this.y, this.z, this.w);\n\n                },\n\n                copy: function (v) {\n\n                    this.x = v.x;\n                    this.y = v.y;\n                    this.z = v.z;\n                    this.w = (v.w !== undefined) ? v.w : 1;\n\n                    return this;\n\n                },\n\n                add: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n                        return this.addVectors(v, w);\n\n                    }\n\n                    this.x += v.x;\n                    this.y += v.y;\n                    this.z += v.z;\n                    this.w += v.w;\n\n                    return this;\n\n                },\n\n                addScalar: function (s) {\n\n                    this.x += s;\n                    this.y += s;\n                    this.z += s;\n                    this.w += s;\n\n                    return this;\n\n                },\n\n                addVectors: function (a, b) {\n\n                    this.x = a.x + b.x;\n                    this.y = a.y + b.y;\n                    this.z = a.z + b.z;\n                    this.w = a.w + b.w;\n\n                    return this;\n\n                },\n\n                addScaledVector: function (v, s) {\n\n                    this.x += v.x * s;\n                    this.y += v.y * s;\n                    this.z += v.z * s;\n                    this.w += v.w * s;\n\n                    return this;\n\n                },\n\n                sub: function (v, w) {\n\n                    if (w !== undefined) {\n\n                        console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n                        return this.subVectors(v, w);\n\n                    }\n\n                    this.x -= v.x;\n                    this.y -= v.y;\n                    this.z -= v.z;\n                    this.w -= v.w;\n\n                    return this;\n\n                },\n\n                subScalar: function (s) {\n\n                    this.x -= s;\n                    this.y -= s;\n                    this.z -= s;\n                    this.w -= s;\n\n                    return this;\n\n                },\n\n                subVectors: function (a, b) {\n\n                    this.x = a.x - b.x;\n                    this.y = a.y - b.y;\n                    this.z = a.z - b.z;\n                    this.w = a.w - b.w;\n\n                    return this;\n\n                },\n\n                multiplyScalar: function (scalar) {\n\n                    this.x *= scalar;\n                    this.y *= scalar;\n                    this.z *= scalar;\n                    this.w *= scalar;\n\n                    return this;\n\n                },\n\n                applyMatrix4: function (m) {\n\n                    var x = this.x,\n                        y = this.y,\n                        z = this.z,\n                        w = this.w;\n                    var e = m.elements;\n\n                    this.x = e[0] * x + e[4] * y + e[8] * z + e[12] * w;\n                    this.y = e[1] * x + e[5] * y + e[9] * z + e[13] * w;\n                    this.z = e[2] * x + e[6] * y + e[10] * z + e[14] * w;\n                    this.w = e[3] * x + e[7] * y + e[11] * z + e[15] * w;\n\n                    return this;\n\n                },\n\n                divideScalar: function (scalar) {\n\n                    return this.multiplyScalar(1 / scalar);\n\n                },\n\n                setAxisAngleFromQuaternion: function (q) {\n\n                    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n                    // q is assumed to be normalized\n\n                    this.w = 2 * Math.acos(q.w);\n\n                    var s = Math.sqrt(1 - q.w * q.w);\n\n                    if (s < 0.0001) {\n\n                        this.x = 1;\n                        this.y = 0;\n                        this.z = 0;\n\n                    } else {\n\n                        this.x = q.x / s;\n                        this.y = q.y / s;\n                        this.z = q.z / s;\n\n                    }\n\n                    return this;\n\n                },\n\n                setAxisAngleFromRotationMatrix: function (m) {\n\n                    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n                    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n                    var angle, x, y, z, // variables for result\n                        epsilon = 0.01, // margin to allow for rounding errors\n                        epsilon2 = 0.1, // margin to distinguish between 0 and 180 degrees\n\n                        te = m.elements,\n\n                        m11 = te[0],\n                        m12 = te[4],\n                        m13 = te[8],\n                        m21 = te[1],\n                        m22 = te[5],\n                        m23 = te[9],\n                        m31 = te[2],\n                        m32 = te[6],\n                        m33 = te[10];\n\n                    if ((Math.abs(m12 - m21) < epsilon) &&\n                        (Math.abs(m13 - m31) < epsilon) &&\n                        (Math.abs(m23 - m32) < epsilon)) {\n\n                        // singularity found\n                        // first check for identity matrix which must have +1 for all terms\n                        // in leading diagonal and zero in other terms\n\n                        if ((Math.abs(m12 + m21) < epsilon2) &&\n                            (Math.abs(m13 + m31) < epsilon2) &&\n                            (Math.abs(m23 + m32) < epsilon2) &&\n                            (Math.abs(m11 + m22 + m33 - 3) < epsilon2)) {\n\n                            // this singularity is identity matrix so angle = 0\n\n                            this.set(1, 0, 0, 0);\n\n                            return this; // zero angle, arbitrary axis\n\n                        }\n\n                        // otherwise this singularity is angle = 180\n\n                        angle = Math.PI;\n\n                        var xx = (m11 + 1) / 2;\n                        var yy = (m22 + 1) / 2;\n                        var zz = (m33 + 1) / 2;\n                        var xy = (m12 + m21) / 4;\n                        var xz = (m13 + m31) / 4;\n                        var yz = (m23 + m32) / 4;\n\n                        if ((xx > yy) && (xx > zz)) {\n\n                            // m11 is the largest diagonal term\n\n                            if (xx < epsilon) {\n\n                                x = 0;\n                                y = 0.707106781;\n                                z = 0.707106781;\n\n                            } else {\n\n                                x = Math.sqrt(xx);\n                                y = xy / x;\n                                z = xz / x;\n\n                            }\n\n                        } else if (yy > zz) {\n\n                            // m22 is the largest diagonal term\n\n                            if (yy < epsilon) {\n\n                                x = 0.707106781;\n                                y = 0;\n                                z = 0.707106781;\n\n                            } else {\n\n                                y = Math.sqrt(yy);\n                                x = xy / y;\n                                z = yz / y;\n\n                            }\n\n                        } else {\n\n                            // m33 is the largest diagonal term so base result on this\n\n                            if (zz < epsilon) {\n\n                                x = 0.707106781;\n                                y = 0.707106781;\n                                z = 0;\n\n                            } else {\n\n                                z = Math.sqrt(zz);\n                                x = xz / z;\n                                y = yz / z;\n\n                            }\n\n                        }\n\n                        this.set(x, y, z, angle);\n\n                        return this; // return 180 deg rotation\n\n                    }\n\n                    // as we have reached here there are no singularities so we can handle normally\n\n                    var s = Math.sqrt((m32 - m23) * (m32 - m23) +\n                        (m13 - m31) * (m13 - m31) +\n                        (m21 - m12) * (m21 - m12)); // used to normalize\n\n                    if (Math.abs(s) < 0.001) s = 1;\n\n                    // prevent divide by zero, should not happen if matrix is orthogonal and should be\n                    // caught by singularity test above, but I've left it in just in case\n\n                    this.x = (m32 - m23) / s;\n                    this.y = (m13 - m31) / s;\n                    this.z = (m21 - m12) / s;\n                    this.w = Math.acos((m11 + m22 + m33 - 1) / 2);\n\n                    return this;\n\n                },\n\n                min: function (v) {\n\n                    this.x = Math.min(this.x, v.x);\n                    this.y = Math.min(this.y, v.y);\n                    this.z = Math.min(this.z, v.z);\n                    this.w = Math.min(this.w, v.w);\n\n                    return this;\n\n                },\n\n                max: function (v) {\n\n                    this.x = Math.max(this.x, v.x);\n                    this.y = Math.max(this.y, v.y);\n                    this.z = Math.max(this.z, v.z);\n                    this.w = Math.max(this.w, v.w);\n\n                    return this;\n\n                },\n\n                clamp: function (min, max) {\n\n                    // This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n                    this.x = Math.max(min.x, Math.min(max.x, this.x));\n                    this.y = Math.max(min.y, Math.min(max.y, this.y));\n                    this.z = Math.max(min.z, Math.min(max.z, this.z));\n                    this.w = Math.max(min.w, Math.min(max.w, this.w));\n\n                    return this;\n\n                },\n\n                clampScalar: function () {\n\n                    var min = new Vector4();\n                    var max = new Vector4();\n\n                    return function clampScalar(minVal, maxVal) {\n\n                        min.set(minVal, minVal, minVal, minVal);\n                        max.set(maxVal, maxVal, maxVal, maxVal);\n\n                        return this.clamp(min, max);\n\n                    };\n\n                }(),\n\n                floor: function () {\n\n                    this.x = Math.floor(this.x);\n                    this.y = Math.floor(this.y);\n                    this.z = Math.floor(this.z);\n                    this.w = Math.floor(this.w);\n\n                    return this;\n\n                },\n\n                ceil: function () {\n\n                    this.x = Math.ceil(this.x);\n                    this.y = Math.ceil(this.y);\n                    this.z = Math.ceil(this.z);\n                    this.w = Math.ceil(this.w);\n\n                    return this;\n\n                },\n\n                round: function () {\n\n                    this.x = Math.round(this.x);\n                    this.y = Math.round(this.y);\n                    this.z = Math.round(this.z);\n                    this.w = Math.round(this.w);\n\n                    return this;\n\n                },\n\n                roundToZero: function () {\n\n                    this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n                    this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n                    this.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\n                    this.w = (this.w < 0) ? Math.ceil(this.w) : Math.floor(this.w);\n\n                    return this;\n\n                },\n\n                negate: function () {\n\n                    this.x = -this.x;\n                    this.y = -this.y;\n                    this.z = -this.z;\n                    this.w = -this.w;\n\n                    return this;\n\n                },\n\n                dot: function (v) {\n\n                    return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n                },\n\n                lengthSq: function () {\n\n                    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n                },\n\n                length: function () {\n\n                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\n                },\n\n                lengthManhattan: function () {\n\n                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\n\n                },\n\n                normalize: function () {\n\n                    return this.divideScalar(this.length());\n\n                },\n\n                setLength: function (length) {\n\n                    return this.multiplyScalar(length / this.length());\n\n                },\n\n                lerp: function (v, alpha) {\n\n                    this.x += (v.x - this.x) * alpha;\n                    this.y += (v.y - this.y) * alpha;\n                    this.z += (v.z - this.z) * alpha;\n                    this.w += (v.w - this.w) * alpha;\n\n                    return this;\n\n                },\n\n                lerpVectors: function (v1, v2, alpha) {\n\n                    return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\n                },\n\n                equals: function (v) {\n\n                    return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z) && (v.w === this.w));\n\n                },\n\n                fromArray: function (array, offset) {\n\n                    if (offset === undefined) offset = 0;\n\n                    this.x = array[offset];\n                    this.y = array[offset + 1];\n                    this.z = array[offset + 2];\n                    this.w = array[offset + 3];\n\n                    return this;\n\n                },\n\n                toArray: function (array, offset) {\n\n                    if (array === undefined) array = [];\n                    if (offset === undefined) offset = 0;\n\n                    array[offset] = this.x;\n                    array[offset + 1] = this.y;\n                    array[offset + 2] = this.z;\n                    array[offset + 3] = this.w;\n\n                    return array;\n\n                },\n\n                fromBufferAttribute: function (attribute, index, offset) {\n\n                    if (offset !== undefined) {\n\n                        console.warn('THREE.Vector4: offset has been removed from .fromBufferAttribute().');\n\n                    }\n\n                    this.x = attribute.getX(index);\n                    this.y = attribute.getY(index);\n                    this.z = attribute.getZ(index);\n                    this.w = attribute.getW(index);\n\n                    return this;\n\n                }\n\n            });\n\n            function Quaternion(x, y, z, w) {\n\n                this._x = x || 0;\n                this._y = y || 0;\n                this._z = z || 0;\n                this._w = (w !== undefined) ? w : 1;\n\n            }\n\n            Object.assign(Quaternion, {\n\n                slerp: function (qa, qb, qm, t) {\n\n                    return qm.copy(qa).slerp(qb, t);\n\n                },\n\n                slerpFlat: function (dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t) {\n\n                    // fuzz-free, array-based Quaternion SLERP operation\n\n                    var x0 = src0[srcOffset0 + 0],\n                        y0 = src0[srcOffset0 + 1],\n                        z0 = src0[srcOffset0 + 2],\n                        w0 = src0[srcOffset0 + 3],\n\n                        x1 = src1[srcOffset1 + 0],\n                        y1 = src1[srcOffset1 + 1],\n                        z1 = src1[srcOffset1 + 2],\n                        w1 = src1[srcOffset1 + 3];\n\n                    if (w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1) {\n\n                        var s = 1 - t,\n\n                            cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n                            dir = (cos >= 0 ? 1 : -1),\n                            sqrSin = 1 - cos * cos;\n\n                        // Skip the Slerp for tiny steps to avoid numeric problems:\n                        if (sqrSin > Number.EPSILON) {\n\n                            var sin = Math.sqrt(sqrSin),\n                                len = Math.atan2(sin, cos * dir);\n\n                            s = Math.sin(s * len) / sin;\n                            t = Math.sin(t * len) / sin;\n\n                        }\n\n                        var tDir = t * dir;\n\n                        x0 = x0 * s + x1 * tDir;\n                        y0 = y0 * s + y1 * tDir;\n                        z0 = z0 * s + z1 * tDir;\n                        w0 = w0 * s + w1 * tDir;\n\n                        // Normalize in case we just did a lerp:\n                        if (s === 1 - t) {\n\n                            var f = 1 / Math.sqrt(x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0);\n\n                            x0 *= f;\n                            y0 *= f;\n                            z0 *= f;\n                            w0 *= f;\n\n                        }\n\n                    }\n\n                    dst[dstOffset] = x0;\n                    dst[dstOffset + 1] = y0;\n                    dst[dstOffset + 2] = z0;\n                    dst[dstOffset + 3] = w0;\n\n                }\n\n            });\n\n            Object.defineProperties(Quaternion.prototype, {\n\n                x: {\n\n                    get: function () {\n\n                        return this._x;\n\n                    },\n\n                    set: function (value) {\n\n                        this._x = value;\n                        this.onChangeCallback();\n\n                    }\n\n                },\n\n                y: {\n\n                    get: function () {\n\n                        return this._y;\n\n                    },\n\n                    set: function (value) {\n\n                        this._y = value;\n                        this.onChangeCallback();\n\n                    }\n\n                },\n\n                z: {\n\n                    get: function () {\n\n                        return this._z;\n\n                    },\n\n                    set: function (value) {\n\n                        this._z = value;\n                        this.onChangeCallback();\n\n                    }\n\n                },\n\n                w: {\n\n                    get: function () {\n\n                        return this._w;\n\n                    },\n\n                    set: function (value) {\n\n                        this._w = value;\n                        this.onChangeCallback();\n\n                    }\n\n                }\n\n            });\n\n            Object.assign(Quaternion.prototype, {\n\n                set: function (x, y, z, w) {\n\n                    this._x = x;\n                    this._y = y;\n                    this._z = z;\n                    this._w = w;\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                clone: function () {\n\n                    return new this.constructor(this._x, this._y, this._z, this._w);\n\n                },\n\n                copy: function (quaternion) {\n\n                    this._x = quaternion.x;\n                    this._y = quaternion.y;\n                    this._z = quaternion.z;\n                    this._w = quaternion.w;\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                setFromEuler: function (euler, update) {\n\n                    if ((euler && euler.isEuler) === false) {\n\n                        throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');\n\n                    }\n\n                    var x = euler._x,\n                        y = euler._y,\n                        z = euler._z,\n                        order = euler.order;\n\n                    // http://www.mathworks.com/matlabcentral/fileexchange/\n                    // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n                    //\tcontent/SpinCalc.m\n\n                    var cos = Math.cos;\n                    var sin = Math.sin;\n\n                    var c1 = cos(x / 2);\n                    var c2 = cos(y / 2);\n                    var c3 = cos(z / 2);\n\n                    var s1 = sin(x / 2);\n                    var s2 = sin(y / 2);\n                    var s3 = sin(z / 2);\n\n                    if (order === 'XYZ') {\n\n                        this._x = s1 * c2 * c3 + c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 - s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 + s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n                    } else if (order === 'YXZ') {\n\n                        this._x = s1 * c2 * c3 + c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 - s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 - s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n                    } else if (order === 'ZXY') {\n\n                        this._x = s1 * c2 * c3 - c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 + s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 + s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n                    } else if (order === 'ZYX') {\n\n                        this._x = s1 * c2 * c3 - c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 + s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 - s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n                    } else if (order === 'YZX') {\n\n                        this._x = s1 * c2 * c3 + c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 + s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 - s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n                    } else if (order === 'XZY') {\n\n                        this._x = s1 * c2 * c3 - c1 * s2 * s3;\n                        this._y = c1 * s2 * c3 - s1 * c2 * s3;\n                        this._z = c1 * c2 * s3 + s1 * s2 * c3;\n                        this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n                    }\n\n                    if (update !== false) this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                setFromAxisAngle: function (axis, angle) {\n\n                    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n                    // assumes axis is normalized\n\n                    var halfAngle = angle / 2,\n                        s = Math.sin(halfAngle);\n\n                    this._x = axis.x * s;\n                    this._y = axis.y * s;\n                    this._z = axis.z * s;\n                    this._w = Math.cos(halfAngle);\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                setFromRotationMatrix: function (m) {\n\n                    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n                    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n                    var te = m.elements,\n\n                        m11 = te[0],\n                        m12 = te[4],\n                        m13 = te[8],\n                        m21 = te[1],\n                        m22 = te[5],\n                        m23 = te[9],\n                        m31 = te[2],\n                        m32 = te[6],\n                        m33 = te[10],\n\n                        trace = m11 + m22 + m33,\n                        s;\n\n                    if (trace > 0) {\n\n                        s = 0.5 / Math.sqrt(trace + 1.0);\n\n                        this._w = 0.25 / s;\n                        this._x = (m32 - m23) * s;\n                        this._y = (m13 - m31) * s;\n                        this._z = (m21 - m12) * s;\n\n                    } else if (m11 > m22 && m11 > m33) {\n\n                        s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n\n                        this._w = (m32 - m23) / s;\n                        this._x = 0.25 * s;\n                        this._y = (m12 + m21) / s;\n                        this._z = (m13 + m31) / s;\n\n                    } else if (m22 > m33) {\n\n                        s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n\n                        this._w = (m13 - m31) / s;\n                        this._x = (m12 + m21) / s;\n                        this._y = 0.25 * s;\n                        this._z = (m23 + m32) / s;\n\n                    } else {\n\n                        s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n\n                        this._w = (m21 - m12) / s;\n                        this._x = (m13 + m31) / s;\n                        this._y = (m23 + m32) / s;\n                        this._z = 0.25 * s;\n\n                    }\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                setFromUnitVectors: function () {\n\n                    // assumes direction vectors vFrom and vTo are normalized\n\n                    var v1 = new Vector3();\n                    var r;\n\n                    var EPS = 0.000001;\n\n                    return function setFromUnitVectors(vFrom, vTo) {\n\n                        if (v1 === undefined) v1 = new Vector3();\n\n                        r = vFrom.dot(vTo) + 1;\n\n                        if (r < EPS) {\n\n                            r = 0;\n\n                            if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n\n                                v1.set(-vFrom.y, vFrom.x, 0);\n\n                            } else {\n\n                                v1.set(0, -vFrom.z, vFrom.y);\n\n                            }\n\n                        } else {\n\n                            v1.crossVectors(vFrom, vTo);\n\n                        }\n\n                        this._x = v1.x;\n                        this._y = v1.y;\n                        this._z = v1.z;\n                        this._w = r;\n\n                        return this.normalize();\n\n                    };\n\n                }(),\n\n                inverse: function () {\n\n                    return this.conjugate().normalize();\n\n                },\n\n                conjugate: function () {\n\n                    this._x *= -1;\n                    this._y *= -1;\n                    this._z *= -1;\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                dot: function (v) {\n\n                    return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n                },\n\n                lengthSq: function () {\n\n                    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n                },\n\n                length: function () {\n\n                    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);\n\n                },\n\n                normalize: function () {\n\n                    var l = this.length();\n\n                    if (l === 0) {\n\n                        this._x = 0;\n                        this._y = 0;\n                        this._z = 0;\n                        this._w = 1;\n\n                    } else {\n\n                        l = 1 / l;\n\n                        this._x = this._x * l;\n                        this._y = this._y * l;\n                        this._z = this._z * l;\n                        this._w = this._w * l;\n\n                    }\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                multiply: function (q, p) {\n\n                    if (p !== undefined) {\n\n                        console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.');\n                        return this.multiplyQuaternions(q, p);\n\n                    }\n\n                    return this.multiplyQuaternions(this, q);\n\n                },\n\n                premultiply: function (q) {\n\n                    return this.multiplyQuaternions(q, this);\n\n                },\n\n                multiplyQuaternions: function (a, b) {\n\n                    // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n                    var qax = a._x,\n                        qay = a._y,\n                        qaz = a._z,\n                        qaw = a._w;\n                    var qbx = b._x,\n                        qby = b._y,\n                        qbz = b._z,\n                        qbw = b._w;\n\n                    this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n                    this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n                    this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n                    this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                slerp: function (qb, t) {\n\n                    if (t === 0) return this;\n                    if (t === 1) return this.copy(qb);\n\n                    var x = this._x,\n                        y = this._y,\n                        z = this._z,\n                        w = this._w;\n\n                    // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n                    var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n                    if (cosHalfTheta < 0) {\n\n                        this._w = -qb._w;\n                        this._x = -qb._x;\n                        this._y = -qb._y;\n                        this._z = -qb._z;\n\n                        cosHalfTheta = -cosHalfTheta;\n\n                    } else {\n\n                        this.copy(qb);\n\n                    }\n\n                    if (cosHalfTheta >= 1.0) {\n\n                        this._w = w;\n                        this._x = x;\n                        this._y = y;\n                        this._z = z;\n\n                        return this;\n\n                    }\n\n                    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n\n                    if (Math.abs(sinHalfTheta) < 0.001) {\n\n                        this._w = 0.5 * (w + this._w);\n                        this._x = 0.5 * (x + this._x);\n                        this._y = 0.5 * (y + this._y);\n                        this._z = 0.5 * (z + this._z);\n\n                        return this;\n\n                    }\n\n                    var halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n                    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n                        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n\n                    this._w = (w * ratioA + this._w * ratioB);\n                    this._x = (x * ratioA + this._x * ratioB);\n                    this._y = (y * ratioA + this._y * ratioB);\n                    this._z = (z * ratioA + this._z * ratioB);\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                equals: function (quaternion) {\n\n                    return (quaternion._x === this._x) && (quaternion._y === this._y) && (quaternion._z === this._z) && (quaternion._w === this._w);\n\n                },\n\n                fromArray: function (array, offset) {\n\n                    if (offset === undefined) offset = 0;\n\n                    this._x = array[offset];\n                    this._y = array[offset + 1];\n                    this._z = array[offset + 2];\n                    this._w = array[offset + 3];\n\n                    this.onChangeCallback();\n\n                    return this;\n\n                },\n\n                toArray: function (array, offset) {\n\n                    if (array === undefined) array = [];\n                    if (offset === undefined) offset = 0;\n\n                    array[offset] = this._x;\n                    array[offset + 1] = this._y;\n                    array[offset + 2] = this._z;\n                    array[offset + 3] = this._w;\n\n                    return array;\n\n                },\n\n                onChange: function (callback) {\n\n                    this.onChangeCallback = callback;\n\n                    return this;\n\n                },\n\n                onChangeCallback: function () {}\n\n            });\n\n            function Matrix4() {\n\n                this.elements = [\n\n                    1, 0, 0, 0,\n                    0, 1, 0, 0,\n                    0, 0, 1, 0,\n                    0, 0, 0, 1\n\n                ];\n\n                if (arguments.length > 0) {\n\n                    console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.');\n\n                }\n\n            }\n\n            Object.assign(Matrix4.prototype, {\n\n                isMatrix4: true,\n\n                set: function (n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n\n                    var te = this.elements;\n\n                    te[0] = n11;\n                    te[4] = n12;\n                    te[8] = n13;\n                    te[12] = n14;\n                    te[1] = n21;\n                    te[5] = n22;\n                    te[9] = n23;\n                    te[13] = n24;\n                    te[2] = n31;\n                    te[6] = n32;\n                    te[10] = n33;\n                    te[14] = n34;\n                    te[3] = n41;\n                    te[7] = n42;\n                    te[11] = n43;\n                    te[15] = n44;\n\n                    return this;\n\n                },\n\n                identity: function () {\n\n                    this.set(\n\n                        1, 0, 0, 0,\n                        0, 1, 0, 0,\n                        0, 0, 1, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                clone: function () {\n\n                    return new Matrix4().fromArray(this.elements);\n\n                },\n\n                copy: function (m) {\n\n                    var te = this.elements;\n                    var me = m.elements;\n\n                    te[0] = me[0];\n                    te[1] = me[1];\n                    te[2] = me[2];\n                    te[3] = me[3];\n                    te[4] = me[4];\n                    te[5] = me[5];\n                    te[6] = me[6];\n                    te[7] = me[7];\n                    te[8] = me[8];\n                    te[9] = me[9];\n                    te[10] = me[10];\n                    te[11] = me[11];\n                    te[12] = me[12];\n                    te[13] = me[13];\n                    te[14] = me[14];\n                    te[15] = me[15];\n\n                    return this;\n\n                },\n\n                copyPosition: function (m) {\n\n                    var te = this.elements,\n                        me = m.elements;\n\n                    te[12] = me[12];\n                    te[13] = me[13];\n                    te[14] = me[14];\n\n                    return this;\n\n                },\n\n                extractBasis: function (xAxis, yAxis, zAxis) {\n\n                    xAxis.setFromMatrixColumn(this, 0);\n                    yAxis.setFromMatrixColumn(this, 1);\n                    zAxis.setFromMatrixColumn(this, 2);\n\n                    return this;\n\n                },\n\n                makeBasis: function (xAxis, yAxis, zAxis) {\n\n                    this.set(\n                        xAxis.x, yAxis.x, zAxis.x, 0,\n                        xAxis.y, yAxis.y, zAxis.y, 0,\n                        xAxis.z, yAxis.z, zAxis.z, 0,\n                        0, 0, 0, 1\n                    );\n\n                    return this;\n\n                },\n\n                extractRotation: function () {\n\n                    var v1 = new Vector3();\n\n                    return function extractRotation(m) {\n\n                        var te = this.elements;\n                        var me = m.elements;\n\n                        var scaleX = 1 / v1.setFromMatrixColumn(m, 0).length();\n                        var scaleY = 1 / v1.setFromMatrixColumn(m, 1).length();\n                        var scaleZ = 1 / v1.setFromMatrixColumn(m, 2).length();\n\n                        te[0] = me[0] * scaleX;\n                        te[1] = me[1] * scaleX;\n                        te[2] = me[2] * scaleX;\n\n                        te[4] = me[4] * scaleY;\n                        te[5] = me[5] * scaleY;\n                        te[6] = me[6] * scaleY;\n\n                        te[8] = me[8] * scaleZ;\n                        te[9] = me[9] * scaleZ;\n                        te[10] = me[10] * scaleZ;\n\n                        return this;\n\n                    };\n\n                }(),\n\n                makeRotationFromEuler: function (euler) {\n\n                    if ((euler && euler.isEuler) === false) {\n\n                        console.error('THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');\n\n                    }\n\n                    var te = this.elements;\n\n                    var x = euler.x,\n                        y = euler.y,\n                        z = euler.z;\n                    var a = Math.cos(x),\n                        b = Math.sin(x);\n                    var c = Math.cos(y),\n                        d = Math.sin(y);\n                    var e = Math.cos(z),\n                        f = Math.sin(z);\n\n                    if (euler.order === 'XYZ') {\n\n                        var ae = a * e,\n                            af = a * f,\n                            be = b * e,\n                            bf = b * f;\n\n                        te[0] = c * e;\n                        te[4] = -c * f;\n                        te[8] = d;\n\n                        te[1] = af + be * d;\n                        te[5] = ae - bf * d;\n                        te[9] = -b * c;\n\n                        te[2] = bf - ae * d;\n                        te[6] = be + af * d;\n                        te[10] = a * c;\n\n                    } else if (euler.order === 'YXZ') {\n\n                        var ce = c * e,\n                            cf = c * f,\n                            de = d * e,\n                            df = d * f;\n\n                        te[0] = ce + df * b;\n                        te[4] = de * b - cf;\n                        te[8] = a * d;\n\n                        te[1] = a * f;\n                        te[5] = a * e;\n                        te[9] = -b;\n\n                        te[2] = cf * b - de;\n                        te[6] = df + ce * b;\n                        te[10] = a * c;\n\n                    } else if (euler.order === 'ZXY') {\n\n                        var ce = c * e,\n                            cf = c * f,\n                            de = d * e,\n                            df = d * f;\n\n                        te[0] = ce - df * b;\n                        te[4] = -a * f;\n                        te[8] = de + cf * b;\n\n                        te[1] = cf + de * b;\n                        te[5] = a * e;\n                        te[9] = df - ce * b;\n\n                        te[2] = -a * d;\n                        te[6] = b;\n                        te[10] = a * c;\n\n                    } else if (euler.order === 'ZYX') {\n\n                        var ae = a * e,\n                            af = a * f,\n                            be = b * e,\n                            bf = b * f;\n\n                        te[0] = c * e;\n                        te[4] = be * d - af;\n                        te[8] = ae * d + bf;\n\n                        te[1] = c * f;\n                        te[5] = bf * d + ae;\n                        te[9] = af * d - be;\n\n                        te[2] = -d;\n                        te[6] = b * c;\n                        te[10] = a * c;\n\n                    } else if (euler.order === 'YZX') {\n\n                        var ac = a * c,\n                            ad = a * d,\n                            bc = b * c,\n                            bd = b * d;\n\n                        te[0] = c * e;\n                        te[4] = bd - ac * f;\n                        te[8] = bc * f + ad;\n\n                        te[1] = f;\n                        te[5] = a * e;\n                        te[9] = -b * e;\n\n                        te[2] = -d * e;\n                        te[6] = ad * f + bc;\n                        te[10] = ac - bd * f;\n\n                    } else if (euler.order === 'XZY') {\n\n                        var ac = a * c,\n                            ad = a * d,\n                            bc = b * c,\n                            bd = b * d;\n\n                        te[0] = c * e;\n                        te[4] = -f;\n                        te[8] = d * e;\n\n                        te[1] = ac * f + bd;\n                        te[5] = a * e;\n                        te[9] = ad * f - bc;\n\n                        te[2] = bc * f - ad;\n                        te[6] = b * e;\n                        te[10] = bd * f + ac;\n\n                    }\n\n                    // last column\n                    te[3] = 0;\n                    te[7] = 0;\n                    te[11] = 0;\n\n                    // bottom row\n                    te[12] = 0;\n                    te[13] = 0;\n                    te[14] = 0;\n                    te[15] = 1;\n\n                    return this;\n\n                },\n\n                makeRotationFromQuaternion: function (q) {\n\n                    var te = this.elements;\n\n                    var x = q._x,\n                        y = q._y,\n                        z = q._z,\n                        w = q._w;\n                    var x2 = x + x,\n                        y2 = y + y,\n                        z2 = z + z;\n                    var xx = x * x2,\n                        xy = x * y2,\n                        xz = x * z2;\n                    var yy = y * y2,\n                        yz = y * z2,\n                        zz = z * z2;\n                    var wx = w * x2,\n                        wy = w * y2,\n                        wz = w * z2;\n\n                    te[0] = 1 - (yy + zz);\n                    te[4] = xy - wz;\n                    te[8] = xz + wy;\n\n                    te[1] = xy + wz;\n                    te[5] = 1 - (xx + zz);\n                    te[9] = yz - wx;\n\n                    te[2] = xz - wy;\n                    te[6] = yz + wx;\n                    te[10] = 1 - (xx + yy);\n\n                    // last column\n                    te[3] = 0;\n                    te[7] = 0;\n                    te[11] = 0;\n\n                    // bottom row\n                    te[12] = 0;\n                    te[13] = 0;\n                    te[14] = 0;\n                    te[15] = 1;\n\n                    return this;\n\n                },\n\n                lookAt: function () {\n\n                    var x = new Vector3();\n                    var y = new Vector3();\n                    var z = new Vector3();\n\n                    return function lookAt(eye, target, up) {\n\n                        var te = this.elements;\n\n                        z.subVectors(eye, target);\n\n                        if (z.lengthSq() === 0) {\n\n                            // eye and target are in the same position\n\n                            z.z = 1;\n\n                        }\n\n                        z.normalize();\n                        x.crossVectors(up, z);\n\n                        if (x.lengthSq() === 0) {\n\n                            // eye and target are in the same vertical\n\n                            z.z += 0.0001;\n                            x.crossVectors(up, z);\n\n                        }\n\n                        x.normalize();\n                        y.crossVectors(z, x);\n\n                        te[0] = x.x;\n                        te[4] = y.x;\n                        te[8] = z.x;\n                        te[1] = x.y;\n                        te[5] = y.y;\n                        te[9] = z.y;\n                        te[2] = x.z;\n                        te[6] = y.z;\n                        te[10] = z.z;\n\n                        return this;\n\n                    };\n\n                }(),\n\n                multiply: function (m, n) {\n\n                    if (n !== undefined) {\n\n                        console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\n                        return this.multiplyMatrices(m, n);\n\n                    }\n\n                    return this.multiplyMatrices(this, m);\n\n                },\n\n                premultiply: function (m) {\n\n                    return this.multiplyMatrices(m, this);\n\n                },\n\n                multiplyMatrices: function (a, b) {\n\n                    var ae = a.elements;\n                    var be = b.elements;\n                    var te = this.elements;\n\n                    var a11 = ae[0],\n                        a12 = ae[4],\n                        a13 = ae[8],\n                        a14 = ae[12];\n                    var a21 = ae[1],\n                        a22 = ae[5],\n                        a23 = ae[9],\n                        a24 = ae[13];\n                    var a31 = ae[2],\n                        a32 = ae[6],\n                        a33 = ae[10],\n                        a34 = ae[14];\n                    var a41 = ae[3],\n                        a42 = ae[7],\n                        a43 = ae[11],\n                        a44 = ae[15];\n\n                    var b11 = be[0],\n                        b12 = be[4],\n                        b13 = be[8],\n                        b14 = be[12];\n                    var b21 = be[1],\n                        b22 = be[5],\n                        b23 = be[9],\n                        b24 = be[13];\n                    var b31 = be[2],\n                        b32 = be[6],\n                        b33 = be[10],\n                        b34 = be[14];\n                    var b41 = be[3],\n                        b42 = be[7],\n                        b43 = be[11],\n                        b44 = be[15];\n\n                    te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n                    te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n                    te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n                    te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n                    te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n                    te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n                    te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n                    te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n                    te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n                    te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n                    te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n                    te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n                    te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n                    te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n                    te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n                    te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n                    return this;\n\n                },\n\n                multiplyScalar: function (s) {\n\n                    var te = this.elements;\n\n                    te[0] *= s;\n                    te[4] *= s;\n                    te[8] *= s;\n                    te[12] *= s;\n                    te[1] *= s;\n                    te[5] *= s;\n                    te[9] *= s;\n                    te[13] *= s;\n                    te[2] *= s;\n                    te[6] *= s;\n                    te[10] *= s;\n                    te[14] *= s;\n                    te[3] *= s;\n                    te[7] *= s;\n                    te[11] *= s;\n                    te[15] *= s;\n\n                    return this;\n\n                },\n\n                applyToBufferAttribute: function () {\n\n                    var v1 = new Vector3();\n\n                    return function applyToBufferAttribute(attribute) {\n\n                        for (var i = 0, l = attribute.count; i < l; i++) {\n\n                            v1.x = attribute.getX(i);\n                            v1.y = attribute.getY(i);\n                            v1.z = attribute.getZ(i);\n\n                            v1.applyMatrix4(this);\n\n                            attribute.setXYZ(i, v1.x, v1.y, v1.z);\n\n                        }\n\n                        return attribute;\n\n                    };\n\n                }(),\n\n                determinant: function () {\n\n                    var te = this.elements;\n\n                    var n11 = te[0],\n                        n12 = te[4],\n                        n13 = te[8],\n                        n14 = te[12];\n                    var n21 = te[1],\n                        n22 = te[5],\n                        n23 = te[9],\n                        n24 = te[13];\n                    var n31 = te[2],\n                        n32 = te[6],\n                        n33 = te[10],\n                        n34 = te[14];\n                    var n41 = te[3],\n                        n42 = te[7],\n                        n43 = te[11],\n                        n44 = te[15];\n\n                    //TODO: make this more efficient\n                    //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n                    return (\n                        n41 * (\n                            +n14 * n23 * n32 -\n                            n13 * n24 * n32 -\n                            n14 * n22 * n33 +\n                            n12 * n24 * n33 +\n                            n13 * n22 * n34 -\n                            n12 * n23 * n34\n                        ) +\n                        n42 * (\n                            +n11 * n23 * n34 -\n                            n11 * n24 * n33 +\n                            n14 * n21 * n33 -\n                            n13 * n21 * n34 +\n                            n13 * n24 * n31 -\n                            n14 * n23 * n31\n                        ) +\n                        n43 * (\n                            +n11 * n24 * n32 -\n                            n11 * n22 * n34 -\n                            n14 * n21 * n32 +\n                            n12 * n21 * n34 +\n                            n14 * n22 * n31 -\n                            n12 * n24 * n31\n                        ) +\n                        n44 * (\n                            -n13 * n22 * n31 -\n                            n11 * n23 * n32 +\n                            n11 * n22 * n33 +\n                            n13 * n21 * n32 -\n                            n12 * n21 * n33 +\n                            n12 * n23 * n31\n                        )\n\n                    );\n\n                },\n\n                transpose: function () {\n\n                    var te = this.elements;\n                    var tmp;\n\n                    tmp = te[1];\n                    te[1] = te[4];\n                    te[4] = tmp;\n                    tmp = te[2];\n                    te[2] = te[8];\n                    te[8] = tmp;\n                    tmp = te[6];\n                    te[6] = te[9];\n                    te[9] = tmp;\n\n                    tmp = te[3];\n                    te[3] = te[12];\n                    te[12] = tmp;\n                    tmp = te[7];\n                    te[7] = te[13];\n                    te[13] = tmp;\n                    tmp = te[11];\n                    te[11] = te[14];\n                    te[14] = tmp;\n\n                    return this;\n\n                },\n\n                setPosition: function (v) {\n\n                    var te = this.elements;\n\n                    te[12] = v.x;\n                    te[13] = v.y;\n                    te[14] = v.z;\n\n                    return this;\n\n                },\n\n                getInverse: function (m, throwOnDegenerate) {\n\n                    // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n                    var te = this.elements,\n                        me = m.elements,\n\n                        n11 = me[0],\n                        n21 = me[1],\n                        n31 = me[2],\n                        n41 = me[3],\n                        n12 = me[4],\n                        n22 = me[5],\n                        n32 = me[6],\n                        n42 = me[7],\n                        n13 = me[8],\n                        n23 = me[9],\n                        n33 = me[10],\n                        n43 = me[11],\n                        n14 = me[12],\n                        n24 = me[13],\n                        n34 = me[14],\n                        n44 = me[15],\n\n                        t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n                        t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n                        t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n                        t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n                    var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n                    if (det === 0) {\n\n                        var msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n                        if (throwOnDegenerate === true) {\n\n                            throw new Error(msg);\n\n                        } else {\n\n                            console.warn(msg);\n\n                        }\n\n                        return this.identity();\n\n                    }\n\n                    var detInv = 1 / det;\n\n                    te[0] = t11 * detInv;\n                    te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n                    te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n                    te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n\n                    te[4] = t12 * detInv;\n                    te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n                    te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n                    te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n\n                    te[8] = t13 * detInv;\n                    te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n                    te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n                    te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n\n                    te[12] = t14 * detInv;\n                    te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n                    te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n                    te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n\n                    return this;\n\n                },\n\n                scale: function (v) {\n\n                    var te = this.elements;\n                    var x = v.x,\n                        y = v.y,\n                        z = v.z;\n\n                    te[0] *= x;\n                    te[4] *= y;\n                    te[8] *= z;\n                    te[1] *= x;\n                    te[5] *= y;\n                    te[9] *= z;\n                    te[2] *= x;\n                    te[6] *= y;\n                    te[10] *= z;\n                    te[3] *= x;\n                    te[7] *= y;\n                    te[11] *= z;\n\n                    return this;\n\n                },\n\n                getMaxScaleOnAxis: function () {\n\n                    var te = this.elements;\n\n                    var scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n                    var scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n                    var scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n\n                    return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n\n                },\n\n                makeTranslation: function (x, y, z) {\n\n                    this.set(\n\n                        1, 0, 0, x,\n                        0, 1, 0, y,\n                        0, 0, 1, z,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeRotationX: function (theta) {\n\n                    var c = Math.cos(theta),\n                        s = Math.sin(theta);\n\n                    this.set(\n\n                        1, 0, 0, 0,\n                        0, c, -s, 0,\n                        0, s, c, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeRotationY: function (theta) {\n\n                    var c = Math.cos(theta),\n                        s = Math.sin(theta);\n\n                    this.set(\n\n                        c, 0, s, 0,\n                        0, 1, 0, 0,\n                        -s, 0, c, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeRotationZ: function (theta) {\n\n                    var c = Math.cos(theta),\n                        s = Math.sin(theta);\n\n                    this.set(\n\n                        c, -s, 0, 0,\n                        s, c, 0, 0,\n                        0, 0, 1, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeRotationAxis: function (axis, angle) {\n\n                    // Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n                    var c = Math.cos(angle);\n                    var s = Math.sin(angle);\n                    var t = 1 - c;\n                    var x = axis.x,\n                        y = axis.y,\n                        z = axis.z;\n                    var tx = t * x,\n                        ty = t * y;\n\n                    this.set(\n\n                        tx * x + c, tx * y - s * z, tx * z + s * y, 0,\n                        tx * y + s * z, ty * y + c, ty * z - s * x, 0,\n                        tx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeScale: function (x, y, z) {\n\n                    this.set(\n\n                        x, 0, 0, 0,\n                        0, y, 0, 0,\n                        0, 0, z, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                makeShear: function (x, y, z) {\n\n                    this.set(\n\n                        1, y, z, 0,\n                        x, 1, z, 0,\n                        x, y, 1, 0,\n                        0, 0, 0, 1\n\n                    );\n\n                    return this;\n\n                },\n\n                compose: function (position, quaternion, scale) {\n\n                    this.makeRotationFromQuaternion(quaternion);\n                    this.scale(scale);\n                    this.setPosition(position);\n\n                    return this;\n\n                },\n\n                decompose: function () {\n\n                    var vector = new Vector3();\n                    var matrix = new Matrix4();\n\n                    return function decompose(position, quaternion, scale) {\n\n                        var te = this.elements;\n\n                        var sx = vector.set(te[0], te[1], te[2]).length();\n                        var sy = vector.set(te[4], te[5], te[6]).length();\n                        var sz = vector.set(te[8], te[9], te[10]).length();\n\n                        // if determine is negative, we need to invert one scale\n                        var det = this.determinant();\n                        if (det < 0) sx = -sx;\n\n                        position.x = te[12];\n                        position.y = te[13];\n                        position.z = te[14];\n\n                        // scale the rotation part\n                        matrix.copy(this);\n\n                        var invSX = 1 / sx;\n                        var invSY = 1 / sy;\n                        var invSZ = 1 / sz;\n\n                        matrix.elements[0] *= invSX;\n                        matrix.elements[1] *= invSX;\n                        matrix.elements[2] *= invSX;\n\n                        matrix.elements[4] *= invSY;\n                        matrix.elements[5] *= invSY;\n                        matrix.elements[6] *= invSY;\n\n                        matrix.elements[8] *= invSZ;\n                        matrix.elements[9] *= invSZ;\n                        matrix.elements[10] *= invSZ;\n\n                        quaternion.setFromRotationMatrix(matrix);\n\n                        scale.x = sx;\n                        scale.y = sy;\n                        scale.z = sz;\n\n                        return this;\n\n                    };\n\n                }(),\n\n                makePerspective: function (left, right, top, bottom, near, far) {\n\n                    if (far === undefined) {\n\n                        console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');\n\n                    }\n\n                    var te = this.elements;\n                    var x = 2 * near / (right - left);\n                    var y = 2 * near / (top - bottom);\n\n                    var a = (right + left) / (right - left);\n                    var b = (top + bottom) / (top - bottom);\n                    var c = -(far + near) / (far - near);\n                    var d = -2 * far * near / (far - near);\n\n                    te[0] = x;\n                    te[4] = 0;\n                    te[8] = a;\n                    te[12] = 0;\n                    te[1] = 0;\n                    te[5] = y;\n                    te[9] = b;\n                    te[13] = 0;\n                    te[2] = 0;\n                    te[6] = 0;\n                    te[10] = c;\n                    te[14] = d;\n                    te[3] = 0;\n                    te[7] = 0;\n                    te[11] = -1;\n                    te[15] = 0;\n\n                    return this;\n\n                },\n\n                makeOrthographic: function (left, right, top, bottom, near, far) {\n\n                    var te = this.elements;\n                    var w = 1.0 / (right - left);\n                    var h = 1.0 / (top - bottom);\n                    var p = 1.0 / (far - near);\n\n                    var x = (right + left) * w;\n                    var y = (top + bottom) * h;\n                    var z = (far + near) * p;\n\n                    te[0] = 2 * w;\n                    te[4] = 0;\n                    te[8] = 0;\n                    te[12] = -x;\n                    te[1] = 0;\n                    te[5] = 2 * h;\n                    te[9] = 0;\n                    te[13] = -y;\n                    te[2] = 0;\n                    te[6] = 0;\n                    te[10] = -2 * p;\n                    te[14] = -z;\n                    te[3] = 0;\n                    te[7] = 0;\n                    te[11] = 0;\n                    te[15] = 1;\n\n                    return this;\n\n                },\n\n                equals: function (matrix) {\n\n                    var te = this.elements;\n                    var me = matrix.elements;\n\n                    for (var i = 0; i < 16; i++) {\n\n                        if (te[i] !== me[i]) return false;\n\n                    }\n\n                    return true;\n\n                },\n\n                fromArray: function (array, offset) {\n\n                    if (offset === undefined) offset = 0;\n\n                    for (var i = 0; i < 16; i++) {\n\n                        this.elements[i] = array[i + offset];\n\n                    }\n\n                    return this;\n\n                },\n\n                toArray: function (array, offset) {\n\n                    if (array === undefined) array = [];\n                    if (offset === undefined) offset = 0;\n\n                    var te = this.elements;\n\n                    array[offset] = te[0];\n                    array[offset + 1] = te[1];\n                    array[offset + 2] = te[2];\n                    array[offset + 3] = te[3];\n\n                    array[offset + 4] = te[4];\n                    array[offset + 5] = te[5];\n                    array[offset + 6] = te[6];\n                    array[offset + 7] = te[7];\n\n                    array[offset + 8] = te[8];\n                    array[offset + 9] = te[9];\n                    array[offset + 10] = te[10];\n                    array[offset + 11] = te[11];\n\n                    array[offset + 12] = te[12];\n                    array[offset + 13] = te[13];\n                    array[offset + 14] = te[14];\n                    array[offset + 15] = te[15];\n\n                    return array;\n\n                }\n\n            });\n\n            function Matrix3() {\n\n                this.elements = [\n            \n                    1, 0, 0,\n                    0, 1, 0,\n                    0, 0, 1\n            \n                ];\n            \n                if ( arguments.length > 0 ) {\n            \n                    console.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n            \n                }\n            \n            }\n            \n            Object.assign( Matrix3.prototype, {\n            \n                isMatrix3: true,\n            \n                set: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n            \n                    var te = this.elements;\n            \n                    te[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n                    te[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n                    te[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n            \n                    return this;\n            \n                },\n            \n                identity: function () {\n            \n                    this.set(\n            \n                        1, 0, 0,\n                        0, 1, 0,\n                        0, 0, 1\n            \n                    );\n            \n                    return this;\n            \n                },\n            \n                clone: function () {\n            \n                    return new this.constructor().fromArray( this.elements );\n            \n                },\n            \n                copy: function ( m ) {\n            \n                    var te = this.elements;\n                    var me = m.elements;\n            \n                    te[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n                    te[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n                    te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n            \n                    return this;\n            \n                },\n            \n                setFromMatrix4: function ( m ) {\n            \n                    var me = m.elements;\n            \n                    this.set(\n            \n                        me[ 0 ], me[ 4 ], me[  8 ],\n                        me[ 1 ], me[ 5 ], me[  9 ],\n                        me[ 2 ], me[ 6 ], me[ 10 ]\n            \n                    );\n            \n                    return this;\n            \n                },\n            \n                applyToBufferAttribute: function () {\n            \n                    var v1 = new Vector3();\n            \n                    return function applyToBufferAttribute( attribute ) {\n            \n                        for ( var i = 0, l = attribute.count; i < l; i ++ ) {\n            \n                            v1.x = attribute.getX( i );\n                            v1.y = attribute.getY( i );\n                            v1.z = attribute.getZ( i );\n            \n                            v1.applyMatrix3( this );\n            \n                            attribute.setXYZ( i, v1.x, v1.y, v1.z );\n            \n                        }\n            \n                        return attribute;\n            \n                    };\n            \n                }(),\n            \n                multiply: function ( m ) {\n            \n                    return this.multiplyMatrices( this, m );\n            \n                },\n            \n                premultiply: function ( m ) {\n            \n                    return this.multiplyMatrices( m, this );\n            \n                },\n            \n                multiplyMatrices: function ( a, b ) {\n            \n                    var ae = a.elements;\n                    var be = b.elements;\n                    var te = this.elements;\n            \n                    var a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n                    var a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n                    var a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n            \n                    var b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n                    var b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n                    var b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n            \n                    te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n                    te[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n                    te[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n            \n                    te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n                    te[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n                    te[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n            \n                    te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n                    te[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n                    te[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n            \n                    return this;\n            \n                },\n            \n                multiplyScalar: function ( s ) {\n            \n                    var te = this.elements;\n            \n                    te[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n                    te[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n                    te[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n            \n                    return this;\n            \n                },\n            \n                determinant: function () {\n            \n                    var te = this.elements;\n            \n                    var a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n                        d = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n                        g = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n            \n                    return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n            \n                },\n            \n                getInverse: function ( matrix, throwOnDegenerate ) {\n            \n                    if ( matrix && matrix.isMatrix4 ) {\n            \n                        console.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\n            \n                    }\n            \n                    var me = matrix.elements,\n                        te = this.elements,\n            \n                        n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n                        n12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n                        n13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n            \n                        t11 = n33 * n22 - n32 * n23,\n                        t12 = n32 * n13 - n33 * n12,\n                        t13 = n23 * n12 - n22 * n13,\n            \n                        det = n11 * t11 + n21 * t12 + n31 * t13;\n            \n                    if ( det === 0 ) {\n            \n                        var msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n            \n                        if ( throwOnDegenerate === true ) {\n            \n                            throw new Error( msg );\n            \n                        } else {\n            \n                            console.warn( msg );\n            \n                        }\n            \n                        return this.identity();\n            \n                    }\n            \n                    var detInv = 1 / det;\n            \n                    te[ 0 ] = t11 * detInv;\n                    te[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n                    te[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n            \n                    te[ 3 ] = t12 * detInv;\n                    te[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n                    te[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n            \n                    te[ 6 ] = t13 * detInv;\n                    te[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n                    te[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n            \n                    return this;\n            \n                },\n            \n                transpose: function () {\n            \n                    var tmp, m = this.elements;\n            \n                    tmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n                    tmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n                    tmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n            \n                    return this;\n            \n                },\n            \n                getNormalMatrix: function ( matrix4 ) {\n            \n                    return this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n            \n                },\n            \n                transposeIntoArray: function ( r ) {\n            \n                    var m = this.elements;\n            \n                    r[ 0 ] = m[ 0 ];\n                    r[ 1 ] = m[ 3 ];\n                    r[ 2 ] = m[ 6 ];\n                    r[ 3 ] = m[ 1 ];\n                    r[ 4 ] = m[ 4 ];\n                    r[ 5 ] = m[ 7 ];\n                    r[ 6 ] = m[ 2 ];\n                    r[ 7 ] = m[ 5 ];\n                    r[ 8 ] = m[ 8 ];\n            \n                    return this;\n            \n                },\n            \n                equals: function ( matrix ) {\n            \n                    var te = this.elements;\n                    var me = matrix.elements;\n            \n                    for ( var i = 0; i < 9; i ++ ) {\n            \n                        if ( te[ i ] !== me[ i ] ) return false;\n            \n                    }\n            \n                    return true;\n            \n                },\n            \n                fromArray: function ( array, offset ) {\n            \n                    if ( offset === undefined ) offset = 0;\n            \n                    for ( var i = 0; i < 9; i ++ ) {\n            \n                        this.elements[ i ] = array[ i + offset ];\n            \n                    }\n            \n                    return this;\n            \n                },\n            \n                toArray: function ( array, offset ) {\n            \n                    if ( array === undefined ) array = [];\n                    if ( offset === undefined ) offset = 0;\n            \n                    var te = this.elements;\n            \n                    array[ offset ] = te[ 0 ];\n                    array[ offset + 1 ] = te[ 1 ];\n                    array[ offset + 2 ] = te[ 2 ];\n            \n                    array[ offset + 3 ] = te[ 3 ];\n                    array[ offset + 4 ] = te[ 4 ];\n                    array[ offset + 5 ] = te[ 5 ];\n            \n                    array[ offset + 6 ] = te[ 6 ];\n                    array[ offset + 7 ] = te[ 7 ];\n                    array[ offset + 8 ] = te[ 8 ];\n            \n                    return array;\n            \n                }\n            \n            } );\n\n            /**\n             * @author bhouston / http://clara.io\n             * @author WestLangley / http://github.com/WestLangley\n             */\n\n            function Box3(min, max) {\n\n                this.min = (min !== undefined) ? min : new Vector3(+Infinity, +Infinity, +Infinity);\n                this.max = (max !== undefined) ? max : new Vector3(-Infinity, -Infinity, -Infinity);\n\n            }\n\n            Object.assign(Box3.prototype, {\n\n                isBox3: true,\n\n                set: function (min, max) {\n\n                    this.min.copy(min);\n                    this.max.copy(max);\n\n                    return this;\n\n                },\n\n                setFromArray: function (array) {\n\n                    var minX = +Infinity;\n                    var minY = +Infinity;\n                    var minZ = +Infinity;\n\n                    var maxX = -Infinity;\n                    var maxY = -Infinity;\n                    var maxZ = -Infinity;\n\n                    for (var i = 0, l = array.length; i < l; i += 3) {\n\n                        var x = array[i];\n                        var y = array[i + 1];\n                        var z = array[i + 2];\n\n                        if (x < minX) minX = x;\n                        if (y < minY) minY = y;\n                        if (z < minZ) minZ = z;\n\n                        if (x > maxX) maxX = x;\n                        if (y > maxY) maxY = y;\n                        if (z > maxZ) maxZ = z;\n\n                    }\n\n                    this.min.set(minX, minY, minZ);\n                    this.max.set(maxX, maxY, maxZ);\n\n                    return this;\n\n                },\n\n                setFromBufferAttribute: function (attribute) {\n\n                    var minX = +Infinity;\n                    var minY = +Infinity;\n                    var minZ = +Infinity;\n\n                    var maxX = -Infinity;\n                    var maxY = -Infinity;\n                    var maxZ = -Infinity;\n\n                    for (var i = 0, l = attribute.count; i < l; i++) {\n\n                        var x = attribute.getX(i);\n                        var y = attribute.getY(i);\n                        var z = attribute.getZ(i);\n\n                        if (x < minX) minX = x;\n                        if (y < minY) minY = y;\n                        if (z < minZ) minZ = z;\n\n                        if (x > maxX) maxX = x;\n                        if (y > maxY) maxY = y;\n                        if (z > maxZ) maxZ = z;\n\n                    }\n\n                    this.min.set(minX, minY, minZ);\n                    this.max.set(maxX, maxY, maxZ);\n\n                    return this;\n\n                },\n\n                setFromPoints: function (points) {\n\n                    this.makeEmpty();\n\n                    for (var i = 0, il = points.length; i < il; i++) {\n\n                        this.expandByPoint(points[i]);\n\n                    }\n\n                    return this;\n\n                },\n\n                setFromCenterAndSize: function () {\n\n                    var v1 = new Vector3();\n\n                    return function setFromCenterAndSize(center, size) {\n\n                        var halfSize = v1.copy(size).multiplyScalar(0.5);\n\n                        this.min.copy(center).sub(halfSize);\n                        this.max.copy(center).add(halfSize);\n\n                        return this;\n\n                    };\n\n                }(),\n\n                setFromObject: function (object) {\n\n                    this.makeEmpty();\n\n                    return this.expandByObject(object);\n\n                },\n\n                clone: function () {\n\n                    return new this.constructor().copy(this);\n\n                },\n\n                copy: function (box) {\n\n                    this.min.copy(box.min);\n                    this.max.copy(box.max);\n\n                    return this;\n\n                },\n\n                makeEmpty: function () {\n\n                    this.min.x = this.min.y = this.min.z = +Infinity;\n                    this.max.x = this.max.y = this.max.z = -Infinity;\n\n                    return this;\n\n                },\n\n                isEmpty: function () {\n\n                    // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n                    return (this.max.x < this.min.x) || (this.max.y < this.min.y) || (this.max.z < this.min.z);\n\n                },\n\n                getCenter: function (optionalTarget) {\n\n                    var result = optionalTarget || new Vector3();\n                    return this.isEmpty() ? result.set(0, 0, 0) : result.addVectors(this.min, this.max).multiplyScalar(0.5);\n\n                },\n\n                getSize: function (optionalTarget) {\n\n                    var result = optionalTarget || new Vector3();\n                    return this.isEmpty() ? result.set(0, 0, 0) : result.subVectors(this.max, this.min);\n\n                },\n\n                expandByPoint: function (point) {\n\n                    this.min.min(point);\n                    this.max.max(point);\n\n                    return this;\n\n                },\n\n                expandByVector: function (vector) {\n\n                    this.min.sub(vector);\n                    this.max.add(vector);\n\n                    return this;\n\n                },\n\n                expandByScalar: function (scalar) {\n\n                    this.min.addScalar(-scalar);\n                    this.max.addScalar(scalar);\n\n                    return this;\n\n                },\n\n                expandByObject: function () {\n\n                    // Computes the world-axis-aligned bounding box of an object (including its children),\n                    // accounting for both the object's, and children's, world transforms\n\n                    var v1 = new Vector3();\n\n                    return function expandByObject(object) {\n\n                        var scope = this;\n\n                        object.updateMatrixWorld(true);\n\n                        object.traverse(function (node) {\n\n                            var i, l;\n\n                            var geometry = node.geometry;\n\n                            if (geometry !== undefined) {\n\n                                if (geometry.isGeometry) {\n\n                                    var vertices = geometry.vertices;\n\n                                    for (i = 0, l = vertices.length; i < l; i++) {\n\n                                        v1.copy(vertices[i]);\n                                        v1.applyMatrix4(node.matrixWorld);\n\n                                        scope.expandByPoint(v1);\n\n                                    }\n\n                                } else if (geometry.isBufferGeometry) {\n\n                                    var attribute = geometry.attributes.position;\n\n                                    if (attribute !== undefined) {\n\n                                        for (i = 0, l = attribute.count; i < l; i++) {\n\n                                            v1.fromBufferAttribute(attribute, i).applyMatrix4(node.matrixWorld);\n\n                                            scope.expandByPoint(v1);\n\n                                        }\n\n                                    }\n\n                                }\n\n                            }\n\n                        });\n\n                        return this;\n\n                    };\n\n                }(),\n\n                containsPoint: function (point) {\n\n                    return point.x < this.min.x || point.x > this.max.x ||\n                        point.y < this.min.y || point.y > this.max.y ||\n                        point.z < this.min.z || point.z > this.max.z ? false : true;\n\n                },\n\n                containsBox: function (box) {\n\n                    return this.min.x <= box.min.x && box.max.x <= this.max.x &&\n                        this.min.y <= box.min.y && box.max.y <= this.max.y &&\n                        this.min.z <= box.min.z && box.max.z <= this.max.z;\n\n                },\n\n                getParameter: function (point, optionalTarget) {\n\n                    // This can potentially have a divide by zero if the box\n                    // has a size dimension of 0.\n\n                    var result = optionalTarget || new Vector3();\n\n                    return result.set(\n                        (point.x - this.min.x) / (this.max.x - this.min.x),\n                        (point.y - this.min.y) / (this.max.y - this.min.y),\n                        (point.z - this.min.z) / (this.max.z - this.min.z)\n                    );\n\n                },\n\n                intersectsBox: function (box) {\n\n                    // using 6 splitting planes to rule out intersections.\n                    return box.max.x < this.min.x || box.min.x > this.max.x ||\n                        box.max.y < this.min.y || box.min.y > this.max.y ||\n                        box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n                },\n\n                intersectsSphere: (function () {\n\n                    var closestPoint = new Vector3();\n\n                    return function intersectsSphere(sphere) {\n\n                        // Find the point on the AABB closest to the sphere center.\n                        this.clampPoint(sphere.center, closestPoint);\n\n                        // If that point is inside the sphere, the AABB and sphere intersect.\n                        return closestPoint.distanceToSquared(sphere.center) <= (sphere.radius * sphere.radius);\n\n                    };\n\n                })(),\n\n                intersectsPlane: function (plane) {\n\n                    // We compute the minimum and maximum dot product values. If those values\n                    // are on the same side (back or front) of the plane, then there is no intersection.\n\n                    var min, max;\n\n                    if (plane.normal.x > 0) {\n\n                        min = plane.normal.x * this.min.x;\n                        max = plane.normal.x * this.max.x;\n\n                    } else {\n\n                        min = plane.normal.x * this.max.x;\n                        max = plane.normal.x * this.min.x;\n\n                    }\n\n                    if (plane.normal.y > 0) {\n\n                        min += plane.normal.y * this.min.y;\n                        max += plane.normal.y * this.max.y;\n\n                    } else {\n\n                        min += plane.normal.y * this.max.y;\n                        max += plane.normal.y * this.min.y;\n\n                    }\n\n                    if (plane.normal.z > 0) {\n\n                        min += plane.normal.z * this.min.z;\n                        max += plane.normal.z * this.max.z;\n\n                    } else {\n\n                        min += plane.normal.z * this.max.z;\n                        max += plane.normal.z * this.min.z;\n\n                    }\n\n                    return (min <= plane.constant && max >= plane.constant);\n\n                },\n\n                clampPoint: function (point, optionalTarget) {\n\n                    var result = optionalTarget || new Vector3();\n                    return result.copy(point).clamp(this.min, this.max);\n\n                },\n\n                distanceToPoint: function () {\n\n                    var v1 = new Vector3();\n\n                    return function distanceToPoint(point) {\n\n                        var clampedPoint = v1.copy(point).clamp(this.min, this.max);\n                        return clampedPoint.sub(point).length();\n\n                    };\n\n                }(),\n\n                getBoundingSphere: function () {\n\n                    var v1 = new Vector3();\n\n                    return function getBoundingSphere(optionalTarget) {\n\n                        var result = optionalTarget || new Sphere();\n\n                        this.getCenter(result.center);\n\n                        result.radius = this.getSize(v1).length() * 0.5;\n\n                        return result;\n\n                    };\n\n                }(),\n\n                intersect: function (box) {\n\n                    this.min.max(box.min);\n                    this.max.min(box.max);\n\n                    // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n                    if (this.isEmpty()) this.makeEmpty();\n\n                    return this;\n\n                },\n\n                union: function (box) {\n\n                    this.min.min(box.min);\n                    this.max.max(box.max);\n\n                    return this;\n\n                },\n\n                applyMatrix4: function () {\n\n                    var points = [\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3(),\n                        new Vector3()\n                    ];\n\n                    return function applyMatrix4(matrix) {\n\n                        // transform of empty box is an empty box.\n                        if (this.isEmpty()) return this;\n\n                        // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n                        points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n                        points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n                        points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n                        points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n                        points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n                        points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n                        points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n                        points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix); // 111\n\n                        this.setFromPoints(points);\n\n                        return this;\n\n                    };\n\n                }(),\n\n                translate: function (offset) {\n\n                    this.min.add(offset);\n                    this.max.add(offset);\n\n                    return this;\n\n                },\n\n                equals: function (box) {\n\n                    return box.min.equals(this.min) && box.max.equals(this.max);\n\n                }\n\n            });\n            \n            CLOUD.Math.Quaternion = Quaternion;\n            CLOUD.Math.Vector3 = Vector3;\n            CLOUD.Math.Vector4 = Vector4;\n            CLOUD.Math.Matrix4 = Matrix4;\n            CLOUD.Math.Matrix3 = Matrix3;\n            CLOUD.Math.Box3 = Box3;\n\n        })();\n    \n    "
}(),function(){s.Workers.WorkerChunk.UtilsChunk="\n\n        (function(){\n\n            function applyMatrix3ToBuffer() {\n\n                var v1 = new CLOUD.Math.Vector3();\n\n                return function applyMatrix3ToBuffer( matrix, array ) {\n\n                    for ( var i = 0, len = array.length; i < len; i += 3 ) {\n\n                        v1.x = array[i + 0];\n                        v1.y = array[i + 1];\n                        v1.z = array[i + 2];\n\n                        v1.applyMatrix3( matrix );\n\n                        array[ i + 0 ] = v1.x;\n                        array[ i + 1 ] = v1.y;\n                        array[ i + 2 ] = v1.z;\n\n                    }\n\n                    return array;\n\n                };\n            }\n\n            function applyMatrix4ToBuffer () {\n\n                var v1 = new CLOUD.Math.Vector3();\n\n                return function applyMatrix4ToBuffer( matrix, array ) {\n\n                    for ( var i = 0, len = array.length; i < len; i += 3 ) {\n\n                        v1.x = array[i + 0];\n                        v1.y = array[i + 1];\n                        v1.z = array[i + 2];\n\n                        v1.applyMatrix4( matrix );\n\n                        array[ i + 0 ] = v1.x;\n                        array[ i + 1 ] = v1.y;\n                        array[ i + 2 ] = v1.z;\n\n                    }\n\n                    return array;\n\n                };\n            }\n\n            function normalizeBuffer(array) {\n                var x, y, z, n;\n\n                for ( var i = 0, il = array.length; i < il; i += 3 ) {\n\n                    x = array[i];\n                    y = array[i + 1];\n                    z = array[i + 2];\n\n                    n = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n                    array[ i + 0 ] = x * n;\n                    array[ i + 1 ] = y * n;\n                    array[ i + 2 ] = z * n;\n\n                }\n            }\n\n            function isMirror(matrixArray) {\n\n                var vx = new CLOUD.Math.Vector3(matrixArray[0], matrixArray[1], matrixArray[2]);\n                var vy = new CLOUD.Math.Vector3(matrixArray[4], matrixArray[5], matrixArray[6]);\n                var vz = new CLOUD.Math.Vector3(matrixArray[8], matrixArray[9], matrixArray[10]);\n\n                var vc = new CLOUD.Math.Vector3().crossVectors(vx, vy);\n                var d = vc.dot(vz);\n\n                if (d < 0.0) {\n                    return true;\n                }\n\n                return false;\n            }\n\n            function mergeBufferAttributes(attributes) {\n\n                var TypedArray;\n                var itemSize;\n                var normalized;\n                var arrayLength = 0;\n            \n                for (var i = 0; i < attributes.length; ++i) {\n            \n                    var attribute = attributes[i];\n            \n                    if (TypedArray === undefined) {\n                        TypedArray = attribute.array.constructor;\n                    }\n                    if (TypedArray !== attribute.array.constructor) {\n                        return null;\n                    }\n            \n                    if (itemSize === undefined) {\n                        itemSize = attribute.itemSize;\n                    }\n                    if (itemSize !== attribute.itemSize) {\n                        return null;\n                    }\n            \n                    if (normalized === undefined) {\n                        normalized = attribute.normalized;\n                    }\n                    if (normalized !== attribute.normalized) {\n                        return null;\n                    }\n            \n                    arrayLength += attribute.array.length;\n            \n                }\n            \n                var array = new TypedArray(arrayLength);\n                var offset = 0;\n            \n                for (var j = 0; j < attributes.length; ++j) {\n            \n                    array.set(attributes[j].array, offset);\n            \n                    offset += attributes[j].array.length;\n            \n                }\n            \n                return {\n                    array: array,\n                    itemSize: itemSize,\n                    normalized: normalized\n                };\n            \n            }\n            \n            function mergeBuffers(buffers, indicesGroup) {\n            \n                var positionList = [];\n                var indexList = [];\n                var indexOffset = 0;\n                var indexTotal = 0; //\n            \n                for (var i = 0; i < buffers.length; ++i) {\n            \n                    positionList.push(buffers[i].position);\n            \n                    var index = buffers[i].index;\n            \n                    if (indexOffset > 0) {\n            \n                        index = {\n                            array: index.array,\n                            itemSize: index.itemSize,\n                            count: index.count,\n                            normalized: index.normalized\n                        };\n            \n                        for (var j = 0; j < index.count; ++j) {\n            \n                            index.array[j * index.itemSize] += indexOffset;\n            \n                        }\n            \n                    }\n            \n                    indexList.push(index);\n                    indexOffset += buffers[i].position.count;\n            \n                    if (indicesGroup[buffers[i].name] === void 0) {\n                        indicesGroup[buffers[i].name] = [];\n                    }\n            \n                    indicesGroup[buffers[i].name].push({\n                        nodeId: buffers[i].nodeId,\n                        indexStart: indexTotal,\n                        indexCount: index.count\n                    });\n                    indexTotal += index.count;\n                }\n            \n                var newIndex = mergeBufferAttributes(indexList);\n                var newPosition = mergeBufferAttributes(positionList);\n            \n                return {\n                    index: newIndex,\n                    position: newPosition\n                };\n            \n            }\n\n            function getCombinedKeyString(keyArray, separator) {\n                separator = separator || '&';\n                return keyArray.join(separator);\n            }\n\n            function splitCombinedKeyString(keySting, separator){\n                separator = separator || '&';\n                return keySting.split(separator);\n            }\n\n            // ArrayBuffer转为字符串，参数为ArrayBuffer对象\n            function ab2str(buf) {\n                return new TextDecoder().decode(new Uint8Array(buf));\n            }\n\n            // 字符串转为ArrayBuffer对象，参数为字符串\n            function str2ab(str){\n                return new TextEncoder().encode(str).buffer;\n            }\n\n            CLOUD.Utils.applyMatrix3ToBuffer = applyMatrix3ToBuffer();\n            CLOUD.Utils.applyMatrix4ToBuffer = applyMatrix4ToBuffer();\n            CLOUD.Utils.normalizeBuffer = normalizeBuffer;\n            CLOUD.Utils.mergeBuffers = mergeBuffers;\n            CLOUD.Utils.isMirror = isMirror;\n            CLOUD.Utils.getCombinedKeyString = getCombinedKeyString;\n            CLOUD.Utils.splitCombinedKeyString = splitCombinedKeyString;\n            CLOUD.Utils.ab2str = ab2str;\n            CLOUD.Utils.str2ab = str2ab;\n\n        })();\n    \n    "}(),function(){s.Workers.WorkerChunk.GeomUtilChunk="\n\n        function getBoxData(idx) {\n\n            // left side\n            var vertexArray = [\n                [-0.5, -0.5, -0.5,\n                    -0.5, -0.5, 0.5,\n                    -0.5, 0.5, -0.5,\n                    -0.5, 0.5, 0.5\n                ],\n\n                // down side\n                [-0.5, -0.5, -0.5,\n                    -0.5, -0.5, 0.5,\n                    0.5, -0.5, -0.5,\n                    0.5, -0.5, 0.5\n                ],\n\n                // back side\n                [-0.5, -0.5, -0.5,\n                    -0.5, 0.5, -0.5,\n                    0.5, -0.5, -0.5,\n                    0.5, 0.5, -0.5\n                ],\n\n                // front side\n                [-0.5, -0.5, 0.5,\n                    -0.5, 0.5, 0.5,\n                    0.5, -0.5, 0.5,\n                    0.5, 0.5, 0.5\n                ],\n\n                // up side\n                [-0.5, 0.5, -0.5,\n                    -0.5, 0.5, 0.5,\n                    0.5, 0.5, -0.5,\n                    0.5, 0.5, 0.5\n                ],\n\n                // right side\n                [0.5, -0.5, -0.5,\n                    0.5, -0.5, 0.5,\n                    0.5, 0.5, -0.5,\n                    0.5, 0.5, 0.5\n                ]\n            ];\n\n            var indexArray = [\n                // left\n                [0, 1, 2, 3, 2, 1],\n                // down\n                [2, 1, 0, 1, 2, 3],\n                // back\n                [0, 1, 2, 3, 2, 1],\n                // front\n                [2, 1, 0, 1, 2, 3],\n                // up\n                [0, 1, 2, 3, 2, 1],\n                // right\n                [2, 1, 0, 1, 2, 3]\n            ];\n\n            var normalArray = [\n                [],\n                [],\n                [],\n                [],\n                [],\n                []\n            ];\n            for (var j = 0; j < 4; ++j) {\n                normalArray[0].push(-1.0, 0.0, 0.0);\n            }\n            for (var j = 0; j < 4; ++j) {\n                normalArray[1].push(0.0, -1.0, 0.0);\n            }\n            for (var j = 0; j < 4; ++j) {\n                normalArray[2].push(0.0, 0.0, -1.0);\n            }\n            for (var j = 0; j < 4; ++j) {\n                normalArray[3].push(0.0, 0.0, 1.0);\n            }\n            for (var j = 0; j < 4; ++j) {\n                normalArray[4].push(0.0, 1.0, 0.0);\n            }\n            for (var j = 0; j < 4; ++j) {\n                normalArray[5].push(1.0, 0.0, 0.0);\n            }\n\n            var uvArray = [\n                [],\n                [],\n                [],\n                [],\n                [],\n                []\n            ];\n            uvArray[0] = uvArray[2] = uvArray[4] = [-0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5];\n            //改变贴图上下的方向\n            uvArray[1] = uvArray[3] = uvArray[5] = [-0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5];\n\n            return {\n                vertex: vertexArray[idx],\n                normal: normalArray[idx],\n                uv: uvArray[idx],\n                index: indexArray[idx]\n            };\n\n        }\n\n        function getPipeData(num_edges) {\n\n            if (num_edges === undefined || num_edges < 8)\n                num_edges = 8;\n\n            if (num_edges > 256)\n                num_edges = 256;\n\n            var PI = 3.14159265357;\n            var PIPE_SIZE = 1.0;\n            var PIPE_SIZE_HALF = PIPE_SIZE / 2.0;\n\n            var num_vertices = num_edges * 4 + 2;\n            var num_indices = (num_edges * 4 - 4) * 3;\n            var num_circle = num_edges + 1;\n\n            var step_len = 1.0 / num_edges;\n            var step_angle = PI * 2.0 / num_edges;\n            var i, n;\n\n            // ini circle buffer\n            var circleArray = [];\n            for (i = 0; i < num_edges; ++i) {\n                circleArray.push(PIPE_SIZE_HALF * Math.cos(i * step_angle));\n                circleArray.push(PIPE_SIZE_HALF * Math.sin(i * step_angle));\n            }\n            circleArray.push(PIPE_SIZE_HALF);\n            circleArray.push(0.0);\n\n            // add vertices\n            var vertexArray = [];\n            n = num_circle * 2;\n            for (i = 0; i < n; i += 2) {\n                vertexArray.push(circleArray[i]);\n                vertexArray.push(circleArray[i + 1]);\n                vertexArray.push(PIPE_SIZE_HALF);\n            }\n            for (i = 0; i < n; i += 2) {\n                vertexArray.push(circleArray[i]);\n                vertexArray.push(circleArray[i + 1]);\n                vertexArray.push(-PIPE_SIZE_HALF);\n            }\n\n            n = num_edges * 2;\n            for (i = 0; i < n; i += 2) {\n                vertexArray.push(circleArray[i]);\n                vertexArray.push(circleArray[i + 1]);\n                vertexArray.push(PIPE_SIZE_HALF);\n            }\n            for (i = n; i > 0; i -= 2) {\n                vertexArray.push(circleArray[i]);\n                vertexArray.push(circleArray[i + 1]);\n                vertexArray.push(-PIPE_SIZE_HALF);\n            }\n\n            // add indices\n            var indexArray = [];\n            var len_edges = num_edges + 1;\n            for (i = 0; i < num_edges; ++i) {\n                indexArray.push(i);\n                indexArray.push(i + len_edges);\n                indexArray.push(i + 1);\n\n                indexArray.push(i + 1);\n                indexArray.push(i + len_edges);\n                indexArray.push(i + len_edges + 1);\n            }\n\n            var idx_s = num_circle * 2;\n            for (i = 1; i < num_edges - 1; ++i) {\n                indexArray.push(idx_s);\n                indexArray.push(idx_s + i);\n                indexArray.push(idx_s + i + 1);\n            }\n\n            idx_s = idx_s + num_edges;\n            for (i = 1; i < num_edges - 1; ++i) {\n                indexArray.push(idx_s);\n                indexArray.push(idx_s + i);\n                indexArray.push(idx_s + i + 1);\n            }\n\n            // add uv\n            var uvArray = [];\n            for (i = num_edges; i >= 0; --i) {\n                uvArray.push(i * step_len - PIPE_SIZE_HALF);\n                uvArray.push(-PIPE_SIZE_HALF);\n            }\n            for (i = num_edges; i >= 0; --i) {\n                uvArray.push(i * step_len - PIPE_SIZE_HALF);\n                uvArray.push(PIPE_SIZE_HALF);\n            }\n\n            n = num_edges * 2;\n            for (i = 0; i < n; i += 2) {\n                uvArray.push(circleArray[i]);\n                uvArray.push(circleArray[i + 1]);\n            }\n            for (i = n; i > 0; i -= 2) {\n                uvArray.push(circleArray[i]);\n                uvArray.push(circleArray[i + 1]);\n            }\n\n            // add normals\n            n = num_vertices * 3;\n            var normalArray = [];\n            for (i = 0; i < n; ++i) {\n                normalArray.push(0.0);\n            }\n\n            var vA, vB, vC;\n            var pA = new CLOUD.Math.Vector3(),\n                pB = new CLOUD.Math.Vector3(),\n                pC = new CLOUD.Math.Vector3();\n            var cb = new CLOUD.Math.Vector3(),\n                ab = new CLOUD.Math.Vector3();\n            for (i = 0; i < num_indices; i += 3) {\n                vA = indexArray[i] * 3;\n                vB = indexArray[i + 1] * 3;\n                vC = indexArray[i + 2] * 3;\n\n                pA.fromArray(vertexArray, vA);\n                pB.fromArray(vertexArray, vB);\n                pC.fromArray(vertexArray, vC);\n\n                cb.subVectors(pC, pB);\n                ab.subVectors(pA, pB);\n                cb.cross(ab);\n\n                normalArray[vA] += cb.x;\n                normalArray[vA + 1] += cb.y;\n                normalArray[vA + 2] += cb.z;\n\n                normalArray[vB] += cb.x;\n                normalArray[vB + 1] += cb.y;\n                normalArray[vB + 2] += cb.z;\n\n                normalArray[vC] += cb.x;\n                normalArray[vC + 1] += cb.y;\n                normalArray[vC + 2] += cb.z;\n            }\n\n            var vector = new CLOUD.Math.Vector3();\n            n = num_vertices * 3;\n            for (i = 0; i < n; i += 3) {\n                vector.fromArray(normalArray, i);\n                vector.normalize();\n                normalArray[i] = vector.x;\n                normalArray[i + 1] = vector.y;\n                normalArray[i + 2] = vector.z;\n            }\n\n            return {\n                vertex: vertexArray,\n                normal: normalArray,\n                uv: uvArray,\n                index: indexArray,\n                edges: num_edges\n            };\n        }    \n\n        function getBoxMBuffer() {\n\n            var j, jLen;\n            var vertex = [];\n            var normal = [];\n            var index = [];\n            var indexOffset = 0;\n\n            for (var i = 0; i < 6; ++i) {\n                var boxData = getBoxData(i);\n                for (j = 0, jLen = boxData.vertex.length; j < jLen; j++) {\n                    vertex.push(boxData.vertex[j]);\n                }\n\n                for (j = 0, jLen = boxData.index.length; j < jLen; j++) {\n                    index.push(boxData.index[j] + indexOffset);\n                }\n                indexOffset += boxData.vertex.length / 3;\n\n                for (j = 0, jLen = boxData.normal.length; j < jLen; j++) {\n                    normal.push(boxData.normal[j]);\n                }\n            }\n\n            return function getBoxMBuffer(uvMatricesArrayBuffer) {\n\n                var uv = null;\n\n                if (uvMatricesArrayBuffer) {\n                    var uvMatrix = new CLOUD.Math.Matrix3();\n                    var uvTmp = new CLOUD.Math.Vector3();\n                    uv = [];\n                    for (var i = 0; i < 6; ++i) {\n                        var data = getBoxData(i);\n                        uvMatrix.set(uvMatricesArrayBuffer[i * 6], uvMatricesArrayBuffer[i * 6 + 2], uvMatricesArrayBuffer[i * 6 + 4],\n                            uvMatricesArrayBuffer[i * 6 + 1], uvMatricesArrayBuffer[i * 6 + 3], uvMatricesArrayBuffer[i * 6 + 5],\n                            0, 0, 1.0);\n                        for (var j = 0, jLen = data.uv.length; j < jLen; j += 2) {\n                            uvTmp.set(data.uv[j], data.uv[j + 1], 1.0);\n                            uvTmp.applyMatrix3(uvMatrix);\n                            uv.push(uvTmp.x);\n                            uv.push(uvTmp.y);\n                        }\n                    }\n                }\n\n                return {\n                    vertex: vertex,\n                    normal: normal,\n                    uv: uv,\n                    index: index\n                };\n            }\n        }\n\n        function getPipeMBuffer() {\n\n            var data2 = getPipeData(32);\n            var edges = data2.edges;\n            var vertex = data2.vertex;\n            var normal = data2.normal;\n            var index = data2.index;\n\n            return function getPipeMBuffer(uvMatricesArrayBuffer) {\n\n                var uv = null;\n                var hasUV = (uvMatricesArrayBuffer && uvMatricesArrayBuffer.length === 18) ? true : false;\n\n                if (hasUV) {\n                    uv = [];\n                    var matrices = [];\n                    for (var i = 0, len = uvMatricesArrayBuffer.length / 6; i < len; i++) {\n                        var uvMatrix = new CLOUD.Math.Matrix3();\n                        uvMatrix.set(\n                            uvMatricesArrayBuffer[i * 6], uvMatricesArrayBuffer[i * 6 + 2], uvMatricesArrayBuffer[i * 6 + 4],\n                            uvMatricesArrayBuffer[i * 6 + 1], uvMatricesArrayBuffer[i * 6 + 3], uvMatricesArrayBuffer[i * 6 + 5],\n                            0, 0, 1.0);\n                        matrices.push(uvMatrix);\n                    }\n\n                    // Remark：这里又有一次调用???\n                    var data = getPipeData(32); \n                    var uvNum1 = (edges + 1) * 4; //edges = 8时为36\n                    var uvNum2 = uvNum1 + edges * 2; //edges = 8时为52\n                    var uvTmp = new CLOUD.Math.Vector3();\n                    for (var j = 0, jLen = data.uv.length; j < jLen; j += 2) {\n                        uvTmp.set(data.uv[j], data.uv[j + 1], 1.0);\n                        if (j < uvNum1) {\n                            uvTmp.applyMatrix3(matrices[0]);\n                        } else if (j < uvNum2) {\n                            uvTmp.applyMatrix3(matrices[1]);\n                        } else {\n                            uvTmp.applyMatrix3(matrices[2]);\n                        }\n                        uv.push(uvTmp.x);\n                        uv.push(uvTmp.y);\n                    }\n                }\n\n                return {\n                    vertex: vertex,\n                    normal: normal,\n                    uv: uv,\n                    index: index\n                };\n            }\n        }\n\n        CLOUD.GeomUtil.getBoxMBuffer = getBoxMBuffer();\n        CLOUD.GeomUtil.getPipeMBuffer = getPipeMBuffer();\n    \n    "}(),function(){
s.Workers.WorkerChunk.SceneReaderChunk="\n\n        (function () {\n\n            /**\n             * @author muwj 2016/12/15\n             */\n\n            function SceneHeader(buffer) {\n\n                var header = new Uint32Array(buffer, 0, 11);\n\n                this.blockId = header[0];\n                this.cellCount = header[1];\n                this.itemCount = header[2];\n                this.matrixCount = header[3];\n                this.geomBuffSize = header[4];\n                this.layerBuffSize = header[5];\n                this.cellOffset = header[6];\n                this.itemOffset = header[7];\n                this.matrixOffset = header[8];\n                this.geomOffset = header[9];\n                this.layerOffset = header[10];\n\n                var bbox = new Float32Array(buffer, 4 * 11, 6);\n                this.boundingBox = new CLOUD.Math.Box3(\n                    new CLOUD.Math.Vector3(bbox[0], bbox[1], bbox[2]),\n                    new CLOUD.Math.Vector3(bbox[3], bbox[4], bbox[5]));\n\n                header = null;\n                bbox = null;\n            }\n\n            function Cell(buffer, offset) {\n\n                var cell_i = new Int32Array(buffer, offset, 5);\n\n                this.cellId = cell_i[0];\n                this.depth = cell_i[1];\n                this.itemIndex = cell_i[2];\n                this.itemCount = cell_i[3];\n\n                this.layerType = cell_i[4];\n                this.layerSize = new Int32Array(buffer, offset + 5 * 4, 8);\n                this.layerOffset = new Int32Array(buffer, offset + (5 + 8) * 4, 8);\n\n                var bbox = new Float32Array(buffer, offset + (5 + 8 + 8) * 4, 6);\n                this.boundingBox = new CLOUD.Math.Box3(\n                    new CLOUD.Math.Vector3(bbox[0], bbox[1], bbox[2]),\n                    new CLOUD.Math.Vector3(bbox[3], bbox[4], bbox[5]));\n\n                cell_i = null;\n                bbox = null;\n            }\n\n            function Item(buffer, offset) {\n\n                var item_i = new Int32Array(buffer, offset, 7);\n\n                this.ItemId = item_i[0];\n                this.originalId = item_i[1];\n                this.materialId = item_i[2];\n                this.userDataId = item_i[3];\n                this.matrixId = item_i[4];\n                this.type = item_i[5];\n                this.toData = item_i[6];\n\n                var bbox = new Float32Array(buffer, offset + 4 * 7, 6);\n                this.boundingBox = new CLOUD.Math.Box3(\n                    new CLOUD.Math.Vector3(bbox[0], bbox[1], bbox[2]),\n                    new CLOUD.Math.Vector3(bbox[3], bbox[4], bbox[5]));\n\n                item_i = null;\n                bbox = null;\n            }\n\n            function Matrix(buffer, offset) {\n\n                var matrixData = new Float32Array(buffer, offset, 4 * 4);\n                this.matrix = new CLOUD.Math.Matrix4().fromArray(matrixData);\n                matrixData = null;\n            }\n\n            function GeomPipe(buffer, offset) {\n\n                var geomData = new Float32Array(buffer, offset, 8);\n\n                this.startPt = new CLOUD.Math.Vector3(geomData[0], geomData[1], geomData[2]);\n                this.endPt = new CLOUD.Math.Vector3(geomData[3], geomData[4], geomData[5]);\n                this.radius = geomData[6];\n                this.thickness = geomData[7];\n\n                geomData = null;\n            }\n\n            function SceneReader(buffer) {\n\n                this.header = new SceneHeader(buffer);\n\n                this.cellSize = 4 * (5 + 8 + 8 + 6);\n                this.itemSize = 4 * 13;\n                this.matrixSize = 4 * 16;\n                this.maxSize = 4 * 256;\n                this.boxUvSize = 36;\n                this.pipeUvSize = 18;\n\n                this.cellBuffer = buffer.slice(this.header.cellOffset, this.header.cellOffset + this.header.cellCount * this.cellSize);\n                this.itemBuffer = buffer.slice(this.header.itemOffset, this.header.itemOffset + this.header.itemCount * this.itemSize);\n                this.matrixBuffer = buffer.slice(this.header.matrixOffset, this.header.matrixOffset + this.header.matrixCount * this.matrixSize);\n                this.geomBuffer = buffer.slice(this.header.geomOffset, this.header.geomOffset + this.header.geomBuffSize);\n                this.layerBuffer = buffer.slice(this.header.layerOffset, this.header.layerOffset + this.header.layerBuffSize);\n\n                // for data reading\n                this.matr_cur_id = -1;\n                this.pt_cell_min = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n                this.pt_cell_max = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n                this.pt_item_min = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n                this.pt_item_max = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n\n                var tmp_buffer = new ArrayBuffer(this.maxSize);\n                this.cell_cur = new Cell(tmp_buffer, 0);\n                this.item_cur = new Item(tmp_buffer, 0);\n                this.matr_cur = new Matrix(tmp_buffer, 0);\n                this.pipe_cur = new GeomPipe(tmp_buffer, 0);\n\n                this.cell_cur.boundingBox.set(this.pt_cell_min, this.pt_cell_max);\n                this.item_cur.boundingBox.set(this.pt_item_min, this.pt_item_max);\n            }\n\n            SceneReader.prototype = {\n\n                constructor: SceneReader,\n\n                getCellMpks: function (index) {\n\n                    if (index >= 0 && index < this.header.cellCount) {\n                        var src = [];\n                        var cell = this.getCellInfo(index);\n                        for (var i = cell.itemIndex; i < cell.itemCount; ++i) {\n                            var item = this.getItemInfo(i);\n                            if (item.type === 1) { // mesh\n\n                                var blockId = this.getMpkID(item.toData);\n                                src.push(blockId);\n                            }\n                        }\n\n                        var key = {};\n                        var dist = [];\n                        for (var j = 0; j < src.length; ++j) {\n                            if (!key[src[j]]) {\n                                key[src[j]] = true;\n                                dist.push(src[j]);\n                            }\n                        }\n                        return dist;\n                    }\n                },\n\n                getCell: function (index) {\n\n                    if (index >= 0 && index < this.header.cellCount) {\n                        return new Cell(this.cellBuffer, index * this.cellSize);\n                    }\n                },\n\n                getItem: function (index) {\n\n                    if (index >= 0 && index < this.header.itemCount) {\n                        return new Item(this.itemBuffer, index * this.itemSize);\n                    }\n                },\n\n                getMatrix: function (index) {\n\n                    if (index >= 0 && index < this.header.matrixCount) {\n                        return new Matrix(this.matrixBuffer, index * this.matrixSize);\n                    }\n                },\n\n                getGeomPipe: function (offset) {\n\n                    if (offset >= 0 && offset < this.header.geomBuffSize) {\n                        return new GeomPipe(this.geomBuffer, offset);\n                    }\n                },\n\n                getCellInfo: function (index) {\n\n                    if (index >= 0 && index < this.header.cellCount) {\n\n                        var data_i = new Int32Array(this.cellBuffer, index * this.cellSize, 5);\n                        this.cell_cur.cellId = data_i[0];\n                        this.cell_cur.depth = data_i[1];\n                        this.cell_cur.itemIndex = data_i[2];\n                        this.cell_cur.itemCount = data_i[3];\n\n                        this.cell_cur.layerType = data_i[4];\n                        this.cell_cur.layerSize = new Int32Array(this.cellBuffer, index * this.cellSize + 5 * 4, 8);\n                        this.cell_cur.layerOffset = new Int32Array(this.cellBuffer, index * this.cellSize + (5 + 8) * 4, 8);\n\n                        var data_f = new Float32Array(this.cellBuffer, index * this.cellSize + (5 + 8 + 8) * 4, 6);\n                        this.pt_cell_min.set(data_f[0], data_f[1], data_f[2]);\n                        this.pt_cell_max.set(data_f[3], data_f[4], data_f[5]);\n                        this.cell_cur.boundingBox.set(this.pt_cell_min, this.pt_cell_max);\n\n                        return this.cell_cur;\n                    }\n                },\n\n                getItemInfo: function (index) {\n\n                    if (index >= 0 && index < this.header.itemCount) {\n\n                        var data_i = new Int32Array(this.itemBuffer, index * this.itemSize, 7);\n                        this.item_cur.ItemId = data_i[0];\n                        this.item_cur.originalId = data_i[1];\n                        this.item_cur.materialId = data_i[2];\n                        this.item_cur.userDataId = data_i[3];\n                        this.item_cur.matrixId = data_i[4];\n                        this.item_cur.type = data_i[5];\n                        this.item_cur.toData = data_i[6];\n\n                        var data_f = new Float32Array(this.itemBuffer, index * this.itemSize + 4 * 7, 6);\n                        this.pt_item_min.set(data_f[0], data_f[1], data_f[2]);\n                        this.pt_item_max.set(data_f[3], data_f[4], data_f[5]);\n                        this.item_cur.boundingBox.set(this.pt_item_min, this.pt_item_max);\n\n                        return this.item_cur;\n                    }\n                },\n\n                getMatrixInfo: function (index) {\n\n                    if (index == this.matr_cur_id) {\n                        return this.matr_cur;\n                    }\n\n                    if (index >= 0 && index < this.header.matrixCount) {\n\n                        var data = new Float32Array(this.matrixBuffer, index * this.matrixSize, 4 * 4);\n                        this.matr_cur.matrix.fromArray(data);\n\n                        this.matr_cur_id = index;\n                        return this.matr_cur;\n                    }\n                },\n\n                getGeomPipeInfo: function (offset) {\n\n                    if (offset >= 0 && offset < this.header.geomBuffSize) {\n\n                        var data = new Float32Array(this.geomBuffer, offset, 8);\n                        this.pipe_cur.startPt.set(data[0], data[1], data[2]);\n                        this.pipe_cur.endPt.set(data[3], data[4], data[5]);\n                        this.pipe_cur.radius = data[6];\n                        this.pipe_cur.thickness = data[7];\n\n                        return this.pipe_cur;\n                    }\n                },\n\n                getGeomBoxUvInfo: function (offset) {\n\n                    if (offset >= 0 && (offset + this.boxUvSize * 4) <= this.header.geomBuffSize) {\n\n                        return new Float32Array(this.geomBuffer, offset, this.boxUvSize);\n                    }\n                },\n\n                getGeomPipeUvInfo: function (offset) {\n\n                    if (offset >= 0 && (offset + this.pipeUvSize * 4) <= this.header.geomBuffSize) {\n\n                        return new Float32Array(this.geomBuffer, offset, this.pipeUvSize);\n                    }\n                },\n\n                getLayerInfo: function (offset, size) {\n\n                    if (offset >= 0 && (offset + size) <= this.header.layerBuffSize) {\n\n                        var data = new Uint32Array(this.layerBuffer, offset, size);\n                        return this.data;\n                    }\n                },\n\n                getMpkID: function (mesh_id) {\n\n                    return parseInt(mesh_id / 65536);\n                },\n\n                getMeshIndex: function (mesh_id) {\n\n                    return parseInt(mesh_id % 65536);\n                }\n            };\n\n            CLOUD.Reader.SceneHeader = SceneHeader;\n            CLOUD.Reader.Cell = Cell;\n            CLOUD.Reader.Item = Item;\n            CLOUD.Reader.Matrix = Matrix;\n            CLOUD.Reader.GeomPipe = GeomPipe;\n            CLOUD.Reader.SceneReader = SceneReader;\n            // 模型数据项类型\n            CLOUD.Reader.EnumNodeItemType = {\n                SYMBOL: 0,\n                MESH: 1,\n                TUBE: 2,\n                PIPE: 3,\n                BOX: 4,\n                BOX_M: 5,\n                PIPE_M: 6,\n                MESH_REF: 7,\n                LINE: 8\n            };\n\n        })();\n\n    "}(),function(){s.Workers.WorkerChunk.SymbolReaderChunk="\n\n        /**\n         * @author muwj 2016/12/29\n         */\n\n        CLOUD.Reader.SymbolHeader = function (buffer) {\n\n            var header = new Uint32Array(buffer, 0, 9);\n\n            this.blockId = header[0];\n            this.symbolCount = header[1];\n            this.itemCount = header[2];\n            this.matrixCount = header[3];\n            this.geomBuffSize = header[4];\n            this.symbolOffset = header[5];\n            this.itemOffset = header[6];\n            this.matrixOffset = header[7];\n            this.geomOffset = header[8];\n\n            var bbox = new Float32Array(buffer, 4 * 9, 6);\n            this.boundingBox = new CLOUD.Math.Box3(\n                new CLOUD.Math.Vector3(bbox[0], bbox[1], bbox[2]),\n                new CLOUD.Math.Vector3(bbox[3], bbox[4], bbox[5]));\n\n            header = null;\n            bbox = null;\n        };\n\n        CLOUD.Reader.Symbol = function (buffer, offset) {\n\n            var item_i = new Int32Array(buffer, offset, 3);\n\n            this.symbolId = item_i[0];\n            this.itemIndex = item_i[1];\n            this.itemCount = item_i[2];\n\n            var bbox = new Float32Array(buffer, offset + 4 * 3, 6);\n            this.boundingBox = new CLOUD.Math.Box3(\n                new CLOUD.Math.Vector3(bbox[0], bbox[1], bbox[2]),\n                new CLOUD.Math.Vector3(bbox[3], bbox[4], bbox[5]));\n\n            item_i = null;\n            bbox = null;\n        };\n\n        CLOUD.Reader.SymbolReader = function (buffer) {\n\n            this.header = new CLOUD.Reader.SymbolHeader(buffer);\n\n            this.symbolSize = 4 * 9;\n            this.itemSize = 4 * 13;\n            this.matrixSize = 4 * 16;\n            this.geomSize = 4 * 8;\n            this.maxSize = 4 * 64;\n            this.boxUvSize = 36;\n            this.pipeUvSize = 18;\n\n            this.symbolBuffer = buffer.slice(this.header.symbolOffset, this.header.symbolOffset + this.header.symbolCount * this.symbolSize);\n            this.itemBuffer = buffer.slice(this.header.itemOffset, this.header.itemOffset + this.header.itemCount * this.itemSize);\n            this.matrixBuffer = buffer.slice(this.header.matrixOffset, this.header.matrixOffset + this.header.matrixCount * this.matrixSize);\n            this.geomBuffer = buffer.slice(this.header.geomOffset, this.header.geomOffset + this.header.geomBuffSize);\n\n            // for data reading\n            this.matr_cur_id = -1;\n\n            this.pt_symb_min = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n            this.pt_symb_max = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n            this.pt_item_min = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n            this.pt_item_max = new CLOUD.Math.Vector3(0.0, 0.0, 0.0);\n\n            var tmp_buffer = new ArrayBuffer(this.maxSize);\n            this.symb_cur = new CLOUD.Reader.Symbol(tmp_buffer, 0);\n            this.item_cur = new CLOUD.Reader.Item(tmp_buffer, 0);\n            this.matr_cur = new CLOUD.Reader.Matrix(tmp_buffer, 0);\n            this.pipe_cur = new CLOUD.Reader.GeomPipe(tmp_buffer, 0);\n\n            this.symb_cur.boundingBox.set(this.pt_symb_min, this.pt_symb_max);\n            this.item_cur.boundingBox.set(this.pt_item_min, this.pt_item_max);\n        };\n\n        CLOUD.Reader.SymbolReader.prototype = {\n\n            constructor: CLOUD.Reader.SymbolReader,\n\n            getSymbol: function (index) {\n\n                if (index >= 0 && index < this.header.symbolCount) {\n                    return new CLOUD.Reader.Symbol(this.symbolBuffer, index * this.symbolSize);\n                }\n            },\n\n            getItem: function (index) {\n\n                if (index >= 0 && index < this.header.itemCount) {\n                    return new CLOUD.Reader.Item(this.itemBuffer, index * this.itemSize);\n                }\n            },\n\n            getMatrix: function (index) {\n\n                if (index >= 0 && index < this.header.matrixCount) {\n                    return new CLOUD.Math.Matrix(this.matrixBuffer, index * this.matrixSize);\n                }\n            },\n\n            getGeomPipe: function (offset) {\n\n                if (offset >= 0 && index < this.header.geomBuffSize) {\n                    return new CLOUD.Reader.GeomPipe(this.geomBuffer, offset);\n                }\n            },\n\n            getSymbolInfo: function (index) {\n\n                if (index >= 0 && index < this.header.symbolCount) {\n\n                    var item_i = new Int32Array(this.symbolBuffer, index * this.symbolSize, 3);\n                    this.symb_cur.symbolId = item_i[0];\n                    this.symb_cur.itemIndex = item_i[1];\n                    this.symb_cur.itemCount = item_i[2];\n\n                    var data_f = new Float32Array(this.symbolBuffer, index * this.symbolSize + 4 * 3, 6);\n                    this.pt_symb_min.set(data_f[0], data_f[1], data_f[2]);\n                    this.pt_symb_max.set(data_f[3], data_f[4], data_f[5]);\n                    this.symb_cur.boundingBox.set(this.pt_symb_min, this.pt_symb_max);\n\n                    return this.symb_cur;\n                }\n            },\n\n            getItemInfo: function (index) {\n\n                if (index >= 0 && index < this.header.itemCount) {\n\n                    var data_i = new Int32Array(this.itemBuffer, index * this.itemSize, 7);\n                    this.item_cur.ItemId = data_i[0];\n                    this.item_cur.originalId = data_i[1];\n                    this.item_cur.materialId = data_i[2];\n                    this.item_cur.userDataId = data_i[3];\n                    this.item_cur.matrixId = data_i[4];\n                    this.item_cur.type = data_i[5];\n                    this.item_cur.toData = data_i[6];\n\n                    var data_f = new Float32Array(this.itemBuffer, index * this.itemSize + 4 * 7, 6);\n                    this.pt_item_min.set(data_f[0], data_f[1], data_f[2]);\n                    this.pt_item_max.set(data_f[3], data_f[4], data_f[5]);\n                    this.item_cur.boundingBox.set(this.pt_item_min, this.pt_item_max);\n\n                    return this.item_cur;\n                }\n            },\n\n            getMatrixInfo: function (index) {\n\n                if (index == this.matr_cur_id) {\n                    return this.matr_cur;\n                }\n\n                if (index >= 0 && index < this.header.matrixCount) {\n\n                    var data = new Float32Array(this.matrixBuffer, index * this.matrixSize, 4 * 4);\n                    this.matr_cur.matrix.fromArray(data);\n\n                    this.matr_cur_id = index;\n                    return this.matr_cur;\n                }\n            },\n\n            getGeomPipeInfo: function (offset) {\n\n                if (offset >= 0 && offset < this.header.geomBuffSize) {\n\n                    var data = new Float32Array(this.geomBuffer, offset, 8);\n\n                    this.pipe_cur.startPt.set(data[0], data[1], data[2]);\n                    this.pipe_cur.endPt.set(data[3], data[4], data[5]);\n                    this.pipe_cur.radius = data[6];\n                    this.pipe_cur.thickness = data[7];\n\n                    return this.pipe_cur;\n                }\n            },\n\n            getGeomBoxUvInfo: function (offset) {\n\n                if (offset >= 0 && (offset + this.boxUvSize * 4) <= this.header.geomBuffSize) {\n\n                    return new Float32Array(this.geomBuffer, offset, this.boxUvSize);\n                }\n            },\n\n            getGeomPipeUvInfo: function (offset) {\n\n                if (offset >= 0 && (offset + this.pipeUvSize * 4) <= this.header.geomBuffSize) {\n\n                    return new Float32Array(this.geomBuffer, offset, this.pipeUvSize);\n                }\n            },\n\n            getMpkID: function (mesh_id) {\n\n                return parseInt(mesh_id / 65536);\n            },\n\n            getMeshIndex: function (mesh_id) {\n\n            }\n        };\n    \n    "}(),function(){
s.Workers.WorkerChunk.SceneParseChunk="\n\n        function parseItemData(sceneReader, symbolReader) {\n\n            var nodeMap = {};\n\n            for (var i = 0, iLen = sceneReader.header.cellCount; i < iLen; ++i) {\n\n                var cell = sceneReader.getCellInfo(i);\n\n                for (var j = cell.itemIndex; j < cell.itemCount; ++j) {\n\n                    readItemData(sceneReader, symbolReader, j, i, nodeMap);\n\n                }\n            }\n\n            return nodeMap;\n\n        }\n\n        /**\n         * 读取mesh信息或symbol信息\n         *\n         * @param {Object} sceneReader - 场景reader\n         * @param {Number} idx - 项目索引\n         * @param {Number} cellId - 空间cell id\n         */\n        function readItemData(sceneReader, symbolReader, idx, cellId, nodeMap) {\n\n            var item = sceneReader.getItemInfo(idx);\n\n            if (item === void 0) {\n                return;\n            }\n\n            if (item.type === CLOUD.Reader.EnumNodeItemType.SYMBOL) {\n                readSymbolInfo(sceneReader, symbolReader, cellId, item, nodeMap);\n            } else {\n                readMeshInfo(sceneReader, cellId, item, null, nodeMap);\n            }\n\n        }\n\n        /**\n         * 读取symbol信息\n         *\n         * @param {Object} sceneReader - 场景reader\n         * @param {Number} cellId - 空间cell id\n         * @param {Object} item - ItemInfo\n         */\n        function readSymbolInfo(sceneReader, symbolReader, cellId, item, nodeMap) {\n\n            // var symbolReader = this.symbolReader;\n            if (!symbolReader) {\n                return;\n            }\n\n            var symbolCount = symbolReader.header.symbolCount;\n            var id = item.toData;\n\n            if (id < 0 || id > symbolCount) {\n                return;\n            }\n\n            var matrixParent = sceneReader.getMatrixInfo(item.matrixId).matrix.clone();\n            var itemParent = {\n                matrix: matrixParent,\n                ItemId: item.ItemId,\n                originalId: item.originalId,\n                userDataId: item.userDataId,\n                materialId: item.materialId\n            };\n\n            var symbolCurrent = symbolReader.getSymbolInfo(id);\n\n            for (var i = symbolCurrent.itemIndex; i < symbolCurrent.itemCount; ++i) {\n\n                var symbolItem = symbolReader.getItemInfo(i);\n\n                if (symbolItem.type === CLOUD.Reader.EnumNodeItemType.SYMBOL) {\n                    continue;\n                }\n\n                readMeshInfo(symbolReader, cellId, symbolItem, itemParent, nodeMap);\n            }\n\n            matrixParent = null;\n            itemParent = null;\n        }\n\n        /**\n         * 读取mesh信息\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Number} cellId - 空间cell id\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function readMeshInfo(reader, cellId, item, itemParent, nodeMap) {\n\n            var userDataId;\n            var originalId;\n            var mtlId;\n\n            if (itemParent === null) {\n                userDataId = item.userDataId;\n                originalId = item.originalId;\n                mtlId = item.materialId;\n            } else { // itemParent存在, 表示读取symbol数据\n                userDataId = itemParent.userDataId;\n                originalId = itemParent.originalId;\n                // BIMFACEDM-2599\n                // symbol instance's material id: exist(>=0) or non-exist(-1)\n                // if symbol instance get own material, all child element of symbol use instance'\n                // material, else use child's own material\n                mtlId = (itemParent.materialId > -1) ? itemParent.materialId : item.materialId;\n            }\n\n            var nodeInfo = null;\n            var nodeItemType = CLOUD.Reader.EnumNodeItemType;\n            switch (item.type) {\n                case nodeItemType.MESH:\n                    nodeInfo = getMeshNodeAttr(reader, item, itemParent);\n                    break;\n                case nodeItemType.TUBE:\n                    nodeInfo = getMeshNodeAttrOfTube(reader, item, itemParent);\n                    break;\n                case nodeItemType.PIPE:\n                    nodeInfo = getMeshNodeAttrOfPipe(reader, item, itemParent);\n                    break;\n                case nodeItemType.BOX:\n                    nodeInfo = getMeshNodeAttrOfBox(reader, item, itemParent);\n                    break;\n                case nodeItemType.BOX_M:\n                    nodeInfo = getMeshNodeAttrOfBoxM(reader, item, itemParent);\n                    break;\n                case nodeItemType.PIPE_M:\n                    nodeInfo = getMeshNodeAttrOfPipeM(reader, item, itemParent);\n                    break;\n                case nodeItemType.MESH_REF:\n                    nodeInfo = getMeshNodeAttrOfMeshRef(reader, item, itemParent);\n                    break;\n                case nodeItemType.LINE:\n                    nodeInfo = getLineNodeAttr(reader, item, itemParent);\n                    break;\n                default:\n                    break;\n            }\n\n            if (!nodeInfo) {\n                return;\n            }\n\n            nodeInfo.userId = originalId;\n            nodeInfo.userDataId = userDataId;\n            nodeInfo.type = item.type;\n            nodeInfo.cellId = cellId;\n            nodeInfo.materialId = mtlId;\n            nodeInfo.itemIdUV2 = itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId;\n\n            if (!nodeMap[nodeInfo.userId]) {\n                nodeMap[nodeInfo.userId] = [];\n            }\n\n            nodeMap[nodeInfo.userId].push(nodeInfo);\n\n        }\n\n        /**\n         * 获得 pipe node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfPipe(sceneOrSymbolReader, item, itemParent) {\n\n            var matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n            if (itemParent) {\n                matrix.multiplyMatrices(itemParent.matrix, matrix);\n            }\n\n            var boundingBox = item.boundingBox.clone();\n            boundingBox.applyMatrix4(matrix);\n\n            var geomAttr = sceneOrSymbolReader.getGeomPipeInfo(item.toData);\n            var startPt = geomAttr.startPt;\n            var endPt = geomAttr.endPt;\n\n            var dir = new CLOUD.Math.Vector3();\n            dir.subVectors(endPt, startPt);\n\n            var len = dir.length();\n            dir.normalize();\n\n            var radius = geomAttr.radius;\n            if (radius <= 1) {\n                radius = 100;\n            }\n\n            var unitY = new CLOUD.Math.Vector3(0, 1, 0);\n            var scale = new CLOUD.Math.Vector3(radius, len, radius);\n            var quaternion = new CLOUD.Math.Quaternion().setFromUnitVectors(unitY, dir);\n            var position = startPt.clone().addScaledVector(dir, len * 0.5);\n            var matrixTmp = new CLOUD.Math.Matrix4().compose(position, quaternion, scale);\n            matrix.multiply(matrixTmp);\n\n            geomAttr = null;\n\n            return {\n                nodeId: (itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId) + '_pipe',\n                geometryId: 'pipe',\n                boundingBox: boundingBox,\n                matrix: matrix\n            };\n        }\n\n        /**\n         * 获得 tube node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfTube(sceneOrSymbolReader, item, itemParent) {\n\n            var nodeInfo = getMeshNodeAttrOfPipe(sceneOrSymbolReader, item, itemParent);\n            nodeInfo.nodeId += \"_tube\";\n            nodeInfo.geometryId = \"tube\";\n\n            return nodeInfo;\n        }\n\n        /**\n         * 获得 box node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfBox(sceneOrSymbolReader, item, itemParent) {\n\n            var matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n            if (itemParent) {\n                matrix.multiplyMatrices(itemParent.matrix, matrix);\n            }\n\n            var boundingBox = item.boundingBox.clone();\n            boundingBox.applyMatrix4(matrix);\n\n            var bBox = item.boundingBox;\n            var boxSize = bBox.getSize();\n            var boxCenter = bBox.getCenter();\n\n            var matrixTmp = new CLOUD.Math.Matrix4().scale(new CLOUD.Math.Vector3(boxSize.x, boxSize.y, boxSize.z));\n            matrixTmp.setPosition(boxCenter);\n            matrix.multiply(matrixTmp);\n\n            return {\n                nodeId: (itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId) + '_box',\n                geometryId: 'box',\n                boundingBox: boundingBox,\n                matrix: matrix\n            };\n        }\n\n        /**\n         * 获得 boxM node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfBoxM(sceneOrSymbolReader, item, itemParent) {\n\n            var matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n            if (itemParent) {\n                matrix.multiplyMatrices(itemParent.matrix, matrix);\n            }\n\n            var boundingBox = item.boundingBox.clone();\n            boundingBox.applyMatrix4(matrix);\n\n            return {\n                nodeId: (itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId) + '_boxM',\n                geometryId: 'boxM',\n                boundingBox: boundingBox,\n                matrix: matrix,\n                uvArrayBuffer: sceneOrSymbolReader.getGeomBoxUvInfo(item.toData)\n            };\n        }\n\n        /**\n         * 获得 pipeM node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfPipeM(sceneOrSymbolReader, item, itemParent) {\n\n            var matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n            if (itemParent) {\n                matrix.multiplyMatrices(itemParent.matrix, matrix);\n            }\n\n            var boundingBox = item.boundingBox.clone();\n            boundingBox.applyMatrix4(matrix);\n\n            return {\n                nodeId: (itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId) + '_pipeM',\n                geometryId: 'pipeM',\n                boundingBox: boundingBox,\n                matrix: matrix,\n                uvArrayBuffer: sceneOrSymbolReader.getGeomPipeUvInfo(item.toData)\n            };\n        }\n\n        /**\n         * 获得共享的 mesh node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttrOfMeshRef(sceneOrSymbolReader, item, itemParent) {\n\n            var matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n            if (itemParent) {\n                matrix.multiplyMatrices(itemParent.matrix, matrix);\n            }\n\n            var boundingBox = item.boundingBox.clone();\n            boundingBox.applyMatrix4(matrix);\n\n            return {\n                nodeId: \"refMesh|\" + (itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId),\n                geometryId: item.toData,\n                boundingBox: boundingBox,\n                matrix: matrix\n            };\n        }\n\n        /**\n         * 获得 mesh node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getMeshNodeAttr(sceneOrSymbolReader, item, itemParent) {\n\n            var boundingBox = item.boundingBox.clone();\n            var matrix;\n\n            if (item.matrixId !== -1) {\n\n                matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n                if (itemParent) {\n                    matrix.multiplyMatrices(itemParent.matrix, matrix);\n                }\n                boundingBox.applyMatrix4(matrix);\n\n            } else {\n\n                matrix = new CLOUD.Math.Matrix4();\n                if (itemParent) {\n                    boundingBox.applyMatrix4(itemParent.matrix);\n                }\n\n            }\n\n            return {\n                nodeId: itemParent ? itemParent.ItemId + \"_\" + item.ItemId : item.ItemId,\n                geometryId: item.toData,\n                boundingBox: boundingBox,\n                matrix: matrix\n            };\n        }\n\n        /**\n         * 获得 line node info\n         *\n         * @param {Object} reader - scene reader | symbol reader\n         * @param {Object} item - item info\n         * @param {Object} itemParent - parent item info\n         */\n        function getLineNodeAttr(sceneOrSymbolReader, item, itemParent) {\n\n            var boundingBox = item.boundingBox.clone();\n            var matrix;\n\n            if (item.matrixId !== -1) {\n\n                matrix = sceneOrSymbolReader.getMatrixInfo(item.matrixId).matrix.clone();\n                if (itemParent) {\n                    matrix.multiplyMatrices(itemParent.matrix, matrix);\n                }\n                boundingBox.applyMatrix4(matrix);\n\n            } else {\n\n                matrix = new CLOUD.Math.Matrix4();\n                if (itemParent) {\n                    boundingBox.applyMatrix4(itemParent.matrix);\n                }\n\n            }\n\n            return {\n                nodeId: itemParent ? 'line-' + itemParent.ItemId + \"-\" + item.ItemId : 'line-' + item.ItemId,\n                geometryId: 'line-' + item.toData,\n                boundingBox: boundingBox,\n                matrix: matrix\n            };\n        }\n\n        function isParameterized(nodeInfo) {\n\n            return (nodeInfo.type === CLOUD.Reader.EnumNodeItemType.TUBE ||\n                nodeInfo.type === CLOUD.Reader.EnumNodeItemType.PIPE ||\n                nodeInfo.type === CLOUD.Reader.EnumNodeItemType.BOX ||\n                nodeInfo.type === CLOUD.Reader.EnumNodeItemType.BOX_M ||\n                nodeInfo.type === CLOUD.Reader.EnumNodeItemType.PIPE_M);\n\n        }\n\n        function parseScene(parameters) {\n            \n            var sceneBufferData = parameters.sceneBufferData;\n            var symbolBufferData = parameters.symbolBufferData;\n            var sceneReader = new CLOUD.Reader.SceneReader(sceneBufferData);\n            var symbolReader = symbolBufferData ? new CLOUD.Reader.SymbolReader(symbolBufferData) : null;\n            var nodeInfoMap = parseItemData(sceneReader, symbolReader);\n\n            return {\n                nodeInfoMap: CLOUD.Utils.str2ab(JSON.stringify(nodeInfoMap))\n            };\n\n        }\n\n        self.addEventListener('message', function (event) {\n\n            var data = event.data;\n\n            //console.time('T_parseScene_worker');\n            var result = parseScene(data);\n            //console.timeEnd('T_parseScene_worker');\n\n            self.postMessage(result, [result.nodeInfoMap]);\n            self.close();\n\n        }, false);\n\n    "}(),function(){
s.Workers.WorkerChunk.MeshCreateChunk="\n\n        function mergeBuffersBy(materialKey, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId, brief, mergedBufferMap) {\n\n            var nodeInfos = nodeInfoMapOnMaterial[materialKey];\n            var segmentMergeEnabled = brief.segmentMergeEnabled;\n            var maxIndicesNumberPerBathSegment = brief.maxIndicesNumberPerBathSegment;\n            var arrayPositionLength = 0;\n            var arrayIndexLength = 0;\n            var arrayNormalLength = 0;\n            var arrayUVLength = 0;\n            var arrayUV2Length = 0;\n            var nodeBuffer = null;\n            var sections = [];\n            var start = 0;\n\n            for (var i = 0, len = nodeInfos.length; i < len; i++) {\n                var nodeInfo = nodeInfos[i];\n                nodeBuffer = nodeBufferMapOnNodeId[nodeInfo.nodeId];\n                if (!nodeBuffer) {\n                    // 最后一个\n                    if (i === len - 1) {\n                        sections.push({\n                            start: start,\n                            end: len,\n                            arrayPositionLength: arrayPositionLength,\n                            arrayIndexLength: arrayIndexLength,\n                            arrayNormalLength: arrayNormalLength,\n                            arrayUVLength: arrayUVLength,\n                            arrayUV2Length: arrayUV2Length\n                        });\n                    }\n                    continue;\n                }\n\n                arrayIndexLength += nodeBuffer.index.length;\n                arrayPositionLength += nodeBuffer.position.length;\n                if (nodeBuffer.normal) {\n                    arrayNormalLength += nodeBuffer.normal.length;\n                }\n                if (nodeBuffer.uv) {\n                    arrayUVLength += nodeBuffer.uv.length;\n                }\n                if (nodeBuffer.uv2) {\n                    arrayUV2Length += nodeBuffer.uv2.length;\n                }\n\n                if (segmentMergeEnabled) {\n\n                    if (arrayIndexLength > maxIndicesNumberPerBathSegment) {\n\n                        arrayIndexLength -= nodeBuffer.index.length;\n                        arrayPositionLength -= nodeBuffer.position.length;\n                        if (nodeBuffer.normal) {\n                            arrayNormalLength -= nodeBuffer.normal.length;\n                        }\n                        if (nodeBuffer.uv) {\n                            arrayUVLength -= nodeBuffer.uv.length;\n                        }\n                        if (nodeBuffer.uv2) {\n                            arrayUV2Length -= nodeBuffer.uv2.length;\n                        }\n\n                        sections.push({\n                            start: start,\n                            end: i,\n                            arrayPositionLength: arrayPositionLength,\n                            arrayIndexLength: arrayIndexLength,\n                            arrayNormalLength: arrayNormalLength,\n                            arrayUVLength: arrayUVLength,\n                            arrayUV2Length: arrayUV2Length\n                        });\n\n                        arrayPositionLength = 0;\n                        arrayIndexLength = 0;\n                        arrayNormalLength = 0;\n                        arrayUVLength = 0;\n                        arrayUV2Length = 0;\n                        start = i;\n                        i -= 1; //上一个\n                    } else {\n                        if (i === len - 1) {\n                            sections.push({\n                                start: start,\n                                end: len,\n                                arrayPositionLength: arrayPositionLength,\n                                arrayIndexLength: arrayIndexLength,\n                                arrayNormalLength: arrayNormalLength,\n                                arrayUVLength: arrayUVLength,\n                                arrayUV2Length: arrayUV2Length\n                            });\n                        }\n                    }\n                } else {\n                    if (i === len - 1) {\n                        sections.push({\n                            start: start,\n                            end: len,\n                            arrayPositionLength: arrayPositionLength,\n                            arrayIndexLength: arrayIndexLength,\n                            arrayNormalLength: arrayNormalLength,\n                            arrayUVLength: arrayUVLength,\n                            arrayUV2Length: arrayUV2Length\n                        });\n                    }\n                }\n\n                nodeBuffer = null;\n            }\n\n            for (var k = 0, kLen = sections.length; k < kLen; k++) {\n                var section = sections[k];\n                var indicesGroup = {};\n\n                var arrayPosition = new Float32Array(section.arrayPositionLength);\n                var arrayIndex = new Uint32Array(section.arrayIndexLength);\n                var arrayNormal = new Float32Array(section.arrayNormalLength);\n                var arrayUV = new Float32Array(section.arrayUVLength);\n                var arrayUV2 = new Float32Array(section.arrayUV2Length);\n                var offsetPosition = 0;\n                var offsetIndex = 0;\n                var offsetNormal = 0;\n                var offsetUV = 0;\n                var offsetUV2 = 0;\n\n                var nodeIdArray = [];\n\n                for (var i = section.start, len = section.end; i < len; i++) {\n                    var nodeInfo = nodeInfos[i];\n                    nodeBuffer = nodeBufferMapOnNodeId[nodeInfo.nodeId];\n                    if (!nodeBuffer) {\n                        continue;\n                    }\n\n                    nodeIdArray.push(nodeInfo.nodeId);\n\n                    var index = nodeBuffer.index;\n                    var position = nodeBuffer.position;\n                    var normal = nodeBuffer.normal;\n                    var uv = nodeBuffer.uv;\n                    var uv2 = nodeBuffer.uv2;\n\n                    arrayPosition.set(position, offsetPosition);\n                    var indexTmp = Uint32Array.from(index);\n                    for (var j = 0, jLen = indexTmp.length; j < jLen; j++) {\n                        indexTmp[j] += offsetPosition / 3;\n                    }\n                    arrayIndex.set(indexTmp, offsetIndex);\n\n                    // 建立索引表\n                    if (indicesGroup[nodeInfo.userId] === void 0) {\n                        indicesGroup[nodeInfo.userId] = [];\n                    }\n                    indicesGroup[nodeInfo.userId].push({\n                        userId: nodeInfo.userId,\n                        nodeId: nodeInfo.nodeId,\n                        positionStart: offsetPosition,\n                        positionCount: position.length,\n                        indexStart: offsetIndex,\n                        indexCount: index.length,\n                        lightmapIdx: nodeInfo.lightmapIdx,\n                        boundingBox: nodeInfo.boundingBox\n                    });\n\n                    offsetIndex += index.length;\n                    offsetPosition += position.length;\n\n                    if (normal) {\n                        arrayNormal.set(normal, offsetNormal);\n                        offsetNormal += normal.length;\n                    }\n\n                    if (uv) {\n                        arrayUV.set(uv, offsetUV);\n                        offsetUV += uv.length;\n                    }\n\n                    if (uv2) {\n                        arrayUV2.set(uv2, offsetUV2);\n                        offsetUV2 += uv2.length;\n                    }\n\n                    index = null;\n                    position = null;\n                    normal = null;\n                    uv = null;\n                    uv2 = null;\n                    nodeBuffer = null;\n\n                }\n\n                if (mergedBufferMap[materialKey] === void 0) {\n                    mergedBufferMap[materialKey] = [];\n                }\n\n                mergedBufferMap[materialKey].push({\n                    bufferData: {\n                        index: arrayIndex.buffer,\n                        position: arrayPosition.buffer,\n                        normal: offsetNormal > 0 ? arrayNormal.buffer : undefined,\n                        uv: offsetUV > 0 ? arrayUV.buffer : undefined,\n                        uv2: offsetUV2 > 0 ? arrayUV2.buffer : undefined\n                    },\n                    indices: indicesGroup\n                });\n            }\n        }\n\n        function createNodeBuffer(nodeInfo, nodeItemType, bufferDataObject) {\n\n            var buffer = bufferDataObject ? bufferDataObject.buffer : undefined;\n            var indexInfo = bufferDataObject ? bufferDataObject.indexInfo : undefined;\n            var position, index, normal, uv;\n\n            switch (nodeInfo.type) {\n                case nodeItemType.LINE:\n                case nodeItemType.MESH:\n                case nodeItemType.MESH_REF:\n\n                    if (!buffer) {\n                        return null;\n                    }\n\n                    index = new Uint32Array(buffer.I);\n                    position = new Float32Array(buffer.P);\n                    normal = buffer.N && buffer.N.byteLength ? new Float32Array(buffer.N) : null;\n                    uv = buffer.UV && buffer.UV.byteLength ? new Float32Array(buffer.UV) : null;\n\n                    if (indexInfo) {\n\n                        index = index.slice(indexInfo.indexStart,\n                            indexInfo.indexStart + indexInfo.indexCount);\n                        position = position.slice(indexInfo.positionStart,\n                            indexInfo.positionStart + indexInfo.positionCount);\n                        normal = normal ? normal.slice(indexInfo.positionStart,\n                            indexInfo.positionStart + indexInfo.positionCount) : null;\n                        uv = uv ? uv.slice(indexInfo.uvStart,\n                            indexInfo.uvStart + indexInfo.uvCount) : null;\n\n                        var startPositon = indexInfo.positionStart / 3;\n                        index.forEach(function (element, index, array) {\n                            array[index] -= startPositon;\n                        });\n\n                    } else {\n\n                        index = index.slice(0);\n                        position = position.slice(0);\n                        normal = normal ? normal.slice(0) : null;\n                        uv = uv ? uv.slice(0) : null;\n\n                    }\n\n                    // 是否镜像\n                    if (CLOUD.Utils.isMirror(nodeInfo.matrix.elements)) {\n\n                        for (var i = 0, iLen = index.length; i < iLen; i += 3) {\n                            var tmp = index[i + 1];\n                            index[i + 1] = index[i + 2];\n                            index[i + 2] = tmp;\n                        }\n\n                    }\n\n                    break;\n                case nodeItemType.BOX:\n                case nodeItemType.BOX_M:\n                case nodeItemType.PIPE:\n                case nodeItemType.TUBE:\n                case nodeItemType.PIPE_M:\n\n                    var dataM = (nodeInfo.type === nodeItemType.BOX_M ||\n                            nodeInfo.type === nodeItemType.BOX) ?\n                        CLOUD.GeomUtil.getBoxMBuffer(nodeInfo.uvArrayBuffer) :\n                        CLOUD.GeomUtil.getPipeMBuffer(nodeInfo.uvArrayBuffer);\n\n                    index = Uint32Array.from(dataM.index);\n                    position = Float32Array.from(dataM.vertex);\n                    normal = Float32Array.from(dataM.normal);\n\n                    if (dataM.uv) {\n                        uv = Float32Array.from(dataM.uv);\n                        delete dataM.uv;\n                    } else {\n                        uv = null;\n                    }          \n\n                    break;\n\n                default:\n                    console.log(\"error data!\");\n                    break;\n            }\n\n            var matrix = nodeInfo.matrix;\n\n            // 变换顶点坐标\n            CLOUD.Utils.applyMatrix4ToBuffer(matrix, position);\n\n            // 变换法线\n            if (normal) {\n                var normalMatrix = new CLOUD.Math.Matrix3();\n                normalMatrix.getNormalMatrix(matrix);\n                CLOUD.Utils.applyMatrix3ToBuffer(normalMatrix, normal);\n                CLOUD.Utils.normalizeBuffer(normal);\n            }\n\n            return {\n                index: index,\n                position: position,\n                normal: normal,\n                uv: uv\n            };\n        }\n\n        /**\n         *\n         * @param {string} itemId -itemId有两种：\"scene\"+itemId; \"symbol\"+itemId\n         * @param {number} indexNum -item的index数量，即uv的数量\n         */\n        function getUV2ById(uv2BufferData, itemId, indexNum){\n\n            if (!uv2BufferData || !indexNum){\n                return null;\n            }\n\n            var uv2MapItem = uv2BufferData.uv2MapItem[itemId];\n            if (!uv2MapItem) {\n                return null;\n            }\n\n            var scale = uv2MapItem.uv1Scale;\n            var translation = uv2MapItem.uv1Translation;\n\n            var offset = uv2MapItem.uv1ByteOffset / 2;\n            var length = indexNum * 2;\n\n            var uv2Array = uv2BufferData.uv2Buffer.slice(offset, offset + length);\n            var uv2 = [];//与index对应的uv2\n            for (var i = 0; i < length; i += 2) {\n                uv2.push((scale[0] * (uv2Array[i] / 65535.0) + translation[0]));\n                uv2.push((scale[1] * (uv2Array[i + 1] / 65535.0) + translation[1]));\n            }\n\n            return {\n                lightmapIdx: uv2MapItem.lightmapIdx, \n                uv2: uv2\n            };\n\n        }\n\n        function createNodeBufferWithUV2(nodeInfo, nodeItemType, bufferDataObject){\n\n            var nodeBuffer = createNodeBuffer(nodeInfo, nodeItemType, bufferDataObject);\n            \n            if (!bufferDataObject || !bufferDataObject.uv2BufferData) {\n                return nodeBuffer;\n            }\n\n            //数据中存在lightmap就需要展开psition等属性\n            var uv2 = [];\n            var index = nodeBuffer.index;\n            var uv2Info = getUV2ById(bufferDataObject.uv2BufferData, nodeInfo.itemIdUV2, index.length);\n\n            if (uv2Info) {\n                nodeInfo.lightmapIdx = uv2Info.lightmapIdx;\n                uv2 = uv2Info.uv2;\n            }\n\n            //不同三角面片的同一个点可能对应不同的uv2，需要展开\n            var position2 = nodeBuffer.position;\n            var normal2 = nodeBuffer.normal;\n            var uvv = nodeBuffer.uv;\n\n            var position = [];\n            var normal = [];\n            var uv = [];\n\n            for (var i = 0; i < index.length; i++) {\n\n                var idx = index[i];\n\n                position.push(position2[idx * 3]);\n                position.push(position2[idx * 3 + 1]);\n                position.push(position2[idx * 3 + 2]);\n\n                if(normal2)\n                {\n                    normal.push(normal2[idx * 3]);\n                    normal.push(normal2[idx * 3 + 1]);\n                    normal.push(normal2[idx * 3 + 2]);\n                }\n\n\n                if (uvv) {\n                    uv.push(uvv[idx * 2]);\n                    uv.push(uvv[idx * 2 + 1]);\n                }\n\n                index[i] = i;\n            }\n\n            position2 = null;\n            normal2 = null;\n            uvv = null;\n\n            nodeBuffer.uv2 = uv2;\n            nodeBuffer.position = position;\n            nodeBuffer.normal = normal;\n            nodeBuffer.uv = uv;\n\n            return nodeBuffer;\n        }\n\n        function getMaterialKeyByNodeInfo(nodeInfo, nodeItemType) {\n\n            return CLOUD.Utils.getCombinedKeyString([\n                nodeInfo.materialId,\n                nodeInfo.uv ? '1' : '0',\n                nodeInfo.type === nodeItemType.LINE ? 'lines' : 'meshes'\n            ]);\n\n        }\n\n        function getPropertyValueByMaterialKey(key) {\n\n            var splitArr = CLOUD.Utils.splitCombinedKeyString(key);\n\n            return {\n                materialId: splitArr[0],\n                uvProp: splitArr[1],\n                type: splitArr[2],\n            }\n        }\n\n        function collectNodeInfos(dataBuffers, brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId) {\n\n            var i, iLen;\n\n            if (brief.type === 'shared') {\n\n                for (i = 0, iLen = dataBuffers.length; i < iLen; i++) {\n                    collectNodeInfosFromSharedGeometries(dataBuffers[i], brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId);\n                }\n\n            }\n\n            if (brief.type === 'unique') {\n\n                for (i = 0, iLen = dataBuffers.length; i < iLen; i++) {\n                    collectNodeInfosFromUniqueGeometries(dataBuffers[i], brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId);\n                }\n\n            }\n\n            if (brief.type === 'parameterized') {\n\n                for (i = 0, iLen = dataBuffers.length; i < iLen; i++) {\n                    collectNodeInfosFromParameterizedGeometries(dataBuffers[i], brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId);\n                }\n\n            }\n\n        }\n\n        function collectNodeInfosFromParameterizedGeometries(bufferData, brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId) {\n\n            var meshId = bufferData.meshId;\n            var nodeItemType = brief.nodeItemType;\n            var nodeInfoMap = brief.nodeInfoMap;\n            var nodeInfos = nodeInfoMap[meshId];\n\n            if (!nodeInfos) {\n                return;\n            }\n\n            for (var i = 0, iLen = nodeInfos.length; i < iLen; i++) {\n\n                var nodeInfo = nodeInfos[i];\n                var nodeBuffer = createNodeBuffer(nodeInfo, nodeItemType);\n\n                // 缓存buffer用于合并\n                nodeBufferMapOnNodeId[nodeInfo.nodeId] = nodeBuffer;\n                // 是否存在uv\n                nodeInfo.uv = nodeBuffer.uv ? true : false;\n\n                // 根据materialId&uv&type编码\n                var materialKey = getMaterialKeyByNodeInfo(nodeInfo, nodeItemType);\n\n                if (!nodeInfoMapOnMaterial[materialKey]) {\n                    nodeInfoMapOnMaterial[materialKey] = [];\n                }\n\n                nodeInfoMapOnMaterial[materialKey].push(nodeInfo);\n            }\n\n        }\n\n        function collectNodeInfosFromUniqueGeometries(bufferData, brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId) {\n\n            var meshId = bufferData.meshId;\n            var nodeItemType = brief.nodeItemType;\n            var nodeInfoMap = brief.nodeInfoMap;\n            var nodeInfos = nodeInfoMap[meshId];            \n            var uv2BufferData = brief.uv2BufferData;\n\n            if (!nodeInfos) {\n                return;\n            }\n\n            for (var i = 0, iLen = nodeInfos.length; i < iLen; i++) {\n\n                var nodeInfo = nodeInfos[i];\n                var nodeBuffer = createNodeBufferWithUV2(nodeInfo, nodeItemType, {\n                    buffer: bufferData,\n                    uv2BufferData: uv2BufferData\n                });\n\n                // 缓存buffer用于合并\n                nodeBufferMapOnNodeId[nodeInfo.nodeId] = nodeBuffer;\n                // 是否存在uv\n                nodeInfo.uv = nodeBuffer.uv ? true : false;\n\n                // 根据materialId&uv&type编码\n                var materialKey = getMaterialKeyByNodeInfo(nodeInfo, nodeItemType);\n\n                if (!nodeInfoMapOnMaterial[materialKey]) {\n                    nodeInfoMapOnMaterial[materialKey] = [];\n                }\n\n                nodeInfoMapOnMaterial[materialKey].push(nodeInfo);\n            }\n\n        }\n\n        function collectNodeInfosFromSharedGeometries(bufferData, brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId) {\n\n            var indexInfos = bufferData.IndexInfos;\n            var nodeItemType = brief.nodeItemType;\n            var nodeInfoMap = brief.nodeInfoMap;            \n            var uv2BufferData = brief.uv2BufferData;\n\n            for (var i = 0, iLen = indexInfos.length; i < iLen; i++) {\n\n                var indexInfo = indexInfos[i];\n                var nodeInfos = nodeInfoMap[indexInfo.meshId];\n\n                if (!nodeInfos) {\n                    continue;\n                }\n\n                for (var k = 0, kLen = nodeInfos.length; k < kLen; k++) {\n\n                    var nodeInfo = nodeInfos[k];\n                    var nodeBuffer = createNodeBufferWithUV2(nodeInfo, nodeItemType, {\n                        buffer: bufferData,\n                        indexInfo: indexInfo,\n                        uv2BufferData: uv2BufferData\n                    });\n\n                    // 缓存buffer用于合并\n                    nodeBufferMapOnNodeId[nodeInfo.nodeId] = nodeBuffer;\n\n                    // 是否存在uv\n                    nodeInfo.uv = nodeBuffer.uv ? true : false;\n\n                    // 根据materialId&uv&type编码\n                    var materialKey = getMaterialKeyByNodeInfo(nodeInfo, nodeItemType);\n\n                    if (!nodeInfoMapOnMaterial[materialKey]) {\n                        nodeInfoMapOnMaterial[materialKey] = [];\n                    }\n\n                    nodeInfoMapOnMaterial[materialKey].push(nodeInfo);\n                }\n\n            }\n\n        }\n\n        function createMeshes(parameters) {\n\n            // var brief = {\n            //     type,\n            //     segmentEnabled,\n            //     maxIndicesNumberPerBathSegment,\n            //     nodeItemType,\n            //     nodeInfoMap\n            // };\n            var brief = JSON.parse(CLOUD.Utils.ab2str(parameters.brief));\n            var dataBuffers = parameters.dataBuffers;\n            var nodeInfoMapOnMaterial = {};\n            var nodeBufferMapOnNodeId = {};\n            var mergedBufferMap = {};\n\n            // 收集nodeInfos\n            collectNodeInfos(dataBuffers, brief, nodeInfoMapOnMaterial, nodeBufferMapOnNodeId);\n           \n            // 合并buffers\n            var materialKeys = Object.keys(nodeInfoMapOnMaterial);\n\n            for (var i = 0, iLen = materialKeys.length; i < iLen; i++) {\n                mergeBuffersBy(materialKeys[i], nodeInfoMapOnMaterial, nodeBufferMapOnNodeId, brief, mergedBufferMap);\n            }\n\n            var transferableObjects = [];\n\n            for (var j = 0, jLen = materialKeys.length; j < jLen; j++) {\n\n                var mergedBuffers = mergedBufferMap[materialKeys[j]];\n\n                for (var k = 0, kLen = mergedBuffers.length; k < kLen; k++) {\n\n                    var bufferData = mergedBuffers[k].bufferData;\n\n                    transferableObjects.push(bufferData.index);\n                    transferableObjects.push(bufferData.position);\n\n                    if (bufferData.normal) {\n                        transferableObjects.push(bufferData.normal);\n                    }\n\n                    if (bufferData.uv) {\n                        transferableObjects.push(bufferData.uv);\n                    }\n\n                    if (bufferData.uv2) {\n                        transferableObjects.push(bufferData.uv2);\n                    }\n                }\n\n            }\n\n            return {\n                data: {dataBuffers: mergedBufferMap},\n                transferableObjects: transferableObjects\n            };\n        }\n\n        self.addEventListener('message', function (event) {\n\n            var data = event.data;\n\n            console.time('T_worker_createMeshes');\n\n            var result = createMeshes(data);\n\n            console.timeEnd('T_worker_createMeshes');\n\n            self.postMessage(result.data, result.transferableObjects);\n\n            self.close();\n\n        }, false);\n    "}(),function(){s.Workers.WorkerChunk.BorderLineCreateChunk="\n\n        function createBorderLines(parameters) {\n            \n            var nodeInfosObject = JSON.parse(CLOUD.Utils.ab2str(parameters.infos));\n            var bufferDataArray = parameters.bufferDataArray;\n            var i, iLen;\n            var j, jLen;\n        \n            var userIdMap = {};\n        \n            for (var k = 0, kLen = bufferDataArray.length; k < kLen; k++) {\n        \n                var bufferData = bufferDataArray[k];\n                var indexInfos = bufferData.IndexInfos;\n        \n                var arrIndex = new Uint32Array(bufferData.I);\n                var arrPosition = new Float32Array(bufferData.P);\n        \n                // 按 userId 收集边框线\n                for (i = 0, iLen = indexInfos.length; i < iLen; i++) {\n        \n                    var indexInfo = indexInfos[i];\n                    var geometryId = indexInfo.meshId;\n                    var nodeInfos = nodeInfosObject[geometryId];\n                    if (!nodeInfos) {\n                        continue;\n                    }            \n        \n                    for (j = 0, jLen = nodeInfos.length; j < jLen; j++) {\n        \n                        var nodeInfo = nodeInfos[j];\n                        var newPosition = arrPosition.slice(indexInfo.positionStart, indexInfo.positionStart + indexInfo.positionCount);\n                        var startPositon = indexInfo.positionStart / 3;\n                        var newIndex = arrIndex.slice(indexInfo.indexStart, indexInfo.indexStart + indexInfo.indexCount);\n                        newIndex.forEach(function (element, index, array) {\n                            array[index] -= startPositon;\n                        });\n        \n                        CLOUD.Utils.applyMatrix4ToBuffer(nodeInfo.matrix, newPosition);\n        \n                        var lineMesh = {\n                            name: nodeInfo.userId,\n                            nodeId: nodeInfo.userId,\n                            index: {\n                                array: newIndex,\n                                itemSize: 1,\n                                count: newIndex.length,\n                                normalized: false\n                            },\n                            position: {\n                                array: newPosition,\n                                itemSize: 3,\n                                count: newPosition.length / 3,\n                                normalized: false\n                            }\n                        };\n        \n                        if (!userIdMap[nodeInfo.userId]) {\n                            userIdMap[nodeInfo.userId] = [];\n                        }\n        \n                        userIdMap[nodeInfo.userId].push(lineMesh);\n                    }\n                }\n        \n            }\n        \n            // 按 userId 顺序收集边框线\n            var lineSegments = [];\n            var userIds = Object.keys(userIdMap);\n        \n            for (j = 0, jLen = userIds.length; j < jLen; j++) {\n        \n                var wireFrames = userIdMap[userIds[j]];\n        \n                for (i = 0, iLen = wireFrames.length; i < iLen; i++) {\n                    lineSegments.push(wireFrames[i]);\n                }\n        \n            }\n        \n            // 合并边框线\n            if (lineSegments.length === 0) {\n                return {\n                    data:{\n                        success: false\n                    }                    \n                };\n            }\n        \n            var groupIndices = {};\n            var newBuffer = CLOUD.Utils.mergeBuffers(lineSegments, groupIndices);\n            var transferableObjects = [newBuffer.index.array.buffer, newBuffer.position.array.buffer];\n        \n            return {\n                data: {\n                    success: true,                   \n                    groupIndices: JSON.stringify(groupIndices),\n                    bufferData: newBuffer,\n                },                \n                transferableObjects: transferableObjects\n            };\n        }\n        \n        self.addEventListener('message', function (event) {\n        \n            var data = event.data;\n            var result = createBorderLines(data);\n        \n            if (result.data.success) {\n                self.postMessage(result.data, result.transferableObjects);\n            } else {\n                self.postMessage(result.data);\n            }\n        \n            self.close();\n        \n        }, false);\n    \n    "}(),function(){s.Workers.WorkerLib.getBorderLineCreateWorker=function(){var e=s.Workers.WorkerChunk.NamespaceChunk;e+=s.Workers.WorkerChunk.MathChunk,e+=s.Workers.WorkerChunk.UtilsChunk,e+=s.Workers.WorkerChunk.BorderLineCreateChunk;var e=window.URL.createObjectURL(new Blob([e]));return function(){return new Worker(e)}}(),s.Workers.WorkerLib.getMeshCreateWorker=function(){var e=s.Workers.WorkerChunk.NamespaceChunk;e+=s.Workers.WorkerChunk.MathChunk,e+=s.Workers.WorkerChunk.UtilsChunk,e+=s.Workers.WorkerChunk.GeomUtilChunk,e+=s.Workers.WorkerChunk.MeshCreateChunk;var t=window.URL.createObjectURL(new Blob([e]));return function(){return new Worker(t)}}(),s.Workers.WorkerLib.getSceneParseWorker=function(){var e=s.Workers.WorkerChunk.NamespaceChunk;e+=s.Workers.WorkerChunk.MathChunk,e+=s.Workers.WorkerChunk.UtilsChunk,e+=s.Workers.WorkerChunk.SceneReaderChunk,e+=s.Workers.WorkerChunk.SymbolReaderChunk,e+=s.Workers.WorkerChunk.SceneParseChunk;var t=window.URL.createObjectURL(new Blob([e]));return function(){return new Worker(t)}}()}(),function(){var e=function(e){function t(e,i,r,n,a,o){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return l.viewer=e,l.unitScale=1,l.pntLoader=new s.PntLoader(5,l.unitScale),l.index=n,l.parseCfgFinish=a,l.debut=o,l.url=r.serverUrl+""+r.databagId+"/tileset.json",l}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.pntLoader=null,this.parseCfgFinish=null,this.debut=null,this.viewer=null}},{key:"load",value:function(e){var t=this;this.manager.chooseRendering(this.statistics.memoeryInfo),this.parseCfgFinish&&this.parseCfgFinish(),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START}),this.pntLoader.loadPntTotalJson(this.url,function(e){var i=new THREE.Vector3(e[0],e[1],e[2]),r=new THREE.Vector3(e[3],e[4],e[5]),n=new THREE.Vector3(e[6],e[7],e[8]),a=new THREE.Vector3(e[9],e[10],e[11]),o=r.clone().add(n).add(a);t.getTransforms().boundingBox=new THREE.Box3(i.clone().sub(o),i.clone().add(o)),t.manager.updateScene(t)}).then(function(e){var i=t.viewer.getScene().getMatrixGlobal().clone(),r=new THREE.Matrix4;r=r.getInverse(i);var n=t.viewer.getScene(),a=(new THREE.Matrix4).makeScale(t.unitScale,t.unitScale,t.unitScale),o=!0,l=!1,u=void 0;try{for(var c,h=e[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value;d.matrix.copy(i).multiply(a),d.matrixAutoUpdate=!1,d.updateMatrixWorld(!0),n.children[0].add(d)}}catch(e){l=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw u}}t.viewer.addRenderCallback(function(){var e=t.viewer.domElement.offsetHeight;t.pntLoader.updatePreSse(t.viewer.camera,e),t.pntLoader.ProcessTileIndexs(t.viewer.camera,r)}),t.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:t.id}),t.debut(t)})}}]),t}(s.BaseModel);s.PointCloudModel=e}(),function(){var e=function(e){function t(e,i,r,n,a){_classCallCheck(this,t)
;var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));o._viewer=e,o._configLoadCb=n,o._modelLoadCb=a,o._loader=new s.GeoJsonModelLoader,o._crs=null,o.features=[],o._parser=new s.GeoJsonParser(e);var l=""+r.serverUrl+r.databagId;return o.url=l+"/../../../metadata/Points.json.gz",o}return _inherits(t,e),_createClass(t,[{key:"load",value:function(e){this.manager.chooseRendering(this.statistics.memoeryInfo,!0),this._configLoadCb&&this._configLoadCb();var t=this;this._loader.loadModel(t.url).then(function(e){t._getBoundingBox(e),t._parser.parse(e,t),t.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:t.id}),t.debut&&t.debut(t)}).catch(function(){console.log("load model "+t.url+" failed")})}},{key:"getFeatureByID",value:function(e){if(s.Utils.isDefined(this.features[e]))return this.features[e]}},{key:"getAllFeature",value:function(){return this.features}},{key:"select",value:function(e){if(!s.Utils.isDefined(e.key))return this.getAllFeature();for(var t=e.key+"",i=e.value+"",r=[],n=0;n<this.features.length;++n){var a=this.features[n];a.properties[t]===i&&r.push(a)}return r}},{key:"_getBoundingBox",value:function(e){var t=this._viewer,i=new THREE.Vector3;if(s.Utils.isDefined(t.basePointPositionOnLonLat)&&s.Utils.isDefined(e.center)){var r=new THREE.Vector3;s.Projection.lonLatToGauss(new THREE.Vector2(t.basePointPositionOnLonLat[0],t.basePointPositionOnLonLat[1]),s.geoCoordinateSystem.WGS84,r,{span:3,withLineCode:!1});var n=new THREE.Vector3;s.Projection.lonLatToGauss(new THREE.Vector2(e.center[0],e.center[1]),s.geoCoordinateSystem.WGS84,n,{span:3,withLineCode:!1});var a=new THREE.Vector2;a.subVectors(n,r),i.setX(a.x),i.setY(a.y)}var o=s.Utils.box3FromSize(i,new THREE.Vector3(e.size[0],e.size[1],e.size[2]));this.getTransforms().boundingBox=o,this.manager.updateScene(this)}}]),t}(s.BaseModel);s.PointModel=e}(),function(){var e=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,i,r));n.id=r.modelId,n.databagId=n.id,n._viewer=e,n.features={};var a=r.serverUrl+"/"+r.databagId;r.rootPath?n.url=a+"/"+r.rootPath:n.url=a+"/../../../metadata/Points.json.gz";var o=n.id+"_"+s.ObjectGroupType.GEOJSONGROUP;return n.objectGroup=e.getScene().getOrCreateObjectGroup(o,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0}),n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._loader=null,this._parser=null,this.features=null,this.manager.scene.removeObjectGroupByName(s.ObjectGroupType.GEOJSONGROUP),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setVisible",value:function(e){this.visible=e,this.objectGroup&&(this.objectGroup.visible=e)}},{key:"load",value:function(e){this.manager.chooseRendering(this.statistics.memoeryInfo,!0),this._configLoadCb&&this._configLoadCb();var t=this;this._loader.loadModel(t.url).then(function(e){t._getBoundingBox(e),t._parser.parse(e,t),t.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:t.id}),t.debut&&t.debut(t)}).catch(function(){console.log("load model "+t.url+" failed")})}},{key:"addFeature",value:function(e,t){this.features[e]=t}},{key:"createLineMesh",value:function(e,t){var i=new s.MeshLineMaterial({color:t.color,opacity:t.opacity,resolution:new THREE.Vector2(window.innerWidth,window.innerHeight),linewidth:t.lineWidth,sizeAttenuation:!0,depthWrite:!1,transparent:!0});for(var r in e){var n=e[r],a=new s.MeshLineGeometry;a.setPositions(n);var o=new s.MeshLine(a,i);this.getFeatureByID(r).addMesh(o),this.objectGroup.add(o),o.updateMatrixWorld(!0),n.length=0}e=null}},{key:"getFeatureByID",value:function(e){if(s.Utils.isDefined(this.features[e]))return this.features[e]}},{key:"getAllFeature",value:function(){return this.features}},{key:"select",value:function(e){if(!s.Utils.isDefined(e.key))return this.getAllFeature();var t=e.key+"",i=e.value+"",r=[];return this.features.map(function(e){e.properties[t]===i&&r.push(e)}),r}},{key:"updateMaterialByFeatureIds",value:function(e,t){var i=this,r=new s.MeshLineMaterial({color:t.color,opacity:t.opacity,resolution:new THREE.Vector2(window.innerWidth,window.innerHeight),linewidth:t.lineWidth,sizeAttenuation:!0,depthWrite:!1,transparent:!0});e.map(function(e){var t=i.getFeatureByID(e);if(t){t.meshList.map(function(e){e.material=r})}})}}]),t}(s.PointModel);s.LineModel=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.jsonLoader=new THREE.FileLoader,this.jsonLoader.setResponseType("json")}return _createClass(e,[{key:"loadModel",value:function(e){var t=this;return new Promise(function(i,r){t.jsonLoader.load(e,function(e){i(e)},void 0,function(){r()})})}}]),e}();s.GeoJsonModelLoader=e}(),function(){function e(e,i,r,n){for(var a=e.features,o=0,s=a.length;o<s;o++)t(a[o],i,r,n)}function t(e,t,i,r){if(s.Utils.isDefined(e.geometry)){var n=e.geometry.type,a=m[n];if(!s.Utils.isDefined(a))return void console.log("Unknown geometry type");a(e,t,i,r)}}function i(e,t,i,r){o(e,e.geometry.coordinates,t,i,r)}function r(e,t,i,r){l(e,e.geometry.coordinates,t,i,r)}function n(e,t,i,r){u(e,e.geometry.coordinates,t,i,r)}function a(e,t,i,r){for(var n=e.geometry.coordinates,a=0;a<n.length;a++)o(e,n[a],t,i,r)}function o(e,t,i,r,n){var a=new s.PointFeature;a.id=e.id;var o=(new THREE.Vector2,new THREE.Vector2(t[0],t[1]));a._geometryLngLat=o,a.geometry.crsFunction=i;var l=e.properties;s.Utils.isDefined(l)&&(a.properties=l),r.features.push(a)}function l(e,t,i,r,n){var a=new s.LineFeature;a.id=e.id,a._geometryLngLat=[];for(var o=0;o<t.length;o++){for(var l=t[o],u=[],c=0;c<l.length;c++){var h=l[c],d=new THREE.Vector2(h[0],h[1]);u.push(d)}a._geometryLngLat.push(u)}var f=e.properties;s.Utils.isDefined(f)&&(a.properties=f),r.addFeature(e.id,a)}function u(e,t,i,r,n){var a=new s.LineFeature;a.id=e.id,a._geometryLngLat=[],t.map(function(e){e.map(function(e){var t=[];e.map(function(e){var i=new THREE.Vector2(e[0],e[1]);t.push(i)}),a._geometryLngLat.push(t)})});var o=e.properties;s.Utils.isDefined(o)&&(a.properties=o),r.addFeature(e.id,a)}function c(e){var t=e.properties,i=null;return"name"===e.type?(i=v[t.name],s.Utils.isDefined(i)||console.log("Unknown crs name: "+t.name)):"EPSG"===e.type?(i=v["EPSG:"+t.code],s.Utils.isDefined(i)||console.log("Unknown crs EPSG code: "+t.code)):console.log("Unknown crs type: "+e.type),i}var h=function(){function e(){_classCallCheck(this,e),this._geometryLngLat=null,this._geometryWorld=null,this._properties=null,this._id=null,this.type="point"}return _createClass(e,[{key:"properties",get:function(){return this._properties},set:function(e){this._properties=e}},{key:"geometry",get:function(){return this._geometryLngLat}},{key:"geometryWorld",get:function(){return this._geometryWorld}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}}]),e}(),d=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="Line",e._meshList=[],e}return _inherits(t,e),_createClass(t,[{key:"addMesh",value:function(e){this._meshList.push(e)}},{key:"clearMesh",value:function(){this._meshList.length=0}},{key:"meshList",get:function(){return this._meshList}}]),t}(h),f=function(){function e(t){_classCallCheck(this,e),this._viewer=t}return _createClass(e,[{key:"parse",value:function(e,t){var i=p[e.type];if(!s.Utils.isDefined(i))return void console.log("Unsupported GeoJSON object type: "+e.type);var r=e.crs,n=null;if(s.Utils.isDefined(r)){if(!s.Utils.isDefined(r.properties))return void console.log("crs.properties is undefined.");if(n=c(r),!s.Utils.isDefined(n))return void console.log("Unknown crs type")}return i(e,n,t,this._viewer),this.features}}]),e}(),p={FeatureCollection:e},m={Point:i,MultiPoint:a,Polygon:r,MultiPolygon:n,LineString:r},v={"EPSG:4549":"CGCS_GAUSS_3_ZONE_40","EPSG:4326":"EPSG:4326"};s.PointFeature=h,s.LineFeature=d,s.GeoJsonParser=f}();var k=function(){function e(t,i,r){_classCallCheck(this,e),void 0!==i&&console.warn("Binary batch table content not supported yet."),this.content=t,void 0!=r?this.batchLength=r:0===Object.keys(this.content).length?(console.warn("Batch table is empty."),this.batchLength=0):this.batchLength=this.content[Object.keys(this.content)[0]].length,this.extensions={}}return _createClass(e,[{key:"getPickingInfo",value:function(e){var t=this,i={};if(0!==this.batchLength){if(e<0)throw new Error("Batch Id ("+e+") must be positive to access\n            feature properties from the batch table.");if(!(e<this.batchLength))throw new Error("Batch Id ("+e+") must be inferior to batch length\n                ("+this.batchLength+") to access feature properties in batch\n                table.");Object.keys(this.content).forEach(function(r){i[r]=t.content[r][e]});var r={BatchTable:i};return this.extensions&&Object.keys(this.extensions).forEach(function(i){var n=_defineProperty({},i,t.extensions[i].getPickingInfo(e));Object.assign(r,n)}),r}}},{key:"removeExtensionFromContent",value:function(e){this.content.extensions[e]&&delete this.content.extensions[e],0===Object.keys(this.content.extensions).length&&delete this.content.extensions}}]),e}();s.BatchTable=k;var R=function e(){_classCallCheck(this,e)};R.parse=function(e,t,i){var r=void 0,n=e;t>0&&(r=e.slice(e.byteLength-t),n=e.slice(0,e.byteLength-t));var a=new TextDecoder("utf-8"),o=a.decode(new Uint8Array(n)),l=JSON.parse(o),u=new s.BatchTable(l,r,i),c=[];return Promise.all(c).then(function(){return u})},s.BatchTableParser=R,function(){var e=function(){function e(){_classCallCheck(this,e),this.utf8Decoder=new TextDecoder("utf-8"),this.glTFLoader=new THREE.GLTFLoader,this.glTF2Loader=new THREE.GLTF2Loader,this.matrixChangeUpVectorZtoY=(new THREE.Matrix4).makeRotationX(Math.PI/2),this.matrixChangeUpVectorZtoX=(new THREE.Matrix4).makeRotationZ(-Math.PI/2)}return _createClass(e,[{key:"b3dmToMesh",value:function(e,t){var i=THREE.Loader.prototype.extractUrlBase(t),r={gltfUpAxis:void 0,urlBase:i,overrideMaterials:!1,doNotPatchMaterial:void 0,opacity:1};return this.parse(e,r).then(function(e){return{batchTable:e.batchTable,object3d:e.gltf.scene}})}},{key:"filterUnsupportedSemantics",value:function(e){var t=["MODELVIEW","MODELVIEWINVERSETRANSPOSE","PROJECTION","JOINTMATRIX"];if(e.gltfShader){var i=[];for(var r in e.gltfShader.boundUniforms)i.push(r);var n=!0,a=!1,o=void 0;try{for(var s,l=i[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,c=e.gltfShader.boundUniforms[u].semantic;t.includes(c)||delete e.gltfShader.boundUniforms[u]}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}}}},{key:"parse",value:function(e,t){var i=this,r=t.gltfUpAxis,n=t.urlBase;if(!e)throw new Error("No array buffer provided.");var a=new DataView(e,4),o=0,l={};if(l.magic=i.utf8Decoder.decode(new Uint8Array(e,0,4)),l.magic){l.version=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,l.byteLength=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,l.FTJSONLength=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,l.FTBinaryLength=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,l.BTJSONLength=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,l.BTBinaryLength=a.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT;var u=o+4,c=[],h={},d=new THREE.Vector3;if(l.FTJSONLength>0){var f=u,p=e.slice(f,l.FTJSONLength+f),m=i.utf8Decoder.decode(new Uint8Array(p));h=JSON.parse(m),h.RTC_CENTER?d.fromArray(h.RTC_CENTER):d.set(0,0,0)}if(l.FTBinaryLength>0&&console.warn("3D Tiles feature table binary not supported yet."),l.BTJSONLength>0){var v=u+l.FTJSONLength+l.FTBinaryLength;c.push(s.BatchTableParser.parse(e.slice(v,l.BTJSONLength+v),l.BTBinaryLength,h.BATCH_LENGTH))}else c.push(Promise.resolve({}));var g=u+l.FTJSONLength+l.FTBinaryLength+l.BTJSONLength+l.BTBinaryLength,y=e.slice(g),M=new DataView(y,0,20);return c.push(new Promise(function(e){var a=function(n){var a=!0,o=!1,s=void 0;try{for(var l,u=n.scenes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){l.value.traverse(i.filterUnsupportedSemantics)}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}void 0===r||"Y"===r?n.scene.applyMatrix(i.matrixChangeUpVectorZtoY):"X"===r&&n.scene.applyMatrix(i.matrixChangeUpVectorZtoX),n.scene.position.copy(d);var c=new Uint8Array(y,20,M.getUint32(12,!0)),h=i.utf8Decoder.decode(new Uint8Array(c)),f=JSON.parse(h);f.extensions&&f.extensions.CESIUM_RTC&&(n.scene.position.fromArray(f.extensions.CESIUM_RTC.center),n.scene.updateMatrixWorld(!0));var p=function(e){if(e.frustumCulled=!1,e.material){if(t.overrideMaterials){if(Array.isArray(e.material)){var i=!0,r=!1,n=void 0;try{for(var a,o=e.material[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){a.value.dispose()}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}else e.material.dispose();"object"===_typeof(t.overrideMaterials)&&t.overrideMaterials.isMaterial?e.material=t.overrideMaterials:e.material=new THREE.MeshLambertMaterial({color:16777215})}e.material.transparent=t.opacity<1,e.material.opacity=t.opacity}};n.scene.traverse(p),e(n)};1===M.getUint32(4,!0)?i.glTFLoader.parse(y,a,n):i.glTF2Loader.parse(y,a,n)})),Promise.all(c).then(function(e){return{gltf:e[1],batchTable:e[0]}})}throw new Error("Invalid b3dm file.")}},{key:"parseFeatureBinary",value:function(e,t,i){var r=new THREE.BufferGeometry,n=this.utf8Decoder.decode(new Uint8Array(e,t,i)),a=JSON.parse(n),o=void 0;if(a.POINTS_LENGTH&&(o=a.POINTS_LENGTH),a.POSITION){var s=a.POSITION.byteOffset+n.length+t,l=new Float32Array(e,s,3*o);r.addAttribute("position",new THREE.BufferAttribute(l,3))}if(a.RGB){var u=a.RGB.byteOffset+n.length+t,c=new Uint8Array(e,u,3*o);r.addAttribute("color",new THREE.BufferAttribute(c,3,!0))}if(a.POSITION_QUANTIZED)throw new Error("For pnts loader, POSITION_QUANTIZED: not yet managed");if(a.RGBA)throw new Error("For pnts loader, RGBA: not yet managed");if(a.RGB565)throw new Error("For pnts loader, RGB565: not yet managed");if(a.NORMAL){var h=a.RGB.byteOffset+n.length+t,d=new Float32Array(e,h,3*o);r.addAttribute("normal",new THREE.BufferAttribute(d,3))}if(a.NORMAL_OCT16P)throw new Error("For pnts loader, NORMAL_OCT16P: not yet managed");if(a.BATCH_ID)throw new Error("For pnts loader, BATCH_ID: not yet managed");return{geometry:r,offset:a.RTC_CENTER?(new THREE.Vector3).fromArray(a.RTC_CENTER):void 0}}}]),e}();s.B3dmParser=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r._loader=e._loader,r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._loader=void 0}},{key:"parseTileContent",value:function(e){this._loader.parseTileContent(this._tile,this._contentBuffer,function(t){e(t)})}},{key:"attachToTilesGroup",value:function(e){e.object3d?this._addB3dmMesh(e.object3d):this._addPointMesh(e.point)}},{key:"_addB3dmMesh",value:function(e){for(var t=this._tile._tileset._objectGroup,i=this.meshes,r=0,n=e.children.length;r<n;++r)i.add(e.children[0]);t.add(i),t.updateMatrixWorld(!0)}},{key:"_addPointMesh",value:function(e){var t=this._tile._tileset._objectGroup,i=this.meshes,r=new THREE.PointsMaterial({size:.05,vertexColors:THREE.VertexColors}),n=new THREE.Points(e.geometry,r);e.offset&&n.position.copy(e.offset),i.add(n),t.add(i),t.updateMatrixWorld(!0)}}]),t}(s.AbstractTileContent);s.$3dTileContent=e}(),function(){var e=function(e){function t(e,i,r,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return a._loader=e._loader,a._header=r,a._contentFolder=n,a.matrix=null,a.initialize(),a}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.matrix=void 0,this._loader=void 0,this._header=void 0,this._contentFolder=void 0}},{key:"initialize",value:function(){this._parseTile(this._tileset,this,this._header,this._contentFolder)}},{key:"_parseTile",value:function(e,t,i,r){if(t.boundingBox=s.TilesUtil.getBox(i.boundingVolume),i.refine?("replace"!==i.refine&&"add"!==i.refine||console.warn("lowercase-refine",'This tile uses a lowercase refine "'+i.refine+'". Instead use "'+i.refine.toUpperCase()+'".'),t.refineReplace="REPLACE"===i.refine.toUpperCase()):t.parent?t.refineReplace=t.parent.refineReplace:t.refineReplace=!0,t.geometricError=i.geometricError,i.content?(t.contentUrl=i.content.uri||i.content.url,t.contentUrl.endsWith(".b3dm")?t.contentType=s.TileContentType.DATA_B3DM:t.contentUrl.endsWith(".json")?t.contentType=s.TileContentType.DATA_TILE:t.contentUrl.endsWith(".pnts")?t.contentType=s.TileContentType.DATA_POINT:t.contentType=s.TileContentType.DATA_NULL,t.contentIndex=r+t.contentUrl):t.contentType=s.TileContentType.DATA_NULL,t.contentTypeEmpty&&(t._contentState=s.TileContentState.READY),i.transform&&(t.matrix=(new THREE.Matrix4).fromArray(i.transform)),i.children){var n=!0,a=!1,o=void 0;try{for(var l,u=i.children[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;new s.$3dTileNode(e,t,c,r)}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}}},{key:"fetchContentBlock",value:function(e,t,i){this._loader.loadArrayBufferImmediately(e,function(e){t(e)},function(e){i(e)})}},{key:"createContent",value:function(e){return new s.$3dTileContent(this,e)}}]),t}(s.AbstractTile);s.$3dTileNode=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.jsonLoader=new THREE.FileLoader,this.jsonLoader.setResponseType("json"),this.arrayBufferLoader=new THREE.FileLoader,this.arrayBufferLoader.setResponseType("arraybuffer"),this.taskRunner=new s.LoadTaskRunner(6),this.utf8Decoder=new TextDecoder("utf-8"),this.b3dmParser=new s.B3dmParser,this.pntParser=new s.PntsParser}return _createClass(e,[{key:"destroy",value:function(){this.jsonLoader=null,this.arrayBufferLoader=null,this.taskRunner=null,this.utf8Decoder=null,this.b3dmParser=null,this.pntParser=null}},{key:"loadJson",value:function(e,t,i){this.taskRunner.push(this.jsonLoader,e,t,function(e){i&&i(e)})}},{key:"loadArrayBuffer",value:function(e,t,i){this.taskRunner.push(this.arrayBufferLoader,e,t,function(e){i&&i(e)})}},{key:"loadArrayBufferImmediately",value:function(e,t,i){this.arrayBufferLoader.load(e,function(e){t(e)},void 0,function(){i&&i(event)})}},{key:"parseTileContent",value:function(e,t,i){if(t){var r=this,n=r.utf8Decoder.decode(new Uint8Array(t,0,4));if("{"!==n[0])if("b3dm"==n){console.log("b3dm is load");var a=e.getAbsoluteContentUrl();r.b3dmParser.b3dmToMesh(t,a).then(function(e){i(e)})}else"pnts"==n?(console.log("pnts is load"),r.pntParser.parse(t).then(function(e){i(e)})):console.log("Unsupported magic code:"+n)}}}]),e}();s.$3dTileLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._loader=e.loader,i.maximumScreenSpaceError=void 0,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._loader=void 0}},{key:"loadTileset",value:function(e,t){var i=this;this._loader.loadJson(e,void 0,function(r){var n=e.slice(0,e.lastIndexOf("/")+1),a=i.createTile(n,r.context);void 0===a&&s.Error.throwError(s.ERRORS.DEVELOPE_EXCEPTION,"Tile data error!"),i.root=a,i._boundingBox=a.boundingBox.clone(),i.maximumScreenSpaceError=a.geometricError*s.TilesUtil.OP_GEOMETRIC_ERROR_COEFFICIENT,t&&t(i)})}},{key:"createTile",value:function(e,t,i){if(t.root&&t.root.boundingVolume)return new s.$3dTileNode(this,i,t.root,e)}},{key:"loadChildrenOfTile",value:function(e,t,i){var r=this,n=e.getAbsoluteContentUrl(),a=n.slice(0,n.lastIndexOf("/")+1);this._loader.loadJson(n,t,function(t){if(!r.isDestroyed()){var n=r.createTile(a,t.context,e);i&&i(n)}})}},{key:"updateFrameState",value:function(e){e.transformMatrix=this._transformMatrix,e.maximumScreenSpaceError=this.maximumScreenSpaceError}},{key:"updateGlobalMatrix",value:function(e){this._objectGroup.matrix.copy(e),this._objectGroup.matrix.multiplyMatrices(e,this._transformMatrix),this._objectGroup.matrixAutoUpdate=!1,this._objectGroup.updateMatrixWorld(!0)}},{key:"statisticsMeshInformation",value:function(){for(var e={meshCount:0,visibleCount:0},t=this._objectGroup.children,i=0,r=t.length;i<r;i++){var n=t[i];s.Utils.isGroupObject(n)&&(e.meshCount++,n.visible&&e.visibleCount++)}return e}},{key:"hideAllMesh",value:function(){for(var e in this._objectGroup.children)this._objectGroup.children[e].visible=!1}}]),t}(s.AbstractTileset);s.$3dTileset=e}(),function(){var e=function(e){function t(e,i,r,n,a,o){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return l.viewer=e,l.index=n,l.parseCfgFinish=a,l.debut=o,l.url=r.serverUrl+""+r.databagId+"/tileset.json",l.tilesLoader=new s.$3dTileLoader,l.objectGroup=i.getScene().getOrCreateObjectGroup(s.GlobalData.TdTileGroupName,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0}),r.loadConfig&&r.loadConfig.transformMatrix?(l.setTransformMatrix(r.loadConfig.transformMatrix),l.objectGroup.transformMatrix=l.transformMatrix):(l.setTransformMatrix(new THREE.Matrix4),l.objectGroup.transformMatrix=l.transformMatrix),l._tileset=new s.$3dTileset({loader:l.tilesLoader,objectGroup:l.objectGroup,transformMatrix:l.transformMatrix,tilesCacheScheduler:l.manager.tilesCacheScheduler,debugShowBoundingBox:e._options.debugShowBoundingBox,debugShowStatistics:e._options.debugShowStatistics,databagId:l.databagId}),l._modelMatrix=new THREE.Matrix4,l}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._tileset=this._tileset&&this._tileset.destroy(),this.manager.scene.removeObjectGroupByName(s.GlobalData.TdTileGroupName),this.objectGroup=null,this.tilesLoader.destroy(),this.tilesLoader=null,this._modelMatrix=null,this.parseCfgFinish=null,this.debut=null,this.viewer=null}},{key:"load",value:function(e){var t=this,i=this;return this.manager.chooseRendering(this.statistics.memoeryInfo,!0),this.parseCfgFinish&&this.parseCfgFinish(),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START}),new Promise(function(e,r){t._tileset.loadTileset(t.url,function(t){i.getTransforms().boundingBox=t._boundingBox.clone(),i.manager.updateScene(i);var r=i.viewer.getScene().getRawMatrixGlobal();t.updateGlobalMatrix(r),i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:i.id}),i.debut(i),e()})})}},{key:"updateMatrix",value:function(){var e=this.viewer.getScene().getRawMatrixGlobal();this._tileset.updateGlobalMatrix(e)}},{key:"hasTransforms",value:function(){return!0}},{key:"preUpdate",value:function(e){this._tileset.preUpdate(e)}},{key:"update",value:function(e){this._tileset.update(e)}},{key:"postUpdate",value:function(e){this._tileset.postUpdate(e)}},{key:"setVisible",value:function(e){this.visible=e,this.objectGroup.visible!==e&&(this.objectGroup.visible=e,this.objectGroup.pickableType=e?s.PICKABLETYPE.Geometry:s.PICKABLETYPE.UnPickable,this.manager.setRenderStateChanged(!0))}},{key:"sequence",get:function(){return this._tileset.sequence},set:function(e){this._tileset.sequence=e}}]),t}(s.BaseModel);s.$3dTilesModel=e}(),s.Tile=s.Tile||{};var B=function(){function e(t){_classCallCheck(this,e),this.terrainPath=t,-1===t.indexOf(".terrain")&&(this.terrainPath=t+"{z}/{x}/{y}/"+s.GlobalData.TerrainResourceFileName)}return _createClass(e,[{key:"terrainUrl",value:function(e,t,i){return s.Layer.ImageryProvider.getRequestMapUrl(this.terrainPath,t,i,e)}}]),e}();s.Tile.DemUrl=B,function(){function e(t,n){var a=t.viewer,o=a.cameraControl,l=o.camera,u=l.position.clone(),c=1-i/t.animationTime,h=c*(t.focusLonLat.height-t.focusLonLat.height/t._initEarthRatio)+t.focusLonLat.height/t._initEarthRatio-t.radius,d=t.focusLonLat.lon+(1-c)*t._maxRotationLon;d>Math.PI/THREE.Math.DEG2RAD&&(d-=2*Math.PI/THREE.Math.DEG2RAD);var f=t.focusLonLat.lat+(1-c)*t._maxRotationLat,p=s.Tile.TileMath.fromDegreesYUp(d,f,h,t.radius),m={position:p,target:r,up:THREE.Object3D.DefaultUp,zoom:l.zoom},v={position:u,target:r,up:THREE.Object3D.DefaultUp,zoom:l.zoom};i++;var g=new s.CameraAnimator;g.setDuration(1e3),g.active(v,m,a,function(e){o.update(!0,!0)},function(){i<=t.animationTime?e(t,n):n&&n()})}var t=function(t){function i(e,t){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e.modelManager,{modelId:"earthModel"}));return t=s.Utils.defaultValue(t,{}),r.radius=s.Utils.defaultValue(t.radius,5e3),r.autoRotation=s.Utils.defaultValue(t.autoRotation,!0),r.rotationSpeed=s.Utils.defaultValue(t.rotationSpeed,2*Math.PI/360),r.earthResource=s.Utils.defaultValue(t.earthResource,"earth_0_satellite_ch.jpg"),r.spherePrecision=s.Utils.defaultValue(t.spherePrecision,100),r.animationTime=s.Utils.defaultValue(t.animationTime,5),r._baseGeoCoordinates=t._baseGeoCoordinates,r.focusLonLat=s.Utils.defaultValue(t.focusLonLat,{lon:null,lat:20,height:null}),r.viewer=e,r._rotationAngle=0,r._globeHomeCameraInfo=null,r.earth=null,r.earthMaterial=null,r.animator=null,r._maxRotationLon=Math.PI/THREE.Math.DEG2RAD,r._initEarthRatio=1.5,r}return _inherits(i,t),_createClass(i,[{key:"destroy",value:function(){this.earth=null,this.earthMaterial=null}},{key:"setupEarth",value:function(){var t=this,i=this.viewer,r=this.earthGroup=i.getScene().getOrCreateObjectGroup(s.ObjectGroupType.GLOBALEARTH,{pickableType:s.PICKABLETYPE.UnPickable,globalSpace:!1}),n=new THREE.TextureLoader,a=this;n.crossOrigin=!0;var o=i._staticResourcesHost+"/Earth/"+this.earthResource;return new Promise(function(s,l){n.load(o,function(n){var o=new THREE.SphereBufferGeometry(a.radius,a.spherePrecision,a.spherePrecision),l=a.earthMaterial=new THREE.MeshLambertMaterial({map:n,color:16777215}),u=a.earth=new THREE.Mesh(o,l);o.computeBoundingBox();var c=o.boundingBox;r.add(u),r.updateMatrixWorld(!0),a.getTransforms().boundingBox=c.clone(),a.modelLoaded=!0,t._setCamera(),a._globeHomeCameraInfo={position:i.camera.position.clone(),target:i.camera.target.clone(),up:i.camera.realUp.clone()||i.camera.up.clone(),zoom:i.camera.zoom},a.autoRotation?e(t,function(){s()}):s()},void 0,function(e){l()})})}},{key:"_setCamera",value:function(){var e=this._baseGeoCoordinates.lon+Math.PI/THREE.Math.DEG2RAD;e>Math.PI/THREE.Math.DEG2RAD&&(e-=2*Math.PI/THREE.Math.DEG2RAD);var t=this.viewer.camera;this.focusLonLat.lon=s.Utils.defaultValue(this.focusLonLat.lon,e);var i=this.radius*this._initEarthRatio/Math.sin(.5*THREE.Math.DEG2RAD*t.fov),r=i-this.radius,n=s.Tile.TileMath.fromDegreesYUp(this.focusLonLat.lon,this.focusLonLat.lat,r,this.radius),a=new THREE.Vector3(-n.x,-n.y,-n.z);t.LookAt(new THREE.Vector3,a,THREE.Object3D.DefaultUp),this.focusLonLat.height=s.Utils.defaultValue(this.focusLonLat.height,i),this._maxRotationLat=this._baseGeoCoordinates.lat-this.focusLonLat.lat,this._maxRotationLat=this._maxRotationLat>180?180:this._maxRotationLat}},{key:"_autoRotationAnimation",value:function(e){function t(){var o=r.clone();o.applyAxisAngle(n,i.rotationSpeed),o.multiplyScalar(.998),r=o;var s=new THREE.Vector3(-o.x,-o.y,-o.z);i.viewer.camera.LookAt(a,s,THREE.Object3D.DefaultUp),i._rotationAngle<=1.5*Math.PI?(i._rotationAngle+=i.rotationSpeed,window.requestAnimationFrame(t)):e&&e()}var i=this,r=i._globeHomeCameraInfo.position.clone(),n=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,0);window.requestAnimationFrame(t)}},{key:"_animation",value:function(e){var t=this.viewer,i=t.camera,r=this._globeHomeCameraInfo.position.clone(),n=Math.tan(.5*THREE.Math.DEG2RAD*i.fov),a=s.Tile.TileMath.fromDegreesYUp(this._baseGeoCoordinates.lon,this._baseGeoCoordinates.lat,n,this.radius),o=new THREE.Vector3(0,0,0),l={position:a,target:o,up:THREE.Object3D.DefaultUp,zoom:i.zoom},u={position:r,target:o,up:THREE.Object3D.DefaultUp,zoom:i.zoom};this.animator.active(u,l,t,function(e){t.cameraControl.update(!0,!0)},function(){e&&e()})}},{key:"homeCameraInfo",get:function(){return this._globeHomeCameraInfo}}]),i}(s.BaseModel),i=1,r=new THREE.Vector3(0,0,0);s.VirtualEarth=t}();var L=function(){function e(t,i){_classCallCheck(this,e),this._url=i.url,this.imageryProviderType=s.Utils.defaultValue(i.imageryProviderType,"UrlTemplate"),this.imageryProvider=new s.Layer.ImageryProviderFactory[this.imageryProviderType]({mapUrl:this._url}),this.id=i.layerId||s.Utils.getEncodedString(this._url),this.hasTileMapResource=i.hasTileMapResource||!1,this.layerName=void 0===i.layerName?s.ObjectGroupType.ROADNETWORK:i.layerName,this.tileGroup=t.getScene().getOrCreateObjectGroup(this.layerName,{pickableType:s.PICKABLETYPE.Map,globalSpace:!0}),this._priority=0,this.materialMap={},this.meshNodeMap={},this.loadStateMap={},this._opacity=1,this.mapStyle={},this._fetchMetadata()}return _createClass(e,[{key:"destroy",value:function(){this.url=void 0,this.priority=void 0,this.opacity=void 0,this.disposeMaterial(),this.disposeMeshNode(),this.loadStateMap=null,this.tileGroup.clear(),this.tileGroup=null,this.imageryProviderType=void 0,this.imageryProvider=null,this.mapStyle=null}},{key:"_fetchMetadata",value:function(){var e=this;if(this.hasTileMapResource){var t=this._url.substring(0,this._url.indexOf("{")),i=s.DomUtil.loadXMLDoc(t+"tilemapresource.xml",!1);if(i){var r=s.DomUtil.getXMLAttributeValues(i,"BoundingBox");this.boundingBox=r?new THREE.Box2(new THREE.Vector2(parseFloat(r.minx),parseFloat(r.miny)),new THREE.Vector2(parseFloat(r.maxx),parseFloat(r.maxy))):void 0;var n=s.DomUtil.getXMLAttributeValues(i,"TileFormat");this.tileFormat=n?{mimeType:n["mime-type"],extension:n.extension}:void 0;var a=s.DomUtil.getXMLAttributeValuesByAttrName(i,"TileSet","order");this.minLevel=1/0,this.maxLevel=-1/0,a.forEach(function(t){var i=parseInt(t);i>e.maxLevel&&(e.maxLevel=i),i<e.minLevel&&(e.minLevel=i)})}}}},{key:"getRequestUrl",value:function(e,t,i){return this.imageryProvider.getImageryUrl(e,t,i)}},{key:"isAvailableTile",value:function(e,t,i){if(this.maxLevel&&(i<this.minLevel||i>this.maxLevel))return!1;if(this.boundingBox){var r=s.Tile.TileMath.long2tile(this.boundingBox.min.x,i),n=s.Tile.TileMath.long2tile(this.boundingBox.max.x,i),a=s.Tile.TileMath.lat2tile(this.boundingBox.min.y,i),o=s.Tile.TileMath.lat2tile(this.boundingBox.max.y,i),l=Math.min(a,o),u=Math.max(a,o);if(e<r||e>n||t<l||t>u)return!1}return!0}},{key:"contentLoaded",value:function(e,t,i){return this.loadStateMap[e]&&this.loadStateMap[e][t]&&this.loadStateMap[e][t][i]===s.Tile.DemTilesUtil.LOAD_STATE.LOADED}},{key:"contentUnLoad",value:function(e,t,i){return void 0===this.loadStateMap[e]?(this.loadStateMap[e]={},this.loadStateMap[e][t]={},this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED,!0):void 0===this.loadStateMap[e][t]?(this.loadStateMap[e][t]={},this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED,!0):void 0===this.loadStateMap[e][t][i]?(this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED,!0):this.loadStateMap[e][t][i]===s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED}},{key:"contentUnLoading",value:function(e,t,i){return this.loadStateMap[e][t][i]===s.Tile.DemTilesUtil.LOAD_STATE.MAT_PARSING}},{key:"setContentUnLoad",value:function(e,t,i){this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED}},{key:"setContentLoaded",value:function(e,t,i){this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.LOADED}},{key:"setContentLoading",value:function(e,t,i){this.loadStateMap[e][t][i]=s.Tile.DemTilesUtil.LOAD_STATE.MAT_PARSING}},{key:"disposeMeshNode",value:function(){for(var e in this.meshNodeMap)for(var t in this.meshNodeMap[e])for(var i in this.meshNodeMap[e][t])this.meshNodeMap[e][t][i]&&this.meshNodeMap[e][t][i].parent.remove(this.meshNodeMap[e][t][i]);this.meshNodeMap=null}},{
key:"disposeMaterial",value:function(){for(var e in this.materialMap)for(var t in this.materialMap[e])for(var i in this.materialMap[e][t])this.materialMap[e][t][i]&&this.materialMap[e][t][i].dispose();this.materialMap=null}},{key:"show",value:function(){this.tileGroup?this.tileGroup.visible=!0:console.warn("The tile doesn't exist.")}},{key:"hide",value:function(){this.tileGroup?this.tileGroup.visible=!1:console.warn("The tile doesn't exist.")}},{key:"setStyle",value:function(e){this.mapStyle=e;for(var t in this.materialMap){var i=this.materialMap[t];i.updateStyle&&i.updateStyle(e)}}},{key:"updateMeshRenderOrder",value:function(e){for(var t in this.meshNodeMap)for(var i in this.meshNodeMap[t])for(var r in this.meshNodeMap[t][i])this.meshNodeMap[t][i][r]&&(this.meshNodeMap[t][i][r].renderOrder=e)}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e}}]),e}();s.Tile.TextureLayer=L,function(){var e=function e(){_classCallCheck(this,e)};e.LOAD_STATE={UNLOADED:0,GEO_LOADING:1,GEO_LOADED:2,MAT_PARSING:3,LOADED:4,FAILED:5},e.TWO_ACCURACY=.01,e.InvalidTerrainValue=-32768,e.isTransparent=function(t){return 1-t>e.TWO_ACCURACY},s.Tile.DemTilesUtil=e}();var O=function(){function e(t,i,r){_classCallCheck(this,e),this.zoom=t,this.x=i,this.y=r,this.longLatBox=s.Tile.TileMath.tile2boundingBox(i,r,t),this.box=null,this.meshNode=null,this.meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED,this.skirt=null,this.geometry=null,this.skirtGeometry=null,this.texture=null,this.material=null,this.needUpdateTexture=!1}return _createClass(e,[{key:"destroy",value:function(){this.zoom=null,this.x=null,this.y=null,this.longLatBox=null,this.box=null,this.geometryLoadState=null,this.skirt&&this.skirt.parent.remove(this.skirt),this.meshNode&&(this.meshNode.parent.remove(this.meshNode),this.material.dispose(),this.texture.dispose()),this.geometry&&this.geometry.dispose(),this.skirtGeometry&&this.skirtGeometry.dispose(),this.meshNode=null,this.skirt=null,this.geometry=null,this.skirtGeometry=null,this.texture=null,this.material=null,this.needUpdateTexture=void 0}}]),e}();s.Tile.DemTile=O,function(){s.Tile=s.Tile||{};var e=function e(){_classCallCheck(this,e)};e.earthRadius=6371e3,e.mercatorPerimeter=20037508.3427892,e.unitScale=1e3,e.earthHighestAltitude=8865.43*e.unitScale*2,e.isLongitude=function(e){return e>=-180&&e<=180},e.isLatitude=function(e){return e>=-85.0511&&e<=85.0511},e.long2tile=function(e,t){return Math.floor((e+180)/360*Math.pow(2,t))},e.lat2tile=function(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))},e.tile2long=function(e,t){return e/Math.pow(2,t)*360-180},e.tile2lat=function(e,t){var i=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))},e.tile2boundingBox=function(e,t,i){return{north:this.tile2lat(t,i),south:this.tile2lat(t+1,i),west:this.tile2long(e,i),east:this.tile2long(e+1,i)}},e.boundingBox2Tiles=function(t,i,r,n,a){var o,s,l,u,c=[],h=e.long2tile(t,a),d=e.long2tile(i,a),f=e.lat2tile(r,a),p=e.lat2tile(n,a);o=Math.min(h,d),l=Math.max(h,d),s=Math.min(f,p),u=Math.max(f,p);for(var m=o;m<=l;m++)for(var v=s;v<=u;v++)c.push({tileX:m,tileY:v});return c},e.getMercatorPerimeterByLat=function(t){return e.mercatorPerimeter*Math.cos(t*Math.PI/180)},e.wgs84ToGCJ02=function(t,i){var r=.006693421622965943,i=+i,t=+t,n=e._transformLat(t-105,i-35),a=e._transformLng(t-105,i-35),o=i/180*Math.PI,s=Math.sin(o);s=1-r*s*s;var l=Math.sqrt(s);return n=180*n/(e.earthRadius*(1-r)/(s*l)*Math.PI),a=180*a/(e.earthRadius/l*Math.cos(o)*Math.PI),[t+a,i+n]},e._transformLat=function(e,t){var t=+t,e=+e,i=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Math.PI)+20*Math.sin(2*e*Math.PI))/3,i+=2*(20*Math.sin(t*Math.PI)+40*Math.sin(t/3*Math.PI))/3,i+=2*(160*Math.sin(t/12*Math.PI)+320*Math.sin(t*Math.PI/30))/3},e._transformLng=function(e,t){var t=+t,e=+e,i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Math.PI)+20*Math.sin(2*e*Math.PI))/3,i+=2*(20*Math.sin(e*Math.PI)+40*Math.sin(e/3*Math.PI))/3,i+=2*(150*Math.sin(e/12*Math.PI)+300*Math.sin(e/30*Math.PI))/3},e.lonLat2Mercator=function(t,i,r,n){r=r||e.mercatorPerimeter,n=n||e.unitScale;var a=new THREE.Vector2,o=t*r/180,s=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return s=s*r/180,a.x=o*n,a.y=s*n,a},e.mercator2lonLat=function(t,i,r){i=i||e.mercatorPerimeter,r=r||e.unitScale;var n=new THREE.Vector2,a=t.x/(r*i)*180,o=t.y/(r*i)*180;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),n.x=a,n.y=o,n},e.toRadians=function(e){return e*Math.PI/180},e.fromDegreesYUp=function(t,i,r,n){n=s.Utils.defaultValue(n,e.earthRadius);var a=(t+90)*(Math.PI/180),o=(90-i)*(Math.PI/180),l=Math.pow(n,2),u=new THREE.Vector3(l,l,l),c=Math.sin(o),h=new THREE.Vector3;h.x=c*Math.sin(a),h.y=Math.cos(o),h.z=c*Math.cos(a),h.normalize();var d=new THREE.Vector3;d.multiplyVectors(u,h);var f=Math.sqrt(h.dot(d));return d.divideScalar(f),h.multiplyScalar(r),d.add(h)},e.fromDegrees=function(t,i,r){r=void 0==r?0:r,t=this.toRadians(t),i=this.toRadians(i);var n=new THREE.Vector3,a=new THREE.Vector3,o=new THREE.Vector3(e.earthRadius*e.earthRadius,e.earthRadius*e.earthRadius,e.earthRadius*e.earthRadius),s=Math.cos(i);n.x=s*Math.cos(t),n.y=s*Math.sin(t),n.z=Math.sin(i),n.normalize(),a.multiplyVectors(o,n);var l=Math.sqrt(n.dot(a));return a.divideScalar(l),n.multiplyScalar(r),a.add(n)},e.createHeightArray=function(e,t){for(var i=new Array(t+1),r=0;r<i.length;r++)i[r]=new Array(t+1);for(var n=e.length,a=t/(n-1),r=0;r<n-1;++r)for(var o=0;o<n-1;++o)for(var s=[e[r][o],e[r][o+1],e[r+1][o],e[r+1][o+1]],l=this.sampleSquare(s,a),u=r*a;u<=(r+1)*a;++u)for(var c=o*a;c<=(o+1)*a;++c)i[u][c]=l[u-r*a][c-o*a];return i},e.sampleSquare=function(e,t){for(var i=new Array(t+1),r=0;r<i.length;r++)i[r]=new Array(t+1);for(var r=0;r<=t;++r)i[0][r]=(t-r)/t*e[0]+(1-(t-r)/t)*e[1],i[t][r]=(t-r)/t*e[2]+(1-(t-r)/t)*e[3],i[r][0]=(t-r)/t*e[0]+(1-(t-r)/t)*e[2],i[r][t]=(t-r)/t*e[1]+(1-(t-r)/t)*e[3];for(var r=1;r<t;++r)for(var n=1;n<t;++n)i[r][n]=i[r][0]+(i[r][t]-i[r][0])/t*n;return i},e.generateHeight=function(e,t){for(var i=e*t,r=new Uint8Array(i),n=this.improvedNoise(),a=1,o=100*Math.random(),s=0;s<4;s++){for(var l=0;l<i;l++){var u=l%e,c=~~(l/e);r[l]+=Math.abs(n.noise(u/a,c/a,o)*a*1.75)}a*=5}return r},e.improvedNoise=function(){function e(e){return e*e*e*(e*(6*e-15)+10)}function t(e,t,i){return t+e*(i-t)}function i(e,t,i,r){var n=15&e,a=n<8?t:i,o=n<4?i:12==n||14==n?t:r;return(0==(1&n)?a:-a)+(0==(2&n)?o:-o)}for(var r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],n=0;n<256;n++)r[256+n]=r[n];return{noise:function(n,a,o){var s=Math.floor(n),l=Math.floor(a),u=Math.floor(o),c=255&s,h=255&l,d=255&u;n-=s,a-=l,o-=u;var f=n-1,p=a-1,m=o-1,v=e(n),g=e(a),y=e(o),M=r[c]+h,E=r[M]+d,b=r[M+1]+d,x=r[c+1]+h,I=r[x]+d,T=r[x+1]+d;return t(y,t(g,t(v,i(r[E],n,a,o),i(r[I],f,a,o)),t(v,i(r[b],n,p,o),i(r[T],f,p,o))),t(g,t(v,i(r[E+1],n,a,m),i(r[I+1],f,a,o-1)),t(v,i(r[b+1],n,p,m),i(r[T+1],f,p,m))))}}},s.Tile.TileMath=e}(),function(){s.Tile=s.Tile||{};var e=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),t}(s.Tile.TileMath);e.isLatitude=function(e){return e>=-90&&e<=90},e.long2tile=function(t,i){return Math.floor(Math.pow(2,i-26)*t*Math.PI*e.earthRadius/180)},e.lat2tile=function(t,i){return Math.floor(Math.pow(2,i-26)*e.earthRadius*Math.log(Math.tan(t*Math.PI/180)+Math.cos(t*Math.PI/180)))},s.Tile.TileMathBd=e}();var P=function(){function e(t,i){_classCallCheck(this,e),this.limit=t,this.bufferSize=i,this.store=[],this.active=0,this.taskInfo={},this.terrainLoader=new THREE.FileLoader,this.terrainLoader.setResponseType("arraybuffer"),this.terrainLoader.crossOrigin=!0}return _createClass(e,[{key:"destroy",value:function(){this.limit=null,this.store=null,this.active=null,this.taskInfo=null,this.bufferSize=null,this.terrainLoader=null}},{key:"clear",value:function(){this.taskInfo={}}},{key:"next",value:function(){if(this.store.length){var e=this.store.shift(),t=e[0],i=e[1],r=e[2];this.taskInfo[t].added?this.taskInfo[t].data?"failure"==scope.taskInfo[t].data?r():i(this.taskInfo[t].data):(this.taskInfo[t].successCallbackList.push(i),this.taskInfo[t].failureCallbackList.push(r)):this.runTask(t)}}},{key:"runTask",value:function(e){var t=this;t.active++,t.taskInfo[e].added=!0,t.terrainLoader.load(e,function(i){t.active--,t.taskInfo[e].data=i;for(var r=0,n=t.taskInfo[e].successCallbackList.length;r<n;++r)t.taskInfo[e].successCallbackList[r](i);t.next()},void 0,function(i){t.active--,t.taskInfo[e].data="failure";for(var r=0,n=t.taskInfo[e].failureCallbackList.length;r<n;++r)t.taskInfo[e].failureCallbackList[r]();t.next()})}},{key:"push",value:function(e,t,i){if(this.taskInfo[e])return void(this.taskInfo[e].data?t(this.taskInfo[e].data):(this.taskInfo[e].successCallbackList.push(t),this.taskInfo[e].failureCallbackList.push(i)));this.taskInfo[e]={},this.taskInfo[e].successCallbackList=[t],this.taskInfo[e].failureCallbackList=[i],this.active<this.limit?this.runTask(e):this.store.push([e,t,i])}}]),e}();s.Tile.TerrainScheduler=P;var D=function(){function e(){_classCallCheck(this,e),this.indexMap={},this.uvMap={}}return _createClass(e,[{key:"destroy",value:function(){this.indexMap=null,this.uvMap=null}},{key:"getIndexBySeg",value:function(e){if(this.indexMap[e])return this.indexMap[e];for(var t=[],i=[],r=0,n=0;n<=e;n++){for(var a=[],o=0;o<=e;o++)a.push(r),r++;i.push(a)}for(var n=0;n<e;n++)for(var o=0;o<e;o++){var s=i[n][o+1],l=i[n][o],u=i[n+1][o],c=i[n+1][o+1];this.bufferize(c,l,s,t),this.bufferize(c,u,l,t)}return this.indexMap[e]=t,t}},{key:"bufferize",value:function(e,t,i,r){r.push(e),r.push(t),r.push(i)}},{key:"computeBuffer",value:function(){}},{key:"createSkirt",value:function(e,t,i,r,n,a){e=e.concat(t.reverse());for(var o=[],s=(new THREE.Vector3).fromArray(n.position).distanceTo((new THREE.Vector3).fromArray(n.position,3)),l=0;l<e.length;l++){var u=e[l],c=3*i,h=3*u;n.position[c+0]=n.position[h+0]-n.normal[h+0]*s,n.position[c+1]=n.position[h+1]-n.normal[h+1]*s,n.position[c+2]=n.position[h+2]-n.normal[h+2]*s,n.normal[c+0]=n.normal[h+0],n.normal[c+1]=n.normal[h+1],n.normal[c+2]=n.normal[h+2],n.uvs[2*i+0]=n.uvs[2*u+0],n.uvs[2*i+1]=n.uvs[2*u+1];var d=(l+1)%e.length,f=u,p=i,m=0===d?r:i+1,v=e[d];this.bufferize(f,p,m,o),this.bufferize(f,m,v,o),i++}return a=a.concat(o)}},{key:"createSkirt2",value:function(e,t,i,r,n,a){e=e.concat(t.reverse());var o=[],s=(new THREE.Vector3).fromArray(n.position).distanceTo((new THREE.Vector3).fromArray(n.position,3)),l={index:null,position:null,normal:null,uvs:[],center:null},u=e.length/4,c=4*u*2;l.position=new Float32Array(3*c),l.normal=new Float32Array(3*c),l.uvs=new Float32Array(3*c);for(var h=0;h<e.length;h++){var d=e[h],f=6*h,p=4*h,m=3*d;l.position[f+0]=n.position[m+0],l.position[f+1]=n.position[m+1],l.position[f+2]=n.position[m+2],l.position[f+3]=n.position[m+0]-n.normal[m+0]*s,l.position[f+4]=n.position[m+1]-n.normal[m+1]*s,l.position[f+5]=n.position[m+2]-n.normal[m+2]*s,l.normal[f+0]=n.normal[m+0],l.normal[f+1]=n.normal[m+1],l.normal[f+2]=n.normal[m+2],l.normal[f+3]=n.normal[m+0],l.normal[f+4]=n.normal[m+1],l.normal[f+5]=n.normal[m+2],l.uvs[p+0]=n.uvs[2*d+0],l.uvs[p+1]=n.uvs[2*d+1],l.uvs[p+2]=n.uvs[2*d+0],l.uvs[p+3]=n.uvs[2*d+1];var v=(h+1)%e.length,g=2*h,y=2*h+1,M=0===v?1:2*h+3,E=0===v?0:2*h+2;this.bufferize(g,y,M,o),this.bufferize(g,M,E,o)}l.index=o;var b=new THREE.BufferGeometry;return b.setIndex(l.index),b.addAttribute("position",new THREE.BufferAttribute(l.position,3)),b.addAttribute("uv",new THREE.BufferAttribute(l.uvs,2)),b.addAttribute("normal",new THREE.Float32BufferAttribute(l.normal,3)),b.computeVertexNormals(),b}}]),e}();s.Tile.TileBuilder=D;var N=new THREE.Vector3,_=new THREE.Matrix4,H=new THREE.Vector2,F=new THREE.Vector2,U=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){}},{key:"computePlaneGeometry",value:function(e,t,i,r,n,a){a=a||s.Tile.TileMath.unitScale;var o={index:null,position:null,normal:null,uvs:[],center:null};i=void 0==i?16:i;var l=(i+1)*(i+1);o.position=new Float32Array(3*l),o.normal=new Float32Array(3*l),o.uvs=new Float32Array(2*l);for(var u=[],c=[],h=0,d=e/2,f=t/2,p=e/i,m=t/i,v=0;v<=i;++v){for(var g=[],y=v*m-f,M=0;M<=i;++M){var E=M*p-d;o.position[3*h]=E,o.position[3*h+1]=y,o.position[3*h+2]=r[i-v][M]*a*s.GlobalData.TerrainScale,o.normal[3*h]=0,o.normal[3*h+1]=0,o.normal[3*h+2]=1,o.uvs[2*h]=M/i,o.uvs[2*h+1]=v/i,n||0!==v&&v!==i&&(M===i?u.push(h):0===M&&c.push(h)),g.push(h),h++}0===v?u=u.concat(g):v===i&&(u=u.concat(g.slice().reverse()))}var b=this.getIndexBySeg(i),x=h,I=null;n||(I=this.createSkirt2(u,c,h,x,o,b)),o.index=b;var T=new THREE.BufferGeometry;return T.setIndex(o.index),T.addAttribute("position",new THREE.BufferAttribute(o.position,3)),T.addAttribute("uv",new THREE.BufferAttribute(o.uvs,2)),T.addAttribute("normal",new THREE.Float32BufferAttribute(o.normal,3)),T.computeVertexNormals(),[T,I]}},{key:"getTileGeometryTriangular",value:function(e,t,i){if(i){var r,n;null!=i.prePositionArray?(r=[].concat(_toConsumableArray(i.prePositionArray)),n=[].concat(_toConsumableArray(i.preIndexArray))):(r=[].concat(_toConsumableArray(i.attributes.position.array)),n=[].concat(_toConsumableArray(i.index.array)));for(var a=[],o=[],s=[],l=0;l<n.length;l+=3){var u=r[3*n[l]],c=r[3*n[l]+1],h=r[3*n[l]+2],d=r[3*n[l+1]],f=r[3*n[l+1]+1],p=r[3*n[l+1]+2],m=r[3*n[l+2]],v=r[3*n[l+2]+1],g=r[3*n[l+2]+2],y=0;N.set(u,c,h),N.applyMatrix4(t);var M=e.isInRegionDrawing(N);M&&y++,N.set(d,f,p),N.applyMatrix4(t);var E=e.isInRegionDrawing(N);E&&y++,N.set(m,v,g),N.applyMatrix4(t);if(e.isInRegionDrawing(N)&&y++,1==y){var b,x=[];M?(b={x:u,y:c,z:h},x.push({x:d,y:f,z:p}),x.push({x:m,y:v,z:g})):E?(b={x:d,y:f,z:p},x.push({x:u,y:c,z:h}),x.push({x:m,y:v,z:g})):(b={x:m,y:v,z:g},x.push({x:u,y:c,z:h}),x.push({x:d,y:f,z:p}));var I=e.getIntersectPos(b,x);if(2==I.length&&I[0].index!=I[1].index&&null!=I[0].point){var T=I[0].point;e.checkHighLowTerrain([b.x,b.y,b.z],[I[0].x,I[0].y,I[0].z],[T.x,T.y,T.z],a,o,s),e.checkHighLowTerrain([b.x,b.y,b.z],[I[1].x,I[1].y,I[1].z],[T.x,T.y,T.z],a,o,s)}else 2==I.length&&e.checkHighLowTerrain([b.x,b.y,b.z],[I[0].x,I[0].y,I[0].z],[I[1].x,I[1].y,I[1].z],a,o,s)}else if(2==y){var x,b=[];M?E?(x={x:m,y:v,z:g},b.push({x:u,y:c,z:h}),b.push({x:d,y:f,z:p})):(x={x:d,y:f,z:p},b.push({x:u,y:c,z:h}),b.push({x:m,y:v,z:g})):(x={x:u,y:c,z:h},b.push({x:d,y:f,z:p}),b.push({x:m,y:v,z:g}));var I=e.getIntersectPos(x,b);if(2==I.length&&I[0].index!=I[1].index&&null!=I[0].point){var T=I[0].point;e.checkHighLowTerrain([b[0].x,b[0].y,b[0].z],[b[1].x,b[1].y,b[1].z],[T.x,T.y,T.z],a,o,s),e.checkHighLowTerrain([b[0].x,b[0].y,b[0].z],[I[0].x,I[0].y,I[0].z],[T.x,T.y,T.z],a,o,s),e.checkHighLowTerrain([b[1].x,b[1].y,b[1].z],[I[1].x,I[1].y,I[1].z],[T.x,T.y,T.z],a,o,s)}else 2==I.length&&(e.checkHighLowTerrain([b[0].x,b[0].y,b[0].z],[b[1].x,b[1].y,b[1].z],[I[0].x,I[0].y,I[0].z],a,o,s),e.checkHighLowTerrain([I[0].x,I[0].y,I[0].z],[I[1].x,I[1].y,I[1].z],[b[1].x,b[1].y,b[1].z],a,o,s))}else 3==y&&e.checkHighLowTerrain([u,c,h],[d,f,p],[m,v,g],a,o,s)}}return[a,o,s]}},{key:"updateGeometryForFlatten",value:function(e,t,i,r,n,a,o,l,u,c,h){i=void 0==i?16:i;var d=0;if(_.getInverse(l),u){u.prePositionArray||(u.prePositionArray=[].concat(_toConsumableArray(u.attributes.position.array)),u.preNormalArray=[].concat(_toConsumableArray(u.attributes.normal.array)),u.preUVArray=[].concat(_toConsumableArray(u.attributes.uv.array)),u.preIndexArray=[].concat(_toConsumableArray(u.index.array)));var f=[].concat(_toConsumableArray(u.prePositionArray)),p=[].concat(_toConsumableArray(u.preNormalArray)),m=[].concat(_toConsumableArray(u.preUVArray)),v=[].concat(_toConsumableArray(u.preIndexArray)),g={};if(!h)for(var y=[].concat(_toConsumableArray(v)),M=0;M<y.length;M+=3){var E=f[3*y[M]],b=f[3*y[M]+1],x=u.prePositionArray[3*y[M]+2],I=f[3*y[M+1]],T=f[3*y[M+1]+1],w=u.prePositionArray[3*y[M+1]+2],C=f[3*y[M+2]],S=f[3*y[M+2]+1],A=u.prePositionArray[3*y[M+2]+2];N.set(E,b,x),N.applyMatrix4(l),N.y=N.z;var k=0,R=o.isInFlattenRegionDrawing(N);R&&k++,N.set(I,T,w),N.applyMatrix4(l),N.y=N.z;var B=o.isInFlattenRegionDrawing(N);B&&k++,N.set(C,S,A),N.applyMatrix4(l),N.y=N.z;var L=o.isInFlattenRegionDrawing(N);L&&k++;var O=m[2*y[M]],P=m[2*y[M]+1],D=m[2*y[M+1]],U=m[2*y[M+1]+1],G=m[2*y[M+2]],z=m[2*y[M+2]+1];if(1==k)if(R){f[3*y[M]+2]=R.elevation*a*s.GlobalData.TerrainScale;var j=g[R.id];j||(j=R.transformPolygon(_),g[R.id]=j),H.set(E,b),F.set(I,T);var V=s.Utils.linePolygonIntersection(H,F,j);H.set(C,S),F.set(E,b);var W=s.Utils.linePolygonIntersection(H,F,j);f.push(V.x),f.push(V.y),f.push(w),f.push(W.x),f.push(W.y),f.push(A),f.push(V.x),f.push(V.y),f.push(R.elevation*a*s.GlobalData.TerrainScale),f.push(W.x),f.push(W.y),f.push(R.elevation*a*s.GlobalData.TerrainScale);var Y=(V.x-E)/(I-E+s.Math.EPSILON6),Z=(V.y-b)/(T-b+s.Math.EPSILON6),Q=(W.x-C)/(E-C+s.Math.EPSILON6),X=(W.y-S)/(b-S+s.Math.EPSILON6);m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(G+(O-G)*Q),m.push(z+(P-z)*X),m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(G+(O-G)*Q),m.push(z+(P-z)*X),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(J-4),v.push(J-3),v.push(J-1),v.push(J-4),v.push(J-1),v.push(J-2),v.push(v[M+1]),v.push(v[M+2]),v.push(J-3),v.push(v[M+1]),v.push(J-3),v.push(J-4),v[M+1]=J-2,v[M+2]=J-1}else if(B){f[3*y[M+1]+2]=B.elevation*a*s.GlobalData.TerrainScale;var j=g[B.id];j||(j=B.transformPolygon(_),g[B.id]=j),H.set(E,b),F.set(I,T);var V=s.Utils.linePolygonIntersection(H,F,j);H.set(I,T),F.set(C,S);var K=s.Utils.linePolygonIntersection(H,F,j);f.push(V.x),f.push(V.y),f.push(x),f.push(K.x),f.push(K.y),f.push(A),f.push(V.x),f.push(V.y),f.push(B.elevation*a*s.GlobalData.TerrainScale),f.push(K.x),f.push(K.y),f.push(B.elevation*a*s.GlobalData.TerrainScale);var Y=(V.x-E)/(I-E+s.Math.EPSILON6),Z=(V.y-b)/(T-b+s.Math.EPSILON6),q=(K.x-I)/(C-I+s.Math.EPSILON6),$=(K.y-T)/(S-T+s.Math.EPSILON6);m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(D+(G-D)*q),m.push(U+(z-U)*$),m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(D+(G-D)*q),m.push(U+(z-U)*$),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(J-2),v.push(J-1),v.push(J-3),v.push(J-2),v.push(J-3),v.push(J-4),v.push(v[M]),v.push(J-4),v.push(J-3),v.push(v[M]),v.push(J-3),v.push(v[M+2]),v[M]=v[M+1],v[M+1]=J-1,v[M+2]=J-2}else{f[3*y[M+2]+2]=L.elevation*a*s.GlobalData.TerrainScale;var j=g[L.id];j||(j=L.transformPolygon(_),g[L.id]=j),H.set(E,b),F.set(C,S);var ee=s.Utils.linePolygonIntersection(H,F,j);H.set(C,S),F.set(I,T);var te=s.Utils.linePolygonIntersection(H,F,j);f.push(ee.x),f.push(ee.y),f.push(x),f.push(te.x),f.push(te.y),f.push(w),f.push(ee.x),f.push(ee.y),f.push(L.elevation*a*s.GlobalData.TerrainScale),f.push(te.x),f.push(te.y),f.push(L.elevation*a*s.GlobalData.TerrainScale);var ie=(ee.x-E)/(C-E+s.Math.EPSILON6),re=(ee.y-b)/(S-b+s.Math.EPSILON6),ne=(te.x-C)/(I-C+s.Math.EPSILON6),ae=(te.y-S)/(T-S+s.Math.EPSILON6);m.push(O+(G-O)*ie),m.push(P+(z-P)*re),m.push(G+(D-G)*ne),m.push(z+(U-z)*ae),m.push(O+(G-O)*ie),m.push(P+(z-P)*re),m.push(G+(D-G)*ne),m.push(z+(U-z)*ae),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(J-4),v.push(J-1),v.push(J-2),v.push(J-4),v.push(J-3),v.push(J-1),v.push(v[M]),v.push(v[M+1]),v.push(J-3),v.push(v[M]),v.push(J-3),v.push(J-4),v[M]=v[M+2],v[M+1]=J-2,v[M+2]=J-1}else if(2==k)if(R)if(B){f[3*y[M]+2]=R.elevation*a*s.GlobalData.TerrainScale,f[3*y[M+1]+2]=B.elevation*a*s.GlobalData.TerrainScale;var oe=g[R.id];oe||(oe=R.transformPolygon(_),g[R.id]=oe);var se=g[B.id];se||(se=B.transformPolygon(_),g[B.id]=se),H.set(E,b),F.set(C,S);var ee=s.Utils.linePolygonIntersection(H,F,oe);ee||(ee=s.Utils.linePolygonIntersection(H,F,se)),H.set(C,S),F.set(I,T);var te=s.Utils.linePolygonIntersection(H,F,oe);te||(te=s.Utils.linePolygonIntersection(H,F,se)),f.push(ee.x),f.push(ee.y),f.push(R.elevation*a*s.GlobalData.TerrainScale),f.push(te.x),f.push(te.y),f.push(R.elevation*a*s.GlobalData.TerrainScale),f.push(ee.x),f.push(ee.y),f.push(A),f.push(te.x),f.push(te.y),f.push(A);var ie=(ee.x-E)/(C-E+s.Math.EPSILON6),re=(ee.y-b)/(S-b+s.Math.EPSILON6),ne=(te.x-C)/(I-C+s.Math.EPSILON6),ae=(te.y-S)/(T-S+s.Math.EPSILON6);m.push(O+(G-O)*ie),m.push(P+(z-P)*re),m.push(G+(D-G)*ne),m.push(z+(U-z)*ae),m.push(O+(G-O)*ie),m.push(P+(z-P)*re),m.push(G+(D-G)*ne),m.push(z+(U-z)*ae),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(v[M]),v.push(J-3),v.push(J-4),v.push(J-4),v.push(J-3),v.push(J-1),v.push(J-4),v.push(J-1),v.push(J-2),v.push(v[M+2]),v.push(J-2),v.push(J-1),v[M+2]=J-3}else{f[3*y[M]+2]=R.elevation*a*s.GlobalData.TerrainScale,f[3*y[M+2]+2]=L.elevation*a*s.GlobalData.TerrainScale;var oe=g[R.id];oe||(oe=R.transformPolygon(_),g[R.id]=oe);var le=g[L.id];le||(le=L.transformPolygon(_),g[L.id]=le),H.set(E,b),F.set(I,T);var V=s.Utils.linePolygonIntersection(H,F,oe);V||(V=s.Utils.linePolygonIntersection(H,F,le)),H.set(I,T),F.set(C,S);var K=s.Utils.linePolygonIntersection(H,F,oe);K||(K=s.Utils.linePolygonIntersection(H,F,le)),f.push(V.x),f.push(V.y),f.push(R.elevation*a*s.GlobalData.TerrainScale),f.push(K.x),f.push(K.y),f.push(R.elevation*a*s.GlobalData.TerrainScale),f.push(V.x),f.push(V.y),f.push(w),f.push(K.x),f.push(K.y),f.push(w);var Y=(V.x-E)/(I-E+s.Math.EPSILON6),Z=(V.y-b)/(T-b+s.Math.EPSILON6),q=(K.x-I)/(C-I+s.Math.EPSILON6),$=(K.y-T)/(S-T+s.Math.EPSILON6);m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(D+(G-D)*q),m.push(U+(z-U)*$),m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(D+(G-D)*q),m.push(U+(z-U)*$),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(v[M+2]),v.push(J-4),v.push(J-3),v.push(J-2),v.push(J-3),v.push(J-4),v.push(J-2),v.push(J-1),v.push(J-3),v.push(v[M+1]),v.push(J-1),v.push(J-2),v[M+1]=J-4}else{f[3*y[M+1]+2]=B.elevation*a*s.GlobalData.TerrainScale,f[3*y[M+2]+2]=L.elevation*a*s.GlobalData.TerrainScale;var se=g[B.id];se||(se=B.transformPolygon(_),g[B.id]=se);var le=g[L.id];le||(le=L.transformPolygon(_),g[L.id]=le),H.set(E,b),F.set(I,T);var V=s.Utils.linePolygonIntersection(H,F,se);V||(V=s.Utils.linePolygonIntersection(H,F,le)),H.set(C,S),F.set(E,b);var W=s.Utils.linePolygonIntersection(H,F,se);W||(W=s.Utils.linePolygonIntersection(H,F,le)),f.push(V.x),f.push(V.y),f.push(B.elevation*a*s.GlobalData.TerrainScale),f.push(W.x),f.push(W.y),f.push(B.elevation*a*s.GlobalData.TerrainScale),f.push(V.x),f.push(V.y),f.push(x),f.push(W.x),f.push(W.y),f.push(x);var Y=(V.x-E)/(I-E+s.Math.EPSILON6),Z=(V.y-b)/(T-b+s.Math.EPSILON6),Q=(W.x-C)/(E-C+s.Math.EPSILON6),X=(W.y-S)/(b-S+s.Math.EPSILON6);m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(G+(O-G)*Q),m.push(z+(P-z)*X),m.push(O+(D-O)*Y),m.push(P+(U-P)*Z),m.push(G+(O-G)*Q),m.push(z+(P-z)*X),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1),p.push(0),p.push(0),p.push(1);var J=f.length/3;v.push(v[M+1]),v.push(v[M+2]),v.push(J-3),v.push(J-4),v.push(J-1),v.push(J-2),v.push(J-4),v.push(J-3),v.push(J-1),v.push(v[M]),v.push(J-2),v.push(J-1),v[M]=v[M+1],v[M+1]=J-3,v[M+2]=J-4}else 3==k&&(f[3*y[M]+2]=R.elevation*a*s.GlobalData.TerrainScale,f[3*y[M+1]+2]=B.elevation*a*s.GlobalData.TerrainScale,f[3*y[M+2]+2]=L.elevation*a*s.GlobalData.TerrainScale)}u.setIndex(v),u.removeAttribute("position"),u.removeAttribute("uv"),u.removeAttribute("normal"),u.addAttribute("position",new THREE.Float32BufferAttribute(f,3)),u.addAttribute("uv",new THREE.Float32BufferAttribute(m,2)),u.addAttribute("normal",new THREE.Float32BufferAttribute(p,3))}if(c){c.prePositionArray||(c.prePositionArray=[].concat(_toConsumableArray(c.attributes.position.array)));var ue=[].concat(_toConsumableArray(c.prePositionArray));if(!h){for(var ce=[],he=[],de=0;de<=i;++de){for(var fe=[],pe=0;pe<=i;++pe)n||0!==de&&de!==i&&(pe===i?ce.push(d):0===pe&&he.push(d)),fe.push(d),d++;0===de?ce=ce.concat(fe):de===i&&(ce=ce.concat(fe.slice().reverse()))}var me=p.slice(0,u.preNormalArray.length),ve=f.slice(0,u.prePositionArray.length);ce=ce.concat(he.reverse());for(var ge=(new THREE.Vector3).fromArray(ve).distanceTo((new THREE.Vector3).fromArray(ve,3)),M=0;M<ce.length;M++){var ye=ce[M],Me=6*M,Ee=3*ye;ue[Me+2]=ve[Ee+2],ue[Me+5]=ve[Ee+2]-me[Ee+2]*ge}for(var be=c.index.array,xe=[].concat(_toConsumableArray(ue)),M=0;M<be.length;M+=3){var E=ue[3*be[M]],b=ue[3*be[M]+1],x=c.prePositionArray[3*be[M]+2],I=ue[3*be[M+1]],T=ue[3*be[M+1]+1],w=c.prePositionArray[3*be[M+1]+2],C=ue[3*be[M+2]],S=ue[3*be[M+2]+1],A=c.prePositionArray[3*be[M+2]+2];N.set(E,b,x),N.applyMatrix4(l),N.y=N.z;var k=0,R=o.isInFlattenRegionDrawing(N);R&&k++,N.set(I,T,w),N.applyMatrix4(l),N.y=N.z;var B=o.isInFlattenRegionDrawing(N);B&&k++,N.set(C,S,A),N.applyMatrix4(l),N.y=N.z;var L=o.isInFlattenRegionDrawing(N);if(L&&k++,1==k){var Ie;if(R){var j=g[R.id];j||(j=R.transformPolygon(_),g[R.id]=j),H.set(E,b),F.set(I,T),Ie=s.Utils.linePolygonIntersection(H,F,j)}else if(B){var j=g[B.id];j||(j=B.transformPolygon(_),g[B.id]=j),H.set(E,b),F.set(I,T),Ie=s.Utils.linePolygonIntersection(H,F,j)}else{var j=g[L.id];j||(j=L.transformPolygon(_),g[L.id]=j),H.set(E,b),F.set(C,S),Ie=s.Utils.linePolygonIntersection(H,F,j)}Ie&&(xe[3*be[M]]=Ie.x,xe[3*be[M]+1]=Ie.y,xe[3*be[M+1]]=Ie.x,xe[3*be[M+1]+1]=Ie.y,xe[3*be[M+2]]=Ie.x,xe[3*be[M+2]+1]=Ie.y)}else if(2==k){var Ie;if(R)if(B){var oe=g[R.id];oe||(oe=R.transformPolygon(_),g[R.id]=oe);var se=g[B.id];se||(se=B.transformPolygon(_),g[B.id]=se),H.set(E,b),F.set(C,S),Ie=s.Utils.linePolygonIntersection(H,F,oe),Ie||(Ie=s.Utils.linePolygonIntersection(H,F,se))}else{var oe=g[R.id];oe||(oe=R.transformPolygon(_),g[R.id]=oe);var le=g[L.id];le||(le=L.transformPolygon(_),g[L.id]=le),H.set(E,b),F.set(I,T),Ie=s.Utils.linePolygonIntersection(H,F,oe),Ie||(Ie=s.Utils.linePolygonIntersection(H,F,le))}else{var se=g[B.id];se||(se=B.transformPolygon(_),g[B.id]=se);var le=g[L.id];le||(le=L.transformPolygon(_),g[L.id]=le),H.set(E,b),F.set(I,T),Ie=s.Utils.linePolygonIntersection(H,F,se),Ie||(Ie=s.Utils.linePolygonIntersection(H,F,le))}Ie&&(xe[3*be[M]]=Ie.x,xe[3*be[M]+1]=Ie.y,xe[3*be[M+1]]=Ie.x,xe[3*be[M+1]+1]=Ie.y,xe[3*be[M+2]]=Ie.x,xe[3*be[M+2]+1]=Ie.y)}}ue=xe}c.removeAttribute("position"),c.addAttribute("position",new THREE.Float32BufferAttribute(ue,3))}}},{key:"computeSideNormal",value:function(e,t,i,r){for(var n=t.length,a=0;a<n;++a){var o=t[a],s=r[a],l=e.attributes.normal.array[3*o],u=i.attributes.normal.array[3*s],c=(l+u)/2;e.attributes.normal.array[3*o]=c,i.attributes.normal.array[3*s]=c;var h=e.attributes.normal.array[3*o+1],d=i.attributes.normal.array[3*s+1],f=(h+d)/2;e.attributes.normal.array[3*o+1]=f,i.attributes.normal.array[3*s+1]=f;var p=e.attributes.normal.array[3*o+2],m=i.attributes.normal.array[3*s+2],v=(p+m)/2;e.attributes.normal.array[3*o+2]=v,i.attributes.normal.array[3*s+2]=v}}},{key:"computeNearNormal",value:function(e,t,i,r){for(var n=0,a=1,o=new Array(i+1),s=0;s<=i;++s)o[s]=n+a*s;n=0,a=i+1;for(var l=new Array(i+1),s=0;s<=i;++s)l[s]=n+a*s;n=i,a=i+1;for(var u=new Array(i+1),s=0;s<=i;++s)u[s]=n+a*s;n=i*(i+1),a=1;for(var c=new Array(i+1),s=0;s<=i;++s)c[s]=n+a*s;"left"===r&&this.computeSideNormal(e,l,t,u),"right"===r&&this.computeSideNormal(e,u,t,l),"top"===r&&this.computeSideNormal(e,o,t,c),"bottom"===r&&this.computeSideNormal(e,c,t,o)}}]),t}(s.Tile.TileBuilder);s.Tile.PlaneTileBuilder=U;var G=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){}},{key:"computeBuffer",value:function(e,t,i,r,n,a,o){o=o||s.Tile.TileMath.unitScale;var l={index:null,position:null,normal:null,uvs:[],center:null};r=void 0==r?16:r;var u=s.Tile.TileMath.tile2boundingBox(e,t,i),c=(u.east+u.west)/2,h=(u.north+u.south)/2,d=s.Tile.TileMath.fromDegrees(c,h),f=(u.east-u.west)/r,p=(u.north-u.south)/r;l.center=d;var m=(r+1)*(r+1)+(n?0:4*r);l.position=new Float32Array(3*m),l.normal=new Float32Array(3*m),l.uvs=new Float32Array(3*m);for(var v,g,y,M=[],E=[],b=0,x=1/r,I=0;I<=r;++I){var T=[];g=u.south+p*I;for(var w=0;w<=r;++w){v=u.west+f*w,y=s.Tile.TileMath.fromDegrees(v,g),l.position[3*b]=(y.x-d.x)*o,l.position[3*b+1]=(y.y-d.y)*o,l.position[3*b+2]=(y.z-d.z)*o;var C=y.clone().normalize();l.normal[3*b]=C.x,l.normal[3*b+1]=C.y,l.normal[3*b+2]=C.z,a&&(l.position[3*b]+=C.x*a[r-I][w]*o*s.GlobalData.TerrainScale,l.position[3*b+1]+=C.y*a[r-I][w]*o*s.GlobalData.TerrainScale,l.position[3*b+2]+=C.z*a[r-I][w]*o*s.GlobalData.TerrainScale);var S=I*x,A=w*x;l.uvs[2*b]=A,l.uvs[2*b+1]=S,n||0!==I&&I!==r&&(w===r?M.push(b):0===w&&E.push(b)),T.push(b),b++}0===I?M=M.concat(T):I===r&&(M=M.concat(T.slice().reverse()))}var k=this.getIndexBySeg(r),R=b;return n||(k=this.createSkirt(M,E,b,R,l,k)),l.index=k,l}}]),t}(s.Tile.TileBuilder);s.Tile.GlobeTileBuilder=G;var z=function(){function e(t,i){return _classCallCheck(this,e),this.viewer=t,!this.viewer||!this.viewer instanceof s.Viewer?void console.log("ERROR::viewer must not be empty or viewer2d."):!i.startPosition||i.startPosition<2?void console.log("ERROR::startPosition must not be empty or less than 2 in length."):!i.endPosition||i.endPosition<2?void console.log("ERROR::endPosition must not be empty or less than 2 in length."):s.Tile.TileMath.isLongitude(i.startPosition[0])&&s.Tile.TileMath.isLongitude(i.endPosition[0])&&s.Tile.TileMath.isLatitude(i.startPosition[1])&&s.Tile.TileMath.isLatitude(i.startPosition[1])?i.startPosition[0]>i.endPosition[0]||i.startPosition[1]>i.endPosition[1]?void console.log("ERROR::range definition error."):Math.abs(i.startPosition[0]-i.endPosition[0])>.2||Math.abs(i.startPosition[1]-i.endPosition[1])>.2?void console.log(" Longitude or latitude range is too big."):(s.GlobalData.EnableGisMap=!0,s.GlobalData.ConstraintZoom=!1,this.westEdge=i.startPosition[0],this.eastEdge=i.endPosition[0],this.northEdge=i.endPosition[1],this.southEdge=i.startPosition[1],this.mapCount=0,this.externalObjectId="tilePlane",this.geometry=null,this.tileMaterials=new Array,!i.modelPosition||i.modelPosition<2?void console.log("ERROR::model position must not be empty or less than 2 in length."):s.Tile.TileMath.isLongitude(i.modelPosition[0])&&s.Tile.TileMath.isLatitude(i.modelPosition[1])?(this.modelLongitude=i.modelPosition[0],this.modelLatitude=i.modelPosition[1],this.modelLongitude<this.westEdge||this.modelLongitude>this.eastEdge||this.modelLatitude<this.southEdge||this.modelLatitude>this.northEdge?void console.log("ERROR::the input position must in range"):(this.zoom=i.zoom,
this.zoom<0||this.zoom>18?void console.log("ERROR::the input zoom is invalid"):(this.height=0,void(this.externalComponentManager=new s.ExternalComponentManager(t))))):void console.log("ERROR::number exceeds normal latitude and longitude range.")):void console.log("ERROR::number exceeds normal latitude and longitude range.")}return _createClass(e,[{key:"destroy",value:function(){this.viewer=null,this.westEdge=null,this.eastEdge=null,this.northEdge=null,this.southEdge=null,this.mapCount=null,this.externalObjectId=null,this.geometry=null,this.tileMaterials=null,this.modelLongitude=null,this.modelLatitude=null,this.zoom=null,this.height=null,this.externalComponentManager=null,this.tileLength=null,this.topTile=null,this.leftTile=null,this.bottomTile=null,this.rightTile=null,this.planeWidth=null,this.planeHeight=null,this.mapCount=null,this.geometry=null,this.tilesMesh=null,this.tileArray[xIndex]=null}},{key:"loadMapsByZoom",value:function(e,t){this.zoom=e,this.tileLength=s.Tile.TileMath.mercatorPerimeter/Math.pow(2,this.zoom)*s.Tile.TileMath.unitScale*2,this.tileArray=new Array,this.topTile=s.Tile.TileMath.lat2tile(this.northEdge,this.zoom),this.leftTile=s.Tile.TileMath.long2tile(this.westEdge,this.zoom),this.bottomTile=s.Tile.TileMath.lat2tile(this.southEdge,this.zoom),this.rightTile=s.Tile.TileMath.long2tile(this.eastEdge,this.zoom),this.planeWidth=this.rightTile-this.leftTile+1,this.planeHeight=this.bottomTile-this.topTile+1,this.mapCount=this.planeWidth*this.planeHeight,this.geometry=new THREE.PlaneGeometry(this.tileLength*this.planeWidth,this.tileLength*this.planeHeight,this.planeWidth,this.planeHeight),this.tilesMesh=null;for(var i=this,r=0,n=i.leftTile;n<=i.rightTile;++n){var a,o;!function(e){var n=e-i.leftTile;i.tileArray[n]=new Array;for(var l=i.topTile;l<=i.bottomTile;++l){(function(l){var u=l-i.topTile;if(i.tileArray[n][u]={},i.tileArray[n][u].x=n*i.tileLength,i.tileArray[n][u].y=-u*i.tileLength,i.tileArray[n][u].center=new THREE.Vector3((n+.5)*i.tileLength,-(u+.5)*i.tileLength,i.height),i.tileArray[n][u].bound=s.Tile.TileMath.tile2boundingBox(e,l,i.zoom),e>i.rightTile||l>i.bottomTile)return"continue";a="https://mt3.google.cn/vt/lyrs=y&hl=zh-CN&gl=cn&x="+e+"&y="+l+"&z="+i.zoom,o=new THREE.TextureLoader,o.crossOrigin=!0,o.load(a,function(e){var a=new THREE.MeshBasicMaterial({map:e,transparent:!0,side:THREE.DoubleSide}),o=n+u*(i.rightTile-i.leftTile+1);i.geometry.faces[2*o].materialIndex=o,i.geometry.faces[2*o+1].materialIndex=o,i.geometry.faceVertexUvs[0][2*o]=[new THREE.Vector2(0,1),new THREE.Vector2(0,0),new THREE.Vector2(1,1)],i.geometry.faceVertexUvs[0][2*o+1]=[new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(1,1)],i.tileMaterials[o]=a,++r>=i.mapCount&&i.onTextureLoaded(t)})})(l)}}(n)}}},{key:"onTextureLoaded",value:function(e){this.tilesMesh=new THREE.Mesh(this.geometry,this.tileMaterials);var t=this.externalComponentManager.objectIds;null!=t&&-1!=t.indexOf(this.externalObjectId)&&this.viewer.removeNodeById(this.externalObjectId),this.externalComponentManager.addNode(this.externalObjectId,this.tilesMesh),this.positionX=0,this.positionY=0;for(var i=0,r=this.tileArray.length;i<r;i++)for(var n=0,a=this.tileArray[i].length;n<a;n++)if(this.tileArray[i][n].bound.west<=this.modelLongitude&&this.modelLongitude<this.tileArray[i][n].bound.east&&this.tileArray[i][n].bound.south<=this.modelLatitude&&this.modelLatitude<this.tileArray[i][n].bound.north){var o=(this.modelLongitude-this.tileArray[i][n].bound.west)/(this.tileArray[i][n].bound.east-this.tileArray[i][n].bound.west),s=(this.modelLatitude-this.tileArray[i][n].bound.south)/(this.tileArray[i][n].bound.north-this.tileArray[i][n].bound.south);this.positionX=-(i+o)*this.tileLength+this.planeWidth/2*this.tileLength,this.positionY=-(a-n-1+s)*this.tileLength+this.planeHeight/2*this.tileLength;break}var l=new THREE.Quaternion,u=this.viewer.getScene().getBoundingBoxWorld(),c=u.getCenter();this.externalComponentManager.setTransform(this.externalObjectId,new THREE.Vector3(this.positionX+c.x,this.positionY+c.y,u.min.z),new THREE.Vector3(1,1,1),l),this.viewer.render(),e&&e()}}]),e}();s.Tile.TileTextureManager=z;var j=function(){function e(t,i){if(_classCallCheck(this,e),this.viewer=t,!this.viewer||!this.viewer instanceof s.Viewer)return void console.log("ERROR::viewer must not be empty or viewer2d.");if(!i.modelPosition||i.modelPosition<2)return void console.log("ERROR::model position must not be empty or less than 2 in length.");if(!s.Tile.TileMath.isLongitude(i.modelPosition[0])||!s.Tile.TileMath.isLatitude(i.modelPosition[1]))return void console.log("ERROR::number exceeds normal latitude and longitude range.");if(this.zoom=i.zoom?i.zoom:17,this.zoom<1||this.zoom>18)return void console.log("ERROR::the input zoom is invalid");this.zoom<11&&console.warn("Tile resolution may be too low"),s.GlobalData.EnableGisMap=!0,s.GlobalData.ConstraintZoom=!1,this.modelLongitude=i.modelPosition[0],this.modelLatitude=i.modelPosition[1],this.tileArray={},this.tileArray[this.zoom]={},this.externalObjectId="tileDemandPlane",this.tileLimit=i.tileLimit?i.tileLimit:40,this.modelOffset=i.modelOffset,this.allGroup=new THREE.Group,this.groupArray={},this.groupArray[this.zoom]=new THREE.Group,this.allGroup.add(this.groupArray[this.zoom]),this.externalComponentManager=new s.ExternalComponentManager(t);var r=this.externalComponentManager.objectIds;null!=r&&-1!=r.indexOf(this.externalObjectId)&&this.viewer.removeNodeById(this.externalObjectId),this.externalComponentManager.addNode(this.externalObjectId,this.allGroup),this.globalMatrix=this.viewer.modelManager.getMatrixWorldGlobal(),this.globalMatrixInverse=(new THREE.Matrix4).getInverse(this.globalMatrix),this.loader=new THREE.TextureLoader,this.loader.crossOrigin=!0,this.modelBox=this.viewer.getScene().getBoundingBoxWorld();var n=this;this.loader.load("https://mt3.google.cn/vt/lyrs=y&hl=zh-CN&gl=cn&x=0&y=0&z=0",function(e){n.groupArray[0]=new THREE.Group;var t=new THREE.SphereGeometry(s.Tile.TileMath.earthRadius,200,200);t.translate(5517447847.510659,3185499999.9999995,0);var i=new THREE.MeshLambertMaterial({map:e,overdraw:.5}),r=new THREE.Mesh(t,i);n.groupArray[0].add(r)});var n=this;this.viewer.registerEventListener(s.EVENTS.ON_CAMERA_CHANGED_AND_RENDERED,function(e){var t=n.viewer.rendererManager.renderer.domElement.height,i=n.viewer.camera.position.clone(),r=i.applyMatrix4(n.globalMatrixInverse),a=n.calculateZoom(r,t);if(a!=n.zoom){if(n.allGroup.remove(n.groupArray[n.zoom]),0==a)return n.allGroup.add(n.groupArray[0]),n.allGroup.updateMatrixWorld(!0),void(n.zoom=a);void 0==n.groupArray[a]&&(n.groupArray[a]=new THREE.Group),n.allGroup.add(n.groupArray[a])}0!=a&&(n.zoom=a,n.updateZoom(a))})}return _createClass(e,[{key:"destroy",value:function(){this.viewer=null,this.zoom=null,this.modelLongitude=null,this.modelLatitude=null,this.tileArray=null,this.externalObjectId=null,this.modelOffset=null,this.tileLimit=null,this.allGroup=null,this.groupArray=null,this.tileMaterials=null,this.globalMatrix=null,this.globalMatrixInverse=null,this.loader=null,this.modelBox=null,this.tileLength=null,this.modelTileX=null,this.modelTileY=null,this.offset=null,this.inGeometry=null,this.tileBox=null,this.externalComponentManager=null}},{key:"calculateZoom",value:function(e,t){return this.zoom}},{key:"updateZoom",value:function(e){void 0==this.tileArray[e]&&(this.tileArray[e]={}),this.tileLength=s.Tile.TileMath.mercatorPerimeter/Math.pow(2,e)*s.Tile.TileMath.unitScale*2,this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,e),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,e);var t=s.Tile.TileMath.tile2boundingBox(this.modelTileX,this.modelTileY,e),i=(this.modelLongitude-t.west)/(t.east-t.west),r=(this.modelLatitude-t.north)/(t.north-t.south),n=this.modelBox.getCenter(),a=-i*this.tileLength+.5*this.tileLength+n.x,o=-r*this.tileLength-.5*this.tileLength+n.y;this.offset=new THREE.Vector3(a,o,this.modelBox.min.z-this.modelOffset*s.Tile.TileMath.unitScale);var l=new THREE.Quaternion;this.externalComponentManager.setTransform(this.externalObjectId,this.offset,new THREE.Vector3(1,1,1),l),this.inGeometry=new THREE.PlaneBufferGeometry(this.tileLength,this.tileLength),this.inGeometry.computeBoundingBox(),this.tileBox=this.inGeometry.boundingBox,this.addTile(this.modelTileX,this.modelTileY,new THREE.Vector3(0),e),this.updateGroup(e)}},{key:"addTile",value:function(e,t,i,r,n){var a=this;return a.tileArray[r][e]&&a.tileArray[r][e][t]?(a.tileArray[r][e][t].visible=!0,void a.allGroup.updateMatrixWorld(!0)):new Promise(function(o,s){var l="https://mt3.google.cn/vt/lyrs=y&hl=zh-CN&gl=cn&x="+e+"&y="+t+"&z="+r;a.loader.load(l,function(s){s.wrapS=THREE.ClampToEdgeWrapping,s.wrapT=THREE.ClampToEdgeWrapping;var l=new THREE.MeshBasicMaterial({map:s,transparent:!0,side:THREE.DoubleSide}),u=a.inGeometry.clone();u.translate(i.x,i.y,i.z);var c=new THREE.Mesh(u,l);void 0==a.tileArray[r][e]&&(a.tileArray[r][e]={}),a.tileArray[r][e][t]||(a.tileArray[r][e][t]=c,c.name=r+"-"+e+"-"+t,a.groupArray[r].add(c),a.allGroup.updateMatrixWorld(!0)),o(n)})})}},{key:"updateGroup",value:function(e){var t=this,i=t.viewer.camera;i.updateMatrix(),i.updateMatrixWorld(),this.frustum=new THREE.Frustum,this.frustum.setFromMatrix((new THREE.Matrix4).multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse));for(var r=t.modelTileX,n=t.modelTileY,a=2;a<t.tileLimit;){for(var o=1;o<a;o++)r+=1,t.addNode(r,n,e);for(var o=1;o<a;o++)n+=1,t.addNode(r,n,e);a++;for(var o=1;o<a;o++)r-=1,t.addNode(r,n,e);for(var o=1;o<a;o++)n-=1,t.addNode(r,n,e);a++}}},{key:"addNode",value:function(e,t,i){if(!(e>=Math.pow(2,i)||e<0||t>=Math.pow(2,i)||t<0)){var r=this,n=(e-r.modelTileX)*r.tileLength,a=-(t-r.modelTileY)*r.tileLength,o=new THREE.Vector3(n+r.offset.x,a+r.offset.y,r.offset.z);this.tileBox=this.inGeometry.boundingBox;var s=this.tileBox.clone();if(s.translate(o),s.applyMatrix4(r.globalMatrix),!r.frustum.intersectsBox(s))return void(void 0!=r.tileArray[i][e]&&void 0!=r.tileArray[i][e][t]&&(r.tileArray[i][e][t].visible=!1));var l=new THREE.Vector3(n,a,0);r.addTile(e,t,l,i,void 0)}}}]),e}();s.Tile.TileDemandManager=j;var V=function(){function e(t,i,r){return _classCallCheck(this,e),this.modelLayer=t,this.viewer=t.viewer,!this.viewer||!this.viewer instanceof s.Viewer?void console.log("ERROR::viewer must not be empty or viewer2d."):!i.modelPosition||i.modelPosition<2?void console.log("ERROR::model position must not be empty or less than 2 in length."):s.Tile.TileMath.isLongitude(i.modelPosition[0])&&s.Tile.TileMath.isLatitude(i.modelPosition[1])?(s.GlobalData.EnableGisMap=!0,this.modelLongitude=i.modelPosition[0],this.modelLatitude=i.modelPosition[1],this.tileAroundNum=8,this.maxZoom=i.maxZoom,this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom),this.basePoint=i.basePoint,this.modelRotationZ=i.modelRotationZ,this.modelAltitude=i.modelAltitude,this.globalLayer={},this.tileGroup=r,this.tileGroup.altitudeOffset=this.modelAltitude,this.loader=new THREE.TextureLoader,this.loader.crossOrigin=!0,this.globalMatrix=this.viewer.modelManager.getMatrixWorldGlobal(),this.globalMatrixInverse=(new THREE.Matrix4).getInverse(this.globalMatrix),this.frustum=new THREE.Frustum,this.earthMatrix=this.tileGroup.matrixWorld,i.terrainOnlineConfig&&this.dealOnlineTerrainConfig(i.terrainOnlineConfig),this.useTerrain=i.useTerrain,this.renderFunction=null,this.tileOpacity=i.opacity,this.mapStyle=i.mapStyle||{},this.mapExcavation=i.mapExcavation||{},this.materialMap={},this.disableSkirt=!1,this.mapUrl=i.mapUrl,this.layerList=[],this.baseRenderOrder=10,this.seg=16,this.terrainScheduler=new s.Tile.TerrainScheduler(6,(this.seg+1)*(this.seg+1)*2),i.maxTerrainLevel&&i.useTerrain&&(this.maxTerrainLevel=i.maxTerrainLevel,this.minTerrainLevel=i.minTerrainLevel,this.maxTerrainLevel+4<this.maxZoom&&(this.maxZoom=this.maxTerrainLevel+4)),this.modelTileAttitude=0,i.terrainPath?this.dataUrl=new s.Tile.DemUrl(i.terrainPath):this.dataUrl=i.dataUrl,this.isCreated=!1,this.terrainTileCount=0,this.tileCount=0,this.useClipping=i.useClipping,this.imageryProviderType=s.Utils.defaultValue(i.imageryProviderType,"UrlTemplate"),this.imageryProvider=new s.Layer.ImageryProviderFactory[this.imageryProviderType]({mapUrl:i.mapUrl}),this._contentReadyDeferred=void 0,void(this._requestCount=-1)):void console.log("ERROR::number exceeds normal latitude and longitude range.")}return _createClass(e,[{key:"destroy",value:function(){this.clearTiles(),this.terrainScheduler.destroy(),this.terrainScheduler=null,this.modelLongitude=null,this.modelLatitude=null,this.tileAroundNum=null,this.maxZoom=null,this.modelTileX=null,this.modelTileY=null,this.globalLayer=null,this.tileGroup.clear(),this.tileGroup=null,this.loader=null,this.globalMatrix=null,this.globalMatrixInverse=null,this.frustum=null,this.earthMatrix=null,this.useTerrain=null,this.modelRotationZ=null,this.basePoint=null,this.modelAltitude=null,this.tileOpacity=null,this.mapStyle=null,this.mapExcavation=null,this.materialMap=null,this.disableSkirt=null,this.mapUrl=null,this.layerList=null,this.baseRenderOrder=void 0,this.seg=void 0,this.maxTerrainLevel=void 0,this.modelTileAttitude=void 0,this.dataUrl=null,this.isCreated=void 0,this.terrainTileCount=void 0,this.tileCount=void 0,this.modelLayer=void 0,this.removeRenderCallback(),this._contentReadyDeferred&&(this._contentReadyDeferred.destroy(),this._contentReadyDeferred=void 0),this.viewer=void 0,this.imageryProviderType=void 0,this.imageryProvider=null,this._requestCount=-1}},{key:"getLayer",value:function(){return this.modelLayer}},{key:"dealOnlineTerrainConfig",value:function(e){(this.modelLongitude<e.longitude[0]||this.modelLongitude>e.longitude[1]||this.modelLatitude<e.latitude[0]||this.modelLatitude>e.latitude[1])&&console.warn("the model LongLat not in online terrain Scale"),this.terrainZoomScale=e.zoom;var t=e.boundary,i=t.leftX,r=t.rightX,n=t.upY,a=t.bottomY;this.textureXYZScale={};var o=this.terrainZoomScale[0];this.textureXYZScale[o]={},this.textureXYZScale[o].leftX=i+1,this.textureXYZScale[o].rightX=r-1,this.textureXYZScale[o].upY=n+1,this.textureXYZScale[o].bottomY=a-1;for(var s=this.terrainZoomScale[0]+1;s<=this.terrainZoomScale[1]+4;++s)this.textureXYZScale[s]={},this.textureXYZScale[s].leftX=2*this.textureXYZScale[s-1].leftX,this.textureXYZScale[s].rightX=2*this.textureXYZScale[s-1].rightX,this.textureXYZScale[s].upY=2*this.textureXYZScale[s-1].upY,this.textureXYZScale[s].bottomY=2*this.textureXYZScale[s-1].bottomY}},{key:"addExternalObject",value:function(){var e=this.externalComponentManager.objectIds;null!=e&&-1!=e.indexOf(this.externalObjectId)&&this.viewer.removeNodeById(this.externalObjectId),this.externalComponentManager.addNode(this.externalObjectId,this.tileGroup)}},{key:"onLoadTerrain",value:function(){!1===this.isCreated&&(!1===this.useTerrain||this.terrainTileCount<=0)&&(this.isCreated=!0,this.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_MAP_CREATED}))}},{key:"addRenderCallback",value:function(){var e=this;this.renderFunction=function(){e.updateEarth(),e.tileGroup.updateMatrixWorld(!0);for(var t=e.layerList.length,i=0;i<t;++i){e.layerList[i].tileGroup.updateMatrixWorld(!0)}},e.viewer.addCallbacks(s.EnumRenderCallbackType.PRE_RENDER,e.renderFunction),e.viewer.render()}},{key:"removeRenderCallback",value:function(){this.renderFunction&&(this.viewer.removeCallbacks(s.EnumRenderCallbackType.PRE_RENDER,this.renderFunction),this.renderFunction=null)}},{key:"updateModelLngLatByBasePoint",value:function(){}},{key:"updateEarthMatrix",value:function(){}},{key:"show",value:function(){this.tileGroup?this.tileGroup.visible=!0:console.warn("The tile doesn't exist.")}},{key:"hide",value:function(){this.tileGroup?this.tileGroup.visible=!1:console.warn("The tile doesn't exist.")}},{key:"hideAllLayers",value:function(){this.hide();var e=!0,t=!1,i=void 0;try{for(var r,n=this.layerList[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){r.value.hide()}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"showAllLayers",value:function(){this.show();var e=!0,t=!1,i=void 0;try{for(var r,n=this.layerList[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){r.value.show()}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"getModelRotationZ",value:function(){return this.modelRotationZ}},{key:"setModelRotationZ",value:function(e){this.modelRotationZ=e,this.updateEarthMatrix()}},{key:"getBasePoint",value:function(){return this.basePoint}},{key:"getModelPosition",value:function(){return[this.modelLongitude,this.modelLatitude]}},{key:"setModelPosition",value:function(e){this.clearTiles(),this.modelLongitude=e[0],this.modelLatitude=e[1],this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom),this.updateEarthMatrix()}},{key:"getModelAltitude",value:function(){return this.modelAltitude}},{key:"setModelAltitude",value:function(e){this.modelAltitude=e,this.tileGroup.altitudeOffset=this.modelAltitude,this.updateEarthMatrix()}},{key:"setModelRotationZ",value:function(e){this.modelRotationZ=e,this.updateEarthMatrix()}},{key:"getLayerById",value:function(e){var t=!0,i=!1,r=void 0;try{for(var n,a=this.layerList[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(o.id===e)return o}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"getOpacity",value:function(e){return void 0===e?this.tileOpacity:this.getLayerById(e).opacity}},{key:"setOpacity",value:function(e,t){if(void 0===t)this.tileOpacity=e;else{this.getLayerById(t).opacity=e}for(var i in this.materialMap)this.materialMap[i].opacity=this.tileOpacity,1-this.tileOpacity>s.Tile.DemTilesUtil.TWO_ACCURACY?this.materialMap[i].transparent=!0:this.materialMap[i].transparent=!1;1-this.tileOpacity>s.Tile.DemTilesUtil.TWO_ACCURACY?this.hideSkirt():this.showSkirt()}},{key:"setStyle",value:function(e,t){if(e){if(t){var i=this.getLayerById(t);if(void 0===i)return;return void i.setStyle(e)}this.mapStyle=e;for(var r in this.materialMap){var n=this.materialMap[r];n.updateStyle&&n.updateStyle(e)}}}},{key:"setExcavation",value:function(e){if(e){this.mapExcavation=e;for(var t in this.materialMap){var i=this.materialMap[t];i.updateExcavation&&i.updateExcavation(e),i.updateSide&&i.updateSide({isExcavation:e&&e.isExcavation})}}}},{key:"updateMaterialsSide",value:function(){for(var e in this.materialMap){var t=this.materialMap[e];t.updateSide&&t.updateSide({isExcavation:this.mapExcavation&&this.mapExcavation.isExcavation})}}},{key:"clearTiles",value:function(){for(var e in this.globalLayer)for(var t in this.globalLayer[e])for(var i in this.globalLayer[e][t])this.globalLayer[e][t][i]&&this.globalLayer[e][t][i].destroy();this.globalLayer={},this.tileGroup.clear()}},{key:"hideSkirt",value:function(){this.disableSkirt=!0;for(var e in this.globalLayer)for(var t in this.globalLayer[e])for(var i in this.globalLayer[e][t])this.globalLayer[e][t][i]&&this.globalLayer[e][t][i].skirt&&(this.globalLayer[e][t][i].skirt.visible=!1)}},{key:"showSkirt",value:function(){this.disableSkirt=!1;for(var e in this.globalLayer)for(var t in this.globalLayer[e])for(var i in this.globalLayer[e][t])this.globalLayer[e][t][i]&&this.globalLayer[e][t][i].skirt&&(this.globalLayer[e][t][i].skirt.visible=!0)}},{key:"hideAllNodes",value:function(){for(var e in this.globalLayer)for(var t in this.globalLayer[e])for(var i in this.globalLayer[e][t])this.globalLayer[e][t][i]&&this.globalLayer[e][t][i].meshNode&&(this.globalLayer[e][t][i].meshNode.visible=!1)}},{key:"_increaseRequestCount",value:function(){this._deferContentUpdate(),++this._requestCount}},{key:"_decreaseRequestContent",value:function(){--this._requestCount,this._resolveContentUpdate()}},{key:"_deferContentUpdate",value:function(){var e=this;this._contentReadyDeferred||(this._requestCount=0,this._contentReadyDeferred=new s.Deferred,this._contentReadyDeferred.promise.then(function(){e._contentReadyDeferred.destroy(),e._contentReadyDeferred=void 0,e.viewer.render()}).catch(function(){e._contentReadyDeferred.destroy(),e._contentReadyDeferred=void 0,e.viewer.render()}))}},{key:"_resolveContentUpdate",value:function(){0===this._requestCount&&this._contentReadyDeferred&&this._contentReadyDeferred.resolve()}},{key:"updateEarth",value:function(){if(this.mapUrl){var e=this.viewer.camera;e.updateMatrix(),e.updateMatrixWorld(),this.frustum.setFromMatrix((new THREE.Matrix4).multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse)),this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom),this.updateModelLngLatByBasePoint();for(var t=this.modelTileX-this.modelTileX%4,i=this.modelTileY-this.modelTileY%4,r=this.tileAroundNum,n=this.maxZoom,t=this.modelTileX-this.modelTileX%r,i=this.modelTileY-this.modelTileY%r,a=t;a<t+r;++a)for(var o=i;o<i+r;++o)this.addNode(a,o,n);this.updateTile(t,i,n,r)}}},{key:"updateTile",value:function(e,t,i,r){var n=e/2,a=t/2,n=Math.floor(n-r/4),a=Math.floor(a-r/4);n%2==1&&n--,a%2==1&&a--;var i=i-1;if(!(i<0)){for(var o=n;o<n+r;++o)for(var s=a;s<a+r;++s)o>=e/2&&o<e/2+r/2&&s>=t/2&&s<t/2+r/2||o>=Math.pow(2,i)||o<0||s>=Math.pow(2,i)||s<0||this.addNode(o,s,i);this.updateTile(n,a,i,r)}}},{key:"getTerrainData",value:function(e,t,i,r,n){var a=this,o=this.seg,l=Math.pow(2,i-a.maxTerrainLevel),u=parseInt(e/l),c=parseInt(t/l),h=e%l,d=t%l,f=a.dataUrl.terrainUrl(i,e,t);i>a.maxTerrainLevel&&(f=a.dataUrl.terrainUrl(a.maxTerrainLevel,u,c)),a.terrainScheduler.push(f,function(n){for(var u=Array.prototype.slice.call(new Int16Array(n)),c=new Array(o+1),f=0;f<c.length;f++){c[f]=new Array(o+1);for(var p=0;p<o+1;p++)u[f*(o+1)+p]!==s.Tile.DemTilesUtil.InvalidTerrainValue?c[f][p]=u[f*(o+1)+p]:c[f][p]=0}if(a.modelTileX==e&&a.modelTileY==t){for(var m=u[0],v=u.length,f=0;f<v;f++)u[f]<m&&(m=u[f]);a.modelTileAttitude=m}var g=c;if(i>a.maxTerrainLevel){for(var y=h*(o/l),M=d*(o/l),E=o/l,b=new Array(E+1),f=0;f<b.length;f++){b[f]=new Array(E+1);for(var p=0;p<=E;++p)b[f][p]=c[M+f][y+p]}g=s.Tile.TileMath.createHeightArray(b,o)}r&&r(g)},function(){n&&n()})}},{key:"addNode",value:function(e,t,i){if(!(e>=Math.pow(2,i)||e<0||t>=Math.pow(2,i)||t<0)){var r=this;if(void 0==r.globalLayer[i]&&(r.globalLayer[i]={}),void 0==r.globalLayer[i][e]&&(r.globalLayer[i][e]={}),void 0==r.globalLayer[i][e][t]&&(r.globalLayer[i][e][t]=new s.Tile.DemTile(i,e,t)),r.globalLayer[i][e][t].meshLoadState==s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED)this.tileCount++,r.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADING,r.createTileGeometry(e,t,i,!0,function(){r.createTileGeometryFinished(e,t,i)});else if(r.globalLayer[i][e][t].meshLoadState==s.Tile.DemTilesUtil.LOAD_STATE.LOADED||r.globalLayer[i][e][t].meshLoadState==s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED){r.globalLayer[i][e][t].geometry.computeBoundingBox();var n=r.globalLayer[i][e][t].geometry.boundingBox.clone();n.applyMatrix4(r.earthMatrix),r.globalLayer[i][e][t].box=n,r.createTileGeometryFinished(e,t,i)}}}},{key:"createTileGeometryFinished",value:function(e,t,i){if(this.frustum.intersectsBox(this.globalLayer[i][e][t].box)){this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&(this.globalLayer[i][e][t].meshNode.visible=!0),this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createMaterial(e,t,i,this.mapUrl),this.globalLayer[i][e][t].needUpdateTexture&&this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&this.updateMaterialTexture(e,t,i);for(var r=this.layerList.length,n=0;n<r;++n){var a=this.layerList[n];a.contentUnLoad(i,e,t)&&this.globalLayer[i][e][t].meshLoadState>=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createLayerMaterial(a,e,t,i),a.contentLoaded(i,e,t)&&(a.meshNodeMap[i][e][t].visible=!0)}}else{this.globalLayer[i][e][t].meshLoadState==s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&(this.globalLayer[i][e][t].meshNode.visible=!1);for(var r=this.layerList.length,n=0;n<r;++n){var a=this.layerList[n];a.contentLoaded(i,e,t)&&(a.meshNodeMap[i][e][t].visible=!1)}}}},{key:"createTileGeometry",value:function(e,t,i){}},{key:"createLayerMaterial",value:function(e,t,i,r){if(e.isAvailableTile(t,i,r)){var n=this;e.setContentLoading(r,t,i),this._increaseRequestCount();var a=e.getRequestUrl(t,i,r);n.loader.load(a,function(a){var o=new s.MapTileMaterial({map:a,transparent:!0,side:THREE.FrontSide});n.useClipping&&(o.defines.USE_CLIPPING=""),o.updateStyle(e.mapStyle),o.updateExcavation(n.mapExcavation),o.updateSide({isExcavation:n.mapExcavation&&n.mapExcavation.isExcavation});var l=r+"-"+t+"-"+i;o.opacity=e.opacity,void 0==e.materialMap[r]&&(e.materialMap[r]={}),void 0==e.materialMap[r][t]&&(e.materialMap[r][t]={}),e.materialMap[r][t][i]=o;var u=new THREE.Mesh(n.globalLayer[r][t][i].geometry,o);if(void 0==e.meshNodeMap[r]&&(e.meshNodeMap[r]={}),void 0==e.meshNodeMap[r][t]&&(e.meshNodeMap[r][t]={}),e.meshNodeMap[r][t][i]=u,u.name=l,n.globalLayer[r][t][i].skirtGeometry){var c="Skirt-"+r+"-"+t+"-"+i,h=new THREE.Mesh(n.globalLayer[r][t][i].skirtGeometry,o);h.name=c,h.renderOrder=n.baseRenderOrder+1+e.priority,e.tileGroup.add(h)}(n.tileOpacity<1||n.disableSkirt)&&n.globalLayer[r][t][i].skirt&&(skirtMeshNode.visible=!1),u.renderOrder=n.baseRenderOrder+1+e.priority,e.tileGroup.add(u),e.tileGroup.updateMatrixWorld(!0),e.setContentLoaded(r,t,i),n._decreaseRequestContent()})}}},{key:"updateMaterialTexture",value:function(e,t,i){var r=this,n=this;this._increaseRequestCount(),this.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.MAT_PARSING;var a=n.imageryProvider.getImageryUrl(e,t,i);this.loader.load(a,function(a){r.globalLayer[i][e][t].needUpdateTexture=!1,r.globalLayer[i][e][t].texture=a,r.globalLayer[i][e][t].material.map=a,r.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.LOADED,n._decreaseRequestContent()})}},{key:"createMaterial",value:function(e,t,i,r){var n=this;if(!1!==n.imageryProvider.ready)return n.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.MAT_PARSING,new Promise(function(a,o){n._increaseRequestCount();var l=n.imageryProvider.getImageryUrl(e,t,i);n.loader.load(l,function(o){if(r!==n.mapUrl)return void n._decreaseRequestContent();var l=new s.MapTileMaterial({map:o,transparent:!1,side:THREE.FrontSide});n.useClipping&&(l.defines.USE_CLIPPING=""),l.updateStyle(n.mapStyle),l.updateExcavation(n.mapExcavation),l.updateSide({isExcavation:n.mapExcavation&&n.mapExcavation.isExcavation});var u=i+"-"+e+"-"+t;if(l.opacity=n.tileOpacity,n.tileOpacity<1&&(l.transparent=!0),n.globalLayer[i][e][t].meshNode)return n.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.LOADED,a(n.globalLayer[i][e][t]),void n._decreaseRequestContent();if(n.materialMap[u]=l,n.globalLayer[i][e][t].texture=o,n.globalLayer[i][e][t].material=l,n.globalLayer[i][e][t].meshNode=new THREE.Mesh(n.globalLayer[i][e][t].geometry,n.materialMap[u]),n.globalLayer[i][e][t].meshNode.name=u,n.globalLayer[i][e][t].meshNode.renderOrder=n.baseRenderOrder,n.tileGroup.add(n.globalLayer[i][e][t].meshNode),n.globalLayer[i][e][t].skirtGeometry){var c="Skirt-"+i+"-"+e+"-"+t;n.globalLayer[i][e][t].skirt=new THREE.Mesh(n.globalLayer[i][e][t].skirtGeometry,n.materialMap[u]),n.globalLayer[i][e][t].skirt.name=c,n.globalLayer[i][e][t].skirt.renderOrder=n.baseRenderOrder,n.tileGroup.add(n.globalLayer[i][e][t].skirt)}(n.tileOpacity<1||n.disableSkirt)&&n.globalLayer[i][e][t].skirt&&(n.globalLayer[i][e][t].skirt.visible=!1),n.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.LOADED,n.onLoadTerrain(),a(n.globalLayer[i][e][t]),n._decreaseRequestContent(),n.tileCount--},void 0,function(e){console.log(e),n._decreaseRequestContent(),n.tileCount--})})}},{key:"setMapLayer",value:function(e){this.mapUrl="https://mt3.google.cn/vt/lyrs="+e+"&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",this.clearTiles()}},{key:"setMapUrl",value:function(e,t){var i=this;this.mapUrl=e,this.imageryProviderType=s.Utils.defaultValue(t,"UrlTemplate"),this.imageryProvider=new s.Layer.ImageryProviderFactory[t]({mapUrl:e}),this.imageryProvider.setReadyCallback(function(){i.viewer.render()}),this.clearTiles()}},{key:"isUseTerrain",value:function(){return this.useTerrain}},{key:"applyTerrain",value:function(e){this.useTerrain=e,this.clearTiles()}},{key:"addRoad",value:function(e,t){var i=new s.Tile.TextureLayer(this.viewer,{url:e});return i.priority=t,this.layerList[0]=i,this.updateEarthMatrix(),i}},{key:"removeRoad",value:function(e){(e||this.layerList[0]).destroy(),this.layerList=[]}},{key:"addImageryLayer",value:function(e,t){for(var i=e.mapUrl||e.url,r=e.imageryProviderType,n=e.hasTileMapResource,a=void 0===e.layerName?s.Utils.getEncodedId(i):e.layerName,o=this.layerList,l=t>=0&&t<o.length?t:o.length,u=-1,c=0,h=o.length;c<h;++c)if(o[c].url===i){u=c;break}var d=void 0;return-1!==u?(d=o[u],o.splice(u,1)):d=new s.Tile.TextureLayer(this.viewer,{url:i,imageryProviderType:r,hasTileMapResource:n,layerName:a}),o.splice(l,0,d),this._updateLayerList(),this.updateEarthMatrix(),d.id}},{key:"removeImageryLayer",value:function(e){var t=this.layerList,i=this.getLayerById(e);if(i){var r=t.indexOf(i);-1!==r&&(t.splice(r,1),i.destroy(),this._updateLayerList(),this.updateEarthMatrix())}}},{key:"_updateLayerList",value:function(){for(var e=this.baseRenderOrder+1,t=this.layerList,i=0,r=t.length;i<r;i++){var n=t[i];if(n.priority=i,n.meshNodeMap){var a=e+n.priority;n.updateMeshRenderOrder(a)}}}},{key:"getMaxLevel",value:function(){return this.maxZoom}},{key:"setMaxLevel",value:function(e){this.maxZoom=e,this.clearTiles()}}]),e}();s.Tile.TileManager=V;var W=new THREE.Box3,Y=new THREE.Matrix4,Z=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return n.mercatorPerimeter=s.Tile.TileMath.mercatorPerimeter,n.updateEarthMatrix(),n.tileGroup.name=s.GlobalData.TilePlaneGroupName,n.tileBuilder=new s.Tile.PlaneTileBuilder,n.terrainTileCount=Math.pow(n.tileAroundNum,2)+(Math.pow(n.tileAroundNum,2)-Math.pow(n.tileAroundNum/2,2))*(n.maxZoom-n.minTerrainLevel),n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.viewer.modelManager.scene.removeObjectGroupByName(s.GlobalData.TilePlaneGroupName),this.offset=null,this.mercatorPerimeter=null,this.terrainLoader=null,this.tileBuilder=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"updateModelLngLatByBasePoint",value:function(){var e=this.viewer.getBoundingBoxWorld().getCenter().clone(),t=(new THREE.Matrix4).makeTranslation(-this.basePoint.x,-this.basePoint.y,0),i=(new THREE.Matrix4).makeRotationZ(this.modelRotationZ),r=(new THREE.Matrix4).makeTranslation(this.basePoint.x,this.basePoint.y,0);e.applyMatrix4(t),e.applyMatrix4(i),e.applyMatrix4(r);var n=this.mercator2lonLat(e);this.modelTileX=s.Tile.TileMath.long2tile(n.x,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(n.y,this.maxZoom)}},{key:"updateEarthMatrix",value:function(){this.mercatorPerimeter=s.Tile.TileMath.getMercatorPerimeterByLat(this.modelLatitude),this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom),this.updateModelLngLatByBasePoint()
;var e=s.Tile.TileMath.tile2boundingBox(this.modelTileX,this.modelTileY,this.maxZoom),t=(this.modelLongitude-e.west)/(e.east-e.west),i=(this.modelLatitude-e.north)/(e.north-e.south),r=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,n=-t*r+.5*r-.5*r,a=-i*r-.5*r+.5*r,o=(new THREE.Matrix4).makeTranslation(n+this.basePoint.x*s.Tile.TileMath.unitScale/1e3,a+this.basePoint.y*s.Tile.TileMath.unitScale/1e3,-this.modelAltitude*s.Tile.TileMath.unitScale),l=(new THREE.Matrix4).makeTranslation(n,a,0),u=(new THREE.Matrix4).makeRotationZ(-this.modelRotationZ),c=(new THREE.Matrix4).makeTranslation(-n,-a,0);this.tileGroup.matrix.identity(),this.tileGroup.applyMatrix(l),this.tileGroup.applyMatrix(u),this.tileGroup.applyMatrix(c),this.tileGroup.applyMatrix(o),this.tileGroup.applyMatrix(this.globalMatrix),this.tileGroup.matrixAutoUpdate=!1,this.tileGroup.updateMatrixWorld(!0);for(var h=this.layerList.length,d=0;d<h;++d){var f=this.layerList[d];f.tileGroup.matrix.identity(),f.tileGroup.applyMatrix(l),f.tileGroup.applyMatrix(u),f.tileGroup.applyMatrix(c),f.tileGroup.applyMatrix(o),f.tileGroup.applyMatrix(this.globalMatrix),f.tileGroup.matrixAutoUpdate=!1,f.tileGroup.updateMatrixWorld(!0)}this.viewer.render()}},{key:"createTerrainGeometry",value:function(e,t,i,r,n,a,o){var s=this.tileBuilder.computePlaneGeometry(i,i,t,a,!1),l=s[0];return o&&(this.globalLayer[e][r-1]&&this.globalLayer[e][r-1][n]&&this.globalLayer[e][r-1][n].geometry&&this.tileBuilder.computeNearNormal(l,this.globalLayer[e][r-1][n].geometry,t,"left"),this.globalLayer[e][r+1]&&this.globalLayer[e][r+1][n]&&this.globalLayer[e][r+1][n].geometry&&this.tileBuilder.computeNearNormal(l,this.globalLayer[e][r+1][n].geometry,t,"right"),this.globalLayer[e][r]&&this.globalLayer[e][r][n-1]&&this.globalLayer[e][r][n-1].geometry&&this.tileBuilder.computeNearNormal(l,this.globalLayer[e][r][n-1].geometry,t,"bottom"),this.globalLayer[e][r]&&this.globalLayer[e][r][n+1]&&this.globalLayer[e][r][n+1].geometry&&this.tileBuilder.computeNearNormal(l,this.globalLayer[e][r][n+1].geometry,t,"top")),s}},{key:"updateTileMeshForFlatten",value:function(){for(var e in this.globalLayer)for(var t in this.globalLayer[e])for(var i in this.globalLayer[e][t])this.globalLayer[e][t][i]&&this._updateTileMeshForFlatten(this.globalLayer[e][t][i])}},{key:"_updateTileMeshForFlatten",value:function(e){if(e.box&&e.terrainData){var t=e.x,i=e.y,r=e.zoom,n=e.terrainData,a=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,o=(t*Math.pow(2,this.maxZoom-r)-this.modelTileX)*a+Math.pow(2,this.maxZoom-r)/2*a,l=-(i*Math.pow(2,this.maxZoom-r)-this.modelTileY)*a-Math.pow(2,this.maxZoom-r)/2*a;Y.makeTranslation(o,l,0),Y.multiplyMatrices(this.earthMatrix,Y);var u=this.mercatorPerimeter/Math.pow(2,r)*s.Tile.TileMath.unitScale*2,c=this.seg,h=e.geometry,d=e.skirtGeometry;W.copy(e.box),W.min.y=W.max.y=0;var f=this.viewer.terrainOperationManager.isIntersectFlattenBboxDrawing(W);if(!f&&e.isFlattened)return h.translate(-o,-l,0),d.translate(-o,-l,0),this.tileBuilder.updateGeometryForFlatten(u,u,c,n,!1,s.Tile.TileMath.unitScale,this.viewer.terrainOperationManager,Y,h,d,!0),h.translate(o,l,0),d.translate(o,l,0),void(e.isFlattened=!1);f&&(h.translate(-o,-l,0),d.translate(-o,-l,0),this.tileBuilder.updateGeometryForFlatten(u,u,c,n,!1,s.Tile.TileMath.unitScale,this.viewer.terrainOperationManager,Y,h,d,!1),h.translate(o,l,0),d.translate(o,l,0),e.isFlattened=!0)}}},{key:"translateGeometry",value:function(e,t,i,r,n,a){var o=this;null==n&&(n=0);var l=o.mercatorPerimeter/Math.pow(2,o.maxZoom)*s.Tile.TileMath.unitScale*2,u=(i*Math.pow(2,o.maxZoom-t)-o.modelTileX)*l+Math.pow(2,o.maxZoom-t)/2*l,c=-(r*Math.pow(2,o.maxZoom-t)-o.modelTileY)*l-Math.pow(2,o.maxZoom-t)/2*l;e.translate(u,c,n),o.globalLayer[t][i][r].geometry=e,e.computeBoundingBox();var h=e.boundingBox.clone();h.applyMatrix4(o.earthMatrix),o.globalLayer[t][i][r].box=h,o.globalLayer[t][i][r].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED,a&&a()}},{key:"translateGeometryWithSkirt",value:function(e,t,i,r,n,a,o){var l=e[0],u=e[1],c=this;null==n&&(n=0);var h=c.mercatorPerimeter/Math.pow(2,c.maxZoom)*s.Tile.TileMath.unitScale*2,d=(i*Math.pow(2,c.maxZoom-t)-c.modelTileX)*h+Math.pow(2,c.maxZoom-t)/2*h,f=-(r*Math.pow(2,c.maxZoom-t)-c.modelTileY)*h-Math.pow(2,c.maxZoom-t)/2*h;l.translate(d,f,n),u.translate(d,f,n),c.globalLayer[t][i][r].geometry=l,c.globalLayer[t][i][r].skirtGeometry=u,l.computeBoundingBox();var p=l.boundingBox.clone();p.applyMatrix4(c.earthMatrix),c.globalLayer[t][i][r].box=p,c.globalLayer[t][i][r].terrainData=a,c.globalLayer[t][i][r].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED,o&&o(),c._updateTileMeshForFlatten(c.globalLayer[t][i][r])}},{key:"getTerrainGeometry",value:function(e,t,i,r,n,a,o){var s=this;this.getTerrainData(e,t,i,function(l){var u=s.createTerrainGeometry(i,r,n,e,t,l,a);s.translateGeometryWithSkirt(u,i,e,t,null,l,o),s.terrainTileCount--,s.onLoadTerrain()},function(){s.terrainTileCount--,s.onLoadTerrain();var a=new THREE.PlaneBufferGeometry(n,n,r);s.translateGeometry(a,i,e,t,null,o)})}},{key:"createTileGeometry",value:function(e,t,i,r,n){var a=this.mercatorPerimeter/Math.pow(2,i)*s.Tile.TileMath.unitScale*2,o=this.seg;if(this.useTerrain&&this.textureXYZScale&&this.textureXYZScale[i]&&this.textureXYZScale[i].leftX<=e&&this.textureXYZScale[i].rightX>=e&&this.textureXYZScale[i].upY<=t&&this.textureXYZScale[i].bottomY>=t)return void this.getTerrainGeometry(e,t,i,o,a,r,n);if(this.useTerrain&&!this.textureXYZScale&&i>=this.minTerrainLevel)return void this.getTerrainGeometry(e,t,i,o,a,r,n);var l=new THREE.PlaneBufferGeometry(a,a,o);this.translateGeometry(l,i,e,t,null,n)}},{key:"worldPositionToLngLat",value:function(e){return this.mercator2lonLat(e)}},{key:"lngLatToWorldPosition",value:function(e,t){var i=this.lonLat2Mercator(e[0],e[1]);return this.useTerrain&&t?this.getTileIntersectPoint(e,i,t):t&&t(i),i}},{key:"_lngLatToWorldPosition2",value:function(e){var t=this.lonLat2Mercator(e[0],e[1]);return this.useTerrain?this.getTerrainHeight(t):t}},{key:"getTerrainHeight",value:function(e){var t=e.applyMatrix4(this.globalMatrix),i=new s.Raycaster(new THREE.Vector3(t.x,t.y,t.z),new THREE.Vector3(0,-1,0)),r=[];if(this.raycast(this.tileGroup,i,r),r.length>0){var n=r[0].point.clone();return n.applyMatrix4(this.globalMatrixInverse),n}if(i=new s.Raycaster(new THREE.Vector3(t.x,t.y,t.z),new THREE.Vector3(0,1,0)),r=[],this.raycast(this.tileGroup,i,r),r.length>0){var n=r[0].point.clone();return n.applyMatrix4(this.globalMatrixInverse),n}}},{key:"raycast",value:function(e,t,i){for(var r=0,n=e.children.length;r<n;r++){var a=e.children[r];if(s.Utils.isGroupObject(a))this.raycast(a,t,i);else{if(-1!=a.name.indexOf("Skirt"))continue;a.raycast(t,i)}}}},{key:"lonLat2Mercator",value:function(e,t){var i=new THREE.Vector3,r=s.Tile.TileMath.lonLat2Mercator(e,t,this.mercatorPerimeter),n=s.Tile.TileMath.lonLat2Mercator(this.modelLongitude,this.modelLatitude,this.mercatorPerimeter),a=n.sub(new THREE.Vector2(this.basePoint.x,this.basePoint.y));return i.x=r.x-a.x,i.y=r.y-a.y,i.z=-this.modelAltitude*s.Tile.TileMath.unitScale,i}},{key:"mercator2lonLat",value:function(e){var t=s.Tile.TileMath.lonLat2Mercator(this.modelLongitude,this.modelLatitude,this.mercatorPerimeter),i=t.sub(new THREE.Vector2(this.basePoint.x,this.basePoint.y));return s.Tile.TileMath.mercator2lonLat(new THREE.Vector2(e.x+i.x,e.y+i.y),this.mercatorPerimeter)}},{key:"getTileIntersectPoint",value:function(e,t,i){var r=this,n=(e[0],e[1],!1),a=this;t.z=s.Tile.TileMath.earthHighestAltitude;for(var o=t.clone().applyMatrix4(this.globalMatrix),l=this.maxZoom;l>=3;l--){var u;!function(e){u=r.globalLayer[e];for(var l in u)!function(r){for(var l in u[r]){(function(l){var c=u[r][l].box;null===c||o.x<=c.max.x&&o.x>=c.min.x&&o.z<=c.max.z&&o.z>=c.min.z&&(n=!0,a.globalLayer[e][r][l].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADING,a.createTileGeometry(r,l,e,!0,function(){a.createMaterial(r,l,e,a.mapUrl).then(function(e){var r=new s.Raycaster(new THREE.Vector3(o.x,o.y,o.z),new THREE.Vector3(0,-1,0)),n=[];e.meshNode.raycast(r,n);var l=void 0;if(n.length>0)return l=n[0].point.clone(),l.applyMatrix4(a.globalMatrixInverse),l.x=t.x,l.y=t.y,void(i&&i(l))})}))})(l)}}(l)}(l)}0==n&&(t.z=-a.modelAltitude*s.Tile.TileMath.unitScale,i&&i(t))}},{key:"_getOnlineTerrainHeight2",value:function(e,t){var i=s.Tile.TileMath.long2tile(e,this.maxZoom),r=s.Tile.TileMath.lat2tile(t,this.maxZoom),n=Math.pow(2,this.maxZoom-this.maxTerrainLevel),a=parseInt(i/n),o=parseInt(r/n),l=i%n,u=r%n,c=new THREE.FileLoader;c.setResponseType("arraybuffer");var h=this.dataUrl.terrainUrl(this.maxTerrainLevel,a,o),d=this;c.load(h,function(n){for(var a=Array.prototype.slice.call(new Uint16Array(n)),o=new Array(17),c=0;c<o.length;c++){o[c]=new Array(17);for(var h=0;h<17;h++)o[c][h]=a[17*c+h]}var f=o[u][l],p=o[u][l+1],m=o[u+1][l],v=o[u+1][l+1],g=s.Tile.TileMath.tile2boundingBox(i,r,d.maxZoom),y=f+(m-f)*(g.north-t)/(g.north-g.south),M=p+(v-p)*(g.north-t)/(g.north-g.south),E=y+(M-y)*(e-g.west)/(g.east-g.west);console.log(E)})}}]),t}(s.Tile.TileManager);s.Tile.TilePlaneManager=Z;var Q=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return n.tileGroup.name=s.GlobalData.TileGlobalGroupName,n.tileBuilder=new s.Tile.GlobeTileBuilder,n.updateEarthMatrix(),n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.offset=null,this.tileBuilder=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"updateEarthMatrix",value:function(){this.earthPos=s.Tile.TileMath.fromDegrees(this.modelLongitude,this.modelLatitude),this.offset=new THREE.Vector3(this.basePoint.x*s.Tile.TileMath.unitScale/1e3,this.basePoint.y*s.Tile.TileMath.unitScale/1e3,-s.Tile.TileMath.earthRadius*s.Tile.TileMath.unitScale-this.modelAltitude*s.Tile.TileMath.unitScale);var e=this.earthPos.clone().normalize(),t=(new THREE.Quaternion).setFromUnitVectors(e,new THREE.Vector3(0,0,1)),i=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,0,1),THREE.Math.degToRad(270-this.modelLongitude)-this.modelRotationZ);t.premultiply(i);var r=(new THREE.Matrix4).makeRotationFromQuaternion(t),n=(new THREE.Matrix4).makeTranslation(this.offset.x,this.offset.y,this.offset.z);this.tileGroup.matrix.identity(),this.tileGroup.applyMatrix(r),this.tileGroup.applyMatrix(n),this.tileGroup.applyMatrix(this.globalMatrix),this.tileGroup.matrixAutoUpdate=!1,this.tileGroup.updateMatrixWorld(!0);for(var a=this.layerList.length,o=0;o<a;++o){var l=this.layerList[o];l.tileGroup.matrix.identity(),l.tileGroup.applyMatrix(r),l.tileGroup.applyMatrix(n),l.tileGroup.applyMatrix(this.globalMatrix),l.tileGroup.matrixAutoUpdate=!1,l.tileGroup.updateMatrixWorld(!0)}this.viewer.render()}},{key:"translateGeometry",value:function(e,t,i,r){var n=new THREE.BufferGeometry;n.setIndex(r.index),n.addAttribute("position",new THREE.BufferAttribute(r.position,3)),n.addAttribute("uv",new THREE.BufferAttribute(r.uvs,2)),n.translate(r.center.x*s.Tile.TileMath.unitScale,r.center.y*s.Tile.TileMath.unitScale,r.center.z*s.Tile.TileMath.unitScale),this.globalLayer[i][e][t].geometry=n,n.computeBoundingBox();var a=n.boundingBox.clone();a.applyMatrix4(this.earthMatrix),this.globalLayer[i][e][t].box=a,this.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED}},{key:"createStandardGlobalGeometry",value:function(e,t,i){var r=this.tileBuilder.computeBuffer(e,t,i,void 0,!1);this.translateGeometry(e,t,i,r)}},{key:"createTerrainGlobalGeometry",value:function(e,t,i,r){var n=this.tileBuilder.computeBuffer(e,t,i,void 0,!1,r);this.translateGeometry(e,t,i,n)}},{key:"createTileGeometry",value:function(e,t,i,r,n){var a=(this.seg,this);if(a.useTerrain&&i>=a.minTerrainLevel)return void a.getTerrainData(e,t,i,function(r){a.createTerrainGlobalGeometry(e,t,i,r),n&&n()},function(){a.createStandardGlobalGeometry(e,t,i),n&&n()});a.createStandardGlobalGeometry(e,t,i),n&&n()}}]),t}(s.Tile.TileManager);s.Tile.TileGlobalManager=Q,function(){s.Tile.TileManagerFactory={TilePlaneManager:function(e,t,i){return new s.Tile.TilePlaneManager(e,t,i)},TileGlobalManager:function(e,t,i){return new s.Tile.TileGlobalManager(e,t,i)}}}(),function(){var e=function(e){function t(e,i,r,n,a,o){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return l.isDemLayer=!0,l.id=s.ObjectGroupType.TILEGROUP,l.databagId=l.id,l.viewer=e,l.parseCfgFinish=a,l.debut=o,l.dataUrl=new s.Loader.Url(r),l.tileManager=null,l.loadTileConfig=r.loadConfig,l.ObjectGroup=e.getScene().getOrCreateObjectGroup(s.ObjectGroupType.TILEGROUP,{pickableType:s.PICKABLETYPE.Map,globalSpace:!0}),l}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.manager.removeModel(this.id,!1),this.tileManager.destroy(),this.manager.scene.removeObjectGroupByName(s.ObjectGroupType.TILEGROUP),this.parseCfgFinish=null,this.debut=null,this.viewer=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(e){var t=this;this.manager.chooseRendering(this.statistics.memoeryInfo),this.parseCfgFinish&&this.parseCfgFinish(),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START});var i=new THREE.FileLoader;i.setResponseType("json"),i.load(this.dataUrl.projectUrl(),function(e){var i=e.metadata.longitude,r=e.metadata.latitude,n=e.metadata.zoom;s.GlobalData.ConstraintZoom=!0;t.viewer.cameraControl.setMaximalRangeofCamera(100),t.viewer.lockAxisZ("Z",[.1,Math.PI/2.01]),t.loadTile(t.viewer,t.loadTileConfig,i,r,n),t.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:t.id}),t.debut(t)})}},{key:"loadTile",value:function(e,t){e.getScene().geometryGroup.boundingBox||(this.getTransforms().boundingBox=new THREE.Box3(new THREE.Vector3(-s.GlobalData.SceneSize,-s.GlobalData.SceneSize,-s.GlobalData.SceneSize),new THREE.Vector3(s.GlobalData.SceneSize,s.GlobalData.SceneSize,s.GlobalData.SceneSize)),this.manager.updateScene(this));var i=e.getScene().getMatrixGlobal().clone(),r=new THREE.Matrix4;r=r.getInverse(i);var n={};if(t&&"[object Number]"===Object.prototype.toString.call(t.modelAltitude)?n.modelAltitude=t.modelAltitude:(console.log("modelAltitude not in loadConfig, default 0"),n.modelAltitude=0),t&&"[object Number]"===Object.prototype.toString.call(t.modelRotationZ)?n.modelRotationZ=t.modelRotationZ:(console.log("modelRotationZ not in loadConfig, default 0"),n.modelRotationZ=0),t&&t.basePoint?n.basePoint=t.basePoint:(console.log("basePoint not in loadConfig, default (0,0)"),n.basePoint=new THREE.Vector3(0,0,0)),!t||!t.modelPosition)return void console.log("modelPosition not in loadConfig");n.modelPosition=t.modelPosition,n.useTerrain=t&&t.useTerrain,n.terrainPath=t.terrainPath,n.opacity=t.opacity,n.mapUrl=t.mapUrl,n.terrainOnlineConfig=t.terrainOnlineConfig,n.mapStyle=t.mapStyle,n.useClipping=t.sectionable,n.dataUrl=this.dataUrl,n.maxTerrainLevel=void 0===t.maxTerrainLevel?14:t.maxTerrainLevel,n.minTerrainLevel=void 0===t.minTerrainLevel?10:t.minTerrainLevel,n.maxZoom=void 0===t.maxLevel?18:t.maxLevel,n.imageryProviderType=void 0===t.imageryProviderType?"UrlTemplate":t.imageryProviderType;var a="TilePlaneManager";n.useUnitMeter=t&&t.useUnitMeter,!0===n.useUnitMeter?s.Tile.TileMath.unitScale=1:"global"===n.useUnitMeter&&(a="TileGlobalManager",s.Tile.TileMath.unitScale=1),n.mapLayer=t.mapLayer,this.tileManager=s.Tile.TileManagerFactory[a](this,n,this.ObjectGroup),this.tileManager.addRenderCallback()}},{key:"updateMatrix",value:function(){this.tileManager&&this.tileManager.updateEarthMatrix()}}]),t}(s.BaseModel);s.DemModel=e}(),function(){var e=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return n.loadAll=!1,n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.loadAll=void 0}},{key:"update",value:function(){this.updateEarthMatrix(),this.updateEarth(),this.viewer.render(),this.onLoadTile()}},{key:"updateEarthMatrix",value:function(){this.globalMatrix=this.viewer.getScene().getMatrixGlobal(),this.mercatorPerimeter=s.Tile.TileMath.getMercatorPerimeterByLat(this.modelLatitude),this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom);var e=s.Tile.TileMath.tile2boundingBox(this.modelTileX,this.modelTileY,this.maxZoom),t=(this.modelLongitude-e.west)/(e.east-e.west),i=(this.modelLatitude-e.north)/(e.north-e.south),r=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,n=-t*r+.5*r-.5*r,a=-i*r-.5*r+.5*r,o=(new THREE.Matrix4).makeTranslation(n,a,0);this.tileGroup.matrix.identity(),this.tileGroup.applyMatrix(o),this.tileGroup.applyMatrix(this.globalMatrix),this.tileGroup.matrixAutoUpdate=!1,this.tileGroup.updateMatrixWorld(!0);for(var l=this.layerList.length,u=0;u<l;++u){var c=this.layerList[u];c.tileGroup.matrix.identity(),c.tileGroup.applyMatrix(o),c.tileGroup.applyMatrix(this.globalMatrix),c.tileGroup.matrixAutoUpdate=!1,c.tileGroup.updateMatrixWorld(!0)}this.viewer.render()}},{key:"updateModelLngLatByBasePoint",value:function(){}},{key:"onLoadTile",value:function(){!1===this.loadAll&&this.tileCount<=3&&(this.loadAll=!0,this.viewer.modelManager.setRenderStateChanged(!0),this.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_MAP_LOAD_ALL}))}},{key:"createTileGeometryFinished",value:function(e,t,i){this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createMaterial(e,t,i,this.mapUrl),this.globalLayer[i][e][t].needUpdateTexture&&this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&this.updateMaterialTexture(e,t,i);for(var r=this.layerList.length,n=0;n<r;++n){var a=this.layerList[n];a.contentUnLoad(i,e,t)&&this.globalLayer[i][e][t].meshLoadState>=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createLayerMaterial(a,e,t,i),a.contentLoaded(i,e,t)&&(a.meshNodeMap[i][e][t].visible=!0)}}}]),t}(s.Tile.TilePlaneManager);s.Tile.FullPlaneTileManager=e}(),function(){var e=function(e){function t(e,i,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));n.loadAll=!1;var a=n.mercatorPerimeter/Math.pow(2,n.maxZoom)*s.Tile.TileMath.unitScale*2;return n.commonGeometry=new THREE.PlaneBufferGeometry(a,a,1),n.commonBox=(new THREE.Box3).setFromArray([-a/2,-a/2,0,a/2,a/2,0]),n}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.loadAll=void 0}},{key:"update",value:function(){this.updateEarthMatrix(),this.updateEarth(),this.onLoadTile()}},{key:"updateEarthMatrix",value:function(){this.globalMatrix=this.viewer.getScene().getMatrixGlobal(),this.mercatorPerimeter=s.Tile.TileMath.getMercatorPerimeterByLat(this.modelLatitude),this.modelTileX=s.Tile.TileMath.long2tile(this.modelLongitude,this.maxZoom),this.modelTileY=s.Tile.TileMath.lat2tile(this.modelLatitude,this.maxZoom);var e=s.Tile.TileMath.tile2boundingBox(this.modelTileX,this.modelTileY,this.maxZoom),t=(this.modelLongitude-e.west)/(e.east-e.west),i=(this.modelLatitude-e.north)/(e.north-e.south),r=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,n=-t*r+.5*r-.5*r,a=-i*r-.5*r+.5*r,o=(new THREE.Matrix4).makeTranslation(n,a,0);this.tileGroup.matrix.identity(),this.tileGroup.applyMatrix(o),this.tileGroup.applyMatrix(this.globalMatrix),this.tileGroup.matrixAutoUpdate=!1,this.tileGroup.updateMatrixWorld(!0);for(var l=this.layerList.length,u=0;u<l;++u){var c=this.layerList[u];c.tileGroup.matrix.identity(),c.tileGroup.applyMatrix(o),c.tileGroup.applyMatrix(this.globalMatrix),c.tileGroup.matrixAutoUpdate=!1,c.tileGroup.updateMatrixWorld(!0)}}},{key:"updateModelLngLatByBasePoint",value:function(){}},{key:"onLoadTile",value:function(){!1===this.loadAll&&this.tileCount<=3&&(this.loadAll=!0,this.viewer.modelManager.setRenderStateChanged(!0),this.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_MAP_LOAD_ALL}))}},{key:"addNode",value:function(e,t,i){var r=this;e>=Math.pow(2,i)||e<0||t>=Math.pow(2,i)||t<0||(void 0==this.globalLayer[i]&&(this.globalLayer[i]={}),void 0==this.globalLayer[i][e]&&(this.globalLayer[i][e]={}),void 0==this.globalLayer[i][e][t]&&(this.globalLayer[i][e][t]=new s.Tile.DemTile(i,e,t)),this.globalLayer[i][e][t].meshLoadState==s.Tile.DemTilesUtil.LOAD_STATE.UNLOADED?(this.tileCount++,this.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADING,this.createTileGeometry(e,t,i,!0,function(){r.createTileGeometryFinished(e,t,i)})):this.globalLayer[i][e][t].meshLoadState!=s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&this.globalLayer[i][e][t].meshLoadState!=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED||this.createTileGeometryFinished(e,t,i))}},{key:"createTileGeometry",value:function(e,t,i,r,n){var a=this.mercatorPerimeter/Math.pow(2,i)*s.Tile.TileMath.unitScale*2,o=this.seg;return this.useTerrain&&this.textureXYZScale&&this.textureXYZScale[i]&&this.textureXYZScale[i].leftX<=e&&this.textureXYZScale[i].rightX>=e&&this.textureXYZScale[i].upY<=t&&this.textureXYZScale[i].bottomY>=t?void this.getTerrainGeometry(e,t,i,o,a,r,n):this.useTerrain&&!this.textureXYZScale&&i>=this.minTerrainLevel?void this.getTerrainGeometry(e,t,i,o,a,r,n):void this.translateGeometry(this.commonGeometry,i,e,t,null,n)}},{key:"translateGeometry",value:function(e,t,i,r,n,a){null==n&&(n=0);var o=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,l=Math.pow(2,this.maxZoom-t),u=(i*l-this.modelTileX)*o+l/2*o,c=-(r*l-this.modelTileY)*o-l/2*o,h=new THREE.Matrix4;h.compose(new THREE.Vector3(u,c,1),new THREE.Quaternion,new THREE.Vector3(l,l,l)),this.globalLayer[t][i][r].tileMatrix=h;var d=this.commonBox.clone().applyMatrix4(h);d.applyMatrix4(this.earthMatrix),this.globalLayer[t][i][r].box=d,this.globalLayer[t][i][r].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED,a&&a()}},{key:"translateGeometryWithSkirt",value:function(e,t,i,r,n,a){null==n&&(n=0);var o=e[0],l=e[1],u=this.mercatorPerimeter/Math.pow(2,this.maxZoom)*s.Tile.TileMath.unitScale*2,c=Math.pow(2,this.maxZoom-t),h=(i*c-this.modelTileX)*u+c/2*u,d=-(r*c-this.modelTileY)*u-c/2*u,f=new THREE.Matrix4;f.compose(new THREE.Vector3(h,d,1),new THREE.Quaternion,new THREE.Vector3(1,1,1)),this.globalLayer[t][i][r].tileMatrix=f,this.globalLayer[t][i][r].geometry=o,this.globalLayer[t][i][r].skirtGeometry=l,o.computeBoundingBox();var p=o.boundingBox.clone().applyMatrix4(f);p.applyMatrix4(this.earthMatrix),this.globalLayer[t][i][r].box=p,this.globalLayer[t][i][r].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED,a&&a()}},{key:"createTileGeometryFinished",value:function(e,t,i){this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createMaterial(e,t,i,this.mapUrl),this.globalLayer[i][e][t].needUpdateTexture&&this.globalLayer[i][e][t].meshLoadState===s.Tile.DemTilesUtil.LOAD_STATE.LOADED&&this.updateMaterialTexture(e,t,i);for(var r=this.layerList.length,n=0;n<r;++n){var a=this.layerList[n];a.contentUnLoad(i,e,t)&&this.globalLayer[i][e][t].meshLoadState>=s.Tile.DemTilesUtil.LOAD_STATE.GEO_LOADED&&this.createLayerMaterial(a,e,t,i),a.contentLoaded(i,e,t)&&(a.meshNodeMap[i][e][t].visible=!0)}}},{key:"createMaterial",value:function(e,t,i){var r=this;this.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.MAT_PARSING;var n=this;return new Promise(function(a,o){var l=n.imageryProvider.getImageryUrl(e,t,i);r.loader.load(l,function(o){var l=new s.MapTileMaterial({map:o,transparent:!1,side:THREE.FrontSide});r.useClipping&&(l.defines.USE_CLIPPING=""),l.updateStyle(n.mapStyle);var u=i+"-"+e+"-"+t;if(l.opacity=r.tileOpacity,r.tileOpacity<1&&(l.transparent=!0),r.globalLayer[i][e][t].meshNode)return r.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.LOADED,void a(r.globalLayer[i][e][t]);r.materialMap[u]=l,r.globalLayer[i][e][t].texture=o,r.globalLayer[i][e][t].material=l;var c=null;if(c=r.useTerrain&&r.globalLayer[i][e][t].geometry?new THREE.Mesh(r.globalLayer[i][e][t].geometry,r.materialMap[u]):new THREE.Mesh(r.commonGeometry,r.materialMap[u]),r.globalLayer[i][e][t].meshNode=c,r.globalLayer[i][e][t].meshNode.name=u,r.globalLayer[i][e][t].meshNode.renderOrder=r.baseRenderOrder,r.globalLayer[i][e][t].meshNode.matrix=r.globalLayer[i][e][t].tileMatrix,r.globalLayer[i][e][t].meshNode.matrixAutoUpdate=!1,r.tileGroup.add(r.globalLayer[i][e][t].meshNode),r.globalLayer[i][e][t].skirtGeometry){var h="Skirt-"+i+"-"+e+"-"+t;r.globalLayer[i][e][t].skirt=new THREE.Mesh(r.globalLayer[i][e][t].skirtGeometry,r.materialMap[u]),r.globalLayer[i][e][t].skirt.name=h,r.globalLayer[i][e][t].skirt.renderOrder=r.baseRenderOrder,r.globalLayer[i][e][t].skirt.matrix=r.globalLayer[i][e][t].tileMatrix,r.globalLayer[i][e][t].skirt.matrixAutoUpdate=!1,r.tileGroup.add(r.globalLayer[i][e][t].skirt)}(r.tileOpacity<1||r.disableSkirt)&&r.globalLayer[i][e][t].skirt&&(r.globalLayer[i][e][t].skirt.visible=!1),r.globalLayer[i][e][t].meshLoadState=s.Tile.DemTilesUtil.LOAD_STATE.LOADED,r.viewer.render(),r.onLoadTerrain(),a(r.globalLayer[i][e][t]),r.tileCount--},void 0,function(){r.tileCount--})})}}]),t}(s.Tile.TilePlaneManager);s.Tile.FullPlaneTileManager2=e}(),function(){var e=function(e){function t(e,i,r,n,a,o){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));return l.id=s.ObjectGroupType.TILEGROUP,l.databagId=l.id,l.viewer=e,l.index=n,l.parseCfgFinish=a,l.debut=o,l.dataUrl=new s.Loader.Url(r),l.loadTileConfig=r.loadConfig,l.tileBuilder=new s.Tile.GlobeTileBuilder,l.objectGroup=i.getScene().getOrCreateObjectGroup(s.GlobalData.TileGlobalGroupName,{pickableType:s.PICKABLETYPE.Map,globalSpace:!0}),l.manager.addModel(l),l.tileManager=null,l._modelMatrix=new THREE.Matrix4,l}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._modelMatrix=null,this.manager.scene.removeObjectGroupByName(s.ObjectGroupType.TILEGROUP),this.tileManager.destroy(),this.tileBuilder.destroy(),this.tileBuilder=null,this.parseCfgFinish=null,this.debut=null,this.viewer=null,this.dataUrl=null,this.loadTileConfig=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(e){this.manager.setDrawableModel(!0),this.manager.chooseRendering(this.statistics.memoeryInfo,!0),this.viewer.rendererManager.setupRenderer(this.viewer.renderSettings),this.parseCfgFinish&&this.parseCfgFinish(),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START});var t=s.GlobalData.SceneSize;this.getTransforms().boundingBox=(new THREE.Box3).setFromArray([-t,-t,-t,t,t,t]),this.manager.updateScene(this);this.viewer.getScene().getMatrixGlobal().clone();this.loadModelConfig(this.viewer,this.loadTileConfig),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE})}},{key:"loadModelConfig",value:function(e,t){s.Tile.TileMath.unitScale=1,t.dataUrl=this.dataUrl,this.tileManager=new s.Tile.FullPlaneTileManager2(this,t,this.objectGroup)}},{key:"hasTransforms",value:function(){return!0}},{key:"preUpdate",value:function(e){}},{key:"update",value:function(e){this.tileManager&&this.tileManager.update()}},{key:"postUpdate",value:function(e){}},{key:"isUserIdExist",value:function(e){return!1}}]),t}(s.BaseModel);s.Tile.FullPlaneTileModel=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.imageryLayer=t.layer,this.x=t.x,this.y=t.y,this.level=t.level,this.request=void 0,this.state=s.Layer.ImageryState.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this._destroyed=!1,this.referenceCount=0}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this.image&&this.image.destroy&&this.image.destroy(),this.image=void 0,this.texture&&this.texture.destroy&&this.texture.destroy(),this.texture=void 0,this.request&&(this.request.destroy(),this.request=void 0),this.imageryLayer.removeImagery(this),this.imageryLayer=void 0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"addReference",value:function(){++this.referenceCount}},{key:"releaseReference",value:function(){return 0!==--this.referenceCount?this.referenceCount:(this.destroy(),0)}},{key:"contentUnloaded",get:function(){return this.state===s.Layer.ImageryState.UNLOADED}},{key:"contentFailed",get:function(){return this.state===s.Layer.ImageryState.FAILED}},{key:"contentReady",get:function(){return this.state===s.Layer.ImageryState.READY}}]),e}();s.Layer.Imagery=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.imageryProvider=t.imageryProvider,this.show=s.Utils.defaultValue(t.show,!0),this.lastShow=!0,this.layerIndex=-1,this.baseLayer=!1,this._imageryCache={},this._destroyed=!1,this._skeleton=new s.Layer.Imagery({layer:this,x:0,y:0,level:0})}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this._skeleton.destroy(),this._skeleton=void 0,this.destroyAllImagery(),this._imageryCache=void 0,this.imageryProvider&&this.imageryProvider.destroy&&this.imageryProvider.destroy(),this.imageryProvider=void 0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_createTileImagerySkeletons",value:function(e,t,i){if(s.Utils.defined(this._minTerrainLevel)&&e.level<this._minTerrainLevel)return!1;if(s.Utils.defined(this._maxTerrainLevel)&&e.level>this._maxTerrainLevel)return!1;var r=this.imageryProvider;return s.Utils.defined(i)||(insertionPoint=e.imageries.length),r.ready?void 0:(this._skeleton.addReference(),e.imageries.splice(i,0,this._skeleton),!0)}},{key:"getImagery",value:function(t,i,r){var n=e.getImageryCacheKey(t,i,r),a=this._imageryCache[n];return s.Utils.defined(a)||(a=new s.Layer.Imagery({layer:this,x:t,y:i,level:r}),this._imageryCache[n]=a),a.addReference(),a}},{key:"destroyAllImagery",value:function(){var e=this;Object.keys(this._imageryCache).forEach(function(t){var i=e._imageryCache[t];i.isDestroyed()||i.destroy(),delete e._imageryCache[t]})}},{key:"removeImagery",value:function(t){if(this._imageryCache){var i=e.getImageryCacheKey(t.x,t.y,t.level);delete this._imageryCache[i]}}}],[{key:"getImageryCacheKey",value:function(e,t,i){return e+"-"+t+"-"+i}}]),e}();s.Layer.ImageryLayer=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this._layers=[],this.layerAdded=new s.Event,this.layerRemoved=new s.Event,this.layerMoved=new s.Event,this.layerShownOrHidden=new s.Event,this._destroyed=!1}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this.removeAll(!0),this._layers=void 0,this.layerAdded=void 0,this.layerRemoved=void 0,this.layerShownOrHidden=void 0}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"add",value:function(e,t){void 0===t?(t=this._layers.length,this._layers.push(e)):this._layers.splice(t,0,e),this.update(),this.layerAdded.fireEvent(e,t)}},{key:"addImageryLayer",value:function(e,t){var i=new s.Layer.ImageryLayer({imageryProvider:e});return this.add(i,t),i}},{key:"traverse",value:function(e,t){var i=t?Array.from(this._layers):this._layers;t&&i.sort(function(e,t){return e.sequence-t.sequence}),i.forEach(function(t){return e(t)})}},{key:"remove",value:function(e,t){t=s.Utils.defaultValue(t,!0);var i=this._layers.indexOf(e);return-1!==i&&(this._layers.splice(i,1),this.update(),this.layerRemoved.fireEvent(e,i),t&&e.destroy(),!0)}},{key:"removeAll",value:function(e){var t=this;e=s.Utils.defaultValue(e,!0),this._layers.forEach(function(i,r){t.layerRemoved.fireEvent(i,r),e&&i.destroy()}),this._layers=[]}},{key:"contains",value:function(e){return-1!==this._layers.indexOf(e)}},{key:"get",value:function(e){return this._layers[e]}},{key:"getByFilter",value:function(e){var t=[];return this._layers.forEach(function(i){e&&!e(i)||t.push(i)}),t}},{key:"update",value:function(){var e=this,t=this._layers,i=!0,r=void 0;t.forEach(function(e,t){e.layerIndex=t,
e.show?(e.baseLayer=i,i=!1):e.baseLayer=!1,e.show!==e.lastShow&&(s.Utils.defined(e.lastShow)&&(s.Utils.defined(r)||(r=[]),r.push(e)),e.lastShow=e.show)}),s.Utils.defined(r)&&r.forEach(function(t){e.layerShownOrHidden.fireEvent(t,t.layerIndex,t.show)})}},{key:"getLayerIndex",value:function(e){return this._layers.indexOf(e)}},{key:"moveToTop",value:function(e){var t=this._layers,i=this.getLayerIndex(e);i!==t.length-1&&(t.splice(i,1),t.push(e),this.update(),this.layerMoved.fireEvent(e,t.length-1,i))}},{key:"moveToBottom",value:function(e){var t=this._layers,i=this.getLayerIndex(e);0!==i&&(t.splice(i,1),t.splice(0,0,e),this.update(),this.layerMoved.fireEvent(e,0,i))}},{key:"moveToIdx",value:function(e,t){var i=this._layers,r=this.getLayerIndex(e);r!==t&&(t<0||t>i.length-1||(i.splice(r,1),i.splice(t,0,e),this.update(),this.layerMoved.fireEvent(e,t,r)))}},{key:"length",get:function(){return this._layers.length}}]),e}();s.Layer.ImageryLayerCollection=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),t=s.Utils.defaultValue(t,{}),this._option=t,this.mapUrl=t.mapUrl,this.id=t.layerId||s.Utils.getEncodedString(this.mapUrl),this.useClipping=t.useClipping,this._destroyed=!1,this._textureLoader=new THREE.TextureLoader,this._textureLoader.crossOrigin=!0,this.ready=!0,this._readyPromise=void 0}return _createClass(e,[{key:"destroy",value:function(){this._destroyed=!0,this._textureLoader=void 0,this._readyPromise=void 0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"isAvailableTile",value:function(e,t,i){return!0}},{key:"getImageryUrl",value:function(t,i,r){return e.getRequestMapUrl(this.mapUrl,t,i,r)}},{key:"getTileMaterial",value:function(e){if(e.texture){var t=new s.MapTileMaterial({map:e.texture,transparent:!e.imageryLayer.baseLayer,side:THREE.FrontSide});t._originalTransparent=t.transparent;var i=s.MaterialUtil.getImageByteSize(e.texture.image);return t._imageByteSize+=i,this.useClipping&&(t.defines.USE_CLIPPING=""),t}}},{key:"loadArrayBufferImmediately",value:function(e,t,i){var r=this;if(!this.isDestroyed())if(s.EnableStorage)s.storageManager.getTexture(e).then(function(e){return t(e)}).catch(function(n){if(!r.isDestroyed()){r._textureLoader.load(e,function(i){t(i),s.storageManager.addTexture(i,e).catch(function(e){})},void 0,function(e){i(e)})}});else{var n=this._textureLoader;n.load(e,function(e){t(e)},void 0,function(e){i(e)})}}},{key:"cloneParameters",value:function(){return Object.assign(this._option)}},{key:"setReadyCallback",value:function(e){}},{key:"getQuadX",value:function(e,t){return e}},{key:"getQuadY",value:function(e,t){return e}},{key:"readyPromise",get:function(){return this._readyPromise}}],[{key:"getRequestMapUrl",value:function(e,t,i,r){var n={"{x}":t.toString(),"{y}":i.toString(),"{z}":r.toString()},a=new RegExp(Object.keys(n).join("|"),"gi");return e=e.replace(a,function(e){return n[e]})}}]),e}();s.Layer.ImageryProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){return s.Layer.ImageryProvider.getRequestMapUrl(this.mapUrl,e,t,i)}}]),t}(s.Layer.ImageryProvider);s.Layer.UrlTemplateImageryProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){var r=this.mapUrl,n=i%8,a={"{x}":t.toString(),"{y}":e.toString(),"{z}":i.toString()},o=new RegExp(Object.keys(a).join("|"),"gi");if(r=r.replace(o,function(e){return a[e]}),r.indexOf("tianditu.gov.cn")>=0){var s=/http[s]?(:\/\/t[1]?[0-9].)/.exec(r);if(s){var l=s[1];r=r.replace(l,"://t"+n+".")}}return r}}]),t}(s.Layer.ImageryProvider);s.Layer.WebMapTileServiceTDUImageryProvider=e}(),function(){var e=new THREE.Vector2,t=new THREE.Vector2,i=new THREE.Box2,r=function(r){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._jsonLoader=new THREE.FileLoader,t._jsonLoader.setResponseType("json"),t._imagePostfix=void 0,t._urlTemplate=void 0,t.ready=!1,t._availableTilesChecked=!1,t._readyCallback=null,t.checkIfReady(),t}return _inherits(n,r),_createClass(n,[{key:"destroy",value:function(){this._jsonLoader=void 0,this._readyCallback=null,_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"setReadyCallback",value:function(e){this._readyCallback=e}},{key:"checkIfReady",value:function(){var e=this;this._readyPromise=this._fetchMetadata().then(function(){e.ready=!0,e._readyCallback&&e._readyCallback()}).catch(function(){e.ready=!1})}},{key:"_fetchMetadata",value:function(){var e=this,t=this._textureLoader,i=this._jsonLoader,r=this.mapUrl,n=[],a=new Promise(function(t,n){var a=r+"/meta.json";i.load(a,function(i){e._parseMetaConfig(i),t()},void 0,function(){n()})}),o=new Promise(function(t,n){var a=r+"/layer.json";i.load(a,function(i){e._parseLayerConfig(i),t()},void 0,function(){n()})});return n.push(a),n.push(o),new Promise(function(i,r){Promise.all(n).then(function(){var n=e.getImageryUrl(0,0,0);n?t.load(n,function(){i()},void 0,function(){r()}):r()}).catch(function(e){console.log(e)})})}},{key:"_parseMetaConfig",value:function(e){var t=e.contentType?e.contentType.split("/")[1]:void 0;this._imagePostfix=s.Utils.defaultValue(t,"png"),this._bounds=e.bounds,this._maxzoom=e.maxzoom,this._minzoom=e.minzoom}},{key:"_parseLayerConfig",value:function(i){this._projection=i.projection,this._scheme=i.scheme;var r=i.tiles?i.tiles[0].split(".")[0]:void 0;if(this._urlTemplate=s.Utils.defaultValue(r,"{z}/{x}/{y}"),this._availableTiles=i.available,this._availableTiles&&this._availableTiles.length){this._availableTileBounds=new THREE.Box2;var n=this._availableTileBounds;this._availableTiles.forEach(function(i){i.forEach(function(i){n.expandByPoint(e.set(i.startX,i.startY)),n.expandByPoint(t.set(i.endX,i.endY))})})}}},{key:"isAvailableTile",value:function(r,n,a){if(this._maxzoom&&(a<this._minzoom||a>this._maxzoom))return!1;var o=this._bounds;if(o){var l=s.Tile.TileMath.long2tile(o.west,a),u=s.Tile.TileMath.long2tile(o.east,a),c=s.Tile.TileMath.lat2tile(o.south,a),h=s.Tile.TileMath.lat2tile(o.north,a),d=Math.min(c,h),f=Math.max(c,h);if(r<l||r>u||n<d||n>f)return!1}if(this._availableTilesChecked){var p=this._availableTileBounds;if(p&&!p.containsPoint({x:r,y:n}))return!1;var m=this._availableTiles;if(m){return m.some(function(a){return a.some(function(a){return i.makeEmpty(),i.expandByPoint(e.set(a.startX,a.startY)),i.expandByPoint(t.set(a.endX,a.endY)),i.containsPoint({x:r,y:n})})})}}return!0}},{key:"getImageryUrl",value:function(e,t,i){if(this._imagePostfix&&this._urlTemplate){var r=this.mapUrl+"/"+this._urlTemplate+"."+this._imagePostfix;return s.Layer.ImageryProvider.getRequestMapUrl(r,e,t,i)}}}]),n}(s.Layer.ImageryProvider);s.Layer.SpecificMapServiceImageryProvider=r}(),function(){s.Layer.ImageryProviderFactory={UrlTemplate:function(e){return new s.Layer.UrlTemplateImageryProvider(e)},WebMapTileServiceTDU:function(e){return new s.Layer.WebMapTileServiceTDUImageryProvider(e)},SpecificMapService:function(e){return new s.Layer.SpecificMapServiceImageryProvider(e)},TileMapBingMapService:function(e){return new s.Layer.TileMapBingMapServiceProvider(e)},TileMapTencentMapService:function(e){return new s.Layer.TileMapTencentMapServiceProvider(e)},TileMapService:function(e){return new s.Layer.TileMapServiceProvider(e)},WebMapService:function(e){return new s.Layer.WebMapServiceProvider(e)},BdMapService:function(e){return new s.Layer.BdImageryProvider(e)}}}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){for(var r=this.mapUrl,n=i%8,a="",o=i;o>0;o--){var s=0,l=1<<o-1;0!=(e&l)&&s++,0!=(t&l)&&(s++,s++),a+=s.toString()}""===a&&(a="0");var u={"{x}":a},c=new RegExp(Object.keys(u).join("|"),"gi");r=r.replace(c,function(e){return u[e]});var h=/http[s]?(:\/\/ecn.t[1]?[0-9].)/.exec(r);if(h){var d=h[1];r=r.replace(d,"://t"+n+".")}return r}}]),t}(s.Layer.ImageryProvider);s.Layer.TileMapBingMapServiceProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){var r=this.mapUrl,n=i%4,a=e,o=(1<<i)-t-1,s=a>>4,l=o>>4,u={"{x}":a,"{y}":o,"{sx}":s,"{sy}":l,"{z}":i},c=new RegExp(Object.keys(u).join("|"),"gi");r=r.replace(c,function(e){return u[e]});var h=/http[s]?(:\/\/p[1]?[0-9].)/.exec(r);if(h){var d=h[1];r=r.replace(d,"://p"+n+".")}return r}}]),t}(s.Layer.ImageryProvider);s.Layer.TileMapTencentMapServiceProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){var r=(1<<i)-t-1;return s.Layer.ImageryProvider.getRequestMapUrl(this.mapUrl,e,r,i)}},{key:"getQuadY",value:function(e,t){return(1<<t)-e-1}}]),t}(s.Layer.ImageryProvider);s.Layer.TileMapServiceProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){var r=s.Tile.TileMath.tile2boundingBox(e,t,i);return this.mapUrl+"&bbox="+r.west+"%2C"+r.south+"%2C"+r.east+"%2C"+r.north}}]),t}(s.Layer.ImageryProvider);s.Layer.WebMapServiceProvider=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getImageryUrl",value:function(e,t,i){var r=this.mapUrl,n=1<<i,a=1<<i,o=i+1,s=(e+t)%4;if(r.indexOf("bdimg.com")>=0){var l=/http[s]?(:\/\/maponline[1]?[0-9].)/.exec(r);if(l){var u=l[1];r=r.replace(u,"://maponline"+s+".")}}return r=r.replace("{x}",e-n/2).replace("{y}",a/2-t-1).replace("{z}",o)}}]),t}(s.Layer.ImageryProvider);s.Layer.BdImageryProvider=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.state=s.Layer.TerrainState.UNLOADED,this.terrainData=void 0,this.request=void 0}return _createClass(e,[{key:"destroy",value:function(){this.terrainData=void 0,this.request&&(this.request.destroy(),this.request=void 0)}},{key:"unload",value:function(){this.state=s.Layer.TerrainState.UNLOADED,this.terrainData=void 0,this.request&&(this.request.destroy(),this.request=void 0)}},{key:"contentUnloaded",get:function(){return this.state===s.Layer.TerrainState.UNLOADED}},{key:"contentFailed",get:function(){return this.state===s.Layer.TerrainState.FAILED}},{key:"contentReady",get:function(){return this.state===s.Layer.TerrainState.READY}}]),e}();s.Layer.Terrain=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this._levelZeroXTilesNumber=s.Utils.defaultValue(t.levelZeroXTilesNumber,1),this._levelZeroYTilesNumber=s.Utils.defaultValue(t.levelZeroYTilesNumber,1);var i=t.terrainMetadata;this.terrainBoundary=i&&i.boundary?{leftX:i.boundary.leftX,rightX:i.boundary.rightX,upY:i.boundary.upY,bottomY:i.boundary.bottomY}:void 0,this._minTerrainLevel=i&&i.zoom?i.zoom[0]:10,this._maxTerrainLevel=i&&i.zoom?i.zoom[1]:14,this.terrainDataUrl=t.terrainPath?new s.Tile.DemUrl(t.terrainPath):void 0,this.useTerrain=!!this.terrainDataUrl&&s.Utils.defaultValue(t.useTerrain,!1),this.tileGeometrySegments=s.Utils.defaultValue(t.tileGeometrySegments,16),this.maxLimitedLevel=s.Utils.defaultValue(t.maxLevel,18),this._heightmapQuality=.25,this._maximumRadius=6378137,this._unitScale=s.Utils.defaultValue(t.unitScale,1),this._levelZeroMaxGeometricError=this._unitScale*this.getLevelZeroGeometricError(64,this.getXTilesNumber(0)),this.mercatorPerimeter=this._unitScale*s.Utils.defaultValue(t.mercatorPerimeter,2*s.Tile.TileMath.mercatorPerimeter),this.tileBuilder=new s.Tile.PlaneTileBuilder,this.defaultTileGeometry=new THREE.PlaneBufferGeometry(1,1,this.tileGeometrySegments),this.defaultTileGeometry._onlyShared=!0,this.ready=!0,this.terrainLoader=new THREE.FileLoader,this.terrainLoader.setResponseType("arraybuffer"),this.terrainLoader.crossOrigin=!0,this.terrainSeamThreshold=.5*this._unitScale,this.planeSeamThreshold=1*this._unitScale}return _createClass(e,[{key:"destroy",value:function(){this.tileBuilder.destroy(),this.tileBuilder=void 0,this.defaultTileGeometry.dispose(),this.defaultTileGeometry=void 0,this.terrainLoader=void 0}},{key:"getXTilesNumber",value:function(e){return this._levelZeroXTilesNumber<<e}},{key:"getYTilesNumber",value:function(e){return this._levelZeroYTilesNumber<<e}},{key:"getLevelZeroGeometricError",value:function(e,t){return 2*this._maximumRadius*Math.PI*this._heightmapQuality/(e*t)}},{key:"getLevelMaxGeometricError",value:function(e){return this._levelZeroMaxGeometricError/(1<<e)}},{key:"createTerrain",value:function(e,t,i,r){return new s.Layer.Terrain({})}},{key:"isAvailableTile",value:function(e,t,i){if(!this.useTerrain)return!0;var r=this.terrainBoundary;if(!r)return!0;var n=this._minTerrainLevel;if(i<n)return!1;var a=r.leftX,o=r.upY,s=r.rightX,l=r.bottomY,u=1<<i-n,c=a*u+0,h=o*u+0,d=s*u+u-1,f=l*u+u-1;return e>=c&&e<=d&&t>=h&&t<=f}},{key:"getAvailableTile",value:function(e,t,i,r){if(0!==i){var n=(i/r|0)*r,a=1<<i-n;return{level:n,x:e/a|0,y:t/a|0}}}},{key:"getTileAvailable",value:function(e,t,i){}},{key:"getTileBoundingBox",value:function(e,t,i){var r=this.mercatorPerimeter/Math.pow(2,i),n=-.5*this.mercatorPerimeter+e*r,a=n+r,o=.5*this.mercatorPerimeter-t*r,s=o-r;return new THREE.Box3(new THREE.Vector3(n,s,-1),new THREE.Vector3(a,o,1))}},{key:"isOverMaxLevel",value:function(e){return!!this.useTerrain&&e>this._maxTerrainLevel}},{key:"getLevelXYOfDataSource",value:function(e,t,i){var r=this._maxTerrainLevel;if(i>r)return this.getParentLevelXY(e,t,i,r)}},{key:"getParentLevelXY",value:function(e,t,i,r){var n=1<<i-r;return{x:e/n|0,y:t/n|0,level:r,divisor:n,xIndex:e%n,yIndex:t%n}}},{key:"getTerrainUrl",value:function(e,t,i){if(this.useTerrain)return this.terrainDataUrl.terrainUrl(i,e,t)}},{key:"getTileGeometry",value:function(e){if(!this.useTerrain)return{geometry:this.defaultTileGeometry,matrix:this._getTileTransformMatrix(e,!0)};var t=e.x,i=e.y,r=e.level,n=e.tileTerrain.terrainData,a=this.getTileGeometryByData(n,t,i,r,!1),o=a.geometry;return o.computeBoundingBox(),e.updateTerrainHeight(o.boundingBox),a}},{key:"getTileGeometryByData",value:function(e,t,i,r,n){var a=this.tileGeometrySegments,o=this.mercatorPerimeter/Math.pow(2,r)+this.terrainSeamThreshold,s=this.tileBuilder.computePlaneGeometry(o,o,a,e,n,this._unitScale);return{geometry:s[0],skirtGeometry:s[1],matrix:this._getTileTransformMatrix({x:t,y:i,level:r},!1)}}},{key:"updateTileGeometryForFlatten",value:function(e,t,i,r,n,a){if(this.useTerrain){var o=this.tileGeometrySegments,s=e.tileTerrain.terrainData,l=this.mercatorPerimeter/Math.pow(2,e.level)+this.terrainSeamThreshold;this.tileBuilder.updateGeometryForFlatten(l,l,o,s,!1,this._unitScale,t,i,r,n,a)}}},{key:"getTerrainDataArray",value:function(e){for(var t=this.tileGeometrySegments,i=Array.prototype.slice.call(new Int16Array(e)),r=new Array(t+1),n=0,a=r.length;n<a;n++){r[n]=new Array(t+1);for(var o=0,l=t+1;o<l;o++)i[n*(t+1)+o]!==s.Tile.DemTilesUtil.InvalidTerrainValue?r[n][o]=i[n*(t+1)+o]:r[n][o]=0}return r}},{key:"getTerrainDataArrayOutOfLevel",value:function(e){if(e.parent&&e.parent.tileTerrain.terrainData)return this.getTerrainDataArrayFromParent(e)}},{key:"getTerrainDataArrayFromParent",value:function(e){for(var t=e._parent.tileTerrain.terrainData,i=this.tileGeometrySegments,r=this.getParentLevelXY(e.x,e.y,e.level,e._parent.level),n=r.divisor,a=r.xIndex,o=r.yIndex,l=i/n,u=a*l,c=o*l,h=new Array(l+1),d=0,f=h.length;d<f;d++){h[d]=new Array(l+1);for(var p=0;p<=l;++p)h[d][p]=t[c+d][u+p]}return s.Tile.TileMath.createHeightArray(h,i)}},{key:"_getTileTransformMatrix",value:function(e,t){var i=e.x,r=e.y,n=e.level,a=n>0?Math.pow(2,n)/2:0,o=this.mercatorPerimeter/Math.pow(2,n),s=o+this.planeSeamThreshold,l=t?(new THREE.Matrix4).makeScale(s,s,1):new THREE.Matrix4,u=i*o+.5*o-a*o,c=-(r*o+.5*o-a*o),h=(new THREE.Matrix4).makeTranslation(u,c,0),d=new THREE.Matrix4;return d.premultiply(l).premultiply(h),d}},{key:"loadArrayBufferImmediately",value:function(e,t,i){this.terrainLoader.load(e,function(e){t(e)},void 0,function(e){i(e)})}},{key:"getMaxMinTerrainLevel",value:function(){return{maxLevel:this._maxTerrainLevel,minLevel:this._minTerrainLevel}}},{key:"setMercatorPerimeter",value:function(e){this.mercatorPerimeter=this._unitScale*e}}]),e}();s.Layer.TerrainProvider=e}(),function(){var e=new THREE.Box3,t=new THREE.Matrix4,i=function(){function i(e){if(_classCallCheck(this,i),this.imageryLayers=new s.Layer.ImageryLayerCollection,this.terrainProvider=new s.Layer.TerrainProvider(e.loadConfig),this.terrainOperationManager=e.terrainOperationManager,this.globeLayer=e.globeLayer,this.mapStyle=e.loadConfig.mapStyle||{},this.mapExcavation=e.loadConfig.mapExcavation||{},this.tileOpacity={},this.tileVisible={},this.show=!0,this.skirtShow=!0,this._layerOrderChanged=!1,this._materialCache={},this._skirtMeshCache={},!1!==e.loadConfig.useDefaultImagery&&e.loadConfig.mapUrl){this.baseLayerId=this.addImageryLayer({imageryProviderType:e.loadConfig.imageryProviderType,useClipping:e.loadConfig.sectionable,mapLayer:e.loadConfig.mapLayer,mapUrl:e.loadConfig.mapUrl});var t=e.loadConfig.opacity||1;this.tileOpacity[this.baseLayerId]=t,this.tileVisible[this.baseLayerId]=!0}}return _createClass(i,[{key:"destroy",value:function(){this.terrainProvider.destroy(),this.terrainProvider=void 0,this.imageryLayers.destroy(),this.ImageryLayers=void 0,this._materialCache=void 0,this._skirtMeshCache=void 0,this.terrainOperationManager=void 0,this.baseLayerId=void 0}},{key:"canRefine",value:function(e){return!!e.terrainData||void 0!==this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1)}},{key:"_onLayerAdded",value:function(e,t){this._layerOrderChanged=!0}},{key:"_onLayerRemoved",value:function(e,t){this._layerOrderChanged=!0}},{key:"_onLayerMoved",value:function(e,t,i){this._layerOrderChanged=!0}},{key:"parseTileContent",value:function(e,t){e.isDestroyed()||(this._createTileMesh(e),t(e))}},{key:"_createTileMesh",value:function(e){var t=this,i=e.content.meshes,r=this.terrainProvider.getTileGeometry(e),n=s.EnumLayerBaseRenderOrder.MAP;e.imageries.forEach(function(a,o){var l=a.imageryLayer.imageryProvider,u=l.id,c=l.getTileMaterial(a);if(c){t.updateTileMaterial(c,u);var h=n+o,d=new s.MeshEx(r.geometry,c);if(d.alive=!0,d.name=e.name,d.renderOrder=h,d.layerId=u,r.matrix&&d.matrix.copy(r.matrix),s.GlobalData.EnableShadowMap&&(d.castShadow=t.globeLayer.castShadow,d.receiveShadow=t.globeLayer.receiveShadow),i.add(d),t.updateTileMesh(d,u),r.skirtGeometry){var f=new s.MeshEx(r.skirtGeometry,c);f.alive=!0,f.name="Skirt-"+e.name,f.renderOrder=h,f.layerId=u,r.matrix&&f.matrix.copy(r.matrix),s.GlobalData.EnableShadowMap&&(f.castShadow=t.globeLayer.castShadow,f.receiveShadow=t.globeLayer.receiveShadow),i.add(f),t.updateSkirtVisible(f,u),t._cacheSkirtMesh(u,f)}t._cacheMaterial(u,c)}}),this.updateTileMeshForFlatten(e)}},{key:"setBaseLayerId",value:function(e){this.baseLayerId=e}},{key:"getBaseLayerId",value:function(){return this.baseLayerId}},{key:"getAllLayerIds",value:function(){var e=this.imageryLayers.getByFilter(),t=[],i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;t.push(s.imageryProvider.id)}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}return t}},{key:"updateTileMeshForFlatten",value:function(i){if(i.content){var r=i.content.meshes;if(r&&2==r.children.length){var n=r.children[0],a=r.children[1],o=this.terrainOperationManager,s=i._tileset._objectGroup.matrix,l=!1;if(i.boundingBox&&(e.copy(i.boundingBox),e.applyMatrix4(s),e.min.y=0,e.max.y=0,l=o.isIntersectFlattenBboxDrawing(e)),!l&&i.isFlattened)return this.terrainProvider.updateTileGeometryForFlatten(i,o,t,n.geometry,a.geometry,!0),void(i.isFlattened=!1);if(l){var u=n.matrix;t.multiplyMatrices(s,u),this.terrainProvider.updateTileGeometryForFlatten(i,o,t,n.geometry,a.geometry,!1),i.isFlattened=!0}}}}},{key:"clearMaterialAndSkirtCache",value:function(){for(var e in this._materialCache)delete this._materialCache[e];for(var t in this._skirtMeshCache)delete this._skirtMeshCache[t]}},{key:"removeFromMaterialAndSkirtCache",value:function(e){this._materialCache[e]&&delete this._materialCache[e],this._skirtMeshCache[e]&&delete this._skirtMeshCache[e]}},{key:"_cacheMaterial",value:function(e,t){this._materialCache[e]||(this._materialCache[e]=[]),this._materialCache[e].push(t)}},{key:"_cacheSkirtMesh",value:function(e,t){this._skirtMeshCache[e]||(this._skirtMeshCache[e]=[]),this._skirtMeshCache[e].push(t)}},{key:"setOpacity",value:function(e,t){var i=this;this.tileOpacity[t]=e;var r=s.Tile.DemTilesUtil.isTransparent(e),n=this._materialCache[t];n&&(n.forEach(function(e){i.updateTileMaterialOpacity(e,t)}),r?this.hideSkirt():this.showSkirt())}},{key:"getOpacity",value:function(e){return this.tileOpacity[e]}},{key:"setImageryLayerVisible",value:function(e,t){this.tileVisible[e]=t,this.globeLayer.setImageryLayerVisible(e,t)}},{key:"hasImageryLayerVisible",value:function(){var e=this;return Object.keys(this.tileVisible).some(function(t){return!0===e.tileVisible[t]})}},{key:"setStyle",value:function(e,t){var i=this;this.mapStyle=e;var r=this._materialCache[t];r&&r.forEach(function(e){i.updateTileMaterialStyle(e)})}},{key:"setExcavation",value:function(e){var t=this;this.mapExcavation=e;for(var i in this._materialCache){this._materialCache[i].forEach(function(e){t.updateTileMaterialExcavation(e),t.updateTileMaterialSide(e)})}}},{key:"updateMaterialsSide",value:function(){var e=this,t=this.getBaseLayerId();this._materialCache[t].forEach(function(t){e.updateTileMaterialSide(t)})}},{key:"updateTileMaterialStyle",value:function(e){e.updateStyle&&e.updateStyle(this.mapStyle)}},{key:"updateTileMaterialExcavation",value:function(e){e.updateExcavation&&e.updateExcavation(this.mapExcavation)}},{key:"updateTileMaterialSide",value:function(e){e.updateSide&&e.updateSide({isExcavation:this.mapExcavation&&this.mapExcavation.isExcavation})}},{key:"updateTileMaterial",value:function(e,t){this.updateTileMaterialStyle(e,t),this.updateTileMaterialOpacity(e,t),this.updateTileMaterialExcavation(e),this.updateTileMaterialSide(e)}},{key:"updateTileMesh",value:function(e,t){var i=this.tileVisible[t];e.visible=i}},{key:"updateTileMaterialOpacity",value:function(e,t){var i=this.tileOpacity[t];e.opacity=i,e._originalTransparent||(e.transparent=s.Tile.DemTilesUtil.isTransparent(i))}},{key:"updateMaterialsValue",value:function(e,t,i,r){for(var n in this._materialCache){this._materialCache[n].forEach(function(e){if(e&&e.hasOwnProperty(t)){if(r&&0==e.receiveIBL)return;e[t]=i,void 0!==e.refreshUniforms&&e.refreshUniforms(),e.needsUpdate=!0}})}}},{key:"hideSkirt",value:function(){this.skirtShow=!1;for(var e in this._skirtMeshCache){this._skirtMeshCache[e].forEach(function(e){e.visible=!1})}}},{key:"showSkirt",value:function(){this.skirtShow=!0;for(var e in this._skirtMeshCache){this._skirtMeshCache[e].forEach(function(e){e.visible=!0})}}},{key:"updateSkirtVisible",value:function(e,t){if(this.tileVisible[t]){s.Tile.DemTilesUtil.isTransparent(this.tileOpacity[t])&&this.skirtShow&&(this.skirtShow=!1),e.visible=this.skirtShow}else e.visible=!1}},{key:"getMaxLimitedLevel",value:function(){return this.terrainProvider.maxLimitedLevel}},{key:"setMaxLimitedLevel",value:function(e){this.terrainProvider.maxLimitedLevel=e}},{key:"setTerrainEnabled",value:function(e){return this.terrainProvider.terrainDataUrl?this.terrainProvider.useTerrain!==e&&(this.terrainProvider.useTerrain=e,!0):(console.log("No terrain data is set, cannot switch terrain!"),!1)}},{key:"setTerrainProvider",value:function(e){}},{key:"createDefaultImageryProvider",value:function(e){return void 0===e.imageryProviderType&&(e.imageryProviderType="UrlTemplate"),new s.Layer.ImageryProviderFactory[e.imageryProviderType](e)}},{key:"getBaseImageryLayer",value:function(){var e=this.imageryLayers.getByFilter();return e.length>0?e[0]:void 0}},{key:"getImageryLayerById",value:function(e){var t=this.imageryLayers.getByFilter(function(t){return t.imageryProvider.id===e});return t.length>0?t[0]:void 0}},{key:"getImageryLayerByMapUrl",value:function(e){var t=this.imageryLayers.getByFilter(function(t){return t.imageryProvider.mapUrl===e});return t.length>0?t[0]:void 0}},{key:"addImageryLayer",value:function(e,t){var i=this.imageryLayers.addImageryLayer(this.createDefaultImageryProvider(e),t),r=i.imageryProvider.id;return this.tileOpacity[r]=e.opacity||1,this.tileVisible[r]=s.Utils.defaultValue(e.visible,!0),r}},{key:"removeImageryLayer",value:function(e){delete this.tileOpacity[e],delete this.tileVisible[e],this.removeFromMaterialAndSkirtCache(e);var t=this.getImageryLayerById(e);t&&this.imageryLayers.remove(t)}},{key:"adjustImageryLayer",value:function(e,t){var i=this.getImageryLayerById(e);i&&this.imageryLayers.moveToIdx(i,t)}},{key:"getImageryLayerIndex",value:function(e){var t=this.getImageryLayerById(e);return t?this.imageryLayers.getLayerIndex(t):-1}},{key:"ready",get:function(){return this.terrainProvider.ready&&this.imageryLayers.length&&this.imageryLayers.get(0).imageryProvider.ready}}],[{key:"getTileCacheKey",value:function(e,t,i){return e+"-"+t+"-"+i}}]),i}();s.Layer.GlobeTileProvider=i}(),function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"makeRequest",value:function(e,t){e.requestCallback=function(){var i=new s.Deferred;return t(e.url,function(e){i.resolve(e)},function(e){i.reject(e)}),e.cancelCallback=function(){},i.promise};var i=s.RequestScheduler.request(e);if(i)return i.then(function(t){return e.cancelCallback=void 0,t}).catch(function(t){return e.cancelCallback=void 0,Promise.reject(t)})}},{key:"processTerrain",value:function(e,t){}},{key:"requestTerrain",value:function(t){function i(e){o.terrainData=e,o.state=l.READY,o.request=void 0}function r(){if(o.request&&o.request.state===s.RequestState.CANCELLED)return o.terrainData=void 0,o.state=l.UNLOADED,o.request=void 0,--t._tileset.statistics.numberOfPendingRequests,void++t._tileset.statistics.numberOfAttemptedRequests;o.state=l.FAILED,o.request=void 0;var e="Failed to obtain terrain tile X: "+t.x+" Y: "+t.y+" Level: "+t.level+".";console.log(e)}function n(){o.state=l.FAILED,o.request=void 0}function a(e,i,r){u.loadArrayBufferImmediately(e,function(e){i(u.getTerrainDataArray(e))},function(){var e=u.getTerrainDataArrayOutOfLevel(t);e?i(e):r()})}var o=t.tileTerrain;if(o.contentUnloaded){var l=s.Layer.TerrainState,u=t._tileset.tileProvider.terrainProvider,c=u.getTerrainUrl(t.x,t.y,t.level);if(!u.isAvailableTile(t.x,t.y,t.level))return void n();if(!c)return void i();if(u.isOverMaxLevel(t.level)){var h=u.getTerrainDataArrayOutOfLevel(t);return void(h&&i(h))}!function(){var u=new s.Request({url:c,type:s.RequestType.TERRAIN,priorityCallback:t._createPriorityCallback(t)});o.request=u,o.state=l.RECEIVING;var h=e.makeRequest(u,a);if(!h)return o.state=l.UNLOADED,void(o.request=void 0);h.then(function(e){if(t.isDestroyed())return void n();i(e)}).catch(function(e){r(e)})}()}}},{key:"requestImageries",value:function(t){var i=t._tileset.tileProvider.imageryLayers,r=i._layers;t.imageries.length=0,r.forEach(function(i){var r=i.getImagery(t.x,t.y,t.level);t.imageries.push(r),e.requestImagery(t,r)})}},{key:"requestImagery",value:function(t,i){function r(e){i.texture=e,i.state=u.READY,i.request=void 0}function n(){if(i.request&&i.request.state===s.RequestState.CANCELLED)return i.state=u.UNLOADED,void(i.request=void 0);i.state=u.FAILED,i.request=void 0;var e="Failed to obtain image tile X: "+i.x+" Y: "+i.y+" Level: "+i.level+".";console.log(e)}function a(){i.state=u.FAILED,i.request=void 0}function o(e,t,i){l.loadArrayBufferImmediately(e,t,i)}var l=i.imageryLayer.imageryProvider;if(i.contentUnloaded&&l.ready&&l.mapUrl){var u=s.Layer.ImageryState;if(!l.isAvailableTile(t.x,t.y,t.level))return void a();var c=l.getImageryUrl(t.x,t.y,t.level);!function(){var l=new s.Request({url:c,type:s.RequestType.IMAGERY,priorityCallback:t._createPriorityCallback(t)});i.request=l,i.state=u.TRANSITIONING;var h=e.makeRequest(l,o);if(!h)return i.state=u.UNLOADED,void(i.request=void 0);h.then(function(e){if(t.isDestroyed())return void a();r(e)}).catch(function(e){n(e)})}()}}},{key:"processImageries",value:function(t,i){var r=!1,n=!0;return t.imageries.forEach(function(a){var o=e.processImagery(t,a,i);n=n&&o,r=r||o}),t.renderable=t.renderable&&(r||n),n}},{key:"processImagery",value:function(t,i,r){var n=s.Layer.ImageryState;return i.state===n.UNLOADED&&(i.state=n.TRANSITIONING,e.requestImagery(t,i)),i.state===n.RECEIVED&&(i.state=n.TRANSITIONING,i.imageryLayer._createTexture(i,r)),i.state===n.TEXTURE_LOADED&&(i.state=n.TRANSITIONING,i.imageryLayer._reprojectTexture(i,r)),i.state===n.READY||(i.state===n.FAILED||i.state===n.INVALID)}}]),e}();s.Layer.GlobeTileScheduler=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r._geometryByteLength=0,r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getTexturesByteLength",value:function(){var e=this._meshes.children,t=!0,i=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(o.children&&o.children.length>0){var s=!0,l=!1,u=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value,f=d.material;f&&f._imageByteSize&&!f._sizeCached&&(this._texturesByteLength+=f._imageByteSize,f._sizeCached=!0)}}catch(e){l=!0,u=e}finally{try{!s&&h.return&&h.return()}finally{if(l)throw u}}}else if(o.material){var p=o.material;p._imageByteSize&&!p._sizeCached&&(this._texturesByteLength+=p._imageByteSize,p._sizeCached=!0)}}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"disposeGeometry",value:function(){this._meshes.parent&&this._meshes.parent.remove(this._meshes);for(var e=this._meshes.children,t=0,i=e.length;t<i;++t){var r=e[t];if(r.children&&r.children.length)for(var n=0,a=r.children.length;n<a;++n){var o=r.children[n];o.geometry._onlyShared||o.geometry.dispose(),o.geometry=void 0,this._disposeMaterial(o.material),o.material=void 0}else r.geometry&&(r.geometry._onlyShared||r.geometry.dispose(),r.geometry=void 0,this._disposeMaterial(r.material),r.material=void 0)}this._meshes=void 0}},{key:"parseTileContent",value:function(e){this._tile._tileset.tileProvider.parseTileContent(this._tile,function(t){e(t)})}},{key:"disposeContentBuffer",value:function(){}},{key:"_disposeMaterial",value:function(e){s.Utils.isDefined(e.map)&&(e.map.dispose(),e.map=null),e.dispose()}}]),t}(s.AbstractTileContent);s.Layer.GlobeTileContent=e}(),function(){var e=new THREE.Box3,t=function(t){function i(e,t){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t.parent));r.x=t.x,r.y=t.y,r.level=t.level,r.name=r.x+"-"+r.y+"-"+r.level,r.refineReplace=!0,r.isGlobeTile=!0,r._contentType=s.TileContentType.DATA_MESH,r._contentIndex=r.name,r._debugLodLevel=r._parent?r._parent._debugLodLevel+1:0;var n=e.tileProvider.terrainProvider;return r._boundingBox=n.getTileBoundingBox(r.x,r.y,r.level),
r.geometricError=n.getLevelMaxGeometricError(r.level),r.invalid=!1,r.tileTerrain=new s.Layer.Terrain,r.renderable=!1,r.terrainMaxHeight=r._boundingBox.max.z,r.terrainMinHeight=r._boundingBox.min.z,r.imageries=[],r}return _inherits(i,t),_createClass(i,[{key:"destroy",value:function(){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this.tileTerrain.destroy(),this.tileTerrain=null,this.imageries=null}},{key:"fetchContentBlock",value:function(e,t,i){t()}},{key:"createContent",value:function(e){return new s.Layer.GlobeTileContent(this,e)}},{key:"isTerrainReady",value:function(){return this.tileTerrain.contentReady}},{key:"isTerrainFailed",value:function(){return this.tileTerrain.contentFailed}},{key:"_isAnyImageryNoReady",value:function(){return 0===this.imageries.length||this.imageries.some(function(e){return!e.contentFailed&&!e.contentReady})}},{key:"_isAnyImageryReady",value:function(){return this.imageries.some(function(e){return e.contentReady})}},{key:"_isAllImageryReady",value:function(){if(0===this.imageries.length)return!1;var e=!0,t=!1;return this.imageries.forEach(function(i){e=e&&(i.contentReady||i.contentFailed),t=t||i.contentReady}),e&&t}},{key:"_checkIfTerrainLoadingDone",value:function(){return this.renderable=!1,this.tileTerrain.contentFailed?(this._contentType=s.TileContentType.DATA_TILE,this._contentState=s.TileContentState.READY,!1):!!this.tileTerrain.contentReady&&(this.renderable=!0,!0)}},{key:"_checkIfImageryLoadingDone",value:function(){var e=!0;return this.imageries.forEach(function(t){e=e&&(t.contentReady||t.contentFailed)}),e}},{key:"requestContent",value:function(){if(s.Layer.GlobeTileScheduler.requestTerrain(this),!this._checkIfTerrainLoadingDone())return!1;if(s.Layer.GlobeTileScheduler.requestImageries(this),!this._checkIfImageryLoadingDone()||!this.contentUnloaded)return!1;this._contentState=s.TileContentState.LOADING,this._contentProcessDeferred=new s.Deferred,this._contentReadyDeferred=new s.Deferred;var e=this._handleFailedContent(this,this._tileset),t=this;return Promise.resolve(this.tileTerrain.terrainData).then(function(i){if(t.isDestroyed())return void e();t._initialContent(i)}).catch(function(i){t._contentState=s.TileContentState.UNLOADED,e(i)}),!0}},{key:"updateTerrainHeight",value:function(e){this.terrainMaxHeight=e.max.z,this.terrainMinHeight=e.min.z}},{key:"_unloadContent",value:function(){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"unloadContent",this).call(this)}},{key:"unloadContent",value:function(){this._contentType=s.TileContentType.DATA_MESH,this.tileTerrain.unload(),this._unloadImageryContent()}},{key:"_unloadImageryContent",value:function(){this.imageries.forEach(function(e){e.isDestroyed()||e.destroy()}),this.imageries.length=0,this._unloadContent()}},{key:"resetImageryContent",value:function(){this._unloadImageryContent()}},{key:"resetTerrainContent",value:function(){this.tileTerrain.unload(),this._unloadContent()}},{key:"resetBoundingBox",value:function(){var e=this._tileset.tileProvider.terrainProvider;this._boundingBox=e.getTileBoundingBox(this.x,this.y,this.level),this.terrainMaxHeight=this._boundingBox.max.z,this.terrainMinHeight=this._boundingBox.min.z}},{key:"computeDistanceToCamera",value:function(t){var i=e.copy(this._boundingBox);i.copy(this._boundingBox),t.useTerrain&&(i.max.z=this.terrainMaxHeight),t.transformMatrix&&i.applyMatrix4(t.transformMatrix),this._distance=i.distanceToPoint(t.cameraPositionWc)}},{key:"culling",value:function(t){var i=e.copy(this._boundingBox);return t.transformMatrix&&i.applyMatrix4(t.transformMatrix),t.useTerrain&&(i.max.z=t.cameraPositionWc.z),i.applyMatrix4(t.globalMatrix),!!t.frustum.intersectsBox(i)}},{key:"updatePriority",value:function(){var e=this._tileset,t=e._priorityRange.max,i=e._priorityRange.min,r=s.Math.isolateDigits(e.type,1,16),n=s.Math.isolateDigits(e.sequence,3,13),a=e._skipLodEnabled?t.depth-this._depth:this._depth,o=s.Math.isolateDigits(s.Math.normalize(a,i.depth,t.depth),4,4),l=s.Math.isolateDigits(s.Math.normalize(this._distance,i.distance,t.distance),4,0);this._priority=r,this._priority+=n,this._priority+=o,this._priority+=l}},{key:"needsLoading",get:function(){return!this.isTerrainFailed()&&(!this.isTerrainReady()||this._isAnyImageryNoReady())}},{key:"contentDataAvailable",get:function(){return!this.contentTypeEmpty&&this.contentReady&&this._isAnyImageryReady()}}]),i}(s.AbstractTile);s.Layer.GlobeTile=t}(),function(){function e(e,t){return e._priority-t._priority}function t(e,t){return t._distance-e._distance}var i=function(i){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.maximumScreenSpaceError=e.maximumScreenSpaceError||2,t.tileProvider=new s.Layer.GlobeTileProvider(e),t._lastReady=void 0,t._ready=void 0,t}return _inherits(r,i),_createClass(r,[{key:"destroy",value:function(){this._lastReady=void 0,this._ready=void 0,this.tileProvider.destroy(),this.tileProvider=void 0,_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"_isReady",value:function(){return!(!this._root||!this.tileProvider.ready)}},{key:"checkReadyPreUpdate",value:function(e){void 0===this._lastReady&&(this._lastReady=this._isReady()),this._ready=this._lastReady}},{key:"checkReadyPostUpdate",value:function(e){this._lastReady=this._isReady(),this._lastReady&&!this._ready&&e.afterRenderFns.push(function(){})}},{key:"createTile",value:function(e){return new s.Layer.GlobeTile(this,e)}},{key:"loadTileset",value:function(e,t,i){this.root=this.createTile({x:0,y:0,level:0})}},{key:"updateFrameState",value:function(e){e.transformMatrix=this._transformMatrix,e.maximumScreenSpaceError=this.maximumScreenSpaceError,e.geoErrScaleFactor=1,e.useTerrain=this.tileProvider.terrainProvider.useTerrain}},{key:"_fetchChildrenOfTile",value:function(e,t){this.needLoadChildrenOfTile(e)&&(e._childrenState=s.TileContentState.READY,this.loadChildrenOfTile(e))}},{key:"needLoadChildrenOfTile",value:function(e){return e.childrenUnload&&e.level<this.tileProvider.getMaxLimitedLevel()}},{key:"_isAvailableLevel",value:function(e){return e.level<this.tileProvider.getMaxLimitedLevel()}},{key:"loadChildrenOfTile",value:function(e,t,i){e.isDestroyed()||(this.createTile({x:2*e.x,y:2*e.y,level:e.level+1,parent:e}),this.createTile({x:2*e.x+1,y:2*e.y,level:e.level+1,parent:e}),this.createTile({x:2*e.x,y:2*e.y+1,level:e.level+1,parent:e}),this.createTile({x:2*e.x+1,y:2*e.y+1,level:e.level+1,parent:e}),i&&i())}},{key:"_canBeTraverse",value:function(e,t){return 0!==e.childrenTree.length&&e.sse>t.maximumScreenSpaceError}},{key:"_traverseTiles",value:function(e,t){var i=this.traversalStack;for(i.push(e);i.length>0;){var r=i.pop(),n=r.refineReplace,a=!r.parent||r.parent._refines,o=!1;if(this._isAvailableLevel(r)&&(this._fetchChildrenOfTile(r,t),this._canBeTraverse(r,t)&&(o=this.subdivideTile(r,t),o=o&&a)),n){var s=!o&&a;this._selectRefiningTile(r,t,s)}else this._addTileToRequestedQueue(r,t),this._addTileToSelectedQueue(r,t);this.visitTile(r,t),this.touchTile(r,t),r._refines=o}}},{key:"_selectRefiningTile",value:function(e,t,i){this._skipLodEnabled?i&&(this._addTileToRequestedQueue(e,t),this._addTileToSelectedQueue(e,t)):(this._addTileToRequestedQueue(e,t),i&&this._addTileToSelectedQueue(e,t))}},{key:"subdivideTile",value:function(e,t){return this._skipLodEnabled?this._subdivideTileBySkippingLod(e,t):_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"subdivideTile",this).call(this,e,t)}},{key:"_subdivideTileBySkippingLod",value:function(e,i){var r=this,n=this.traversalStack,a=e.childrenTree;a.sort(t);var o=!1;if(a.forEach(function(e){r.updateTile(e,i),o=o||e.passSSE(i)}),!o)return!1;var s=e.refineReplace&&!e.contentTypeEmpty,l=!0,u=!1;return a.forEach(function(e){e.visible?(n.push(e),u=!0):s&&(r.visitTile(e,i),r.touchTile(e,i))}),u||(l=!1),l}},{key:"_addTileToRequestedQueue",value:function(e,t){e._requestedFrame!==t.frameNumber&&(e._requestedFrame=t.frameNumber,this._requestedTiles.push(e))}},{key:"requestTiles",value:function(t){var i=!1,r=this._requestedTiles;r.sort(e);for(var n=0,a=r.length;n<a;++n)i=this.requestContent(r[n])||i;i&&t.afterRenderFns.push(function(){})}},{key:"requestContent",value:function(e){if(e.contentTypeEmpty)return!1;var t=this.statistics;return e.requestContent()?(++t.numberOfPendingRequests,this._requestedTilesInFlight.push(e),e.contentProcessPromise.then(this._addTileToProcessingQueue(this,e)).catch(function(e){}),e.contentReadyPromise.then(this._handleTileContentSuccess(this,e)).catch(this._handleTileContentFailure(this,e)),!1):(++t.numberOfAttemptedRequests,e.needsLoading)}},{key:"clearLoadedTilesCache",value:function(){}},{key:"invalidateImageryOfAllTiles",value:function(){this.clearLoadedTilesCache(),this._traverseAllTiles(function(e){e.resetImageryContent()})}},{key:"invalidateTerrainOfAllTiles",value:function(){this.clearLoadedTilesCache(),this._traverseAllTiles(function(e){e.resetTerrainContent()})}},{key:"resetAllTiles",value:function(){this.clearLoadedTilesCache(),this._traverseAllTiles(function(e){e.resetBoundingBox(),e.resetTerrainContent()})}},{key:"updateTileMeshForFlatten",value:function(){var e=this.tileProvider;this._traverseAllTiles(function(t){e.updateTileMeshForFlatten(t)})}},{key:"getTileMesh",value:function(){var e=[];return this._traverseAllTiles(function(t){e.push(t)}),e}},{key:"_traverseAllTiles",value:function(e){if(this._root){var t=[];for(t.push(this._root);t.length>0;){for(var i=t.pop(),r=i.childrenTree,n=0,a=r.length;n<a;++n)t.push(r[n]);e(i)}}}},{key:"ready",get:function(){return this._ready}}]),r}(s.AbstractTileset);s.Layer.GlobeTileset=i}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.manager,i));r.viewer=e,r.isDemLayer=!0,r.objectGroupName=s.GlobalData.TilePlaneGroupName,r.objectGroup=r._createObjectGroup(),r.objectGroup.transformMatrix=r.transformMatrix,r.objectGroup.altitudeOffset=r.basePointAltitude;var n=Object.assign({},i,{id:r.id,type:s.RequestType.IMAGERY,objectGroup:r.objectGroup,transformMatrix:r.transformMatrix,debugShowBoundingBox:e._options.debugShowBoundingBox,terrainOperationManager:e.terrainOperationManager,tilesCacheScheduler:r.manager.tilesCacheScheduler,skipLodEnabled:i.loadConfig?i.loadConfig.skipLodEnabled:void 0,globeLayer:r});return r._tileset=new s.Layer.GlobeTileset(n),r.tileManager=new s.Layer.GlobeTileManager(r),r.viewer.basePointPositionOnLonLat=r.basePointPositionOnLonLat,r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.manager.removeModel(this.id,!1),this.tileManager.destroy(),this.tileManager=void 0,this._tileset.destroy(),this._tileset=null,this._removeObjectGroup(),this.objectGroup=null,this.viewer=null,this.manager.setDemLoadedState(!1),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setValues",value:function(e){this._setupParameters(e),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValues",this).call(this,e)}},{key:"_setupParameters",value:function(e){e.modelId=s.Utils.defaultValue(e.modelId,s.ObjectGroupType.TILEGROUP);var t=e.loadConfig;e.priority=s.Utils.defaultValue(t.priority,0),this.unitScale=s.Tile.TileMath.unitScale,t.unitScale=this.unitScale;var i=s.Utils.defaultValue(t.modelPosition,[0,0]);this.semiMercatorPerimeter=s.Tile.TileMath.mercatorPerimeter*Math.cos(i[1]*Math.PI/180),t.mercatorPerimeter=2*this.semiMercatorPerimeter,this.basePointPositionOnLonLat=i,this.basePointAltitude=s.Utils.defaultValue(t.modelAltitude,0),this.basePointRotationZ=s.Utils.defaultValue(t.modelRotationZ,0),this.basePoint=s.Utils.defaultValue(t.basePoint,{x:0,y:0})}},{key:"setupTransformMatrix",value:function(){var e=this.basePointPositionOnLonLat,t=this.basePointAltitude,i=this.basePointRotationZ,r=this.basePoint,n=this.unitScale,a=this.semiMercatorPerimeter,o=s.Tile.TileMath.lonLat2Mercator(e[0],e[1],a,n),l=(new THREE.Matrix4).makeTranslation(-o.x,-o.y,-t*n),u=new THREE.Matrix4;i&&u.makeRotationFromEuler((new THREE.Euler).fromArray([0,0,-i]));var c=(new THREE.Matrix4).makeTranslation(r.x,r.y,0),h=(new THREE.Matrix4).premultiply(l).premultiply(u).premultiply(c);this.setTransformMatrix(h)}},{key:"transformLayer",value:function(){var e=this.basePointPositionOnLonLat;this.semiMercatorPerimeter=s.Tile.TileMath.mercatorPerimeter*Math.cos(e[1]*Math.PI/180),this._tileset.tileProvider.terrainProvider.setMercatorPerimeter(2*this.semiMercatorPerimeter),this._tileset.resetAllTiles(),this.setupTransformMatrix(),this._updateObjectGroup(),this.manager.setRenderStateChanged(!0)}},{key:"_createObjectGroup",value:function(){return this.viewer.getScene().getOrCreateObjectGroup(this.objectGroupName,{pickableType:s.PICKABLETYPE.Map,globalSpace:!0})}},{key:"_removeObjectGroup",value:function(){this.viewer.getScene().removeObjectGroupByName(this.objectGroupName)}},{key:"_updateObjectGroup",value:function(){var e=this.viewer.getScene().getRawMatrixGlobal(),t=this.objectGroup;t.matrix.multiplyMatrices(e,t.transformMatrix),t.matrixAutoUpdate=!1,t.updateMatrixWorld(!0)}},{key:"load",value:function(e){var t=this.viewer,i=this.manager,r=!t.getScene().hasBoundingBox();if(r){i.dispatchEvent({type:s.EVENTS.ON_LOAD_START}),i.setDrawableModel(!0),i.chooseRendering(this.statistics.memoeryInfo,!0),t.rendererManager.setupRenderer(t.renderSettings);var n=.5*s.GlobalData.SceneSize;this.getTransforms().boundingBox=(new THREE.Box3).setFromArray([-n,-n,-n,n,n,n]),i.updateScene(this)}i.setDemLoadedState(!0);var a=t.getScene().getRawMatrixGlobal();this.updateMatrixOfObjectGroup(a),s.GlobalData.EnableGisMap=!0,this._tileset.loadTileset(),this.loaded=!0,r&&i.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:this.id}),Promise.resolve().then(function(){i.setRenderStateChanged(!0),i.dispatchEvent({type:s.EVENTS.ON_MAP_LOAD_ALL})})}},{key:"updateMatrixOfObjectGroup",value:function(e){var t=this.objectGroup;t.matrix.copy(t.transformMatrix),t.matrix.multiplyMatrices(e,t.matrix),t.matrixAutoUpdate=!1,t.updateMatrixWorld(!0)}},{key:"preUpdate",value:function(e){this._tileset.checkReadyPreUpdate(e),this._tileset.preUpdate(e)}},{key:"update",value:function(e){this._tileset.update(e)}},{key:"postUpdate",value:function(e){this._tileset.postUpdate(e),this._tileset.checkReadyPostUpdate(e)}},{key:"addImageryLayer",value:function(e){return this._tileset.addImageryLayer(e)}},{key:"traverseMeshByLayerId",value:function(e,t){this.objectGroup.traverse(function(i){"MeshEx"===i.type&&i.layerId===e&&t&&t(i)})}},{key:"setImageryLayerVisible",value:function(e,t){this.traverseMeshByLayerId(e,function(e){e.visible=t})}},{key:"setAllLayerVisible",value:function(e){this.visible=e,this.objectGroup.visible!==e&&(this.objectGroup.visible=e,this.manager.setRenderStateChanged(!0))}},{key:"setRenderStateChanged",value:function(e){this.manager.setRenderStateChanged(e)}},{key:"getRawTransformMatrix",value:function(){return this.transformMatrix}},{key:"getTransformMatrixInverse",value:function(){return this.transformMatrixInverse}},{key:"updateMaterialsValue",value:function(e,t,i){this.tileManager&&this.tileManager.tileProvider&&this.tileManager.tileProvider.updateMaterialsValue(this,e,t,i)}},{key:"setCastShadow",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setCastShadow",this).call(this,e),this.viewer.traverseGroupEnableShadow(this.objectGroup,this.castShadow,this.receiveShadow),this.viewer.updateShadowMap()}},{key:"setReceiveShadow",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setReceiveShadow",this).call(this,e),this.viewer.traverseGroupEnableShadow(this.objectGroup,this.castShadow,this.receiveShadow),this.viewer.updateShadowMap()}}]),t}(s.BaseModel);s.Layer.GlobeLayer=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.globeLayer=t,this.tileProvider=t._tileset.tileProvider,this.layerList=[]}return _createClass(e,[{key:"destroy",value:function(){this.layerList=void 0,this.tileProvider=void 0,this.globeLayer=void 0}},{key:"getLayer",value:function(){return this.globeLayer}},{key:"lonLat2Mercator",value:function(e,t){var i=.5*this.tileProvider.terrainProvider.mercatorPerimeter,r=s.Tile.TileMath.lonLat2Mercator(e,t,i,1),n=this.globeLayer.getRawTransformMatrix();return new THREE.Vector3(r.x,r.y,0).applyMatrix4(n)}},{key:"mercator2lonLat",value:function(e){var t=.5*this.tileProvider.terrainProvider.mercatorPerimeter,i=this.globeLayer.getTransformMatrixInverse(),r=new THREE.Vector3(e.x,e.y,0).applyMatrix4(i);return s.Tile.TileMath.mercator2lonLat(r,t,1)}},{key:"worldPositionToLngLat",value:function(e){return this.mercator2lonLat(e)}},{key:"lngLatToWorldPosition",value:function(e,t){function i(e,t,i){var r=e.lonLat2Mercator(t,i);return r.z=0,r}var r=this,n=e[0],a=e[1],o=void 0;if(!t)return o=i(this,n,a);if(!this.isUseTerrain())return o=i(this,n,a),void t(o);var l=this.tileProvider.terrainProvider,u=l.getMaxMinTerrainLevel().maxLevel,c=s.Tile.TileMath.long2tile(n,u),h=s.Tile.TileMath.lat2tile(a,u),d=l.getTerrainUrl(c,h,u),f=.5*l.mercatorPerimeter,p=s.Tile.TileMath.lonLat2Mercator(n,a,f,1),m=new THREE.Vector3(p.x,p.y,s.Tile.TileMath.earthHighestAltitude),v=new s.Raycaster(m,new THREE.Vector3(0,0,-1)),g=this.globeLayer.getRawTransformMatrix();l.loadArrayBufferImmediately(d,function(e){var d=l.getTerrainDataArray(e),f=l.getTileGeometryByData(d,c,h,u,!0),p=new s.MeshEx(f.geometry);p.alive=!0,p.name=c+"-"+h+"-"+u,f.matrix&&p.matrix.copy(f.matrix),p.updateMatrixWorld(!0);var m=[];p.raycast(v,m),o=m.length>0?m[0].point.applyMatrix4(g):i(r,n,a),t(o)},function(){o=i(this,n,a),t(o)})}},{key:"getModelRotationZ",value:function(){return this.modelRotationZ}},{key:"setModelRotationZ",value:function(e){this.modelRotationZ=e}},{key:"setModelPosition",value:function(e){this.modelPosition=e}},{key:"getModelPosition",value:function(){return this.modelPosition}},{key:"setModelAltitude",value:function(e){this.modelAltitude=e}},{key:"getModelAltitude",value:function(){return this.modelAltitude}},{key:"getBasePoint",value:function(){return this.globeLayer.basePoint}},{key:"clearTiles",value:function(){}},{key:"addRenderCallback",value:function(){}},{key:"setOpacity",value:function(e,t){this.tileProvider.setOpacity(e,t)}},{key:"getOpacity",value:function(e){return this.tileProvider.getOpacity(e)}},{key:"setMapLayer",value:function(e){var t=void 0,i=this.tileProvider.getImageryLayerByMapLayer(e);if(i)t=i.imageryProvider.id,this.tileProvider.adjustImageryLayer(t,0);else{var r={},n=this.tileProvider.getBaseImageryLayer();n&&(r=n.imageryProvider.cloneParameters(),this.globeLayer._tileset.invalidateImageryOfAllTiles(),this.tileProvider.removeImageryLayer(n)),r.mapLayer=e,t=this.tileProvider.addImageryLayer(r,0)}return this.tileProvider.setBaseLayerId(t),t}},{key:"getBaseLayerId",value:function(){return this.tileProvider.getBaseLayerId()}},{key:"getAllLayerIds",value:function(){return this.tileProvider.getAllLayerIds()}},{key:"getMapUrl",value:function(e){var t=this.tileProvider.getImageryLayerById(e);if(t)return t.imageryProvider.mapUrl}},{key:"setMapUrl",value:function(e,t){return this.setImageryLayer({mapUrl:e,imageryProviderType:t})}},{key:"setImageryLayer",value:function(e){if(void 0===e.mapUrl)return void console.log("options.mapUrl is required.");var t=void 0,i=this.tileProvider.getImageryLayerByMapUrl(e.mapUrl),r=this.tileProvider.getBaseImageryLayer();return i?(r&&r!==i&&(this.globeLayer._tileset.invalidateImageryOfAllTiles(),this.tileProvider.removeImageryLayer(r.imageryProvider.id)),t=i.imageryProvider.id,this.tileProvider.adjustImageryLayer(t,0)):(r&&(this.globeLayer._tileset.invalidateImageryOfAllTiles(),this.tileProvider.removeImageryLayer(r.imageryProvider.id)),t=this.tileProvider.addImageryLayer(e,0)),this.tileProvider.setBaseLayerId(t),t}},{key:"addImageryLayer",value:function(e,t){if(void 0===e.mapUrl)return void console.log("options.mapUrl is required.");var i=void 0,r=this.tileProvider.getImageryLayerByMapUrl(e.mapUrl);return r?(i=r.imageryProvider.id,this.tileProvider.adjustImageryLayer(i,t)):(this.globeLayer._tileset.invalidateImageryOfAllTiles(),i=this.tileProvider.addImageryLayer(e,t)),0===t&&this.tileProvider.setBaseLayerId(i),i}},{key:"removeImageryLayer",value:function(e){this.tileProvider.removeImageryLayer(e),this.globeLayer._tileset.invalidateImageryOfAllTiles()}},{key:"adjustImageryLayer",value:function(e,t){this.tileProvider.adjustImageryLayer(e,t)}},{key:"updateImageryLayer",value:function(e,t){if(void 0===t.mapUrl)return void console.log("options.mapUrl is required.");var i=this.tileProvider.getImageryLayerIndex(e);if(-1!==i){this.removeImageryLayer(e);var r=void 0,n=this.tileProvider.getImageryLayerByMapUrl(t.mapUrl);return n?(r=n.imageryProvider.id,this.tileProvider.adjustImageryLayer(r,i)):r=this.tileProvider.addImageryLayer(t,i),0===index&&this.tileProvider.setBaseLayerId(r),r}}},{key:"getImageryLayerIndex",value:function(e){return this.tileProvider.getImageryLayerIndex(e)}},{key:"setTerrain",value:function(e){this.tileProvider.setTerrainProvider(e)}},{key:"applyTerrain",value:function(e){this.tileProvider.setTerrainEnabled(e)&&(this.tileProvider.clearMaterialAndSkirtCache(),this.globeLayer._tileset.invalidateTerrainOfAllTiles())}},{key:"isUseTerrain",value:function(){return this.tileProvider.terrainProvider.useTerrain}},{key:"setStyle",value:function(e,t){e&&this.tileProvider.setStyle(e,t)}},{key:"setExcavation",value:function(e){e&&this.tileProvider.setExcavation(e)}},{key:"updateMaterialsSide",value:function(){this.tileProvider.updateMaterialsSide()}},{key:"updateTileMeshForFlatten",value:function(){this.globeLayer._tileset.updateTileMeshForFlatten()}},{key:"show",value:function(e){this.tileProvider.setImageryLayerVisible(e,!0),this.tileProvider.hasImageryLayerVisible()&&this.globeLayer.setVisible(!0),this.globeLayer.setRenderStateChanged(!0)}},{key:"hide",value:function(e){this.tileProvider.setImageryLayerVisible(e,!1),this.tileProvider.hasImageryLayerVisible()||this.globeLayer.setVisible(!1),this.globeLayer.setRenderStateChanged(!0)}},{key:"hideAllLayers",value:function(){this.globeLayer.setAllLayerVisible(!1)}},{key:"showAllLayers",value:function(){this.globeLayer.setAllLayerVisible(!0)}},{key:"getMaxLevel",value:function(){return this.tileProvider.getMaxLimitedLevel()}},{key:"setMaxLevel",value:function(e){this.tileProvider.setMaxLimitedLevel(e)}},{key:"modelRotationZ",get:function(){return this.globeLayer.basePointRotationZ},set:function(e){this.globeLayer.basePointRotationZ=e,this.globeLayer.transformLayer()}},{key:"modelPosition",get:function(){return this.globeLayer.basePointPositionOnLonLat},set:function(e){this.globeLayer.basePointPositionOnLonLat=e,this.globeLayer.transformLayer()}},{key:"modelAltitude",get:function(){return this.globeLayer.basePointAltitude},set:function(e){this.globeLayer.basePointAltitude=e,this.globeLayer.objectGroup.altitudeOffset=e,this.globeLayer.transformLayer()}},{key:"basePoint",get:function(){return this.globeLayer.basePoint}}]),e}();s.Layer.GlobeTileManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.explosionBegin=!1,i}return _inherits(t,e),_createClass(t,[{key:"explode",value:function(){this.model._tileset.explode(this)}},{key:"preFloorExplode",value:function(e,t,i){this.explosionBegin=!0;for(var r={},n={},a=0,o=t.length;a<o;a++){var s=t[a].explodedHeight-t[a].elevation,l=new THREE.Vector3(i.x*s,i.y*s,i.z*s);r[t[a].name]=l;var u=null;u=t[a].preExplodedTranslation?l.clone().sub(t[a].preExplodedTranslation):l.clone(),n[t[a].name]=u,t[a].preExplodedTranslation=l}var c=this.explosionTranslation,h=this.model.getAllNodeInfos(),d=Object.keys(h),f=new THREE.Matrix4,p=new THREE.Matrix4,m=3,v=d.length;if(v>0){var g=h[0],y=g[0].userData;for(var M in y){"levelName"===this.model.tilesLoader.tileReader.getUserDataStringMapByIndex(M)[0]&&(m=M)}}for(var E=0;E<v;E++)for(var b=d[E],x=h[b],I=0,T=x.length;I<T;I++){if(0==I){var w=x[I].userData[m],C=this.model.tilesLoader.tileReader.getUserDataStringMapByIndex(m,w)[1],S=r[C]||new THREE.Vector3;c[b]=S,f.makeTranslation(S.x,S.y,S.z);var A=n[C]||new THREE.Vector3;p.makeTranslation(A.x,A.y,A.z)}x[I].boundingBox.applyMatrix4(p),x[I].matrix?(x[I].matrix.multiplyMatrices(p,x[I].matrix),e.union(x[I].boundingBox)):x[I].explodeMatrix=f.clone()}}},{key:"preElementExplode",value:function(e,t){this.explosionBegin=!0;var i=this.model.getBoundingBoxWorld();if(i){var r=t-this.model.manager.explosionManager.getExplosionExtent(this.model.id);if(0!=r)for(var n=new THREE.Matrix4,a=new THREE.Matrix4,o=i.getCenter().applyMatrix4((new THREE.Matrix4).getInverse(this.model.transformMatrix)),l=this.model.getAllNodeInfos(),u=Object.keys(l),c=this.explosionTranslation,h=0,d=u.length;h<d;h++){for(var f=u[h],p=l[f],m=new THREE.Box3,v=0,g=p.length;v<g;v++)p[v].originBox||(p[v].originBox=p[v].boundingBox.clone()),m.union(p[v].originBox);var y=s.Utils.computeExplodeTranslation(o,m,t);c[f]=y,n.makeTranslation(y.x,y.y,y.z);var M=s.Utils.computeExplodeTranslation(o,m,r);a.makeTranslation(M.x,M.y,M.z);for(var E=0,b=p.length;E<b;E++)p[E].boundingBox.applyMatrix4(a),p[E].matrix?(p[E].matrix.multiplyMatrices(a,p[E].matrix),e.union(p[E].boundingBox)):p[E].explodeMatrix=n.clone()}}}},{key:"getExplosionTranslation",value:function(e){return this.explosionTranslation[e]||new THREE.Vector3}},{key:"standardExplode",value:function(e){function t(e,t,i,a,o){for(var s=e.getAttribute("position").array,l=t;l<i;l+=3)r.set(s[l],s[l+1],s[l+2]),r.applyMatrix4(o),r.add(a),n.getInverse(o),r.applyMatrix4(n),s[l]=r.x,s[l+1]=r.y,s[l+2]=r.z;e.getAttribute("position").needsUpdate=!0}var i=this;if(e.explodeCount!=this.model.manager.explosionManager.explodeCount){var r=new THREE.Vector3,n=new THREE.Matrix4,a=e._content.meshes,o=(new THREE.Matrix4,new THREE.Matrix4,new THREE.Vector3),s=new THREE.Vector3(0);a.traverse(function(e){if("MeshEx"===e.type||"LineSegmentsEx"===e.type){var r=e.geometry,n=e.indexGroups;for(var a in n)for(var l=n[a],u=0,c=l.length;u<c;++u){var h=l[u],d=i.getExplosionTranslation(a),f=h.preTranslation?h.preTranslation:s;if(o.set(d.x-f.x,d.y-f.y,d.z-f.z),0!=o.x||0!=o.y||0!=o.z){var p=h.positionStart,m=p+h.positionCount;t(r,p,m,o,e.matrix),h.preTranslation=d}}}}),e.explodeCount=this.model.manager.explosionManager.explodeCount}}},{key:"instanceExplode",value:function(e){function t(e,t,i,r){var n=e.getAttribute("mcol3").array;n[3*t]+=i.x,n[3*t+1]+=i.y,n[3*t+2]+=i.z,e.getAttribute("mcol3").needsUpdate=!0}if(e.explodeCount!=this.model.manager.explosionManager.explodeCount){for(var i=this.model.getDescriptor().getInstancedNodeInfos(),r=e.instanceInfo.entityInfoArray,n=new THREE.Vector3,a=new THREE.Vector3(0),o=0,l=r.length;o<l;o++){var u=r[o].userID,c=this.getExplosionTranslation(u),h=r[o].preTranslation?r[o].preTranslation:a;if(n.set(c.x-h.x,c.y-h.y,c.z-h.z),0!=n.x||0!=n.y||0!=n.z)for(var d=i[u],f=d.length,p=0;p<f;++p){var m=d[p];if(void 0!=m.index){var v=m.index,g=this.model.tilesLoader.getInstanceMeshNodeById(m.parent);for(var y in g){var M=g[y],E=M.mesh,b=E.geometry;if(!s.TilesUtil.isInstanceNodeInVisible(E)&&(E&&!1!==E.visible)){t(b,v,n,E.matrix),r[o].preTranslation=c;var x=m.lineId,I=this.model.tilesLoader.getInstanceLineNodeById(x);if(I){var T=I.geometry;t(T,v,n,E.matrix)}}}}}}e.explodeCount=this.model.manager.explosionManager.explodeCount}}}]),t}(s.BaseModelExplosion);s.BimTilesModelExplosion=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this._nodeMap={}}return _createClass(e,[{key:"destroy",value:function(){this._nodeMap=null}},{key:"addNode",value:function(e){this._nodeMap[e.nodeId]=e}},{key:"getNode",value:function(e){return this._nodeMap[e]}}]),e}();s.BimTileNodeManager=e}(),function(){function e(e,i,n){var a=e.pbfNodeInfo,o=r(e.bufferGeometry,!1,a),l=new s.MeshEx(o,[e.material.clone()]);a.indexInfos||(a.indexInfos={}),l.applyMatrix(a.matrix),l.alive=!0,l.name=a.nodeIndexId,l.indexGroups=a.indexInfos;for(var u in a.indexInfos)i.userIndexMap[u]=!0;l.databagId=i._tileset._databagId,l.indexCount=e.bufferGeometry.index.couwdnt,n.addMeshIdMap(l.name,l),n.getDescriptor().cacheReferencedMeshBufferData(a.nodeIndexId,{IndexInfos:a.indexInfos}),t(a,n),i.content.meshes.add(l),a.userIdMapIndex&&n.addUserIdMapIndices(a.userIdMapIndex,l.name)}function t(e,t){var i=e.nodeInfos,r=e.indexInfos,n=!0,a=!1,o=void 0;try{for(var l,u=Object.entries(r)[Symbol.iterator]();!(n=(l=u.next()).done);n=!0)for(var c=l.value,h=_slicedToArray(c,2),d=h[0],f=h[1],p=i[d],m=t.getDescriptor().getAllNodeInfos()[d],v=0;v<f.length;++v){var g=f[v];if(s.Utils.defined(p))for(var y=0;y<p.length;++y){var M=p[y];if(M.nodeId===g.meshId){var E=m[y];s.Utils.defined(E)&&(E.parent=M.parent,E.materialId=M.materialId,E.matrix=M.matrix.clone(),s.Utils.defined(E.explodeMatrix)&&(E.explodeMatrix=M.explodeMatrix.clone),E.type=M.type,E.cellId=M.cellId)}}}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}function i(e,t,i){var n=e.pbfNodeInfo,a=r(e.bufferGeometry,!0,n),o=new s.MeshEx(a,e.material);o.alive=!0,o.frustumCulled=!1,o.name=n.nodeIndexId,o.indexGroups=n.indexGroups,o.indexCount=n.indexCount,o.databagId=n.databagId,o.isInstanceMeshNode=!0,t.initializePreObject(),t.content.meshes.add(o),i.addInstanceMeshIdMap(n.nodeIndexId,0,o),i.addInstanceInfo(n.nodeIndexId,n.instanceInfo),i.renderableCount++}function r(e,t,i){t=s.Utils.defaultValue(t,!1);var r=void 0;t?(r=new THREE.InstancedBufferGeometry,r.groups.push({start:0,count:i.indexCount,materialIndex:0}),r.groups.push({start:0,count:i.indexCount,materialIndex:1})):(r=new THREE.BufferGeometry,r.groups.push({start:0,count:i.iAccInfoCount,materialIndex:0}));var n=!0,a=!1,o=void 0;try{for(var l,u=Object.entries(e.attributes)[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value,h=_slicedToArray(c,2),d=h[0],f=h[1];r.addAttribute(d,f)}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}var p=e.boundingBox;null!==p&&(r.boundingBox=p.clone());var m=e.boundingSphere;return null!==m&&(r.boundingSphere=m.clone()),r.drawRange.start=e.drawRange.start,r.drawRange.count=e.drawRange.count,r.index=e.index,r}var n=function(){function e(){_classCallCheck(this,e),this._owner=0,this._bufferGeometries=[],this._id=null,this._state=s.SharedGeometryState.UNLOADED,this._byteLength=0}return _createClass(e,[{key:"addBufferGeometry",value:function(e){this._bufferGeometries.push(e)}},{key:"destroy",value:function(){this._bufferGeometries=[],this._state=s.SharedGeometryState.DESTROYED,this._id=null,this._byteLength=0}},{key:"owner",get:function(){return this._owner},set:function(e){this._owner=e}},{key:"bufferGeometry",get:function(){return this._bufferGeometries}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"byteLength",get:function(){return this._byteLength},set:function(e){this._byteLength=e}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}}]),e}(),a=function(){function t(){_classCallCheck(this,t),this._geometryMap={}}return _createClass(t,[{key:"destroy",value:function(){this._geometryMap=null}},{key:"setByteLength",value:function(e,t){s.Utils.defined(this._geometryMap[e])&&(this._geometryMap[e].byteLength=t)}},{key:"addGeometryById",value:function(e,t){var i=this._geometryMap[e];return s.Utils.defined(i)||(i=this._geometryMap[e]=new n),s.Utils.defined(t)&&i.addBufferGeometry(t),i}},{key:"removeGeometryById",value:function(e){var t=this._geometryMap[e];s.Utils.defined(t)&&0===t.owner&&t.state!==s.SharedGeometryState.DESTROYED&&t.destroy()}},{key:"setGeometryByteLength",value:function(e,t){var i=this._geometryMap[e];s.Utils.defined(i)&&(i.byteLength=t)}},{key:"getGeometry",value:function(e){return this._geometryMap[e]}},{key:"addGeometryOwner",value:function(e){
var t=this._geometryMap[e];s.Utils.defined(t)&&(t.owner+=1)}},{key:"removeGeometryOwner",value:function(e){var t=this._geometryMap[e];s.Utils.defined(t)&&(t.owner-=1)}},{key:"resetGeometryOwner",value:function(){var e=!0,t=!1,i=void 0;try{for(var r,n=Object.entries(this._geometryMap)[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var a=r.value,o=_slicedToArray(a,2),l=(o[0],o[1]),u=l;s.Utils.defined(u)&&(u.owner=0)}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"setShareGeometryState",value:function(e,t){var i=this.getGeometry(e);s.Utils.defined(i)&&(i.state=t)}},{key:"disposeShareGeometry",value:function(e){var t=this.getGeometry(e);return!s.Utils.defined(t)||t.state!==s.SharedGeometryState.PROCESSING&&(t.owner-=1,0===t.owner&&(t.destroy(),!0))}},{key:"createMesh",value:function(t,r,n){var a=t.bufferGeometry;t.owner+=1,a.forEach(function(t){t.instance?i(t,r,n):e(t,r,n)}),r.needUpdateFilter=!0}}]),t}();a.SharedGeometry=n,s.BimTileGeometryManager=a}(),function(){var e=function(e){function t(e,i,r,n,a,o){_classCallCheck(this,t);var l=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,r));l.viewer=e,l.parseCfgFinish=a,l.debut=o,l.url=r.serverUrl+""+r.databagId,r.rootPath?l.url+="/"+r.rootPath:l.url+="/bimtiles.json",l.objectGroup=i.getScene().getOrCreateObjectGroup(s.ObjectGroupType.BIMTILESGROUP+"|"+l.databagId,{pickableType:s.PICKABLETYPE.Geometry,globalSpace:!0}),l._errorCoefficient=s.TilesUtil.BMD_GEOMETRIC_ERROR_COEFFICIENT;var u=s.TilesUtil.MODEL_SSE_Threshold_MAP[r.resourceType.toLowerCase()];r.resourceType&&u&&(l._errorCoefficient=u),l.disableUserData=r.disableUserData,l.objectGroup.transformMatrix=l.transformMatrix,l._enableBorderLine=r.enableBorderLine,l._maxDetailLevel=r.maxDetailLevel,l._detailLevelList=r.detailLevelList,l._visualRange=r.visualRange,l._onDemand=r.onDemand,l._hasLayerInfo=r.hasLayerInfo,!0===r.onDemand&&!1===r.hasLayerInfo&&console.warn("the model has no layer info, will show nothing on demand"),l.delayLoadTexture=s.GlobalData.DelayLoadTexture,l.sceneState=e.modelManager.sceneState,l.filter=new s.BimTileFilterManager(l),l.filter.setObserverForSceneState(l.manager.getFilter().getObserverForSceneState()),l.sceneState.transparentMaterial=l.getFilter()._getMaterialByName("scene"),l.sceneState.frozonMaterial=l.getFilter().getFrozonMaterial(),l.sceneState.frozonMaterial.side=THREE.FrontSide,l.materialManager=new s.BimTileMaterialManager({viewer:e}),l.materialManager._updateIBL(l),l.modelExplosion=new s.BimTilesModelExplosion(l);var c=function(){l.manager.setRenderStateChanged(!0)};return l.tilesLoader=new s.BimTilesLoader({batchMergeEnabled:!0,sceneState:l.sceneState,delayLoadTexture:l.delayLoadTexture,materialManager:l.materialManager,enableBorderLine:l._enableBorderLine,filter:l.filter,disableUserData:l.disableUserData,modelExplosion:l.modelExplosion,borderLineCategoryIds:r.borderLineCategoryIds,renderFunction:c}),l._onDemandConditions=void 0===r.demandConditions?[]:r.demandConditions,l.onDemandManager=new s.BimTileOnDemandManager(l),l.modelLoaded=!1,l._shellModel=null,l.minDistanceObjects={},l.blinkStartTimeMap={},l.blinkLastTimeMap={},l.positiveSequenceMap={},l.blinkColorMap={},l.blinkTimesMap={},l.exposureShift=0,l._tileSequence=0,l._parameters=r,l._cloneCursor=0,l.mapClippingIds={},l}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._tileset=this._tileset&&this._tileset.destroy(),this.manager.scene.removeObjectGroupByName(s.ObjectGroupType.BIMTILESGROUP+"|"+this.databagId),this.objectGroup=null,this.tilesLoader.destroy(),this.tilesLoader=null,this.parseCfgFinish=null,this.debut=null,this.viewer=null,this.delayLoadTexture=void 0,this.sceneState=null,this.filter.destroy(),this.materialManager.destroy(),this.materialManager=null,this.blinkStartTimeMap=null,this.blinkLastTimeMap=null,this.positiveSequenceMap=null,this.blinkColorMap=null,this.blinkTimesMap=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._shellModel=null,this.disableUserData=void 0,this._maxDetailLevel=void 0,this._detailLevelList=null,this._visualRange=null,this._parameters=null}},{key:"load",value:function(e){var t=this,i=this;return this.manager.chooseRendering(this.statistics.memoeryInfo,!0),this.parseCfgFinish&&this.parseCfgFinish(),this.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_START}),this._createTileSet(),new Promise(function(e,r){t._tileset.loadTileset(t.url,function(t){i.getTransforms().boundingBox=t._boundingBox.clone(),i.modelLoaded=!0,i.manager.updateScene(i),t._loader.updateBorderLineCategory(),i.filter._updateFilterManager();var r=i.viewer.getScene().getRawMatrixGlobal();t.updateGlobalMatrix(r),i.updateModelMaximumScreenSpaceError(),i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_COMPLETE,modelId:i.id}),i.debut&&i.debut(i),i._onDemand&&i._tileset.updateOnDemandConditions(i._onDemandConditions),e()},function(){i.manager.dispatchEvent({type:s.EVENTS.ON_LOAD_INVALID_SCENE,modelId:i.id}),r()})})}},{key:"_createTileSet",value:function(){if(!this._tileset)return this._tileset=new s.BimTileset({loader:this.tilesLoader,objectGroup:this.objectGroup,transformMatrix:this.transformMatrix,batchMergeEnabled:!0,tilesCacheScheduler:this.manager.tilesCacheScheduler,onDemandManager:this.onDemandManager,enableBorderLine:this._enableBorderLine,maxDetailLevel:this._maxDetailLevel,visualRange:this._visualRange,hasLayerInfo:this._hasLayerInfo,errorCoefficient:this._errorCoefficient,debugShowBoundingBox:this.viewer._options.debugShowBoundingBox,debugShowStatistics:this.viewer._options.debugShowStatistics,debugShowGeometricErrorHelper:new s.LabelCollection(this.viewer),databagId:this.databagId,disableUserData:this.disableUserData,sequence:0,materialManager:this.materialManager,skipLodEnabled:this._parameters.skipLodEnabled}),this._tileset}},{key:"clone",value:function(e,i){e=s.Utils.defaultValue(e,{});var r=e.transformMatrix;s.Utils.defined(r)||(r=new THREE.Matrix4),r=this.transformMatrix.clone().multiply(r),this._cloneCursor++;var n=s.Utils.defaultValue(e.modelId,this.id+"_"+this._cloneCursor);if(!s.Utils.defined(i)){var a={serverUrl:this._parameters.serverUrl,databagId:this._parameters.databagId,rootPath:this._parameters.rootPath,resourceType:this._parameters.resourceType,onDemand:this._parameters.onDemand,hasLayerInfo:this._parameters.hasLayerInfo,loadConfig:{transformMatrix:r},modelId:n};i=new t(this.viewer,this.manager,a)}var o=i;return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this,o),o._copy(this),this._cloneTileSet(o),this.manager.addModel(o),this.manager.updateFilterManager(),this.manager.getFilter().calculateVisibleComponentsBbox(),this.manager.updateScene(this),this.viewer.render(),i}},{key:"_copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_copy",this).call(this,e),this.modelLoaded=e.modelLoaded,this._shellModel=null}},{key:"_cloneTileSet",value:function(e){this._tileset||console.log("there is not tileset in model "+this.id+", please check it");var t=e._createTileSet();this._tileset.clone(t,e.tilesLoader)}},{key:"loadOnDemand",value:function(e){this._tileset.updateOnDemandConditions(e),this.manager.setRenderStateChanged(!0)}},{key:"isEmptyScene",value:function(){return!this.modelLoaded}},{key:"updateModelMaximumScreenSpaceError",value:function(){var e=this.viewer,t=e.domElement.offsetHeight;this._tileset.updateMaximumScreenSpaceError({camera:e.camera,globalMatrix:e.getScene().getRawMatrixGlobal(),globalInverseMatrix:e.getScene().getInverseMatrixGlobal(),transformMatrix:this.transformMatrix,cameraPreSSE:t/e.camera.frustumHeightFactor})}},{key:"updateMaterialsValue",value:function(e,t,i){this.materialManager.updateMaterialsValue(this,e,t,i)}},{key:"changeAllMaterials",value:function(e){this.materialManager.changeAllMaterials(this,e),this._tileset.changeAllMaterials(this.materialManager.materialMap)}},{key:"getBoundingBoxWorld",value:function(){return this.getTransforms().boundingBox.clone().applyMatrix4(this.getTransformMatrix())}},{key:"setModelMaximumScreenSpaceError",value:function(e){this._tileset.setMaximumScreenSpaceError(e)}},{key:"setDetailRatio",value:function(e){this._tileset.setGeoErrScaleFactor(e),this.manager.setRenderStateChanged(!0)}},{key:"getDetailRatio",value:function(e){return this._tileset.getGeoErrScaleFactor()}},{key:"getMeshesByUserIds",value:function(e,t){e&&t&&(this.minDistanceObjects[e]=[],this.minDistanceObjects[t]=[],this.getMeshesByUserId(e),this.getMeshesByUserId(t))}},{key:"getMeshesByUserId",value:function(e){for(var t=this.tilesLoader.tileReader.getIndexByUserId(e),i=this.getDescriptor().getNodeInfosByUserId(t),r=i.length,n=0;n<r;++n){var a=i[n],o=a.parent||a.nodeId,s={};if(s.boundingBox=a.boundingBox,s.matrix=a.matrix,!1===a.instanceOrNot){var l=this.tilesLoader.getMeshNodeById(o);if(!l)continue;s.mesh=l;var u=s.mesh.indexGroups;s.indexInfo=u[t]}else{var c=this.tilesLoader.getInstanceMeshNodeById(o);if(!c)continue;s.mesh=c}this.minDistanceObjects[e].push(s)}}},{key:"calculateClippingIds",value:function(e){}},{key:"calculateClippingContours",value:function(e){var t=this,i=this.manager.scene,r=s.FillClipPlaneManager.getInstance(i),n=r.renderClipPlane,a=(r.planeMesh,s.FillClipPlaneManager.getFillClipPlaneBoundingBoxWorld(i)),o=(new THREE.Matrix4).getInverse(this.transformMatrix),l=a.clone().applyMatrix4(o),u=this.id;r.capsIntersectContour[u]={};var c=this.manager.getScene().getInverseMatrixGlobal(),h=n.clone().applyMatrix4(c),d=this.tilesLoader.getDescriptor().getAllNodeInfos();e.map(function(e){var i=t.tilesLoader.tileReader.getIndexByUserId(e),o=d[i];o&&o.map(function(o){var s=o.boundingBox.clone().applyMatrix4(t.transformMatrix);(s.intersectsPlane(h)||s.intersectsBox(l))&&(o.instanceOrNot?t.tilesLoader.instancedMeshManager.calculateClippingContours(u,n,a,i,e,o,t.transformMatrix,r.capsIntersectContour):t.tilesLoader.batchedMeshManager.calculateClippingContours(u,n,a,i,e,o,t.transformMatrix,r.capsIntersectContour))})})}},{key:"getUserIdMapByFrustum",value:function(e){var t={},i=new THREE.Box3,r=this.viewer.getScene().getMatrixGlobal(),n=this.transformMatrix,a=this.tilesLoader.tileReader.getSearchTreeBuffer();for(var o in a){(function(o){function l(a,o){var u=s.TilesUtil.getBox(o.getBboxList());if(i.copy(u),i.applyMatrix4(n).applyMatrix4(r),e.intersectsBox(i)){for(var c=o.getNodesList(),d=c.length,f=0;f<d;++f){var p=c[f],m=h[p],v=s.TilesUtil.getBox(m.getBboxList());if(i.copy(v),i.applyMatrix4(n).applyMatrix4(r),e.intersectsBox(i)){var g=m.getTileId()+"_"+m.getBlockId()+"_"+m.getNodeId();void 0===t[m.getUserId()]?t[m.getUserId()]=[g]:t[m.getUserId()].push(g)}}o.getChildrenList().map(function(e){var t=a[e];l(a,t)})}}var u=a[o].searchTreeBlob,c=a[o].box;if(i.copy(c),i.applyMatrix4(n).applyMatrix4(r),!e.intersectsBox(i))return"continue";var h=u.getNodeIdsList();l(u.getOctreeList(),u.getOctreeList()[0])})(o)}return t}},{key:"getRealUserId",value:function(e){return this.tilesLoader.tileReader.getUserIdByIndex(e)}},{key:"getGeometryBuffersByUserId",value:function(e){var t=[],i=this.getDescriptor().getNodeInfosByUserId(e);if(i){for(var r=i.length,n=0;n<r;++n){var a=i[n],o=a.parent||a.nodeId;!1===a.instanceOrNot?this.tilesLoader.batchedMeshManager.getGeometryBuffersByNodeInfo(o,e,this.databagId,t):this.tilesLoader.instancedMeshManager.getGeometryBuffersByNodeInfo(o,a,this.databagId,t)}return t}}},{key:"getNodeInfosByUserId",value:function(e){var t=this.tilesLoader.tileReader.getIndexByUserId(e),i=this.getDescriptor().getNodeInfosByUserId(t),r=new THREE.Box3;if(i&&i instanceof Array){for(var n=[],a=0,o=i.length;a<o;a++){n[a]=Object.create(i[a]),n[a].transformMatrix=this.getTransformMatrix();var s=n[a].userData,l={};for(var u in s){var c=this.tilesLoader.tileReader.getUserDataStringMapByIndex(u,s[u]),h=_slicedToArray(c,2),d=h[0],f=h[1];l[d]=f}n[a].userData=l;var p=i[a].boundingBox;r.union(p)}return n.boundingBox=r,n}return i}},{key:"getMaterialByMaterialId",value:function(e){var t=e.split("+"),i=t[0]+"_standard_"+t[1];return this.materialManager.materialMap[i]}},{key:"getPickingMeshes",value:function(e,t,i,r,n){var a=this.getId();t[a]=new s.ObjectGroup,t[a].matrix.copy(this.getTransformMatrix()),t[a].matrixAutoUpdate=!1,this._dealNonInstancedNodesForPicking(e,t[a],i,r),this._dealInstancedNodesForPicking(e,t[a],i,r)}},{key:"_dealNonInstancedNodesForPicking",value:function(e,t,i,r){var n=new s.ObjectGroup,a=e.selectedMaterial,o=i.length,l=this.getDescriptor().mapNodeInfoByUserId;if(0!==Object.keys(l).length){for(var u=0;u<o;++u){var c=this.tilesLoader.tileReader.getIndexByUserId(i[u]),h=l[c];if(h&&this.filter.isPickable(c))for(var d=h.length,f=0;f<d;++f){var p=h[f];!0!==p.instanceOrNot&&this.filter._isPickable(p)&&(this.tilesLoader.batchedMeshManager.updatePickingMeshes(p,c,a,n),this.tilesLoader.batchedWireframeManager.updatePickingMeshes(p.lineId,c,a,n))}}t.add(n)}}},{key:"_dealInstancedNodesForPicking",value:function(e,t,i,r){var n=new s.ObjectGroup,a=e.selectedMaterial,o=i.length,l=this.getDescriptor().mapNodeInfoByUserId;if(0!==Object.keys(l).length){for(var u=0;u<o;++u){var c=this.tilesLoader.tileReader.getIndexByUserId(i[u]),h=l[c];if(h&&this.filter.isPickable(c))for(var d=h.length,f=0;f<d;++f){var p=h[f];if(!1!==p.instanceOrNot){var m=p.parent;this.tilesLoader.instancedMeshManager.updatePickingMeshes(m,a,p.matrix,n),this.tilesLoader.instancedWireframeManager.updatePickingMeshes(p.lineId,c,a,p.matrix,n)}}}t.add(n)}}},{key:"isHiddenSourceObjectUserId",value:function(e){return this.manager.isHiddenSourceObjectUserId(e)}},{key:"hasHiddenSourceObjectUserId",value:function(){return this.manager.hasHiddenSourceObjectUserId()}},{key:"getModelMaximumScreenSpaceError",value:function(){return this._tileset.getMaximumScreenSpaceError()}},{key:"updateMatrix",value:function(){var e=this.viewer.getScene().getRawMatrixGlobal();this._tileset.updateGlobalMatrix(e)}},{key:"hasTransforms",value:function(){return!0}},{key:"preUpdate",value:function(e){this._tileset.preUpdate(e)}},{key:"update",value:function(e){this._tileset.update(e)}},{key:"postUpdate",value:function(e){this._tileset.postUpdate(e)}},{key:"updateUnitScale",value:function(e){e.unitScale=this.unitScale}},{key:"isCulled",value:function(){return!!this.isUseable()&&this._tileset.root.visible}},{key:"_hasNode",value:function(){return 0!==this.objectGroup.children.length}},{key:"getDescriptor",value:function(){return this.tilesLoader.getDescriptor()}},{key:"getAllNodeInfos",value:function(){return this.getDescriptor().getAllNodeInfos()}},{key:"applyFilter",value:function(){}},{key:"applySelection",value:function(){this.applyFilter()}},{key:"applyHover",value:function(){}},{key:"clearSelection",value:function(){this.applyFilter()}},{key:"setVisible",value:function(e){this.visible=e,this.objectGroup.visible!==e&&(this.objectGroup.visible=e,this.objectGroup.pickableType=e?s.PICKABLETYPE.Geometry:s.PICKABLETYPE.UnPickable,this.manager.setRenderStateChanged(!0))}},{key:"isUserIdExist",value:function(e){var t=this.tilesLoader.tileReader.getIndexByUserId(e);return this.getDescriptor().isUserIdExist(t)}},{key:"getBlinkMaterials",value:function(){return this.filter.getBlinkMaterials()}},{key:"updateBlinkMaterial",value:function(){var e=this.sceneState.getBlinkComponentsIdMap(this.id),t=this.filter.blinkMaterials,i=this.manager.blinkManager;for(var r in e){var n=e[r],a=this.tilesLoader.tileReader.getIndexByUserId(r),o=this.filter.getBlinkMaterialName(a,n),l=t[o];if(l){n.color&&(this.blinkColorMap[r]=this.blinkColorMap[r]||new THREE.Vector4,this.blinkColorMap[r].set(n.color.red/255,n.color.green/255,n.color.blue/255,n.color.alpha));var u=this.blinkColorMap[r]||i.getBlinkColor(this.id),c=0,h=s.EnumShaderColorState.BLINK,d=n.interval||600,f=Date.now();this.blinkTimesMap[r]=void 0==this.blinkTimesMap[r]?0:this.blinkTimesMap[r],void 0===this.blinkStartTimeMap[r]&&(this.positiveSequenceMap[r]=!0,this.blinkStartTimeMap[r]=f,this.blinkLastTimeMap[r]=f);if(f-this.blinkLastTimeMap[r]<=100)return;if(f-this.blinkStartTimeMap[r]>d&&(this.positiveSequenceMap[r]=!this.positiveSequenceMap[r],this.blinkStartTimeMap[r]=f,this.blinkLastTimeMap[r]=f,n.times&&++this.blinkTimesMap[r]==2*n.times))return this.blinkTimesMap[r]=0,void this.sceneState.clearBlinkComponentsById([r],this.id);var p=(f-this.blinkStartTimeMap[r])/d;c=this.positiveSequenceMap[r]?p:1-p,this.blinkLastTimeMap[r]=f;for(var m in l){l[m].updateBlinkUniformValue(h,u,c)}}}}},{key:"setExposureShift",value:function(e){this.exposureShift=e,s.GlobalData.ToneMapping=1;var t=e>0?-.4*e+.5:-4*e+.5;this.materialManager.updateMaterialsValue(this,"shift",t),this.manager.setRenderStateChanged(!0)}},{key:"getExposureShift",value:function(){return this.exposureShift}},{key:"setBorderLineVisible",value:function(e){this._enableBorderLine=e,this.tilesLoader.setBorderLineVisible(e),this.tilesLoader.batchedWireframeManager.enableWireFrame(e),this.tilesLoader.instancedWireframeManager.enableWireFrame(e)}},{key:"isBorderLineVisible",value:function(){return this._enableBorderLine}},{key:"_setStatistics",value:function(e){e&&e.count&&(this.statistics.numOfElements=e.count.element,this.statistics.numOfTriangles=e.count.mesh_face,this.statistics.numOfVertices=e.count.mesh_vertex)}},{key:"loadBusinessResources",value:function(e){var t=this;!1!==this.disableUserData&&this._tileset.loadUserIdResources(function(){t.tilesLoader.recoverIndexInfo(function(){t.tilesLoader.recoverNodeInfo(),t.tilesLoader.recoverLineNode(),t.filter._updateFilterManager(),t.disableUserData=!1,t._tileset.disableUserData=!1,t.tilesLoader.disableUserData=!1,e&&e()})})}},{key:"debugShowGeometricError",value:function(e){this._tileset&&this._tileset.debugShowGeometricError(e)}},{key:"setCastShadow",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setCastShadow",this).call(this,e),this.viewer.traverseGroupEnableShadow(this.objectGroup,this.castShadow,this.receiveShadow),this.viewer.updateShadowMap()}},{key:"setReceiveShadow",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setReceiveShadow",this).call(this,e),this.viewer.traverseGroupEnableShadow(this.objectGroup,this.castShadow,this.receiveShadow),this.viewer.updateShadowMap()}},{key:"enableLocalClippingMode",value:function(e){if(this.localClippingMode=e,this.tilesLoader.instancedMeshManager.updateInstanceClipping(e),!e){this.localClippingPlanes=null;for(var t in this.materialManager.materialMap)this.materialManager.materialMap[t].clippingPlanes=null}}},{key:"getPolygonOutLine",value:function(e,t){t&&this.tilesLoader.loadPolygonOutLine(e,t)}},{key:"isVisibleMesh",value:function(e){var t=this.tilesLoader.batchedMeshManager,i=t.getMeshNodeById(e);if(i&&!0===i.visible&&i.parent&&!0===i.parent.visible)return!0;var r=this.tilesLoader.instancedMeshManager,n=r.getInstanceMeshNodeById(e);for(var a in n){var o=n[a],l=o.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(l))return!0}return!1}},{key:"setMaxDetailLevel",value:function(e){if(this._detailLevelList.length>0){var t=this._detailLevelList[0];if(e<t)return console.log(this.id+" minDetailLevel  is "+t+", "+e+" set"),void(this._tileset.maxDetailLevel=t)}this._tileset.maxDetailLevel=e}},{key:"getMaxDetailLevel",value:function(){return this._tileset.maxDetailLevel}},{key:"setVisualRange",value:function(e){this._tileset.visualRange=e}},{key:"getVisualRange",value:function(){return this._tileset.visualRange}},{key:"getRootGeoErrDistance",value:function(){var e=this.viewer.domElement.offsetHeight,t=e/this.viewer.camera.frustumHeightFactor;return this._tileset.getRootGeoErrDistance(t)}},{key:"sequence",get:function(){return this._tileSequence},set:function(e){this._tileSequence=e}},{key:"shellModel",set:function(e){this._shellModel=e},get:function(){return this._shellModel}},{key:"config",set:function(e){this._setStatistics(e),this._config=e},get:function(){return this._config}}]),t}(s.BaseModel);s.BimTilesModel=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r._loader=e._loader,r.contentBufferNum=0,r}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._loader=null}},{key:"parseTileContent",value:function(e){var t=this;this.contentBufferNum=Object.keys(this._contentBuffer).length;var i=this._tile.contentOutlineUrl,r=this;if(this._tile.contentTypeInstance&&i)return void this._loader.parseTileLineContent(this._tile,function(i){t._loader.parseTileContent(t._tile,function(t){s.Utils.defined(r._tile)&&r._tile.setByteLength(r.geometryByteLength),e(t),r.setShareGeometryProcessed()})});for(var n in this._contentBuffer)n===this._tile.getAbsoluteContentUrl()?this._loader.parseTileContent(this._tile,function(i){0===--t.contentBufferNum&&(s.Utils.defined(r._tile)&&r._tile.setByteLength(r.geometryByteLength),e(i),r.setShareGeometryProcessed())}):this._loader.parseTileLineContent(this._tile,function(i){0===--t.contentBufferNum&&e(i)})}},{key:"clone",value:function(e){e=s.Utils.defaultValue(e,new t),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this,e)}},{key:"disposeShareGeometry",value:function(){var e=this._tile._tileset.geometryManager;return!s.Utils.defined(e)||e.disposeShareGeometry(this._tile.nodeId)}},{key:"setShareGeometryProcessed",value:function(){var e=this._tile._tileset.geometryManager;s.Utils.defined(e)&&(e.setShareGeometryState(this._tile.nodeId,s.SharedGeometryState.PROCESSED),e.addGeometryOwner(this._tile.nodeId))}}]),t}(s.AbstractTileContent);s.BimTileContent=e}(),function(){var e=function(e){function t(e,i,r,n){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return a._loader=e._loader,a._header=r,a._contentFolder=n,a.matrix=new THREE.Matrix4,a.localIndexList=[],a.userIndexMap={},a.isInstanceTile=!1,a.explodeCount=0,a.needUpdateFilter=!1,a}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.matrix=void 0,this._loader=void 0,this._header=void 0,this._contentFolder=void 0,this.localIndexList=void 0}},{key:"build",value:function(){this._parseTile(this._tileset,this,this._header,this._contentFolder)}},{key:"_parseTile",value:function(e,t,i,r){var n=this;t.boundingBox=s.TilesUtil.getBox(i.boundingVolume),i.refine?("replace"!==i.refine&&"add"!==i.refine||console.warn("lowercase-refine",'This tile uses a lowercase refine "'+i.refine+'". Instead use "'+i.refine.toUpperCase()+'".'),t.refineReplace="REPLACE"===i.refine.toUpperCase()):t.parent?t.refineReplace=t.parent.refineReplace:t.refineReplace=!0,t.geometricError=i.geometricError<s.TilesUtil.TWO_ACCURACY?t._parent?t._parent.geometricError:1/s.TilesUtil.Minimum_Setting_SSEHold:i.geometricError,t.contentIndex=null,i.content?(t.contentId=i.content.id,t.contentUrl=i.content.uri||i.content.url,t.contentType=i.content.type,t.contentIndex=r+t.contentUrl,void 0!==i.content.index&&(t.contentCMPTIndex=i.content.index),void 0!==i.content.offset&&(t.contentCMPTOffset=i.content.offset),void 0!==i.content.size&&(t.contentCMPTSize=i.content.size)):t.contentType=s.TileContentType.DATA_NULL,i.outline&&this._tileset.enableBorderLine&&(t.contentOutlineUrl=r+i.outline);var a=i.detailLevel;if(void 0===a&&(a=parent.detailLevel),t.detailLevel=a,(void 0===t.detailLevel||t.detailLevel<=2)&&(t._promotionalPriority=-1),t.contentTypeEmpty&&(t._contentState=s.TileContentState.READY),i.transform&&16===i.transform.length&&t.matrix.fromArray(i.transform),t._parent?t.matrix=t._parent.matrix.clone().multiply(t.matrix):t.matrix.identity(),t.boundingBox=s.TilesUtil.getBox(i.boundingVolume,t.matrix),t._parent&&t._parent.refineReplace?t._parent.contentTypeEmpty?t._debugLodLevel=t._parent._debugLodLevel:t._debugLodLevel=t._parent._debugLodLevel+1:t.refineReplace&&(t._debugLodLevel=0),i.properties&&i.properties.LocalIndex){i.properties.LocalIndex.map(function(e){var t=s.TilesUtil.getBox(e.boundingVolume),i=r+e.content.url,a={box:t,url:i};n.localIndexList.push(a),n._loader.addSearchTree(a.url,a.box)})}if(i.properties&&i.properties.layerKey&&(this.layerInfo[i.properties.layerKey]&&console.warn("repeated Key"),this.layerInfo[i.properties.layerKey]=i.properties.layerValue),i.children){var o=!0,l=!1,u=void 0;try{for(var c,h=i.children[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,f=new s.BimTileNode(e,t,d,r);f.build(),f._generateNodeId()}}catch(e){l=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw u}}}}},{key:"clone",value:function(e,i,r){return s.Utils.defined(r)||(r=new t(e,i)),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this,r),r._loader=e._loader,r._header=this._header,r._contentFolder=this._contentFolder,r.matrix=this.matrix.clone(),r.localIndexList=this.localIndexInfo,r.userIndexMap=this.userIndexMap,r.isInstanceTile=this.isInstanceTile,r._id=this._id,r._tileset=e,r}},{key:"fetchContentBlock",value:function(e,t,i){for(var r=this,n=e.length,a={},o=0;o<n;++o){(function(o){var l=s.RequestSpliter.splitByDatabagId(e[o]);if(r.contentTypeCMPT)return r._loader.loadCMPTArrayBufferImmediately(l,function(e){n--,a[l]=e,0===n&&t(a)},function(e){i(e)}),"continue";r._loader.loadArrayBufferImmediately(l,function(e){n--,a[l]=e,0===n&&t(a)},function(e){i(e)})})(o)}}},{key:"parseCMPTContentBlock",value:function(e,t){var i=this,r=this._loader.tileReader;this.arrayBufferNum=1;for(var n in e){var a=proto.bimtile_pbf.BlockHeader.BlockType.BT_MESH,o=this.getAbsoluteContentUrl(),s={node:this,type:a,url:o},l=this._loader.CMPTUrlMap[n].buffer,u=l.slice(this.contentCMPTOffset,this.contentCMPTOffset+this.contentCMPTSize);r.parseBlock(u,s,function(){i.arrayBufferNum--,u=null,0===i.arrayBufferNum&&t(e)})}}},{key:"parseContentBlock",value:function(e,t){var i=this;if("CMPT"===this.contentType)return this.parseCMPTContentBlock(e,t);var r=this._loader.tileReader;this.arrayBufferNum=Object.keys(e).length;for(var n in e){var a=r.getBlockType(this.contentType),o=this.getAbsoluteContentUrl();n!==o&&(a=proto.bimtile_pbf.BlockHeader.BlockType.BT_LINE,o=this.getOutlineContentUrl());var s={node:this,type:a,url:o};r.parseBlock(e[n],s,function(){0===--i.arrayBufferNum&&t(e)})}}},{key:"parseOutLineContentBlock",value:function(e,t){var i=this._loader.tileReader,r={node:this,type:proto.bimtile_pbf.BlockHeader.BlockType.BT_LINE,url:this.getOutlineContentUrl()};i.parseBlock(e,r,function(){t(e)})}},{key:"createContent",value:function(e){return new s.BimTileContent(this,e)}},{key:"getAbsoluteContentFolder",value:function(){return this._contentFolder}},{key:"computeMeshNodeCount",value:function(e){this.loadedCount=0;for(var t in this.buffer){var i=this.getBuffer(t);if(i.type==proto.BlockHeader.BlockType.BT_MESH){var r=i.content;if(r)for(var n=r.getScenesList(),a=n.length,o=0;o<a;++o)for(var s=n[o],l=s.getNodesList(),u=l.length,c=0;c<u;++c){var h=l[c],d=r.getNodesList()[h];this.getNodeCount(d,r,e)}}}}},{key:"getNodeCount",value:function(e,t,i){var r=e.getPrimitivesList().length,n=e.getNodeType();(!0===i&&n!=proto.bimtile_pbf.Node.NodeType.NT_BATCHED_SUB_NODE||!1===i&&n!=proto.bimtile_pbf.Node.NodeType.NT_BATCHED_MAIN_NODE)&&(this.loadedCount+=r);var a=e.getChildrenList();if(0!==a.length){var o=!0,s=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value,d=t.getNodesList()[h];this.getNodeCount(d,t,i)}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}}}},{key:"computePointNodeCount",value:function(){this.loadedCount=0;for(var e in this.buffer){var t=this.getBuffer(e);if(t.type==proto.BlockHeader.BlockType.BT_POINT){var i=t.content;if(i){var r=i.getPointsList();this.loadedCount=r.length}}}}},{key:"computeLineNodeCount",value:function(){this.loadedLineCount=0;for(var e in this.lineBuffer){var t=this.getLineBuffer(e);if(t.type==proto.BlockHeader.BlockType.BT_LINE){var i=t.content;if(i)for(var r=i.getScenesList(),n=0,a=r.length;n<a;++n){var o=r[n],s=o.getNodesList();this.loadedLineCount+=s.length}}}}},{key:"_clearAllBuffer",value:function(){if(this.buffer){for(var e in this.buffer)this.buffer[e].content&&(this.buffer[e].content=null),this.buffer[e]=null;this.buffer=null}if(this.lineBuffer){for(var t in this.lineBuffer)this.lineBuffer[t].content&&(this.lineBuffer[t].content=null),this.lineBuffer[t]=null;this.lineBuffer=null}}},{key:"getBuffer",value:function(e){return this.buffer[e]}},{key:"getLineBuffer",value:function(e){return this.lineBuffer[e]}},{key:"disposeMeshNodeById",value:function(e){this._loader.disposeMeshNodeById(e)}},{key:"disposeInstanceMeshNodeById",value:function(e){this._loader.disposeInstanceMeshNodeById(e)}},{key:"disposeLineNodeById",value:function(e){this._loader.disposeLineNodeById(e)}},{key:"disposeInstanceLineNodeById",value:function(e){this._loader.disposeInstanceLineNodeById(e)}},{key:"onSelectionChanged",value:function(){var e=this._loader.tileReader,t=this._loader.filter.model.id,i=this._loader.sceneState.selectionSet[t];if(this.selection={},void 0===i||0===Object.keys(i).length)return!1;for(var r in this.userIndexMap){var n=e.getUserIdByIndex(r);i[n]&&(this.selection[n]=!0)}if(Object.keys(this.selection).length===Object.keys(this.preSelection).length){for(var a in this.selection)if(!this.preSelection[a])return this.preSelection=Object.assign(this.selection),!0;return!1}return this.preSelection=Object.assign(this.selection),!0}},{key:"applyFilter",value:function(){var e=this._loader.filter;this.isInstanceTile?e.instanceApply(this):e.standardApply(this)}},{key:"applyOnDemand",value:function(){if(this.isInstanceTile){var e=this._tileset.onDemandManager;!1!==e.onDemand&&e.instanceApply(this)}}},{key:"explode",value:function(){var e=this._loader.modelExplosion;this.isInstanceTile?e.instanceExplode(this):e.standardExplode(this)}},{key:"changeAllMaterials",value:function(e){this._content.meshes.traverse(function(t){var i=t.material;if(i)for(var r=0;r<i.length;r++){var n=i[r].name;e[n]&&(i[r]=e[n])}})}},{key:"_generateNodeId",value:function(e){var t=e;if(!s.Utils.defined(t)){var i=this._header.content;if(s.Utils.defined(i)){var r=i.uri||i.url;t=this._contentFolder+"_"+r,this.contentCMPTIndex&&(t+="_"+this.contentCMPTIndex)}else t=this._contentFolder+"_root"}return this._id=s.Utils.getEncodedString(t),this._id}},{key:"initializePreObject",value:function(){this.preHiddenUserIdSetObject=Object.create(null),this.preHoverUserIdSetObject=Object.create(null),this.preOverrideUserIdSetObject=Object.create(null),this.preTransparentUserIdSetObject=Object.create(null),this.preBlinkUserIdSetObject=Object.create(null),this.preLocalClipUserIdSetObject=Object.create(null),this.preModifyOpacityUserIdSetObject=Object.create(null)}},{key:"setByteLength",value:function(e){s.Utils.defined(this._tileset)&&this._tileset.geometryManager.setByteLength(this.nodeId,e)}},{key:"sharedGeometryDestroy",value:function(){var e=this._tileset.geometryManager;if(!s.Utils.defined(e))return!1;var t=e.getGeometry(this._id);return!!s.Utils.defined(t)&&t.state===s.SharedGeometryState.DESTROYED}},{key:"requestContent",value:function(){var e=this._tileset.geometryManager;if(s.Utils.defined(e)){var i=e.getGeometry(this._id);if(s.Utils.defined(i)){if(i.state===s.SharedGeometryState.PROCESSING)return!1;if(i.state===s.SharedGeometryState.PROCESSED)return this._content=this.createContent(),this._content.geometryByteLength=i.byteLength,this._contentProcessDeferred=new s.Deferred,this._contentReadyDeferred=new s.Deferred,e.createMesh(i,this,this._tileset._loader),this._contentState=s.TileContentState.READY,this._contentReadyDeferred.resolve(this._content),this._content._state=s.TileContentProcessState.PROCESSED,this._content.attachToTilesGroup(this),!0}}
var r=e.addGeometryById(this.nodeId),n=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requestContent",this).call(this);return n&&(r.state=s.SharedGeometryState.PROCESSING),n}},{key:"_cancelSharedGeometryRequest",value:function(){var e=this._tileset.geometryManager;s.Utils.defined(e)&&e.setShareGeometryState(this.nodeId,s.SharedGeometryState.CANCELED)}},{key:"checkIfProcessingTileAvailable",value:function(){return!this.isDestroyed()}}]),t}(s.AbstractTile);s.BimTileNode=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.materialManager=t.materialManager,this.batchMergeEnabled=t.batchMergeEnabled,this.delayLoadTexture=t.delayLoadTexture,this.renderFunction=t.renderFunction}return _createClass(e,[{key:"destroy",value:function(){this.materialManager.destroy(),this.materialManager=null}},{key:"loadMesh",value:function(e,t){}},{key:"_getAccInfo",value:function(e,t){if(t<0)return{offset:0,length:0,count:0};var i=e.getBufferaccsList()[t];return{offset:i.getByteOffset(),length:i.getByteLength(),count:i.getCount(),valueType:i.getValueType()}}},{key:"_getAccVertexArray",value:function(e,t,i,r){var n=e._getAccInfo(t,r.getAccVertices()),a=i.slice(n.offset,n.offset+n.length).buffer;return new Float32Array(a)}},{key:"_getAccIndicesArray",value:function(e,t,i,r){var n=e._getAccInfo(t,r.getAccIndices()),a=i.slice(n.offset,n.offset+n.length).buffer,o=null;switch(n.valueType){case proto.bimtile_pbf.BufferAcc.ComponentType.CT_USHORT:o=new Uint16Array(a);break;default:o=new Uint32Array(a)}return o}},{key:"_getMeshBuffer",value:function(e,t,i){var r=i.meshBlob,n=r.getBlobHeader(),a=n.getBufferBlockId(),o=n.getMaterialBlockId(),s=(n.getUserdataBlockId(),e.tileReader.getBuffer(t,a,proto.BlockHeader.BlockType.BT_BUFFER)),l=e.tileReader.getBuffer(t,o,proto.BlockHeader.BlockType.BT_MATERIAL);i.buffer=s,i.materialBlockId=o,i.material=l,s&&(i.bufferData=s.getBuffer())}},{key:"_deleteNodeBuffer",value:function(e,t){e.materialBlockId=void 0,e.contentIndex=void 0,e.bufferId=void 0,e.material=null,e.bufferData=null,e.buffer=null,e.meshBlob=null,e.matrix=null;var i=t.buffer;for(var r in i)i[r].content=null}},{key:"createMeshNode",value:function(e,t,i,r,n,a,o){if(!r.checkIfProcessingTileAvailable())return void this._deleteNodeBuffer(t,r);var l=null;switch(i.mode){case proto.bimtile_pbf.Primitive.PrimitiveMode.PM_LINES:l=new s.LineSegmentsEx(n,[a]);break;default:l=new s.MeshEx(n,[a])}i.indexInfos||(i.indexInfos={}),l.applyMatrix(i.matrix),l.alive=!0,l.name=i.nodeIndexId;var u=e.filter.model;s.GlobalData.EnableShadowMap&&(l.castShadow=u.castShadow,l.receiveShadow=u.receiveShadow),l.indexGroups=i.indexInfos,l.indexCount=n.index.count;for(var c in l.indexGroups)l.indexGroups[c].preTranslation=void 0,r.userIndexMap[c]=!0;e.addMeshIdMap(l.name,l),r.content.meshes.add(l),l.databagId=r.content.meshes.databagId,i.userIdMapIndex&&e.addUserIdMapIndices(i.userIdMapIndex,l.name),e.renderableCount++;var h={id:r.nodeId,bufferGeometry:n,material:a,pbfNodeInfo:i,node:r};return r._tileset.geometryManager.addGeometryById(r.nodeId,h),r.loadedCount--,r.loadedCount<=0&&(r.initializePreObject(),o&&o(r),this.delayLoadTexture||this._deleteNodeBuffer(t,r)),l}},{key:"createMeshMaterial",value:function(e){this.delayLoadTexture?this.createMeshTextureDelay(e):this.createMeshTextureImmediately(e)}},{key:"createMeshTextureDelay",value:function(e){var t=e.that,i=e.loader,r=e.meshBufferObject,n=e.pbfNodeInfo,a=e.treeNode,o=e.primitive,s=e.bufferGeometry,l=e.onTileContentReadyCallback,u=e.callback,c=t.createMeshNode(i,r,n,a,s,this.materialManager.globalMaterial,l);if(u&&u(),c){new Promise(function(e){t.materialManager.getMaterial(i,r,o,function(t){e(t)})}).then(function(e){void 0!==c.material&&(c.material[0]=e,a._tileset.updateTextureMemoryUsage(a),t.renderFunction())})}}},{key:"createMeshTextureImmediately",value:function(e){var t=e.that,i=e.loader,r=e.meshBufferObject,n=e.pbfNodeInfo,a=e.treeNode,o=e.primitive,s=e.bufferGeometry,l=e.onTileContentReadyCallback,u=e.callback;new Promise(function(e){t.materialManager.getMaterial(i,r,o,function(t){e(t)})}).then(function(e){t.createMeshNode(i,r,n,a,s,e,l),u&&u()})}}]),e}();s.BimTileMeshParser=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_getSubNodeInfo",value:function(e,t,i,r,n,a){var o=n.nodeIndex,s=r.bufferId+"_"+o;if(n.nodeIndexId=s,i.clearGroups(),i.groups.push({start:0,count:n.iAccInfoCount,materialIndex:0}),t.getDescriptor().getReferencedMeshBufferById(s)){var l=t.pbfNodeInfoMap[s];return l.userIdMapIndex=[],l}var u=r.meshBlob.getNodesList()[o],c=u.getChildrenList(),h=r.meshBlob,d={},f={};if(n.userIdMapIndex=[],c.map(function(i,a){for(var o=h.getNodesList()[i],s=o.getPrimitivesList(),l=s.length,u=0;u<l;u++){var c=s[u],f=h.getPrimitivesList()[c],p=e._addNodeInfo(e,t,h,r,o,f,n,i,a);void 0===d[p.userId]?d[p.userId]=[p.subIndexInfo]:d[p.userId].push(p.subIndexInfo)}}),0===Object.keys(d).length){var p=e._addNodeInfo(e,t,h,r,u,a,n,o,0);d[p.userId]=[p.subIndexInfo]}var m=!0,v=!1,g=void 0;try{for(var y,M=Object.entries(d)[Symbol.iterator]();!(m=(y=M.next()).done);m=!0){var E=y.value,b=_slicedToArray(E,2),x=b[0];b[1];f[x]=t.getDescriptor().getAllNodeInfos()[x]}}catch(e){v=!0,g=e}finally{try{!m&&M.return&&M.return()}finally{if(v)throw g}}return n.indexInfos=d,n.nodeInfos=f,t.getDescriptor().cacheReferencedMeshBufferData(s,{IndexInfos:d}),t.pbfNodeInfoMap[s]=n,n}},{key:"_createIndexGroup",value:function(e){return{start:e.indexStart,count:e.indexCount,materialIndex:0,userId:e.userId}}},{key:"_addNodeInfo",value:function(e,t,i,r,n,a,o,s,l){var u=o.nodeIndexId,c=(this._getAccInfo(i,a.getAccNormals()),this._getAccInfo(i,a.getAccVertices())),h=this._getAccInfo(i,a.getAccIndices()),d=this._getAccInfo(i,a.getAccTexcoords()),f=r.bufferId+"_"+s,p=n.getUserId(),m=(c.offset-o.vAccInfoStart)/4,v=3*c.count,g=0;switch(h.valueType){case proto.bimtile_pbf.BufferAcc.ComponentType.CT_USHORT:g=(h.offset-o.iAccInfoStart)/2;break;default:g=(h.offset-o.iAccInfoStart)/4}var y=h.count,M=(d.offset-o.tAccInfoStart)/4,E=2*d.count,b={userId:p,subIndexInfo:{meshId:f,positionStart:m,positionCount:v,indexStart:g,indexCount:y,uvStart:M,uvCount:E}};o.userIdMapIndex.push({userId:p,index:l});var x=-1===r.materialBlockId?r.materialBlockId:r.bufferId+"+"+r.materialBlockId,I=x+"+"+a.getMaterialId(),T={parent:u,matrix:o.matrix,materialId:I,type:proto.bimtile_pbf.Node.NodeType.NT_BATCHED_SUB_NODE,cellId:null};return t.disableUserData?(t.addNoUserDataMeshNodeInfo(p,f,T),b):(t.patchMeshNodeInfo(p,f,T),b)}},{key:"loadMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=e.pbfNodeInfo,o=e.primitive,s=e.treeNode,l=e.onTileContentReadyCallback;if((o.getAccVertices()<0||o.getAccIndices()<0)&&o.getAccArchive()<0)return void console.warn("invalid acc info");a.nodeIndex;if(i._getMeshBuffer(r,s,n),n.buffer){var u=new THREE.BufferGeometry,c=n.meshBlob,h=n.bufferData,d=i._getAccInfo(c,o.getAccNormals());if(d.count>0){var f=h.slice(d.offset,d.offset+d.length).buffer,p=new Float32Array(f);u.addAttribute("normal",new THREE.BufferAttribute(p,3)),a.nAccInfoStart=d.offset}var m=i._getAccInfo(c,o.getAccVertices()),v=i._getAccVertexArray(i,c,h,o);u.addAttribute("position",new THREE.BufferAttribute(v,3)),a.vAccInfoStart=m.offset;var g=i._getAccInfo(c,o.getAccIndices()),y=i._getAccIndicesArray(i,c,h,o);u.setIndex(new THREE.BufferAttribute(y,1)),a.iAccInfoStart=g.offset,a.iAccInfoCount=g.count;var M=function(e,t,i,r,n,a,o){if(!(e.count<=0)){var s=t.slice(e.offset,e.offset+e.length).buffer,l=new Float32Array(s),u=i.getMaterialId(),c=r.material,h=c.getMaterialsList(),d=h[u],f=d.getTexturesList(),p=c.getTexturesList(),m=p[f[o-1]],v=1===o?"uv":"uv"+o;if(m){for(var g=0==m.getScaleU()?1:m.getScaleU(),y=0==m.getScaleV()?1:m.getScaleV(),M=0;M<e.count;++M){var E=l[2*M]*g+m.getOffsetU(),b=l[2*M+1]*y+m.getOffsetV();l[2*M]=E,l[2*M+1]=b}n.addAttribute(v,new THREE.BufferAttribute(l,2))}else n.addAttribute(v,new THREE.BufferAttribute(s,2));a.tAccInfoStart=e.offset}};a.tAccInfoStart=0;M(i._getAccInfo(c,o.getAccTexcoords()),h,o,n,u,a,1);M(i._getAccInfo(c,o.getAccTexcoords2()),h,o,n,u,a,2),a=Object.assign(i._getSubNodeInfo(i,r,u,n,a,o));if(n.material&&o.getMaterialId()>=0){u.getAttribute("uv2")?o.hasLightMap=!0:o.hasLightMap=!1;var E={that:i,loader:r,meshBufferObject:n,pbfNodeInfo:a,treeNode:s,primitive:o,bufferGeometry:u,onTileContentReadyCallback:l,callback:t};i.createMeshMaterial(E)}}}}]),t}(s.BimTileMeshParser);s.BimTileMeshNodeParser=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"loadMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=e.pbfNodeInfo,o=e.primitive,l=e.treeNode,u=e.onTileContentReadyCallback;if((o.getAccVertices()<0||o.getAccIndices()<0)&&o.getAccArchive()<0)return void console.warn("invalid acc info");if(i._getMeshBuffer(r,l,n),n.buffer){var c=n.meshBlob,h=n.bufferData,d=n.material,f=c.getBufferaccsList()[o.getAccArchive()],p=f.getByteOffset(),m=f.getByteLength(),v=(f.getCount(),h.slice(p,p+m).buffer);s.TilesUtil.getDracoLoader().decodeDracoFile(v,function(e){if(d&&o.getMaterialId()>=0){e.clearGroups(),e.groups.push({start:0,count:e.index.count,materialIndex:0});var s={that:i,loader:r,meshBufferObject:n,pbfNodeInfo:a,treeNode:l,primitive:o,bufferGeometry:e,onTileContentReadyCallback:u,callback:t};i.createMeshMaterial(s)}})}}}]),t}(s.BimTileMeshParser);s.BimTileDracoParser=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.defaultWireframeColor=s.MaterialUtil.DefaultWireframeColor,i.wireframeMaterial=new THREE.MeshBasicMaterial(i.defaultWireframeColor),i.instanceWireframeMaterial=s.MaterialUtil.createInstanceMaterial(s.MaterialUtil.getMaterialParameters(i.wireframeMaterial)),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"loadMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=e.pbfNodeInfo,o=e.primitive,s=e.treeNode,l=e.onTileContentReadyCallback;if((o.getAccVertices()<0||o.getAccIndices()<0)&&o.getAccArchive()<0)return void console.warn("invalid acc info");if(i._getMeshBuffer(r,s,n),n.buffer){if(!s.checkIfProcessingTileAvailable())return void i._deleteLineNodeBuffer(n,s);var u=i._createBatchGeometry(i,r,n,a,o);if(n.material&&o.getMaterialId()>=0){var c=i.materialManager.getLineMaterial(r,n,o);i.createMeshNode(r,n,a,s,u,c,l),t&&t()}}}},{key:"loadLineInstanceMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=e.pbfNodeInfo,o=e.primitive,l=e.treeNode,u=e.onTileContentReadyCallback;if(!l.checkIfProcessingTileAvailable())return void i._deleteLineNodeBuffer(n,l);var c=new THREE.InstancedBufferGeometry,h=n.meshBlob,d=n.bufferData,f=i._getAccVertexArray(i,h,d,o),p=i._getAccIndicesArray(i,h,d,o);c.addAttribute("position",new THREE.BufferAttribute(f,3)),c.setIndex(new THREE.BufferAttribute(p,1));var m=new s.LineSegmentsEx(c,i.instanceWireframeMaterial);m.alive=!0,m.name=a.nodeIndexId,m.tileId=a.tileId,m.frustumCulled=!1,c.addGroup(0,c.index.count,0),l.borderLineCategory=r.borderLineCategory,m.isInstanceMeshNode=!0,m.visible=r.isBorderLineVisible(),r.disableUserData&&(m.visible=!1),l.content.meshes.add(m),m.databagId=l.content.meshes.databagId,l.loadedLineCount--,l.instanceLine=m,l.loadedLineCount<=0&&(l._content.meshes.updateMatrixWorld(!0),u&&u(l),i._deleteLineNodeBuffer(n,l))}},{key:"loadLineMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=e.pbfNodeInfo,o=e.primitive,l=e.treeNode,u=e.onTileContentReadyCallback;if(!l.checkIfProcessingTileAvailable())return void i._deleteLineNodeBuffer(n,l);var c=i._createBatchGeometry(i,r,n,a,o),h=new s.LineSegmentsEx(c,[i.wireframeMaterial]);h.applyMatrix(a.matrix),h.alive=!0,h.name=a.nodeIndexId,h.tileId=a.tileId,h.indexGroups=a.indexInfos,r.addLineNodeById(h.tileId,a.nodeIndexId,h),a.userIdMapIndex&&r.addUserIdMapIndices(a.userIdMapIndex,h.name),h.visible=r.isBorderLineVisible(),r.dealLineMeshCategoryVisible(h),l.content.meshes.add(h),h.databagId=l.content.meshes.databagId,--l.loadedLineCount<=0&&(l._content.meshes.updateMatrixWorld(!0),u&&u(l),i._deleteLineNodeBuffer(n,l))}},{key:"_deleteLineNodeBuffer",value:function(e,t){e.bufferData=null,e.bufferBlob=null,e.blobHeader=null,e.meshBlob=null,e.buffer=null;var i=t.lineBuffer;for(var r in i)i[r].content=null}},{key:"_createBatchGeometry",value:function(e,t,i,r,n){var a=new THREE.BufferGeometry,o=i.meshBlob,s=i.bufferData,l=e._getAccVertexArray(e,o,s,n),u=e._getAccIndicesArray(e,o,s,n),c=e._getAccInfo(o,n.getAccIndices()),h=e._getAccInfo(o,n.getAccVertices());return r.vAccInfoStart=h.offset,r.iAccInfoStart=c.offset,r.iAccInfoCount=c.count,r=Object.assign(r,e._getSubNodeInfo(e,t,a,i,r,n)),a.addAttribute("position",new THREE.BufferAttribute(l,3)),a.setIndex(new THREE.BufferAttribute(u,1)),a}},{key:"loadLineGeometryBuffer",value:function(e,t,i,r,n,a,o,s){if(!a.checkIfProcessingTileAvailable())return void e._deleteLineNodeBuffer(i,a);var l=e._createBatchGeometry(e,t,i,r,n);a.geometry=l,a.indexGroups=r.indexInfos,a.matrix.copy(r.matrix),e._deleteLineNodeBuffer(i,a),o&&o()}}]),t}(s.BimTileMeshNodeParser);s.BimTileLineParser=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.taskRunner=new s.TaskRunner,this.bimtileMeshNodeParser=new s.BimTileMeshNodeParser(t),this.bimtileDracoParser=new s.BimTileDracoParser(t),this.bimtileLineParser=new s.BimTileLineParser(t),this.bimtilePointParser=new s.BimTilePointParser(t)}return _createClass(e,[{key:"destroy",value:function(){this.taskRunner=null}},{key:"parseBlobs",value:function(e,t,i){t.computeMeshNodeCount(e.batchMergeEnabled);var r=proto.BlockHeader.BlockType.BT_MESH;for(var n in t.buffer){var a=t.getBuffer(n);if(a.type==r){var o=a.content;o&&this.parseBlob(e,o,t,n,i)}}}},{key:"parseBlob",value:function(e,t,i,r,n){if(t){var a={};a.contentIndex=i.contentIndex,a.meshBlob=t;var o=t.getScenesList(),s=o.length;if(0!==s){var l=t.getBlobHeader(),u=l.getBufferBlockId(),c=e.tileReader.getBuffer(i,u,proto.BlockHeader.BlockType.BT_BUFFER);if(c){var h=c.getBuffer();a.buffer=c,a.bufferData=h,a.bufferId=l.getTileId()+"_"+r;var d=t.getNodesList();a.bufferId=l.getTileId()+"_"+r;for(var f=0;f<s;++f)for(var p=o[f].getNodesList(),m=p.length,v=0;v<m;++v){var g=d[p[v]],y={};y.nodeIndex=p[v];var M=new THREE.Matrix4;16==g.getMatrixList().length&&M.fromArray(g.getMatrixList()),y.matrix=i.matrix.clone().multiply(M),this.parseNode(e,a,g,y,i,n)}}}}}},{key:"parseNode",value:function(e,t,i,r,n,a){var o=t.meshBlob,s=i.getPrimitivesList(),l=s.length;if(i.getNodeType()!=proto.bimtile_pbf.Node.NodeType.NT_BATCHED_SUB_NODE)for(var u=0;u<l;u++){var c=s[u],h=o.getPrimitivesList()[c],d=null;h.getMode()===proto.bimtile_pbf.Primitive.PrimitiveMode.PM_TRIANGLES&&(r.mode=proto.bimtile_pbf.Primitive.PrimitiveMode.PM_TRIANGLES,d=h.getAccArchive()>=0?this.bimtileDracoParser:this.bimtileMeshNodeParser),h.getMode()===proto.bimtile_pbf.Primitive.PrimitiveMode.PM_LINES&&(r.mode=proto.bimtile_pbf.Primitive.PrimitiveMode.PM_LINES,d=this.bimtileLineParser),h.getMode()===proto.bimtile_pbf.Primitive.PrimitiveMode.PM_POINTS&&(r.mode=proto.bimtile_pbf.Primitive.PrimitiveMode.PM_POINTS,d=this.bimtilePointParser);var f={that:d,loader:e,meshBufferObject:t,pbfNodeInfo:r,primitive:h,treeNode:n,onTileContentReadyCallback:a};this.taskRunner.runTask(d.loadMesh,f,function(){})}}}]),e}();s.BimTileMeshBlobParser=e}(),function(){var e=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"parseBlobs",value:function(e,t,i){var r=proto.BlockHeader.BlockType.BT_LINE;t.computeLineNodeCount();for(var n in t.lineBuffer){var a=t.getLineBuffer(n);a.type==r&&a.content&&this.parseBlob(e,a.content,t,n,i)}}},{key:"parseBlob",value:function(e,t,i,r,n){var a={};a.contentIndex=i.getOutlineContentUrl(),a.meshBlob=t;var o=t.getScenesList(),s=o.length;if(0!==s){var l=t.getBlobHeader(),u=l.getBufferBlockId(),c=e.tileReader.getLineBuffer(i,u,proto.BlockHeader.BlockType.BT_BUFFER);if(c){var h=c.getBuffer();a.buffer=c,a.bufferData=h;var d=t.getNodesList(),f="line_"+i.contentId;a.bufferId=f+"_"+r;for(var p=0;p<s;++p)for(var m=o[p].getNodesList(),v=m.length,g=0;g<v;++g){var y=d[m[g]],M={};M.tileId=f,M.nodeIndex=m[g],M.nodeIndexId=i.contentId+"_"+r,M.lineTileId=f+"_"+M.nodeIndex;var E=new THREE.Matrix4;16==y.getMatrixList().length&&E.fromArray(y.getMatrixList()),M.matrix=i.matrix.clone().multiply(E),this.parseNode(e,a,y,M,i,n)}}}}},{key:"parseNode",value:function(e,t,i,r,n,a){for(var o=t.meshBlob,s=i.getPrimitivesList(),l=s.length,u=0;u<l;u++){var c=s[u],h=o.getPrimitivesList()[c];if((h.getAccVertices()<0||h.getAccIndices()<0)&&h.getAccArchive()<0)console.warn("invalid acc info");else if(h.getMode()===proto.bimtile_pbf.Primitive.PrimitiveMode.PM_LINES){r.mode=proto.bimtile_pbf.Primitive.PrimitiveMode.PM_LINES;var d=this.bimtileLineParser,f=n.contentTypeBufferOnly?d.loadLineGeometryBuffer:!0===n.contentTypeInstance?d.loadLineInstanceMesh:d.loadLineMesh;this.taskRunner.runTask(f,{that:d,loader:e,meshBufferObject:t,pbfNodeInfo:r,primitive:h,treeNode:n,onTileContentReadyCallback:a},function(){})}}}}]),t}(s.BimTileMeshBlobParser);s.BimTileOutlineBlobParser=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.loader=t,this.reader=t.reader,this.selectedMaterial=new s.MeshBasicClipMaterial({color:1170103,opacity:1,transparent:!1})}return _createClass(e,[{key:"destroy",value:function(){}},{key:"travelLineMesh",value:function(e,t,i){}},{key:"updatePickingMeshes",value:function(){}}]),e}();s.BimTileWireframeManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.loader=t,this.reader=t.reader,this.batchMeshIdNodeMap={},this.noUserDataMeshNodeInfoMap={}}return _createClass(e,[{key:"destroy",value:function(){this.batchMeshIdNodeMap=null,this.noUserDataMeshNodeInfoMap=null}},{key:"addMeshIdMap",value:function(e,t){this.batchMeshIdNodeMap[e]||(this.batchMeshIdNodeMap[e]=t)}},{key:"getMeshNodeById",value:function(e){return this.batchMeshIdNodeMap[e]}},{key:"disposeMeshNodeById",value:function(e){this.batchMeshIdNodeMap[e]=null}},{key:"addNoUserDataMeshNodeInfo",value:function(e,t,i){void 0===this.noUserDataMeshNodeInfoMap[e]&&(this.noUserDataMeshNodeInfoMap[e]={}),this.noUserDataMeshNodeInfoMap[e][t]=i}},{key:"patchMeshNodeInfo",value:function(e,t,i){var r=this.loader.getDescriptor().getAllNodeInfos()[e];if(r)for(var n=r.length,a=0;a<n;++a){var o=r[a];o.nodeId==t&&(o.parent=i.parent,o.materialId=i.materialId,o.matrix=i.matrix,o.explodeMatrix&&(o.matrix=i.matrix.clone(),o.matrix.multiplyMatrices(o.explodeMatrix,o.matrix)),o.type=i.type,o.cellId=null)}}},{key:"recoverNodeInfo",value:function(){for(var e in this.noUserDataMeshNodeInfoMap){var t=this.noUserDataMeshNodeInfoMap[e];for(var i in t)this.patchMeshNodeInfo(e,i,t[i])}this.noUserDataMeshNodeInfoMap=null}},{key:"getGeometryBuffersByNodeInfo",value:function(e,t,i,r){var n=this.getMeshNodeById(e);if(n&&!1!==n.visible)for(var a=n.geometry,o=a.getIndex().array,s=a.getAttribute("position").array,l=a.getAttribute("uv"),u=l?l.array:null,c=n.indexGroups,h=c[t],d=0,f=h.length;d<f;++d)!function(t,n){var a=h[t],l=a.indexStart,c=a.indexStart+a.indexCount,d=o.slice(l,c),f=null;u&&(l=a.positionStart/3*2,c=l+a.positionCount/3*2,f=u.slice(l,c)),l=a.positionStart,c=a.positionStart+a.positionCount;var p=s.slice(l,c);l/=3,d.forEach(function(e,t,i){i[t]-=l}),r.push({isLines:!1,databagId:i,nodeId:e,position:p,index:d,uv:f})}(d)}},{key:"updatePickingMeshes",value:function(e,t,i,r){var n=e.parent,a=this.getMeshNodeById(n);if(a&&a.indexGroups&&!1!==a.visible&&!1!==a.parent.visible&&(null==a.parent.parent||0!=a.parent.parent.visible)){var o=a.geometry,l=a.indexGroups,u=new THREE.BufferGeometry;u.addAttribute("position",o.getAttribute("position")),u.setIndex(o.getIndex());var c="LineSegmentsEx"===a.type?new THREE.LineSegments(u,s.MaterialUtil.DefaultMaterial):new THREE.Mesh(u,s.MaterialUtil.DefaultMaterial);c.name=a.name,c.frustumCulled=!1,c.renderOrder=0,c._indicesGroup=l,c.material=[i],c.matrix.copy(a.matrix),c.matrixAutoUpdate=!1;for(var h=l[t],d=0,f=h.length;d<f;++d){var p=h[d];c.geometry.addGroup(p.indexStart,p.indexCount,0),r.add(c)}}}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a,o,s){var l=a.parent,u=this.getMeshNodeById(l);if(u&&u.indexGroups&&"MeshEx"===u.type&&!1!==u.visible&&!1!==u.parent.visible)for(var c=u.indexGroups,h=u.matrix,d=c[r],f=0,p=d.length;f<p;++f){var m=function(r,l){var c=d[r];if(c.meshId!==a.nodeId)return"continue";var f=[];if(u.getIntersectionContours(t,c,f),0===f.length)return{v:void 0};var p=[];if(f.map(function(e){var t=[];e.map(function(e){e.applyMatrix4(h).applyMatrix4(o),i.containsPoint(e)&&t.push(e)}),t.length>0&&p.push(t)}),0===p.length)return{v:void 0};var m=u.material[0].color,v={red:parseInt(255*m.r),green:parseInt(255*m.g),blue:parseInt(255*m.b)};void 0===s[e][n]?s[e][n]={clippingContours:[p],colors:[v]}:(s[e][n].clippingContours.push(p),s[e][n].colors.push(v))}(f);switch(m){case"continue":continue;default:if("object"===(void 0===m?"undefined":_typeof(m)))return m.v}}}}]),e}();s.BimTileBatchedMeshManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.loader=t,this.reader=t.reader,this.instanceMeshIdNodeMap={},this.instanceInfoMap={},this.noUserDataInstanceNodeInfoMap={}}return _createClass(e,[{key:"destroy",value:function(){this.instanceMeshNodeMap=null,this.InstanceInfoMap=null,this.noUserDataInstanceNodeInfoMap=null}},{key:"addInstanceInfo",value:function(e,t){this.instanceInfoMap[e]||(this.instanceInfoMap[e]=t)}},{key:"getInstanceInfoById",value:function(e){return this.instanceInfoMap[e]}},{key:"addInstanceMeshIdMap",value:function(e,t,i,r){this.instanceMeshIdNodeMap[e]&&this.instanceMeshIdNodeMap[e][t]||(void 0===this.instanceMeshIdNodeMap[e]&&(this.instanceMeshIdNodeMap[e]={},this.instanceMeshIdNodeMap[e][t]={}),void 0===this.instanceMeshIdNodeMap[e][t]&&(this.instanceMeshIdNodeMap[e][t]={}),this.instanceMeshIdNodeMap[e][t].mesh=i,this.instanceMeshIdNodeMap[e][t].matrix=r)}},{key:"getInstanceMeshNodeById",value:function(e){return this.instanceMeshIdNodeMap[e]}},{key:"disposeInstanceMeshNodeById",value:function(e){this.instanceMeshIdNodeMap[e]=null,delete this.instanceMeshIdNodeMap[e]}},{key:"addNoUserDataInstanceNodeInfo",value:function(e,t,i){void 0===this.noUserDataInstanceNodeInfoMap[e]&&(this.noUserDataInstanceNodeInfoMap[e]={}),this.noUserDataInstanceNodeInfoMap[e][t]=i}},{key:"recoverNodeInfo",value:function(){for(var e in this.noUserDataInstanceNodeInfoMap){var t=this.noUserDataInstanceNodeInfoMap[e];for(var i in t)this.patchInstanceNodeInfo(e,i,t[i])}this.noUserDataInstanceNodeInfoMap=null}},{key:"patchInstanceNodeInfo",value:function(e,t,i){var r=this.loader.getDescriptor().getAllNodeInfos()[e];if(r)for(var n=r.length,a=0;a<n;++a){var o=r[a];if(o.nodeId===i.bufferId&&o.index===i.instanceIndex){o.geometryId=t,o.parent=t,o.matrix=i.entityMatrix,o.explodeMatrix&&(o.matrix=i.entityMatrix.clone(),o.matrix.multiplyMatrices(o.explodeMatrix,o.matrix)),o.type=i.type,o.cellId=null;break}}}},{key:"getGeometryBuffersByNodeInfo",value:function(e,t,i,r){var n=this.getInstanceMeshNodeById(e);if(n)for(var a in n){var o=n[a].matrix,l=n[a].mesh;if(!s.TilesUtil.isInstanceNodeInVisible(l)){var u=t.matrix.clone();u=u.multiply(o);var c=l.geometry,h=c.getAttribute("uv");r.push({isLines:isLines,databagId:i,nodeId:e,position:c.getAttribute("position").array,index:c.getIndex().array,matrix:u,uv:h?h.array:null})}}}},{key:"updatePickingMeshes",value:function(e,t,i,r){var n=this.getInstanceMeshNodeById(e);if(n)for(var a in n){var o=n[a].matrix,l=n[a].mesh;if(!s.TilesUtil.isInstanceNodeInVisible(l)){var u=i.clone().multiply(o),c=l.geometry,h=new THREE.BufferGeometry;h.addAttribute("position",c.getAttribute("position")),h.setIndex(c.getIndex());var d=new THREE.Mesh(h,t);d.name=l.name,d.frustumCulled=!1,d.renderOrder=0,d.matrix.copy(u),d.matrixAutoUpdate=!1,r.add(d)}}}},{key:"calculateClippingContours",value:function(e,t,i,r,n,a,o,l){var u=this.getInstanceMeshNodeById(a.nodeId);if(u){for(var c in u){var h=function(r){var c=u[r].matrix,h=u[r].mesh;if(s.TilesUtil.isNodeInVisible(h))return"continue";var d=a.matrix.clone();d=d.multiply(c);var f=[],p={matrix:d};h.getIntersectionContours(t,p,f,!0);var m=[];f.map(function(e){var t=[];e.map(function(e){e.applyMatrix4(o),i.containsPoint(e)&&t.push(e)}),t.length>0&&m.push(t)});var v=h.material[0].color,g={red:parseInt(255*v.r),green:parseInt(255*v.g),blue:parseInt(255*v.b)};if(0===m.length)return{v:void 0};void 0===l[e][n]?l[e][n]={clippingContours:[m],colors:[g]}:(l[e][n].clippingContours.push(m),l[e][n].colors.push(g))}(c);switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":_typeof(h)))return h.v}}}}},{key:"updateInstanceClipping",value:function(e){var t=e?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;for(var i in this.instanceMeshIdNodeMap){var r=this.instanceMeshIdNodeMap[i];for(var n in r){var a=r[n],o=a.mesh.geometry,l=o.getAttribute("vClipping").array;l&&(l.fill(t),o.getAttribute("vClipping").needsUpdate=!0)}}}}]),e}();s.BimTileInstancedMeshManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.batchedMeshIdNodeMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.batchedMeshIdNodeMap=null}},{key:"addLineNodeById",value:function(e,t,i){this.batchedMeshIdNodeMap[e]||(this.batchedMeshIdNodeMap[e]={}),this.batchedMeshIdNodeMap[e][t]=i}},{key:"getLineNodeById",value:function(e,t){return this.batchedMeshIdNodeMap[e][t]}},{key:"disposeLineNodeById",value:function(e){this.batchedMeshIdNodeMap[e]=null,delete this.batchedMeshIdNodeMap[e]}},{key:"travelLineMesh",value:function(e,t,i){var r=this.batchedMeshIdNodeMap[e];if(r)for(var n in r){var a=r[n],o=a.indexGroups;o[t]&&(s.TilesUtil.isNodeInVisible(a)||i&&i(a))}}},{key:"updatePickingMeshes",value:function(e,t,i,r){var n=this;this.travelLineMesh(e,t,function(e){var a=e.geometry,o=e.indexGroups,s=new THREE.BufferGeometry;s.addAttribute("position",a.getAttribute("position")),s.setIndex(a.getIndex());var l=new THREE.LineSegments(s,n.selectedMaterial);l.name=e.name,l.frustumCulled=!1,l.renderOrder=0,l._indicesGroup=o,l.material=[i],l.matrix.copy(e.matrix),l.matrixAutoUpdate=!1;for(var u=o[t],c=0,h=u.length;c<h;++c){var d=u[c];l.geometry.addGroup(d.indexStart,d.indexCount,0),r.add(l)}})}},{key:"enableWireFrame",value:function(e){for(var t in this.batchedMeshIdNodeMap){var i=this.batchedMeshIdNodeMap[t];for(var r in i)i[r].visible=e}}},{key:"dealLineMeshCategoryVisible",value:function(e){var t=this.loader.getDescriptor().getAllNodeInfos(),i=e.indexGroups,r={};for(var n in i){var a=t[n][0].userData;s.TilesUtil.matchLineCategory(a,this.loader.borderLineCategory)&&(r[n]=i[n])}e.geometry.clearGroups();var o=s.TilesUtil.nodeIndexGroupsSort(r),l=o.length;if(!(l<1)){for(var u=o[0].indexGroup.indexStart,c=o[0].indexGroup.indexCount,h=1;h<l;++h){var d=o[h].indexGroup;d.indexStart===o[h-1].indexGroup.indexStart+o[h-1].indexGroup.indexCount?c+=d.indexCount:(e.geometry.addGroup(u,c,0),u=d.indexStart,c=d.indexCount)}e.geometry.addGroup(u,c,0)}}},{key:"recoverLineNode",value:function(){for(var e in this.batchedMeshIdNodeMap){var t=this.batchedMeshIdNodeMap[e];for(var i in t){var r=t[i];this.dealLineMeshCategoryVisible(r),r.visible=!0}}}}]),t}(s.BimTileWireframeManager);s.BimTileBatchedWireframeManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.instanceMeshIdNodeMap={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.instanceMeshIdNodeMap=null}},{key:"addInstanceLineNodeById",value:function(e,t){this.instanceMeshIdNodeMap[e]=t}},{key:"getInstanceLineNodeById",value:function(e){return this.instanceMeshIdNodeMap[e]}},{key:"disposeInstanceLineNodeById",value:function(e){this.instanceMeshIdNodeMap[e]=null,delete this.instanceMeshIdNodeMap[e]}},{key:"travelLineMesh",value:function(e,t,i){var r=this.instanceMeshIdNodeMap[e];r&&(s.TilesUtil.isInstanceNodeInVisible(r)||i&&i(r))}},{key:"updatePickingMeshes",value:function(e,t,i,r,n){var a=this;this.travelLineMesh(e,t,function(e){var t=e.geometry,i=new THREE.BufferGeometry;i.addAttribute("position",t.getAttribute("position")),i.setIndex(t.getIndex());var o=new THREE.LineSegments(i,a.selectedMaterial);o.name=e.name,o.frustumCulled=!1,o.renderOrder=1,o.matrix.copy(r),o.matrixAutoUpdate=!1,n.add(o)})}},{key:"enableWireFrame",value:function(e){for(var t in this.instanceMeshIdNodeMap)this.instanceMeshIdNodeMap[t].visible=e}},{key:"recoverLineNode",value:function(){for(var e in this.instanceMeshIdNodeMap){var t=this.instanceMeshIdNodeMap[e],i=t.name,r=this.loader.getInstanceInfoById(i);t.visible=!0;var n=r.length,a=new Array(n),o=r[0].userDataID,l=s.TilesUtil.praseUserData(this.loader.tileReader.getUserDataByIndex(o));s.TilesUtil.matchLineCategory(l,this.loader.borderLineCategory)?a.fill(s.EnumInstanceState.NONE):a.fill(s.EnumInstanceState.HIDDEN);var u=new THREE.InstancedBufferAttribute(new Float32Array(a),1,1);t.geometry.addAttribute("vState",u)}}}]),t}(s.BimTileWireframeManager);s.BimTileInstancedWireframeManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.materialMap={},this.globalMaterial=new THREE.MeshBasicMaterial({color:9143938}),this.settingMaterialPara={},this.materialsOpacity=null,this.viewer=t.viewer}return _createClass(e,[{key:"destroy",value:function(){this.materialMap=null,this.settingMaterialPara={}}},{key:"getMaterial",value:function(e,t,i,r){var n=e.filter.model,a=-1===t.materialBlockId?t.materialBlockId:t.bufferId+"+"+t.materialBlockId;a=t.renderInstance?a+"_instance":a+"_standard";var o=i.getMaterialId(),l=a+"_"+o,u=this.getMaterialByName(l);if(s.Utils.isDefined(u))return void r(u);var c=t.bufferData,h=t.material,d=void 0!=t.renderInstance&&!0===t.renderInstance,f=h.getMaterialsList(),p=f[o],m=this._createMaterial(l,p,d,i.hasLightMap);if(m.srcOpacity=m.opacity,null!=this.materialsOpacity&&(m.opacity=m.srcOpacity*this.materialsOpacity,m.transparent=!(m.opacity>1-s.TilesUtil.TWO_ACCURACY)),n.localClippingMode&&(m.clippingPlanes=n.localClippingPlanes,m.innerClipping=n.innerClippingMode,m.orthoViewProjMatrix.copy(n.innerClippingMatrix)),this.materialMap[l]=m,d){var v=s.MaterialUtil.getMaterialParameters(m),g=s.MaterialUtil.createInstanceMaterial(v,!0);!0===m.transparent?g.transparent=!1:g.transparent=!0,g.defines.INSTANCE_STATE_SECONDARY="";var y=l+"_second";this.materialMap[y]=g}var M={currentTextureParm:p.getTexturesList(),totalTextureParm:h.getTexturesList(),totalImageParm:h.getImagesList(),meshBufferData:c};this._createTextureForMaterial(e.rootUrl,m,M).then(function(e){r(e)})}},{key:"getLineMaterial",value:function(e,t,i){
var r=i.getMaterialId(),n=-1===t.materialBlockId?t.materialBlockId:t.bufferId+"+"+t.materialBlockId,a=n+"_line_"+r,o=this.materialMap[a];if(o)return o._referenceCount++,o;var s=(t.bufferData,t.material),l=s.getMaterialsList(),u=l[r];return this._createLineMaterial(e,a,u)}},{key:"dealMaterialParm",value:function(e){e.transparent=!(e.opacity>1-s.TilesUtil.TWO_ACCURACY),e.side=0===e.doubleSide?THREE.FrontSide:THREE.DoubleSide,e.originMetalness=e.metalness,e.originRoughness=e.roughness,e.receiveIBL=0!=e.receiveIbl,e.light=!0!==e.hasLightMap,delete e.hasLightMap}},{key:"_createLineMaterial",value:function(e,t,i){var r=i.toObject(),n=new THREE.LineBasicMaterial({linewidth:1});n._imageByteSize=0,n.srcOpacity=n.opacity,null!=this.materialsOpacity&&(n.opacity=n.srcOpacity*this.materialsOpacity,n.transparent=!(n.opacity>1-s.TilesUtil.TWO_ACCURACY));var a=e.filter.model;return a.localClippingMode&&(n.clippingPlanes=a.localClippingPlanes,n.innerClipping=a.innerClippingMode,n.orthoViewProjMatrix.copy(a.innerClippingMatrix)),n.color.setHex(r.color),n.needsUpdate=!0,this.materialMap[t]=n,n._referenceCount=1,n}},{key:"_createMaterial",value:function(e,t,i,r){var n=t.toObject();n.hasLightMap=r,this.dealMaterialParm(n);var a=i?s.MaterialUtil.createInstanceMaterial(n,!0,n.receiveIBL&&s.GlobalData.IBL):s.MaterialUtil.createStandardMaterial(n,n.receiveIBL&&s.GlobalData.IBL);a.name=e;for(var o in this.settingMaterialPara)this._isIBLParams(o)&&!n.receiveIBL||a.hasOwnProperty(o)&&(a[o]=this.settingMaterialPara[o],void 0!==a.refreshUniforms&&a.refreshUniforms());return a}},{key:"_isIBLParams",value:function(e){return"A"==e||"B"==e||"C"==e||"D"==e||"E"==e||"F"==e||"IBLMaps"==e||"metalness"==e||"roughness"==e||"scale"==e||"iblFactor"==e}},{key:"_createTextureForMaterial",value:function(e,t,i){var r=this;return i=s.Utils.defaultValue(i,{}),new Promise(function(n,a){var o=i.currentTextureParm;s.Utils.isDefined(o)||n();for(var l=i.totalTextureParm,u=i.totalImageParm,c=[],h=0;h<o.length;++h)!function(n){var a=new Promise(function(a,c){var h=o[n],d=l[h];(!s.Utils.isDefined(d)||d.getImage()<0)&&a();var f=u[d.getImage()],p=d.getAlpha(),m=p>0?proto.bimtile_pbf.Texture.TextureType.TT_ALPHA:d.getType(),v=f.getUrl(),g=".basis"==f.getType(),y=d.getName();if(v){var M=""+e+v;y=y||s.Utils.getEncodedString(M),r.viewer.TextureManager.getTextureFromURL(M,y,g).then(function(e){r._setTexture(m,t,e),a()})}else if(f.getBufferId()>=0){var E=r._getImageBuffer(i.meshBufferData,f);y=y||s.Utils.getEncodedString(""+e+t.name+"_"+n+"_texture"),r.viewer.TextureManager.getTextureFromBuffer(E,y,g).then(function(e){r._setTexture(m,t,e),a()}).catch(function(){c()})}else a()});c.push(a)}(h);Promise.all(c).then(function(){n(t)})})}},{key:"_setTexture",value:function(e,t,i){var r=s.MaterialUtil.getImageByteSize(i.image);switch(t._imageByteSize+=r,e){case proto.bimtile_pbf.Texture.TextureType.TT_DIFFUSE:t.map=i;break;case proto.bimtile_pbf.Texture.TextureType.TT_ALPHA:t.useAlphaMap=!0,t.map=i,t.transparent=!0,t.alphaTest=.01;break;case proto.bimtile_pbf.Texture.TextureType.TT_RELIEF:case proto.bimtile_pbf.Texture.TextureType.TT_BUMP:t.bumpMap=i;break;case proto.bimtile_pbf.Texture.TextureType.TT_LIGHT:t.lightMap=i,t.defines.USE_COMPONENT_LIGHTMAP="",t.lightMapIntensity=s.GlobalData.LightmapIntensity}if(t.refreshUniforms(),t.needsUpdate=!0,""===t.defines.USE_INSTANCE){var n=t.name+"_second",a=this.materialMap[n];if(!a)return;i._referenceCount++,this._setTexture(e,a,i)}}},{key:"_updateIBL",value:function(e){if(s.GlobalData.IBL){this.settingMaterialPara.IBLMaps=e.manager.scene.IBLMaps,this.settingMaterialPara.iblFactor=10;var t=e.manager.viewer.getIBLManager(),i=t.IBLParams;for(var r in i)this.settingMaterialPara[r]=i[r]}}},{key:"_getImageBuffer",value:function(e,t){var i=t.getByteOffset(),r=t.getByteLength();return e.slice(i,i+r).buffer}},{key:"delayUpdateTexturePkgMapping",value:function(){}},{key:"updateMaterialsValue",value:function(e,t,i,r){this.settingMaterialPara[t]=i;var n=this.materialMap;for(var a in n){var o=n[a];if(o&&o.hasOwnProperty(t)){if(r&&0==o.receiveIBL)continue;o[t]=i,void 0!==o.refreshUniforms&&o.refreshUniforms(),o.needsUpdate=!0}}}},{key:"changeAllMaterials",value:function(e,t){var i=this.materialMap;for(var r in i)if(i.hasOwnProperty(r)){var n=i[r];if(!n.receiveIBL)continue;var a,o=s.MaterialUtil.getMaterialParameters(n);""!=n.defines.USE_INSTANCE&&""!=n.defines.USE_INSTANCE_NORMAL||(o.defines=n.defines),t?(delete o.textureColor,delete o.pureColor,delete o.imageFade,o.lights=!0,a=new w.IBLMaterial(o),a.type="IBL",a.refreshUniforms()):(delete o.iblProbe,o.lights=!e.lightmap,a=s.MaterialUtil.createStandardMaterial(o),a.roughness=o.originRoughness,a.metalness=o.originMetalness,a.refreshUniforms()),a.name=r,i[r]=a,o=null}}},{key:"setMaterialsOpacity",value:function(e){this.materialsOpacity=e;for(var t in this.materialMap){var i=this.materialMap[t];i.opacity=i.srcOpacity*this.materialsOpacity,i.transparent=!(i.opacity>1-s.TilesUtil.TWO_ACCURACY)}}},{key:"disposeMaterial",value:function(e){return!--e._referenceCount&&(e.dispose(),this._disposeTextures(e),delete this.materialMap[e.name],e=null,!0)}},{key:"_disposeTextures",value:function(e){s.Utils.isDefined(e.map)&&(this.viewer.TextureManager.disposeTexture(e.map),e.map=null),s.Utils.isDefined(e.alphaMap)&&(this.viewer.TextureManager.disposeTexture(e.alphaMap),e.alphaMap=null),s.Utils.isDefined(e.bumpMap)&&(this.viewer.TextureManager.disposeTexture(e.bumpMap),e.bumpMap=null),s.Utils.isDefined(e.lightMap)&&(this.viewer.TextureManager.disposeTexture(e.lightMap),e.lightMap=null)}},{key:"getMaterialByName",value:function(e){var t=this.materialMap[e];return s.Utils.isDefined(t)?(t._referenceCount++,t):null}}]),e}();s.BimTileMaterialManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.Utils.defaultValue(e,{})));return i.pointAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Uint8Array",uv:"Float32Array"},i.pointSize=.5,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.taskRunner=null,this.pointAttributeTypes=null}},{key:"parseBlobs",value:function(e,t,i){t.computePointNodeCount();var r=proto.BlockHeader.BlockType.BT_POINT;for(var n in t.buffer){var a=t.getBuffer(n);if(a.type==r){var o=a.content;o&&this.parseBlob(e,o,t,n,i)}}}},{key:"parseBlob",value:function(e,t,i,r,n){if(t){var a={};a.pointBlob=t;if(0!==t.getPointsList().length){var o=t.getBlobHeader();(o.getTranslationList().length>0||o.getMatrixList().length>0)&&console.log("Translation"),a.blobHeader=o;var s=o.getBufferBlockId(),l=e.tileReader.getBuffer(i,s,proto.BlockHeader.BlockType.BT_BUFFER);if(a.bufferBlob=l,l){var u=l.getBuffer();a.bufferData=u;var c=l.getBlobHeader(),h=c.getBufferTypeList(),d=c.getBufferSizeList(),f=c.getBufferOffsetList(),p=f.length;i.loadedCount=p;for(var m=0;m<p;++m){var v=f[m],g=d[m],y=u.slice(v,v+g).buffer;h[m]===proto.BufferBlobHeader.BufferType.BT_UNKNOW&&this.taskRunner.push(this.loadDracoPoint,[this,e,a,y,i,n],function(){})}}}}}},{key:"loadDracoPoint",value:function(e,t,i,r,n,a,o){s.TilesUtil.getDracoLoader().decodeDracoFile(r,function(r){r.attributes.color.normalized=!0,e.createMeshNode(t,i,n,r,a),o&&o()},void 0,e.pointAttributeTypes)}},{key:"loadMesh",value:function(e,t){var i=e.that,r=e.loader,n=e.meshBufferObject,a=(e.pbfNodeInfo,e.primitive),o=e.treeNode,s=e.onTileContentReadyCallback;if((a.getAccVertices()<0||a.getAccIndices()<0)&&a.getAccArchive()<0)return void console.warn("invalid acc info");if(!o.checkIfProcessingTileAvailable())return this._deleteNodeBuffer(n,o),void(t&&t());var l=new THREE.BufferGeometry,u=n.meshBlob,c=n.bufferData,h=i._getAccVertexArray(i,u,c,a),d=i._getAccIndicesArray(i,u,c,a);l.addAttribute("position",new THREE.BufferAttribute(h,3)),l.setIndex(new THREE.BufferAttribute(d,1)),i.createMeshNode(r,n,o,l,s),t&&t()}},{key:"createMeshNode",value:function(e,t,i,r,n){if(!i.checkIfProcessingTileAvailable())return void this._deleteNodeBuffer(t,i);var a=new THREE.PointsMaterial({size:this.pointSize,vertexColors:THREE.VertexColors}),o=new THREE.Points(r,a);o.name=i._contentIndex,i.content.meshes.add(o),--i.loadedCount<=0&&(n&&n(i),i.contentState=s.TileContentState.READY,i.content.meshes.matrix=i.matrix,i.content.meshes.updateMatrixWorld(),this._deleteNodeBuffer(t,i))}},{key:"_deleteNodeBuffer",value:function(e,t){e.bufferData=null,e.bufferBlob=null,e.blobHeader=null,e.pointBlob=null;var i=t.buffer;for(var r in i)i[r].content=null}}]),t}(s.BimTileMeshParser);s.BimTilePointParser=e}(),function(){function e(e,t,i,r,n,a){d(e,t[i],r,n,a);var o=t[i].meshMaterial,l=o.name+"_second",u=a.materialManager.getMaterialByName(l),c=new s.MeshEx(e,[o,u]);c.alive=!0,c.frustumCulled=!1,c.applyMatrix(n.matrix);var h=t[i].meshInfo;c.name=n.nodeIndexId,c.indexGroups=h.indexGroups,c.indexCount=h.iAccInfoCount,c.databagId=n.content.meshes.databagId,c.isInstanceMeshNode=!0,n.initializePreObject(),n.content.meshes.add(c);var f=t[i].meshInfo.matrixRoot;a.addInstanceMeshIdMap(n.nodeIndexId,i,c,f),a.addInstanceInfo(n.nodeIndexId,r),a.renderableCount++,function(){var t={id:n.nodeId,bufferGeometry:e,material:[o,u],node:n,instance:!0,pbfNodeInfo:{nodeIndexId:n.nodeIndexId,databagId:n.content.meshes.databagId,indexGroups:h.indexGroups,indexCount:h.iAccInfoCount,instanceInfo:n.instanceInfo}};n._tileset.geometryManager.addGeometryById(n.nodeId,t)}()}function t(t,i,r,n){for(var a=0;a<t.length;++a){e(h(t[a],!1),t,a,n,i,r)}}function i(t,i,r,n){for(var a=0;a<n.length;++a)for(var o=0;o<t.length;++o){var s=h(t[o],!0);e(s,t,o,n,i,r)}}function r(e,t){for(var i={column0:[],column1:[],column2:[],column3:[]},r=0;r<e.length;++r){var n=e[r].entityMatrix.clone();t&&(n=n.multiply(t));var a=n.elements;i.column0.push(a[0],a[1],a[2]),i.column1.push(a[4],a[5],a[6]),i.column2.push(a[8],a[9],a[10]),i.column3.push(a[12],a[13],a[14])}for(var o=[],s=0;s<4;++s){var l=i["column"+s.toString()],u=new THREE.InstancedBufferAttribute(new Float32Array(l),3,1);o.push(u)}return o}function n(e,t){for(var i=[],r=0;r<t;++r){var n=void 0!=e.opacity?e.opacity:1;i.push(e.r,e.g,e.b,n)}return new THREE.InstancedBufferAttribute(new Float32Array(i),4,1)}function a(e){for(var t=s.MaterialUtil.DefaultWireframeColor,i=[],r=0;r<e;++r)i.push(t.color.r,t.color.g,t.color.b,t.opacity);return new THREE.InstancedBufferAttribute(new Float32Array(i),4,1)}function o(e,t){var i=new Array(e);return i.fill(t),new THREE.InstancedBufferAttribute(new Float32Array(i),1,1)}function l(e){var t=new Array(e);return t.fill(s.EnumInstanceState.NONE),new THREE.InstancedBufferAttribute(new Float32Array(t),1,1)}function u(e,t){var i=e.length,r=new Array(i),n=e[0].userData;return s.TilesUtil.matchLineCategory(n,t.borderLineCategory)?r.fill(s.EnumInstanceState.NONE):r.fill(s.EnumInstanceState.HIDDEN),new THREE.InstancedBufferAttribute(new Float32Array(r),1,1)}function c(e){for(var t={column0:[],column1:[],column2:[]},i=new THREE.Matrix3,r=0;r<e;++r){var n=i.elements;t.column0.push(n[0],n[1],n[2]),t.column1.push(n[3],n[4],n[5]),t.column2.push(n[6],n[7],n[8])}for(var a=[],o=0;o<3;++o){var s=(o.toString(),t["column"+o.toString()]),l=new THREE.InstancedBufferAttribute(new Float32Array(s),3,1);a.push(l)}return a}function h(e,t){var i=null;return i=t?new THREE.BufferGeometry:new THREE.InstancedBufferGeometry,e.normal&&i.addAttribute("normal",e.normal),i.addAttribute("position",e.position),e.uv&&i.addAttribute("uv",e.uv),i.setIndex(e.index),i.clearGroups(),i.groups.push({start:0,count:e.meshInfo.iAccInfoCount,materialIndex:0}),i.groups.push({start:0,count:e.meshInfo.iAccInfoCount,materialIndex:1}),i}function d(e,t,i,h,d){for(var f=d.filter.model,p=f.localClippingMode?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE,m=r(i,t.meshInfo.matrixRoot),v=0;v<m.length;++v)e.addAttribute("mcol"+v.toString(),m[v]);for(var g=c(i.length),y=0;y<g.length;++y)e.addAttribute("muvCol"+y.toString(),g[y]);var M=n(t.meshMaterial.color,i.length);e.addAttribute("aColor",M);var E=l(i.length);e.addAttribute("vState",E);var b=l(i.length);e.addAttribute("vState2",b);var x=o(i.length,p);if(e.addAttribute("vClipping",x),h.instanceLine){var I=h.instanceLine.geometry,T=a(i.length);I.addAttribute("aColor",T);for(var w=r(i),C=0;C<w.length;++C)I.addAttribute("mcol"+C.toString(),w[C]);var S=u(i,h);I.addAttribute("vState",S),d.addInstanceLineNodeById(h.instanceLine.tileId,h.instanceLine)}}var f=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"attachToNode",value:function(e,r,n,a,o){void 0!=o.renderDirectly&&!0===o.renderDirectly?i(e,r,n,a):t(e,r,n,a)}}]),e}();s.InstanceRenderManager=f}();var X=function(){function e(t){_classCallCheck(this,e),this._loader=t,this._entityMap={},this._waitingTaskMap={}}return _createClass(e,[{key:"destroy",value:function(){this._entityMap=null,this._waitingTaskMap=null}},{key:"loadArrayBuffer",value:function(e,t,i){var r=this;return new Promise(function(n,a){var s=r._entityMap[e];if(void 0!==s)if("loaded"===s.status){var l=s.geoArrayBuffer;n(l)}else if("loading"===s.status){var u=function(e){n(e)};r._waitingTaskMap[e].push(u)}else"failed"===s.status&&a("load entity failed");else{var c=function(e){n(e)};r._entityMap[e]={status:"loading",geoArrayBuffer:null},r._waitingTaskMap[e]=[c];o(t+e,i).then(function(t){r._entityMap[e].geoArrayBuffer=t,r._entityMap[e].status="loaded";for(var i=r._waitingTaskMap[e],n=0;n<i.length;++n)i[n](t);r._waitingTaskMap[e]=null}).catch(function(){r._entityMap[e].status="failed",r._waitingTaskMap[e]=null})}})}}]),e}();s.SharedGeometryLoader=X,function(){function e(e,t,i,r,n){var a=i.userID,o=r,s={bufferId:r,instanceIndex:n,entityMatrix:i.entityMatrix,type:proto.bimtile_pbf.Node.NodeType.NT_BATCHED_SUB_NODE};if(e.disableUserData)return void e.addNoUserDataInstanceNodeInfo(a,o,s);e.patchInstanceNodeInfo(a,o,s)}function t(e,t,r,n){return new Promise(function(a,o){t.loadArrayBufferImmediately(e,function(e){r.checkIfProcessingTileAvailable()||i(e,t,r,n).then(function(e){a(e)}).catch(function(e){o(e)})})})}function i(e,t,i,n){return new Promise(function(o,l){var u=r(e,t.tileReader);u.contentIndex=i.contentIndex;var c=new s.BimTileInstanceMeshBlobParser({_delayLoadTexture:null,renderDirectly:n,materialManager:t.materialManager});c.parse(t,u).then(function(){var e=a(c);c.destroy(),o(e)}).catch(function(e){l(e)})})}function r(e,t){var i={},r={node:i,type:proto.bimtile_pbf.BlockHeader.BlockType.BT_MESH};return t.parseBlock(e,r),i}function n(t,i,r,n){var a=r.getBlobHeader(),o=new THREE.Matrix4,l=[],u=a.getMatrixList();16===u.length&&o.fromArray(u);for(var c=r.getInstancesList(),h=n,d=0;d<c.length;++d){var f=c[d],p=new THREE.Matrix4,m=f.getMatrixList();16===m.length&&p.fromArray(m),p.multiplyMatrices(o,p);var v=f.getUserId();i.userIndexMap[v]=!0;var g=f.getUserdataId(),y=s.TilesUtil.praseUserData(t.tileReader.getUserDataByIndex(g)),M={userID:v,userDataID:g,userData:y,entityMatrix:p};l.push(M),t.getDescriptor().getReferencedMeshBufferById(h)||e(t,f,M,h,d)}return t.getDescriptor().cacheReferencedMeshBufferData(h,{}),l}function a(e){var t=[],i=!0,r=!1,n=void 0;try{for(var a,s=Object.entries(e._geoBuffers)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)for(var l=a.value,u=_slicedToArray(l,2),c=(u[0],u[1]),h=c,d=0;d<h.length;++d)if(h[d].meshInfo.useDraco){var f=o(h[d].bufferGeometry);f.meshInfo=h[d].meshInfo,f.meshMaterial=h[d].meshMaterial,t.push(f)}else t.push(h[d])}catch(e){r=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return t}function o(e){var t={},i=!0,r=!1,n=void 0;try{for(var a,o=Object.entries(e.attributes)[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value,l=_slicedToArray(s,2),u=l[0],c=l[1];t[u]=c}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}return t.index=e.index,t}var l=function(){function e(t){_classCallCheck(this,e),this._contentFolder,this._tileReader=new s.BimTileReader,this._delayLoadTexture=t.delayLoadTexture,this._entityMap={},this._renderDirectly=void 0!=t.renderDirectly&&!0===t.renderDirectly&&t.renderDirectly,this._sharedGeometryLoader=new s.SharedGeometryLoader,this.materialManager=t.materialManager}return _createClass(e,[{key:"destroy",value:function(){this._tileReader.destroy(),this._tileReader=void 0,this._sharedGeometryLoader.destroy(),this._sharedGeometryLoader=void 0,this.materialManager=null}},{key:"parseBlobs",value:function(e,t,i){t.isInstanceTile=!0,t.userIndexMap={};var r=proto.BlockHeader.BlockType.BT_INSTANCE;for(var n in t.buffer){var a=t.getBuffer(n);if(a.type==r){var o=a.content;o&&this.parseBlob(e,o,t,i)}}}},{key:"parseBlob",value:function(e,t,r,a){var o=this;if(t){var l=t.getBlobHeader(),u=l.getEntityUrl(),c=l.getTileId()+"_"+l.getBlockId(),h=n(e,r,t,c),d={entityID:u,entityInfoArray:h};r.instanceInfo=d,this._sharedGeometryLoader.loadArrayBuffer(u,r._contentFolder,e).then(function(t){r.checkIfProcessingTileAvailable()&&i(t,e,r,o._renderDirectly).then(function(t){r.checkIfProcessingTileAvailable()&&(r.nodeIndexId=c,s.InstanceRenderManager.attachToNode(t,r,e,h,{renderDirectly:o._renderDirectly}),a&&a(r))})}).catch(function(e){console.log(e)})}}},{key:"_getInstanceEntityByID",value:function(e,i,r){var n=this,a=this;return new Promise(function(o,s){t(e._contentFolder+r,i,e,n._renderDirectly).then(function(e){a._entityMap[r]=e,o(e)}).catch(function(e){s(e)})})}},{key:"contentFolder",set:function(e){this._contentFolder=e},get:function(){return this._contentFolder}}]),e}();s.BimTileInstanceParser=l}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this._geoBuffers={},this.materialManager=t.materialManager,this._renderDirectly=void 0!=t.renderDirectly&&!0===t.renderDirectly,this._parsePromiseArray=[]}return _createClass(e,[{key:"destroy",value:function(){this._parsePromiseArray=null,this._geoBuffers=null,this.materialManager=null}},{key:"parse",value:function(e,t){if(t&&t.buffer){var i=this._getBufferInfo(e,t);if(i){var r=i.meshBlob.getScenesList();if(r.length){this._traverseScenes(r,i);var n=this;return new Promise(function(e,t){Promise.all(n._parsePromiseArray).then(function(){n._parsePromiseArray=null,e()}).catch(function(){n._parsePromiseArray=null,t("some error when paser mesh block "+i.bufferBlockId)})})}}}}},{key:"_getBufferInfo",value:function(e,t){var i=t.buffer[0].content,r=i.getBlobHeader(),n=r.getBufferBlockId(),a=t.buffer[n].content;if(!a)return null;var o=a.getBuffer(),s={};return s.contentIndex=t.contentIndex,s.meshBlob=i,s.buffer=a,s.bufferData=o,s.bufferId=r.getTileId()+"_"+n,s.loader=e,s.node=t,s.renderInstance=!this._renderDirectly,s}},{key:"_traverseScenes",value:function(e,t){for(var i=e.length,r=0;r<i;++r){var n=e[r],a=n.getNodesList(),o=n.getName();this._traverseNodesPerScene(a,t,o)}}},{key:"_traverseNodesPerScene",value:function(e,t,i){for(var r=e.length,n=0;n<r;++n){var a=e[n],o=t.meshBlob.getNodesList()[a],s=new THREE.Matrix4;16==o.getMatrixList().length&&s.fromArray(o.getMatrixList());var l={};l.nodeIndex=a,l.matrix=s,l.sceneName=i,this._parseBufferNode(o,l,t)}}},{key:"_parseBufferNode",value:function(e,t,i){var r=e.getPrimitivesList();return e.getNodeType()!=proto.bimtile_pbf.Node.NodeType.NT_BATCHED_SUB_NODE&&this._traversePrimitivesPerNode(r,t,i),!0}},{key:"_traversePrimitivesPerNode",value:function(e,t,i){var r=this,n=e.length;if(n){++this._meshCount;var a=new Promise(function(a){for(var o=0,s=0;s<n;s++){var l=e[s],u=i.meshBlob.getPrimitivesList()[l];if(u.getMode()===proto.bimtile_pbf.Primitive.PrimitiveMode.PM_TRIANGLES){var c=null;c=u.getAccArchive()>=0?r._getBufferByPrimitive_Draco(u,t,i):r._getBufferByPrimitive(u,t,i),c&&function(){var e=r;c.then(function(t){++o,e._geoBuffers[t.meshInfo.sceneName]?e._geoBuffers[t.meshInfo.sceneName].push(t):e._geoBuffers[t.meshInfo.sceneName]=[t],o===n&&a()}).catch(function(e){console.log(e)})}()}}});return this._parsePromiseArray.push(a),a}}},{key:"_getBufferByPrimitive",value:function(e,t,i){if(!((e.getAccVertices()<0||e.getAccIndices()<0)&&e.getAccArchive()<0)&&(this._resetMeshBuffer(i),i.buffer)){var r=i.meshBlob,n=i.bufferData,a={nodeIndex:t.nodeIndex,matrixRoot:t.matrix,sceneName:t.sceneName,useDraco:!1},o=this._getNormal(r,n,a,e),s=this._getVertex(r,n,a,e),l=this._getIndex(r,n,a,e),u=this._getTextureCoord(r,n,a,e),c=this;return new Promise(function(t,r){c.materialManager.getMaterial(i.loader,i,e,function(e){if(e){var i={normal:o?o.normalBufferAttribute:null,position:s.vertexBufferAttribute,index:l.indexBufferAttribute,uv:u?u.uvBufferAttribute:null,meshMaterial:e,meshInfo:a};t(i)}else r("get material faild")})})}}},{key:"_getBufferByPrimitive_Draco",value:function(e,t,i){if(!((e.getAccVertices()<0||e.getAccIndices()<0)&&e.getAccArchive()<0)&&(this._resetMeshBuffer(i),i.buffer)){var r=i.meshBlob,n=i.bufferData,a=i.material,o=r.getBufferaccsList()[e.getAccArchive()],l=o.getByteOffset(),u=o.getByteLength(),c=n.slice(l,l+u).buffer,h=this,d={nodeIndex:t.nodeIndex,matrixRoot:t.matrix,sceneName:t.sceneName,useDraco:!0};return new Promise(function(t){s.TilesUtil.getDracoLoader().decodeDracoFile(c,function(r){a&&e.getMaterialId()>=0&&(r.clearGroups(),r.groups.push({start:0,count:r.index.count,materialIndex:0}),d.iAccInfoCount=r.index.count,h.materialManager.getMaterial(i.loader,i,e,function(e){t({bufferGeometry:r,meshMaterial:e,meshInfo:d})}))})})}}},{key:"_resetMeshBuffer",value:function(e){var t=e.meshBlob,i=t.getBlobHeader(),r=i.getBufferBlockId(),n=i.getMaterialBlockId(),a=i.getUserdataBlockId(),o=e.node.buffer[r].content,s=-1===n?e.loader.tileReader.globalMaterialBuffer:e.node.buffer[n].content;e.buffer=o,e.materialBlockId=n,e.material=s,e.userdataBlockId=a,o&&(e.bufferData=o.getBuffer())}},{key:"_getAccInfo",value:function(e,t){if(t<0)return{offset:0,length:0,count:0};var i=e.getBufferaccsList()[t];return{offset:i.getByteOffset(),length:i.getByteLength(),count:i.getCount(),valueType:i.getValueType()}}},{key:"_getNormal",value:function(e,t,i,r){var n=this._getAccInfo(e,r.getAccNormals());if(n.count>0){var a=t.slice(n.offset,n.offset+n.length).buffer,o=new Float32Array(a);i.nAccInfoStart=n.offset;return{normalBufferData:a,normalBufferAttribute:new THREE.BufferAttribute(o,3)}}return null}},{key:"_getVertex",value:function(e,t,i,r){var n=this._getAccInfo(e,r.getAccVertices()),a=t.slice(n.offset,n.offset+n.length).buffer,o=new Float32Array(a);return i.vAccInfoStart=n.offset,{vertexBufferData:a,vertexBufferAttribute:new THREE.BufferAttribute(o,3)}}},{key:"_getIndex",value:function(e,t,i,r){var n=this._getAccInfo(e,r.getAccIndices()),a=t.slice(n.offset,n.offset+n.length).buffer,o=null;switch(n.valueType){case proto.bimtile_pbf.BufferAcc.ComponentType.CT_USHORT:o=new Uint16Array(a);break;default:o=new Uint32Array(a)}return i.iAccInfoStart=n.offset,i.iAccInfoCount=n.count,{indexBufferData:a,indexBufferAttribute:new THREE.BufferAttribute(o,1)}}},{key:"_getTextureCoord",value:function(e,t,i,r){i.tAccInfoStart=0;var n=this._getAccInfo(e,r.getAccTexcoords());if(n.count>0){var a=t.slice(n.offset,n.offset+n.length).buffer;i.tAccInfoStart=n.offset;var o=new Float32Array(a);return{uvBufferData:a,uvBufferAttribute:new THREE.BufferAttribute(o,2)}}return null}},{key:"renderDirectly",get:function(){return this._renderDirectly}}]),e}();s.BimTileInstanceMeshBlobParser=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.reader=t,this.searchTreeBuffer={}}return _createClass(e,[{key:"destroy",value:function(){this.reader=null,this.searchTreeBuffer=null}},{key:"addSearchTreeBuffer",value:function(e,t,i){void 0===this.searchTreeBuffer[e]&&(this.searchTreeBuffer[e]={},this.searchTreeBuffer[e].searchTreeBlob=i,this.searchTreeBuffer[e].box=t)}},{key:"getSearchTreeBuffer",value:function(){return this.searchTreeBuffer}}]),e}();s.BimTileSearchTreeManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.descriptor=new s.ModelView.DefaultDescriptor,this.searchTreeManager=new s.BimTileSearchTreeManager,this.globalMaterialId=-1,this.globalUserdataId=-1,this.globalMaterialUrl=void 0,this.globalUserDataUrl=void 0,this.globalTileIdUrl=void 0,this.globalInstance=void 0,this.globalLodUrl=void 0,this.globalUserIDInfo=null,this.globalUserIDBuffer={},this.globalMaterialBuffer=null,this.globalUserdataBuffer=null,this.globalTileIdBuffer=null,this.referencedMeshCache={},this.tileIdMap={}}return _createClass(e,[{key:"destroy",value:function(){this.descriptor.destroy(),this.descriptor=null,this.searchTreeManager.destroy(),this.searchTreeManager=null,this.globalUserIDInfo=null,this.globalUserIDBuffer=null,this.globalMaterialBuffer=null,this.globalUserdataBuffer=null,this.globalMaterialUrl=void 0,this.globalUserDataUrl=void 0,this.globalTileIdUrl=void 0,this.globalInstance=void 0,this.referencedMeshCache=null,this.globalTileIdBuffer=null,this.tileIdMap=null}},{key:"getDescriptor",value:function(){return this.descriptor}},{key:"getBuffer",value:function(e,t,i){return-1===t&&i===proto.BlockHeader.BlockType.BT_MATERIAL?this.globalMaterialBuffer:-1===t&&i===proto.BlockHeader.BlockType.BT_USERDATA?this.globalUserdataBuffer:e.getBuffer(t).content}},{key:"getLineBuffer",value:function(e,t,i){return e.getLineBuffer(t).content}},{key:"_getUserIdBufferByIndex",value:function(e){for(var t=null,i=0,r=0,n=this.globalUserIDInfo.length,a=0;a<n;a++){var o=this.globalUserIDInfo[a];if(e>=i&&e<=o.maxUserIDIndex){t=o.globalUserIdUrl,r=e-i;break}i=o.maxUserIDIndex+1}return{buffer:this.globalUserIDBuffer[t],index:r}}},{key:"_getUserIdBufferById",value:function(e){var t=null,i=0;if(null!==this.globalUserIDInfo){for(var r=this.globalUserIDInfo.length,n=0;n<r;n++){var a=this.globalUserIDInfo[n];if(e<=a.maxUserIDString){t=a.globalUserIdUrl;break}i=a.maxUserIDIndex+1}return{buffer:this.globalUserIDBuffer[t],index:i}}}},{key:"getUserIdByIndex",value:function(e){if(this.globalUserIDInfo){var t=this._getUserIdBufferByIndex(e);if(void 0!==t.buffer)return t.buffer.getUserIdsList()[t.index]}}},{key:"getIndexByUserId",value:function(e){if(this.globalUserIDInfo){var t=this._getUserIdBufferById(e);if(void 0!==t&&void 0!==t.buffer){var i=function(t){return t===e},r=t.buffer.getUserIdsList().findIndex(i);if(-1!==r)return t.index+r}}}},{key:"getNodeIdsByUserIndex",value:function(e){if(this.globalUserIDInfo){var t=this._getUserIdBufferByIndex(e);if(void 0!==t.buffer){for(var i=t.buffer.getNodeIdsList(),r=t.index,n=r,a=i.length,o=[],s=n;s<a;++s){var l=i[s].getUserId();if(e===l){var u=i[s].getTileId(),c=i[s].getBlockId(),h=i[s].getNodeId(),d={tileId:u,blockId:c,nodeId:h};o.push(d)}if(l>e)break}return o}}}},{key:"getUserDataByIndex",value:function(e){if(this.globalUserdataBuffer){var t=this.globalUserdataBuffer.getUserdataArrayList()[e];if(void 0!==t){return t.getValuesStringMap().getEntryList()}}}},{key:"getUserDataStringMapByIndex",value:function(e,t){if(this.globalUserdataBuffer){return[this.globalUserdataBuffer.getBlobHeader().getKeysList()[e],this.globalUserdataBuffer.getBlobHeader().getValuesList()[t]]}}},{key:"getUserDataIndexListMapByString",value:function(e,t){if(this.globalUserdataBuffer){if(!(t instanceof Array))return t;var i={},r=this.getUserDataIndexKeyByString(e);i.key=r,i.value={};for(var n=0,a=t.length;n<a;++n){var o=this.getUserDataIndexValueByString(t[n]);o>-1&&(i.value[o]=!0)}return i}}},{key:"getUserDataIndexMapByString",value:function(e,t){if(this.globalUserdataBuffer)return{key:this.getUserDataIndexKeyByString(e),value:this.getUserDataIndexValueByString(t)}}},{key:"getUserDataIndexKeyByString",value:function(e){var t=this.globalUserdataBuffer.getBlobHeader().getKeysList(),i=function(t){return t===e};return t.findIndex(i)}},{key:"getUserDataIndexValueByString",value:function(e){var t=this.globalUserdataBuffer.getBlobHeader().getValuesList(),i=function(t){return t===e};return t.findIndex(i)}},{key:"parseSchemaProperties",value:function(e,t){if(void 0!==e){this.layerKey=e.layerKey,this.layerValue=e.layerValue,this.globalMaterialUrl=e.globalMaterial?t+e.globalMaterial.content.url:void 0,this.globalUserDataUrl=e.globalUserdata?t+e.globalUserdata.content.url:void 0,this.globalTileIdUrl=e.globalTileID?t+e.globalTileID.content.url:void 0,this.globalInstance=e.instanceTiles?t+e.instanceTiles.content.url:void 0,this.globalLodUrl=e.groupTiles?t+e.groupTiles.content.url:void 0;var i=e.globalUserID;i&&(i.map(function(e){e.globalUserIdUrl=t+e.content.url,delete e.content}),this.globalUserIDInfo=i)}}},{key:"parseBlock",value:function(e,t,i){var r=t.node,n=t.type,a=t.url,o=!0,l=0,u=[];r.bufferType=n;var c=0,h=e.byteLength;for(void 0===r.buffer&&(r.buffer={}),void 0===r.lineBuffer&&(r.lineBuffer={});c<h;){var d=e.slice(c,c+4),f=new Uint32Array(d)[0];c+=4;var p=new Uint8Array(e,c,f);c+=f;var m=proto.bimtile_pbf.BlockHeader.deserializeBinary(p);if(o&&m.getDataType()!=n)return void console.warn("check blob type failed");f=m.getDataSize(),s.TilesUtil.max_uncompressed_blob_size;var v=new Uint8Array(e,c,f);if(c+=f,m.getCompressType()!=proto.bimtile_pbf.BlockHeader.CompressType.CT_NULL)return void console.warn("uncompress data into buffer");var g=m.getDataType(),y={};switch(g){case proto.BlockHeader.BlockType.BT_INDEX:var M=proto.bimtile_pbf.SearchTreeBlob.deserializeBinary(v);y.type=g,y.content=M,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_USERID:var E=proto.bimtile_pbf.UserIDBlob.deserializeBinary(v);y.type=g,y.content=E,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_MATERIAL:var b=proto.bimtile_pbf.MaterialBlob.deserializeBinary(v);y.type=g,y.content=b,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_USERDATA:var x=proto.bimtile_pbf.UserdataBlob.deserializeBinary(v);y.type=g,y.content=x,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_BUFFER:var I=proto.bimtile_pbf.BufferBlob.deserializeBinary(v);y.type=g,y.content=I,n===proto.BlockHeader.BlockType.BT_LINE?r.lineBuffer[l]=y:r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_MESH:var T=proto.bimtile_pbf.MeshBlob.deserializeBinary(v);y.type=g,y.content=T,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_POINT:var w=proto.bimtile_pbf.PointBlob.deserializeBinary(v);y.type=g,y.content=w,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_TILEID:var C=proto.bimtile_pbf.TileIDBlob.deserializeBinary(v);y.type=g,y.content=C,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_INSTANCE:var S=proto.bimtile_pbf.InstanceBlob.deserializeBinary(v);y.type=g,y.content=S,r.buffer[l]=y;break;case proto.BlockHeader.BlockType.BT_LINE:var A=proto.bimtile_pbf.MeshBlob.deserializeBinary(v);y.type=g,y.content=A,r.lineBuffer[l]=y;break;default:return void console.warn("Parse unknow block faild! ")}o&&(o=!1),u[l]=l,l++}n===proto.BlockHeader.BlockType.BT_USERID&&(this.globalUserIDBuffer[a]=r.buffer[0].content),n===proto.BlockHeader.BlockType.BT_MATERIAL&&(this.globalMaterialBuffer=r.buffer[0].content),n===proto.BlockHeader.BlockType.BT_USERDATA&&(this.globalUserdataBuffer=r.buffer[0].content),n===proto.BlockHeader.BlockType.BT_TILEID&&(this.globalTileIdBuffer=r.buffer[0].content),i&&i()}},{key:"getBlockType",value:function(e){switch(e){case"MESH":return proto.bimtile_pbf.BlockHeader.BlockType.BT_MESH;case"POINT":return proto.bimtile_pbf.BlockHeader.BlockType.BT_POINT;case"INSTANCE":return proto.bimtile_pbf.BlockHeader.BlockType.BT_INSTANCE;case"LINE":return proto.bimtile_pbf.BlockHeader.BlockType.BT_LINE}}},{key:"addSearchTreeBuffer",value:function(e,t,i){this.searchTreeManager.addSearchTreeBuffer(e,t,i)}},{key:"getSearchTreeBuffer",value:function(){return this.searchTreeManager.getSearchTreeBuffer()}},{key:"createTileIdMap",value:function(){var e=this;if(this.globalTileIdBuffer){var t=this.globalTileIdBuffer.getTilePathList(),i=this.globalTileIdBuffer.getTileIdsList();t.map(function(t,r){e.tileIdMap[t]=i[r]})}}},{key:"getTileIdByPath",value:function(e){return this.tileIdMap[e]}},{key:"createNodeInfoMap",value:function(){var e=this;for(var t in this.globalUserIDBuffer){this.globalUserIDBuffer[t].getNodeIdsList().map(function(t){
var i=t.getUserId(),r=t.getUserdataId(),n=s.TilesUtil.praseUserData(e.getUserDataByIndex(r)),a=t.getBboxList(),o=s.TilesUtil.getBox(a).clone(),l=t.getTileId(),u=l+"_"+t.getBlockId()+"_"+t.getNodeId(),c="line_"+l,h=void 0,d=!1;if(e.globalTileIdBuffer){var f=e.globalTileIdBuffer.getTileIdsList()[l];-1!==e.globalTileIdBuffer.getTilePathList()[f].indexOf("instance")&&(d=!0,u=l+"_"+t.getBlockId(),h=t.getNodeId())}e.getDescriptor()._classifyNodeInfo({nodeId:u,name:i,userId:i,userData:n,boundingBox:o,instanceOrNot:d,state:s.EnumObjectState.Visible,index:h,lineId:c,tileId:l})})}}},{key:"clone",value:function(e){e.globalMaterialId=this.globalMaterialId,e.globalUserdataId=this.globalUserdataId,e.globalMaterialUrl=this.globalMaterialUrl,e.globalUserDataUrl=this.globalUserDataUrl,e.globalTileIdUrl=this.globalTileIdUrl,e.globalInstance=this.globalInstance,e.globalUserIDInfo=this.globalUserIDInfo,e.globalUserIDBuffer=this.globalUserIDBuffer,e.globalMaterialBuffer=this.globalMaterialBuffer,e.globalUserdataBuffer=this.globalUserdataBuffer,e.globalTileIdBuffer=this.globalTileIdBuffer,e.searchTreeManager=this.searchTreeManager}},{key:"getPolygonOutLinePathByUserId",value:function(e){var t=this;if(!this.globalUserIDBuffer)return null;var i=this.getDescriptor().getNodeInfosByUserId(e);if(!i)return null;var r={MultiPolygoin:!0,PolygonWithHoles:!0,SimplePolygon:!0},n=this.getUserDataIndexKeyByString("polygonType");if(-1===n)return null;var a=this.globalUserdataBuffer.getBlobHeader().getValuesList(),o={},s=!1;return i.forEach(function(e){var i=e.userData;if(i&&void 0!==i[n]){var l=i[n],u=a[l];if(void 0!==u&&r[u]){var c=t.getTilePathByTileId(e.tileId);c&&(o[c]||(o[c]={}),o[c]={tileId:e.tileId,polygonType:u},s=!0)}}}),s?o:null}},{key:"getTilePathByTileId",value:function(e){var t=this.globalTileIdBuffer;if(t){var i=t.getTileIdsList()[e];return t.getTilePathList()[i]}}}]),e}();s.BimTileReader=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.jsonLoader=new THREE.FileLoader,this.jsonLoader.setResponseType("json"),this.arrayBufferLoader=new THREE.FileLoader,this.arrayBufferLoader.setResponseType("arraybuffer"),this.taskRunner=new s.LoadTaskRunner(4),this.tileReader=new s.BimTileReader,this.batchMergeEnabled=t.batchMergeEnabled,this.filter=t.filter,this.modelExplosion=t.modelExplosion,this.borderLineCategoryIds=t.borderLineCategoryIds,this.materialManager=t.materialManager;var i={batchMergeEnabled:t.batchMergeEnabled,delayLoadTexture:t.delayLoadTexture,materialManager:this.materialManager,renderFunction:t.renderFunction};this.bimTileParser={},this.bimTileParser[s.TileContentType.DATA_MESH]=new s.BimTileMeshBlobParser(i),this.bimTileParser[s.TileContentType.DATA_CMPT]=this.bimTileParser[s.TileContentType.DATA_MESH],this.bimTileParser[s.TileContentType.DATA_INSTANCE]=new s.BimTileInstanceParser(i),this.bimTileOutlineBlobParser=new s.BimTileOutlineBlobParser(i),this.bimTileParser[s.TileContentType.DATA_POINT]=new s.BimTilePointParser,this.batchedWireframeManager=new s.BimTileBatchedWireframeManager(this),this.instancedWireframeManager=new s.BimTileInstancedWireframeManager(this),this.batchedMeshManager=new s.BimTileBatchedMeshManager(this),this.instancedMeshManager=new s.BimTileInstancedMeshManager(this),this._rootUrl=void 0,this.sceneState=t.sceneState,this.userIdMapIndices={},this.pbfNodeInfoMap={},this._enableBorderLine=t.enableBorderLine,this.disableUserData=t.disableUserData,this.indexInfoMap={},this.selectionMeshIdSet={},this.lastSelectionMeshIdSet={},this.CMPTUrlMap={}}return _createClass(e,[{key:"destroy",value:function(){this.globalIndexId=null,this.globalMaterialId=null,this.globalUserdataId=null,this.jsonLoader=null,this.arrayBufferLoader=null,this.taskRunner=null,this.tileReader.destroy(),this.tileReader=void 0,this.bimTileParser[s.TileContentType.DATA_MESH].destroy(),this.bimTileParser[s.TileContentType.DATA_INSTANCE].destroy(),this.bimTileParser[s.TileContentType.DATA_POINT].destroy(),this.bimTileParser=void 0,this._rootUrl=void 0,this.sceneState=null,this.userIdMapIndices=null,this.materialManager=null,this.batchedWireframeManager.destroy(),this.instancedWireframeManager.destroy(),this.batchedMeshManager.destroy(),this.instancedMeshManager.destroy(),this.batchedWireframeManager=null,this.instancedWireframeManager=null,this.batchedMeshManager=null,this.instancedMeshManager=null,this.pbfNodeInfoMap=null,this._enableBorderLine=void 0,this.borderLineCategoryIds=null,this.indexInfoMap=null,this.noUserDataMeshNodeInfoMap=null,this.noUserDataInstanceNodeInfoMap=null,this.selectionMeshIdSet=null,this.lastSelectionMeshIdSet=null,this.CMPTUrlMap={}}},{key:"getDescriptor",value:function(){return this.tileReader.getDescriptor()}},{key:"loadJson",value:function(e,t,i){var r=this,n=function(){r.taskRunner.push(r.jsonLoader,e,t,function(t){s.EnableStorage&&s.storageManager.addBimtiles(JSON.stringify(t),e).catch(function(e){}),i&&i(t)})};s.EnableStorage?s.storageManager.getBimtiles(e).then(function(e){return i&&i(JSON.parse(e))}).catch(function(e){n()}):n()}},{key:"loadJsonImmediately",value:function(e,t,i){var r=this,n=function(){r.jsonLoader.load(e,function(i){s.EnableStorage&&s.storageManager.addBimtiles(JSON.stringify(i),e).catch(function(e){}),t(i)},void 0,function(){i&&i(event)})};s.EnableStorage?s.storageManager.getBimtiles(e).then(function(e){return t(JSON.parse(e))}).catch(function(e){n()}):n()}},{key:"loadArrayBuffer",value:function(e,t,i){this.taskRunner.push(this.arrayBufferLoader,e,t,function(e){i&&i(e)})}},{key:"loadArrayBufferDirectly",value:function(e,t){var i=this,r=function(){i.arrayBufferLoader.load(e,function(i){t(i),s.EnableStorage&&s.storageManager.addBimtiles(i,e).catch(function(e){})})};s.EnableStorage?s.storageManager.getBimtiles(e).then(function(e){return t(e)}).catch(function(e){r()}):r()}},{key:"loadCMPTArrayBufferImmediately",value:function(e,t,i){void 0===this.CMPTUrlMap[e]?(this.CMPTUrlMap[e]={state:s.TileContentState.LOADING,buffer:null,callbacks:[]},this.loadArrayBufferImmediately(e,t,i)):this.CMPTUrlMap[e].state===s.TileContentState.READY?t(this.CMPTUrlMap[e].buffer):this.CMPTUrlMap[e].state===s.TileContentState.LOADING&&this.CMPTUrlMap[e].callbacks.push(t)}},{key:"loadArrayBufferImmediately",value:function(e,t,i){var r=this,n=function(i){if(r.CMPTUrlMap[e]){r.CMPTUrlMap[e].state=s.TileContentState.READY,r.CMPTUrlMap[e].buffer=i;r.CMPTUrlMap[e].callbacks.map(function(e){e&&e(i)})}t(i)},a=function(){r.arrayBufferLoader.load(e,function(t){n(t),s.EnableStorage&&s.storageManager.addBimtiles(t,e).catch(function(e){})},void 0,function(){i&&i(event)})};s.EnableStorage?s.storageManager.getBimtiles(e).then(function(e){return n(e)}).catch(function(e){a()}):a()}},{key:"loadBlock",value:function(e,t,i,r){var n=this.tileReader,a={node:t,type:i,url:e};this.loadArrayBufferDirectly(e,function(e){n.parseBlock(e,a,r)})}},{key:"loadUserIdResources",value:function(e,t){var i=this,r=this.tileReader,n=1,a=function(){--n<=0&&t()};if(r.globalUserDataUrl&&(n++,this.loadBlock(r.globalUserDataUrl,e,proto.bimtile_pbf.BlockHeader.BlockType.BT_USERDATA,function(){a()})),r.globalUserIDInfo){var o=r.globalUserIDInfo.length;n+=o,r.globalUserIDInfo.map(function(t){i.loadBlock(t.globalUserIdUrl,e,proto.bimtile_pbf.BlockHeader.BlockType.BT_USERID,function(){a()})})}r.globalTileIdUrl&&(n++,this.loadBlock(r.globalTileIdUrl,e,proto.bimtile_pbf.BlockHeader.BlockType.BT_TILEID,function(){a()})),a()}},{key:"loadGlobalResources",value:function(e,t){var i=this,r=this.tileReader,n=0;r.globalMaterialUrl&&(n++,i.loadBlock(r.globalMaterialUrl,e,proto.bimtile_pbf.BlockHeader.BlockType.BT_MATERIAL,function(){--n<=0&&t()})),n<=0&&t()}},{key:"loadInstanceResources",value:function(e){var t=this.tileReader;if(t.globalInstance){var i=this;return new Promise(function(r,n){var a=t.globalInstance;i.loadJsonImmediately(a,function(t){var n=a.slice(0,a.lastIndexOf("/")+1),o=e.createTile(n,t);if(o.localIndexList&&o.localIndexList.length>0)for(var l=o.localIndexList.length,u=0;u<l;++u){var c=o.localIndexList[u];i.addSearchTree(c.url,c.box)}o._childrenState=s.TileContentState.READY,r(o)},function(){n("can not load intance root json")})})}}},{key:"loadLodResources",value:function(e){var t=this.tileReader;if(t.globalLodUrl){var i=this;return new Promise(function(r,n){var a=t.globalLodUrl;i.loadJsonImmediately(a,function(t){var n=a.slice(0,a.lastIndexOf("/")+1),o=e.createTile(n,t);if(o.localIndexList&&o.localIndexList.length>0)for(var l=o.localIndexList.length,u=0;u<l;++u){var c=o.localIndexList[u];i.addSearchTree(c.url,c.box)}o._childrenState=s.TileContentState.READY,r(o)},function(){n("can not load intance root json")})})}}},{key:"parseTileContent",value:function(e,t){this.bimTileParser[e.contentType].parseBlobs(this,e,t)}},{key:"parseTileLineContent",value:function(e,t){this.bimTileOutlineBlobParser.parseBlobs(this,e,t)}},{key:"setBorderLineVisible",value:function(e){this._enableBorderLine=e}},{key:"isBorderLineVisible",value:function(){return this._enableBorderLine}},{key:"updateBorderLineCategory",value:function(){this.borderLineCategory=this.tileReader.getUserDataIndexListMapByString("categoryId",this.borderLineCategoryIds)}},{key:"addMeshIdMap",value:function(e,t){this.batchedMeshManager.addMeshIdMap(e,t)}},{key:"getMeshNodeById",value:function(e){return this.batchedMeshManager.getMeshNodeById(e)}},{key:"disposeMeshNodeById",value:function(e){this.batchedMeshManager.disposeMeshNodeById(e)}},{key:"addInstanceMeshIdMap",value:function(e,t,i,r){this.instancedMeshManager.addInstanceMeshIdMap(e,t,i,r)}},{key:"getInstanceMeshNodeById",value:function(e){return this.instancedMeshManager.getInstanceMeshNodeById(e)}},{key:"disposeInstanceMeshNodeById",value:function(e){this.instancedMeshManager.disposeInstanceMeshNodeById(e)}},{key:"addInstanceInfo",value:function(e,t){this.instancedMeshManager.addInstanceInfo(e,t)}},{key:"getInstanceInfoById",value:function(e){return this.instancedMeshManager.getInstanceInfoById(e)}},{key:"addLineNodeById",value:function(e,t,i){this.batchedWireframeManager.addLineNodeById(e,t,i)}},{key:"addInstanceLineNodeById",value:function(e,t){this.instancedWireframeManager.addInstanceLineNodeById(e,t)}},{key:"getLineNodeById",value:function(e,t){return this.batchedWireframeManager.getLineNodeById(e,t)}},{key:"getInstanceLineNodeById",value:function(e){return this.instancedWireframeManager.getInstanceLineNodeById(e)}},{key:"disposeLineNodeById",value:function(e){this.batchedWireframeManager.disposeLineNodeById(e)}},{key:"disposeInstanceLineNodeById",value:function(e){this.instancedWireframeManager.disposeInstanceLineNodeById(e)}},{key:"addUserIdMapIndices",value:function(e,t){var i=this;e.map(function(e){var r=e.userId;void 0===i.userIdMapIndices[r]?i.userIdMapIndices[r]=[{meshId:t,indexId:e.index}]:i.userIdMapIndices[r].push({meshId:t,indexId:e.index})})}},{key:"addSearchTree",value:function(e,t){if(this.disableUserData)return void(this.indexInfoMap[e]=t);this.addSearchTreeUrl(e,t)}},{key:"addSearchTreeUrl",value:function(e,t,i){var r=this,n={};this.loadBlock(e,n,proto.bimtile_pbf.BlockHeader.BlockType.BT_INDEX,function(){r.tileReader.addSearchTreeBuffer(e,t,n.buffer[0].content),i&&i()})}},{key:"recoverIndexInfo",value:function(e){var t=Object.keys(this.indexInfoMap).length;for(var i in this.indexInfoMap)this.addSearchTreeUrl(i,this.indexInfoMap[i],function(){0===--t&&e&&e()})}},{key:"recoverNodeInfo",value:function(){this.batchedMeshManager.recoverNodeInfo(),this.instancedMeshManager.recoverNodeInfo()}},{key:"addNoUserDataMeshNodeInfo",value:function(e,t,i){this.batchedMeshManager.addNoUserDataMeshNodeInfo(e,t,i)}},{key:"addNoUserDataInstanceNodeInfo",value:function(e,t,i){this.instancedMeshManager.addNoUserDataInstanceNodeInfo(e,t,i)}},{key:"patchMeshNodeInfo",value:function(e,t,i){this.batchedMeshManager.patchMeshNodeInfo(e,t,i)}},{key:"patchInstanceNodeInfo",value:function(e,t,i){this.instancedMeshManager.patchInstanceNodeInfo(e,t,i)}},{key:"dealLineMeshCategoryVisible",value:function(e){if(this.disableUserData)return void(e.visible=!1);this.batchedWireframeManager.dealLineMeshCategoryVisible(e)}},{key:"recoverLineNode",value:function(){this.updateBorderLineCategory(),this.batchedWireframeManager.recoverLineNode(),this.instancedWireframeManager.recoverLineNode()}},{key:"loadPolygonOutLine",value:function(e,t){var i=this,r=this,n=this.tileReader,a=n.getIndexByUserId(e);if(void 0===a)return void t(null);var o=n.getPolygonOutLinePathByUserId(a);if(!o)return void t(null);var s=Object.keys(o),l=this.rootUrl,u=[];s.forEach(function(e){var t=new Promise(function(t,r){i.loadArrayBufferImmediately(l+e,function(i){t({buffer:i,polygonType:o[e].polygonType,tileId:o[e].tileId})},function(){r()})});u.push(t)}),Promise.all(u).then(function(e){r._parsePolygonOutLineBlobs(e,function(e){var i=[];e.forEach(function(e){var t=r._getPolygonOutLineData(e,a);i.push(t)}),t(i),console.log(JSON.stringify(i))})}).catch(function(e){console.log(e)})}},{key:"_parsePolygonOutLineBlobs",value:function(e,t){var i=this.tileReader,r=this.bimTileOutlineBlobParser,n=[],a=this;e.forEach(function(e){var t={buffer:{},contentType:"LINE",contentId:e.tileId,contentTypeBufferOnly:!0,matrix:new THREE.Matrix4,polygonType:e.polygonType,getLineBuffer:function(e){return this.lineBuffer[e]},computeLineNodeCount:function(){},getOutlineContentUrl:function(){}},o=i.getBlockType(t.contentType),s={node:t,type:o},l=new Promise(function(n,o){i.parseBlock(e.buffer,s,function(){r.parseBlobs(a,t,function(){n(t)})})});n.push(l)}),Promise.all(n).then(function(e){t(e)}).catch(function(e){console.log(e)})}},{key:"_getPolygonOutLineData",value:function(e,t){var i=this,r=e.geometry,n=e.indexGroups,a=e.matrix,o=r.getIndex().array,s=r.getAttribute("position").array,l=n[t],u=e.polygonType,c=[];return l.forEach(function(e){var t=e.indexStart,r=e.indexStart+e.indexCount,n=o.slice(t,r);t=e.positionStart,r=e.positionStart+e.positionCount;var l=s.slice(t,r);t/=3,n.forEach(function(e,i,r){r[i]-=t});var h=i._extractPolygonOutLinePositions(u,l,n,a);c.push(h)}),c}},{key:"_extractPolygonOutLinePositions",value:function(e,t,i,r){for(var n=[],a=new THREE.Vector3,o=new THREE.Vector3,s=0,l=i.length-1;s<l;s+=2){var u=i[s],c=i[s+1];a.fromArray(t,3*u),o.fromArray(t,3*c),a.applyMatrix4(r),o.applyMatrix4(r),n.push({x:a.x,y:a.y,z:a.z}),n.push({x:o.x,y:o.y,z:o.z})}return n}},{key:"getSelectionMeshId",value:function(){var e=this;this.selectionMeshIdSet={};var t=this.sceneState.getSelectionSet();for(var i in t){var r=this.tileReader.getIndexByUserId(i),n=this.tileReader.getDescriptor().getAllNodeInfos()[r];n&&n.map(function(t){e.selectionMeshIdSet[t.parent]=!0})}return this.selectionMeshIdSet}},{key:"getLastSelectionMeshId",value:function(){return this.lastSelectionMeshIdSet=Object.assign(this.selectionMeshIdSet),this.lastSelectionMeshIdSet}},{key:"clearSelectionMeshId",value:function(){this.selectionMeshIdSet={}}},{key:"rootUrl",set:function(e){this._rootUrl=e},get:function(){return this._rootUrl}}]),e}();s.BimTilesLoader=e}(),function(){var e=new THREE.Box3,t=new THREE.Vector3,i=function(i){function r(e){_classCallCheck(this,r),e=s.Utils.defaultValue(e,{});var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._loader=e.loader,t._errorCoefficient=e.errorCoefficient,t.maximumScreenSpaceError=void 0===e.maximumScreenSpaceError?16:e.maximumScreenSpaceError,t.enableBorderLine=!0===e.enableBorderLine,t.disableUserData=e.disableUserData,t.materialManager=e.materialManager,t.geoErrScaleFactor=1,t.conditions=[],t._nodeManager=new s.BimTileNodeManager,t._geometryManager=new s.BimTileGeometryManager,t}return _inherits(r,i),_createClass(r,[{key:"destroy",value:function(){_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this._loader=void 0,this.geoErrScaleFactor=void 0,this._geometryManager=null,this._nodeManager=null}},{key:"loadChildrenOfTile",value:function(e,t,i){var r=this,n=e.getAbsoluteContentUrl(),a=n.slice(0,n.lastIndexOf("/")+1),o=r._loader,l=n+"_root",u=s.Utils.getEncodedString(l),c=this._nodeManager.getNode(l);if(c)return void this._cloneChildTiles(this,c,e);this._loader.loadJson(n,t,function(t){if(!r.isDestroyed()){var n=r.createTile(a,t.context,e);if(n.nodeId=u,r._nodeManager.addNode(n),n.localIndexList.length>0)for(var s=n.localIndexList.length,l=0;l<s;++l){var c=n.localIndexList[l];o.addSearchTree(c.url,c.box)}i&&i(n)}})}},{key:"createTile",value:function(e,t,i){if(t.root&&t.root.boundingVolume){t.properties&&(t.root.properties=t.properties);var r=new s.BimTileNode(this,i,t.root,e);return r.build(),r}}},{key:"loadUserIdResources",value:function(e){var t=this._loader,i=t.tileReader;t.loadUserIdResources(this.root,function(){i.createNodeInfoMap(),i.createTileIdMap(),e&&e()})}},{key:"loadTileset",value:function(e,t,i){e=s.RequestSpliter.splitByDatabagId(e);var r=this,n=this._loader,a=n.tileReader;n.loadJsonImmediately(e,function(i){var o=e.slice(0,e.lastIndexOf("/")+1),l=(i.context,r.createTile(o,i));l._childrenState=s.TileContentState.READY,a.parseSchemaProperties(i.properties,o),n.rootUrl=o,n.loadGlobalResources(l,function(){r.root=l,r._boundingBox=l.boundingBox.clone(),!0===r.disableUserData?t(r):r.loadUserIdResources(function(){t(r)})});var u=n.loadInstanceResources(r);u&&u.then(function(e){l.childrenTree.push(e),l.geometricError<e.geometricError&&(l.geometricError=e.geometricError)}).catch(function(e){console.log(e)});var c=n.loadLodResources(r);c&&c.then(function(e){l.childrenTree.push(e),l.geometricError<e.geometricError&&(l.geometricError=e.geometricError)}).catch(function(e){console.log(e)})},function(){i(r)})}},{key:"preUpdate",value:function(e){this.ready&&this.processTiles(e)}},{key:"isCheckChildrenPassSSE",value:function(){return!0}},{key:"resetGeometryOwner",value:function(){this._geometryManager&&this._geometryManager.resetGeometryOwner()}},{key:"_loadFirstTileWithMesh",value:function(e,t,i){var r=this;if(t.isFirst){if(e.contentTypeMesh||e.contentTypePoint||e.contentTypeInstance)return t.isFirst=!1,void i(t);var n=r.getMaxGeoErrNode(e.childrenTree);n&&n.childrenUnload&&(n._childrenState=s.TileContentState.READY,n.contentTypeTile?this.loadChildrenOfTile(n,void 0,function(e){r._loadFirstTileWithMesh(e,t,i)}):r._loadFirstTileWithMesh(n,t,i))}}},{key:"getMaxGeoErrNode",value:function(e){var t=null,i=-1,r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.geometricError>i&&(i=l.geometricError,t=l)}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return t}},{key:"updateFrameState",value:function(e){e.transformMatrix=this._transformMatrix,e.maximumScreenSpaceError=this.maximumScreenSpaceError,e.geoErrScaleFactor=this.geoErrScaleFactor}},{key:"updateGlobalMatrix",value:function(e){this._objectGroup.matrix.copy(e),this._objectGroup.matrix.multiplyMatrices(e,this._transformMatrix),this._objectGroup.matrixAutoUpdate=!1,this._objectGroup.updateMatrixWorld(!0)}},{key:"updateHomePositionWorld",value:function(i){var r=e.copy(this.root.boundingBox).applyMatrix4(i.transformMatrix).applyMatrix4(i.globalMatrix),n=r.getSize(),a=Math.max(n.x,n.y,n.z);r.getCenter(t).sub(new THREE.Vector3(a,-a,-a)),i.cameraPositionWc=t.applyMatrix4(i.globalInverseMatrix)}},{key:"updateMaximumScreenSpaceError",value:function(e){this.updateHomePositionWorld(e),e.geoErrScaleFactor=this.geoErrScaleFactor,this.maximumScreenSpaceError=this.maximumScreenSpaceError*this._errorCoefficient}},{key:"setMaximumScreenSpaceError",value:function(e){this.maximumScreenSpaceError=e}},{key:"getMaximumScreenSpaceError",value:function(){return this.maximumScreenSpaceError}},{key:"getGeoErrScaleFactor",value:function(){return this.geoErrScaleFactor}},{key:"setGeoErrScaleFactor",value:function(e){this.geoErrScaleFactor=e}},{key:"statisticsMeshInformation",value:function(){var e={meshCount:0,visibleCount:0},t=this._objectGroup.children;e.meshCount=t.length;for(var i=0,r=t.length;i<r;i++){var n=t[i];s.Utils.isGroupObject(n)&&n.visible&&e.visibleCount++}return e}},{key:"explode",value:function(){for(var e=this._selectedTiles,t=0,i=e.length;t<i;t++)e[t].explode()}},{key:"changeAllMaterials",value:function(e){for(var t=this._selectedTiles,i=0,r=t.length;i<r;i++)t[i].changeAllMaterials(e)}},{key:"updateOnDemandConditions",value:function(e){this.onDemandManager.updateOnDemandConditions(e)}},{key:"unloadTile",value:function(e){_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"unloadTile",this).call(this,e),s.Utils.defined(this.geometryManager)&&this.geometryManager.removeGeometryById(e.nodeId)}},{key:"clone",value:function(e,t){s.Utils.defined(e)||(e=new r),e=s.Utils.defaultValue(e,new r),_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"clone",this).call(this,e),e._errorCoefficient=this.errorCoefficient,e.sseThreshold=this.sseThreshold,e.geoErrScaleFactor=this.geoErrScaleFactor,e._loader=t,e._loader.rootUrl=this._loader.rootUrl,e._nodeManager=this._nodeManager,e._geometryManager=this._geometryManager;var i=this._root.clone(e,void 0);return e._root=i,this._cloneChildTiles(e,this._root,i),this._loader.tileReader.clone(e._loader.tileReader),e._loader.tileReader.createNodeInfoMap(),e._loader.pbfNodeInfoMap=this._loader.pbfNodeInfoMap,e}},{key:"_cloneChildTiles",value:function(e,t,i){var r=this;t.childrenTree.forEach(function(t){var n=t.clone(e,i);r._cloneChildTiles(e,t,n)})}},{key:"debugShowGeometricError",value:function(e){this._debugShowGeometricError=e}},{key:"needLoadChildrenOfTile",value:function(e){return void 0!==e.detailLevel&&e.detailLevel<=2?e.childrenUnload&&e.contentReady:e.childrenUnload}},{key:"traverseContentVisibleNode",value:function(e){!function t(i){i.childrenTree.forEach(function(i){!0===i.contentVisible&&e&&e(i),t(i)})}(this._root)}},{key:"getRootGeoErrDistance",value:function(e){return e*this.root.geometricError/this.maximumScreenSpaceError}},{key:"geometryManager",get:function(){return this._geometryManager}}]),r}(s.AbstractTileset);s.BimTileset=i}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.model=t,this._filter=t.filter,this._onDemand=t._onDemand,this._hasLayerInfo=t._hasLayerInfo,this._idMap={},this.demandCount=0}return _createClass(e,[{key:"destroy",value:function(){this._filter.destroy(),this._filter=null,this._onDemand=void 0,this._hasLayerInfo=void 0,this._conditions=null,this._idMap=null,this.demandCount=void 0}},{key:"updateOnDemandConditions",value:function(e){this._conditions=void 0===e?[]:e,this._conditions=e,this.demandCount++}},{key:"onDemandJudgment",value:function(e){if(!1===this._onDemand)return!1;if(!0===this._onDemand&&!1===this._hasLayerInfo)return!0;if(0===Object.keys(e.layerInfo).length)return!1;for(var t=this._conditions.length,i=!0,r=0;r<t;++r){var n=this._conditions[r],a=!0;for(var o in n)if(e.layerInfo[o]&&n[o]!==e.layerInfo[o]){a=!1;break}a&&(i=!1)}return i}},{key:"instanceApply",value:function(e){if(e.demandCount!==this.demandCount){var t=e.userIndexMap,i=this.model.getDescriptor().getInstancedNodeInfos();this._filter._updateInstanceDemandMaterial(e,t,i),e.demandCount=this.demandCount}}},{key:"onDemand",get:function(){return this._onDemand},set:function(e){this._onDemand=e}},{key:"hasLayerInfo",get:function(){return this._hasLayerInfo},set:function(e){this._hasLayerInfo=e}},{key:"conditions",get:function(){return this._conditions},set:function(e){this._conditions=e}},{key:"idMap",get:function(){return this._idMap}}]),e}();s.BimTileOnDemandManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.model=e,i.mergedMeshesStates={},i.blinkMaterials={},i.idCacheMap=new Map,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.mergedMeshesStates=null,this.blinkMaterials=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.model=null}},{key:"_parseIds",value:function(e){for(var t=[],i=e.length,r=0;r<i;++r){var n=e[r],a=this.model.tilesLoader.tileReader.getIndexByUserId(n);t.push(a)}return t}},{key:"_parseIndexIds",value:function(e){for(var t=[],i=e.length,r=0;r<i;++r){var n=e[r],a=this.model.getRealUserId(n);t.push(a)}return t}},{key:"_parseConditions",value:function(e){for(var t=[],i=e.length,r=0;r<i;++r){var n=e[r],a={};for(var o in n){var s=this.model.tilesLoader.tileReader.getUserDataIndexMapByString(o,n[o]);s&&(a[s.key]=s.value)}t.push(a)}return t}},{key:"hideAll",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hideAll",this).call(this)}},{key:"showAll",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showAll",this).call(this)}},{key:"hideByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hideByIds",this).call(this,i)}},{key:"hideByConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hideByConditions",this).call(this,i)}},{key:"hideOthersByConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hideOthersByConditions",this).call(this,i)}},{key:"getMatchIndexes",value:function(e){var i=this._parseConditions(e);return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getMatchIds",this).call(this,i)}},{key:"getMatchIds",value:function(e){return this._parseIndexIds(this.getMatchIndexes(e))}},{key:"addToFrozenList",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToFrozenList",this).call(this,i)}},{key:"removeFromFrozenList",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeFromFrozenList",this).call(this,i)}},{key:"setFrozenList",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setFrozenList",this).call(this,i)}},{key:"setFrozenConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setFrozenConditions",this).call(this,i)}},{key:"getFrozenConditions",value:function(){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getFrozenConditions",this).call(this)}},{key:"addToIdList",value:function(e,i){var r=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToIdList",this).call(this,e,r)}},{key:"setIdList",value:function(e,i){var r=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setIdList",this).call(this,e,r)}},{key:"removeFromIdList",value:function(e,i){var r=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeFromIdList",this).call(this,e,r)}},{key:"addToOverrideList",value:function(e,i,r){var n=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToOverrideList",this).call(this,e,n,r)}},{key:"removeFromOverrideList",value:function(e,i){var r=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeFromOverrideList",this).call(this,e,r)}},{key:"setOverrideList",value:function(e,i,r){var n=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOverrideList",this).call(this,e,n,r)}},{key:"addToOverrideListByColor",value:function(e,i){var r=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToOverrideListByColor",this).call(this,r,i)}},{key:"addToOverrideListByConditions",value:function(e,i){var r=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToOverrideListByConditions",this).call(this,r,i)}},{key:"addToOverrideListByMaterial",value:function(e,i){var r=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToOverrideListByMaterial",this).call(this,r,i)}},{key:"addToOverrideListByMaterialAndId",value:function(e,i){var r=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToOverrideListByMaterialAndId",this).call(this,r,i)}},{key:"setOverrideListByColor",value:function(e,i,r){var n=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOverrideListByColor",this).call(this,e,n,r)}},{key:"addToOpacityListByConditions",value:function(e,t){var i=this._parseConditions(e),r=this,n=function(e,i){if(i){for(var n in e){var a=e[n];e[n]=r.model.tilesLoader.tileReader.getUserIdByIndex(a)}t(e,i)}};this.getObjectInfoManager().matchConditions(i,n)}},{key:"addToLocalClippingListByConditions",value:function(e,t){var i=this,r=this._parseConditions(e),n=function(e,r){if(r){for(var n in e){var a=i.model.tilesLoader.tileReader.getUserIdByIndex(e[n]);e[n]=a}t(e,r)}};this.getObjectInfoManager().matchConditions(r,n)}},{key:"addToIsolateList",value:function(e,i){var r=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addToIsolateList",this).call(this,r,i)}},{key:"removeFromIsolateList",value:function(e,i){var r=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeFromIsolateList",this).call(this,r,i)}},{key:"setIsolateList",value:function(e,i){var r=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setIsolateList",this).call(this,r,i)}},{key:"removeFromIsolateList",value:function(e,i){var r=this._parseIds(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeFromIsolateList",this).call(this,e,r)}},{key:"setIsolateConditions",value:function(e,i){var r=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setIsolateConditions",this).call(this,r,i)}},{key:"getIsolateConditions",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getIsolateConditions",this).call(this)}},{key:"setConditions",value:function(e,i){var r=this._parseConditions(i);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setConditions",this).call(this,e,r)}},{key:"getConditions",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConditions",this).call(this)}},{key:"showByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showByIds",this).call(this,i)}},{key:"showByConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showByConditions",this).call(this,i)}},{key:"makeTranslucentByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"makeTranslucentByIds",this).call(this,i)}},{key:"makeTranslucentByConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"makeTranslucentByConditions",this).call(this,i)}},{key:"makeTranslucentOthersByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"makeTranslucentOthersByIds",this).call(this,i)}},{key:"opaqueAll",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"opaqueAll",this).call(this)}},{key:"opaqueByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"opaqueByIds",this).call(this,i)}},{key:"opaqueByConditions",value:function(e){var i=this._parseConditions(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"opaqueByConditions",this).call(this,i)}},{key:"deactivateByIds",value:function(e){var i=this._parseIds(e);_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deactivateByIds",this).call(this,i)}},{key:"isComponentActive",value:function(e){var i=this.model.tilesLoader.tileReader.getIndexByUserId(e)
;return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isComponentActive",this).call(this,i)}},{key:"getBlinkMaterials",value:function(){return Object.values(this.blinkMaterials)}},{key:"_updateFilterManager",value:function(){var e={};e[this.model.id]=this.model.getAllNodeInfos(),this.model.getAllNodeInfos()!=={}&&this.reinitFilterManager(e)}},{key:"resetStandardNodeStates",value:function(e){e.traverse(function(e){if("MeshEx"===e.type||"LineSegmentsEx"===e.type){e.material=[e.material[0]];var t=e.geometry;t.clearGroups(),t._visible=!0,t.addGroup(0,t.index.count,s.Model.EnumFilterState.NONE)}})}},{key:"standardApply",value:function(e){var t=e._content.meshes,i=e.userIndexMap,r=this.model.getDescriptor().getStandardNodeInfos();this._collectBlinkUserIds(e,i),this._collectHoverUserIds(e,i),this._collectLocalClipUserIds(e,i),this._collectModifyOpacityUserIds(e,i),this._collectFilteredUserIds(e,i,r),this._needsUpdate(e)&&(this.resetStandardNodeStates(t),this.rebuildIndices(e,r),this.enableStateChanged())}},{key:"_needsUpdate",value:function(e){e.hoverUserIdSetObject={};var t=this._hasHiddenFileIdFilter(),i=Object.getOwnPropertyNames(e.hiddenUserIdSetObject).length>0,r=Object.getOwnPropertyNames(e.overrideUserIdSetObject).length>0,n=Object.getOwnPropertyNames(e.transparentUserIdSetObject).length>0,a=Object.getOwnPropertyNames(e.hoverUserIdSetObject).length>0,o=Object.getOwnPropertyNames(e.blinkUserIdSetObject).length>0,s=Object.getOwnPropertyNames(this.model.mapClippingIds).length>0,l=Object.getOwnPropertyNames(e.localClipUserIdSetObject).length>0,u=Object.getOwnPropertyNames(e.modifyOpacityUserIdSetObject).length>0;if(!(t||i||r||n||o||a||s||l||u)){void 0===e.preHiddenUserIdSetObject&&(e.preHiddenUserIdSetObject=Object.create(null)),void 0===e.preHoverUserIdSetObject&&(e.preHoverUserIdSetObject=Object.create(null)),void 0===e.preOverrideUserIdSetObject&&(e.preOverrideUserIdSetObject=Object.create(null)),void 0===e.preTransparentUserIdSetObject&&(e.preTransparentUserIdSetObject=Object.create(null)),void 0===e.preBlinkUserIdSetObject&&(e.preBlinkUserIdSetObject=Object.create(null)),void 0===e.preLocalClipUserIdSetObject&&(e.preLocalClipUserIdSetObject=Object.create(null)),void 0===e.preModifyOpacityUserIdSetObject&&(e.preModifyOpacityUserIdSetObject=Object.create(null));var c=Object.getOwnPropertyNames(e.preHiddenUserIdSetObject).length>0,h=Object.getOwnPropertyNames(e.preOverrideUserIdSetObject).length>0,d=Object.getOwnPropertyNames(e.preTransparentUserIdSetObject).length>0,f=Object.getOwnPropertyNames(e.preOverrideUserIdSetObject).length>0,p=Object.getOwnPropertyNames(e.preBlinkUserIdSetObject).length>0,m=Object.getOwnPropertyNames(e.preLocalClipUserIdSetObject).length>0,v=Object.getOwnPropertyNames(e.preModifyOpacityUserIdSetObject).length>0;if(c||h||v||d||f||p||m){e.initializePreObject();var g=e._content.meshes;e.isInstanceTile?this.resetInstanceMaterial(g):this.resetStandardNodeStates(g)}return!1}return!(this._isEqual(e.hiddenUserIdSetObject,e.preHiddenUserIdSetObject)&&this._isEqual(e.hoverUserIdSetObject,e.preHoverUserIdSetObject)&&this._isEqual(e.overrideUserIdSetObject,e.preOverrideUserIdSetObject)&&this._isEqual(e.transparentUserIdSetObject,e.preTransparentUserIdSetObject)&&this._isEqual(e.blinkUserIdSetObject,e.preBlinkUserIdSetObject)&&this._isEqual(e.localClipUserIdSetObject,e.preLocalClipUserIdSetObject)&&this._isEqual(e.modifyOpacityUserIdSetObject,e.preModifyOpacityUserIdSetObject)&&this._isEqual(this.model.mapClippingIds,e.preMapClippingIds)&&!e.needUpdateFilter)&&(e.preHiddenUserIdSetObject=Object.assign(e.hiddenUserIdSetObject),e.preHoverUserIdSetObject=Object.assign(e.hoverUserIdSetObject),e.preOverrideUserIdSetObject=Object.assign(e.overrideUserIdSetObject),e.preTransparentUserIdSetObject=Object.assign(e.transparentUserIdSetObject),e.preBlinkUserIdSetObject=Object.assign(e.blinkUserIdSetObject),e.preLocalClipUserIdSetObject=Object.assign(e.localClipUserIdSetObject),e.preModifyOpacityUserIdSetObject=Object.assign(e.modifyOpacityUserIdSetObject),e.preMapClippingIds=this.model.mapClippingIds,e.needUpdateFilter=!1,!0)}},{key:"instanceApply",value:function(e){var t=e._content.meshes,i=e.userIndexMap,r=this.model.getDescriptor().getInstancedNodeInfos();this._collectBlinkUserIds(e,i),this._collectHoverUserIds(e,i),this._collectLocalClipUserIds(e,i),this._collectModifyOpacityUserIds(e,i),this._collectFilteredUserIds(e,i,r),this._needsUpdate(e)&&(this.resetInstanceMaterial(t),this._updateInstanceMaterial(e,r),this.resetInstanceWireFrameMaterial(t),this._updateInstanceWireFrameMaterial(e,r))}},{key:"_isEqual",value:function(e,t){if(void 0===t)return!1;if(Object.getOwnPropertyNames(e).length!==Object.getOwnPropertyNames(t).length)return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}},{key:"apply",value:function(){}},{key:"traverseInstanceGeometryMap",value:function(e,t){e.traverse(function(e){"MeshEx"===e.type&&t(e.geometry)})}},{key:"traverseInstanceLineGeometryMap",value:function(e,t){e.traverse(function(e){"LineSegmentsEx"===e.type&&t(e.geometry)})}},{key:"resetInstanceMaterial",value:function(e){var t=this.model,i=t.localClippingMode?s.EnumInstanceState.CLIPPING:s.EnumInstanceState.NONE;this.traverseInstanceGeometryMap(e,function(e){e.getAttribute("vState").array.fill(s.EnumInstanceState.NONE),e.getAttribute("vState").needsUpdate=!0,e.getAttribute("vClipping").array.fill(i),e.getAttribute("vClipping").needsUpdate=!0,e.getAttribute("vState2").array.fill(s.EnumInstanceState.HIDDEN),e.getAttribute("vState2").needsUpdate=!0})}},{key:"resetInstanceWireFrameMaterial",value:function(e){this.traverseInstanceLineGeometryMap(e,function(e){e.getAttribute("vState").array.fill(s.EnumInstanceState.NONE),e.getAttribute("vState").needsUpdate=!0})}},{key:"_updateInstanceMaterial",value:function(e,t){for(var i in e.hiddenUserIdSetObject)this._dealHideUserIndex(i,t);for(var r in e.localClipUserIdSetObject){var n=t[r];if(n)for(var a=n.length,o=0;o<a;++o){var l=n[o],u=l.index,c=this.model.tilesLoader.getInstanceMeshNodeById(l.parent);for(var h in c){var d=c[h],f=d.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(f)&&(f&&!1!==f.visible)){var p=s.MaterialUtil.getColorParamsByMaterial(f.material[0]),m=s.EnumInstanceState.CLIPPING;this.updateInstanceGeometry(f,p,m,u)}}}}for(var v in e.transparentUserIdSetObject){var g=t[v];if(g){var y=this.model.sceneState.frozonMaterial,M=s.MaterialUtil.getColorParamsByMaterial(y),E=s.EnumInstanceState.OVERRIDED;this.updateInstanceGeometryByNodeInfos(g,M,E)}}for(var b in e.overrideUserIdSetObject){var x=t[b];if(x)for(var I=x.length,T=0;T<I;++T){var w,C=x[T],S=C.index,A=this.model.tilesLoader.getInstanceMeshNodeById(C.parent),k=e.overrideUserIdSetObject[b];for(var R in A){var B=A[R],L=B.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(L)){var O=1;"material_modifyOpacity"==k?(O=e.modifyOpacityUserIdSetObject[b].opacity,w=this.getMaterialForModifyOpacityFrom(L.material[0],O)):(w=this._getMaterialByName(k),e.modifyOpacityUserIdSetObject[b]&&(O=e.modifyOpacityUserIdSetObject[b].opacity,w=this.getMaterialForModifyOpacityFrom(w,O))),w.srcOpacity=O,this.model.materialManager.materialMap[k]=w;var P=s.MaterialUtil.getColorParamsByMaterial(w),D=s.EnumInstanceState.OVERRIDED;this.updateInstanceGeometry(L,P,D,S)}}}}for(var N in e.hoverUserIdSetObject){var _=t[N];if(_)for(var H=_.length,F=0;F<H;++F){var U=_[F],G=(U.index,this.model.tilesLoader.getInstanceMeshNodeById(U.parent));for(var z in G){var j=G[z],V=j.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(V)){var W=this.model.sceneState.getHoverMaterial(V.material[0]),Y=s.MaterialUtil.getColorParamsByMaterial(W),Z=s.EnumInstanceState.HOVER;this.updateInstanceGeometry(V,Y,Z)}}}}for(var Q in e.blinkUserIdSetObject){var X=t[Q];if(X)for(var J=X.length,K=0;K<J;++K){var q=X[K],$=q.index,ee=this.model.tilesLoader.getInstanceMeshNodeById(q.parent);for(var te in ee){var ie=ee[te],re=ie.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(re)&&(re&&!1!==re.visible)){var ne=s.MaterialUtil.getColorParamsByMaterial(re.material[0]),ae=s.EnumInstanceState.BLINK,oe=this.getBlinkMaterialName(Q,e.blinkUserIdSetObject[Q]);void 0==this.blinkMaterials[oe]&&(this.blinkMaterials[oe]={}),void 0==this.blinkMaterials[oe][re.material[0].uuid]&&(this.blinkMaterials[oe][re.material[0].uuid]=re.material[0]),this.updateInstanceGeometry(re,ne,ae,$)}}}}}},{key:"updateInstanceGeometry",value:function(e,t,i,r){var n=e.material[0]||e.material,a=t.rgbaColor,o=void 0,l=void 0;n.transparent===t.transparent?(o=i,l=s.EnumInstanceState.HIDDEN):(o=s.EnumInstanceState.HIDDEN,l=i);var u=e.geometry;if(u.getAttribute("vState").array[r]=o,u.getAttribute("vState").needsUpdate=!0,void 0!==u.getAttribute("vState2")&&(u.getAttribute("vState2").array[r]=l),void 0!==u.getAttribute("vState2")&&(u.getAttribute("vState2").needsUpdate=!0),u.getAttribute("aColor").array[4*r]=a[0],u.getAttribute("aColor").array[4*r+1]=a[1],u.getAttribute("aColor").array[4*r+2]=a[2],u.getAttribute("aColor").array[4*r+3]=a[3],u.getAttribute("aColor").needsUpdate=!0,i==s.EnumInstanceState.CLIPPING){if(void 0!==u.getAttribute("vClipping")&&(u.getAttribute("vClipping").array[r]=i),void 0!==u.getAttribute("vClipping")&&(u.getAttribute("vClipping").needsUpdate=!0),e.material instanceof Array)return this.addInstanceMaterialForClip(e.material[0].uuid,e.material[0]),void this.addInstanceMaterialForClip(e.material[1].uuid,e.material[1]);this.addInstanceMaterialForClip(e.material.uuid,e.material)}if(e.material instanceof Array)return e.material[0].needsUpdate=!0,void(e.material[1].needsUpdate=!0);e.material.needsUpdate=!0}},{key:"updateInstanceGeometryByNodeInfos",value:function(e,t,i){for(var r=e.length,n=0;n<r;++n){var a=e[n],o=a.index,l=this.model.tilesLoader.getInstanceMeshNodeById(a.parent);for(var u in l){var c=l[u],h=c.mesh;s.TilesUtil.isInstanceNodeInVisible(h)||this.updateInstanceGeometry(h,t,i,o)}}}},{key:"_updateInstanceWireFrameMaterial",value:function(e,t){for(var i in e.hiddenUserIdSetObject){var r=t[i];if(r)for(var n=r.length,a=0;a<n;++a){var o=r[a],l=o.lineId,u=o.index,c=this.model.tilesLoader.getInstanceLineNodeById(l);if(c&&!1!==c.visible){var h=c.geometry;h.getAttribute("vState").array[u]=s.EnumInstanceState.HIDDEN,h.getAttribute("vState").needsUpdate=!0}}}for(var d in e.transparentUserIdSetObject){var f=t[d];if(f){var p=this.model.sceneState.frozonMaterial,m=s.MaterialUtil.getColorParamsByMaterial(p),v=s.EnumInstanceState.OVERRIDED;this.updateInstanceWireFrameGeometryByNodeInfos(f,m,v)}}for(var g in e.overrideUserIdSetObject){var y=t[g];if(y){var M=e.overrideUserIdSetObject[g],E=this._getMaterialByName(M);if("material_modifyOpacity"!=M){var b=s.MaterialUtil.getColorParamsByMaterial(E),x=s.EnumInstanceState.OVERRIDED;this.updateInstanceWireFrameGeometryByNodeInfos(y,b,x)}}}for(var I in e.hoverUserIdSetObject){var T=t[I];if(T)for(var w=T.length,C=0;C<w;++C){var S=T[C],A=S.lineId,k=this.model.tilesLoader.getInstanceLineNodeById(A);if(k&&!1!==k.visible){var R=this.model.sceneState.getHoverMaterial(k.material[0]),B=s.MaterialUtil.getColorParamsByMaterial(R),L=s.EnumInstanceState.HOVER;this.updateInstanceGeometry(k,B,L,S.index)}}}for(var O in e.blinkUserIdSetObject){var P=t[O];if(P)for(var D=P.length,N=0;N<D;++N){var _=P[N],H=_.lineId,F=this.model.tilesLoader.getInstanceLineNodeById(H);if(F&&!1!==F.visible){var U=s.MaterialUtil.getColorParamsByMaterial(F.material[0]),G=s.EnumInstanceState.BLINK,z=this.getBlinkMaterialName(O,e.blinkUserIdSetObject[O]);void 0==this.blinkMaterials[z]&&(this.blinkMaterials[z]={}),void 0==this.blinkMaterials[z][F.material[0].uuid]&&(this.blinkMaterials[z][F.material[0].uuid]=F.material[0]),this.updateInstanceGeometry(F,U,G,_.index)}}}}},{key:"updateInstanceWireFrameGeometryByNodeInfos",value:function(e,t,i){for(var r=e.length,n=0;n<r;++n){var a=e[n],o=a.lineId,s=this.model.tilesLoader.getInstanceLineNodeById(o);s&&!1!==s.visible&&this.updateInstanceGeometry(s,t,i,a.index)}}},{key:"resetAllStates",value:function(){treeNode._content.meshes.traverse(function(e){if(e.isMesh){var t=mesh.geometry;t.clearGroups(),t._visible=!0,t.addGroup(0,mesh.indexCount,s.Model.EnumFilterState.NONE)}})}},{key:"isHidden",value:function(e){var t=this.model.tilesLoader.tileReader.getIndexByUserId(e);return this.objectInfoManager.isHidden(t)}},{key:"isFrozen",value:function(e){var t=this.model.tilesLoader.tileReader.getIndexByUserId(e);return this.objectInfoManager.isFrozen(t)}},{key:"isTransparent",value:function(e){var t=this.model.tilesLoader.tileReader.getIndexByUserId(e);return this.objectInfoManager.isTransparent(t)}},{key:"isPickable",value:function(e){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isComponentActive",this).call(this,e)&&!this.objectInfoManager.isFrozen(e)&&!this.objectInfoManager.isHidden(e)}},{key:"_insertIndexMeshes",value:function(e,t,i,r,n){void 0===e.mergedMeshesStates[t]?(e.mergedMeshesStates[t]={},e.mergedMeshesStates[t][i]={},e.mergedMeshesStates[t][i].state=r,e.mergedMeshesStates[t][i].userId=n):void 0===e.mergedMeshesStates[t][i]&&(e.mergedMeshesStates[t][i]={},e.mergedMeshesStates[t][i].state=r,e.mergedMeshesStates[t][i].userId=n)}},{key:"_collectLineCategoryMeshState",value:function(e,t,i,r){for(var n in e.userIndexMap){var a=this.model.tilesLoader.userIdMapIndices[n];if(a)for(var o=a.length,l=0;l<o;++l){var u=a[l],c=u.indexId,h=u.meshId;if(-1!==h.indexOf("line")){var d=i[n];if(d){var f=d[0].userData;s.TilesUtil.matchLineCategory(f,t)||this._insertIndexMeshes(e,h,c,r,n)}}}}}},{key:"_collectMeshState",value:function(e,t,i){var r=this;for(var n in t){(function(t){var n=r.model.tilesLoader.userIdMapIndices[t];if(!n)return"continue";n.map(function(n){var a=n.indexId,o=n.meshId;r._insertIndexMeshes(e,o,a,i,t)})})(n)}}},{key:"rebuildIndices",value:function(e,t){e.mergedMeshesStates={},this._collectMeshState(e,e.hiddenUserIdSetObject,s.Model.EnumFilterState.HIDDEN),this._collectLineCategoryMeshState(e,this.model.tilesLoader.borderLineCategory,t,s.Model.EnumFilterState.HIDDEN),this._collectMeshState(e,e.overrideUserIdSetObject,s.Model.EnumFilterState.OVERRIDED),this._collectMeshState(e,e.transparentUserIdSetObject,s.Model.EnumFilterState.TRANSPARENT),this._collectMeshState(e,e.hoverUserIdSetObject,s.Model.EnumFilterState.HOVER),this._collectMeshState(e,e.blinkUserIdSetObject,s.Model.EnumFilterState.BLINK),this._collectMeshState(e,this.model.mapClippingIds,s.Model.EnumFilterState.CLIPPING),this._collectMeshState(e,e.localClipUserIdSetObject,s.Model.EnumFilterState.LOCALCLIPPING);var i=this.model.sceneState.getHoverMaterial(),r=this.model.sceneState.frozonMaterial,n=[];n[s.Model.EnumFilterState.HOVER]=i,n[s.Model.EnumFilterState.TRANSPARENT]=r;var a=e._content.meshes;for(var o in e.mergedMeshesStates){var l=a.getObjectByName(o);l&&this.rebuildMesh(l,o,e,n)}}},{key:"rebuildMesh",value:function(e,t,i,r){var n=this;if(e){var a=function(e,t,i,r,a){var o=null,l=void 0,u=t;switch(t>s.Model.EnumFilterState.OVERRIDED&&(t=s.Model.EnumFilterState.OVERRIDED),t){case s.Model.EnumFilterState.NONE:case s.Model.EnumFilterState.CLIPPING:break;case s.Model.EnumFilterState.HOVER:o=n.model.sceneState.getHoverMaterial(e.material[0]),e.material[s.Model.EnumFilterState.HOVER]=o;break;case s.Model.EnumFilterState.BLINK:l=n.getBlinkMaterialName(i,r.blinkUserIdSetObject[i]),void 0==n.blinkMaterials[l]?(n.blinkMaterials[l]={},o=n.model.sceneState.getBlinkMaterial(e.material[0],n.model.id),n.blinkMaterials[l][l]=o):o=n.blinkMaterials[l][l],r.localClipUserIdSetObject&&r.localClipUserIdSetObject[i]&&(o=n.getMaterialForClipFrom(o),n.blinkMaterials[l]=o),e.material[s.Model.EnumFilterState.BLINK]=o;break;case s.Model.EnumFilterState.OVERRIDED:l=r.overrideUserIdSetObject[i];var c=1;"material_modifyOpacity"==l?(c=r.modifyOpacityUserIdSetObject[i].opacity,o=n.getMaterialForModifyOpacityFrom(e.material[0],c)):(o=n._getMaterialByName(l),r.modifyOpacityUserIdSetObject[i]&&(c=r.modifyOpacityUserIdSetObject[i].opacity,o=n.getMaterialForModifyOpacityFrom(o,c))),o.srcOpacity=c,n.model.materialManager.materialMap[l]=o,r.localClipUserIdSetObject&&r.localClipUserIdSetObject[i]&&(o=n.getMaterialForClipFrom(o)),o.side=e.material[0].side;for(var h=Math.max(e.material.length,t),d=!1,f=t;f<h;++f)l===e.material[f].name&&(d=!0,u=f);!1===d&&(e.material[h]=o,u=h);break;case s.Model.EnumFilterState.LOCALCLIPPING:o=n.getMaterialForClipFrom(e.material[0]),e.material[s.Model.EnumFilterState.LOCALCLIPPING]=o;break;default:e.material[t]=a[t]}return u},o=i.mergedMeshesStates[t],l=e.geometry;l.clearGroups(),l._visible=!0;var u=e.indexGroups,c=0,h=s.TilesUtil.nodeIndexGroupsSort(u),d=h.length,f=h[0].indexGroup.indexCount,p=s.Model.EnumFilterState.NONE;if(o[0]&&o[0].state!==s.Model.EnumFilterState.NONE){p=o[0].state;p=a(e,p,o[0].userId,i,r)}for(var m=1;m<d;++m){var v=h[m].indexGroup;if(o[m]){var g=o[m].userId,y=o[m].state,M=a(e,y,g,i,r);M===p?f+=v.indexCount:(l.addGroup(c,f,p),p=M,c=v.indexStart,f=v.indexCount)}else if(p===s.Model.EnumFilterState.NONE)f+=v.indexCount;else{l.addGroup(c,f,p);var E=o[m-1].userId;a(e,p,E,i,r),p=s.Model.EnumFilterState.NONE,c=v.indexStart,f=v.indexCount}}if(f>0&&p!==s.Model.EnumFilterState.HIDDEN){var b=o[d-1]&&o[d-1].userId,x=a(e,p,b,i,r);l.addGroup(c,f,x)}}}},{key:"_collectSelectUserIds",value:function(e,t){if(e.selectUserIdSetObject={},this.model.sceneState.selectionSet&&this.model.sceneState.selectionSet[this.model.id]){var i=this.model.sceneState.selectionSet[this.model.id];for(var r in i){var n=this.model.tilesLoader.tileReader.getIndexByUserId(r);t[n]&&(e.selectUserIdSetObject[n]=!0)}}}},{key:"_collectHoverUserIds",value:function(e,t){if(e.hoverUserIdSetObject={},this.model.sceneState.hoverId){var i=this.model.tilesLoader.tileReader.getIndexByUserId(this.model.sceneState.hoverId);t[i]&&(e.hoverUserIdSetObject[i]=!0)}}},{key:"_collectBlinkUserIds",value:function(e,t){e.blinkUserIdSetObject={};var i=this.model.sceneState.getBlinkComponentsIdMap(this.model.id);for(var r in i){var n;this.idCacheMap.get(r)?n=this.idCacheMap.get(r):(n=this.model.tilesLoader.tileReader.getIndexByUserId(r),this.idCacheMap.set(r,n)),t[n]&&(e.blinkUserIdSetObject[n]=i[r])}}},{key:"_collectLocalClipUserIds",value:function(e,t){e.localClipUserIdSetObject={};var i=this.getLocalClippingList();for(var r in i){var n;this.idCacheMap.get(r)?n=this.idCacheMap.get(r):(n=this.model.tilesLoader.tileReader.getIndexByUserId(r),this.idCacheMap.set(r,n)),t[n]&&(e.localClipUserIdSetObject[n]=!0)}}},{key:"_collectModifyOpacityUserIds",value:function(e,t){e.modifyOpacityUserIdSetObject={};var i=this.getModifyOpacityList();for(var r in i){var n;this.idCacheMap.get(r)?n=this.idCacheMap.get(r):(n=this.model.tilesLoader.tileReader.getIndexByUserId(r),this.idCacheMap.set(r,n)),t[n]&&(e.modifyOpacityUserIdSetObject[n]=i[r])}}},{key:"getBlinkMaterialName",value:function(e,t){var i=e.toString();return t&&(t.color&&(i+="|"+t.color.getHEX()),t.interval&&(i+="|"+t.interval.toString())),i}},{key:"_collectFilteredUserIds",value:function(e,t,i){var r=this._hasHiddenFileIdFilter(),n=this._hasVisibleFilter()||this.model.hasHiddenSourceObjectUserId(),a=this._hasOverrideMaterialFilter(),o=this._hasTransparentFilter(),l=Object.getOwnPropertyNames(e.blinkUserIdSetObject).length>0,u=this._hasLocalClipping(),c=this._hasModifyOpacityList(),h=this.mapMaterialIdToUserIdsForFilter={};if(e.hiddenUserIdSetObject={},e.overrideUserIdSetObject={},e.transparentUserIdSetObject={},r||n||a||o||l||u||c)for(var d in t){var f=i[d],p=f.length;if(f&&0!==p)for(var m=0;m<p;m++){var v=f[m];if(r&&this._isHiddenFileId(v)||n&&!1===this._isVisible(v)||this.model.isHiddenSourceObjectUserId(d))void 0===h[v.materialId]&&(h[v.materialId]={}),void 0===h[v.materialId][s.Model.EnumFilterState.HIDDEN]&&(h[v.materialId][s.Model.EnumFilterState.HIDDEN]={}),h[v.materialId][s.Model.EnumFilterState.HIDDEN][d]=!0,e.hiddenUserIdSetObject[d]=!0;else if(u&&e.localClipUserIdSetObject[d]&&(void 0===h[v.materialId]&&(h[v.materialId]={}),void 0===h[v.materialId][s.Model.EnumFilterState.LOCALCLIPPING]&&(h[v.materialId][s.Model.EnumFilterState.LOCALCLIPPING]={}),h[v.materialId][s.Model.EnumFilterState.LOCALCLIPPING][d]=!0),o&&this._isTransparent(v))void 0===h[v.materialId]&&(h[v.materialId]={}),void 0===h[v.materialId][s.Model.EnumFilterState.TRANSPARENT]&&(h[v.materialId][s.Model.EnumFilterState.TRANSPARENT]={}),h[v.materialId][s.Model.EnumFilterState.TRANSPARENT][d]=!0,e.transparentUserIdSetObject[d]=!0;else if(l&&e.blinkUserIdSetObject[d])void 0===h[v.materialId]&&(h[v.materialId]={}),void 0===h[v.materialId][s.Model.EnumFilterState.BLINK]&&(h[v.materialId][s.Model.EnumFilterState.BLINK]={}),h[v.materialId][s.Model.EnumFilterState.BLINK][d]=!0;else if(a&&this._hasOverrideMaterial(v)){var g=this._getOverrideMaterial(v),y=null!=g?g.name:"";""!==y&&(void 0===h[v.materialId]&&(h[v.materialId]={}),void 0===h[v.materialId][s.Model.EnumFilterState.OVERRIDED]&&(h[v.materialId][s.Model.EnumFilterState.OVERRIDED]={}),h[v.materialId][s.Model.EnumFilterState.OVERRIDED][d]=y,e.overrideUserIdSetObject[d]=y)}else if(c&&e.modifyOpacityUserIdSetObject[d]){var y="material_modifyOpacity";e.overrideUserIdSetObject[d]=y}else;}}}},{key:"_dealHideUserIndex",value:function(e,t){var i=t[e];if(i)for(var r=i.length,n=0;n<r;++n){var a=i[n],o=a.index,l=this.model.tilesLoader.getInstanceMeshNodeById(a.parent);for(var u in l){var c=l[u],h=c.mesh;if(!s.TilesUtil.isInstanceNodeInVisible(h)){var d=h.geometry;d.getAttribute("vState").array[o]=s.EnumInstanceState.HIDDEN,d.getAttribute("vState").needsUpdate=!0,d.getAttribute("vState2").array[o]=s.EnumInstanceState.HIDDEN,d.getAttribute("vState2").needsUpdate=!0}}}}},{key:"_updateInstanceDemandMaterial",value:function(e,t,i){var r=this.model.onDemandManager.idMap;for(var n in t)r[n]||this._dealHideUserIndex(n,i)}}]),t}(s.FilterManager);s.BimTileFilterManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),t=s.Utils.defaultValue(t,{}),this._referencePlane=new THREE.Plane,this._elevation=s.Utils.defaultValue(t.elevation,0);var i=s.Utils.defaultValue(t.position,new THREE.Vector3(0,0,0));i.y=this._elevation,this._position=i,this._direction=s.Utils.defaultValue(t.direction,new THREE.Vector3(0,1,0)),this._referencePlane.setFromNormalAndCoplanarPoint(this._direction,this._position),this._scratchInsertPoint=null}return _createClass(e,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"remove",value:function(){this._referencePlane=null}},{key:"update",value:function(){}},{key:"setColor",value:function(){}},{key:"setElevation",value:function(e){this._position.y=e,this._elevation=e,this._referencePlane.setFromNormalAndCoplanarPoint(this._direction,this._position)}},{key:"getElevation",value:function(){return this._elevation}},{key:"intersect",value:function(e){return this._scratchInsertPoint||(this._scratchInsertPoint=new THREE.Vector3),e.intersectPlane(this._referencePlane,this._scratchInsertPoint)}},{key:"elevation",get:function(){return this._elevation}}]),e}();s.Ground=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkMeshBasicMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.basic.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.basic.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;");return t=t.replace("#include <fog_fragment>","\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);\n                #include <fog_fragment>")}}]),t}(THREE.MeshBasicMaterial),t=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkMeshStandardMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.standard.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.standard.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;");return t=t.replace("#include <dithering_fragment>","#include <dithering_fragment>\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);")}}]),t}(THREE.MeshStandardMaterial),i=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkMeshBasicMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.phong.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.phong.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.phong.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;");return t=t.replace("#include <dithering_fragment>","#include <dithering_fragment>\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);")}}]),t}(THREE.MeshPhongMaterial),r=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkMeshBasicMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.lambert.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.lambert.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.lambert.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;");return t=t.replace("#include <dithering_fragment>","#include <dithering_fragment>\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);")}}]),t}(THREE.MeshLambertMaterial),n=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkLineBasicMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.basic.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.basic.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;")
;return t=t.replace("#include <fog_fragment>","\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);\n                #include <fog_fragment>")}}]),t}(THREE.LineBasicMaterial),a=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.type="BlinkPointsMaterial";var r=s.Blink.DefaultBlinkColor;return i.blinkColor=new THREE.Vector4(r.color.r,r.color.g,r.color.b,r.opacity),i.blinkCoefficient=0,i.uniforms=THREE.UniformsUtils.merge([THREE.ShaderLib.points.uniforms,{blinkColor:{value:i.blinkColor.clone()},blinkCoefficient:{value:0}}]),i.vertexShader=THREE.ShaderLib.points.vertexShader,i.fragmentShader=i._getFragmentShader(THREE.ShaderLib.points.fragmentShader),i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.blinkColor=null,this.uniforms=null,this.dispose()}},{key:"copy",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e),e.blinkColor&&this.blinkColor.copy(e.blinkColor),e.blinkCoefficient&&(this.blinkCoefficient=e.blinkCoefficient)}},{key:"setBlinkColor",value:function(e){this.blinkColor.fromArray(e.toArray()),this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"resetBlinkUniformValue",value:function(){this.uniforms.blinkColor.value.copy(this.blinkColor),this.uniforms.blinkCoefficient.value=this.blinkCoefficient}},{key:"updateBlinkUniformValue",value:function(e,t,i){this.uniforms.blinkColor.value.copy(t),this.uniforms.blinkCoefficient.value=i}},{key:"_getFragmentShader",value:function(e){var t=e.replace("uniform float opacity;","uniform float opacity;\n                uniform vec4 blinkColor;\n                uniform float blinkCoefficient;");return t=t.replace("#include <fog_fragment>","\n                gl_FragColor = mix(gl_FragColor, blinkColor, blinkCoefficient);\n                #include <fog_fragment>")}}]),t}(THREE.PointsMaterial);s.Blink=s.Blink||{},s.Blink.MeshBasicMaterial=e,s.Blink.MeshStandardMaterial=t,s.Blink.MeshPhongMaterial=i,s.Blink.MeshLambertMaterial=r,s.Blink.LineBasicMaterial=n,s.Blink.PointsMaterial=a,s.Blink.DefaultBlinkColor={color:(new THREE.Color).setHex(3330982),opacity:1},s.Blink.MaterialFactory={MeshBasicMaterial:function(e){return new s.Blink.MeshBasicMaterial(e)},MeshStandardMaterial:function(e){return new s.Blink.MeshStandardMaterial(e)},MeshPhongMaterial:function(e){return new s.Blink.MeshPhongMaterial(e)},MeshLambertMaterial:function(e){return new s.Blink.MeshLambertMaterial(e)},LineBasicMaterial:function(e){return new s.Blink.LineBasicMaterial(e)},PointsMaterial:function(e){return new s.Blink.PointsMaterial(e)}}}();var J=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.ObjectGroupType.AXISGRIDMANAGER,{priority:20}));return e.globalSpace=!0,e.materialMap={},e.meshUuidMap={},e.floorHeightMap={},e.gridLineColor="#333333",e.gridBubbleColor="#333333",e.bEnableHover=!0,e.mapAxisTypes={GRIDLINE:1,GRIDBUBBLE:2},e.translateMatrix=new THREE.Matrix4,e.bHasTranslation=!1,e.mapTranslateDelta={},e.mapLinkFloorId={},e.mapFileIdGridjson={},e.mapIntersectAxisLines={},e}return _inherits(t,e),_createClass(t,[{key:"getAxisGridState",value:function(){var e={},t=this.meshUuidMap,i=[];for(var r in t)if(t.hasOwnProperty(r)){var n=[];for(var a in t[r])if(t[r].hasOwnProperty(a)&&0!==Object.keys(t[r][a]).length){var o={};o.id=a,o.height=this.floorHeightMap[r][a].height,n.push(o)}i.push({fileId:r,floorInfos:n})}var s={};return e.hasOwnProperty("default")?s.fileInfos={fileId:"",floorInfos:e.default}:s.fileInfos=i,s.gridLineColor=this.gridLineColor,s.gridBubbleColor=this.gridBubbleColor,s}},{key:"addMeshUuidInMap",value:function(e,t,i,r){var n=this.meshUuidMap;n.hasOwnProperty(e)||(n[e]={}),n[e].hasOwnProperty(t)||(n[e][t]={}),n[e][t].hasOwnProperty(i)||(n[e][t][i]={}),n[e][t][i][r]=!0}},{key:"addFloorHeightInMap",value:function(e,t,i){var r=this.floorHeightMap;r.hasOwnProperty(e)||(r[e]={}),r[e].hasOwnProperty(t)||(r[e][t]={});var n=e+"_"+t;r[e][t]={height:i,translation:this.mapTranslateDelta[n]}}},{key:"removeFloorHeightInMap",value:function(e,t){var i=this.floorHeightMap;i.hasOwnProperty(e)&&i[e].hasOwnProperty(t)&&delete i[e][t]}},{key:"addLinesNode",value:function(e,t,i,r,n,a){var o=new THREE.BufferGeometry;o.addAttribute("position",new THREE.Float32BufferAttribute(e,3));var s=new THREE.Line(o,t);s.renderOrder=100,s.name=a,this.add(s),this.addMeshUuidInMap(i,r,n,s.uuid),this.updateMatrixWorld(!0)}},{key:"addTrianglesNode",value:function(e,t,i,r,n,a){var o=new THREE.BufferGeometry;o.setIndex(e.indexArray),o.addAttribute("position",new THREE.Float32BufferAttribute(e.vertexArray,3)),o.addAttribute("normal",new THREE.Float32BufferAttribute(e.normalArray,3));var s=new THREE.Mesh(o,t);s.renderOrder=110,s.name=a,this.add(s),this.addMeshUuidInMap(i,r,n,s.uuid),this.updateMatrixWorld(!0)}},{key:"createMaterial",value:function(e,t){return this.materialMap.hasOwnProperty(e)||(this.materialMap[e]={}),this.materialMap[e][t.color]?this.materialMap[e][t.color]:("string"!=typeof t.color&&(t.color="#"+t.color.getHEX()),this.materialMap[e][t.color]=s.MaterialUtil.createStandardMaterial(t),this.materialMap[e][t.color])}},{key:"loadAxisGridsByHeight",value:function(e,t,i,r,n){var a=this,o=new THREE.FileLoader;this.axisGridHeight=i,void 0!=i&&this.addFloorHeightInMap(t,r,i),o.load(e,function(o){var s=JSON.parse(o);a.gridsJson=s;var l=s.grids.length,u=l;if(l&&l>0){var c=t+"_"+r;a.mapFileIdGridjson[t]=s;for(var h=0;h<l;h++){var d=a.mapLinkFloorId[c]||r;if(-1==d.toString().indexOf("_")){var f=s.grids[h].floors;if(void 0!=f&&-1==f.indexOf(d.toString())){a.floorHeightMap[t][r].hideAxisGridIndex||(a.floorHeightMap[t][r].hideAxisGridIndex=[]),a.floorHeightMap[t][r].hideAxisGridIndex.push(h),u--,0==u&&n&&n();continue}}a.loadAxisGrid(e,t,h,i,r,function(){0==--u&&n&&n()})}}else console.warn("There is no grid on this floor.")})}},{key:"unloadAxisGridsByFloor",value:function(e,t){var i=this.children,r=this.meshUuidMap;if(r.hasOwnProperty(e)&&r[e].hasOwnProperty(t)){for(var n in r[e][t]){for(var a=r[e][t][n],o=0;o<i.length;){a[i[o].uuid]?i.splice(o,1):o++}delete r[e][t][n]}this.removeFloorHeightInMap(e,t)}}},{key:"loadAxisGrid",value:function(e,t,i,r,n,a){var o=this,s=e.split("/");void 0==r&&(n=s[s.length-1].split(".")[0]);var l=0,u=o.gridsJson;if(i&&i>=0){if(!(i<u.grids.length))return void console.log("Input grid index is invalid.");l=i}for(var c=u.grids[l].gridLines,h=0;h<c.length;++h){var d=c[h].type;if("Circle"==d){var f=u.radius,p=c[h].circleCenter,m=new THREE.CircleGeometry(f,180),v=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,opacity:.5}),g=new THREE.Mesh(m,v),y=o.translate(t,n,[p[0],p[1],r]);g.position.set(y.x,y.y,y.z-.5),g.renderOrder=90,o.addMeshUuidInMap(t,n,l,g.uuid),o.add(g)}var M=c[h].lines,E=c[h].color||o.gridLineColor,b=o.mapAxisTypes.GRIDLINE;"Circle"==d&&(E=o.gridBubbleColor,"string"!=typeof E&&(E="#"+E.getHEX()),b=o.mapAxisTypes.GRIDBUBBLE);var v=o.createMaterial(b,{color:E,side:THREE.DoubleSide}),x=o.prepareLinesBuffer(t,n,M,r);o.addLinesNode(x,v,t,n,l,b)}for(var I=u.grids[l].texts,T=0;T<I.length;++T){var w=I[T],C=w.color||o.gridBubbleColor;"string"!=typeof C&&(C="#"+C.getHEX());var b=o.mapAxisTypes.GRIDBUBBLE,v=o.createMaterial(b,{color:C,side:THREE.DoubleSide}),S=o.prepareTrianglesBuffer(t,n,w.indexs,w.vertexs,r);o.addTrianglesNode(S,v,t,n,l,b)}a&&a()}},{key:"prepareLinesBuffer",value:function(e,t,i,r){for(var n=[],a=0;a<i.length;++a){var o=i[a];r&&!isNaN(r)&&(o[2]=r,o[5]=r);var s=this.translate(e,t,[o[0],o[1],o[2]]);n.push(s.x,s.y,s.z),s=this.translate(e,t,[o[3],o[4],o[5]]),n.push(s.x,s.y,s.z)}return n}},{key:"prepareTrianglesBuffer",value:function(e,t,i,r,n){for(var a=[],o=[],s=0;s<r.length;++s){var l=r[s];if(void 0==l||void 0==l[0]||void 0==l[1]||void 0==l[2]){console.log("Contains invalid vertex.");break}n&&!isNaN(n)&&(l[2]=n);var u=this.translate(e,t,l);a.push(u.x,u.y,u.z),o.push(0,0,1,0,0,1,0,0,1)}return{indexArray:i,vertexArray:a,normalArray:o}}},{key:"unloadAxisGrid",value:function(e,t,i){var r=this.children,n=this.meshUuidMap;if(n.hasOwnProperty(e)&&n[e].hasOwnProperty(t)&&n[e][t].hasOwnProperty(i)){for(var a=n[e][t][i],o=0;o<r.length;){a[r[o].uuid]?r.splice(o,1):o++}delete n[e][t][i]}}},{key:"unloadAllAxisGrids",value:function(){var e=this.meshUuidMap;for(var t in e)if(e.hasOwnProperty(t))for(var i in e[t])if(e[t].hasOwnProperty(i)){for(var r in e[t][i])e[t][i].hasOwnProperty(r)&&this.unloadAxisGrid(t,i,r);this.removeFloorHeightInMap(t,i)}}},{key:"enableDepthTest",value:function(e){for(var t=this.children,i=0;i<t.length;i++)t[i].material.depthTest=e}},{key:"formatHidedAxisGridIndex",value:function(e,t,i){e||(e="default");var r=this.floorHeightMap[e]={},n=0,a=!0,o=!1,s=void 0;try{for(var l,u=t.grids[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,h=c.floors,d=!0,f=!1,p=void 0;try{for(var m,v=i[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var g=m.value;0==r.hasOwnProperty(g)&&(r[g]={});var y=r[g];-1==h.indexOf(g)&&(0==y.hasOwnProperty("hideAxisGridIndex")&&(y.hideAxisGridIndex=[]),y.hideAxisGridIndex.push(n))}}catch(e){f=!0,p=e}finally{try{!d&&v.return&&v.return()}finally{if(f)throw p}}n++}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}}},{key:"getHidedAxisGridIndex",value:function(e,t){e||(e="default");var i=this.floorHeightMap[e][t];return i.hasOwnProperty("hideAxisGridIndex")?i.hideAxisGridIndex:[]}},{key:"prepareGridLines",value:function(e,t,i){void 0==t&&(t=[0,0,0]),this.verticalLines=[],this.horizontalLines=[];for(var r=e.grids,n=0;n<r.length;n++)if(!(i&&i.indexOf(n)>=0)){var a=r[n].gridLines[0].lines[0],o=[0,0,0,0,0,0];o.name=r[n].name,o[0]=a[0]+t[0],o[1]=a[1]+t[1],o[3]=a[3]+t[0],o[4]=a[4]+t[1],Math.abs(a[0]-a[3])<Math.abs(a[1]-a[4])?this.horizontalLines.push(o):this.verticalLines.push(o)}}},{key:"getNearestIntersection",value:function(e,t){var i={dist:Number.MAX_SAFE_INTEGER,intersect:null};e=new THREE.Vector3(e.x,e.y,e.z);var r=!0,n=!1,a=void 0;try{for(var o,s=this.intersections[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=l.clone();u.z=t;var c=u.distanceTo(e);c<i.dist&&(i.dist=c,i.intersect=l)}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return i}},{key:"getIntersectLines",value:function(e){return this.mapIntersectAxisLines[e]}},{key:"destroy",value:function(){this.mapIntersectAxisLines=null,this.horizontalLines=null,this.verticalLines=null,this.intersections=null,this.floorHeightMap=null,this.mapTranslateDelta=null,this.mapLinkFloorId=null,this.mapFileIdGridjson=null}},{key:"calculateIntersections",value:function(e){void 0==e&&(e=[0,0,0]),this.intersections=[];for(var t,i,r,n,a=this.horizontalLines.length,o=this.verticalLines.length,s=0;s<a;s++){var l=this.horizontalLines[s];t=new THREE.Vector2(l[0],l[1]),i=new THREE.Vector2(l[3],l[4]);for(var u=0;u<o;u++){var c=this.verticalLines[u];if(r=new THREE.Vector2(c[0],c[1]),n=new THREE.Vector2(c[3],c[4]),r.y<=Math.max(t.y,i.y)&&r.y>=Math.min(t.y,i.y)&&t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)){var h=new THREE.Vector3(t.x+e[0],r.y+e[1],this.axisGridHeight);h.name=l.name+c.name,this.mapIntersectAxisLines.hasOwnProperty(h.name)||(this.mapIntersectAxisLines[h.name]=[]),l[0]+=e[0],l[1]+=e[1],l[3]+=e[0],l[4]+=e[1],this.mapIntersectAxisLines[h.name].push(l),c[0]+=e[0],c[1]+=e[1],c[3]+=e[0],c[4]+=e[1],this.mapIntersectAxisLines[h.name].push(c),this.intersections.push(h)}}}}},{key:"getAxisGridHeight",value:function(){return this.axisGridHeight}},{key:"getAxisGridPlane",value:function(e){var t=new THREE.Plane;return t.setFromNormalAndCoplanarPoint(new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,e)),t}},{key:"getAxisGridPlanes",value:function(){var e=[],t=this.floorHeightMap;for(var i in t)if(t.hasOwnProperty(i))for(var r in t[i])if(t[i].hasOwnProperty(r)){var n=t[i][r].height,a=t[i][r].translation||[0,0,0];e.push(this.getAxisGridPlane(n+a[2]))}return e}},{key:"snapOnFloors",value:function(e){var t=this.floorHeightMap,i=this.mapFileIdGridjson;if(0==Object.keys(i).length)return[];var r=0,n=[];for(var a in t)if(t.hasOwnProperty(a))for(var o in t[a])if(t[a].hasOwnProperty(o))if(null!=e[r]){var s=t[a][o].height,l=t[a][o].translation||[0,0,0];this.axisGridHeight=s+l[2];var u=t[a][o].hasOwnProperty("hideAxisGridIndex")?t[a][o].hideAxisGridIndex:null;this.prepareGridLines(i[a],l,u),n.push(this.snaping(e[r++],l))}else r++;return n}},{key:"snaping",value:function(e,t){this.calculateIntersections(t);for(var i={toIntersection:1/0,toGridLine:1/0},r={toIntersection:new THREE.Vector3,toGridLine:new THREE.Vector3},n=0;n<this.intersections.length;n++){var a=this.intersections[n].clone();a.name=this.intersections[n].name;var o=a.distanceTo(e);o<i.toIntersection&&(i.toIntersection=o,r.toIntersection=a)}for(var s=null,l=0,u=0;u<this.horizontalLines.length;u++){var c=this.horizontalLines[u];e.y>Math.max(c[1],c[4])||e.y<Math.min(c[1],c[4])||(l=Math.abs(c[0]-e.x))<i.toGridLine&&(i.toGridLine=l,s=c,r.toGridLine=new THREE.Vector3(c[0],e.y,this.axisGridHeight))}for(var h=0;h<this.verticalLines.length;h++){var d=this.verticalLines[h];e.x>Math.max(d[0],d[3])||e.x<Math.min(d[0],d[3])||(l=Math.abs(d[1]-e.y))<i.toGridLine&&(i.toGridLine=l,s=d,r.toGridLine=new THREE.Vector3(e.x,d[1],this.axisGridHeight))}var f={};return f.intersectLines=this.mapIntersectAxisLines[r.toIntersection.name],f.gridLine=s,{point:e,height:this.axisGridHeight,snapLines:f,nearestPoint:r,minDistance:i}}},{key:"setGridBubblesColor",value:function(e){this.gridBubbleColor=e;for(var t=this.children,i=0;i<t.length;i++)t[i].name==this.mapAxisTypes.GRIDBUBBLE&&(t[i].material.color=new THREE.Color(e.red/255,e.green/255,e.blue/255),t[i].material.opacity=e.alpha)}},{key:"getGridBubblesColor",value:function(){return this.gridBubbleColor}},{key:"setGridLinesColor",value:function(e){this.gridLineColor=e;for(var t=this.children,i=0;i<t.length;i++)t[i].name==this.mapAxisTypes.GRIDLINE&&(t[i].material.color=new THREE.Color(e.red/255,e.green/255,e.blue/255),t[i].material.alpha=e.alpha)}},{key:"getGridLinesColor",value:function(){return this.gridLineColor}},{key:"getElements",value:function(){return this.children}},{key:"setIsEnableHover",value:function(e){this.bEnableHover=e}},{key:"getIsEnableHover",value:function(){return this.bEnableHover}},{key:"setTranslation",value:function(e,t,i,r,n){var a=e+"_"+t;this.mapTranslateDelta[a]=[i,r,n]}},{key:"translate",value:function(e,t,i){var r=e+"_"+t,n=this.mapTranslateDelta[r],a=new THREE.Vector3(i[0],i[1],i[2]);return n&&(this.translateMatrix.makeTranslation(n[0],n[1],n[2]),a.applyMatrix4(this.translateMatrix)),a}},{key:"setLinkFloorId",value:function(e,t,i){var r=e+"_"+t;this.mapLinkFloorId[r]=i}},{key:"getIntersectPoints",value:function(e,t){var i=[],r=new THREE.Matrix4;r.getInverse(t);var n=this.getAxisGridPlanes(),a=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.applyMatrix4(t);var h=e.ray.intersectPlane(c);h&&h.applyMatrix4(r),i.push(h)}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return i}},{key:"getAxisGridsIntersection",value:function(e,t,i){i||"[object Array]"!==Object.prototype.toString.call(t)||(i=t,t=e,e="default");var r=this.computeIntersection(e,i),n=this.floorHeightMap[e],a=n[t].height,o={};for(var s in r)for(var l=r[s],u=0;u<l.intersects.length;u++){var c=l.intersects[u];c.intersectPoint.z=a;var h={intersection:c.intersectPoint,axisGrids:c.axisGrids};o[c.name]=h}return Object.values(o)}},{key:"computeIntersection",value:function(e,t){t||"[object Array]"!==Object.prototype.toString.call(e)||(t=e,e="default"),t=t.map(function(e){return e.toString()});for(var i=this.mapFileIdGridjson[e].grids,r=i.filter(function(e){return t.indexOf(e.name)>=0}),n={},a=0;a<r.length-1;a++){var o,s=r[a];n[s.name]?o=n[s.name].lineSegments:(o=this.getGridLineSegments(s),n[s.name]={lineSegments:o,intersects:[]});for(var l=a+1;l<r.length;l++){var u,c=r[l];n[c.name]?u=n[c.name].lineSegments:(u=this.getGridLineSegments(c),n[c.name]={lineSegments:u,intersects:[]});for(var h=0,d=0;d<o.length;d++)for(var f=o[d],p=0;p<u.length;p++){var m=u[p],v=this.computeSegmentsIntersect(f[0],f[1],m[0],m[1]);v&&(n[s.name].intersects.push({name:s.name+"_"+c.name+"_"+h,axisGrids:[s.name,c.name],intersectPoint:v,segmentNum:d}),n[c.name].intersects.push({name:s.name+"_"+c.name+"_"+h,axisGrids:[s.name,c.name],intersectPoint:v,segmentNum:p}),h++)}}}return n}},{key:"getPartitionDataByAxisGrids",value:function(e,t){t||"[object Array]"!==Object.prototype.toString.call(e)||(t=e,e="default");var i=this.computeIntersection(e,t),r={},n=0;for(d in i){var a=i[d];a.intersects.sort(function(e,t){if(e.segmentNum!==t.segmentNum)return e.segmentNum-t.segmentNum;var i=a.lineSegments[e.segmentNum][0],r=e.intersectPoint,n=t.intersectPoint;return(r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)-((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y))});for(var o=1;o<a.intersects.length;o++){var s={origin:a.intersects[o].name,target:a.intersects[o-1].name,id:n++,linePoints:[a.intersects[o].intersectPoint]};if(s.axis=d,a.intersects[o].segmentNum>a.intersects[o-1].segmentNum)for(var l=a.intersects[o].segmentNum;l>a.intersects[o-1].segmentNum;l--)s.linePoints.push(a.lineSegments[l][0]);else if(a.intersects[o].segmentNum<a.intersects[o-1].segmentNum)for(var l=a.intersects[o].segmentNum;l<a.intersects[o-1].segmentNum;l++)s.linePoints.push(a.lineSegments[l][1]);s.linePoints.push(a.intersects[o-1].intersectPoint),r[a.intersects[o].name]||(r[a.intersects[o].name]={subLines:[],name:a.intersects[o].name}),r[a.intersects[o].name].subLines.push(s),r[a.intersects[o-1].name]||(r[a.intersects[o-1].name]={subLines:[],name:a.intersects[o-1].name});for(var u={origin:s.target,target:s.origin,id:s.id,axis:s.axis,linePoints:[]},c=s.linePoints.length-1;c>=0;c--)u.linePoints.push(s.linePoints[c]);r[a.intersects[o-1].name].subLines.push(u)}}var h=[];for(var d in r)for(var f=r[d],p=f.subLines,o=0;o<p.length;o++){var s=p[o],m=[{intersect:f,subLine:s}];!function e(t){var i=t[t.length-1].subLine;if(!i.used){for(var n,a=i.linePoints,o=a[a.length-1],s=a[a.length-2],l=new THREE.Vector2(s.x-o.x,s.y-o.y),u=r[i.target],c=2*Math.PI,d=0;d<u.subLines.length;d++){var f=u.subLines[d];if(f.id!==i.id){var p=f.linePoints,m=p[0],v=p[1],g=new THREE.Vector2(v.x-m.x,v.y-m.y),y=g.angle()-l.angle();y<0&&(y+=2*Math.PI),y>=0&&y<c&&(c=y,n=f)}}if(n)if(t.push({intersect:u,subLine:n,angle:c}),n.target===t[0].subLine.target){var M=0;t.forEach(function(e){e.subLine.used=!0,M+=e.angle||0}),M-(t.length-1)*Math.PI<.001&&h.push(t)}else e(t)}}(m)}return h}},{key:"getPartitionByAxisGrids",value:function(e,t){t||"[object Array]"!==Object.prototype.toString.call(e)||(t=e,e="default");var i,r=this.getPartitionDataByAxisGrids(e,t);if(1===r.length){var n=r[0].slice(1,r[0].length);i=[],i.push(n[0].subLine.linePoints[0]),n.forEach(function(e){var t=e.subLine.linePoints.slice(1,e.subLine.linePoints.length);i=i.concat(t)})}else if(r.length>1)for(var a=0;a<r.length;a++){var o=new Set,n=r[a].slice(1,r[a].length),s=[];if(s.push(n[0].subLine.linePoints[0]),n.forEach(function(e){o.add(e.subLine.axis);var t=e.subLine.linePoints.slice(1,e.subLine.linePoints.length);s=s.concat(t)}),o.size===t.length){i=s;break}}return i}},{key:"getGridLineSegments",value:function(e){var t=e.gridLines.filter(function(e){return"Line"===e.type||"Curved"===e.type}),i=_slicedToArray(t,1),r=i[0];r||(r=e.gridLines[0]);for(var n=r.lines,a=[],o=0;o<n.length;o++)for(var s=n[o],l=0;l<s.length-5;l+=3){var u=[],c={x:s[l],y:s[l+1]},h={x:s[l+3],y:s[l+4]};u.push(c),u.push(h),a.push(u)}return a}},{key:"computeSegmentsIntersect",value:function(e,t,i,r){var n=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x),a=(e.x-r.x)*(t.y-r.y)-(e.y-r.y)*(t.x-r.x);if(n*a>0)return!1;var o=(i.x-e.x)*(r.y-e.y)-(i.y-e.y)*(r.x-e.x);if(o*((i.x-t.x)*(r.y-t.y)-(i.y-t.y)*(r.x-t.x))>0)return!1;var s=o/(a-n),l=s*(t.x-e.x),u=s*(t.y-e.y);return{x:e.x+l,y:e.y+u}}}]),t}(s.ObjectGroup);J.getInstance=function(e,t){return e.axisGridManagerMap||(e.axisGridManagerMap={},e.axisGridEnableHover=!0),e.axisGridManagerMap[t]||(e.axisGridManagerMap[t]=new s.AxisGridManager,e.objectGroups.add(e.axisGridManagerMap[t]),e.axisGridManagerMap[t].matrix.copy(e.geometryGroup.matrix),e.axisGridManagerMap[t].matrixAutoUpdate=!1,e.axisGridManagerMap[t].updateMatrixWorld(!0)),e.axisGridManagerMap[t]},J.setEnableHover=function(e,t){e.axisGridManagerMap&&(e.axisGridEnableHover=t)},J.destroy=function(e){e.axisGridManagerMap=null},s.AxisGridManager=J;var K=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.ObjectGroupType.CUSTOMPLANE,{priority:20}));return e.globalSpace=!0,e}return _inherits(t,e),_createClass(t,[{key:"addPlane",value:function(e,t,i,r){var n=new THREE.Vector3;n.addVectors(new THREE.Vector3(e.x,e.y,e.z),new THREE.Vector3(t.x,t.y,t.z)),n.multiplyScalar(.5);var a=new THREE.PlaneBufferGeometry(t.x-e.x,t.y-e.y),o=new THREE.Mesh(a,new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,depthTest:!0}));o.position.copy(n),o.renderOrder=10,this.add(o),o.updateMatrixWorld(!0);var s=new THREE.TextureLoader;s.setCrossOrigin("anonymous"),s.load(i,function(e){o.material.map=e,o.material.needsUpdate=!0,r&&r(o)})}},{key:"removePlane",value:function(e){e&&this.remove(e)}},{key:"showPlane",value:function(e){e&&(e.visible=!0)}},{key:"hidePlane",value:function(e){e&&(e.visible=!1)}},{key:"setPlaneOpacity",value:function(e,t){e&&(e.material.opacity=t)}}]),t}(s.ObjectGroup);K.getInstance=function(e){return null==e.customPlaneManager&&(e.customPlaneManager=new s.CustomPlaneManager,e.objectGroups.add(e.customPlaneManager),e.customPlaneManager.matrix.copy(e.geometryGroup.matrix),e.customPlaneManager.matrixAutoUpdate=!1,e.customPlaneManager.updateMatrixWorld(!0)),e.customPlaneManager},K.destroy=function(e){e.customPlaneManager=null},s.CustomPlaneManager=K,function(){var e=function(){function e(t){_classCallCheck(this,e),this._viewer=t,this._scene=t.getScene(),this._group=null,this._isHidden=!1,this._markersGroup={},this._textures={},this._defaultSize=32,this._defaultColor=16777215,this._textureLoader=new THREE.TextureLoader,this._textureLoader.setCrossOrigin("anonymous"),this.visibleState={}}return _createClass(e,[{key:"loadTextures",value:function(e){for(var t=this,i=0,r=e.length,n=function(){++i>=r&&(t.update(),t._viewer.render())},a=0;a<r;++a){var o=e[a];void 0===this._textures[o]?this._textures[o]=this._textureLoader.load(o,function(e){e.image=s.MaterialUtil.ensureQuadrate(e.image),n()},void 0,function(){n()}):n()}}},{key:"unloadTextures",value:function(){for(var e in this._textures)this._textures.hasOwnProperty(e)&&delete this._textures[e]}},{key:"add",value:function(e){var t=[],i=e.length;if(e&&e instanceof Array){for(var r=0;r<i;++r){var n=e[r],a={id:n.id?n.id:THREE.Math.generateUUID(),position:{x:n.position.x,y:n.position.y,z:n.position.z},size:n.size?n.size:this._defaultSize,iconUrl:n.iconUrl?n.iconUrl:null,tooltip:n.tooltip,hoverAnimation:void 0==n.hoverAnimation||n.hoverAnimation},o=void 0;a.iconUrl?(o=a.iconUrl,t.push(a.iconUrl)):o=""+this._defaultColor,void 0===this._markersGroup[o]&&(this._markersGroup[o]=[]),void 0==this.visibleState[a.id]&&(this.visibleState[a.id]=!0),this._markersGroup[o].push(a)}this.loadTextures(t)}}},{key:"remove",value:function(e){if(e){var t=e.iconUrl?e.iconUrl:""+this._defaultColor;if(void 0!==this._markersGroup[t]){for(var i=!1,r=this._markersGroup[t],n=0,a=r.length;n<a;++n)if(r[n].id===e.id){r.splice(n,1),i=!0;break}i&&this.update()}}}},{key:"removeById",value:function(e){var t=!1;for(var i in this._markersGroup)if(this._markersGroup.hasOwnProperty(i))for(var r=this._markersGroup[i],n=r.length,a=0;a<n;++a)if(r[a].id===e){r.splice(a,1),t=!0;break}t&&this.update()}},{key:"getItemById",value:function(e){for(var t in this._markersGroup)if(this._markersGroup.hasOwnProperty(t))for(var i=this._markersGroup[t],r=i.length,n=0;n<r;++n){var a=i[n];if(a.id===e)return{id:a.id,position:{x:a.position.x,y:a.position.y,z:a.position.z},size:a.size,iconUrl:a.iconUrl,tooltip:a.tooltip,hoverAnimation:a.hoverAnimation}}return null}},{key:"getItems",value:function(){var e=[];for(var t in this._markersGroup)if(this._markersGroup.hasOwnProperty(t))for(var i=this._markersGroup[t],r=i.length,n=0;n<r;++n){var a=i[n];e.push({id:a.id,position:{x:a.position.x,y:a.position.y,z:a.position.z},size:a.size,iconUrl:a.iconUrl,tooltip:a.tooltip,hoverAnimation:a.hoverAnimation})}return e.length>0?e:null}},{key:"clear",value:function(){this._group&&this._group.clear(),this.unloadTextures();for(var e in this._markersGroup)this._markersGroup.hasOwnProperty(e)&&delete this._markersGroup[e];this.update()}},{key:"activate",value:function(){this.clear()}},{key:"deactivate",value:function(){this.clear(),this._group&&(this._scene.removeObjectGroup(this._group),this._group=null)}},{key:"show",value:function(){this._group&&(this._group.visible=!0),this._isHidden=!1;for(var e in this.visibleState)this.visibleState.hasOwnProperty(e)&&(this.visibleState[e]=!0);this.update()}},{key:"showByIds",value:function(e){if(this._group&&(this._group.visible=!0),this._isHidden=!1,e&&e instanceof Array){for(var t=e.length,i=0;i<t;i++)this.visibleState[e[i]]=!0;this.update()}}},{key:"hide",value:function(){this._group&&(this._group.visible=!1),this._isHidden=!0;for(var e in this.visibleState)this.visibleState.hasOwnProperty(e)&&(this.visibleState[e]=!1);this.update()}},{key:"hideByIds",value:function(e){if(e&&e instanceof Array){for(var t=e.length,i=0;i<t;i++)this.visibleState[e[i]]=!1;this.update()}}},{key:"load",value:function(e){this.clear(),this.add(e),this.update()}},{key:"_createParticle",value:function(e,t,i){for(var r=this._textures[i],n=[],a=0;a<t;++a){var o=e[a];o.isHideByClustering||this.visibleState[o.id]&&n.push(a)}var l=n.length,u=new Float32Array(3*l),c=new Float32Array(l),h=new Boolean(l),d=new THREE.Vector3,f=0,p=[],m=0;n.map(function(t){var i=e[t];d.set(i.position.x,i.position.y,i.position.z),d.toArray(u,3*m),c[t]=i.size,h[t]=i.hoverAnimation,p.push(i.id),f<i.size&&(f=i.size),m++});var v=new THREE.BufferGeometry;v.addAttribute("position",new THREE.BufferAttribute(u,3)),v.addAttribute("attrSize",new THREE.BufferAttribute(c,1)),v.addAttribute("attrHoverAnimation",new THREE.BufferAttribute(h,1));var g=new THREE.PointsMaterial({size:f,sizeAttenuation:!1,positionOffset:!0,sizeAttribute:!0,map:r,depthTest:!0,alphaTest:.001,transparent:!0});g.color.setHex(this._defaultColor);var y=new s.PointsEx(v,g);y.name=i,y.size=f,y.pointIds=p,1==s.GlobalData.IncrementRender?y.renderOrder=100:y.renderOrder=-1,this._group.add(y),y.matrixAutoUpdate=!1,y.updateMatrixWorld(!0)}},{key:"update",value:function(){if(!this._isHidden){this._group||(this._group=this._scene.getOrCreateObjectGroup(s.ObjectGroupType.MARKER3D,{pickableType:s.PICKABLETYPE.Marker3d,hoverEnabled:!0,priority:2,globalSpace:!0})),this._group.clear();for(var e in this._markersGroup)if(this._markersGroup.hasOwnProperty(e)){var t=this._markersGroup[e],i=t.length;i<1||this._createParticle(t,i,e)}this._group.updateMatrixWorld(!0)}}}]),e}();s.Marker3D=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.shpPointId=i,r}return _inherits(t,e),_createClass(t,[{key:"update",value:function(){this._group||(this._group=this._scene.getOrCreateObjectGroup(s.ObjectGroupType.MARKER3D+"|"+this.shpPointId,{pickableType:s.PICKABLETYPE.Marker3d,hoverEnabled:!0,priority:2,globalSpace:!0})),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){this._group&&this._scene.removeObjectGroup(this._group),this._group=null,this._viewer=null,this._scene=null,this._markersGroup=null,this._textures=null,this._textureLoader=null,this.visibleState=null}}]),t}(s.Marker3D);s.ShpPointMarker=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.scene=t.getScene(),this.labelMap={}}return _createClass(e,[{key:"destroy",value:function(){this.labelMap=null}},{key:"addLabel",value:function(e){var t={id:e.id?e.id:THREE.Math.generateUUID(),position:{x:e.position.x,y:e.position.y,z:e.position.z},size:e.size?e.size:this.defaultFontSize,text:e.text?e.text:null,fontSize:e.fontSize?e.fontSize:24};if(void 0==this.labelMap[t.id]){this.labelMap[t.id]={},this.labelMap[t.id].info=t;var i=document.createElement("div");i.innerHTML="<span style='font-size:"+t.fontSize+"px; color:black;pointer-events:none;'>"+e.text+"</br></span>",i.style.display="none",i.style.position="absolute",i.style.pointerEvents="none",this.labelMap[t.id].visible=!0,this.labelMap[t.id].domLabel=i,this.viewer.domElement.parentNode.appendChild(i)}}},{key:"update",value:function(){var e=window.innerWidth,t=window.innerHeight;for(var i in this.labelMap)if(!1!==this.labelMap[i].visible){var r=this.labelMap[i].info.position;if(r=this.viewer.worldToClient(r),!(r.x<0||r.y<0||r.x>e||r.y>t)){var n=this.labelMap[i].domLabel;n.style.display="block",n.style.right="",n.style.left=r.x.toString()+"px",n.style.bottom="",n.style.top=r.y.toString()+"px"}}}},{key:"removeById",value:function(e){this.labelMap[e]&&this.labelMap[e].domLabel&&(this.viewer.domElement.parentNode.removeChild(this.labelMap[e].domLabel),delete this.labelMap[e])}},{key:"showById",value:function(e){this.labelMap[e]&&(this.labelMap[e].visible=!0)}},{key:"hideById",value:function(e){this.labelMap[e]&&(this.labelMap[e].visible=!1,this.labelMap[e].domLabel.style.display="none")}},{key:"hideAll",value:function(){for(var e in this.labelMap)this.hideById(e)}}]),e}();s.LabelCollection=e}(),function(){var e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.ObjectGroupType.CLIPREGION,{priority:20,globalSpace:!0}));return r.planes=[],r.planeMaterial=new s.PhongLightingMaterial({color:1170103,opacity:.1,transparent:!0,side:THREE.DoubleSide,lights:!0}),r.wireFramesMaterial=new s.PhongLightingMaterial({color:1170103,lights:!0}),r.uniforms={iClipPlane:{type:"i",value:0},vClipPlane:{type:"v4v",value:new Array}},r.init(e,i),r}return _inherits(t,e),_createClass(t,[{key:"clear",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this.planes.length=0,this.planes=null,this.planeMaterial.dispose(),this.wireFramesMaterial.dispose(),this.planeMaterial=null,this.wireFramesMaterial=null,this.uniforms=null}},{key:"addSidePlaneMesh",value:function(e){var t=new THREE.BufferGeometry,i=new THREE.BufferAttribute(e,3);t.addAttribute("position",i),t.setIndex([0,1,2,2,3,1]);var r=new THREE.Mesh(t,this.planeMaterial);this.add(r),this.addSideWireFrames(e)}},{key:"addSideWireFrames",value:function(e){var t=[1,1,1,1,1,1,1,1,1,1,1,1],i=[0,1,0,2,2,3],r=new THREE.BufferGeometry;r.setIndex(i),r.addAttribute("position",new THREE.Float32BufferAttribute(e,3)),r.addAttribute("color",new THREE.Float32BufferAttribute(t,3)),r.computeBoundingSphere();var n=new THREE.LineSegments(r,this.wireFramesMaterial);n.name="WireFrames",n.customTag=!0,this.add(n)}},{key:"addTopWireFrames",value:function(e){var t=[],i=[],r=[];e.map(function(e,n){t.push(e.x,e.y,e.z),i.push(1,1,1),r.push(n)});var n=new THREE.BufferGeometry;n.setIndex(r),n.addAttribute("position",new THREE.Float32BufferAttribute(t,3)),n.addAttribute("color",new THREE.Float32BufferAttribute(i,3)),n.computeBoundingSphere();var a=new THREE.LineSegments(n,this.wireFramesMaterial);a.name="WireFrames",a.customTag=!0,this.add(a)}},{key:"addTopPlaneMesh",value:function(e){var t=new THREE.BufferGeometry,i=new THREE.Shape(e),r=new THREE.ShapeBufferGeometry(i);t.attributes=r.attributes
;for(var n=r.attributes.position.array,a=n.length,o=2;o<a;o+=3)n[o]=e[0].z;t.groups=r.groups,t.index=r.index;var s=new THREE.Mesh(t,this.planeMaterial);this.add(s),this.addTopWireFrames(e)}},{key:"init",value:function(e,t){this.planes=[];for(var i=[],r=new THREE.Vector3(0,0,t),n=e.length,a=e[0].z,o=0;o<n-1;++o){var s=e[o],l=e[o+1];s.z=a,l.z=a;var u=e[o].clone().add(r),c=e[o+1].clone().add(r),h=(new THREE.Plane).setFromCoplanarPoints(s,u,l);this.planes.push(h);var d=new Float32Array([s.x,s.y,s.z,l.x,l.y,l.z,u.x,u.y,u.z,c.x,c.y,c.z]);this.addSidePlaneMesh(d),i.push(u),o===n-2&&i.push(c)}this.addTopPlaneMesh(e),this.addTopPlaneMesh(i);var f=(new THREE.Plane).setFromCoplanarPoints(e[0],e[1],e[2]),p=(new THREE.Plane).setFromCoplanarPoints(i[0],i[2],i[1]);this.planes.push(p),this.planes.push(f)}},{key:"hide",value:function(){this.visible=!1}},{key:"show",value:function(){this.visible=!0}}]),t}(s.ObjectGroup);s.ClipRegion=e}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.isReverse=!1}return _createClass(e,null,[{key:"setClipRegion",value:function(e,t,i){var r=e.getScene();r.clipRegion&&r.removeObjectGroup(r.clipRegion),r.clipRegion=new s.ClipRegion(t,i);var n=r.clipRegion,a=r.geometryGroup.matrix;n.matrix.copy(a),n.matrixAutoUpdate=!1,n.updateMatrixWorld(!0),r.objectGroups.add(n);var o=n.planes.length;n.uniforms.iClipPlane.value=o;var l=n.uniforms.vClipPlane.value;n.planes.map(function(e,t){e.applyMatrix4(a);var i=new THREE.Vector4(e.normal.x,e.normal.y,e.normal.z,e.constant);l.push(i)}),s.ClipPlanesTool.updateClippingParams(e,n.uniforms,this.isReverse),e.updateShadowMap()}},{key:"changeClipDirection",value:function(e,t){var i=e.getScene();i.clipRegion&&(this.isReverse=t,s.ClipPlanesTool.updateClippingParams(e,i.clipRegion.uniforms,t))}},{key:"exit",value:function(e){this.isReverse=!1;var t=e.getScene();if(t.clipRegion){var i={iClipPlane:{type:"i",value:0}};s.ClipPlanesTool.updateClippingParams(e,i,this.isReverse),t.clipRegion.clear(),t.removeObjectGroup(t.clipRegion),t.clipRegion=null}}},{key:"hide",value:function(e){var t=e.getScene();t.clipRegion&&t.clipRegion.hide()}},{key:"show",value:function(e){var t=e.getScene();t.clipRegion&&t.clipRegion.show()}}]),e}();s.ClipRegionManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditToolMode.CLIP_BY_BOX));return i.viewer=e,i.scene=e.getScene(),i.enablePick=!1,i.cameraControl=e.cameraControl,i.startPt=new THREE.Vector2,i.onClipBox=!1,i.isReverse=!1,i.mapLockedBoxFaces={},i.mapBoxFaceIndex={0:"Right",1:"Left",2:"Top",3:"Bottom",4:"Front",5:"Back"},i.clipPlanes=s.ClipPlaneManager.getInstance(i.scene),i.lastLocalClippingMode=!1,i.clipPlanes.updateClippingParams=function(r){t.updateClippingParams(e,r,i.isReverse),i.clipPlanes.calculateClipBoundingBox(),i.viewer.updateShadowMap()},i.clipPlanes.init(),i.selectIndex=null,i.planeDistance=0,i.offsetSpeed=.02,i}return _inherits(t,e),_createClass(t,[{key:"toggle",value:function(e,t){this.clipPlanes.enable(e,t)}},{key:"visible",value:function(e){this.clipPlanes.visible=e}},{key:"rotatable",value:function(e){this.clipPlanes.rotatable=e}},{key:"store",value:function(){return this.clipPlanes.store()}},{key:"restore",value:function(e){this.clipPlanes.restore(e)}},{key:"reset",value:function(){this.isReverse=!1,this.clipPlanes.reset()}},{key:"changeDirection",value:function(e){this.isReverse=e,this.clipPlanes.update()}},{key:"pointToScreen",value:function(e){var t=this.cameraControl.camera,i=new THREE.Matrix4;i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);var r=new THREE.Vector4(e.x,e.y,e.z,1);r.applyMatrix4(i);var n=new THREE.Vector2;n.x=(r.x/r.w+1)/2,n.y=1-(r.y/r.w+1)/2;var a=this.cameraControl.getContainerDimensions();return n.x=n.x*a.width+a.left,n.y=n.y*a.height+a.top,n}},{key:"getPlaneDistanceInScreen",value:function(){if(null==this.selectIndex)return null;if(this.selectIndex<2){var e=this.clipPlanes.center.clone(),t=this.clipPlanes.center.clone();e.x-=this.clipPlanes.cubeSize.x,t.x+=this.clipPlanes.cubeSize.x;var i=this.pointToScreen(e),r=this.pointToScreen(t);return i.x-r.x}var n=this.clipPlanes.center.clone(),a=this.clipPlanes.center.clone();a.y-=this.clipPlanes.cubeSize.y,n.y+=this.clipPlanes.cubeSize.y;var o=this.pointToScreen(a),s=this.pointToScreen(n);return o.y-s.y}},{key:"getPickPoint",value:function(e,t){var i=this.cameraControl.camera,r=this.cameraControl.getContainerDimensions(),n=e-r.left,a=t-r.top,o=n/r.width*2-1,l=(r.height-a)/r.height*2-1,u=new s.Raycaster;return u.setFromCamera(new THREE.Vector2(o,l),i),u.ray.intersectPlane(this.plane)}},{key:"getSelectIndex",value:function(){return this.clipPlanes.selectIndex}},{key:"_isVisible",value:function(){return this.clipPlanes.visible}},{key:"isRotate",value:function(){return this.clipPlanes.rotatable}},{key:"offset",value:function(e){var t=Math.floor(this.selectIndex/2);this.selectIndex<=3?this.clipPlanes.offset(this.selectIndex,-e*this.clipPlanes.cubeSize.getComponent(t)*2):this.selectIndex%2==1?this.clipPlanes.offset(this.selectIndex,-e*this.clipPlanes.cubeSize.getComponent(t)*2):this.clipPlanes.offset(this.selectIndex,e*this.clipPlanes.cubeSize.getComponent(t)*2)}},{key:"setSectionBox",value:function(e,t){var i=new THREE.Box3(new THREE.Vector3(e.x,e.y,e.z),new THREE.Vector3(t.x,t.y,t.z));i.applyMatrix4(this.scene.getMatrixGlobal()),this.clipPlanes.setSectionBox(i.min,i.max)}},{key:"calculateOffsetByBox",value:function(e,t){var i=new THREE.Box3(new THREE.Vector3(e.x,e.y,e.z),new THREE.Vector3(t.x,t.y,t.z));i.applyMatrix4(this.scene.getMatrixGlobal()),i.setFromCenterAndSize(i.getCenter(),i.getSize().multiplyScalar(this.scene.getExpandScalar())),this.clipPlanes.calculateOffsetByBox(i.min,i.max)}},{key:"moveSectionPlane",value:function(e,t){this.clipPlanes.moveSectionPlane(e,t)}},{key:"rotateSectionBox",value:function(e,t){this.clipPlanes.rotateSectionBox(e,t)}},{key:"rotate",value:function(e,t){2==this.selectIndex||3==this.selectIndex?this.clipPlanes.rotX(t/180*Math.PI*.1):this.clipPlanes.rotY(e/180*Math.PI*.1)}},{key:"update",value:function(e){this.clipPlanes.update(e)}},{key:"cancelHighLight",value:function(){this.clipPlanes.cancelHighLight()}},{key:"highLight",value:function(){this.clipPlanes.highLight()}},{key:"lockBoxFaces",value:function(e){var t=!0,i=!1,r=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;this.mapLockedBoxFaces[o]=!0}}catch(e){i=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"unlockBox",value:function(){this.mapLockedBoxFaces={}}},{key:"setProcess",value:function(e,t){this.mapLockedBoxFaces[e]||this.clipPlanes.setProcess(e,t)}},{key:"getProcess",value:function(e){return this.clipPlanes.getProcess(e)}},{key:"destroy",value:function(){this.cameraControl=null,this.intersectPoint=null,this.selectIndex=null,this.normal=null,this.plane=null,this.pickHelper=null,this.scene=null,this.viewer=null}},{key:"onExit",value:function(){this.toggle(!1,!1)}},{key:"processMouseDown",value:function(e){if(this.startPt.set(e.clientX,e.clientY),!this.enablePick&&e.button===THREE.MOUSE.LEFT){var i=this.cameraControl.getRaycaster(e.clientX,e.clientY),r=s.ClipPlaneManager.getInstance(this.scene),n=r.hitTest(i),a=this.cameraControl.getIntersectContext(new THREE.Vector2(e.clientX,e.clientY)),o=this.cameraControl.intersector.intersect(a,null,!0);if(null!=o&&o.distance<=n.distance)return s.EditTool.prototype.processMouseDown(this,e);if(this.selectIndex=this.getSelectIndex(),this.planeDistance=this.getPlaneDistanceInScreen(),null!=this.selectIndex)return this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.enablePick=!0,this.clipStartPoint=i.ray.at(n.distance,this.clipStartPoint),!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseDown",this).call(this,e)}},{key:"processHover",value:function(e){if(!this.enablePick){var i=!1,r=this.cameraControl.getRaycaster(e.clientX,e.clientY),n=s.ClipPlaneManager.getInstance(this.scene),a=this.getSelectIndex();null!==a&&this.cancelHighLight();n.hitTest(r);if(this.selectIndex=this.getSelectIndex(),null!=this.selectIndex){if(this.highLight(),!this.onClipBox){this.onClipBox=!0;this.cameraControl.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipBox:!0})}i=!0}else if(this.onClipBox){this.onClipBox=!1;var o=this.cameraControl.viewer.modelManager;o.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipBox:!1})}return this.selectIndex!==a&&(this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0)),i}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processHover",this).call(this,e)}},{key:"processMouseUp",value:function(e){if(e.button===THREE.MOUSE.LEFT){var i=this.cameraControl.getRaycaster(e.clientX,e.clientY),r=s.ClipPlaneManager.getInstance(this.scene);null!==this.getSelectIndex()&&(this.cancelHighLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0));r.hitTest(i);if(this.selectIndex=this.getSelectIndex(),null!=this.selectIndex){if(this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),!this.onClipBox){this.onClipBox=!0;var n=this.cameraControl.viewer.modelManager;n.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipBox:!0})}}else if(this.onClipBox){this.onClipBox=!1;var a=this.cameraControl.viewer.modelManager;a.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipBox:!1})}if(this.enablePick)return this.planeDistance=0,this.enablePick=!1,!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseUp",this).call(this,e)}},{key:"processMouseMove",value:function(e){if(this.enablePick){if(this.isRotate())this.rotate(e.clientX-this.startPt.x,e.clientY-this.startPt.y),this.startPt.set(e.clientX,e.clientY);else{var i=this.mapBoxFaceIndex[this.selectIndex];if(this.mapLockedBoxFaces[i])return!0;if(!(e.clientX==this.startPt.x&&e.clientY==this.startPt.y)){var r=s.ClipPlaneManager.getInstance(this.scene),n=r.clipplanes[this.selectIndex],a=this.cameraControl.movePlane(n,e,this.startPt,!0,this.clipStartPoint);null!=a&&r.offset(this.selectIndex,a),this.startPt.set(e.clientX,e.clientY)}this.cameraControl.viewer.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_MOUSE_MOVE,draggedFaceName:i})}return this.cameraControl.update(!0),!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processMouseMove",this).call(this,e)}},{key:"processTouchstart",value:function(e){if(this.startPt.set(e.touches[0].clientX,e.touches[0].clientY),this.enablePick)return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchstart",this).call(this,e);var i=this.cameraControl.getRaycaster(e.touches[0].clientX,e.touches[0].clientY);return s.ClipPlaneManager.getInstance(this.scene).hitTest(i),this.selectIndex=this.getSelectIndex(),this.planeDistance=this.getPlaneDistanceInScreen(),null!=this.selectIndex?(this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.update(),!0):void 0}},{key:"processTouchmove",value:function(e){if(null!=this.selectIndex){if(this.isRotate())this.rotate(e.touches[0].clientX-this.startPt.x,e.touches[0].clientY-this.startPt.y),this.startPt.set(e.touches[0].clientX,e.touches[0].clientY);else{var i=0;i=this.selectIndex<2?e.touches[0].clientX-this.startPt.x:e.touches[0].clientY-this.startPt.y,this.offset(i/this.planeDistance),this.startPt.set(e.touches[0].clientX,e.touches[0].clientY)}return this.cameraControl.update(!0),this.update(),!0}return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchmove",this).call(this,e)}},{key:"processTouchend",value:function(e){return this.selectIndex=null,this.planeDistance=0,this.enablePick&&(this.onUpdateUI({visible:!1}),this.startPt.x==e.touches[0].clientX&&this.startPt.y==e.touches[0].clientY&&this.pickHelper.click(e)),this.cameraControl.needUpdateRenderList(!0),this.cancelHighLight(),this.cameraControl.update(!0),this.update(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"processTouchend",this).call(this,e)}}],[{key:"updateClippingParams",value:function(e,t,i){var r=t.iClipPlane.value;if(0==r)return e.getRenderer().localClippingEnabled=!1,void(e.getRenderer().clippingPlanes=Object.freeze([]));for(var n=[],a=0;a<r;++a){var o=new THREE.Plane;n.push(o)}for(var l=0;l<r;++l){var u=t.vClipPlane.value[l].clone(),c=n[l];c.setComponents(-u.x,-u.y,-u.z,-u.w),c.normalize(),i&&c.negate()}var h=!1,d=e.modelManager,f=[],p=[];d.modelCollection.traverse(function(e){if(e instanceof ee){e.getAllNodes().forEach(function(e){p.push(e.material)})}else if(e instanceof s.ExternalComponentManager){var t=e.getAllMeshes();t.forEach(function(e){if(void 0!==e.material){var t=e.material.length;t&&t>0?e.material.forEach(function(e){p.push(e)}):p.push(e.material),e._materialHold&&p.push(e._materialHold)}})}else{if(e.materialManager&&i){for(var r in e.materialManager.materials){var a=e.materialManager.materials[r];if(a instanceof Array)for(var o=0,l=a.length;o<l;o++)p.push(a[o]);else p.push(a)}for(var u in e.materialManager.instanceMaterials){var c=e.materialManager.instanceMaterials[u];if(c instanceof Array)for(var d=0,m=c.length;d<m;d++)p.push(c[d]);else p.push(c)}if(e.materialManager instanceof s.BimTileMaterialManager){p.push(e.materialManager.globalMaterial);var v=e.materialManager.materialMap;for(var g in v)if(v.hasOwnProperty(g)){var y=v[g];p.push(y)}}void 0!=e.wireframeManager&&(p.push(e.wireframeManager.wireframeMaterial),p.push(e.wireframeManager.instanceWireframeMaterial),p.push(e.wireframeManager.defaultWireframeColor))}var M=null;e.getInstanceWireframeMaterial&&(M=e.getInstanceWireframeMaterial())&&(p.push(M),f.push(M));var E=e.getFilter();if(E&&E._hasLocalClipping()){var b=E.getAllMaterialsForClip();for(var x in b)b[x].clippingPlanes=n,p.push(b[x]);var I=E.getAllInstanceMaterialsForClip();for(var T in I){var w=I[T];w.instanceMaterial&&(w.instanceMaterial.clippingPlanes=n,p.push(w))}M&&(M.clippingPlanes=n,p.push(M)),h=!0}}});var m=e.rendererManager.getPickingEffecter();if(m.selectedMaterialForClip.clippingPlanes=n,m.wireframeMaterialForClip.clippingPlanes=n,m.instancedSelectedMaterialForClip.clippingPlanes=n,m.instancedWireFrameMaterialForClip.clippingPlanes=n,p.push(m.selectedMaterialForClip),p.push(m.wireframeMaterialForClip),p.push(m.instancedSelectedMaterialForClip),p.push(m.instancedWireFrameMaterialForClip),p.push(m.instancedWireFrameMaterial),p.push(m.selectedMaterial),p.push(m.wireframeMaterial),p.push(m.selectedLineMaterial),p.push(m.skinningSelectedMaterial),p.push(m.skinningWireframeMaterial),h?(e.getRenderer().localClippingEnabled=!0,e.getRenderer().clippingPlanes=Object.freeze([])):i?(e.getRenderer().localClippingEnabled=!0,e.getRenderer().clippingPlanes=Object.freeze([])):(e.getRenderer().localClippingEnabled=!1,e.getRenderer().clippingPlanes=n),this.lastLocalClippingMode!=h){if(h){d.updateMaterialsValue("localClipping",1);for(var v=0;v<f.length;v++)f[v].localClipping=1,f[v].refreshUniforms()}else{d.updateMaterialsValue("localClipping",-1);for(var g=0;g<f.length;g++)f[g].localClipping=-1,f[g].refreshUniforms()}this.lastLocalClippingMode=h}p.forEach(function(e){e.clippingPlanes=n,e.clipIntersection=i})}}]),t}(s.EditTool);s.ClipPlanesTool=e}(),function(){var e=[new THREE.Plane],t=!1,i=function(i){function r(i){_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,s.EditToolMode.CLIP_FILL));n.viewer=i,n.scene=i.getScene(),n.enablePick=!1,n.rotX=!0,n.onClipPlane=!1,n.cameraControl=i.cameraControl,n.startPt=new THREE.Vector2,n.modelManager=n.cameraControl.viewer.modelManager,n.planeDistance=0,n.offsetSpeed=.02;var a=n;return n.fillClipPlane=s.FillClipPlaneManager.getInstance(n.scene),n.fillClipPlane.updateClippingParams=function(r){if(0==r.iClipPlane.value)i.getRenderer().localClippingEnabled=!1,i.getRenderer().clippingPlanes=Object.freeze([]);else{var n=r.vClipPlane.value[0],o=e[0];o.setComponents(-n.x,-n.y,-n.z,-n.w),o.normalize();var l=!1,u=i.modelManager,c=[],h=[],d=[];u.modelCollection.traverse(function(t){var i;t.getInstanceWireframeMaterial&&(i=t.getInstanceWireframeMaterial())&&(c.push(i),h.push(i));var r;if(t.getWireframeMaterial&&(r=t.getWireframeMaterial())&&h.push(r),t.localClippingMode)if(l=!0,t.localClippingPlanes=e,t.innerClippingMode=a.fillClipPlane.innerClipping?1:-1,t.innerClippingMatrix||(t.innerClippingMatrix=new THREE.Matrix4),t.innerClippingMatrix.copy(a.fillClipPlane.orthoViewProjMatrix),r&&(r.clippingPlanes=e,d.push(r)),i&&(i.clippingPlanes=e,d.push(i)),t instanceof s.Model){for(var n in t.materialManager.materials){var o=t.materialManager.materials[n];o.clippingPlanes=e,d.push(o)}for(var n in t.materialManager.instanceMaterials){var o=t.materialManager.instanceMaterials[n];if(o instanceof Array)for(var u=0,f=o.length;u<f;u++)o[u].clippingPlanes=e,d.push(o[u]);else o.clippingPlanes=e,d.push(o)}}else if(t instanceof s.BimTilesModel)for(var n in t.materialManager.materialMap){var o=t.materialManager.materialMap[n];o.clippingPlanes=e,d.push(o)}var p=t.getFilter();if(p&&p._hasLocalClipping()){var m=p.getAllMaterialsForClip();for(var v in m)m[v].clippingPlanes=e,d.push(m[v]);var g=p.getAllInstanceMaterialsForClip();for(var v in g){var y=g[v];y.instanceMaterial&&(y.instanceMaterial.clippingPlanes=e,d.push(y.instanceMaterial))}i&&(i.clippingPlanes=e),l=!0}});var f=i.rendererManager.getPickingEffecter();if(f.selectedMaterialForClip.clippingPlanes=e,f.wireframeMaterialForClip.clippingPlanes=e,f.instancedSelectedMaterialForClip.clippingPlanes=e,f.instancedWireFrameMaterialForClip.clippingPlanes=e,u.prepareCapScene(),l){i.getRenderer().localClippingEnabled=!0,i.getRenderer().clippingPlanes=Object.freeze([]),a.scene.backMaterial.clippingPlanes=e,a.scene.frontMaterial.clippingPlanes=e,a.scene.backInstanceMaterial.clippingPlanes=e,a.scene.frontInstanceMaterial.clippingPlanes=e,d.push(f.selectedMaterialForClip),d.push(f.wireframeMaterialForClip),d.push(f.instancedSelectedMaterialForClip),d.push(f.instancedWireFrameMaterialForClip),d.push(a.scene.backMaterial),d.push(a.scene.frontMaterial),d.push(a.scene.backInstanceMaterial),d.push(a.scene.frontInstanceMaterial);for(var p=0;p<d.length;p++)d[p].orthoViewProjMatrix&&(d[p].orthoViewProjMatrix.copy(this.orthoViewProjMatrix),d[p].innerClipping=this.innerClipping?1:-1,d[p].refreshUniforms())}else{i.getRenderer().localClippingEnabled=!1,i.getRenderer().clippingPlanes=e,a.scene.backMaterial.clippingPlanes=Object.freeze([]),a.scene.frontMaterial.clippingPlanes=Object.freeze([]),a.scene.backInstanceMaterial.clippingPlanes=Object.freeze([]),a.scene.frontInstanceMaterial.clippingPlanes=Object.freeze([]),h.push(f.selectedMaterial),h.push(f.wireframeMaterial),h.push(f.instancedSelectedMaterial),h.push(f.instancedWireFrameMaterial),h.push(a.scene.backMaterial),h.push(a.scene.frontMaterial),h.push(a.scene.backInstanceMaterial),h.push(a.scene.frontInstanceMaterial),u.updateMaterialsValue("orthoViewProjMatrix",this.orthoViewProjMatrix),u.updateMaterialsValue("innerClipping",this.innerClipping?1:-1);for(var p=0;p<h.length;p++)h[p].orthoViewProjMatrix&&(h[p].orthoViewProjMatrix.copy(this.orthoViewProjMatrix),h[p].innerClipping=this.innerClipping?1:-1,h[p].refreshUniforms())}if(t!=l){if(l){u.updateMaterialsValue("localClipping",1);for(var p=0;p<c.length;p++)c[p].localClipping=1,c[p].refreshUniforms();u.updateMaterialsValue("innerClipping",-1);for(var p=0;p<h.length;p++)h[p].innerClipping=-1,h[p].refreshUniforms()}else{u.updateMaterialsValue("localClipping",-1);for(var p=0;p<c.length;p++)c[p].localClipping=-1,c[p].refreshUniforms();for(var p=0;p<d.length;p++)d[p].innerClipping=-1,d[p].refreshUniforms()}t=l}this.renderClipPlane=new THREE.Plane,this.renderClipPlane.setComponents(n.x,n.y,n.z,-n.w),this.renderClipPlane.normalize(),this.calculateFillClipBoundingBox(o.coplanarPoint()),i.updateShadowMap()}},n.fillClipPlane.calculateClippingIds=function(){i.modelManager.calculateClippingIds()},n.fillClipPlane.init(),n}return _inherits(r,i),_createClass(r,[{key:"toggle",value:function(e,t){this.fillClipPlane.enable(e,t),this.fillClipPlane.update(),this.viewer.updateShadowMap()}},{key:"visible",value:function(e){this.fillClipPlane.visible=e,this.fillClipPlane.update()}},{key:"rotatable",value:function(e){this.fillClipPlane.rotatable=e,this.fillClipPlane.update()}},{key:"hit",value:function(){return this.fillClipPlane.hit}},{key:"pointToScreen",value:function(e){var t=this.cameraControl.camera,i=new THREE.Matrix4;i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);var r=new THREE.Vector4(e.x,e.y,e.z,1);r.applyMatrix4(i);var n=new THREE.Vector2;n.x=(r.x/r.w+1)/2,n.y=1-(r.y/r.w+1)/2;var a=this.cameraControl.getContainerDimensions();return n.x=n.x*a.width+a.left,n.y=n.y*a.height+a.top,n}},{key:"getPlaneDistanceInScreen",value:function(){if(null==this.selectIndex)return null;if(this.selectIndex<2){var e=clipPlanes.center.clone(),t=clipPlanes.center.clone();e.x-=clipPlanes.cubeSize.x,t.x+=clipPlanes.cubeSize.x;var i=this.pointToScreen(e),r=this.pointToScreen(t);return i.x-r.x}var n=clipPlanes.center.clone(),a=clipPlanes.center.clone();a.y-=clipPlanes.cubeSize.y,n.y+=clipPlanes.cubeSize.y;var o=this.pointToScreen(a),s=this.pointToScreen(n);return o.y-s.y}},{key:"getPickPoint",value:function(e,t){var i=this.cameraControl.camera,r=this.cameraControl.getContainerDimensions(),n=e-r.left,a=t-r.top,o=n/r.width*2-1,l=(r.height-a)/r.height*2-1,u=new s.Raycaster;return u.setFromCamera(new THREE.Vector2(o,l),i),u.ray.intersectPlane(this.plane)}},{key:"_isVisible",value:function(){return this.fillClipPlane.visible}},{key:"isRotate",value:function(){return this.fillClipPlane.rotatable}},{key:"offset",value:function(e){this.fillClipPlane.offset(e)}},{key:"setOffset",value:function(e){this.fillClipPlane.setOffset(e)}},{key:"rotate",value:function(e,t){this.rotX?this.fillClipPlane.rotX(t/180*Math.PI*.1):this.fillClipPlane.rotY(e/180*Math.PI*.1)}},{key:"rotateAngleOffset",value:function(e,t){this.fillClipPlane.rotateAngleOffset(e,t)}},{key:"setRotateAngle",value:function(e,t){this.fillClipPlane.setRotateAngle(e,t)}},{key:"getRotateAngle",value:function(){return this.fillClipPlane.getRotateAngle()}},{key:"changeNormal",value:function(e){this.fillClipPlane.changeNormal(e)}},{key:"update",value:function(e){this.fillClipPlane.update(e)}},{key:"cancelHighLight",value:function(){this.fillClipPlane.cancelHighLight()}},{key:"highLight",value:function(){this.fillClipPlane.highLight()}},{key:"store",value:function(){return this.fillClipPlane.store()}},{key:"restore",value:function(e){this.fillClipPlane.restore(e)}},{key:"setProcess",value:function(e){this.fillClipPlane.setProcess(e)}},{key:"getProcess",value:function(){return this.fillClipPlane.getProcess()}},{key:"destroy",value:function(){this.cameraControl=null,this.normal=null,this.plane=null,this.pickHelper=null,this.scene=null,this.viewer=null}},{key:"onExit",value:function(){this.toggle(!1,!1)}},{key:"processMouseDown",value:function(e){if(this.startPt.set(e.clientX,e.clientY),!this.enablePick&&e.button===THREE.MOUSE.LEFT){var t=this.cameraControl.getRaycaster(e.clientX,e.clientY);if(s.FillClipPlaneManager.getInstance(this.scene).hitTest(t),this.hit())return this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),!1}return s.EditTool.prototype.processMouseDown(this,e)}},{key:"processMouseUp",value:function(e){this.planeDistance=0;var t=!1;if(this.enablePick&&e.button===THREE.MOUSE.LEFT)if(this.startPt.x==e.clientX&&this.startPt.y==e.clientY)this.pickHelper.click(e);else{var i=e.shiftKey||e.ctrlKey||e.altKey;if(i){this.endPt.set(e.clientX,e.clientY);var r=s.OPSELECTIONTYPE.Clear;e.ctrlKey?r=s.OPSELECTIONTYPE.Add:e.altKey&&(r=s.OPSELECTIONTYPE.Remove);var n=this;this.scene.pickByRect(this.frustum,r,function(){n.pickHelper.notifySelectionChanged(null,0,e)}),this.cameraControl.updateView(!0),t=!0}}var a=this.cameraControl.getRaycaster(e.clientX,e.clientY);return s.FillClipPlaneManager.getInstance(this.scene).hitTest(a),this.hit()?(this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.onClipPlane||(this.onClipPlane=!0,this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipPlane:!0,event:e})),t=!0):(this.cancelHighLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.onClipPlane&&(this.onClipPlane=!1,this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipPlane:!1,event:e}))),this.modelManager.dispatchEvent({type:s.EVENTS.ON_TOOL_END}),t}},{key:"processMouseMove",value:function(e){return this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_MOUSE_MOVE,event:e}),s.EditTool.prototype.processMouseMove(this,e)}},{key:"processTouchstart",value:function(e){if(this.startPt.set(e.touches[0].clientX,e.touches[0].clientY),!this.enablePick){var t=this.cameraControl.getRaycaster(e.touches[0].clientX,e.touches[0].clientY);s.FillClipPlaneManager.getInstance(this.scene).hitTest(t)}return this.hit()?(this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),!0):s.EditTool.prototype.processTouchstart(this,e)}},{key:"processTouchmove",value:function(e){}},{key:"processTouchend",value:function(e){return this.enablePick&&(this.onUpdateUI({visible:!1}),this.startPt.x==e.touches[0].clientX&&this.startPt.y==e.touches[0].clientY&&this.pickHelper.click(e)),this.cameraControl.needUpdateRenderList(!0),this.cancelHighLight(),this.cameraControl.update(!0),s.EditTool.prototype.processTouchmove(this,e)}},{key:"processHover",value:function(e){if(!this.enablePick){var t=!1,i=this.cameraControl.getRaycaster(e.clientX,e.clientY);return s.FillClipPlaneManager.getInstance(this.scene).hitTest(i),this.hit()?(this.onClipPlane||(this.highLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.onClipPlane=!0,this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipPlane:!0,event:e})),t=!0):this.onClipPlane?(this.cancelHighLight(),this.cameraControl.needUpdateRenderList(!0),this.cameraControl.update(!0),this.onClipPlane=!1,this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipPlane:!1,event:e})):this.modelManager.dispatchEvent({type:s.EVENTS.ON_CLIP_HOVER,onClipPlane:!1,event:e}),t}return s.EditTool.prototype.processHover(this,e)}}]),r}(s.EditTool);s.FillClipPlaneTool=i}(),s.ClipPlanes=function(e,t){s.ObjectGroup.call(this,s.ObjectGroupType.CLIPPLANE,{priority:20});var i=[];i.push("clipPlane_right"),i.push("clipPlane_left"),i.push("clipPlane_top"),i.push("clipPlane_bottom"),i.push("clipPlane_front"),i.push("clipPlane_back"),this.cubeSize=e.clone(),this.center=t.clone(),this.visible=!1,this.rotatable=!1,this.selectIndex=null,this.planeOffset=new Array(6),this.planeRotate=[0,0,0],this.observer=null,this.uniforms={iClipPlane:{type:"i",value:0},vClipPlane:{type:"v4v",value:new Array(new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4)}},this.clipplanes=null,this.calculation=!0,this.boundingBox=new THREE.Box3,this.calculateClipBoundingBox=function(e){this.boundingBox.setFromObject(this)},this.getClipBoundingBox=function(){return this.boundingBox},this.isVisible=function(){return this.visible},this.getPlaneNormal=function(e){var t=new THREE.Vector4,i=Math.floor(e/2),r=e%2;return t.setComponent(i,Math.pow(-1,r)),t.w=.5*-this.cubeSize.getComponent(i),this.planeOffset[e]=0,t},this.planeMaterial=new s.PhongLightingMaterial({color:16777215,opacity:0,transparent:!0,side:THREE.DoubleSide,lights:!0}),this.planeHighLightMatrial=new s.PhongLightingMaterial({color:1170103,opacity:.1,transparent:!0,side:THREE.DoubleSide,lights:!0}),this.initPlaneModel=function(e){var t=Math.floor(e/2),r=e%2,n=0==t?this.cubeSize.z:this.cubeSize.x,a=1==t?this.cubeSize.z:this.cubeSize.y,o=new THREE.PlaneGeometry(n,a),s=new THREE.Mesh(o,this.planeMaterial);s.name=i[e],s.customTag=!0,s.position.setComponent(t,Math.pow(-1,r)*this.cubeSize.getComponent(t)*.5),0==t?s.rotation.y=Math.pow(-1,r)*Math.PI*.5:1==t&&(s.rotation.x=Math.pow(-1,r)*Math.PI*.5),s.renderOrder=90,this.add(s)},this.initCapsBox=function(){var e=new THREE.BoxBufferGeometry(this.cubeSize.x,this.cubeSize.y,this.cubeSize.z);e.groups=null;var t=new s.PhongLightingMaterial({color:16776960,side:THREE.DoubleSide}),i=new THREE.Mesh(e,t);return i.matrixWorld=this.matrixWorld,i.matrix=this.matrix,i},this.initWireframes=function(){var e=[.5*-this.cubeSize.x,.5*-this.cubeSize.y,.5*-this.cubeSize.z,.5*this.cubeSize.x,.5*-this.cubeSize.y,.5*-this.cubeSize.z,.5*this.cubeSize.x,.5*this.cubeSize.y,.5*-this.cubeSize.z,.5*-this.cubeSize.x,.5*this.cubeSize.y,.5*-this.cubeSize.z,.5*-this.cubeSize.x,.5*-this.cubeSize.y,.5*this.cubeSize.z,.5*this.cubeSize.x,.5*-this.cubeSize.y,.5*this.cubeSize.z,.5*this.cubeSize.x,.5*this.cubeSize.y,.5*this.cubeSize.z,.5*-this.cubeSize.x,.5*this.cubeSize.y,.5*this.cubeSize.z],t=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],i=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,3,7,1,5,2,6],r=new THREE.BufferGeometry,n=new s.PhongLightingMaterial({color:1170103,lights:!0});r.setIndex(i),r.addAttribute("position",new THREE.Float32BufferAttribute(e,3)),r.addAttribute("color",new THREE.Float32BufferAttribute(t,3)),r.computeBoundingSphere();var a=new THREE.LineSegments(r,n);a.name="Wireframes",a.customTag=!0,this.add(a)},this.updateClippingParams=function(e){},this.enable=function(e,t){this.visible=t,this.uniforms.iClipPlane.value=e?6:0,this.updateClippingParams(this.uniforms)},this.isEnabled=function(){return 0!==this.uniforms.iClipPlane.value};var r=function(e,t,i,r,n,a,o,s,l,u,c,h){this.enable=e,this.visible=t,this.rotatable=i,this.calculation=r,this.planeOffset=n.slice(0),this.planeRotate=a.slice(0),this.position=o,this.scale=s,this.quaternion=l,this.cubeSize=u,this.center=c,this.boundingBox=h};this.store=function(){return new r(!!this.uniforms.iClipPlane.value,this.visible,this.rotatable,this.calculation,this.planeOffset,this.planeRotate,this.position.clone(),this.scale.clone(),this.quaternion.clone(),this.cubeSize.clone(),this.center.clone(),this.boundingBox.clone())},this.restore=function(e){this.calculation=!0,this.calculationPlanes(e.cubeSize,e.center),this.enable(e.enable,e.visible),this.rotatable=e.rotatable,this.calculation=e.calculation;for(var t=0;t<6;++t)this.planeOffset[t]=e.planeOffset[t];for(var t=0;t<3;++t)this.planeRotate[t]=e.planeRotate[t];this.position.copy(e.position),this.scale.copy(e.scale),this.quaternion._w=e.quaternion._w,this.quaternion._x=e.quaternion._x,this.quaternion._y=e.quaternion._y,this.quaternion._z=e.quaternion._z,this.update()},this.reset=function(){this.calculation=!0;for(var e=0;e<6;++e)this.planeOffset[e]=0;for(var e=0;e<3;++e)this.planeRotate[e]=0;this.position.copy(this.center),this.scale.copy(new THREE.Vector3(1,1,1)),this.quaternion.copy(new THREE.Quaternion),this.update()},this.calculationPlanes=function(e,t){if(this.calculation){this.cubeSize.copy(e),this.center.copy(t);for(var i=this.children.length,r=i-1;r>=0;--r)this.remove(this.children[r]);for(var r=0;r<6;++r)this.uniforms.vClipPlane.value[r]=this.getPlaneNormal(r),this.initPlaneModel(r);this.initWireframes(),this.clipplanes=this.uniforms.vClipPlane.value.slice(0),this.reset()}},this.update=function(){this.updateMatrixWorld();var e=new THREE.Matrix4;e.getInverse(this.matrix),e.transpose();for(var t=0;t<6;++t)this.uniforms.vClipPlane.value[t]=this.clipplanes[t].clone().applyMatrix4(e);this.updateClippingParams(this.uniforms),this.observer&&this.observer()},this.offset=function(e,t){this.calculation=!1;var i=Math.floor(e/2),r=this.cubeSize.getComponent(i);r*=.5,e%2==0&&this.planeOffset[e]+t>0&&(t=-this.planeOffset[e]),e%2==1&&this.planeOffset[e]+t<0&&(t=-this.planeOffset[e]),this.planeOffset[e]+=t;for(var n=new THREE.Vector3,a=0;a<6;++a){
var o=this.clipplanes[a].clone(),s=this.planeOffset[a],l=new THREE.Vector3(o.x*s,o.y*s,o.z*s);n.add(l)}var u=1+n.getComponent(i)/this.cubeSize.getComponent(i);if((u=0==u?1e-5:u)>0){this.scale.setComponent(i,u);var c=this.uniforms.vClipPlane.value[e].clone(),h=new THREE.Vector3(c.x,c.y,c.z);h.normalize();var l=t,d=new THREE.Vector3(h.x*l,h.y*l,h.z*l);e%2==1?this.position.sub(d.multiplyScalar(.5)):this.position.add(d.multiplyScalar(.5)),this.update()}else this.planeOffset[e]-=t};var n=new THREE.Quaternion,a=new THREE.Vector3(1,0,0);this.rotX=function(e){this.calculation=!1,n.setFromAxisAngle(a,e),this.quaternion.multiply(n),this.update()};var o=new THREE.Vector3(0,1,0);this.rotY=function(e){this.calculation=!1,n.setFromAxisAngle(o,e),this.quaternion.multiply(n),this.update()},this.setSectionBox=function(e,t){this.calculation=!0;var i=new THREE.Vector3(t.x-e.x,t.y-e.y,t.z-e.z),r=new THREE.Vector3(.5*(e.x+t.x),.5*(e.y+t.y),.5*(e.z+t.z));this.calculationPlanes(i,r)},this.calculateOffsetByBox=function(e,t){var i=t.x-this.center.x-.5*this.cubeSize.x;i<this.planeOffset[0]?(this.moveSectionPlane("Left",this.center.x-.5*this.cubeSize.x-e.x),this.moveSectionPlane("Right",i)):(this.moveSectionPlane("Right",i),this.moveSectionPlane("Left",this.center.x-.5*this.cubeSize.x-e.x));var r=t.y-this.center.y-.5*this.cubeSize.y;r<this.planeOffset[2]?(this.moveSectionPlane("Bottom",this.center.y-.5*this.cubeSize.y-e.y),this.moveSectionPlane("Top",r)):(this.moveSectionPlane("Top",r),this.moveSectionPlane("Bottom",this.center.y-.5*this.cubeSize.y-e.y));var n=t.z-this.center.z-.5*this.cubeSize.z;n<this.planeOffset[4]?(this.moveSectionPlane("Back",this.center.z-.5*this.cubeSize.z-e.z),this.moveSectionPlane("Front",n)):(this.moveSectionPlane("Front",n),this.moveSectionPlane("Back",this.center.z-.5*this.cubeSize.z-e.z))},this.getPlaneIndexByName=function(e){var t=-1;return"Right"==e?t=0:"Left"==e?t=1:"Top"==e?t=2:"Bottom"==e?t=3:"Front"==e?t=4:"Back"==e&&(t=5),t},this.moveSectionPlane=function(e,t){var i=this.getPlaneIndexByName(e);if(-1!=i){i%2!=0&&(t=-t);var r=t-this.planeOffset[i];this.offset(i,r)}},this.setProcess=function(e,t){var i=this.getPlaneIndexByName(e),r=0;if(i<2?r=this.cubeSize.x:i<4?r=this.cubeSize.y:i<6&&(r=this.cubeSize.z),t>1?t=1:t<0&&(t=0),-1!=i){i%2!=1&&(t=-t);var n=t*r-this.planeOffset[i];this.offset(i,n)}},this.getProcess=function(e){var t=this.getPlaneIndexByName(e);-1==t&&console.log("faceName is illegal");var i=0;t<2?i=this.cubeSize.x:t<4?i=this.cubeSize.y:t<6&&(i=this.cubeSize.z);var r=1;t%2!=1&&(r=-1);var n=r*this.planeOffset[t]/i;return n>1?n=1:n<0&&(n=0),n};var l=new THREE.Vector3(0,0,1);this.rotateSectionBox=function(e,t){"x"==e?this.planeRotate[0]=t:"y"==e?this.planeRotate[1]=t:"z"==e&&(this.planeRotate[2]=t),this.calculation=!0;var i=new THREE.Quaternion;i.setFromAxisAngle(a,this.planeRotate[0]);var r=new THREE.Quaternion;r.setFromAxisAngle(o,this.planeRotate[1]);var n=new THREE.Quaternion;n.setFromAxisAngle(l,this.planeRotate[2]);var s=new THREE.Quaternion;s.multiply(i),s.multiply(r),s.multiply(n),this.quaternion.copy(s),this.update()},this.highLight=function(){null!=this.selectIndex&&(this.children[this.selectIndex].material=this.planeHighLightMatrial)},this.cancelHighLight=function(){null!=this.selectIndex&&(this.children[this.selectIndex].material=this.planeMaterial,this.selectIndex=null)}},s.ClipPlanes.prototype=Object.create(s.ObjectGroup.prototype),s.ClipPlanes.prototype.constructor=s.ClipPlanes,s.ClipPlanes.prototype.init=function(){this.calculationPlanes(this.cubeSize,this.center)},s.ClipPlanes.prototype.hitTest=function(e){var t=null,i=null;if(this.raycast(e),null!=this.selectIndex){var r=e.ray,n=new THREE.Plane,a=this.uniforms.vClipPlane.value[this.selectIndex];n.setComponents(a.x,a.y,a.z,a.w),t=r.distanceToPlane(n),i=r.direction.dot(n.normal)<0}return{sign:i,distance:t}},s.ClipPlanes.prototype.raycast=function(e){if(this.visible){var t=[],i=null;this.selectIndex=null;for(var r=0;r<6;r++)if(this.children[r].raycast(e,t),t.length>0){var n=t.pop();(!i||n.distance<i.distance)&&(i=n,this.selectIndex=r),t=[]}}},s.FillClipPlane=function(e,t){s.ObjectGroup.call(this,s.ObjectGroupType.FILLCLIPPLANE,{priority:20}),this.cubeSize=e.clone(),this.originBoundingBox=(new THREE.Box3).setFromCenterAndSize(t,e),this.boundingBox=this.originBoundingBox.clone(),this.center=t.clone(),this.length=Math.max(this.cubeSize.x,Math.max(this.cubeSize.y,this.cubeSize.z)),this.planeOffset=0,this.normalIndex=3,this.visible=!1,this.rotatable=!1,this.hit=!1,this.clipplane=new THREE.Vector4,this.observer=null,this.renderClipPlane=new THREE.Plane,this.angleA=0,this.angleB=0,this.capsIntersectPosition=[],this.capsIntersectContour={},this.clipPlaneBox=null,this.innerClipping=!1,this.limitDragging=!0,this.orthoViewProjMatrix=new THREE.Matrix4,this.planeWidth=null,this.planeHeight=null,this.uniforms={iClipPlane:{value:0},vClipPlane:{value:new Array(new THREE.Vector4)}},this.planeMaterial=new s.PhongLightingMaterial({color:16777215,opacity:0,transparent:!0,side:THREE.DoubleSide,lights:!0}),this.planeHighLightMatrial=new s.PhongLightingMaterial({color:1170103,opacity:.1,transparent:!0,side:THREE.DoubleSide,lights:!0}),this.initPlaneModel=function(){for(var e=this.children.length,t=e-1;t>=0;--t)this.remove(this.children[t]);this.planeOffset=0;var i=this.length,r=new THREE.PlaneGeometry(i,i),n=new THREE.Mesh(r,this.planeMaterial);n.name="fillClipPlane",n.customTag=!0,n.renderOrder=90,this.position.copy(this.center),this.clipplane.set(0,0,1,0),this.planeMesh=n,this.planeMesh.geometry.computeBoundingBox(),this.clipPlaneBox=this.planeMesh.geometry.boundingBox,this.add(n)},this.initWireframes=function(){var e=.5*this.length,t=[-e,e,0,e,e,0,-e,-e,0,e,-e,0],i=[0,1,1,3,3,2,2,0],r=new THREE.BufferGeometry,n=new s.PhongLightingMaterial({color:1170103,lights:!0});r.setIndex(i),r.addAttribute("position",new THREE.Float32BufferAttribute(t,3));var a=new THREE.LineSegments(r,n);a.name="Wireframes",a.customTag=!0,this.wireframeMesh=a,this.add(a)},this.resizeGeometry=function(e,t){var i=new THREE.PlaneGeometry(e,t);this.planeMesh.geometry=i,this.planeMesh.geometry.computeBoundingBox(),this.clipPlaneBox=this.planeMesh.geometry.boundingBox;var r=.5*e,n=.5*t,a=[-r,n,0,r,n,0,-r,-n,0,r,-n,0],o=[0,1,1,3,3,2,2,0],s=new THREE.BufferGeometry;if(s.setIndex(o),s.addAttribute("position",new THREE.Float32BufferAttribute(a,3)),this.wireframeMesh.geometry=s,this.capPlane){var l=new THREE.PlaneGeometry(e,t);this.capPlane.planeMesh.geometry=l}},this.getCoordinate=function(){var e=this.planeWidth?.5*this.planeWidth:.5*this.length,t=this.planeHeight?.5*this.planeHeight:.5*this.length,i=new THREE.Vector3(-e,t,0);i.applyMatrix4(this.matrix);var r=new THREE.Vector3(e,t,0);r.applyMatrix4(this.matrix);var n=new THREE.Vector3(-e,-t,0);return n.applyMatrix4(this.matrix),{axisX:i.clone().sub(r).normalize(),axisY:i.clone().sub(n).normalize()}},this.initCapsPlane=function(){if(this.capPlane)return this.capPlane;var e=this.length,t=new THREE.PlaneGeometry(e,e),i=new s.PhongLightingMaterial({color:6380315,side:THREE.DoubleSide}),r=new THREE.Mesh(t,i),n=this.planeMesh;r.matrixWorld=n.matrixWorld,r.matrix=this.matrix;for(var a=.5*this.length,o=[],l=a-5;l>-a;l-=5)o.push(l,a,0),o.push(a,l,0);for(var l=5-a;l<a;l+=5)o.push(-a,l,0),o.push(l,-a,0);var u=new THREE.LineMaterial({color:2236962});u.linewidth=1,u.resolution.set(window.innerWidth,window.innerHeight),u.depthTest=!1;var c=new THREE.LineSegmentsGeometry;c.setPositions(o);var h=new THREE.LineSegments2(c,u);return h.matrix=this.matrix,h.matrixWorld=n.matrixWorld,this.capPlane={planeMesh:r,lineMesh:h},this.capPlane},this.addToCapsWireframe=function(e){if(this.capsWireframe)this.capsWireframe.geometry.setPositions(this.capsIntersectPosition),this.capsWireframe.geometry.maxInstancedCount=void 0;else{var t=new THREE.LineSegmentsGeometry;t.setPositions(this.capsIntersectPosition),this.capsWireframe=new THREE.LineSegments2(t,new THREE.LineMaterial({color:2236962,linewidth:1,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-10,resolution:new THREE.Vector2(window.innerWidth,window.innerHeight)}));e.manager.scene.getOrCreateObjectGroup(s.ObjectGroupType.CAPSWIREFRAME,{globalSpace:!0}).add(this.capsWireframe),this.capsWireframe.updateMatrixWorld(!0)}},this.clearCapsWireframe=function(){this.capsIntersectPosition.length=0,this.capsIntersectPosition=[],this.capsWireframe&&this.capsWireframe.geometry.removeAttribute("instanceStart"),this.capsWireframe&&this.capsWireframe.geometry.removeAttribute("instanceEnd")},this.calculateClippingIds=function(){},this.updateClippingParams=function(e){},this.getFillClipBoundingBox=function(){return this.boundingBox},this.getFillClipPlaneBoundingBox=function(){var e=this.clipPlaneBox.clone(),t=this.planeMesh.matrix;return e.applyMatrix4(t),e},this.calculateFillClipBoundingBox=function(e){this.boundingBox=this.originBoundingBox.clone(),0!=this.clipplane.x?1==this.clipplane.x?this.boundingBox.max.x=e.x:this.boundingBox.min.x=e.x:0!=this.clipplane.y?1==this.clipplane.y?this.boundingBox.max.y=e.y:this.boundingBox.min.y=e.y:0!=this.clipplane.z&&(1==this.clipplane.z?this.boundingBox.max.z=e.z:this.boundingBox.min.z=e.z)},this.enable=function(e,t){this.visible=t,this.uniforms.iClipPlane.value=e?1:0,this.update()},this.isEnabled=function(){return 0!=this.uniforms.iClipPlane.value},this.update=function(){this.updateMatrixWorld();var e=new THREE.Matrix4;if(e.getInverse(this.matrix),e.transpose(),this.uniforms.vClipPlane.value[0]=this.clipplane.clone().applyMatrix4(e),this.innerClipping){var t=this.planeWidth,i=this.planeHeight;this.orthoCamera=new THREE.OrthographicCamera(-t/2,t/2,i/2,-i/2,.1,2e3),this.orthoCamera.position.set(this.position.x,this.position.y,this.position.z);var r=this.uniforms.vClipPlane.value[0].clone(),n=new THREE.Vector3(r.x,r.y,r.z);n.normalize();var a=new THREE.Vector3(this.position.x,this.position.y,this.position.z);a.add(n),this.orthoCamera.lookAt(a),this.orthoCamera.updateMatrixWorld(!0),this.orthoViewProjMatrix.copy(this.orthoCamera.projectionMatrix);var o=new THREE.Matrix4;o.getInverse(this.orthoCamera.matrixWorld),this.orthoViewProjMatrix.multiply(o)}this.updateClippingParams(this.uniforms),this.observer&&this.observer()},this.getClipPlane=function(){return this.clipplane.clone()},this.offset=function(e){var t=0;this.normalIndex<2?t=this.cubeSize.x:this.normalIndex<4?t=this.cubeSize.z:this.normalIndex<6&&(t=this.cubeSize.y),this.planeOffset+=e,this.limitDragging&&Math.abs(this.planeOffset)>.5*t&&(this.planeOffset=this.planeOffset>0?.5*t:.5*-t);var i=this.uniforms.vClipPlane.value[0].clone(),r=new THREE.Vector3(i.x,i.y,i.z);r.normalize();var n=new THREE.Vector3(r.x*this.planeOffset,r.y*this.planeOffset,r.z*this.planeOffset);this.position.copy(this.center).add(n),this.update()},this.setOffset=function(e){var t=0;this.normalIndex<2?t=this.cubeSize.x:this.normalIndex<4?t=this.cubeSize.z:this.normalIndex<6&&(t=this.cubeSize.y),this.planeOffset=e,this.limitDragging&&Math.abs(e)>.5*t&&(this.planeOffset=e>0?.5*t:.5*-t);var i=this.uniforms.vClipPlane.value[0].clone(),r=new THREE.Vector3(i.x,i.y,i.z);r.normalize();var n=new THREE.Vector3(r.x*this.planeOffset,r.y*this.planeOffset,r.z*this.planeOffset);this.position.copy(this.center).add(n),this.update()},this.changeNormal=function(e){this.quaternion.set(0,0,0,1),this.angleA=0,this.angleB=0,this.setNormal(e)},this.setNormal=function(e){var t=this.planeMesh,i=this.wireframeMesh;0==e?(this.clipplane.set(1,0,0,0),t.rotation.set(0,Math.PI/2,0),i.rotation.set(0,Math.PI/2,0)):1==e?(this.clipplane.set(-1,0,0,0),t.rotation.set(0,-Math.PI/2,0),i.rotation.set(0,-Math.PI/2,0)):2==e?(this.clipplane.set(0,0,-1,0),t.rotation.set(Math.PI,0,0),i.rotation.set(Math.PI,0,0)):3==e?(this.clipplane.set(0,0,1,0),t.rotation.set(0,0,0),i.rotation.set(0,0,0)):4==e?(this.clipplane.set(0,1,0,0),t.rotation.set(-Math.PI/2,0,0),i.rotation.set(-Math.PI/2,0,0)):5==e&&(this.clipplane.set(0,-1,0,0),t.rotation.set(Math.PI/2,0,0),i.rotation.set(Math.PI/2,0,0)),this.normalIndex=e,t.updateMatrixWorld(),i.updateMatrixWorld(),this.capPlane&&(this.capPlane.planeMesh.matrixWorld=t.matrixWorld,this.capPlane.lineMesh.matrixWorld=t.matrixWorld),this.update()};var i=new THREE.Quaternion,r=new THREE.Vector3(1,0,0);this.rotX=function(e){i.setFromAxisAngle(r,e),this.quaternion.multiply(i),this.update()};var n=new THREE.Vector3(0,1,0);this.rotY=function(e){i.setFromAxisAngle(n,e),this.quaternion.multiply(i),this.update()};var a=new THREE.Vector3(0,0,1);this.rotateByAxis=function(e,t){i.setFromAxisAngle(e,t),this.quaternion.multiply(i)},this.rotateAngleOffset=function(e,t){var i=this.normalIndex;e=e%360/180*Math.PI,0==i||1==i?("y"==t&&this.rotateByAxis(a,e),"z"==t&&this.rotateByAxis(n,e)):2==i||3==i?("x"==t&&this.rotateByAxis(r,e),"z"==t&&this.rotateByAxis(n,e)):4!=i&&5!=i||("x"==t&&this.rotateByAxis(r,e),"y"==t&&this.rotateByAxis(a,e)),this.update()},this.setRotateAngle=function(e,t){this.quaternion.set(0,0,0,1);var i=this.normalIndex;e=void 0==e?this.angleA:e%360,t=void 0==t?this.angleB:t%360,e=e<0?360+e:e,t=t<0?360+t:t,this.angleA=e,this.angleB=t,e=e/180*Math.PI,t=t/180*Math.PI,0==i||1==i?(e=0==i?-e:e,t=0==i?t:-t,this.rotateByAxis(a,e),this.rotateByAxis(n,t)):2==i||3==i?(this.rotateByAxis(r,e),this.rotateByAxis(n,t)):4!=i&&5!=i||(e=3==i?-e:e,t=3==i?t:-t,this.rotateByAxis(r,e),this.rotateByAxis(a,t)),this.update()},this.getRotateAngle=function(){return{angleA:this.angleA,angleB:this.angleB}},this.highLight=function(){this.planeMesh.material=this.planeHighLightMatrial},this.cancelHighLight=function(){this.planeMesh.material=this.planeMaterial,this.hit=!1};var o=function(e,t,i,r,n,a,o,s,l,u){this.enable=e,this.visible=t,this.rotatable=i,this.planeOffset=r,this.position=n,this.scale=a,this.quaternion=o,this.cubeSize=s,this.center=l,this.normalIndex=u};this.store=function(){return new o(!!this.uniforms.iClipPlane.value,this.visible,this.rotatable,this.planeOffset,this.position.clone(),this.scale.clone(),this.quaternion.clone(),this.cubeSize.clone(),this.center.clone(),this.normalIndex)},this.restore=function(e){this.enable(e.enable,e.visible),this.rotatable=e.rotatable,this.planeOffset=e.planeOffset,this.position.copy(e.position),this.scale.copy(e.scale),this.quaternion._w=e.quaternion._w,this.quaternion._x=e.quaternion._x,this.quaternion._y=e.quaternion._y,this.quaternion._z=e.quaternion._z,this.normalIndex=void 0==e.normalIndex?this.normalIndex:e.normalIndex,this.setNormal(this.normalIndex),this.setBorder(this.length,this.length,!1)},this.setProcess=function(e){var t=0;this.normalIndex<2?t=this.cubeSize.x:this.normalIndex<4?t=this.cubeSize.z:this.normalIndex<6&&(t=this.cubeSize.y),e>1?e=1:e<-1&&(e=-1),this.planeOffset=e*t*.5;var i=this.uniforms.vClipPlane.value[0].clone(),r=new THREE.Vector3(i.x,i.y,i.z);r.normalize();var n=new THREE.Vector3(r.x*this.planeOffset,r.y*this.planeOffset,r.z*this.planeOffset);this.position.copy(this.center).add(n),this.update()},this.restoreRotation=function(){this.quaternion.set(0,0,0,1),this.update()},this.getProcess=function(){var e=0;return this.normalIndex<2?e=this.cubeSize.x:this.normalIndex<4?e=this.cubeSize.z:this.normalIndex<6&&(e=this.cubeSize.y),this.planeOffset/e*2}},s.FillClipPlane.prototype=Object.create(s.ObjectGroup.prototype),s.FillClipPlane.prototype.constructor=s.FillClipPlane,s.FillClipPlane.prototype.init=function(){this.initPlaneModel(),this.initWireframes()},s.FillClipPlane.prototype.hitTest=function(e){if(!this.visible)return void(this.hit=!1);var t=null,i=null;if(this.hit=this.raycast(e),this.hit){var r=e.ray,n=new THREE.Plane,a=this.uniforms.vClipPlane.value[0];n.setComponents(a.x,a.y,a.z,a.w),t=r.distanceToPlane(n),i=r.direction.dot(n.normal)<0}return{sign:i,distance:t}},s.FillClipPlane.prototype.raycast=function(e,t){var i=[];return this.planeMesh.raycast(e,i),i.length>0},s.FillClipPlane.prototype.resize=function(e){var t=Math.max(e.x,Math.max(e.y,e.z)),i=t/this.length;this.scale.set(i,i,i),this.cubeSize.copy(e)},s.FillClipPlane.prototype.setBorder=function(e,t,i){this.planeWidth=e,this.planeHeight=t,this.resizeGeometry(e,t),this.cubeSize.set(1,e,t),this.originBoundingBox=(new THREE.Box3).setFromCenterAndSize(this.center,this.cubeSize),this.boundingBox=this.originBoundingBox.clone(),this.innerClipping=!s.Utils.isDefined(i)||i,this.limitDragging=!1,this.update()},s.FillClipPlane.prototype.getSideLength=function(){return this.length*this.scale.x},s.FillClipPlane.prototype.updateCamera=function(e){!1!==this.visible&&(e.calculateNearFar({fillClipPlane:!0}),e.cameraControl.updateCamera())},s.ClipPlaneService=function(e){this.viewer=e},s.ClipPlaneService.prototype={construtor:s.ClipPlaneService,destroy:function(){this.viewer=null},update:function(e){var t=this.getEditor();t&&(t.update(e),this.viewer.render())},getEditor:function(){for(var e=this.viewer.editorManager.tools,t=0;t<e.length;t++)if(e[t].getName()==s.EditToolMode.CLIP_BY_BOX)return e[t];return null},setSectionBox:function(e,t){this.getEditor().setSectionBox(e,t)},toggle:function(e,t){this.getEditor().toggle(e,t)},setVisible:function(e){this.getEditor().visible(e)},setRotatable:function(e){this.getEditor().rotatable(e)},enablePick:function(e){this.getEditor().enablePick=e},saveState:function(){return this.getEditor().store()},loadState:function(e){this.getEditor().restore(e)},reset:function(){s.ClipPlaneManager.resetClipPlanes(this.viewer.getScene()),this.getEditor().reset()},recalculate:function(){return this.viewer.getFilter().getVisibleComponentsBbox()},setProcess:function(e,t){this.getEditor().setProcess(e,t)},getProcess:function(e){return this.getEditor().getProcess(e)},changeDirection:function(e){this.getEditor().changeDirection(e)}},function(){var e=function e(){_classCallCheck(this,e)};e.getInstance=function(e){if(null==e.clipPlanes){var t=e.getBoundingBox();e.clipPlanes=new s.ClipPlanes(t.getSize().multiplyScalar(e.expandScalar),t.getCenter()),e.objectGroups.add(e.clipPlanes)}return e.clipPlanes},e.destroy=function(e){e.clipPlanes=null},e.setClipPlanes=function(e,t){if(t){var i=s.ClipPlaneManager.getInstance(e);t.setFromCenterAndSize(t.getCenter(),t.getSize().multiplyScalar(e.expandScalar)),i.setSectionBox(t.min,t.max)}},e.resetClipPlanes=function(e){var t=s.ClipPlaneManager.getInstance(e),i=e.getBoundingBox();if(t.reset(),i.max.x==-1/0||i.max.y==-1/0||i.max.z==-1/0||i.min.x==1/0||i.min.y==1/0||i.min.z==1/0)return void(e.clipPlanes=null);i.setFromCenterAndSize(i.getCenter(),i.getSize().multiplyScalar(e.expandScalar)),t.setSectionBox(i.min,i.max)},e.disableClipPlanes=function(e){null!=e.clipPlanes&&(e.clipPlanes.enable(!1,!1),e.clipPlanes.update())},s.ClipPlaneManager=e}(),function(){var e=function e(){_classCallCheck(this,e)};e.getInstance=function(e){if(null==e.fillClipPlane){var t=new THREE.Box3;t.copy(e.getBoundingBoxWithoutDEM()),e.fillClipPlane=new s.FillClipPlane(t.getSize().multiplyScalar(e.expandScalar),t.getCenter()),e.objectGroups.add(e.fillClipPlane)}return e.fillClipPlane},e.destroy=function(e){e.fillClipPlane=null},e.disableClipPlanes=function(e){null!=e.fillClipPlane&&(e.fillClipPlane.enable(!1,!1),e.fillClipPlane.update())},e.getFillClipPlaneBoundingBoxWorld=function(t){var i=e.getInstance(t),r=i.planeMesh;r.geometry.computeBoundingBox();var n=r.geometry.boundingBox.clone(),a=t.getInverseMatrixGlobal();return(new THREE.Matrix4).getInverse(r.matrixWorld),n.applyMatrix4(r.matrixWorld).applyMatrix4(a),n},s.FillClipPlaneManager=e}(),function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getContours",value:function(t,i,r){for(var n=[],a=function(e,t,i){for(var r=0,n=0;n<i.length;n++){var a=i[n];if(n!=t&&0==a.checked&&a.faceIndex==e.faceIndex){r=n;break}}return r},o=function(t,i){for(var r=-1,n=0;n<i.length;n++){var a=i[n];if(0==a.checked&&s.GeomUtil.isVector3Equal(a,t,e.tolerance)){r=n;break}}return r},l=0,u=0,c=void 0,h=void 0,d=0;d<t.length;d++)if(1!=t[d].checked){l=d,c=t[l],c.checked=!0,u=a(c,l,t),h=t[u],h.checked=!0,n.push(c.clone()),n.push(h.clone());break}n=function t(i,r,n){var l=o(i,r);if(-1===l&&(i.x=n[0].x,i.y=n[0].y,i.z=n[0].z,n.reverse(),-1===(l=o(i,r))))return n;var u=r[l];u.checked=!0;var c=a(u,l,r),h=r[c];return h.checked=!0,s.GeomUtil.isVector3Equal(h,n[0],e.tolerance)?(n.push(n[0].clone()),n):(n.push(h.clone()),t(h,r,n))}(h,t,n),i.push(n);var f=0;return t.forEach(function(e){f+=1==e.checked?1:0}),f!=t.length?this.getContours(t,i,!1):i}},{key:"concatContours",value:function(t){if(1===t.length)return t[0];var i=[];t.map(function(e){e.map(function(e){var t={};t.checked=!1,t.line=e,i.push(t)})});var r=[];return function t(i){for(var n=0,a=void 0,o=0;o<i.length;o++)if(!0!==i[o].checked){a=i[o],i[o].checked=!0,n=o,function t(i,r,n){for(var a=-1,o=0;o<n.length;o++){var l=n[o],u=l.line;if(o!==r&&1!=l.checked){if(s.GeomUtil.isVector3Equal(i[0],u[0],e.tolerance)){i.reverse(),u.map(function(e,t){0!=t&&i.push(e)}),a=o,n[o].checked=!0,t(i,a,n);break}if(s.GeomUtil.isVector3Equal(i[0],u[u.length-1],e.tolerance)){u.reverse(),u.map(function(e,t){0!=t&&i.unshift(e)}),a=o,n[o].checked=!0,t(i,a,n);break}if(s.GeomUtil.isVector3Equal(i[i.length-1],u[0],e.tolerance))u.map(function(e,t){0!=t&&i.push(e)}),a=o,n[o].checked=!0,t(i,a,n);else if(s.GeomUtil.isVector3Equal(i[i.length-1],u[u.length-1],e.tolerance)){u.reverse(),u.map(function(e,t){0!=t&&i.push(e)}),a=o,n[o].checked=!0,t(i,a,n);break}}}}(a.line,n,i),r.push(a.line);var l=0;if(i.forEach(function(e){l+=1==e.checked?1:0}),l!=i.length)return t(i)}return r}(i)}},{key:"searchInnerRing",value:function(e){var t=function(e){var t=e[0],i=e[e.length-1];return s.GeomUtil.isVector3Equal(t,i,.1)},i=(e.length,[]);e.map(function(e){var t={};t.checked=!1,t.line=e,t.box=new THREE.Box3,e.map(function(e){t.box.expandByPoint(e)}),i.push(t)});var r={};return function e(i){for(var n=0,a=void 0,o=0;o<i.length;o++)if(t(i[o].line)&&!0!==i[o].checked){a=i[o],i[o].checked=!0,n=o,function(e,t,i){for(var n=0;n<i.length;n++){var a=i[n],o=a.box;if(n!==t&&1!=a.checked)if(e.containsBox(o)){void 0===r[t]?r[t]=[n]:r[t].push(n),r[n]&&r[n].length>0&&(r[t]=r[t].concat(r[n]),delete r[n]);for(var s in r)r[s].indexOf(t)>-1&&(r[s]=r[s].concat(r[t]),delete r[t]);i[n].checked=!0}else if(o.containsBox(e)){void 0===r[n]?r[n]=[t]:r[n].push(t),i[n].checked=!0,r[t]&&r[t].length>0&&(r[n]=r[n].concat(r[t]),delete r[t]);for(var l in r)r[l].indexOf(n)>-1&&(r[l]=r[l].concat(r[n]),delete r[n])}else;}}(a.box,n,i);var s=0;if(i.forEach(function(e){s+=1==e.checked?1:0}),s!=i.length)return e(i)}}(i),r}}]),e}();e.tolerance=.001,s.ClipPlaneContourManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.getModelManager(),{modelId:"ExternalComponent"}));return i.manager.addModel(i),i.filter=new s.FilterManager,i.filter.setObserverForSceneState(i.manager.getFilter().getObserverForSceneState()),i.castShadow=!1,i.receiveShadow=!1,i.meshes={},i.customSelectMaterials={},i.databagId="ExternalComponent",i.objectIds=null,i.lastFilteredIds=null,i.firstAnimation=!0,i.animationIds={},i.animationLength=0,i.animationId=0,i.invalidObjectType=["invalidPlane"],i.floorExplosion=!1,i.blinkMaterials=[],i.blinkMaterialMap={},i.rawBoundingBoxMap={},i.bindModelMap={},i.mixers={},i.actions={},i.hoveredRenderOrder=-100,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){if(this.manager.removeModel(this.id),this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this._removeNodeGroup(),this.meshes=null,this.customSelectMaterials=null,this.objectIds=null,this.lastFilteredIds=null,this._cancelAnimate(),this.firstAnimation=null,this.animationIds=null,this.invalidObjectType=null,this.blinkMaterials=null,this.blinkMaterialMap=null,this.selectedIds=null,this.blinkedIds=null,this.rawBoundingBoxMap=null,this.bindModelMap=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"cloneNode",value:function(e,t){this.addNode(t,this.meshes[e])}},{key:"addNode",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!s.Utils.isDefined(t))return void console.log("Warning: the object is invalid");if(this.meshes[e])return void console.log("Warning: name is already exist, please change name ");if(-1!=this.invalidObjectType.indexOf(t.type))return void console.log("Warning: the object is invalid");t instanceof Array||(t=[t]);var r=void 0;for(var n in this.meshes)if(this.meshes[n][0].uuid===t[0].uuid){r=n;break}if(r){this.meshes[e]=[];for(var a=this.meshes[r].length,o=0;o<a;o++)this.meshes[e][o]=s.SkeletonUtils.clone(this.meshes[r][o]),this.meshes[e][o].animations=this.meshes[r][o].animations,this.meshes[e][o].position.copy(this.meshes[r][o]._oriPosition),this.meshes[e][o].quaternion.copy(this.meshes[r][o]._oriQuaternion),this.meshes[e][o].scale.copy(this.meshes[r][o]._oriScale),this.meshes[e][o].matrix=(new THREE.Matrix4).copy(this.meshes[r][o]._oriMatrix);t=this.meshes[e]}else this.meshes[e]=t;var l,u,c=[s.ExternalObjectConverterGroup];for(l=0,u=t.length;l<u;l++){var h,d=!1;c.some(function(e){return t[l]instanceof e&&(d=!0),d}),d?(h=t[l].clone(),t[l]=h):h=t[l],void 0===h._oriMatrix&&(h._oriMatrix=new THREE.Matrix4),h._oriPosition=(new THREE.Vector3).copy(h.position),h._oriQuaternion=(new THREE.Quaternion).copy(h.quaternion),h._oriScale=(new THREE.Vector3).copy(h.scale),h._oriMatrix.compose(h.position,h.quaternion,h.scale)}this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().addNode(e,t),i.customSelectMaterial&&(this.customSelectMaterials[e]=i.customSelectMaterial);var f=this.getModelManager().viewer;for(l=0,u=t.length;l<u;l++){var h=t[l];h.name=e;var p=new THREE.Box3;p.setFromObject(h),h.box=p;var m=new THREE.Matrix4;m.getInverse(h.matrix),h.originBox=p.clone().applyMatrix4(m),this._initializeAutoAnimation(h,e),this._getNodeGroup().add(h),h.updateMatrixWorld(!0);var v=s.Utils.defaultValue(i.holdMaterialWhenPicked,!1);this._cacheNodeMaterial(h,v),s.GlobalData.EnableShadowMap&&(f.traverseGroupEnableShadow(h,this.castShadow,this.receiveShadow),f.updateShadowMap())}var g=s.Utils.defaultValue(i.objectData,{});if(s.Utils.isDefined(t[0].sourceComponentId)){var y=f.getUserdataByUserId(t[0].sourceComponentId);s.Utils.isDefined(y)&&(g=Object.assign({},g,y))}this._addToNodeInfoMap({name:e,userId:e,boundingBox:new THREE.Box3,state:s.EnumObjectState.Visible,userData:g}),this._updateBoundingBoxByObjectId(e),this._updateFilterManager(),this.objectIds=Object.keys(this.meshes),this.rawBoundingBoxMap[e]=this.getBoundingBoxById(e).clone()}},{key:"setObjectData",value:function(e,t){this._updateUserData(e,t)}},{key:"getObjectData",value:function(e){if(this.nodeInfoMap){var t=this.nodeInfoMap[e];if(s.Utils.isDefined(t))return t[0].userData}}},{key:"bindModel",value:function(e,t){if(t=s.Utils.defaultValue(t,"ExternalComponent"),this.meshes[e]&&this.getModelManager().modelCollection.getIds().indexOf(t.toString())>=0){if(this.getBindedModelId(e))return;this.bindModelMap[t]||(this.bindModelMap[t]=[]),this.bindModelMap[t].push(e);var i=this.getModelManager().explosionManager;if(0!==i.getFloorExplosionExtent(t))for(var r=i.getFloorInfos(t),n=this.meshes[e],a=this.getPickingNodeGenerator().pickingNodeMap[e],o=0;o<n.length;o++){var l=n[o],u=a[o];this.explodeMesh(l,u,r,!0)}}}},{key:"unbindModel",value:function(e,t){if(this.bindModelMap[t]){var i=this.bindModelMap[t].indexOf(e);if(i>=0){this.bindModelMap[t].splice(i,1);var r=this.meshes[e];if(!r)return;for(var n=this.getPickingNodeGenerator().pickingNodeMap[e],a=0;a<r.length;a++){var o=r[a],s=n[a];!function(e,t){if(void 0!==e.explodedHeight){var i=e.explodedDirection.clone().negate().multiplyScalar(e.explodedHeight),r=new THREE.Matrix4;r.makeTranslation(i.x,i.y,i.z),e.applyMatrix(r),e.updateMatrixWorld(),t.applyMatrix(r),t.updateMatrixWorld(),delete e.explodedDirection,delete e.explodedHeight,delete e.preExplodedDirection,delete e.preExplodedHeight}}(o,s)}}}}},{key:"getBindedModelId",value:function(e){var t=this,i=void 0;return Object.keys(this.bindModelMap).some(function(r){if(t.bindModelMap[r].indexOf(e)>=0)return i=r,!0}),i}},{key:"getNodeById",value:function(e){var t=this.meshes[e];return t&&1===t.length?t[0]:t}},{key:"removeNodeById",value:function(e){if(this._hasObjectId(e)){var t=this.meshes[e];t[0].autoAnimation&&(delete this.animationIds[e],0==--this.animationLength&&this._cancelAnimate()),delete this.meshes[e],delete this.rawBoundingBoxMap[e],this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().removeNodeById(e),this.customSelectMaterials[e]&&delete this.customSelectMaterials[e];for(var i=this._getNodeGroup(),r=0,n=t.length;r<n;r++)i.remove(t[r]);this._removeFromNodeInfoMap(e),this._updateFilterManager(),this.filteredIds&&this.filteredIds[e]&&(delete this.filteredIds[e],this.lastFilteredIds=Object.keys(this.filteredIds)),this.objectIds=Object.keys(this.meshes);this.getModelManager().viewer.updateShadowMap();var a=this.getBindedModelId(e);a&&this.unbindModel(e,a)}}},{key:"clearNodes",value:function(){this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().clearNodes(),this._getNodeGroup().clear(),this._clearNodeInfoMap(),this.meshes={},this.rawBoundingBoxMap={},this.customSelectMaterials={},this.objectIds=null,this.animationIds={},this.animationLength=0,this._cancelAnimate(),this._updateFilterManager(),this.filteredIds&&(this.filteredIds={},this.lastFilteredIds=Object.keys(this.filteredIds)),this.getModelManager().viewer.updateShadowMap(),this.bindModelMap={}}},{key:"getAllNodes",value:function(){return this.meshes}},{key:"getAllMeshes",value:function(){var e=[],t=function t(i){s.Utils.isGroupObject(i)?i.children.forEach(function(i){s.Utils.isMeshObject(i)?e.push(i):t(i)}):e.push(i)};for(var i in this.meshes){this.meshes[i].forEach(function(e){t(e)})}return e}},{key:"setAccumulateTransform",value:function(e,t,i,r,n){if(this.floorExplosion&&n)return void n();if(this._hasObjectId(e)){for(var a=this.meshes[e],o=0,s=a.length;o<s;o++){var l=a[o];this.setAccumulateTransformForMesh(l,t,i,r),l.box=l.originBox.clone().applyMatrix4(l.matrix)}this._updateBoundingBoxByObjectId(e),this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().setAccumulateTransform(e,t,i,r);this.getModelManager().viewer.updateShadowMap()}}},{key:"setAccumulateOffset",value:function(e,t){if(this._hasObjectId(e)&&"[object Object]"===Object.prototype.toString.call(t)&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("z")){t instanceof THREE.Vector3||(t=new THREE.Vector3(t.x,t.y,t.z));var i=this.meshes[e];if(i.length>0){var r=i[0],n=t.applyQuaternion(r.quaternion);this.setAccumulateTransform(e,n)}}}},{key:"setTransform",value:function(e,t,i,r,n,a){if(this.floorExplosion&&n)return void n();if(this._hasObjectId(e)){for(var o=this.meshes[e],s=0,l=o.length;s<l;s++){var u=o[s];this.setTransformForMesh(u,t,i,r,a),u.box=u.originBox.clone().applyMatrix4(u.matrix)}this._updateBoundingBoxByObjectId(e),this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().setTransform(e,t,i,r,a);this.getModelManager().viewer.updateShadowMap()}}},{key:"rotateOnBasePoint",value:function(e,t,i,r){if(this._hasObjectId(e)){for(var n=this.meshes[e],a=new THREE.Vector3(t.x,t.y,t.z),o=new THREE.Vector3(i.x,i.y,i.z).normalize(),s=0,l=n.length;s<l;s++){var u=n[s],c=u.quaternion.clone(),h=c.clone().inverse(),d=u.position.clone(),f=(new THREE.Quaternion).setFromAxisAngle(o,r);u.quaternion.multiply(f);var p=a.clone().sub(d).applyQuaternion(h).applyQuaternion(u.quaternion);u.position.sub(p).add(a.clone().sub(d)),u.updateMatrixWorld(),u.box=u.originBox.clone().applyMatrix4(u.matrix)}this._updateBoundingBoxByObjectId(e),this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().rotateOnBasePoint(e,a,o,r);this.getModelManager().viewer.updateShadowMap()}}},{key:"scaleOnBasePoint",value:function(e,t,i){
if(this._hasObjectId(e)){for(var r=this.meshes[e],n=new THREE.Vector3(t.x,t.y,t.z),a=new THREE.Vector3(i.x,i.y,i.z),o=0,s=r.length;o<s;o++){var l=r[o];l.scale.multiply(a);var u=a.clone().sub(new THREE.Vector3(1,1,1)),c=l.quaternion.clone(),h=c.clone().inverse(),d=l.position.clone(),f=n.clone().sub(d).applyQuaternion(h).multiply(u).applyQuaternion(c);l.position.sub(f),l.updateMatrixWorld(),l.box=l.originBox.clone().applyMatrix4(l.matrix)}this._updateBoundingBoxByObjectId(e),this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().scaleOnBasePoint(e,n,a)}}},{key:"getTransform",value:function(e){if(!this._hasObjectId(e))return null;var t=this.meshes[e];return{position:t[0].position,scale:t[0].scale,rotate:t[0].quaternion}}},{key:"applyTransform",value:function(e,t,i,r){if(this._hasObjectId(e)){var n=this.getTransformMatrix(t,i,r);this.applyTransformMatrix(e,n);this.getModelManager().viewer.updateShadowMap()}}},{key:"applyTransformMatrix",value:function(e,t,i){if(this._hasObjectId(e)){for(var r=this.meshes[e],n=0,a=r.length;n<a;n++){var o=r[n];this.updateMatrixWorldForMesh(o,t,i);var s=o.originBox.clone();o.box=s.applyMatrix4(o.matrix)}this._updateBoundingBoxByObjectId(e),this._isPickingEffectEnabled()&&this.getPickingNodeGenerator().applyTransformMatrix(e,t,i);this.getModelManager().viewer.updateShadowMap()}}},{key:"getTransformMatrix",value:function(e,t,i){e=e||new THREE.Vector3,t=t||new THREE.Vector3(1,1,1),i=i||new THREE.Quaternion;var r=new THREE.Matrix4;return r.compose(e,i,t),r}},{key:"setAccumulateTransformForMesh",value:function(e,t,i,r){t&&(e.position.x+=t.x,e.position.y+=t.y,e.position.z+=t.z),i&&(e.scale.x*=i.x,e.scale.y*=i.y,e.scale.z*=i.z),r&&(e.rotation.x+=r.x,e.rotation.y+=r.y,e.rotation.z+=r.z),e.updateMatrixWorld(),this.getModelManager().viewer.updateShadowMap()}},{key:"setTransformForMesh",value:function(e,t,i,r,n){t=t||e.position,i=i||e.scale,r=r||e.quaternion;var a=this.getTransformMatrix(t,i,r);this.updateMatrixWorldForMesh(e,a,n),this.getModelManager().viewer.updateShadowMap()}},{key:"updateMatrixWorldForMesh",value:function(e,t,i){var r;if(i)r=t;else{r=(e._oriMatrix?e._oriMatrix:new THREE.Matrix4).clone().premultiply(t)}r.decompose(e.position,e.quaternion,e.scale),e.matrixAutoUpdate||e.matrix.copy(r),e.updateMatrixWorld(!0),this.getModelManager().viewer.updateShadowMap()}},{key:"applyFilter",value:function(){this._hasNode()&&(this._collectFilteredIds(),this._collectSelectedIds(),this._collectBlinkedIds(),this._collectHoveredIds(),this._updateNodes())}},{key:"applySelection",value:function(){this._hasNode()&&(this._collectSelectedIds(),this._collectHoveredIds(),this._updateNodes())}},{key:"clearSelection",value:function(){this._hasNode()&&(this._clearSelectedIds(),this.applyHover())}},{key:"applyHover",value:function(){this._hasNode()&&(this._collectHoveredIds(),this._updateNodes())}},{key:"clearHover",value:function(){this._hasNode()&&(this._clearHoveredIds(),this._updateNodes())}},{key:"applyBlink",value:function(){this._hasNode()&&(this._collectBlinkedIds(),this._collectHoveredIds(),this._updateNodes())}},{key:"clearBlink",value:function(){this._clearBlinkedIds(),this.applyHover()}},{key:"getAllNodeInfos",value:function(){return this.nodeInfoMap}},{key:"getNodeInfosByUserId",value:function(e){return this.nodeInfoMap?this.nodeInfoMap[e]:void 0}},{key:"_addToNodeInfoMap",value:function(e){this.nodeInfoMap||(this.nodeInfoMap={}),this.nodeInfoMap[e.userId]||(this.nodeInfoMap[e.userId]=[]),this.nodeInfoMap[e.userId].push(e)}},{key:"_removeFromNodeInfoMap",value:function(e){this.nodeInfoMap&&this.nodeInfoMap[e]&&delete this.nodeInfoMap[e]}},{key:"_updateUserData",value:function(e,t){if(this.nodeInfoMap){var i=this.nodeInfoMap[e];s.Utils.isDefined(i)&&(i.forEach(function(e){e.userData=Object.assign({},e.userData,t)}),this._updateFilterManager())}}},{key:"_clearNodeInfoMap",value:function(){this.nodeInfoMap={}}},{key:"_updateFilterManager",value:function(){var e={};e[this.id]=this.getAllNodeInfos(),this.getFilter().reinitFilterManager(e)}},{key:"checkVisibleComponentsBox",value:function(){var e=0;for(var t in this.meshes)for(var i=this.meshes[t],r=0;r<i.length;r++){var n=i[r];0!=n.children.length&&(e++,this.nodeInfoMap[t]&&this.nodeInfoMap[t][r]&&this.nodeInfoMap[t][r].boundingBox.isEmpty()&&this.nodeInfoMap[t][r].boundingBox.copy(n.box))}return 0!=e}},{key:"_updateBoundingBoxByObjectId",value:function(e){if(this.nodeInfoMap&&this._hasObjectId(e)){var t,i,r=this.meshes[e],n=new THREE.Box3;for(t=0,i=r.length;t<i;t++)n.union(r[t].box);var a=this.nodeInfoMap[e];for(t=0,i=a.length;t<i;t++)a[t].boundingBox.copy(n)}}},{key:"_canBePick",value:function(e){return!e._materialHold}},{key:"_getNodeGroup",value:function(){return this.getModelManager().getScene().getOrCreateObjectGroup(s.ObjectGroupType.EXTERNALCOMPONENTMANAGER,{pickableType:s.PICKABLETYPE.ExternalComponent,globalSpace:!0})}},{key:"_removeNodeGroup",value:function(){this.getModelManager().getScene().removeObjectGroupByName(s.ObjectGroupType.EXTERNALCOMPONENTMANAGER)}},{key:"_cacheNodeMaterial",value:function(e,t){s.Utils.isGroupObject(e)?e.traverse(function(e){if(s.Utils.isMeshObject(e)&&!e._oriMaterial&&(e._oriRenderOrder=e.renderOrder,e._oriMaterial=e.material,e._materialHold=t,!e.geometry.index&&e.geometry.attributes&&e.geometry.attributes.position)){for(var i=[],r=e.geometry.attributes.position.array,n=0,a=r.length/3;n<a;n++)i.push(n);e.geometry.setIndex(new THREE.BufferAttribute(new Uint32Array(i),1))}}):e._oriMaterial||(e._oriRenderOrder=e.renderOrder,e._oriMaterial=e.material,e._materialHold=t)}},{key:"_collectFilteredIds",value:function(){var e=this.filteredIds={},t=this.getFilter(),i=t._hasHiddenFileIdFilter(),r=t._hasVisibleFilter(),n=t._hasOverrideMaterialFilter(),a=t._hasTransparentFilter();if(i||r||n||a)for(var o=this.objectIds,l=s.Model.EnumFilterState,u=0,c=o.length;u<c;u++){var h=o[u],d={name:h};if(r&&!1===t._isVisible(d))e[h]||(e[h]={}),e[h][l.HIDDEN]=!0;else if(a&&t._isTransparent(d))e[h]||(e[h]={}),e[h][l.TRANSPARENT]=!0;else if(n&&t._hasOverrideMaterial(d)){var f=t._getOverrideMaterial(d),p=null!=f?f.name:"";e[h]||(e[h]={}),e[h][l.OVERRIDED]=p}else;}}},{key:"_collectSelectedIds",value:function(){var e=this.filteredIds=this.filteredIds||{},t=s.Model.EnumFilterState,i=this.getModelManager().sceneState.getSelection(),r={};this._clearSelectedIds();for(var n=0,a=i.length;n<a;n++){var o=i[n];this.canBeSelectedId(o)&&(e[o]||(e[o]={}),e[o][t.SELECTED]=!0,r[o]=!0)}this.selectedIds=Object.keys(r)}},{key:"_clearSelectedIds",value:function(){if(this.filteredIds&&this.selectedIds&&this.selectedIds.length){for(var e=0,t=this.selectedIds.length;e<t;e++){var i=this.selectedIds[e];this.filteredIds[i]&&delete this.filteredIds[i][s.Model.EnumFilterState.SELECTED]}this.selectedIds=null}}},{key:"_collectHoveredIds",value:function(){this._clearHoveredIds();var e=this.getModelManager().sceneState.hoverId;if(e&&this._hasObjectId(e)){var t=this.filteredIds=this.filteredIds||{};this.hoveredId=e,t[e]||(t[e]={}),t[e][s.Model.EnumFilterState.HOVER]=!0}}},{key:"_clearHoveredIds",value:function(){this.filteredIds&&this.hoveredId&&this.filteredIds[this.hoveredId]&&(delete this.filteredIds[this.hoveredId][s.Model.EnumFilterState.HOVER],this.hoveredId=void 0)}},{key:"_collectBlinkedIds",value:function(){var e=this.manager.sceneState.getBlinkComponentsIdMap(this.id),t=this.filteredIds=this.filteredIds||{},i=s.Model.EnumFilterState,r={};this._clearBlinkedIds();for(var n in e)this._hasObjectId(n)&&(t[n]||(t[n]={}),t[n][i.BLINK]=!0,r[n]=!0);this.blinkedIds=Object.keys(r)}},{key:"_clearBlinkedIds",value:function(){if(this.filteredIds&&this.blinkedIds&&this.blinkedIds.length){for(var e=0,t=this.blinkedIds.length;e<t;e++){var i=this.blinkedIds[e];this.filteredIds[i]&&delete this.filteredIds[i][s.Model.EnumFilterState.BLINK]}this.blinkedIds=null}}},{key:"_hasObjectId",value:function(e){var t=this.meshes[e];return!(!t||!t.length)}},{key:"canBeSelectedId",value:function(e){var t=this.meshes[e];return!(!t||t[0].disPickable)}},{key:"_hasNode",value:function(){return!(!this.objectIds||!this.objectIds.length)}},{key:"_traverseNodeById",value:function(e,t){if(this._hasObjectId(e))for(var i=this.meshes[e],r=0,n=i.length;r<n;r++){var a=i[r];s.Utils.isGroupObject(a)?a.traverseVisible(function(e){s.Utils.isMeshObject(e)&&t&&t(e)}):s.Utils.isMeshObject(a)&&t&&t(a)}}},{key:"_resetNodeMaterial",value:function(){var e=this.lastFilteredIds;if(e&&e.length)for(var t=0,i=e.length;t<i;t++)this._updateNodeVisible(e[t],!0),this._traverseNodeById(e[t],function(e){e.material=e._oriMaterial,e.renderOrder=e._oriRenderOrder})}},{key:"_updateNodeVisible",value:function(e,t){for(var i=this.meshes[e],r=0,n=i.length;r<n;r++)i[r].visible=t}},{key:"_updateNodeById",value:function(e,t){var i=this;if(this._hasObjectId(e)){var r=this,n=this.hoveredRenderOrder,a=this.getModelManager().sceneState,o=s.Model.EnumFilterState,l=this.filteredIds[e];if(l){if(l[o.HIDDEN])return void this._updateNodeVisible(e,!1);if(l[o.TRANSPARENT]){var u=t._getMaterialByName("scene");return void this._traverseNodeById(e,function(e){r._canBePick(e)&&(e._oriMaterial instanceof s.CloudStandardMaterial?e.material=u:e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,u))})}if(!this._isPickingEffectEnabled()&&l[o.SELECTED]){var c=a.selectionMaterial,h=this.customSelectMaterials[e];return void this._traverseNodeById(e,function(e){r._canBePick(e)&&(h?e.material=h:e._oriMaterial.isMeshPhongMaterial?(e.material=a.phongSelectionMaterial,e.material.skinning=e._oriMaterial.skinning):e._oriMaterial instanceof s.CloudStandardMaterial?e.material=c:e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,c))})}if(l[o.BLINK])if(l[o.OVERRIDED]){var d=t._getMaterialByName(l[o.OVERRIDED]),f=a.getBlinkMaterial(d,this.id);this._traverseNodeById(e,function(e){var t=!1;if(e._oriMaterial instanceof s.CloudStandardMaterial)t=!0,e.material=f;else{var i=s.Blink.MaterialFactory[e._oriMaterial.type];i?(t=!0,e.material=i(),e.material.copy(e._oriMaterial)):e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,d)}var n=e.material.uuid;t&&void 0===r.blinkMaterialMap[n]&&(r.blinkMaterialMap[n]=!0,r.blinkMaterials.push(e.material))})}else this._traverseNodeById(e,function(e){var t=!1;if(e._oriMaterial instanceof s.CloudStandardMaterial)t=!0,e.material=a.getBlinkMaterial(e._oriMaterial,i.id);else{var n=s.Blink.MaterialFactory[e._oriMaterial.type];n&&(t=!0,e.material=n(),e.material.copy(e._oriMaterial))}var o=e.material.uuid;t&&void 0===r.blinkMaterialMap[o]&&(r.blinkMaterialMap[o]=!0,r.blinkMaterials.push(e.material))});else if(l[o.HOVER])if(l[o.OVERRIDED]){var u=a.getHoverMaterial(t._getMaterialByName(l[o.OVERRIDED]));this._traverseNodeById(e,function(e){r._canBePick(e)&&(e.renderOrder=n,e._oriMaterial instanceof s.CloudStandardMaterial?e.material=u:e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,u))})}else this._traverseNodeById(e,function(e){if(r._canBePick(e)){e.renderOrder=n;var t=a.getHoverMaterial(e._oriMaterial);e._oriMaterial instanceof s.CloudStandardMaterial?e.material=t:e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,t)}});else if(l[o.OVERRIDED]){var p=t._getMaterialByName(l[o.OVERRIDED]);return void this._traverseNodeById(e,function(e){r._canBePick(e)&&(e._oriMaterial instanceof s.CloudStandardMaterial?e.material=p:e.material=s.MaterialUtil.cloneMaterialBaseOnColor(e._oriMaterial,p))})}}}}},{key:"_updateNodes",value:function(){var e=this.getFilter();if(this._resetNodeMaterial(),this.blinkMaterialMap={},this.blinkMaterials.length=0,this.filteredIds){for(var t in this.filteredIds)this._updateNodeById(t,e);this.lastFilteredIds=Object.keys(this.filteredIds)}}},{key:"_initializeAutoAnimation",value:function(e,t){var i=this.getModelManager().viewer;if(e.autoAnimation){if("fire"==e.type){var r=s.GlobalData.SceneSize,n=i.getBoundingBoxWorld().getSize(),a=Math.max(n.x,n.y,n.z),o=r/a;e._initializeSizetween(o/.01421)}this._initializeAnimation(t)}}},{key:"_initializeAnimation",value:function(e){this.firstAnimation&&(this._clock=new THREE.Clock,this._animate(),this.firstAnimation=!1),this.animationIds[e]=!0,this.animationLength++}},{key:"play",value:function(e){if(!this.actions[e]){var t=this.getNodeById(e),i=new THREE.AnimationMixer(t);this.actions[e]=i.clipAction(t.animations[0]),this.mixers[e]=i,this._initializeAnimation(e)}this.actions[e].play(),this.actions[e].paused=!1}},{key:"pause",value:function(e){this.actions[e]&&(this.actions[e].paused=!0)}},{key:"stop",value:function(e){this.actions[e]&&(this.actions[e].paused=!1,this.actions[e].stop())}},{key:"isAnimation",value:function(e){var t=this.getNodeById(e);return!!(t.animations&&t.animations.length>0)}},{key:"_animate",value:function(){function e(){t.animationId=requestAnimationFrame(e);var r=t._clock.getDelta(),n=(JSON.parse(i.getCamera()),0);for(var a in t.meshes){var o=t.meshes[a],s=t.mixers[a];s&&s.update(r);for(var l=0,u=o.length;l<u;l++)o[l].autoAnimation?o[l].update&&o[l].update():o[l].updateMatrixWorld(),null!=o[l].unrender&&0!=o[l].unrender||n++}n>0&&i.render()}var t=this,i=this.getModelManager().viewer;e()}},{key:"_cancelAnimate",value:function(){this.firstAnimation=!0,cancelAnimationFrame(this.animationId),this.animationId=0}},{key:"explodeMesh",value:function(e,t,i,r){for(var n=void 0,a=void 0,o=void 0,s=void 0,l=0,u=i.length,c=u-1;c>=0;c--){var h=i[c],d=i[c].preExplodedTranslation?i[c].preExplodedTranslation.z:0;if(l=r?i[c].boundingBox.min.z:d+i[c].boundingBox.min.z,function(e,t){return t>=e-1}(l,e.position.z)||0===c){!function(t){n=e.explodedHeight=t.explodedHeight-t.elevation,a=e.explodedDirection=(t.explodedDirection||new THREE.Vector3).clone(),o=e.preExplodedHeight=t.preExplodedHeight-t.elevation,s=e.preExplodedDirection=(t.preExplodedDirection||new THREE.Vector3).clone()}(h);break}}var f=new THREE.Matrix4,p=a.clone().multiplyScalar(n).sub(s.clone().multiplyScalar(o));f.makeTranslation(p.x,p.y,p.z),e.applyMatrix(f),e.updateMatrixWorld(),e.box=e.originBox.clone().applyMatrix4(e.matrix),t.applyMatrix(f),t.updateMatrixWorld()}},{key:"explode",value:function(e){if(e){var t=this.bindModelMap[e];if(t)for(var i=this.getModelManager().explosionManager.getFloorInfos(e),r=0;r<t.length;r++){var n=t[r],a=this.meshes[n];if(a){for(var o=this.getPickingNodeGenerator().pickingNodeMap[n],s=0;s<a.length;s++){var l=a[s],u=o[s];this.explodeMesh(l,u,i)}this._updateBoundingBoxByObjectId(n)}}}}},{key:"elementExplode",value:function(e,t,i){if(e){var r=this.bindModelMap[e];if(r)for(var n=new THREE.Matrix4,a=0;a<r.length;a++){var o=r[a],l=this.meshes[o];if(l){for(var u=this.getPickingNodeGenerator().pickingNodeMap[o],c=0;c<l.length;c++){var h=l[c],d=u[c];h.elementExplodeBox||(h.elementExplodeBox=h.box);var f=s.Utils.computeExplodeTranslation(i,h.elementExplodeBox,t);n.makeTranslation(f.x,f.y,f.z),h.applyMatrix(n),h.updateMatrixWorld(),h.box=h.originBox.clone().applyMatrix4(h.matrix),d.applyMatrix(n),d.updateMatrixWorld()}this._updateBoundingBoxByObjectId(o)}}}}},{key:"isPickableNode",value:function(e){if(!this.canBeSelectedId(e.userId))return!1;var t=this.getFilter();return!t._isHiddenFileId(e)&&!1!==t._isVisible(e)&&!t._isTransparent(e)}},{key:"hasTransforms",value:function(){return!1}},{key:"isUserIdExist",value:function(e){return!!this.meshes[e]}},{key:"_isPickingEffectEnabled",value:function(){return!!s.GlobalData.PickingEffect}},{key:"getPickingNodeGenerator",value:function(e){if(e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingExternalMeshGenerator(this)),"pick"==e||null==this.pickingNodeGenerators.pick.pickingNodeMap||null!=this.pickingNodeGenerators[e].pickingNodeMap&&!this._checkDirtyData(this.pickingNodeGenerators.pick.pickingNodeMap,this.pickingNodeGenerators[e].pickingNodeMap)){if("pick"!=e&&null!=this.pickingNodeGenerators.pick.pickingNodeMap&&null!=this.pickingNodeGenerators[e].pickingNodeMap)for(var t=0;t<this.pickingNodeGenerators[e].pickingNodeGroup.children.length;t++){var i=this.pickingNodeGenerators[e].pickingNodeGroup.children[t].name;if(this.pickingNodeGenerators[e].manager.meshes[i]&&this.pickingNodeGenerators[e].manager.meshes[i].length>0){var r=this.pickingNodeGenerators[e].manager.meshes[i][0];this.pickingNodeGenerators[e].pickingNodeGroup.children[t].rotation.copy(r.rotation),this.pickingNodeGenerators[e].pickingNodeGroup.children[t].position.copy(r.position),this.pickingNodeGenerators[e].pickingNodeGroup.children[t].scale.copy(r.scale)}}}else for(var n=this.pickingNodeGenerators[e],a=this.pickingNodeGenerators.pick.pickingNodeMap,o=Object.keys(a),t=0;t<o.length;t++)n.addToPickingNodeMap(o[t],a[o[t]]);return this.pickingNodeGenerators[e]}},{key:"_checkDirtyData",value:function(e,t){for(var i=Object.keys(e),r=0;r<i.length;r++)if(null==t[i[r]])return!0;return!1}},{key:"getPickingMeshes",value:function(e,t,i,r,n){var a=this.getPickingNodeGenerator(n),o=a.updatePickingMeshes(e,i,r);o&&(t[this.databagId]=o)}},{key:"getBoundingBoxById",value:function(e){if(this.isUserIdExist(e)){return this.nodeInfoMap[e][0].boundingBox}return new THREE.Box3}},{key:"getBlinkMaterials",value:function(){return this.blinkMaterials}},{key:"getBoundaryPoints",value:function(e){var t=this.rawBoundingBoxMap[e],i=this.getTransform(e),r=(new THREE.Matrix4).compose(i.position,i.rotate,i.scale),n=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return n[0].set(t.min.x,t.min.y,t.min.z).applyMatrix4(r),n[1].set(t.max.x,t.min.y,t.min.z).applyMatrix4(r),n[2].set(t.max.x,t.max.y,t.min.z).applyMatrix4(r),n[3].set(t.min.x,t.max.y,t.min.z).applyMatrix4(r),n[4].set(t.min.x,t.min.y,t.max.z).applyMatrix4(r),n[5].set(t.max.x,t.min.y,t.max.z).applyMatrix4(r),n[6].set(t.max.x,t.max.y,t.max.z).applyMatrix4(r),n[7].set(t.min.x,t.max.y,t.max.z).applyMatrix4(r),n}}]),t}(s.BaseModel);s.ExternalComponentManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.geometryMapFromComponentId={},this.externalObjectMap={},this.defaultMaterial=s.MaterialUtil.getDefaultStandardMaterial()}return _createClass(e,[{key:"destroy",value:function(){this.viewer=null,this.geometryMapFromComponentId=null,this.externalObjectMap=null,this.defaultMaterial=null}},{key:"clear",value:function(){this.geometryMapFromComponentId={},this.externalObjectMap={},this.cancelAllHidden()}},{key:"cancelHiddenByComponentId",value:function(e){this.viewer.setRenderStateChanged(!0),this.viewer.modelManager.getSourceObjectManager().cancelHiddenByUserId(e)}},{key:"cancelAllHidden",value:function(){this.viewer.setRenderStateChanged(!0),this.viewer.modelManager.getSourceObjectManager().cancelAllHidden()}},{key:"convertToExternalObject",value:function(e,t,i){return this.externalObjectMap[e]?this.externalObjectMap[e].clone():(this._hideByUserId(t,i),this.externalObjectMap[e]=this._createMeshNodes(e,t),this.externalObjectMap[e].clone())}},{key:"getExternalObject",value:function(e){return this.externalObjectMap[e]}},{key:"_hideByUserId",value:function(e,t){this.viewer.setRenderStateChanged(!0);var i=this.viewer.modelManager.filterHelper.distributeId(e),r=(i.modelId,i.objectId);this.viewer.modelManager.traverseModels(function(e){e.tilesLoader&&(r=e.tilesLoader.tileReader.getIndexByUserId(r))}),this.viewer.modelManager.getSourceObjectManager().hideByUserId(r,t)}},{key:"_getGeometries",value:function(e){var t=this.geometryMapFromComponentId[e];if(t)return t;var i=this.viewer.modelManager.filterHelper.distributeId(e),r=i.modelId,n=i.objectId,a=[];if(r){var o=this.viewer.modelManager.getModel(r);if(o._handler)a=a.concat(o._handler.getGeometryBuffersByUserId(n));else if(o.tilesLoader){var l=o.tilesLoader.tileReader.getIndexByUserId(n);a=a.concat(o.getGeometryBuffersByUserId(l))}}else this.viewer.modelManager.traverseModels(function(e){if(e._handler)a=a.concat(e._handler.getGeometryBuffersByUserId(n));else if(e.tilesLoader){var t=e.tilesLoader.tileReader.getIndexByUserId(n);if(!s.Utils.isDefined(t))return;a=a.concat(e.getGeometryBuffersByUserId(t))}});return t=this.geometryMapFromComponentId[e]=this._createGeometry(a)}},{key:"_createGeometry",value:function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i],a=new THREE.BufferGeometry;a.setIndex(new THREE.BufferAttribute(n.index,1)),a.addAttribute("position",new THREE.BufferAttribute(n.position,3)),n.uv&&a.addAttribute("uv",new THREE.BufferAttribute(n.uv,2)),n.isLines||a.computeVertexNormals(),t.push({info:n,geometry:a})}return t}},{key:"_createMeshNodes",value:function(e,i){var r=new t;r.name=e,r.sourceComponentId=i;for(var n=this._getGeometries(i),a=0,o=n.length;a<o;a++){var s=n[a].geometry,l=n[a].info,u=this.viewer.modelManager.filterHelper.distributeId(i),c=(u.modelId,u.objectId),h=null,d=this.viewer.modelManager.modelCollection.getById(l.databagId);if(d&&d.tilesLoader){var f=d.tilesLoader.getMeshNodeById(l.nodeId);h=void 0===f?this.defaultMaterial:f.material[0]}else h=this.viewer.modelManager.getMaterialByNodeId(l.databagId,c,l.nodeId)||this.defaultMaterial;var p=new THREE.Mesh(s,h);p=l.isLines?new THREE.LineSegments(s,h):new THREE.Mesh(s,h),p._databagId=l.databagId,p._nodeId=l.nodeId,p._oriUserId=i,p._oriMaterial=h,p._cloned=!0,l.matrix&&(p.matrix.copy(l.matrix),p.matrix.decompose(p.position,p.quaternion,p.scale)),r.add(p)}return r}}]),e}();s.ExternalObjectConverter=e;var t=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sourceComponentId=null,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(e){return e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clone",this).call(this,e),e.sourceComponentId=this.sourceComponentId,e}}]),t}(THREE.Group);s.ExternalObjectConverterGroup=t}(),function(){var e=void 0,t=function(){function t(e){_classCallCheck(this,t),this.viewer=e,this.groundCurveScene=new THREE.Scene,this.depthRenderTarget=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.depthWithoutDEMRenderTarget=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.shadowVolumes=[],this.shadowVolumeScene=new THREE.Scene,this.backMaterial=new THREE.MeshBasicMaterial({color:16711680,colorWrite:!1,depthWrite:!1,side:THREE.BackSide}),this.frontMaterial=new THREE.MeshBasicMaterial({color:255,colorWrite:!1,depthWrite:!1,side:THREE.FrontSide})}return _createClass(t,[{key:"destroy",value:function(){this.groundCurveScene=null,this.depthRenderTarget=null,this.depthWithoutDEMRenderTarget=null,this.shadowVolumes=null,this.shadowVolumeScene=null,this.backMaterial.dispose(),this.backMaterial=null,this.frontMaterial.dispose(),this.frontMaterial=null,this.viewer=null}},{key:"createGroundCurve",value:function(e){var t=e.color,i=e.width;e.viewer=this.viewer;var r=new s.GroundCurveMaterial({color:new THREE.Color(t.red/255,t.green/255,t.blue/255)});r.side=THREE.DoubleSide,r.depthFunc=THREE.AlwaysDepth,r.depthWrite=!1,r.transparent=!0,r.blending=THREE.NormalBlending,r.opacity=t.alpha,r.lineWidth=i;var n=new s.GroundCurveGeometry(e),a=new s.GroundCurveMesh(n,r),o=this;return a.onBeforeRender=function(e,t,i,r,n,a){var s=n.frustumPlanes;s.x=i.near*Math.tan(.5*THREE.Math.degToRad(i.fov)),s.y=-s.x,s.w=i.aspect*s.x,s.z=-s.w,n.cameraNear=i.near,n.cameraFar=i.far,n.pixelRatio=e.getPixelRatio(),n.viewport.set(0,0,e.context.drawingBufferWidth,e.context.drawingBufferHeight);var l,u=n.viewport,c=THREE.Math.degToRad(i.fov);l=c?u.w>u.z?2*Math.tan(.5*c)/u.w:2*Math.tan(.5*c)/u.z:1/Math.max(u.z,u.w),n.geometricToleranceOverMeter=2*l,n.cameraProjection.copy(i.projectionMatrix),n.inverseProjection.getInverse(i.projectionMatrix),n.globeDepthTexture=o.depthRenderTarget.texture,n.customDepthTexture=o.depthWithoutDEMRenderTarget.texture,n.refreshUniforms()},a}},{key:"removeGroundCurve",value:function(e){this.groundCurveScene.remove(e)}},{key:"addGroundCurve",value:function(e){this.groundCurveScene.add(e)}},{key:"render",value:function(e,t,i){this.renderGroundCurves(e,t,i),this.renderShadowVolumes(e,t,i)}},{key:"renderGroundCurves",value:function(e,t,i){var r=this.groundCurveScene;if(!(r.children.length<=0)){for(var n=!0,a=0;a<r.children.length;a++)r.children[a].visible&&(n=!1);if(!n){var o=this.viewer.rendererManager.renderer;o.renderCustomDepth&&o.renderCustomDepth(e,this.viewer.getScene(),t,this.depthRenderTarget,!1),o.renderCustomDepthWithoutDEM&&o.renderCustomDepthWithoutDEM(e,this.viewer.getScene(),t,this.depthWithoutDEMRenderTarget);var s=e.autoClear;e.autoClear=!1,e.render(r,t,i),e.autoClear=s}}}},{key:"renderShadowVolumes",value:function(e,t,i){if(!(this.shadowVolumes.length<=0)){var r=e.autoClear;e.autoClear=!1;var n=this.shadowVolumeScene,a=this.backMaterial,o=this.frontMaterial,s=e.context,l=e.state;l.buffers.stencil.setTest(!0);for(var u=0;u<this.shadowVolumes.length;u++)this.shadowVolumes[u].visible&&(n.add(this.shadowVolumes[u]),l.buffers.stencil.setFunc(s.ALWAYS,0,255),l.buffers.stencil.setOp(s.KEEP,s.INCR,s.KEEP),n.overrideMaterial=a,e.render(n,t,i),l.buffers.stencil.setFunc(s.ALWAYS,0,255),l.buffers.stencil.setOp(s.KEEP,s.DECR,s.KEEP),n.overrideMaterial=o,e.render(n,t,i),l.buffers.stencil.setFunc(s.NOTEQUAL,0,255),l.buffers.stencil.setOp(s.ZERO,s.ZERO,s.ZERO),n.overrideMaterial=null,e.render(n,t,i),n.remove(this.shadowVolumes[u]));l.buffers.stencil.setTest(!1),e.autoClear=r}}},{key:"createGroundPolygon",value:function(e){e.viewer=this.viewer;var t=e.color,i=new THREE.MeshBasicMaterial({color:new THREE.Color(t.red/255,t.green/255,t.blue/255)});i.side=THREE.BackSide,i.depthFunc=THREE.AlwaysDepth,i.depthWrite=!1,i.transparent=!0,i.blending=THREE.NormalBlending,i.opacity=t.alpha;var r=new s.GroundPolygonGeometry(e);return new s.GroundPolygonMesh(r,i)}},{key:"addGroundPolygon",value:function(e){this.shadowVolumes.push(e)}},{key:"removeGroundPolygon",value:function(e){var t=this.shadowVolumes.indexOf(e);-1!==t&&this.shadowVolumes.splice(t,1)}},{key:"setSize",value:function(e,t){this.depthRenderTarget.setSize(e,t),this.depthWithoutDEMRenderTarget.setSize(e,t)}},{key:"getSkyline3D",value:function(){var e=this.viewer.getRenderer(),t=this.viewer.camera,i=this.viewer.rendererManager.renderer;i.renderCustomDepth&&i.renderCustomDepth(e,this.viewer.getScene(),t,this.depthRenderTarget,!0);var r=this.viewer.getViewportSize(),n=r.width,a=r.height,o=new Uint8Array(n*a*4);e.readRenderTargetPixels(this.depthRenderTarget,0,0,n,a,o);for(var l=t.near,u=t.far,c=2/(Math.log(u+1)/Math.LN2),h=t.projectionMatrix,d=(new THREE.Matrix4).getInverse(h),f=t.matrixWorld,p=new THREE.Vector4,m=new THREE.Vector4,v=new Array,g=0;g<n;g++)for(var y=a-1;y>=0;y--){var M=4*(y*n+g),E=o[M],b=o[M+1],x=o[M+2],I=o[M+3];p.set(E,b,x,I);var T=s.Utils.unpackRGBAToDepth(p);if(0!=T){T/=255;var w=g,C=y,S=2*T/c,A=Math.pow(2,S)-1,k=u*(1-l/A)/(u-l),R=2*w/n-1,B=2*C/a-1;k=2*k-1,m.set(R,B,k,1),m.multiplyScalar(A),m.applyMatrix4(d),m.applyMatrix4(f),v.push(new THREE.Vector3(m.x,m.y,m.z));break}}return v}}],[{key:"destroyInstance",value:function(){e.destroy(),e=void 0}},{key:"getInstance",value:function(){return e}},{key:"createInstance",value:function(t){return e||(e=new s.GroundPrimitiveManager(t)),e}}]),t}();s.GroundPrimitiveManager=t}();var q=function(){function e(t){_classCallCheck(this,e),this.roomName=t,this.belong="user",this.roomBoundary=null,this.offsetZ=0,this.boundingBox=0,this.roomInnerBoundary=null}return _createClass(e,[{key:"checkRoomBoundaryWithHoles",value:function(e,t){if(t.length>0){this.roomInnerBoundary=[];for(var i=0;i<t.length;i++){this.checkRoomBoundary(t[i])&&this.roomInnerBoundary.push(this.roomBoundary)}}return this.checkRoomBoundary(e)}},{key:"checkRoomBoundary",value:function(e){function t(e,t,i){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)}function i(e,t,i,r){return!(Math.min(e.x,t.x)<=i.x&&i.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=i.y&&i.y<=Math.max(e.y,t.y))&&!(Math.min(e.x,t.x)<=r.x&&r.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=r.y&&r.y<=Math.max(e.y,t.y))}if(!(e instanceof Array)||e.length<3)return console.log("Failed to create room boundary, the number of the points must be more than three."),!1;this.offsetZ=e[0][2];var r=new THREE.Box2,n=[];n.push(new THREE.Vector2(e[0][0],e[0][1]));for(var a=1,o=e.length;a<o;a++){if(3!=e[a].length)return console.log("Failed to create room boundary, the format of boundary is not right, please follow [[x1,y1,z1],...]"),!1;for(var a=1;a<e.length;a++){for(var s=!1,l=0;l<n.length;l++)if(e[a][0]==n[l].x&&e[a][1]==n[l].y){s=!0;break}if(!1===s){var u=new THREE.Vector2(e[a][0],e[a][1]);n.push(u),r.expandByPoint(u)}}}var c=n.length;if(c<3)return console.log("Failed to create room boundary, points are collinear."),!1;if(3==c)return 0==t(n[0],n[1],n[2])?(console.log("Failed to create room boundary, points are collinear."),!1):(n.push(new THREE.Vector2(e[0][0],e[0][1])),this.roomBoundary=n,this.boundingBox=r,!0);for(var h,d,f,p,a=0;a<c;a++){h=n[a],d=n[a==c-1?0:a+1];for(var l=a+2;l<c;l++)if((0!=a||l!=c-1)&&(f=n[l],p=n[l==c-1?0:l+1],function(e,r,n,a){var o=t(e,r,n)*t(e,r,a),s=t(n,a,e)*t(n,a,r);return!(o>0)&&(!(s>0)&&(0!=o||0!=s||!i(e,r,n,a)))}(h,d,f,p)))return console.log("Failed to create room boundary, the room boundary is self-intersection."),!1}return n.push(new THREE.Vector2(e[0][0],e[0][1])),this.roomBoundary=n,this.boundingBox=r,!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.roomName=e.roomName,this.belong=e.belong,void 0!==e.roomBoundary&&(this.roomBoundary=JSON.parse(JSON.stringify(e.roomBoundary))),this.offsetZ=e.offsetZ,this.boundingBox=e.boundingBox.clone(),this}}]),e}();s.AreaInfo=q;var $=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.ObjectGroupType.BoundaryEdgeManager,{priority:20}));return e.globalSpace=!0,e.areaInfo=new Array,e.areaGeometries=new Array,e.areaMeshes=new Array,e.areaMaterial=new THREE.LineMaterial({color:1005740}),e.areaMaterial.linewidth=5,e.areaMaterial.depthTest=!1,e}return _inherits(t,e),_createClass(t,[{key:"addAreaInfo",value:function(e){var t=this.areaInfo.length;return this.areaInfo.push(e),this.update(t),t}},{key:"setAreaInfo",value:function(e,t){return void 0!==e&&(this.areaInfo.length>e&&(this.areaInfo[e]=t,this.update(e),!0))}},{key:"setAreaLineColor",value:function(e){this.areaMaterial=new THREE.LineMaterial(e),this.areaMaterial.linewidth=1}},{key:"removeAreaInfo",value:function(e){if(void 0===e)return!1;if(this.areaMesh&&this.remove(this.areaMesh),this.areaInfo.length>e){this.areaInfo.splice(e,1),this.areaGeometries.splice(e,1);var t=this.areaMeshes[e];return this.remove(t),this.areaMeshes.splice(e,1),!0}return!1}},{key:"update",value:function(e){if(!(void 0===e||this.areaInfo.length<e)){for(var t=this.areaInfo[e].length,i=new Array,r=0;r<t;++r)for(var n=this.areaInfo[e][r],a=0,o=n.length;a<o;++a){var s=n[a];i.push(s.x),i.push(s.y),i.push(s.z)}this.areaMesh&&this.remove(this.areaMesh);var l=new THREE.LineSegmentsGeometry;l.setPositions(i),this.areaMaterial.resolution.set(window.innerWidth,window.innerHeight),this.areaMesh=new THREE.LineSegments2(l,this.areaMaterial),this.areaMesh.renderOrder=100,this.add(this.areaMesh),this.updateMatrixWorld(!0)}}}]),t}(s.ObjectGroup);$.getInstance=function(e){return null==e.boundaryEdge&&(e.boundaryEdge=new s.BoundaryEdgeManager,e.objectGroups.add(e.boundaryEdge),e.boundaryEdge.matrix.copy(e.geometryGroup.matrix),e.boundaryEdge.matrixAutoUpdate=!1,e.boundaryEdge.updateMatrixWorld(!0)),e.boundaryEdge},$.destroy=function(e){e.boundaryEdge=null},s.BoundaryEdgeManager=$;var ee=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.getModelManager(),{
modelId:s.ObjectGroupType.EXTRUDEBODYMANAGER}));return i.manager.addModel(i),i.filter=new s.FilterManager,i.filter.setObserverForSceneState(i.manager.getFilter().getObserverForSceneState()),i.castShadow=!1,i.receiveShadow=!1,i.mapColorToNodeId={},i.selectionColor={red:50,green:224,blue:240,alpha:.4},i.selectionEdgeColor={red:50,green:224,blue:240,alpha:1},i.blinkMaterials=[],i.blinkMaterialMap={},i.bindModelMap={},i.mapDepthTestToNodeId={},i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.manager.removeModel(this.id),this._removeNodeGroup(),this.mapColorToNodeId=null,this.selectionColor=null,this.selectionEdgeColor=null,this.blinkMaterials=null,this.blinkMaterialMap=null,this.filteredIds=null,this.selectedIds=null,this.blinkedIds=null,this.bindModelMap=null,this.mapDepthTestToNodeId=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_getNodeGroup",value:function(){return this.getModelManager().getScene().getOrCreateObjectGroup(s.ObjectGroupType.EXTRUDEBODYMANAGER,{pickableType:s.PICKABLETYPE.Room,priority:20,globalSpace:!0})}},{key:"_getAlphaTestNodeGroup",value:function(){return this.getModelManager().getScene().getOrCreateObjectGroup(s.ObjectGroupType.EXTRUDEBODYMANAGERTEST,{pickableType:s.PICKABLETYPE.Room,priority:20,globalSpace:!0})}},{key:"getAllNodes",value:function(){return this._getNodeGroup().children.concat(this._getAlphaTestNodeGroup().children)}},{key:"_removeNodeGroup",value:function(){this.getModelManager().getScene().removeObjectGroupByName(s.ObjectGroupType.EXTRUDEBODYMANAGER),this.getModelManager().getScene().removeObjectGroupByName(s.ObjectGroupType.EXTRUDEBODYMANAGERTEST)}},{key:"addNode",value:function(e,t,i,r,n,a){var o=this;a=void 0==a||a,this.getNode(e)&&this.removeNodeById(e);var s=new Array,l=0,u=0,c=0,h=[],d=[],f=[],p=[];if(t.belong&&"user"==t.belong){l=t.offsetZ;for(var m=0,v=t.roomBoundary.length;m<v;m++){var g=t.roomBoundary[m];s[m]=new THREE.Vector2(g.x,g.y)}if(t.roomInnerBoundary)for(var m=0,v=t.roomInnerBoundary.length;m<v;m++){var y;!function(){y=t.roomInnerBoundary[m],f.push(y);var e=[];y.forEach(function(t){e.push(t.clone())}),p.push(e)}()}}else{if(t.version&&"2.0"==t.version&&(t.loops&&t.loops.length>0&&(h=t.loops[0]),t.loops.length>1))for(var M=1;M<t.loops.length;M++)d.push(t.loops[M]);var E=function(e){for(var t=e.length,i=[],r=0;r<t;++r)for(var n=e[r],a=n.length,o=0;o<a-1;o++){var s=n[o];i.push(new THREE.Vector2(s.x,s.y)),0==r&&0==o&&(l=s.z)}return i.length>0&&i.push(i[0].clone()),i};d.forEach(function(e){var t=E(e);f.push(t);var i=[];t.forEach(function(e){i.push(e.clone())}),p.push(i)}),s=E(h)}if(t.offsetZ||(t.offsetZ=l),!(s.length<=0)){var b=[],x=function(e){b=[],u=0,c=0,u=e[0].x,c=e[0].y;for(var t=0,i=e.length-1;t<i;t++){var r=e[t];u>r.x&&(u=r.x),c>r.y&&(c=r.y),b.push({x:r.x,y:r.y,z:l})}for(var t=0,i=e.length;t<i;t++)e[t].x-=u,e[t].y-=c},I=[],T=new THREE.Geometry;f.forEach(function(t){x(t);var r=o._genWireFrame(b,a,n,u,c,l,i,e);void 0!=r&&T.merge((new THREE.Geometry).fromBufferGeometry(r.geometry),r.matrix)}),x(s);var w=this._genWireFrame(b,a,n,u,c,l,i,e);void 0!=w&&T.merge((new THREE.Geometry).fromBufferGeometry(w.geometry),w.matrix),n.depthTest=!a,n.transparent=!0;var C=new THREE.LineSegments((new THREE.BufferGeometry).fromGeometry(T),n);C.name="wireframe_"+e,C._oriMaterial=n,this.setColorInMap(C.name,n),this.mapDepthTestToNodeId[e]=!1,this._getNodeGroup().add(C),this._getNodeGroup().updateMatrixWorld(!0);var S=[],A=function(e){for(var t=JSON.stringify(e).toString(),i=0;i<S.length;i++){var r=S[i];if(t===JSON.stringify(r).toString())return!0}return!1};p.forEach(function(e){var t=new THREE.Vector2(-u,-c);if(e.forEach(function(e){e.add(t)}),!A(e)){var i=new THREE.Path(e);I.push(i),S.push(e)}});var k=new THREE.Shape(s);k.holes=I;var R={amount:i,bevelEnabled:!1};this._genShap(k,R,r,u,c,l,e,b)}}},{key:"_genShap",value:function(e,t,i,r,n,a,o,s){var l=new THREE.ExtrudeGeometry(e,t);l.contour=s,this._faceToContour(l,r,n),l.boundingBox||l.computeBoundingBox();var u=new THREE.Mesh(l,i);u.name=o.toString(),u._oriMaterial=i,u.translateX(r),u.translateY(n),u.translateZ(a),this.setColorInMap(u.name,i),this._getNodeGroup().add(u),this._getNodeGroup().updateMatrixWorld(!0)}},{key:"_genWireFrame",value:function(e,t,i,r,n,a,o,l){if(!(e.length<3)){var u=this._checkVertices(e.slice(),o),c=s.BuildRoomEdge(u,r,n,a,o);i.depthTest=!t,i.transparent=!0;var h=new THREE.LineSegments(c,i);return h.translateX(r),h.translateY(n),h.translateZ(a),h.name="wireframe_"+l,h._oriMaterial=i,h.updateMatrixWorld(!0),h}}},{key:"bindModel",value:function(e,t){if(this.getNode(e)&&this.getModelManager().modelCollection.getIds().indexOf(t.toString())>=0){if(this.getBindedModelId(e))return;this.bindModelMap[t]||(this.bindModelMap[t]=[]),this.bindModelMap[t].push(e);var i=this.getNode(e),r=this.getNode("wireframe_"+e);i.explodedHeight=r.explodedHeight=0,i.explodedDirection=r.explodedDirection=new THREE.Vector3;var n=this.getModelManager().explosionManager;if(0!==n.getFloorExplosionExtent(t)){var a=n.getFloorInfos(t);this.explodeMesh(this.getNode(e),a,!0),this.explodeMesh(this.getNode("wireframe_"+e),a,!0)}}}},{key:"unbindModel",value:function(e,t){if(this.bindModelMap[t]){var i=this.bindModelMap[t].indexOf(e);if(i>=0){this.bindModelMap[t].splice(i,1);var r=function(e){if(void 0!==e.explodedHeight){var t=e.explodedDirection.clone().negate().multiplyScalar(e.explodedHeight),i=new THREE.Matrix4;i.makeTranslation(t.x,t.y,t.z),e.applyMatrix(i),e.updateMatrixWorld(),delete e.explodedDirection,delete e.explodedHeight,delete e.preExplodedDirection,delete e.preExplodedHeight}};if(!this.getNode(e))return;r(this.getNode(e)),r(this.getNode("wireframe_"+e))}}}},{key:"getBindedModelId",value:function(e){var t=this,i=void 0;return Object.keys(this.bindModelMap).some(function(r){if(t.bindModelMap[r].indexOf(e)>=0)return i=r,!0}),i}},{key:"_checkVertices",value:function(e,t){function i(e,t,i){return Math.abs(t.x-e.x)<r&&Math.abs(i.x-e.x)<r||(Math.abs(t.y-e.y)<r&&Math.abs(i.y-e.y)<r||Math.abs((t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y))<100*r)}var r=.1;t<100&&(r=1e-4);for(var n=e.length;i(e[0],e[1],e[n-1]);)e.shift(),n=e.length;for(n=e.length;i(e[0],e[n-2],e[n-1]);)e.pop(),n=e.length;n=e.length;for(var a=0;a+2<n;){for(var o=a;o+2<n&&i(e[a],e[o+1],e[o+2]);)e.splice(o+1,1),n=e.length;a++}return e}},{key:"_faceToContour",value:function(e,t,i){function r(e,t){return Math.abs(e-t)<=.1}function n(e,t){var i=e<t?e:t,r=e>t?e:t;return 0==i&&r==u-1?{st:r,ed:i}:{st:i,ed:r}}for(var a=e.contour,o=e.vertices,s=[],l=o.length,u=a.length,c=0;c<u;c++){for(var h=0;h<.5*l;h++)if(r(o[h].x+t,a[c].x)&&r(o[h].y+i,a[c].y)){s[h]=c;break}for(var h=.5*l;h<l;h++)if(r(o[h].x+t,a[c].x)&&r(o[h].y+i,a[c].y)){s[h]=c;break}}for(var d=e.faces,c=0,f=d.length;c<f;c++){var p=d[c],m=s[p.a],v=s[p.b],g=s[p.c];m!=v&&m!=g||(p.contourIndex=n(v,g)),g==v&&(p.contourIndex=n(m,v))}}},{key:"applyFrontEffect",value:function(e,t,i){for(var r=this._getNodeGroupVisible(),n=this._getNodeGroup().parent.children,a=n.length,o=new Array(a),s=0;s<a;++s)o[s]=n[s].visible,n[s].visible=!1;this._setNodeGroupVisible(r);var l=e.autoClear,u=e.autoClearColor,c=e.autoClearDepth,h=e.autoClearStencil;e.autoClear=!0,e.autoClearColor=!1,e.autoClearDepth=!0,e.autoClearStencil=!1,e.render(t,i),e.autoClear=l,e.autoClearColor=u,e.autoClearDepth=c,e.autoClearStencil=h;for(var s=0;s<a;++s)n[s].visible=o[s]}},{key:"setColorInMap",value:function(e,t){var i={red:255*t.color.r,green:255*t.color.g,blue:255*t.color.b,alpha:t.opacity};this.mapColorToNodeId[e]=i}},{key:"createMaterial",value:function(e){return s.MaterialUtil.createStandardMaterial(e)}},{key:"setNodeMaterial",value:function(e,t,i){var r=this.getNode(e);if(r){var n=r._oriMaterial;for(var a in t){var o=a;n.hasOwnProperty(o)&&(n[o]="color"==o?new THREE.Color(t[a]):t[a])}}if(r=this.getNode("wireframe_"+e)){var n=r._oriMaterial;for(var a in i){var o=a;n.hasOwnProperty(o)&&(n[o]="color"==o?new THREE.Color(i[a]):i[a])}}this._updateNodeById(e)}},{key:"getNode",value:function(e){var t=function(t){for(var i=0,r=t.length;i<r;i++)if(t[i].name==e.toString())return t[i]};return t(this._getNodeGroup().children)||t(this._getAlphaTestNodeGroup().children)}},{key:"removeNodeById",value:function(e){var t=this.getNode(e);if(t&&(delete this.mapColorToNodeId[t.name],this._getNodeGroup().remove(t),this._getAlphaTestNodeGroup().remove(t)),t=this.getNode("wireframe_"+e)){delete this.mapColorToNodeId[t.name],this._getNodeGroup().remove(t),this._getAlphaTestNodeGroup().remove(t);var i=this.getBindedModelId(e);return i&&this.unbindModel(e,i),!0}return!1}},{key:"clearNodes",value:function(){this._getNodeGroup().clear(),this._getAlphaTestNodeGroup().clear(),this.mapColorToNodeId={},this.bindModelMap={}}},{key:"setNodeVisibleById",value:function(e,t){var i=this.getNode(e);if(i&&(i.visible=t),i=this.getNode("wireframe_"+e))return i.visible=t,!0}},{key:"_getNodeGroupVisible",value:function(){return this._getNodeGroup().visible}},{key:"_setNodeVisible",value:function(e){for(var t=this._getNodeGroup().children,i=0,r=t.length;i<r;i++)t[i].visible=e}},{key:"_setNodeGroupVisible",value:function(e){this._getNodeGroup().visible=e}},{key:"_getAlphaTestNodeGroupVisible",value:function(){return this._getAlphaTestNodeGroup().visible}},{key:"_setAlphaTestNodeVisible",value:function(e){for(var t=this._getAlphaTestNodeGroup().children,i=0,r=t.length;i<r;i++)t[i].visible=e}},{key:"_setAlphaTestNodeGroupVisible",value:function(e){this._getAlphaTestNodeGroup().visible=e}},{key:"showAllNodes",value:function(){this._setNodeVisible(!0),this._setAlphaTestNodeVisible(!0)}},{key:"hideAllNodes",value:function(){this._setNodeVisible(!1),this._setAlphaTestNodeVisible(!1)}},{key:"setNodeColorById",value:function(e,t){var i=this.getNode(e);if(i){var r=i._oriMaterial;return r.color=new THREE.Color(t.red/255,t.green/255,t.blue/255),r.opacity=t.alpha,t!=this.selectionColor&&t!=this.selectionEdgeColor&&this.setColorInMap(i.name,r),this._updateNodeById(e),!0}return!1}},{key:"getNodeColorById",value:function(e){return this.mapColorToNodeId[e]}},{key:"setWireframeColorById",value:function(e,t){return this.setNodeColorById("wireframe_"+e,t)}},{key:"getWireframeColorById",value:function(e){return this.getNodeColorById("wireframe_"+e)}},{key:"applySelection",value:function(){this._hasNode()&&(this._collectSelectedIds(),this._collectHoveredIds(),this._updateNodes())}},{key:"clearSelection",value:function(){this._hasNode()&&(this._clearSelectedIds(),this.applyHover())}},{key:"applyHover",value:function(){this._hasNode()&&(this._collectHoveredIds(),this._updateNodes())}},{key:"clearHover",value:function(){this._hasNode()&&(this._clearHoveredIds(),this._updateNodes())}},{key:"applyBlink",value:function(){this._hasNode()&&(this._collectBlinkedIds(),this._collectHoveredIds(),this._updateNodes())}},{key:"clearBlink",value:function(){this._clearBlinkedIds(),this.applyHover()}},{key:"_collectSelectedIds",value:function(){var e=this.filteredIds=this.filteredIds||{},t=s.Model.EnumFilterState,i=this.getModelManager().sceneState.getSelection(),r={};this._clearSelectedIds();for(var n=0,a=i.length;n<a;n++){var o=i[n];this._hasObjectId(o)&&(e[o]||(e[o]={}),e[o][t.SELECTED]=!0,r[o]=!0)}this.selectedIds=Object.keys(r)}},{key:"_clearSelectedIds",value:function(){if(this.filteredIds&&this.selectedIds&&this.selectedIds.length){for(var e=0,t=this.selectedIds.length;e<t;e++){var i=this.selectedIds[e];this.filteredIds[i]&&delete this.filteredIds[i][s.Model.EnumFilterState.SELECTED]}this.selectedIds=null}}},{key:"_collectHoveredIds",value:function(){this._clearHoveredIds();var e=this.getModelManager().sceneState.hoverId;if(e&&this._hasObjectId(e)){var t=this.filteredIds=this.filteredIds||{};this.hoveredId=e,t[e]||(t[e]={}),t[e][s.Model.EnumFilterState.HOVER]=!0}}},{key:"_clearHoveredIds",value:function(){this.filteredIds&&this.hoveredId&&this.filteredIds[this.hoveredId]&&(delete this.filteredIds[this.hoveredId][s.Model.EnumFilterState.HOVER],this.hoveredId=void 0)}},{key:"_collectBlinkedIds",value:function(){var e=this.getModelManager().sceneState.getBlinkComponentsIdMap(this.id),t=this.filteredIds=this.filteredIds||{},i=s.Model.EnumFilterState,r={};this._clearBlinkedIds();for(var n in e)this._hasObjectId(n)&&(t[n]||(t[n]={}),t[n][i.BLINK]=!0,r[n]=!0);this.blinkedIds=Object.keys(r)}},{key:"_clearBlinkedIds",value:function(){if(this.filteredIds&&this.blinkedIds&&this.blinkedIds.length){for(var e=0,t=this.blinkedIds.length;e<t;e++){var i=this.blinkedIds[e];this.filteredIds[i]&&delete this.filteredIds[i][s.Model.EnumFilterState.BLINK]}this.blinkedIds=null}}},{key:"_hasObjectId",value:function(e){return!!this.mapColorToNodeId[e]}},{key:"_hasNode",value:function(){for(var e in this.mapColorToNodeId)if(this.mapColorToNodeId.hasOwnProperty(e))return!0;return!1}},{key:"_updateNodes",value:function(){if(this._resetMaterial(),this.blinkMaterialMap={},this.blinkMaterials.length=0,this.filteredIds)for(var e in this.filteredIds)this._updateNodeById(e)}},{key:"_resetMaterial",value:function(){var e=this,t=function(t){for(var i=0,r=t.length;i<r;i++){var n=t[i],a=e.mapColorToNodeId[n.name];n._oriMaterial.color.setRGB(a.red/255,a.green/255,a.blue/255),n._oriMaterial.opacity=a.alpha,n.material=n._oriMaterial}};t(this._getNodeGroup().children),t(this._getAlphaTestNodeGroup().children)}},{key:"_updateNodeById",value:function(e){if(this._hasObjectId(e)&&this.filteredIds&&this.filteredIds[e]){var t=this.filteredIds[e],i=s.Model.EnumFilterState,r=this.getNode(e),n=this.getNode("wireframe_"+e),a=this.getModelManager().sceneState;if(t[i.SELECTED]){var o=this.selectionColor;if(r.material=r._oriMaterial,r.material.color.setRGB(o.red/255,o.green/255,o.blue/255),r.material.opacity=o.alpha,n){var l=this.selectionEdgeColor;n.material=n._oriMaterial,n.material.color.setRGB(l.red/255,l.green/255,l.blue/255),n.material.opacity=l.alpha}}else if(t[i.BLINK]){if(void 0===this.blinkMaterialMap[e]){this.blinkMaterialMap[e]=!0;var u=a.getBlinkMaterial(r._oriMaterial,this.id);r.material=u,this.blinkMaterials.push(u)}}else if(t[i.HOVER]){r.material=r._oriMaterial;var c=this.mapColorToNodeId[e],h=s.MaterialUtil.getHoverColorByColor({r:c.red/255,g:c.green/255,b:c.blue/255,a:c.alpha});return r.material.color.setRGB(h.r,h.g,h.b),void(r.material.opacity=h.a)}}}},{key:"sortRenderOrder",value:function(e){for(var t=this._getNodeGroup().children,i=e.camera.position.clone(),r=new Map,n=0,a=t.length;n<a;++n){var o=t[n];if(-1!=o.name.indexOf("wireframe"));else{var s={};s[o.name]=null;var l=e.getBoundingBoxByIds(s).getCenter(),u=i.distanceTo(l);r.set(n,u)}}var c=Array.from(r);c.sort(function(e,t){return t[1]-e[1]});for(var h=1,n=0,a=c.length;n<a;++n)t[c[n][0]].renderOrder=h,null!=t[c[n][0]+1]&&(t[c[n][0]+1].renderOrder=h),++h}},{key:"explodeMesh",value:function(e,t,i){for(var r=void 0,n=void 0,a=void 0,o=void 0,s=0,l=t.length,u=l-1;u>=0;u--){var c=t[u],h=t[u].preExplodedTranslation?t[u].preExplodedTranslation.z:0;s=i?t[u].boundingBox.min.z:h+t[u].boundingBox.min.z;var d=0;if(e.name.indexOf("wireframe_")>=0?e.geometry&&e.geometry.attributes&&e.geometry.attributes.position&&e.geometry.attributes.position.array.length>3&&(d=e.geometry.attributes.position.array[2]):d=e.position.z,function(e,t){return t>=e-1}(s,d)||0===u){!function(t){a=e.preExplodedHeight=e.explodedHeight,o=e.preExplodedDirection=e.explodedDirection.clone(),r=e.explodedHeight=t.explodedHeight-t.elevation,n=e.explodedDirection=(t.explodedDirection||new THREE.Vector3).clone()}(c);break}}var f=new THREE.Matrix4,p=n.clone().multiplyScalar(r).sub(o.clone().multiplyScalar(a));f.makeTranslation(p.x,p.y,p.z),e.applyMatrix(f),e.updateMatrixWorld()}},{key:"explode",value:function(e){var t=void 0,i=this._getNodeGroup().children.concat(this._getAlphaTestNodeGroup().children);if(e){var r=this.bindModelMap[e];if(r&&r.length>0){t=this.getModelManager().explosionManager.getFloorInfos(e);for(var n=0,a=i.length;n<a;n++){var o=i[n],s=o.name.indexOf("wireframe_")<0?o.name:o.name.split("wireframe_")[1];r.indexOf(s)>=0&&this.explodeMesh(o,t)}}}}},{key:"enableDepthTest",value:function(e,t){var i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;void 0!==this.mapColorToNodeId[s]&&(this.mapDepthTestToNodeId[s]=t,this.mapDepthTestToNodeId["wireframe_"+s]=t,this.getNode("wireframe_"+s).material.depthTest=t,1==t?(THREE.SceneUtils.attach(this.getNode(s),this._getNodeGroup(),this._getAlphaTestNodeGroup()),THREE.SceneUtils.attach(this.getNode("wireframe_"+s),this._getNodeGroup(),this._getAlphaTestNodeGroup())):(THREE.SceneUtils.attach(this.getNode(s),this._getAlphaTestNodeGroup(),this._getNodeGroup()),THREE.SceneUtils.attach(this.getNode("wireframe_"+s),this._getAlphaTestNodeGroup(),this._getNodeGroup())))}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"getBlinkMaterials",value:function(){return this.blinkMaterials}},{key:"isUserIdExist",value:function(e){return this._hasObjectId(e)}}]),t}(s.BaseModel);ee.getInstance=function(e){var t=e.getModelManager().getScene();if(null==t.extrudeBodyManager){t.extrudeBodyManager=new s.ExtrudeBodyManager(e);var i=t.extrudeBodyManager._getNodeGroup();t.objectGroups.add(i),i.matrix.copy(t.geometryGroup.matrix),i.matrixAutoUpdate=!1,i.updateMatrixWorld(!0)}return t.extrudeBodyManager},ee.destroy=function(e){var t=e.getModelManager().getScene();t.extrudeBodyManager.destroy(),t.extrudeBodyManager=null},s.ExtrudeBodyManager=ee,function(){var e=function e(t,i,r){_classCallCheck(this,e),this.id=t,this.condition=i,this.material=r};s.MaterialOverrider=e}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.overriders=[],this.overrideData=t,this.materials={},this.materialsByName={},this.textures={},this.defaultColor=i||"#808080",this.loader=new s.MaterialOverriderLoader(this.defaultColor)}return _createClass(e,[{key:"load",value:function(e,t,i,r,n){i=void 0!=i&&i,(new s.MaterialOverriderLoader).getMaterialOverriders(this.overriders,e,t,i,r,n)}},{key:"loadByDemand",value:function(e,t,i){this.loader.getMaterialsByDemand(this.materials,this.materialsByName,this.textures,this.overrideData,e,t,i)}},{key:"setDefaultColor",value:function(e){this.defaultColor=e,this.loader.defaultColor=e}},{key:"getOverrideMaterials",value:function(){return this.materials}},{key:"getOverrideMaterialByNodeInfo",value:function(e,t){var i=this.materials;return t&&"user"==t.tag?i["elementId_"+e.userId]||t||i["systemTypeId_"+e.userData.systemTypeId]||i["familyId_"+e.userData.familyId]:i["elementId_"+e.userId]||i["systemTypeId_"+e.userData.systemTypeId]||i["familyId_"+e.userData.familyId]}},{key:"getOverrideMaterialByName",value:function(e){return this.materialsByName[e]}},{key:"updateMaterialsValue",value:function(e,t){var i,r=this.materials;for(var n in r)(i=r[n])&&i[e]&&(i[e]=t,void 0!==i.refreshUniforms&&i.refreshUniforms(),i.needsUpdate=!0)}}]),e}();s.MaterialOverriderSet=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.loader=new THREE.FileLoader,this.loadTaskCount=0,this.maxLoadTask=0,this.defaultColor=t}return _createClass(e,[{key:"getMaterialOverriders",value:function(e,t,i,r,n,a){var o=this,s=t.overrides;o._getOverridesByData(e,s,i,r,n,a),0==this.maxLoadTask&&n&&n()}},{key:"getMaterialsByDemand",value:function(e,t,i,r,n,a,o){if(!r.overrides)return void(a&&a());this.maxLoadTask=0,this.loadTaskCount=0;for(var l=[],u=r.overrides,c=r.textureMaterials,h=n.familyIds,d=n.elementIds,f=n.systemTypeIds,p=u.length,m=p-1;m>=0;m--){var v,g=u[m].targetType,y=u[m].target;if("family"==g){if(!h[y])continue;v="familyId_"+y}else if("element"==g){if(!d[y])continue;v="elementId_"+y}else{if("systemType"!=g)continue;if(!f[y])continue;v="systemTypeId_"+y}if(!e[v]){var M=u[m].colorMaterial;if(!M){if(!u[m].textureMaterial)continue;M=this.defaultColor}var E=new s.CloudStandardMaterial;if(E.pureColor=M,E.color.setStyle(M),E.name=M,u[m].textureMaterial){var b=JSON.parse(u[m].textureMaterial),x=b.materialId,I=c[b.materialId];E.name=I?x+E.name:E.name;var T=t[E.name];if(T){e[v]=T;continue}if(I){var w=JSON.parse(I);if(w.diffuse_color){var C=w.diffuse_color.split(",");E.color.setRGB(parseFloat(C[0]),parseFloat(C[1]),parseFloat(C[2])),E.opacity=parseFloat(C[3])}var S=E.opacity<1;if(E.transparent=S,E.roughness=w.roughness,E.metalness=w.metallic,E.bumpScale=w.enableBump,!l[b.materialId]&&!i[b.materialId]){if(w.diffuse_texture){var A=w.diffuse_texture.texture_file;A&&""!=A?(this.maxLoadTask+=2,l[b.materialId]={diffuse:w.diffuse_texture}):E.textureColor=E.color.getStyle()}if(w.bump_texture){var k=w.bump_texture.texture_file;k&&""!=k&&(this.maxLoadTask+=2,l[b.materialId]?l[b.materialId].bump=w.bump_texture:l[b.materialId]={bump:w.bump_texture})}}}else E.textureColor=M,console.log("Warning: there is no corresponding textureMaterial whose materialId is "+b.materialId)}else{var T=t[E.name];if(T){e[v]=T;continue}E.textureColor=M}E.needsUpdate=!0,E.side=THREE.DoubleSide,e[v]=E,t[E.name]=E}}this._mappingTexturesByDemand(t,i,l,a,o),0==this.maxLoadTask&&a&&a()}},{key:"_getOverridesByData",value:function(e,t,i,r,n,a){for(var o=i.familyIds,l=i.elementIds,u=i.systemTypeIds,c=!1,h=[],d=[],f=0,p=t.length;f<p;f++){var m,v=t[f].targetType,g=t[f].target;if("family"==v){if(!o[g])continue;m=[{familyId:g}]}else if("element"==v){if(!l[g])continue;m=[{elementId:g}]}else{if("systemType"!=consitionType)continue;if(!u[g])continue;m=[{systemTypeId:g}]}c=!0;var y;if(r){var M=t[f].colorMaterial;if(!M)continue;y=new s.CloudStandardMaterial,y.color.setStyle(M),y.name=t[f].id}else{if(!t[f].textureMaterial)continue;var E=JSON.parse(t[f].textureMaterial);if(!E.diffuse_color)continue;var M=E.diffuse_color.split(","),b=1==E.transparent;y=new s.CloudStandardMaterial({opacity:parseFloat(M[3]),roughness:E.roughness,metalness:E.metallic,transparent:b,bumpScale:E.enableBump}),y.name=E.id,y.color.setRGB(parseFloat(M[0]),parseFloat(M[1]),parseFloat(M[2]));var x=E.diffuse_texture.texture_file;x&&""!=x&&(this.maxLoadTask+=2,h[f]={diffuse:E.diffuse_texture});var I=E.bump_texture.texture_file;I&&""!=I&&(this.maxLoadTask+=2,h[f]?h[f].bump=E.bump_texture:h[f]={bump:E.bump_texture}),y.needsUpdate=!0}d[f]=y;var T=new s.MaterialOverrider(t[f].id,m,y);e.push(T)}if(this._mappingTextures(d,h,n,a),!c){console.log("there is no conditions matched"),a&&a()}}},{key:"_mappingTextures",value:function(e,t,i,r){for(var n=0;n<e.length;n++){if(e[n]&&t[n]){if(t[n].diffuse){var a=this._loadTexture(t[n].diffuse,i,r);e[n].map=a}if(t[n].bump){var o=this._loadTexture(t[n].bump,i,r);e[n].bumpMap=o}e[n].needsUpdate=!0}}}},{key:"_mappingTexturesByDemand",value:function(e,t,i,r,n){for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],s=o.name.split("#")[0];if(o&&i[s]){if(!t[s]){if(t[s]=[],i[s].diffuse){var l=this._loadTexture(i[s].diffuse,r,n);l.texturetype="map",t[s].push(l)}if(i[s].bump){var u=this._loadTexture(i[s].bump,r,n);u.texturetype="bumpMap",t[s].push(u)}}e[a].map=t[s][0],t[s].length>1&&(e[a].bumpMap=t[s][1]),e[a].needsUpdate=!0}}}},{key:"_loadTexture",value:function(e,t,i){var r=new THREE.Texture,n=this;return(new TEST.CryptoResourceLoader).loadURL(e.texture_file,function(i){var a=new Blob([i],{type:"jpeg"}),o=n._loadImage(URL.createObjectURL(a),function(){n._onLoadFinished(t)});r.image=o;var s=e.scale.split(","),l=e.offset.split(",");r.repeat.fromArray([parseFloat(s[0]),parseFloat(s[1])]),r.offset.fromArray([parseFloat(l[0]),parseFloat(l[1])]),r.wrapS=n._getTextureWrapping(e.wrap_parameter_s),r.wrapT=n._getTextureWrapping(e.wrap_parameter_t),r.magFilter=n._getTextureFilter(e.filter_mode_mag),r.minFilter=n._getTextureFilter(e.filter_mode_min),r.setRotateAngle(e.rotation),r.needsUpdate=!0,n._onLoadFinished(t)},function(){i&&i()}),r}},{key:"_loadImage",value:function(e,t){var i=new Image;return i.onload=function(){var e=document.createElement("canvas");e.width=s.MaterialUtil.nextHighestPowerOfTwo(i.width),e.height=s.MaterialUtil.nextHighestPowerOfTwo(i.height),e.getContext("2d").drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),t()},i.onerror=function(e){console.log("Error: image is failed to loaded"),t()},i.src=e,i}},{key:"_getTextureFilter",value:function(e){switch(e){case"NEAREST":return THREE.NearestFilter;case"NEAREST_MIPMAP_NEAREST":return THREE.NearestMipMapNearestFilter;case"NEAREST_MIPMAP_LINEAR":return THREE.NearestMipMapLinearFilter;case"LINEAR":return THREE.LinearFilter;case"LINEAR_MIPMAP_NEAREST":return THREE.LinearMipMapNearestFilter;case"LINEAR_MIPMAP_LINEAR":return THREE.LinearMipMapLinearFilter;default:return THREE.NearestFilter}}},{key:"_getTextureWrapping",value:function(e){switch(e){case"REPEAT":return THREE.RepeatWrapping;case"CLAMP":return THREE.ClampToEdgeWrapping;case"MIRROR":return THREE.MirroredRepeatWrapping;default:return THREE.RepeatWrapping}}},{key:"_onLoadFinished",value:function(e){++this.loadTaskCount>=this.maxLoadTask&&e&&e()}}]),e}();s.MaterialOverriderLoader=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.model=t.modelManager.getFirstModel(),this.model.registerPlugin(this),this.material=s.MaterialUtil.getDefaultStandardMaterial(),this.loader=new s.SegmentLoader(this),this.index=0,this.segmentIdMap={},this.segmentPathMap={},this.segmentIdArray=[],this.elementIdMap={},this.partialElementMap={},this.partialNodeInfoMapFromNodeId={},this.partialNodeIdMapFromSegmentId={},this.partialParentUserIdMapFromSegmentId={},this.partialNodeIdMapFromUserId={},this.geometryIdMapFromDataId={},this.dataBufferMapFromGeometryId={},this.geometryMapFromGeometryId={},this.meshNodeMapFromNodeId={},this.nodeIdMapOctantMap={},this.selectedNodeIdArray=[],this.hoveredNodeIdArray=[]}return _createClass(e,[{key:"destroy",value:function(){if(this.pickingNodeGenerators){for(var e in this.pickingNodeGenerators)this.pickingNodeGenerators.hasOwnProperty(e)&&this.pickingNodeGenerators[e].destroy();this.pickingNodeGenerators=null}this.removeSegmentBufferByDataIds(Object.keys(this.geometryIdMapFromDataId)),this.destroyGeometries(),this.model=null,this.loader.destroy(),this.loader=null,this.material=null,this.segmentIdMap=null,this.segmentPathMap=null,this.segmentIdArray=null,this.elementIdMap=null,this.partialElementMap=null,this.partialNodeInfoMapFromNodeId=null,this.partialNodeIdMapFromSegmentId=null,this.partialParentUserIdMapFromSegmentId=null,this.partialNodeIdMapFromUserId=null,this.geometryIdMapFromDataId=null,this.dataBufferMapFromGeometryId=null,this.meshNodeMapFromNodeId=null,this.nodeIdMapOctantMap=null,this.selectedNodeIdArray=null,this.hoveredNodeIdArray=null,this.segmentIdMapFromPartialElementId&&(this.segmentIdMapFromPartialElementId=null),this.viewer=null}},{key:"removeFromSegmentIdMap",value:function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t],n=this.segmentIdMap[r];n&&(delete this.segmentIdMap[r],delete this.segmentPathMap[n][r],s.Utils.isOwnEmptyObject(this.segmentPathMap[n])&&delete this.segmentPathMap[n])}this.segmentIdArray=Object.keys(this.segmentIdMap)}},{key:"loadSegmentsByPaths",value:function(e,t){function i(e){var a=e;return function(){r.loadSegmentByTaskId(a,function(){a<n-1?requestAnimationFrame(i(a+1)):t&&t()})}}var r=this,n=e.length;requestAnimationFrame(i(0))}},{key:"loadSegmentByTaskId",value:function(e,t){var i=this.addedSegmentPaths[e];if(-1===i||"-1"===i)return void(t&&t());this.loader.load(i,function(){t&&t()})}},{key:"cacheSegmentBuffer",value:function(e,t,i){this.geometryIdMapFromDataId[e]||(this.geometryIdMapFromDataId[e]=[]);var r=e+"|"+t;this.geometryIdMapFromDataId[e].push(r),this.dataBufferMapFromGeometryId[r]=i}},{key:"removeSegmentBufferByDataIds",value:function(e){for(var t=0,i=e.length;t<i;t++){var r=s.Utils.getEncodedId(e[t]),n=this.geometryIdMapFromDataId[r];if(n){for(var a=0,o=n.length;a<o;a++){var l=n[a];this.disposeGeometryByGeometryId(l),delete this.dataBufferMapFromGeometryId[l]}delete this.geometryIdMapFromDataId[r]}}}},{key:"hasNodeInfoFromPartialNodeInfoMap",value:function(e){return!!this.partialNodeInfoMapFromNodeId[e]}},{key:"classifyNodeInfos",value:function(e){this.partialNodeInfoMapFromNodeId[e.nodeId]=e,this.partialNodeIdMapFromSegmentId[e.segmentId]||(this.partialNodeIdMapFromSegmentId[e.segmentId]=[]),this.partialNodeIdMapFromSegmentId[e.segmentId].push(e.nodeId),this.partialParentUserIdMapFromSegmentId[e.segmentId]||(this.partialParentUserIdMapFromSegmentId[e.segmentId]={}),this.partialParentUserIdMapFromSegmentId[e.segmentId][e.parentUserId]||(this.partialParentUserIdMapFromSegmentId[e.segmentId][e.parentUserId]={}),this.partialParentUserIdMapFromSegmentId[e.segmentId][e.parentUserId][e.userId]=!0,this.partialNodeIdMapFromUserId[e.userId]||(this.partialNodeIdMapFromUserId[e.userId]=[]),this.partialNodeIdMapFromUserId[e.userId].push(e.nodeId)}},{key:"getAllPartialSegmentIds",value:function(){return Object.keys(this.partialNodeIdMapFromSegmentId)}},{key:"getNodeIdsBySegmentId",value:function(e){return this.partialNodeIdMapFromSegmentId[e]}},{key:"getNodeInfoByNodeId",value:function(e){return this.partialNodeInfoMapFromNodeId[e]}},{key:"getNodeIdsByUserId",value:function(e){return this.partialNodeIdMapFromUserId[e]}},{key:"getNodeInfosBySegmentId",value:function(e){var t=this.getNodeIdsBySegmentId(e);if(!t)return[];for(var i=[],r=0,n=t.length;r<n;r++){var a=this.getNodeInfoByNodeId(t[r]);a&&i.push(a)}return i}},{key:"getNodeInfosBySegmentIds",value:function(e){var t,i,r=[],n=this.getUsedAndNotUsedSegmentIdsBySegmentIds(e),a=n.usedSegmentIds,o=n.notUsedSegmentIds;for(t=0,i=a.length;t<i;t++)r=r.concat(this.getNodeInfosBySegmentId(a[t]));for(t=0,i=o.length;t<i;t++)r=r.concat(this.getNodeInfosBySegmentId(o[t]));return r}},{key:"getMeshesNodeByNodeId",value:function(e){var t=this.getNodeInfoByNodeId(e);if(!t)return null;var i=this.getMeshNodesByNodeInfo(t);return i||null}},{key:"getMeshNodesByNodeInfo",value:function(e){if(this.meshNodeMapFromNodeId[e.nodeId])return this.meshNodeMapFromNodeId[e.nodeId];var t=this.getGeometriesByNodeInfo(e);if(!t)return null;for(var i=[],r=this.model.getMaterialByMaterialId(e.materialId)||this.material,n=0,a=t.length;n<a;n++){var o=new s.MeshEx(t[n],r);o.spawn({databagId:this.model.databagId,matrix:e.matrix}),o.name=e.userId,o._nodeId=e.nodeId,o._oriMaterial=r,i.push(o)}if(!e.boundingBox){e.boundingBox=new THREE.Box3;for(var l=0,u=i.length;l<u;l++)e.boundingBox.union(i[l].computeBoundingBox());e.matrix&&e.boundingBox.applyMatrix4(e.matrix)}return this.meshNodeMapFromNodeId[e.nodeId]=i,this.meshNodeMapFromNodeId[e.nodeId]}},{key:"getMeshNodesWithNotUsedSegment",value:function(e,t){for(var i=s.Utils.arrayToMap(this.getParentUserIdsBySegmentIds(e)),r=[],n=0,a=t.length;n<a;n++){var o=this.getNodeIdsBySegmentId(t[n]);if(o)for(var l=0,u=o.length;l<u;l++){var c=this.getNodeInfoByNodeId(o[l]);c&&i[c.parentUserId]&&r.push(c)}}return this.getMeshNodesByNodeInfos(r)}},{key:"getMeshNodesByNodeInfos",value:function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=this.getMeshNodesByNodeInfo(e[i]);if(n)for(var a=0,o=n.length;a<o;a++)t.push(n[a])}return t}},{key:"getMeshNodesBySegmentId",value:function(e){var t=this.getNodeIdsBySegmentId(e);if(!t)return[];for(var i=[],r=0,n=t.length;r<n;r++){var a=this.getMeshesNodeByNodeId(t[r]);if(a)for(var o=0,s=a.length;o<s;o++)i.push(a[o])}return i}},{key:"getMeshNodesBySegmentIds",value:function(e){for(var t=[],i=this.getUsedAndNotUsedSegmentIdsBySegmentIds(e),r=i.usedSegmentIds,n=i.notUsedSegmentIds,a=0,o=r.length;a<o;a++)t=t.concat(this.getMeshNodesBySegmentId(r[a]));return t=t.concat(this.getMeshNodesWithNotUsedSegment(r,n))}},{key:"getUserIdsBySegmentId",value:function(e){var t={},i={},r=this.getNodeIdsBySegmentId(e);if(r)for(var n=0,a=r.length;n<a;n++){var o=this.getNodeInfoByNodeId(r[n]);o&&(t[o.userId]=!0,i[o.parentUserId]=!0)}for(var s=this.elementIdMap[e],l=0,u=s.length;l<u;l++)i[s[l]]||(t[s[l]]=!0);return Object.keys(t)}},{key:"getUserIdsBySegmentIds",value:function(e){for(var t=[],i=0,r=e.length;i<r;i++)t=t.concat(this.getUserIdsBySegmentId(e[i]));return t}},{
key:"getUserIdMapBySegmentIdAndParentUserId",value:function(e,t){return this.partialParentUserIdMapFromSegmentId[e]?this.partialParentUserIdMapFromSegmentId[e][t]:null}},{key:"getParentUserIdsBySegmentId",value:function(e){return this.partialParentUserIdMapFromSegmentId[e]?Object.keys(this.partialParentUserIdMapFromSegmentId[e]):[]}},{key:"getParentUserIdsBySegmentIds",value:function(e){for(var t=[],i=0,r=e.length;i<r;i++)t=t.concat(this.getParentUserIdsBySegmentId(e[i]));return t}},{key:"hasSegmentIdFromSegmentIdMap",value:function(e){return!!this.segmentIdMap[e]}},{key:"getGeometriesByNodeInfo",value:function(e){var t=e.geometryId;if(this.geometryMapFromGeometryId[t])return this.geometryMapFromGeometryId[t];var i=this.getGeometryDataBuffer(t),r=this._createBufferGeometry(e.type,i);return r?(r instanceof Array||(r=[r]),this.geometryMapFromGeometryId[t]=r,this.geometryMapFromGeometryId[t]):null}},{key:"_createBufferGeometry",value:function(e,t){var i=s.ModelView.BaseDescriptor.EnumNodeItemType,r=null;switch(e){case i.MESH:case i.MESH_REF:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3)),t.N?r.addAttribute("normal",new THREE.BufferAttribute(t.N,3)):r.computeVertexNormals(),t.UV&&r.addAttribute("uv",new THREE.BufferAttribute(t.UV,2));break;case i.TUBE:case i.PIPE:r=s.GeomUtil.UnitCylinderInstance;break;case i.BOX:r=s.GeomUtil.UnitBoxInstance;break;case i.BOX_M:r=s.GeomUtil.getUnitTextureBox();break;case i.PIPE_M:r=s.GeomUtil.getUnitTextureCylinder();break;case i.LINE:if(!t)return null;r=new THREE.BufferGeometry,r.setIndex(new THREE.BufferAttribute(t.I,1)),r.addAttribute("position",new THREE.BufferAttribute(t.P,3))}return r}},{key:"_isParameterizedGeometry",value:function(e){var t=s.ModelView.BaseDescriptor.EnumNodeItemType;return e===t.TUBE||e===t.PIPE||e===t.BOX||e===t.BOX_M||e===t.PIPE_M}},{key:"getGeometryDataBuffer",value:function(e){return this.dataBufferMapFromGeometryId[e]}},{key:"destroyGeometries",value:function(){for(var e=Object.keys(this.geometryMapFromGeometryId),t=0,i=e.length;t<i;t++)this.disposeGeometryByGeometryId(e[t]);this.disposeGeometryByGeometryId=null}},{key:"disposeGeometryByGeometryId",value:function(e){if(this.geometryMapFromGeometryId[e]){for(var t=this.geometryMapFromGeometryId[e],i=0,r=t.length;i<r;i++)t[i].dispose();delete this.geometryMapFromGeometryId[e]}}},{key:"getUsedAndNotUsedSegmentIdsBySegmentIds",value:function(e){var t,i,r={};for(t=0,i=e.length;t<i;t++)this.hasSegmentIdFromSegmentIdMap(e[t])&&(r[e[t]]=!0);var n=[],a=this.getAllPartialSegmentIds();for(t=0,i=a.length;t<i;t++)r[a[t]]||n.push(a[t]);return{usedSegmentIds:Object.keys(r),notUsedSegmentIds:n}}},{key:"getNotUsedPartialUserIds",value:function(e,t){for(var i=[],r=s.Utils.arrayToMap(this.getParentUserIdsBySegmentIds(e)),n=s.Utils.arrayToMap(this.getParentUserIdsBySegmentIds(t)),a=Object.keys(n),o=[],l=0,u=a.length;l<u;l++){var c=a[l];r[c]&&o.push(c)}for(var h=0,d=o.length;h<d;h++)for(var f=0,p=t.length;f<p;f++){var m=this.getUserIdMapBySegmentIdAndParentUserId(t[f],o[h]);m&&(i=i.concat(Object.keys(m)))}return i}},{key:"updateNodeInfos",value:function(){var e=this,t=this.model;this.traversePartialElements(function(i,r,n){var a=e.getDescriptor().getNodeInfosByUserId(r);if(a)for(var o=0,l=a.length;o<l;o++){var u=a[o];if(!u.finalState&&(u.finalState=!0,u.nodeId=i+"|"+u.nodeId,!e.hasNodeInfoFromPartialNodeInfoMap(u.nodeId))){u.state=s.EnumObjectState.Visible,u.material=null,e._isParameterizedGeometry(u.type)?u.geometryId=u.geometryId:u.geometryId=i+"|"+u.geometryId,u.segmentId=""!==n.segmentId?n.segmentId:"unknown",u.parentUserId=n.parentUserId,u.single=!0,u.uv=!1;var c=t.getModelDescriptor().getNodeInfosByUserId(u.parentUserId);u.materialId=c?c[0].materialId:-1,u.cellId=c?c[0].cellId:0,u.userData=u.userData?u.userData:c?c[0].userData:null,u.isSegment=!0,e.classifyNodeInfos(u)}}}),this.initFilterManager()}},{key:"getNodeGroup",value:function(){return this.model._getNodeGroup("FlowSegments",{globalSpace:!0})}},{key:"updateMeshNodes",value:function(){this.clearAllMeshNodes();var e=this.segmentIdArray;if(this.applyReplacementBySegmentIds(e),0!==e.length){for(var t=this.getMeshNodesBySegmentIds(e),i=this.getNodeGroup(),r=0,n=t.length;r<n;r++)i.add(t[r]),this.addMeshToOctantMap(t[r]);i.updateMatrixWorld(!0)}}},{key:"addMeshToOctantMap",value:function(e){var t=this.model.manager,i=this.model.getEncodedDatabagId(),r=e._nodeId,n=this.getNodeInfoByNodeId(e._nodeId);t.addNodeInfoToOctantMap(i,n.cellId,n),t.addMeshToOctantMap(i,n.nodeId,new s.SingleCapsuleObject(n.nodeId,e)),this.nodeIdMapOctantMap[r]=!0}},{key:"clearMeshNodesFromOctantMap",value:function(){for(var e=this.model.manager,t=this.model.getEncodedDatabagId(),i=Object.keys(this.nodeIdMapOctantMap),r=0,n=i.length;r<n;r++)e.removeMeshFromOctantMap(t,this.getNodeInfoByNodeId(i[r]));this.nodeIdMapOctantMap={}}},{key:"clearAllMeshNodes",value:function(){this.getNodeGroup().clear(),this.clearMeshNodesFromOctantMap()}},{key:"removeFromMeshNodeMap",value:function(e){for(var t=0,i=e.length;t<i;t++){var r=this.getNodeIdsBySegmentId(e[t]);if(r)for(var n=0,a=r.length;n<a;n++){var o=r[n];this.disposeGeometryByGeometryId(this.getNodeInfoByNodeId(o).geometryId),delete this.meshNodeMapFromNodeId[o]}}}},{key:"applyReplacementBySegmentIds",value:function(e){if(!e||!e.length)return this.model.setReplacedUserIdMap(null),this.resetFilterState(),void this.model.applyReplacement();this.model.setReplacedUserIdMap(s.Utils.arrayToMap(this.getParentUserIdsBySegmentIds(e))),this.model.applyReplacement()}},{key:"restoreComponentsState",value:function(){for(var e=this.getMeshNodesBySegmentIds(this.segmentIdArray),t=0,i=e.length;t<i;t++)e[t].material=e[t]._oriMaterial,e[t].visible=!0}},{key:"restoreMeshNodeMaterialByNodeIds",value:function(e){for(var t=0,i=e.length;t<i;t++){var r=this.getMeshesNodeByNodeId(e[t]);if(r)for(var n=0,a=r.length;n<a;n++)r[n].material=r[n]._oriMaterial}}},{key:"updateFilterManager",value:function(){this.model.getFilter().reinitFilterManager(this.model.manager.getNodeInfos())}},{key:"initFilterManager",value:function(){this.usedNodeInfos=this.getNodeInfosBySegmentIds(this.segmentIdArray),this.model.getModelDescriptor().addToNodeInfoMap(this.usedNodeInfos),this.updateFilterManager()}},{key:"deinitFilterManager",value:function(){this.usedNodeInfos&&this.model.getModelDescriptor().removeFromNodeInfoMap(this.usedNodeInfos),this.updateFilterManager()}},{key:"applyFilter",value:function(){for(var e=this.model.getFilter(),t=e._hasHiddenFileIdFilter(),i=e._hasVisibleFilter(),r=e._hasOverrideMaterialFilter(),n=e._hasTransparentFilter(),a=e._getMaterialByName("scene"),o=this.getMeshNodesBySegmentIds(this.segmentIdArray),s=0,l=o.length;s<l;s++){var u=o[s];u.visible=!0,u.material=u._oriMaterial;var c=this.getNodeInfoByNodeId(u._nodeId);if(t&&e._isHiddenFileId(c)||i&&!1===e._isVisible(c))u.visible=!1;else if(n&&e._isTransparent(c))u.material=a;else if(r&&e._hasOverrideMaterial(c)){var h=e._getOverrideMaterial(c);if(!h||""===h.name)continue;u.material=e._getMaterialByName(h.name)}else;}}},{key:"applySelection",value:function(){if(!s.GlobalData.PickingEffect){var e=this.model.manager.sceneState,t=this.model.selectedMaterial,i=e.getSelection();this.clearSelection();var r=this.selectedNodeIdArray;this.traverseMeshNodeMapByUserIds(i,function(e,i){for(var n=0,a=e.length;n<a;n++)e[n].material=t;r.push(i)})}}},{key:"clearSelection",value:function(){s.GlobalData.PickingEffect||this.selectedNodeIdArray.length&&(this.restoreMeshNodeMaterialByNodeIds(this.selectedNodeIdArray),this.selectedNodeIdArray.length=0)}},{key:"applyHover",value:function(){var e=this.model.manager,t=e.sceneState;if(t.hoverId&&!t.isSelected(t.hoverId)){this.clearHover();var i=this.model.getFilter(),r=this.hoveredNodeIdArray;this.traverseMeshNodeMapByUserIds([t.hoverId],function(n,a,o){for(var s=0,l=n.length;s<l;s++){var u=n[s],c=e.getOverrideMaterialByNodeInfo(o,this.model.materialManager.getMaterialById(o.materialId))||i._getOverrideMaterial(o)||u._oriMaterial;u.material=t.getHoverMaterial(c)}r.push(a)})}}},{key:"clearHover",value:function(){this.hoveredNodeIdArray.length&&(this.restoreMeshNodeMaterialByNodeIds(this.hoveredNodeIdArray),this.hoveredNodeIdArray.length=0)}},{key:"traverseMeshNodeMapByUserIds",value:function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i],a=this.getNodeIdsByUserId(e[i]);if(a&&a.length)for(var o=0,s=a.length;o<s;o++){var l=a[o],u=this.getNodeInfoByNodeId(l),c=this.getMeshNodesByNodeInfo(u);c&&t(c,l,u,n)}}}},{key:"getSegmentIdsByPartialElementId",value:function(e){if(this.segmentIdMapFromPartialElementId)return this.segmentIdMapFromPartialElementId[e];var t=this.segmentIdMapFromPartialElementId={};return this.traversePartialElements(function(e,i,r){t[i]||(t[i]=[]),t[i].push(r.segmentId),t[r.parentUserId]||(t[r.parentUserId]=[]),t[r.parentUserId].push(r.segmentId)}),t[e]}},{key:"cachePartialElements",value:function(e,t){this.partialElementMap[e]||(this.partialElementMap[e]={}),this.partialElementMap[e][t.partialElementId]={userId:t.partialElementId,segmentId:t.segmentId,parentUserId:t.elementId}}},{key:"traversePartialElements",value:function(e){for(var t in this.partialElementMap)for(var i in this.partialElementMap[t])e(t,i,this.partialElementMap[t][i])}},{key:"getSegmentIsolateOption",value:function(){return e.IsolateOption}},{key:"getSegmentMetadata",value:function(e,t,i){this.loader._loadMetadata(e,t,i)}},{key:"resetFilterState",value:function(){var e=this.model.getFilter();e.showAll(),e.opaqueAll()}},{key:"unloadSegments",value:function(e){this.deinitFilterManager(),this.removeFromSegmentIdMap(e),this.removeFromMeshNodeMap(e),this.updateMeshNodes()}},{key:"loadSegments",value:function(e,t){if(e instanceof Array&&0!==e.length){this.elementIdMap={};for(var i={},r={},n=0,a=e.length;n<a;n++){var o,l=e[n].id;o=e[n].paths.length?e[n].paths[0].databag:-1,i[l]=o,r[o]||(r[o]={}),r[o][l]=!0,this.elementIdMap[l]=e[n].elementIds||[]}var u=s.Utils.getDifferentialIdxs(i,this.segmentIdMap);this.segmentIdMap=u.objCurrUsedIdxs,this.segmentIdArray=Object.keys(this.segmentIdMap);var c=s.Utils.getDifferentialIdxs(r,this.segmentPathMap);this.segmentPathMap=c.objCurrUsedIdxs,this.addedSegmentPaths=c.addIdxs;var h=!1;if(u.removeIdxs.length&&(h=!0,this.removeFromMeshNodeMap(u.removeIdxs)),c.removeIdxs.length&&(h=!0,this.removeSegmentBufferByDataIds(c.removeIdxs)),0===this.addedSegmentPaths.length)return void(h&&this.updateMeshNodes());this.applyReplacementBySegmentIds(null);var d=this;this.loadSegmentsByPaths(this.addedSegmentPaths,function(){d.updateNodeInfos(),d.updateMeshNodes(),t&&t()})}}},{key:"hideComponentsBySegment",value:function(e){var t=this.model.getFilter(),i=this.getUsedAndNotUsedSegmentIdsBySegmentIds(e),r=this.getUserIdsBySegmentIds(i.usedSegmentIds);t.hideByIds(r)}},{key:"showComponentsBySegment",value:function(e){var t=this.model.getFilter(),i=this.getUsedAndNotUsedSegmentIdsBySegmentIds(e),r=this.getUserIdsBySegmentIds(i.usedSegmentIds);t.showByIds(r)}},{key:"isolateComponentsBySegment",value:function(t,i){var r=this.model.getFilter(),n=this.getUsedAndNotUsedSegmentIdsBySegmentIds(t),a=this.getUserIdsBySegmentIds(n.usedSegmentIds),o=this.getNotUsedPartialUserIds(n.usedSegmentIds,n.notUsedSegmentIds);switch(this.restoreComponentsState(),i){case e.IsolateOption.HIDDEN:r.hideAll(),r.showByIds(a);break;case e.IsolateOption.TRANSLUCENT:r.showByIds(a),o.length&&r.showByIds(o),r.makeTranslucentOthersByIds([]),r.opaqueByIds(a);break;case e.IsolateOption.PARTLYTRANSLUCENT:r.hideAll(),r.showByIds(a),o.length&&(r.showByIds(o),r.makeTranslucentByIds(o))}}},{key:"disable",value:function(){this.getNodeGroup().visible=!1,this.applyReplacementBySegmentIds(null)}},{key:"enable",value:function(){this.getNodeGroup().visible=!0,this.applyReplacementBySegmentIds(this.segmentIdArray)}},{key:"getDescriptor",value:function(){return this.loader.descriptor}},{key:"getMeshesByUserIds",value:function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t],n=this.getNodeIdsByUserId(r);if(n&&n.length)for(var a=0,o=n.length;a<o;a++){var s=this.getNodeInfoByNodeId(n[a]);if(this.isPickableNode(s)){var l=this.getMeshNodesByNodeInfo(s);if(l)for(var u=0,c=l.length;u<c;u++)this.model.minDistanceObjects[r].push({mesh:l[u],matrix:s.matrix,boundingBox:s.boundingBox})}}}}},{key:"isPickableNode",value:function(e){var t=this.model.getFilter(),i=t._hasHiddenFileIdFilter(),r=t._hasVisibleFilter(),n=t._hasTransparentFilter();return!(i&&t._isHiddenFileId(e)||r&&!1===t._isVisible(e))&&(!n||!t._isTransparent(e))}},{key:"getPickingNodeGenerator",value:function(e){return e=void 0==e?"pick":e,this.pickingNodeGenerators||(this.pickingNodeGenerators={}),this.pickingNodeGenerators[e]||(this.pickingNodeGenerators[e]=new s.PickingSegmentMeshGenerator(this)),this.pickingNodeGenerators[e]}}]),e}();e.IsolateOption=s.Utils.freezeObject({HIDDEN:0,TRANSLUCENT:1,PARTLYTRANSLUCENT:2}),s.SegmentManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.model=t,this.loader=new THREE.FileLoader,this.url=new s.Loader.Url({serverUrl:"",databagId:""}),this.currentTaskCount=0,this.maxTaskCount=0,this.mpkTaskManager=new s.TaskManager,this.databagId="",this.descriptor=new s.ModelView.DefaultDescriptor}return _createClass(e,[{key:"destroy",value:function(){this.model=null,this.loader=null,this.url=null,this.mpkTaskManager=null,this.descriptor.destroy(),this.descriptor=null}},{key:"load",value:function(e,t){var i=this;this.finishedCallback=t,this.databagId=e,this.url.databagPath=e,this.loader.setResponseType(""),this.loader.load(this.url.projectUrl(),function(e){var r;try{r=JSON.parse(e)}catch(e){return console.log("Config data exceptions!"),void(t&&t())}var n=r.metadata,a=n.scenes?1:0;if(0===a)return console.log("empty scene!"),void(t&&t());var o=n.mpks||0;if(0===o)return void(t&&t());var s=n.symbol?1:0,l=n.userdata?1:0,u=n.lines||0;i.maxTaskCount+=a,i.maxTaskCount+=s,i.maxTaskCount+=1,i.maxTaskCount+=l,i.maxTaskCount+=u,i.maxTaskCount+=o,i._loadScene(),s&&i._loadSymbol(),i._loadUserId(),l&&i._loadUserData(),u&&i._loadLine(),i._loadMpks(o)})}},{key:"_loadMetadata",value:function(e,t,i){var r=this,e=s.Utils.getEncodedId(e);this.loader.setResponseType(""),this.loader.load(t,function(t){for(var n=JSON.parse(t),a=n.partialElements,o=0,s=a.length;o<s;o++)r.model.cachePartialElements(e,a[o]);i&&i()},void 0,function(e){i&&i()})}},{key:"_loadScene",value:function(){var e=this;this.loader.setResponseType("arraybuffer"),this.loader.load(this.url.sceneUrl(0),function(t){e.descriptor.mapSceneReader[0]=new s.Loader.SceneReader(t),e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_loadLine",value:function(){var e=this,t=s.Utils.getEncodedId(this.databagId);this.loader.setResponseType("arraybuffer"),this.loader.load(this.url.lineUrl(),function(i){for(var r=new s.Loader.LineReader(i),n=0,a=r.header.lineCount;n<a;++n){var o=r.getPtBuffer(n),l=r.getIdxBuffer(n);if(void 0!=o&&void 0!=l){var u=r.getLineData(n);if(0===u.lineType){for(var c=[],h=1,d=l.length;h<d;h++)c.push(l[h-1]),c.push(l[h]);c.length&&(l=c)}e.model.cacheSegmentBuffer(t,"line-"+u.line_id,{P:o,I:l})}else s.Logger.log("Error Geometry!")}r=null,e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_loadSymbol",value:function(){var e=this;this.loader.setResponseType("arraybuffer"),this.loader.load(this.url.symbolUrl(),function(t){e.descriptor.symbolReader=new s.Loader.SymbolReader(t),e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_loadUserId",value:function(){var e=this;this.loader.setResponseType("arraybuffer"),this.loader.load(this.url.userIdUrl(),function(t){e.descriptor.userIdReader=new s.Loader.IdReader(t),e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_loadUserData",value:function(){var e=this;this.loader.setResponseType(""),this.loader.load(this.url.userDataUrl(),function(t){e.descriptor.userDataReader=new s.Loader.UserDataReader(t),e._onTaskFinished()},void 0,function(t){e._onTaskFinished()})}},{key:"_loadMpks",value:function(e){for(var t=0;t<e;++t)this.mpkTaskManager.addTask(t);this.mpkTaskManager.processTasks(this.loadMpk.bind(this))}},{key:"loadMpk",value:function(e,t){var i=this,r=s.Utils.getEncodedId(this.databagId);this.loader.setResponseType("arraybuffer"),this.loader.load(this.url.mpkUrl(e),function(e){for(var n=new s.Loader.MPKReader(e),a=n.header.meshCount,o=new THREE.Matrix4,l=0;l<a;++l){var u=n.getPtBuffer(l),c=n.getIdxBuffer(l);if(void 0!=u&&void 0!=c){var h=n.getNormalBuffer(l),d=n.getMeshData(l),f=n.getUVBuffer(l);0!==d.baseScale&&(u=new Float32Array(u),o.identity(),o.setPosition(new THREE.Vector3(d.baseX,d.baseY,d.baseZ)),o.scale(new THREE.Vector3(d.baseScale,d.baseScale,d.baseScale)),s.GeomUtil.applyMatrix4ToBuffer(o,u)),i.model.cacheSegmentBuffer(r,d.mesh_id,{P:u,I:c,N:h,UV:f})}else s.Logger.log("Error Geometry!")}n=null,t(),i._onTaskFinished()},void 0,function(e){i._onTaskFinished()})}},{key:"_onTaskFinished",value:function(){++this.currentTaskCount>=this.maxTaskCount&&(this.prepareData(),this.finishedCallback())}},{key:"prepareData",value:function(){this.descriptor.parseItemData(),this.descriptor.classifyAllNodeInfo()}}]),e}();s.SegmentLoader=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.ObjectGroupType.VIEWSHED,{priority:20}));e=e||{},i._position=new THREE.Vector3(0,0,0),i._direction=new THREE.Vector3(0,0,-1),i._visibleAreaColor=new THREE.Vector4(0,255,0,.8),i._hiddenAreaColor=new THREE.Vector4(255,0,0,.8),i._distance=void 0!=e.distance?e.distance:200,i._horizontalFov=void 0!=e.horizontalFov?e.horizontalFov:2*Math.PI/3,i._verticalFov=void 0!=e.verticalFov?e.verticalFov:Math.PI/2,i._up=new THREE.Vector3(0,1,0),i._right=new THREE.Vector3(1,0,0),i._unitAngle=5,i._cornerLeftTop=new THREE.Vector3,i._cornerRightTop=new THREE.Vector3,i._cornerLeftBottom=new THREE.Vector3,i._cornerRightBottom=new THREE.Vector3,i._viewer=null,i._lineGeometry=new THREE.BufferGeometry,i._lineMaterial=new THREE.LineBasicMaterial({color:16777215}),i._lineMesh=new THREE.LineSegments(i._lineGeometry,i._lineMaterial),i.camera=new THREE.PerspectiveCamera,i.viewMatrix=new THREE.Matrix4,i.viewProjMatrix=new THREE.Matrix4,i.depthRenderTarget=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter});var r=new THREE.Vector3;i.updateViewMatrix=function(){r.copy(this._position),r.add(this._direction),this.camera.position.copy(this._position),this.camera.lookAt(r),this.camera.updateMatrixWorld(!0),this.viewMatrix.getInverse(this.camera.matrixWorld)};var n=new THREE.Vector3;i.updateProjMatrix=function(){var e=Math.cos(this._horizontalFov/2),t=Math.tan(this._verticalFov/2),i=Math.atan(e*t),r=this._distance*Math.cos(i),a=r*Math.cos(this._horizontalFov/2);n.copy(this._position),n.addScaledVector(this._direction,a);var o=a*Math.tan(this._horizontalFov/2),s=a*Math.tan(this._verticalFov/2);this._cornerLeftTop.copy(n),this._cornerLeftTop.addScaledVector(this._right,-o),this._cornerLeftTop.addScaledVector(this._up,s),this._cornerRightTop.copy(n),this._cornerRightTop.addScaledVector(this._right,o),this._cornerRightTop.addScaledVector(this._up,s),this._cornerLeftBottom.copy(n),this._cornerLeftBottom.addScaledVector(this._right,-o),this._cornerLeftBottom.addScaledVector(this._up,-s),this._cornerRightBottom.copy(n),this._cornerRightBottom.addScaledVector(this._right,o),this._cornerRightBottom.addScaledVector(this._up,-s);var l=Math.tan(.5*this._horizontalFov)/Math.tan(.5*this._verticalFov);this.camera.fov=THREE.Math.radToDeg(this._verticalFov),this.camera.aspect=l,this.camera.near=.01,this.camera.far=this._distance,this.camera.updateProjectionMatrix()},i.getViewProjMatrix=function(){return this.viewProjMatrix.multiplyMatrices(this.camera.projectionMatrix,this.viewMatrix),this.viewProjMatrix},i.createSideLines=function(){for(var e=[],t=[this._cornerLeftBottom,this._cornerRightBottom,this._cornerRightTop,this._cornerLeftTop],i=0;i<t.length;i++)e.push(this._position.x,this._position.y,this._position.z),e.push(t[i].x,t[i].y,t[i].z);return e};var a=new THREE.Vector3,o=new THREE.Vector3,l=new THREE.Vector3,u=new THREE.Vector3,c=[],h=i;i.createTopSideLines=function(){function e(e,t,i){var r=[];if(i){for(var n=e;n<t;)if(r.push(n),(n+=h._unitAngle)>=t){r.push(t);break}}else for(var n=t;n>e;)if(r.push(n),(n-=h._unitAngle)<=e){r.push(e);break}return r}var t=[];a.copy(this._cornerLeftTop),a.sub(this._position),o.copy(this._cornerRightTop),o.sub(this._position),l.copy(this._cornerRightBottom),l.sub(this._position);var i,r,n=THREE.Math.radToDeg(o.angleTo(l)),s=THREE.Math.radToDeg(a.angleTo(o)),d=[{axis:"up",outerAngle:-this._horizontalFov/2,innerAngles:e(-n/2,n/2,!0)},{axis:"right",outerAngle:this._verticalFov/2,innerAngles:e(-s/2,s/2,!0)},{axis:"up",outerAngle:this._horizontalFov/2,innerAngles:e(-n/2,n/2,!1)},{axis:"right",outerAngle:-this._verticalFov/2,innerAngles:e(-s/2,s/2,!1)}];c=[];for(var f=0;f<d.length;f++){"up"==d[f].axis?(i=this._up,r=this._right):"right"==d[f].axis&&(i=this._right,r=this._up);for(var p=[],m=0;m<d[f].innerAngles.length;m++){u.copy(this._direction),u.applyAxisAngle(r,THREE.Math.degToRad(d[f].innerAngles[m])),u.applyAxisAngle(i,d[f].outerAngle),u.multiplyScalar(this._distance);var v=new THREE.Vector3;v.copy(this._position),v.add(u),p.push(v),c.push(v)}for(var m=0;m<p.length-1;m++)t.push(p[m].x,p[m].y,p[m].z),t.push(p[m+1].x,p[m+1].y,p[m+1].z)}return t};var d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,v=new THREE.Quaternion;i.createTopLines=function(){var e=[];d.copy(this._position),d.addScaledVector(this._direction,this._distance),f.copy(d),f.sub(this._position),f.normalize();for(var t=[],i=0,r=0;r<c.length;r++){m.copy(c[r]),m.sub(this._position),m.normalize(),p.copy(f),p.cross(m),p.normalize();for(var n=THREE.Math.radToDeg(f.angleTo(m)),a=[],o=0;;o+=this._unitAngle){o>=n&&(o=n),v.setFromAxisAngle(p,THREE.Math.degToRad(o)),u.copy(f),u.applyQuaternion(v);var s=new THREE.Vector3;if(s.copy(this._position),s.addScaledVector(u,this._distance),a.push(s),o>=n)break}i=Math.max(i,a.length),t.push(a)}for(var r=0;r<t.length;r++)for(var o=0;o<t[r].length-1;o++)e.push(t[r][o].x,t[r][o].y,t[r][o].z),e.push(t[r][o+1].x,t[r][o+1].y,t[r][o+1].z);for(var r=1;r<i;r++)for(var o=0;o<t.length-1;o++)t[o][r]&&t[o+1][r]&&(e.push(t[o][r].x,t[o][r].y,t[o][r].z),e.push(t[o+1][r].x,t[o+1][r].y,t[o+1][r].z));return e},i.updateMeshGeometry=function(){this.updateViewMatrix(),this.updateProjMatrix();var e=[];return e=e.concat(this.createSideLines()),e=e.concat(this.createTopSideLines()),e=e.concat(this.createTopLines()),this._lineGeometry.removeAttribute("position"),this._lineGeometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e),3)),this._lineGeometry},i.initPrimitive=function(){this.updateMeshGeometry(),this._lineMesh.geometry=this._lineGeometry,this.add(this._lineMesh)},i.updatePrimitive=function(){this.updateMeshGeometry(),this._lineMesh.geometry=this._lineGeometry},s.Viewshed.prototype.getId=function(){return this.uuid};var g={x:0,y:0,z:0};s.Viewshed.prototype.getPositon=function(){return g.x=this._position.x,g.y=this._position.y,g.z=this._position.z,g};var y=new THREE.Vector3;s.Viewshed.prototype.setPosition=function(e){y.x=e.x,y.y=e.y,y.z=e.z,this._position!=y&&(this._position.copy(y),this.updatePrimitive())};var M={x:0,y:0,z:0};s.Viewshed.prototype.getDirection=function(){return M.x=this._direction.x,M.y=this._direction.y,M.z=this._direction.z,M};var E=new THREE.Vector3(0,1,0),b=new THREE.Vector3;s.Viewshed.prototype.setDirection=function(e){if(b.x=e.x,b.y=e.y,b.z=e.z,b.normalize(),this._direction!=b){if(0===b.lengthSq())return void s.Logger.warn("WARNING: Invalid direction when CLOUD.Viewshed.prototype.setDirection()");this._direction.copy(b),this._right.crossVectors(E,b),0===this._right.lengthSq()&&(1===Math.abs(E.z)?b.x+=1e-4:b.z+=1e-4,b.normalize(),this._right.crossVectors(E,b)),this._right.normalize(),this._up.crossVectors(b,this._right),this.updatePrimitive()}};var x={x:0,y:0,z:0,w:0};s.Viewshed.prototype.getVisibleAreaColor=function(){return x.x=this._visibleAreaColor.x,x.y=this._visibleAreaColor.y,x.z=this._visibleAreaColor.z,x.w=this._visibleAreaColor.w,x};var I=new THREE.Vector4;s.Viewshed.prototype.setVisibleAreaColor=function(e){I.x=e.red||e.x?e.red||e.x:0,I.y=e.green||e.y?e.green||e.y:0,I.z=e.blue||e.z?e.blue||e.z:0,I.w=e.alpha||e.w?e.alpha||e.w:0,this._visibleAreaColor!=I&&(this._visibleAreaColor.copy(I),this.updatePrimitive())};var T={x:0,y:0,z:0,w:0};s.Viewshed.prototype.getHiddenAreaColor=function(){return T.x=this._hiddenAreaColor.x,T.y=this._hiddenAreaColor.y,T.z=this._hiddenAreaColor.z,T.w=this._hiddenAreaColor.w,T};var w=new THREE.Vector4;return s.Viewshed.prototype.setHiddenAreaColor=function(e){w.x=e.red||e.x?e.red||e.x:0,w.y=e.green||e.y?e.green||e.y:0,w.z=e.blue||e.z?e.blue||e.z:0,w.w=e.alpha||e.w?e.alpha||e.w:0,this._hiddenAreaColor!=w&&(this._hiddenAreaColor.copy(w),this.updatePrimitive())},s.Viewshed.prototype.getDistance=function(){return this._distance},s.Viewshed.prototype.setDistance=function(e){this._distance!=e&&(this._distance=e,this.updatePrimitive())},s.Viewshed.prototype.getHorizontalFov=function(){return this._horizontalFov},s.Viewshed.prototype.setHorizontalFov=function(e){this._horizontalFov!=e&&(this._horizontalFov=e,this.updatePrimitive())},s.Viewshed.prototype.getVerticalFov=function(){return this._verticalFov},s.Viewshed.prototype.setVerticalFov=function(e){this._verticalFov!=e&&(this._verticalFov=e,this.updatePrimitive())},s.Viewshed.prototype.show=function(){this.visible=!0,this._viewer&&this._viewer.viewshedManager.update()},s.Viewshed.prototype.hide=function(){this.visible=!1,this._viewer&&this._viewer.viewshedManager.update()},i.setPosition(void 0!=e.position?e.position:i._position),i.setDirection(void 0!=e.direction?e.direction:i._direction),i.setVisibleAreaColor(void 0!=e.visibleAreaColor?e.visibleAreaColor:i._visibleAreaColor),i.setHiddenAreaColor(void 0!=e.hiddenAreaColor?e.hiddenAreaColor:i._hiddenAreaColor),i.initPrimitive(),i}return _inherits(t,e),t}(s.ObjectGroup);s.Viewshed=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s.EditToolMode.VIEW_SHED_ANALYSIS));return i.viewer=e,i.scene=e.getScene(),i.viewshed=new s.Viewshed({position:new THREE.Vector3(0,0,0),direction:new THREE.Vector3(0,0,-1),distance:500,horizontalFov:2*Math.PI/3,verticalFov:Math.PI/2}),i.viewshed.show(),i.scene.objectGroups.add(i.viewshed),i}return _inherits(t,e),_createClass(t,[{key:"enable",value:function(e){e?this.viewshed.show():this.viewshed.hide()}},{key:"destroy",value:function(){}},{key:"onEnter",value:function(){this.enable(!0)}},{key:"onExit",value:function(){this.enable(!1)}},{key:"processMouseDown",value:function(e){}},{key:"processHover",value:function(e){}},{key:"processMouseUp",value:function(e){}},{key:"processMouseMove",value:function(e){}},{key:"processTouchstart",value:function(e){}},{key:"processTouchmove",value:function(e){}},{key:"processTouchend",value:function(e){}}]),t}(s.EditTool);s.ViewshedTool=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.scene=t.getScene(),this.modelManager=t.modelManager,this._viewsheds=[],this._maxViewshedCount=4,this._viewshedContents=[],this._viewshedDepthMaps=[];for(var i=0;i<this._maxViewshedCount;i++)this._viewshedDepthMaps.push(new THREE.Texture),this._viewshedContents.push({viewshedViewProjMatrix:new THREE.Matrix4,viewshedViewMatrix:new THREE.Matrix4,viewshedVisibleColor:new THREE.Vector4,viewshedHiddenColor:new THREE.Vector4,viewshedMinMax:new THREE.Vector2,viewshedLogDepthBufFC:1})}return _createClass(e,[{key:"destroy",value:function(){this._viewsheds=null,this._viewshedContents=null,this._viewshedDepthMaps=null,this.scene=null,this.modelManager=null,this.viewer=null}},{key:"addViewshed",value:function(e){return this._viewsheds.push(e),this.scene.objectGroups.add(e),e._viewer=this.viewer,e}},{key:"getViewshedById",value:function(e){for(var t=0;t<this._viewsheds.length;t++)if(this._viewsheds[t].getId()==e)return this._viewsheds[t]}},{key:"getViewsheds",value:function(){return this._viewsheds}},{key:"hideById",value:function(e){var t=this.getViewshedById(e);t&&t.hide(),this.update()}},{key:"showById",value:function(e){var t=this.getViewshedById(e);t&&t.show(),this.update()}},{key:"removeById",value:function(e){for(var t=0;t<this._viewsheds.length;t++)if(this._viewsheds[t].getId()==e){this.scene.objectGroups.remove(this._viewsheds[t]),this._viewsheds.splice(t,1);break}this.update()}},{key:"clear",value:function(){for(var e=0;e<this._viewsheds.length;e++)this.scene.objectGroups.remove(this._viewsheds[e]);this._viewsheds=[],this.update()}},{key:"update",value:function(){if(this._viewsheds.length>this._maxViewshedCount)return void console.warn("WARNING: Viewshed count exceeds max count limit");this._resetContents();for(var e=this.viewer.rendererManager.renderer,t=this.viewer.getScene(),i=0,r=0;r<this._viewsheds.length;r++)if(this._viewsheds[r].visible){var n=this._viewsheds[r].camera,a=this._viewsheds[r].depthRenderTarget;e.renderCustomDepth&&e.renderCustomDepth(e.renderer,t,n,a,!0);var o=this._viewsheds[r].getVisibleAreaColor(),s=this._viewsheds[r].getHiddenAreaColor();this._viewshedContents[i].viewshedViewProjMatrix.copy(this._viewsheds[r].getViewProjMatrix()),this._viewshedContents[i].viewshedViewMatrix.copy(this._viewsheds[r].viewMatrix),this._viewshedContents[i].viewshedVisibleColor.set(o.x/255,o.y/255,o.z/255,o.w),this._viewshedContents[i].viewshedHiddenColor.set(s.x/255,s.y/255,s.z/255,s.w),this._viewshedContents[i].viewshedMinMax.set(n.near,n.far),this._viewshedContents[i].viewshedLogDepthBufFC=2/(Math.log(n.far+1)/Math.LN2),this._viewshedDepthMaps[i]=a.texture,i++}this.modelManager.updateMaterialsValue("viewshedCount",0==i?-1:i),this.modelManager.updateMaterialsValue("viewshedContents",this._viewshedContents),this.modelManager.updateMaterialsValue("viewshedDepthMaps",this._viewshedDepthMaps)}},{key:"_resetContents",value:function(){for(var e=0;e<this._maxViewshedCount;e++)this._viewshedContents[e].viewshedViewProjMatrix.identity(),this._viewshedContents[e].viewshedViewMatrix.identity(),this._viewshedContents[e].viewshedVisibleColor.set(0,1,0,.8),this._viewshedContents[e].viewshedHiddenColor.set(1,0,0,.8),this._viewshedContents[e].viewshedMinMax.set(0,0),this._viewshedContents[e].viewshedLogDepthBufFC=1}}]),e}();s.ViewshedManager=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.geometry=null,this.material=null,this.mesh=null,this.id=t.id||"",this.visible=t.visible||!1,this.terrainOperationManager=t.terrainOperationManager}return _createClass(e,[{key:"init",value:function(e){for(var t=e.length,i=new Array,r=0,n=new THREE.Vector3,a=new Array(2*t),o=0;o<t;o++)n.copy(e[o]),n.y=0,a[2*o]=n.x,a[2*o+1]=n.z,n.toArray(i,r),r+=3;var l=s.earcut(a),u=new THREE.BufferGeometry;u.setIndex(l),u.addAttribute("position",new THREE.Float32BufferAttribute(i,3)),u.computeBoundingBox(),this.geometry=u;var c=new THREE.ShaderMaterial({uniforms:{},side:THREE.DoubleSide,vertexShader:"\n                    void main()\n                    {\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                    }\n                ",fragmentShader:"\n                    precision highp float;\n                    void main()\n                    {\n                        gl_FragColor = vec4(1.0, 0.0, 0.0 , 1.0);\n                    }\n                "});this.material=c,this.mesh=new THREE.Mesh(this.geometry,this.material),this.terrainOperationManager.sceneForExcavation.add(this.mesh)}},{key:"dispose",value:function(){this.geometry.dispose(),
this.material.dispose(),this.terrainOperationManager.sceneForExcavation.remove(this.mesh)}},{key:"setId",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"setVisible",value:function(e){this.visible=e,this.mesh.visible=e}},{key:"getVisible",value:function(){return this.visible}},{key:"getAABBMin",value:function(){return this.geometry.boundingBox.min}},{key:"getAABBMax",value:function(){return this.geometry.boundingBox.max}}]),e}();s.TerrainExcavation=e}(),function(){var e=new THREE.Vector3,t=function(){function t(e){_classCallCheck(this,t),this.visible=e.visible||!1,this.id=e.id||"",this.elevation=e.elevation||0,this.viewer=e.viewer,this.boundingBox=new THREE.Box3,this.pointsInDrawing=[]}return _createClass(t,[{key:"init",value:function(e){this.pointsInDrawing=[];for(var t=new THREE.Vector3(1/0,0,1/0),i=new THREE.Vector3(-1/0,0,-1/0),r=0;r<e.length;r++)this.pointsInDrawing.push(new THREE.Vector2(e[r].x,e[r].z)),t.x=Math.min(t.x,e[r].x),t.z=Math.min(t.z,e[r].z),i.x=Math.max(i.x,e[r].x),i.z=Math.max(i.z,e[r].z);this.boundingBox.min.copy(t),this.boundingBox.max.copy(i)}},{key:"setId",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"setVisible",value:function(e){this.visible=e}},{key:"getVisible",value:function(){return this.visible}},{key:"isInRegionDrawing",value:function(e){return s.Utils.pointInPolygon(e,this.pointsInDrawing)}},{key:"isIntersectRegionBboxDrawing",value:function(e){return this.boundingBox.intersectsBox(e)}},{key:"transformPolygon",value:function(t){for(var i=[],r=0;r<this.pointsInDrawing.length;r++)e.set(this.pointsInDrawing[r].x,0,this.pointsInDrawing[r].y),e.applyMatrix4(t),i.push(new THREE.Vector2(e.x,e.y));return i}}]),t}();s.TerrainFlatten=t}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.frustum=new THREE.Frustum,this.viewer=t,this.sceneForExcavation=new THREE.Scene,this.renderTargetForExcavation=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.pickingExcavationMaterial=new s.PickingExcavationMaterial,this.pickingExcavationRenderTarget=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.terrainExcavations={},this.terrainExcavationsNumber=0,this.orthoCamera=null,this.orthoViewProjMatrix=new THREE.Matrix4,this.isDirty=!0,this.terrainFlattens=[]}return _createClass(e,[{key:"render",value:function(e){if(this.renderer=e,0==this.terrainExcavationsNumber)return void(this.isDirty&&(this._updateTerrainForExcavation(),this.isDirty=!1));var t=this.viewer.camera;this.frustum.setFromMatrix((new THREE.Matrix4).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse)),this.isDirty&&this.calcOrthoCamera(),this.orthoCamera&&e.render(this.sceneForExcavation,this.orthoCamera,this.renderTargetForExcavation),this.isDirty&&(this._updateTerrainForExcavation(),this.isDirty=!1)}},{key:"pickExcavation",value:function(e){if(0==this.terrainExcavationsNumber)return!1;var t=!1;for(var i in this.terrainExcavations)if(this.terrainExcavations[i].getVisible()){t=!0;break}if(!t)return!1;var r=this.viewer.getScene(),n=r.overrideMaterial;r.overrideMaterial=this.pickingExcavationMaterial,this.renderer.render(r,this.viewer.camera,this.pickingExcavationRenderTarget),r.overrideMaterial=n;var a=this.viewer.getViewportSize(),o=new Uint8Array(4);return this.renderer.readRenderTargetPixels(this.pickingExcavationRenderTarget,e.x,a.height-e.y,1,1,o),o[0]<=0}},{key:"calcOrthoCamera",value:function(){var e=new THREE.Vector3(1/0,1/0,1/0),t=new THREE.Vector3(-1/0,-1/0,-1/0);for(var i in this.terrainExcavations)if(this.terrainExcavations[i].getVisible()){var r=this.terrainExcavations[i].getAABBMin(),n=this.terrainExcavations[i].getAABBMax();e.x=Math.min(r.x,e.x),e.y=Math.min(r.y,e.y),e.z=Math.min(r.z,e.z),t.x=Math.max(n.x,t.x),t.y=Math.max(n.y,t.y),t.z=Math.max(n.z,t.z)}var a=.5*(t.x-e.x),o=.5*(t.z-e.z),s=.5*(t.x+e.x),l=.5*(t.y+e.y),u=.5*(t.z+e.z),c=new THREE.Vector3(s,2,u),h=new THREE.Vector3(s,l,u);this.orthoCamera=new THREE.OrthographicCamera(-a,a,o,-o,.1,2e3),this.orthoCamera.position.set(c.x,c.y,c.z),this.orthoCamera.lookAt(h),this.orthoCamera.updateMatrixWorld(!0),this.orthoViewProjMatrix=this.orthoCamera.projectionMatrix.clone();var d=new THREE.Matrix4;d.getInverse(this.orthoCamera.matrixWorld),this.orthoViewProjMatrix.multiply(d)}},{key:"setSize",value:function(e,t){this.pickingExcavationRenderTarget.setSize(e,t)}},{key:"dispose",value:function(){this.clearExcavationRegions(),this.clearFlattenRegions(),null!=this.renderTargetForExcavation&&(this.renderTargetForExcavation.dispose(),this.renderTargetForExcavation=null),null!=this.pickingExcavationRenderTarget&&(this.pickingExcavationRenderTarget.dispose(),this.pickingExcavationRenderTarget=null),null!=this.sceneForExcavation&&(this.sceneForExcavation=null)}},{key:"addExcavationRegion",value:function(e,t){if(this.terrainExcavations.hasOwnProperty(e))return void console.warn("the terrain Excavation id '"+e+"' is existed.");var i=new s.TerrainExcavation({terrainOperationManager:this,id:e,visible:!0});i.init(t),this.terrainExcavations[e]=i,this.isDirty=!0,this.terrainExcavationsNumber++}},{key:"hideExcavationRegionsById",value:function(e){for(var t=0;t<e.length;++t)this.terrainExcavations.hasOwnProperty(e[t])&&(this.terrainExcavations[e[t]].setVisible(!1),this.isDirty=!0)}},{key:"showExcavationRegionsById",value:function(e){for(var t=0;t<e.length;++t)this.terrainExcavations.hasOwnProperty(e[t])&&(this.terrainExcavations[e[t]].setVisible(!0),this.isDirty=!0)}},{key:"removeExcavationRegionsById",value:function(e){for(var t=0;t<e.length;++t)this.terrainExcavations.hasOwnProperty(e[t])&&(this.terrainExcavations[e[t]].dispose(),delete this.terrainExcavations[e[t]],this.isDirty=!0,this.terrainExcavationsNumber--)}},{key:"clearExcavationRegions",value:function(){for(var e in this.terrainExcavations)this.terrainExcavations[e].dispose(),delete this.terrainExcavations[e],this.isDirty=!0,this.terrainExcavationsNumber--}},{key:"addFlattenRegion",value:function(e,t,i){if(this._hasFlattenRegion(e))return void console.warn("the terrain flatten id '"+e+"' is existed.");var r=new s.TerrainFlatten({viewer:this.viewer,id:e,visible:!0,elevation:i});r.init(t),this.terrainFlattens.push(r),this._updateTerrainForFlatten()}},{key:"removeFlattenRegionsById",value:function(e){for(var t=this.terrainFlattens.length-1;t>=0;--t)e.indexOf(this.terrainFlattens[t].getId())>=0&&this.terrainFlattens.splice(t,1);this._updateTerrainForFlatten()}},{key:"clearFlattenRegions",value:function(){this.terrainFlattens=[],this._updateTerrainForFlatten()}},{key:"isInFlattenRegionDrawing",value:function(e){for(var t=this.terrainFlattens.length-1;t>=0;--t)if(this.terrainFlattens[t].isInRegionDrawing(e))return this.terrainFlattens[t]}},{key:"isIntersectFlattenBboxDrawing",value:function(e){for(var t=this.terrainFlattens.length-1;t>=0;--t)if(this.terrainFlattens[t].isIntersectRegionBboxDrawing(e))return!0;return!1}},{key:"_hasFlattenRegion",value:function(e){for(var t=0;t<this.terrainFlattens.length;t++)if(e==this.terrainFlattens[t].getId())return!0;return!1}},{key:"_updateTerrainForFlatten",value:function(){var e,t=this.viewer.modelManager.modelCollection;t.traverse(function(t){t.isDemLayer&&(e=t.tileManager)}),e&&e.updateTileMeshForFlatten()}},{key:"_updateTerrainForExcavation",value:function(){var e,t=this.viewer.modelManager.modelCollection;t.traverse(function(t){t.isDemLayer&&(e=t.tileManager)});var i={isExcavation:this.terrainExcavationsNumber>0,samplerExcavation:this.renderTargetForExcavation.texture,cullOrthoMatrix:this.orthoViewProjMatrix};e&&e.setExcavation(i),this.pickingExcavationMaterial.updateExcavation(i),this.pickingExcavationMaterial.updateSide({isExcavation:i&&i.isExcavation})}}]),e}();s.TerrainOperationManager=e}();var te=function(){function e(t){_classCallCheck(this,e),this.name=t||"",this.keyFrameList=[],this.walkthroughTime=5,this.interpolateType=0,this.fps=60,this.parts=100,this.rotateSpeed=Math.PI/this.fps/4,this.parameters={segments:this.walkthroughTime*this.fps*this.parts,closed:!1,curveType:"centripetal",tension:.25},this.modificationId=0,this.mapDeltaAngle={},this.mapDeltaOffset={},this.allocateSegmentList=null}return _createClass(e,[{key:"addKeyFrame",value:function(e){var t=new THREE.Vector3(e.position.x,e.position.y,e.position.z),i=new THREE.Vector3(e.target.x,e.target.y,e.target.z);this.keyFrameList.push({position:t,target:i,id:e.id,name:e.name}),this.modificationId++}},{key:"setKeyFrameList",value:function(e){this.keyFrameList=[];for(var t=0,i=e.length;t<i;t++)this.addKeyFrame(e[t])}},{key:"removeKeyFrame",value:function(e){var t=this.keyFrameList.length;e>=0&&e<t&&(this.keyFrameList.splice(e,1),this.modificationId++)}},{key:"getKeyFrames",value:function(){return this.keyFrameList}},{key:"getKeyFrameCount",value:function(){return this.keyFrameList.length}},{key:"clearFrames",value:function(){this.keyFrameList=[]}},{key:"getJumpCounts",value:function(e){var t=e/(1e3/this.fps)*this.parts;return t=parseInt(t)}},{key:"setWalkthroughTime",value:function(e){this.walkthroughTime=e,this.setSegments(e*this.fps*this.parts)}},{key:"setInterpolateType",value:function(e){this.interpolateType=e,1==e&&this.setSplineTension(0)}},{key:"getInterpolateType",value:function(){return this.interpolateType}},{key:"setName",value:function(e){this.name=e}},{key:"getName",value:function(){return this.name}},{key:"getKeyFramePositions",value:function(){for(var e=[],t=0,i=this.keyFrameList.length;t<i;t++){var r=this.keyFrameList[t];e.push(r.position)}return e}},{key:"getKeyFramePosition",value:function(e){return this.keyFrameList[e].position}},{key:"getKeyFrameDirection",value:function(e){var t=this.keyFrameList[e];return t.target.clone().sub(t.position)}},{key:"getKeyFrameTarget",value:function(e){return this.keyFrameList[e].target}},{key:"allocateSegments",value:function(){for(var e=[],t=0,i=this.keyFrameList.length;t<i-1;t++){var r=this.keyFrameList[t].position,n=this.keyFrameList[t+1].position;e.push(n.clone().sub(r).length())}for(var a=0,o=0,i=e.length;o<i;o++)a+=e[o];for(var s=this.getSegments(),l=0,i=e.length;0!=a&&l<i;l++)e[l]/=a,e[l]*=this.getSegments(),e[l]=Math.floor(e[l]),s-=e[l];for(var u=0;u<s;u++)e[u]>0&&e[u]++;this.allocateSegmentList=e}},{key:"getAllocateSegmentCount",value:function(e){return null==this.allocateSegmentList&&this.allocateSegments(),this.allocateSegmentList[e]}},{key:"getSplineParam",value:function(e,t){null==this.allocateSegmentList&&this.allocateSegments();var i=this.allocateSegmentList.length;return(e+t/this.allocateSegmentList[e])/i}},{key:"getDeltaAngle",value:function(e){return this.mapDeltaAngle[e]}},{key:"calculateDeltaAngle",value:function(){for(var e=this.allocateSegmentList,t=0;t<e.length;t++){var i=this.getKeyFrameDirection(t),r=this.getKeyFrameDirection(t+1),n=i.angleTo(r),a=e[t];if(0==a){var o=Math.floor(n/this.rotateSpeed)*this.parts;e[t]=o,this.mapDeltaAngle[t]=n/o}else this.mapDeltaAngle[t]=n/a}}},{key:"calculateDeltaAngleCurrentKeyFrame",value:function(e,t,i,r){var n=this.allocateSegmentList,a=i.clone().sub(t),o=this.getKeyFrameDirection(e+1),s=a.angleTo(o),l=n[e]-r;if(0==l){var u=Math.floor(s/this.rotateSpeed)*this.parts;return n[e]=u,s/u}return s/l}},{key:"getRotateAxis",value:function(e){var t=this.getKeyFrameDirection(e),i=this.getKeyFrameDirection(e+1);return t.clone().cross(i.clone()).normalize()}},{key:"getRotateAxisCurrentKeyFrame",value:function(e,t,i){var r=i.clone().sub(t),n=this.getKeyFrameDirection(e+1);return r.clone().cross(n.clone()).normalize()}},{key:"getDeltaOffset",value:function(e){return this.mapDeltaOffset[e]}},{key:"calculateDeltaOffset",value:function(){for(var e=this.allocateSegmentList,t=0;t<e.length;t++){var i=this.getKeyFramePositions(),r=i[t],n=i[t+1],a=this.allocateSegmentList[t];this.mapDeltaOffset[t]=0==a?new THREE.Vector3:n.clone().sub(r).divideScalar(a)}}},{key:"calculateDeltaOffsetCurrentKeyFrame",value:function(e,t,i,r){var n=(this.allocateSegmentList,this.getKeyFramePositions()),a=t,o=n[e+1],s=this.allocateSegmentList[e]-r;return 0==s?new THREE.Vector3:o.clone().sub(a).divideScalar(s)}},{key:"setSplineTension",value:function(e){e>=0&&e<=1&&(this.parameters.tension=e,this.modificationId++)}},{key:"setSegments",value:function(e){this.parameters.segments=e,this.modificationId++}},{key:"getSegments",value:function(){return this.parameters.segments}},{key:"setParameters",value:function(e){this.parameters=e,this.modificationId++}},{key:"getParameters",value:function(){return this.parameters}},{key:"setFps",value:function(e){this.fps=e,this.modificationId++}},{key:"getModificationId",value:function(){return this.modificationId}}]),e}();s.Walkthrough=te;var ie=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.walkthrough=null,this.bPause=!1,this.bContinue=!1,this.bStop=!1,this.spline=null,this.reqid=0,this.playBinded=this.play.bind(this),this.recordId=-1,this.keyFrameIdx=0,this.count=-1,this.camera=this.viewer.cameraControl.camera,this.pausePlayCallback=null,this.stopPlayCallback=null,this.timeRecorder={last:0,pause:0,deltaTime:0},this.keyFrameCallback=null}return _createClass(e,[{key:"setWalkthrough",value:function(e){this.walkthrough=e,this.bPause=!1,this.recordId=-1,this.spline=null,this.keyFrameIdx=0,this.count=-1}},{key:"updateCamera",value:function(e,t){this.camera.position.add(e),this.camera.target.addVectors(this.camera.position,t),this.camera.up.copy(new THREE.Vector3(0,1,0))}},{key:"play",value:function(){this.viewer.cameraControl.lockPan=!0,this.reqid=requestAnimationFrame(this.playBinded),0==this.bContinue?(this.bContinue=!0,this.timeRecorder.deltaTime=this.timeRecorder.pause-this.timeRecorder.last):this.timeRecorder.deltaTime=performance.now()-this.timeRecorder.last,this.timeRecorder.last=performance.now();var e=this.walkthrough.getJumpCounts(this.timeRecorder.deltaTime);if(this.recordId!==this.walkthrough.getModificationId()&&(this.walkthrough.allocateSegments(),this.walkthrough.calculateDeltaOffset(),this.walkthrough.calculateDeltaAngle(),this.recordId=this.walkthrough.getModificationId()),this.bPause)return this.viewer.cameraControl.lockPan=!1,this.timeRecorder.pause=performance.now(),console.log("Walkthrough pause now,key frame index is "+this.keyFrameIdx),cancelAnimationFrame(this.reqid),this.pausePlayCallback&&this.pausePlayCallback(),this.bPause=!1,void(this.bContinue=!1);var t=this.walkthrough.getKeyFrameCount(),i=this.walkthrough.getAllocateSegmentCount(this.keyFrameIdx);if(0==i)this.keyFrameIdx++,this.triggerKeyFrameCallback(this.keyFrameIdx),this.count=-1;else{if(this.bStop||this.keyFrameIdx==t-1)return this.viewer.cameraControl.lockPan=!1,void this.stop(!0);if(-1==this.count){this.timeStart=performance.now(),this.triggerKeyFrameCallback(this.keyFrameIdx);var r=this.walkthrough.getKeyFramePosition(this.keyFrameIdx),n=this.walkthrough.getKeyFrameTarget(this.keyFrameIdx);this.camera.position.copy(r),this.camera.target.copy(n),this.count=0}else if(this.count<i){this.count+e>i&&(e=i-this.count);var a=this.walkthrough.calculateDeltaOffsetCurrentKeyFrame(this.keyFrameIdx,this.camera.position,this.camera.target.clone(),this.count),o=this.walkthrough.calculateDeltaAngleCurrentKeyFrame(this.keyFrameIdx,this.camera.position,this.camera.target.clone(),this.count),s=this.walkthrough.getRotateAxisCurrentKeyFrame(this.keyFrameIdx,this.camera.position,this.camera.target.clone()),l=new THREE.Vector3;l.subVectors(this.camera.target.clone(),this.camera.position),0==isNaN(s.length())&&l.applyAxisAngle(s,o*e),this.count+e==i?(this.keyFrameIdx++,this.triggerKeyFrameCallback(this.keyFrameIdx),this.count=0):this.count+=e,this.updateCamera(a.clone().multiplyScalar(e),l)}}this.viewer.render()}},{key:"pause",value:function(){this.bPause=!0,this.viewer.cameraControl.lockPan=!1}},{key:"stop",value:function(e){e&&(this.viewer.cameraControl.lockPan=!1,this.bStop=!1,this.keyFrameIdx=0,this.count=-1,console.log("Time cost "+(performance.now()-this.timeStart)+"ms."),cancelAnimationFrame(this.reqid),this.stopPlayCallback&&this.stopPlayCallback())}},{key:"startFrom",value:function(e){for(var t=this.walkthrough,i=t.getKeyFrameCount(),r=t.getKeyFrames(),n=0;n<i;n++)if(r[n].id==e)return this.keyFrameIdx=n,void(this.count=-1)}},{key:"setKeyFrameCallback",value:function(e){this.keyFrameCallback=e}},{key:"triggerKeyFrameCallback",value:function(e){this.keyFrameCallback&&this.keyFrameCallback(e)}},{key:"addPausePlayCallback",value:function(e){this.pausePlayCallback=e}},{key:"addStopPlayCallback",value:function(e){this.stopPlayCallback=e}},{key:"updataSpline",value:function(){var e=this.walkthrough.getKeyFramePositions(),t=this.walkthrough.getParameters();this.spline=new THREE.CatmullRomCurve3(e,t.closed,t.curveType,t.tension)}}]),e}();s.WalkthroughPlayer=ie;var re=function(){function e(){_classCallCheck(this,e),this.walkthroughList=[]}return _createClass(e,[{key:"clear",value:function(){this.walkthroughList=[]}},{key:"add",value:function(e){this.walkthroughList.push(e)}},{key:"remove",value:function(e){for(var t=0,i=this.walkthroughList.length;t<i;t++){if(this.walkthroughList[t].getName()==e)return void this.walkthroughList.splice(t,1)}}},{key:"save",value:function(){return JSON.stringify(this.walkthroughList)}},{key:"load",value:function(e){this.clear();for(var t=JSON.parse(e),i=0,r=t.length;i<r;i++){var n=new s.Walkthrough;n.setName(t[i].name),n.setKeyFrameList(t[i].keyFrameList),n.setParameters(t[i].parameters),n.setWalkthroughTime(t[i].walkthroughTime),n.setInterpolateType(t[i].type),n.setFps(t[i].fps),this.add(n)}return this.walkthroughList}}]),e}();s.WalkthroughManager=re,function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewer=t,this.renderTargetForLimitedColor=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),this.renderTargetForLimitedHeight=new THREE.WebGLRenderTarget(1024,1024,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter}),this.limitAnalyses={},this.limitAnalysesNumber=0,this.orthoCamera=null,this.orthoViewProjMatrix=new THREE.Matrix4,this.isDirty=!1,this.sceneForLimitedRegion=new THREE.Scene;var i=t.getScene().getRawMatrixGlobal();this.meshGroup=new s.ObjectGroup("limitedRegion"),this.meshGroup.matrix.copy(i),this.meshGroup.matrixAutoUpdate=!1,this.meshGroup.updateMatrixWorld(!0),this.sceneForLimitedRegion.add(this.meshGroup),this.modelIds={}}return _createClass(e,[{key:"render",value:function(e){var t=e.clippingPlanes;if(e.clippingPlanes=[],this.renderer=e,0==this.limitAnalysesNumber)return void(this.isDirty&&(this._updateMaterial(),this.isDirty=!1));this.isDirty&&(this._calcOrthoCamera(),this._changeMaterialMode(!0),e.render(this.sceneForLimitedRegion,this.orthoCamera,this.renderTargetForLimitedHeight,!0),this._changeMaterialMode(!1),e.render(this.sceneForLimitedRegion,this.orthoCamera,this.renderTargetForLimitedColor,!0),this._updateMaterial(),this.isDirty=!1),e.clippingPlanes=t}},{key:"_changeMaterialMode",value:function(e){var t=this.meshGroup.children;if(e)for(var i=0;i<t.length;i++){var r=t[i].children[0].material;r.uniforms.useHeightLimit.value=!0,r.transparent=!1,r.needsUpdate=!0}else for(var i=0;i<t.length;i++){var r=t[i].children[0].material;r.uniforms.useHeightLimit.value=!1,r.transparent=!1,r.needsUpdate=!0}}},{key:"_calcOrthoCamera",value:function(){var e=new THREE.Vector3(1/0,1/0,1/0),t=new THREE.Vector3(-1/0,-1/0,-1/0);for(var i in this.limitAnalyses)if(this.limitAnalyses[i].areaMesh.visible){var r=this.limitAnalyses[i]._getBox(),n=r.min,a=r.max;e.x=Math.min(n.x,e.x),e.y=Math.min(n.y,e.y),e.z=Math.min(n.z,e.z),t.x=Math.max(a.x,t.x),t.y=Math.max(a.y,t.y),t.z=Math.max(a.z,t.z)}var o=.5*(t.x-e.x),s=.5*(t.z-e.z),l=.5*(t.x+e.x),u=.5*(t.y+e.y),c=.5*(t.z+e.z),h=new THREE.Vector3(l,e.y-1,c),d=new THREE.Vector3(l,u+1,c);this.orthoCamera=new THREE.OrthographicCamera(-o,o,s,-s,-.1,t.y-e.y+2),this.orthoCamera.position.set(h.x,h.y,h.z),this.orthoCamera.lookAt(d),this.orthoCamera.updateMatrixWorld(!0),this.orthoViewProjMatrix=this.orthoCamera.projectionMatrix.clone();var f=new THREE.Matrix4;f.getInverse(this.orthoCamera.matrixWorld),this.orthoViewProjMatrix.multiply(f)}},{key:"setSize",value:function(e,t){}},{key:"dispose",value:function(){this.clearLimitAnalyses(),null!=this.renderTargetForLimitedColor&&(this.renderTargetForLimitedColor.dispose(),this.renderTargetForLimitedColor=null),null!=this.renderTargetForLimitedHeight&&(this.renderTargetForLimitedHeight.dispose(),this.renderTargetForLimitedHeight=null),null!=this.sceneForLimitedRegion&&(this.sceneForLimitedRegion=null)}},{key:"clearLimitAnalyses",value:function(){for(var e in this.limitAnalyses)delete this.limitAnalyses[e],this.isDirty=!0,this.limitAnalysesNumber--;this._updateModelIds()}},{key:"addLimitAnalysis",value:function(e,t){this.limitAnalyses.hasOwnProperty(e)||(this.limitAnalyses[e]=t,this.isDirty=!0,this.limitAnalysesNumber++,t.areaMesh&&(this._initializePlaneMaterial(t.areaMesh,t._drawingHeight),this.meshGroup.add(t.areaMesh)),this._updateModelIds())}},{key:"removeLimitAnalysisById",value:function(e){if(this.limitAnalyses.hasOwnProperty(e)){for(var t=this.meshGroup.children,i=0;i<t.length;i++)if(t[i].name==e){this.meshGroup.remove(t[i]);break}delete this.limitAnalyses[e],this._updateModelIds(),this.limitAnalysesNumber--,this.isDirty=!0}}},{key:"_updateMaterial",value:function(){var e=this;this.viewer.modelManager.modelCollection.traverse(function(t){e.modelIds[t.id]&&(t.updateMaterialsValue("heightColorSampler",e.renderTargetForLimitedColor.texture),t.updateMaterialsValue("heightLimitSampler",e.renderTargetForLimitedHeight.texture),t.updateMaterialsValue("heightLimitOrthoMatrix",e.orthoViewProjMatrix))})}},{key:"_initializePlaneMaterial",value:function(e,t){var i=e.children[0];void 0!=i&&(i.material.defines.USE_COLORWITHOUTLIGHT="",i.material.defines.HEIGHT_LIMIT_WRITE="",i.material.heightLimit=t,i.material.refreshUniforms(),i.material.needsUpdate=!0)}},{key:"_updatePlaneMaterial",value:function(e,t){var i=e.children[0];void 0!=i&&(i.material.heightLimit=t,i.material.uniforms.heightLimit.value=t)}},{key:"update",value:function(e,t){var i=this.limitAnalyses[e];if(t){this._initializePlaneMaterial(i.areaMesh,i._drawingHeight);for(var r=this.meshGroup.children,n=0;n<r.length;n++)r[n].name==e&&(r[n]=i.areaMesh,i.areaMesh.parent=this.meshGroup);i._updateBox(),this._updateModelIds()}else this._updatePlaneMaterial(i.areaMesh,i._drawingHeight);this.isDirty=!0}},{key:"_updateModelIds",value:function(){var e=this,t={};for(var i in this.limitAnalyses){var r=this.limitAnalyses[i];if("global"==r.mode||!r._modelIds){var n=this.viewer.modelManager.modelCollection;n.traverse(function(e){t[e.id]=!0});break}for(var a=0;a<r._modelIds.length;a++)t[r._modelIds[a]]=!0}var n=this.viewer.modelManager.modelCollection;n.traverse(function(i){e.modelIds[i.id]&&!t[i.id]&&(i.updateMaterialsValue("heightColorSampler",null),i.updateMaterialsValue("heightLimitSampler",null))}),this.modelIds=t}}]),e}();s.HeightLimitManager=e}(),function(){var e=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=i;return r.disPickable=!0,r.autoAnimation=!1,null!=e.viewer&&(r.viewer=e.viewer),r.level=0,r.boundary=[],r.tileManager=null,r.worldBoxScratch=new THREE.Box3,r.tileBuilder=new s.Tile.PlaneTileBuilder,r.worldMatrixScratch=new THREE.Matrix4,r.inverseWorldMatrixScratch=new THREE.Matrix4,r.worldMatrixRestore=new THREE.Matrix4,r.pointVector3_a=new THREE.Vector3,r.pointVector3_b=new THREE.Vector3,r.pointVector3_c=new THREE.Vector3,r.lineStartScratch=new THREE.Vector2,r.lineEndScratch=new THREE.Vector2,r.worldCutPointData=[],r.worldFillPointData=[],r.worldFlatPointData=[],r.worldCutPlaneData=[],r.worldFillPlaneData=[],r.totalArea=0,r.cutArea=0,r.fillArea=0,r.cutVolume=0,r.fillVolume=0,r.totalSuperficialArea=0,r.setOpts(e),r._getDemTileManager(),null!=r.tileManager&&r.updateCutFillVolume(),r.show(),i}return _inherits(t,e),_createClass(t,[{key:"updateCutFillVolume",value:function(){var e=this;e.clearGriddingMesh(),e.pointsBoundary=[],e.worldPointsBoundary=[],e.worldCutPointData=[],e.worldFillPointData=[],e.worldFlatPointData=[],e.newIndexCut=[],e.newIndexFill=[],e.newIndexGround=[],e.newPositionsCut=[],e.newPositionsFill=[],e.newPositionsGround=[],e.cutFillHeight={max:-1/0,min:1/0},e.modelAltitude=e.tileManager.modelAltitude*s.Tile.TileMath.unitScale,0==e.viewer.gisMode&&(e.modelAltitude*=-1);for(var t=0;t<e.boundary.length;t++)if(!(t>0&&e.boundary[t].x==e.boundary[t-1].x&&e.boundary[t].z==e.boundary[t-1].z)){e.pointsBoundary.push(new THREE.Vector2(e.boundary[t].x,e.boundary[t].z));var i=e.viewer.drawingToWorld(e.boundary[t]);e.worldPointsBoundary.push(i)}e.worldPointsBoundary.length<=2||(e._initBoundingBox(),e._checkTileMeshBox(),e._showVisualization(),e._setTotalArea(),e._setVolume(),e._setSuperficialArea())}},{key:"_setSuperficialArea",value:function(){var e=this;e.totalSuperficialArea=0;for(var t=0;t<e.worldCutPointData.length;t+=3){var i=e.computeAreaOfTriangle(e.worldCutPointData[t],e.worldCutPointData[t+1],e.worldCutPointData[t+2],!1);e.totalSuperficialArea+=i}for(var t=0;t<e.worldFillPointData.length;t+=3){var r=e.computeAreaOfTriangle(e.worldFillPointData[t],e.worldFillPointData[t+1],e.worldFillPointData[t+2],!1);e.totalSuperficialArea+=r}for(var t=0;t<e.worldFlatPointData.length;t+=3){var n=e.computeAreaOfTriangle(e.worldFlatPointData[t],e.worldFlatPointData[t+1],e.worldFlatPointData[t+2],!1);e.totalSuperficialArea+=n}if(0==e.totalSuperficialArea&&0==e.totalSuperficialArea&&0==e.totalSuperficialArea){var a=e._calcSpatialArea();e.totalSuperficialArea=a/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale}else e.totalSuperficialArea=e.totalSuperficialArea/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale}},{key:"_calcSpatialArea",value:function(){var e=this,t=e.worldPointsBoundary.length;if(t<3)return 0;for(var i=0,r=new THREE.Triangle,n=2;n<t;n++){var a=r.clone().set(e.worldPointsBoundary[n-1],e.worldPointsBoundary[n],e.worldPointsBoundary[0]),o=a.area();if(n>2){var s=r.normal(),l=a.normal(),u=s.angleTo(l);if((Math.abs(u-3.1415)<2e-4||Math.abs(u)<2e-4)&&(r.containsPoint(e.worldPointsBoundary[n])||a.containsPoint(e.worldPointsBoundary[n-2]))){var c=r.area();o=Math.abs(o-c)-c}}i+=o,r.copy(a)}return i}},{key:"_setTotalArea",value:function(){var e=this;e.totalArea=0,e.cutArea=0,e.fillArea=0,e.worldCutPlaneData=[],e.worldFillPlaneData=[];for(var t=0;t<e.worldCutPointData.length;t+=3){var i=e.computeAreaOfTriangle(e.worldCutPointData[t],e.worldCutPointData[t+1],e.worldCutPointData[t+2]);e.worldCutPlaneData.push(i),e.cutArea+=i}for(var t=0;t<e.worldFillPointData.length;t+=3){var r=e.computeAreaOfTriangle(e.worldFillPointData[t],e.worldFillPointData[t+1],e.worldFillPointData[t+2]);e.worldFillPlaneData.push(r),e.fillArea+=r}for(var n=0,t=0;t<e.worldFlatPointData.length;t+=3){n+=e.computeAreaOfTriangle(e.worldFlatPointData[t],e.worldFlatPointData[t+1],e.worldFlatPointData[t+2])}e.totalArea=e.cutArea+e.fillArea+n,e.cutArea=e.cutArea/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale,e.fillArea=e.fillArea/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale,e.totalArea=e.totalArea/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale}},{key:"_setVolume",value:function(){var e=this;e.cutVolume=0,e.fillVolume=0;for(var t=0;t<e.worldCutPointData.length;t+=3){var i=e.worldCutPlaneData[t/3]*(e.worldCutPointData[t].z-e._level-e.modelAltitude+e.worldCutPointData[t+1].z-e._level-e.modelAltitude+e.worldCutPointData[t+2].z-e._level-e.modelAltitude)/3;e.cutVolume+=i}for(var t=0;t<e.worldFillPointData.length;t+=3){var r=e.worldFillPlaneData[t/3]*(e._level+e.modelAltitude-e.worldFillPointData[t].z+e._level+e.modelAltitude-e.worldFillPointData[t+1].z+e._level+e.modelAltitude-e.worldFillPointData[t+2].z)/3;e.fillVolume+=r}e.cutVolume=e.cutVolume/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale,e.fillVolume=e.fillVolume/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale/s.Tile.TileMath.unitScale}},{key:"_initBoundingBox",value:function(){var e=this;e.boundingBox=new THREE.Box3;for(var t=new THREE.Vector3(1/0,0,1/0),i=new THREE.Vector3(-1/0,0,-1/0),r=0;r<e.pointsBoundary.length;r++)t.x=Math.min(t.x,e.pointsBoundary[r].x),t.z=Math.min(t.z,e.pointsBoundary[r].y),i.x=Math.max(i.x,e.pointsBoundary[r].x),i.z=Math.max(i.z,e.pointsBoundary[r].y);e.boundingBox.min.copy(t),e.boundingBox.max.copy(i)}},{key:"_checkTileMeshBox",value:function(){var e=this;if(null!=e.tileManager.globeLayer)for(var t=e.tileManager.globeLayer._tileset.getTileMesh(),i=0;i<t.length;i++){var r=t[i];if(r.content&&r.content.meshes&&r.boundingBox){var n=r.content.meshes;if(n.children.length>0&&n.visible){var a=n.children[0],o=r._tileset._objectGroup.matrix;e.worldBoxScratch.copy(r.boundingBox),e.worldBoxScratch.applyMatrix4(o),e.worldBoxScratch.min.y=e.worldBoxScratch.max.y=0,e.boundingBox.intersectsBox(e.worldBoxScratch)&&(e.worldMatrixScratch.multiplyMatrices(o,a.matrix),e.inverseWorldMatrixScratch.getInverse(e.worldMatrixScratch),e.setMyPointsBoundary(),e._createTileGeometry(a.geometry,0,0,e.worldMatrixScratch))}}}else if(null!=e.tileManager.globalLayer){var s=e.tileManager.globalLayer;for(var l in s)for(var u in s[l])for(var c in s[l][u])if(s[l][u][c]){var r=s[l][u][c];r.box&&r.terrainData&&(e.worldBoxScratch.copy(r.box),e.worldBoxScratch.min.y=e.worldBoxScratch.max.y=0,e.boundingBox.intersectsBox(e.worldBoxScratch)&&e._checkTileGeometryTriangular(r))}}}},{key:"_showVisualization",value:function(){var e=this;if(e.showVisualization){null==e.wallWireframeGeometry&&(e.wallWireframeGeometry=new THREE.Geometry),null==e.blGeometry&&(e.blGeometry=new THREE.Geometry),null==e.bpGeometry&&(e.bpGeometry=new THREE.Geometry),null==e.wallGeometry1&&(e.wallGeometry1=new THREE.Geometry),null==e.wallGeometry2&&(e.wallGeometry2=new THREE.Geometry),e.blGeometry.vertices=[],e.wallWireframeGeometry.vertices=[],e.wallGeometry1.vertices=[],e.wallGeometry1.faces=[],e.wallGeometry2.vertices=[],e.wallGeometry2.faces=[],e.bpGeometry.vertices=[],e.bpGeometry.faces=[];for(var t=[],i=e.worldPointsBoundary.length,r=0;r<i;r++)if(t.push(new THREE.Vector2(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y)),e.wallWireframeGeometry.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.min),new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.max)),e.wallGeometry1.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.min),new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e._level+e.modelAltitude)),e.wallGeometry2.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.max),new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e._level+e.modelAltitude)),r<i-1){e.blGeometry.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e._level+e.modelAltitude),new THREE.Vector3(e.worldPointsBoundary[r+1].x,e.worldPointsBoundary[r+1].y,e._level+e.modelAltitude)),e.wallWireframeGeometry.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r+1].x,e.worldPointsBoundary[r+1].y,e.cutFillHeight.max),new THREE.Vector3(e.worldPointsBoundary[r+1].x,e.worldPointsBoundary[r+1].y,e.cutFillHeight.min),new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.min));var n=2*r;e.wallGeometry1.faces.push(new THREE.Face3(n,n+1,n+3),new THREE.Face3(n,n+2,n+3)),e.wallGeometry2.faces.push(new THREE.Face3(n,n+1,n+3),new THREE.Face3(n,n+2,n+3))}else{e.blGeometry.vertices.push(new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e._level+e.modelAltitude),new THREE.Vector3(e.worldPointsBoundary[0].x,e.worldPointsBoundary[0].y,e._level+e.modelAltitude)),
e.wallWireframeGeometry.vertices.push(new THREE.Vector3(e.worldPointsBoundary[0].x,e.worldPointsBoundary[0].y,e.cutFillHeight.max),new THREE.Vector3(e.worldPointsBoundary[0].x,e.worldPointsBoundary[0].y,e.cutFillHeight.min),new THREE.Vector3(e.worldPointsBoundary[r].x,e.worldPointsBoundary[r].y,e.cutFillHeight.min));var n=2*r;e.wallGeometry1.faces.push(new THREE.Face3(n,n+1,1),new THREE.Face3(n,0,1)),e.wallGeometry2.faces.push(new THREE.Face3(n,n+1,1),new THREE.Face3(n,0,1))}for(var a=new THREE.ShapeGeometry(new THREE.Shape(t)),r=0;r<a.vertices.length;r++)a.vertices[r].z=e._level+e.modelAltitude,e.bpGeometry.vertices.push(a.vertices[r]);for(var r=0;r<a.faces.length;r++)e.bpGeometry.faces.push(a.faces[r]);if(a.dispose(),e.wallWireframeGeometry.verticesNeedUpdate=!0,e.wallWireframeGeometry.elementsNeedUpdate=!0,e.blGeometry.verticesNeedUpdate=!0,e.blGeometry.elementsNeedUpdate=!0,e.bpGeometry.verticesNeedUpdate=!0,e.bpGeometry.elementsNeedUpdate=!0,e.wallGeometry1.verticesNeedUpdate=!0,e.wallGeometry1.elementsNeedUpdate=!0,e.wallGeometry2.verticesNeedUpdate=!0,e.wallGeometry2.elementsNeedUpdate=!0,null===e.wallGeometry1.boundingSphere&&e.wallGeometry1.computeBoundingSphere(),null===e.wallGeometry2.boundingSphere&&e.wallGeometry2.computeBoundingSphere(),null===e.wallWireframeGeometry.boundingSphere&&e.wallWireframeGeometry.computeBoundingSphere(),null===e.blGeometry.boundingSphere&&e.blGeometry.computeBoundingSphere(),null===e.bpGeometry.boundingSphere&&e.bpGeometry.computeBoundingSphere(),null==e.wallMesh1){var o=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,wireframe:!1,color:new THREE.Color("#32D3A6"),opacity:.4,blending:THREE.NormalBlending});e.wallMesh1=new THREE.Mesh(e.wallGeometry1,o),e.wallMesh1.renderOrder=100,e.add(e.wallMesh1)}if(null==e.wallMesh2){var l=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,wireframe:!1,color:new THREE.Color("#32D3A6"),opacity:.15,blending:THREE.NormalBlending});e.wallMesh2=new THREE.Mesh(e.wallGeometry2,l),e.wallMesh2.renderOrder=100,e.add(e.wallMesh2)}if(null==e.wallWireframeMesh){var u=new THREE.LineBasicMaterial({depthTest:!0,transparent:!1,depthWrite:!1,color:new THREE.Color("#00825E")});e.wallWireframeMesh=new THREE.Line(e.wallWireframeGeometry,u),e.wallWireframeMesh.renderOrder=100,e.add(e.wallWireframeMesh)}if(null==e.blMesh){var c=new THREE.LineBasicMaterial({depthTest:!0,transparent:!1,depthWrite:!1,color:new THREE.Color("#32D3A6"),linewidth:4,opacity:1});e.blMesh=new THREE.Line(e.blGeometry,c),e.blMesh.renderOrder=100,e.add(e.blMesh)}if(null==e.bpMesh&&s.GlobalData.EnableLogarithmicDepthBuffer){var h=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,depthTest:!0,transparent:!0,depthWrite:!1,wireframe:!1,color:new THREE.Color("#32D3A6"),opacity:.4});e.bpMesh=new THREE.Mesh(e.bpGeometry,h),e.bpMesh.renderOrder=100,e.add(e.bpMesh)}null==e.cutMaterial&&(e.cutMaterial=new s.CutFillMaterial({color:new THREE.Color("#E82C2C"),opacity:1}));var d=new THREE.BufferGeometry;d.setIndex(new THREE.Uint32BufferAttribute(e.newIndexCut,1)),d.addAttribute("position",new THREE.Float32BufferAttribute(e.newPositionsCut,3)),e.cutMesh=new THREE.Mesh(d,e.cutMaterial),e.add(e.cutMesh),null==e.fillMaterial&&(e.fillMaterial=new s.CutFillMaterial({color:new THREE.Color("#FF9D0B"),opacity:1}));var f=new THREE.BufferGeometry;f.setIndex(new THREE.Uint32BufferAttribute(e.newIndexFill,1)),f.addAttribute("position",new THREE.Float32BufferAttribute(e.newPositionsFill,3)),e.fillMesh=new THREE.Mesh(f,e.fillMaterial),e.add(e.fillMesh),null==e.groundMaterial&&(e.groundMaterial=new s.CutFillMaterial({color:new THREE.Color("#32D3A6"),opacity:1}));var p=new THREE.BufferGeometry;p.setIndex(new THREE.Uint32BufferAttribute(e.newIndexGround,1)),p.addAttribute("position",new THREE.Float32BufferAttribute(e.newPositionsGround,3)),e.groundMesh=new THREE.Mesh(p,e.groundMaterial),e.add(e.groundMesh),e.updateMatrixWorld()}}},{key:"_createTileGeometry",value:function(e,t,i,r){var n=this,a=n.tileBuilder.getTileGeometryTriangular(n,n.worldMatrixScratch,e),o=_slicedToArray(a,3),s=o[0],l=o[1],u=o[2];n.worldMatrixRestore.makeTranslation(t,i,0),n.worldMatrixRestore.multiplyMatrices(r,n.worldMatrixRestore);var c=n.viewer.getScene().getMatrixGlobal(),h=new THREE.Matrix4;h.getInverse(c);for(var d=n.newIndexCut.length,f=0;f<l.length;f+=3)n.newIndexCut.push(d+f/3),n.pointVector3_a.set(l[f],l[f+1],l[f+2]),n.pointVector3_a.applyMatrix4(n.worldMatrixRestore),n.pointVector3_a.applyMatrix4(h),n.newPositionsCut.push(n.pointVector3_a.x,n.pointVector3_a.y,n.pointVector3_a.z),n.worldCutPointData.push(n.pointVector3_a.clone()),n.cutFillHeight.max=Math.max(n.pointVector3_a.z,n.cutFillHeight.max),n.cutFillHeight.min=Math.min(n.pointVector3_a.z,n.cutFillHeight.min);for(var p=n.newIndexFill.length,f=0;f<s.length;f+=3)n.newIndexFill.push(p+f/3),n.pointVector3_a.set(s[f],s[f+1],s[f+2]),n.pointVector3_a.applyMatrix4(n.worldMatrixRestore),n.pointVector3_a.applyMatrix4(h),n.newPositionsFill.push(n.pointVector3_a.x,n.pointVector3_a.y,n.pointVector3_a.z),n.worldFillPointData.push(n.pointVector3_a.clone()),n.cutFillHeight.max=Math.max(n.pointVector3_a.z,n.cutFillHeight.max),n.cutFillHeight.min=Math.min(n.pointVector3_a.z,n.cutFillHeight.min);for(var m=n.newIndexGround.length,f=0;f<u.length;f+=3)n.newIndexGround.push(m+f/3),n.pointVector3_a.set(u[f],u[f+1],u[f+2]),n.pointVector3_a.applyMatrix4(n.worldMatrixRestore),n.pointVector3_a.applyMatrix4(h),n.newPositionsGround.push(n.pointVector3_a.x,n.pointVector3_a.y,n.pointVector3_a.z),n.worldFlatPointData.push(n.pointVector3_a.clone()),n.cutFillHeight.max=Math.max(n.pointVector3_a.z,n.cutFillHeight.max),n.cutFillHeight.min=Math.min(n.pointVector3_a.z,n.cutFillHeight.min)}},{key:"_checkTileGeometryTriangular",value:function(e){var t=this;if(e.box&&e.terrainData){var i=e.x,r=e.y,n=e.zoom,a=t.tileManager.mercatorPerimeter/Math.pow(2,t.tileManager.maxZoom)*s.Tile.TileMath.unitScale*2,o=(i*Math.pow(2,t.tileManager.maxZoom-n)-t.tileManager.modelTileX)*a+Math.pow(2,t.tileManager.maxZoom-n)/2*a,l=-(r*Math.pow(2,t.tileManager.maxZoom-n)-t.tileManager.modelTileY)*a-Math.pow(2,t.tileManager.maxZoom-n)/2*a;t.worldMatrixScratch.makeTranslation(o,l,0),t.worldMatrixScratch.multiplyMatrices(t.tileManager.earthMatrix,t.worldMatrixScratch),t.inverseWorldMatrixScratch.getInverse(t.worldMatrixScratch),t.setMyPointsBoundary(),e.geometry.translate(-o,-l,0),t._createTileGeometry(e.geometry,o,l,t.tileManager.earthMatrix),e.geometry.translate(o,l,0)}}},{key:"setMyPointsBoundary",value:function(){var e=this;e.myPointsBoundary=[];for(var t=0;t<e.pointsBoundary.length;t++)e.pointVector3_a.set(e.pointsBoundary[t].x,0,e.pointsBoundary[t].y),e.pointVector3_a.applyMatrix4(e.inverseWorldMatrixScratch),e.myPointsBoundary.push(new THREE.Vector2(e.pointVector3_a.x,e.pointVector3_a.y))}},{key:"getIntersectPos",value:function(e,t){var i=this,r=[];i.lineStartScratch.set(e.x,e.y);for(var n=0;n<t.length;n++){i.lineEndScratch.set(t[n].x,t[n].y);var a=s.Utils.linePolygonIntersection2(i.lineStartScratch,i.lineEndScratch,i.myPointsBoundary);null!=a&&r.push(a)}for(var n=0;n<r.length;n++){var o=t[n].x-e.x,l=t[n].y-e.y,u=Math.sqrt(o*o+l*l),c=r[n].x-e.x,h=r[n].y-e.y,d=Math.sqrt(c*c+h*h);r[n].z=e.z+d/u*(t[n].z-e.z)}if(r.length>2&&r[0].index!=r[1].index){var f=r[0].index>r[1].index?r[0].index:r[1].index;Math.abs(r[0].index-r[1].index)>1&&(0==r[0].index||0==r[1].index)&&(f=0),r[0].point={x:i.myPointsBoundary[f].x,y:i.myPointsBoundary[f].y,z:(r[0].z+r[1].z)/2}}return r}},{key:"isInRegionDrawing",value:function(e){var t=this;return s.Utils.pointInPolygon({x:e.x,y:e.z},t.pointsBoundary)}},{key:"_getDemTileManager",value:function(){var e=this;if(null==e.tileManager){e.viewer.modelManager.modelCollection.traverse(function(t){t.isDemLayer&&(e.tileManager=t.tileManager)})}}},{key:"computeAreaOfTriangle",value:function(e,t,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this;r?(n.pointVector3_a.set(e.x,e.y,0),n.pointVector3_b.set(t.x,t.y,0),n.pointVector3_c.set(i.x,i.y,0)):(n.pointVector3_a.set(e.x,e.y,e.z),n.pointVector3_b.set(t.x,t.y,t.z),n.pointVector3_c.set(i.x,i.y,i.z));var a=Math.sqrt(n.pointVector3_a.distanceToSquared(n.pointVector3_b)),o=Math.sqrt(n.pointVector3_b.distanceToSquared(n.pointVector3_c)),s=Math.sqrt(n.pointVector3_c.distanceToSquared(n.pointVector3_a)),l=(a+o+s)/2;return Math.sqrt(l*(l-a)*(l-o)*(l-s))}},{key:"clearGriddingMesh",value:function(){var e=this;null!=e.cutMesh&&(e.remove(e.cutMesh),e.cutMesh.geometry.dispose(),e.cutMesh=null),null!=e.fillMesh&&(e.remove(e.fillMesh),e.fillMesh.geometry.dispose(),e.fillMesh=null),null!=e.groundMesh&&(e.remove(e.groundMesh),e.groundMesh.geometry.dispose(),e.groundMesh=null)}},{key:"removeAllMesh",value:function(){var e=this;e.clearGriddingMesh(),null!=e.cutMaterial&&e.cutMaterial.dispose(),null!=e.fillMaterial&&e.fillMaterial.dispose(),null!=e.groundMaterial&&e.groundMaterial.dispose(),null!=e.wallMesh1&&(e.remove(e.wallMesh1),e.wallMesh1.geometry.dispose(),e.wallMesh1.material.dispose(),e.wallMesh1=null),null!=e.wallMesh2&&(e.remove(e.wallMesh2),e.wallMesh2.geometry.dispose(),e.wallMesh2.material.dispose(),e.wallMesh2=null),null!=e.wallWireframeMesh&&(e.remove(e.wallWireframeMesh),e.wallWireframeMesh.geometry.dispose(),e.wallWireframeMesh.material.dispose(),e.wallWireframeMesh=null),null!=e.blMesh&&(e.remove(e.blMesh),e.blMesh.geometry.dispose(),e.blMesh.material.dispose(),e.blMesh=null),null!=e.bpMesh&&(e.remove(e.bpMesh),e.bpMesh.geometry.dispose(),e.bpMesh.material.dispose(),e.bpMesh=null)}},{key:"destroy",value:function(){var e=this;e.removeAllMesh(),e.level=null,e.boundary=null,e.showVisualization=null,e.tileManager=null,e.worldBoxScratch=null,e.tileBuilder=null,e.worldMatrixScratch=null,e.inverseWorldMatrixScratch=null,e.worldMatrixRestore=null,e.pointVector3_a=null,e.pointVector3_b=null,e.pointVector3_c=null,e.lineStartScratch=null,e.lineEndScratch=null}},{key:"checkHighLowTerrain",value:function(e,t,i,r,n,a){var o=this;if(e[2]>o._level&&t[2]>o._level&&i[2]>o._level)n.push(e[0],e[1],e[2]),n.push(t[0],t[1],t[2]),n.push(i[0],i[1],i[2]);else if(e[2]<o._level&&t[2]<o._level&&i[2]<o._level)r.push(e[0],e[1],e[2]),r.push(t[0],t[1],t[2]),r.push(i[0],i[1],i[2]);else if(e[2]==o._level&&t[2]==o._level&&i[2]==o._level)a.push(e[0],e[1],e[2]),a.push(t[0],t[1],t[2]),a.push(i[0],i[1],i[2]);else{var s=[],l=[],u=[];if(e[2]>o._level?s.push(e[0],e[1],e[2]):e[2]<o._level?l.push(e[0],e[1],e[2]):u.push(e[0],e[1],e[2]),t[2]>o._level?s.push(t[0],t[1],t[2]):t[2]<o._level?l.push(t[0],t[1],t[2]):u.push(t[0],t[1],t[2]),i[2]>o._level?s.push(i[0],i[1],i[2]):i[2]<o._level?l.push(i[0],i[1],i[2]):u.push(i[0],i[1],i[2]),0==l.length)n.push(e[0],e[1],e[2]),n.push(t[0],t[1],t[2]),n.push(i[0],i[1],i[2]);else if(0==s.length)r.push(e[0],e[1],e[2]),r.push(t[0],t[1],t[2]),r.push(i[0],i[1],i[2]);else if(3==u.length){var c=o.getGradient(l[2],u[2],s[2]),h=l[0]+c*(s[0]-l[0]),d=l[1]+c*(s[1]-l[1]),f=o._level;r.push(h,d,f),r.push(l[0],l[1],l[2]),r.push(u[0],u[1],u[2]),n.push(h,d,f),n.push(s[0],s[1],s[2]),n.push(u[0],u[1],u[2])}else if(6==l.length){var p=o.getGradient(s[2],o._level,l[2]),m=o.getGradient(s[2],o._level,l[5]),v=s[0]+p*(l[0]-s[0]),g=s[1]+p*(l[1]-s[1]),y=o._level,M=s[0]+m*(l[3]-s[0]),E=s[1]+m*(l[4]-s[1]),b=o._level;n.push(v,g,y),n.push(M,E,b),n.push(s[0],s[1],s[2]),r.push(v,g,y),r.push(M,E,b),r.push(l[0],l[1],l[2]),r.push(M,E,b),r.push(l[0],l[1],l[2]),r.push(l[3],l[4],l[5])}else if(6==s.length){var p=o.getGradient(l[2],o._level,s[2]),m=o.getGradient(l[2],o._level,s[5]),v=l[0]+p*(s[0]-l[0]),g=l[1]+p*(s[1]-l[1]),y=o._level,M=l[0]+m*(s[3]-l[0]),E=l[1]+m*(s[4]-l[1]),b=o._level;r.push(v,g,y),r.push(M,E,b),r.push(l[0],l[1],l[2]),n.push(v,g,y),n.push(M,E,b),n.push(s[0],s[1],s[2]),n.push(M,E,b),n.push(s[0],s[1],s[2]),n.push(s[3],s[4],s[5])}else console.log("数据丢失~")}}},{key:"getGradient",value:function(e,t,i){return Math.abs((t-e)/(i-e))}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),null!=t.tileManager&&t.updateCutFillVolume()}},{key:"setVisible",value:function(e){var t=this;null!=t.cutMesh&&(t.cutMesh.material.visible=e),null!=t.fillMesh&&(t.fillMesh.material.visible=e),null!=t.groundMesh&&(t.groundMesh.material.visible=e),null!=t.wallMesh1&&(t.wallMesh1.material.visible=e),null!=t.wallMesh2&&(t.wallMesh2.material.visible=e),null!=t.wallWireframeMesh&&(t.wallWireframeMesh.material.visible=e),null!=t.blMesh&&(t.blMesh.material.visible=e),null!=t.bpMesh&&(t.bpMesh.material.visible=e)}},{key:"hide",value:function(){this.setVisible(!1)}},{key:"show",value:function(){this.setVisible(!0)}},{key:"setOpts",value:function(e){var t=this;e&&(void 0!==e.level&&null!==e.level&&(t.level=e.level),void 0!==e.boundary&&null!==e.boundary&&(t.boundary=e.boundary),void 0!==e.showVisualization&&null!==e.showVisualization&&(t.showVisualization=e.showVisualization)),t._level=t.level*s.Tile.TileMath.unitScale*s.GlobalData.TerrainScale}},{key:"getTotalArea",value:function(){return this.totalArea}},{key:"getTotalSuperficialArea",value:function(){return this.totalSuperficialArea}},{key:"getCutArea",value:function(){return this.cutArea}},{key:"getCutVolume",value:function(){return this.cutVolume}},{key:"getFillArea",value:function(){return this.fillArea}},{key:"getFillVolume",value:function(){return this.fillVolume}}]),t}(THREE.Group);s.CutFillMeasure=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e);var i=this;i.embeddedViewFlg=!1,i.viewer=t,i.modelManager=i.viewer.getModelManager(),i.oldSceneMap={},i.mainViewContents=[],i.subViewContents=[],i.subViewRegion={},i.needUpdate=!1,i.tempMaterial=new THREE.ShaderMaterial}return _createClass(e,[{key:"dispose",value:function(){var e=this;e.embeddedViewFlg=null,e.subViewRegion=null,e.mainViewContents=null,e.subViewContents=null,e.oldSceneMap=null,e.modelManager=null}},{key:"isEmbeddedView",value:function(){return this.embeddedViewFlg}},{key:"effectOpt",value:function(e){var t=this;t.setOpts(e),t.update()}},{key:"getTileManager",value:function(){var e=this;if(null==e.tileManager){e.modelManager.modelCollection.traverse(function(t){t.isDemLayer&&(e.tileManager=t.tileManager)})}return e.tileManager}},{key:"setOpts",value:function(e){var t=this;null!=e.subViewRegion&&(null!=e.subViewRegion.locationX&&(t.subViewRegion.locationX=e.subViewRegion.locationX),null!=e.subViewRegion.locationY&&(t.subViewRegion.locationY=e.subViewRegion.locationY),null!=e.subViewRegion.widthRatio&&(t.subViewRegion.widthRatio=e.subViewRegion.widthRatio),null!=e.subViewRegion.heightRatio&&(t.subViewRegion.heightRatio=e.subViewRegion.heightRatio)),null!=e.mainViewContents&&(t.mainViewContents=e.mainViewContents,t.needUpdate=!0),null!=e.subViewContents&&(t.subViewContents=e.subViewContents,t.needUpdate=!0)}},{key:"show",value:function(){var e=this;e.embeddedViewFlg=!0,e.update()}},{key:"hide",value:function(){var e=this;e.embeddedViewFlg=!1,e.recoverVisible(!0)}},{key:"setViewRegionRender",value:function(e,t,i){var r=this;e.setScissorTest(!0);var n=e.getSize(),a=n.width,o=n.height,s=e.getPixelRatio(),l=r.subViewRegion.locationX,u=r.subViewRegion.locationY;r.recoverVisible(),r.setContentsVisible(r.mainViewContents),e.setScissor(0,0,a,o),e.render(t,i);var c=o-u-o*r.subViewRegion.heightRatio;c<0&&(c=0);var h=o*r.subViewRegion.heightRatio;h+c>o-u&&(h=o-u),h<=0&&(h=0);var d=a*r.subViewRegion.widthRatio;d+l>a&&(d=a-l),d<=0&&(d=0),0!=d&&0!=h&&(e.setViewport(r.subViewRegion.locationX*s,c*s,d*s,h*s),e.setScissor(r.subViewRegion.locationX*s,c*s,d*s,h*s),e.clear(),r.recoverVisible(),r.setContentsVisible(r.subViewContents),e.setScissor(l,c,d,h),e.setViewport(0,0,a,o),e.render(t,i)),r.showViewContents(),e.setScissorTest(!1)}},{key:"showViewContents",value:function(){var e=this;if(e.embeddedViewFlg){var t=void 0;for(t=0;t<e.mainViewContents.length;t++)null!=e.mainViewContents[t].modelId&&e.modelManager.getModel(e.mainViewContents[t].modelId).setVisible(!0);for(t=0;t<e.subViewContents.length;t++)null!=e.subViewContents[t].modelId&&e.modelManager.getModel(e.subViewContents[t].modelId).setVisible(!0)}}},{key:"setContentsVisible",value:function(e){for(var t=this,i=0;i<e.length;i++)null==e[i].modelId?e[i].isVisible?t.getTileManager().show(e[i].imageryId):t.getTileManager().hide(e[i].imageryId):t.modelManager.getModel(e[i].modelId).setVisible(e[i].isVisible)}},{key:"recoverVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;for(var i in t.oldSceneMap)t.oldSceneMap[i].isImagery?t.oldSceneMap[i].isVisible?t.getTileManager().show(i):t.getTileManager().hide(i):t.modelManager.getModel(i).setVisible(t.oldSceneMap[i].isVisible),e&&delete t.oldSceneMap[i]}},{key:"backupVisible",value:function(e){for(var t=this,i=void 0,r=void 0,n=void 0,a=t.getTileManager().tileProvider.tileVisible,o=0;o<e.length;o++)null==e[o].modelId?(i=e[o].imageryId,n=!0,r=a[i]):(i=e[o].modelId,r=t.modelManager.getModel(i).visible,n=!1),null==t.oldSceneMap[i]?t.oldSceneMap[i]={isVisible:r,dirty:!1,isImagery:n}:t.oldSceneMap[i].dirty=!1}},{key:"update",value:function(){var e=this;if(e.embeddedViewFlg&&e.needUpdate){for(var t in e.oldSceneMap)e.oldSceneMap[t].dirty=!0;e.backupVisible(e.mainViewContents),e.backupVisible(e.subViewContents);for(var i in e.oldSceneMap)e.oldSceneMap[i].dirty&&(e.modelManager.getModel(i).setVisible(e.oldSceneMap[i].isVisible),delete e.oldSceneMap[i])}}}]),e}();s.ScissorViewportManager=e}(),s.SceneStateHelper=function(e){this.selectionSet={},this.selectionMaterial=s.MaterialUtil.createHighlightMaterial(),this.selectionMaterial.colorState=s.EnumShaderColorState.SELECT,this.selectionMaterial.name="selection",this.selectionMaterial.refreshUniforms(),this.hoverId=void 0,this.hoverMaterialDefaultParams={color:14540253,opacity:.9,transparent:!0,side:THREE.DoubleSide},this.hoverMaterial=s.MaterialUtil.createStandardMaterial(this.hoverMaterialDefaultParams),this.hoverMaterial.name="hover",this.modelManager=e,this.blinkComponentIdsMap={};var t=this;this.filter=e.getFilter(),this.filter.setObserverForSceneState(function(i,r){t.removeSelection(i,r),t.clearBlinkComponentsById(i,r),e.viewer.render()}),this.phongHoverMaterial=new THREE.MeshPhongMaterial(this.hoverMaterialDefaultParams),this.phongSelectionMaterial=new THREE.MeshPhongMaterial(s.GlobalData.SelectionColor)},s.SceneStateHelper.prototype={constructor:s.SceneStateHelper,destroy:function(){this.selectionSet=null,this.blinkComponentIdsMap=null,this.modelManager=null,this.selectionMaterial.destroy(),this.selectionMaterial=null,this.hoverMaterial.destroy(),this.hoverMaterial=null,this.phongHoverMaterial.dispose(),this.phongHoverMaterial=null,this.phongSelectionMaterial.dispose(),this.phongSelectionMaterial=null},_dispatchChangeEvent:function(){var e=this.getSelectionMap();this.modelManager.dispatchEvent({type:s.EVENTS.ON_SELECTION_CHANGED,selectionList:e})},getSelectionMap:function(){var e={};for(var t in this.selectionSet)e[t]=Object.keys(this.selectionSet[t]);return e},clearSelection:function(e,t){var i,r=!1;if(t=s.Utils.defaultValue(t,!0),void 0===e){var n=[];for(var a in this.selectionSet){r=!1,i=this.getSelectionSet(a);for(var o in i)if(i.hasOwnProperty(o)){r=!0;break}r&&n.push(a)}if(n.length){for(var l=0,u=n.length;l<u;l++)this.selectionSet[n[l]]={},this.modelManager.clearSelection(n[l]);t&&this._dispatchChangeEvent()}}else{i=this.getSelectionSet(e);for(var o in i)if(i.hasOwnProperty(o)){r=!0;break}r&&(this.selectionSet[e]={},this.modelManager.clearSelection(e),t&&this._dispatchChangeEvent())}},addSelection:function(e,t){if(e&&!(e.length<1)){var i,r=[],n=!1,a=this.modelManager,o=this.filter;if(void 0===t){for(var l={},u=a.getModelIds(),c=[],h=0,d=u.length;h<d;h++){var f=u[h];i=this.getSelectionSet(f),n=!1;for(var p=e.length-1;p>=0;p--){var m=e[p];a.isUserIdExist(m,f)&&(!i[m]&&o.isComponentActive(m,f)&&(i[m]=f,n=!0),l[m]=!0)}n&&c.push(f)}for(var p=e.length-1;p>=0;p--){var m=e[p];l[m]||r.push(m)}if(r.length>0&&a.dispatchEvent({type:s.EVENTS.ON_SELECTION_FAILED,failedId:r}),c.length){for(var v=0,g=c.length;v<g;v++)this.modelManager.applySelection(c[v]);this._dispatchChangeEvent()}}else{i=this.getSelectionSet(t);for(var p=e.length-1;p>=0;p--){var m=e[p];a.isUserIdExist(m,t)?!i[m]&&o.isComponentActive(m,t)&&(i[m]=t,n=!0):r.push(m)}r.length>0&&a.dispatchEvent({type:s.EVENTS.ON_SELECTION_FAILED,failedId:r}),n&&(this.modelManager.applySelection(t),this._dispatchChangeEvent())}}},setSelection:function(e,t){if(e&&!(e.length<1))if(void 0===t){for(var i in this.selectionSet){var r=Object.keys(this.selectionSet[i]).length>0;delete this.selectionSet[i],r&&this.modelManager.applySelection(i)}this.addSelection(e)}else this.selectionSet[t]={},this.addSelection(e,t)},removeSelection:function(e,t){if(e&&!(e.length<1)){var i=!1;if(void 0===t){var r=[];for(var n in this.selectionSet){var a=this.getSelectionSet(n);i=!1;for(var o=0,s=e.length;o<s;++o){var l=e[o];a[l]&&(delete a[l],i=!0)}i&&r.push(n)}if(r.length){for(var o=0,s=r.length;o<s;o++)this.modelManager.applySelection(r[o]);this._dispatchChangeEvent()}}else{for(var a=this.getSelectionSet(t),o=0,s=e.length;o<s;++o){var l=e[o];a[l]&&(delete a[l],i=!0)}i&&(this.modelManager.applySelection(t),this._dispatchChangeEvent())}}},getSelection:function(e){var t={};if(void 0===e)for(var i in this.selectionSet)for(var r=this.getSelectionSet(i),n=Object.keys(r),a=0,o=n.length;a<o;a++)t[n[a]]=!0;else t=this.getSelectionSet(e);return Object.keys(t)},getSelectionWithModelId:function(e){var t=[];if(void 0===e)for(var i in this.selectionSet){var r=this.getSelectionSet(i),n=!0,a=!1,o=void 0;try{for(var s,l=Object.entries(r)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,c=_slicedToArray(u,2),h=c[0],d=c[1];i===d&&t.push({modelId:i,selectedId:h})}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}}else selList=this.getSelectionSet(e);return t},hasSelection:function(e){var t,i=!1;if(void 0===e)for(var r in this.selectionSet){t=this.getSelectionSet(r);for(var n in t)if(t.hasOwnProperty[n]){i=!0;break}if(i)break}else{t=this.getSelection(e);for(var n in t)if(t.hasOwnProperty[n]){i=!0;break}}return i},getSelectionSet:function(e){if(void 0===e){var t={};for(var i in this.selectionSet)for(var r=this.getSelectionSet(i),n=Object.keys(r),a=0,o=n.length;a<o;a++)t[n[a]]=!0;return t}return void 0===this.selectionSet[e]&&(this.selectionSet[e]={}),this.selectionSet[e]},isSelected:function(e,t){var i,r=!1;if(void 0===t){for(var n in this.selectionSet)if((i=this.selectionSet[n])&&i[e]){r=!0;break}}else(i=this.selectionSet[t])&&i[e]&&(r=!0);return r},setHoverId:function(e,t){this.hoverId=e,this.modelManager.applyHover(t)},clearHover:function(e){this.hoverId=void 0,this.modelManager.clearHover(e)},getHoverMaterial:function(e){var t=e&&e.isMeshPhongMaterial?this.phongHoverMaterial.clone():this.hoverMaterial.clone();if(e&&e.hasOwnProperty("color")){var i=e.color.clone();t.color.setHex(i.getHex()),void 0!==e.opacity?t.opacity=e.opacity:t.opacity=this.hoverMaterialDefaultParams.opacity,void 0!==e.transparent?t.transparent=e.transparent:t.transparent=this.hoverMaterialDefaultParams.transparent,void 0!==e.side?t.side=e.side:t.side=this.hoverMaterialDefaultParams.side,void 0!==e.metalness&&(t.metalness=e.metalness),void 0!==e.roughness&&(t.roughness=e.roughness),void 0!==e.bumpMap&&(t.bumpMap=e.bumpMap),void 0!==e.alphaMap&&(t.alphaMap=e.alphaMap),void 0!==e.emissiveMap&&(t.emissiveMap=e.emissiveMap),void 0!==e.envMap&&(t.envMap=e.envMap),void 0!==e.envMapIntensity&&(t.envMapIntensity=e.envMapIntensity),void 0!==e.map&&null!==e.map&&(t.map=e.map),t.opacity=s.MaterialUtil.getHoverOpacity(t.opacity),t.transparent=!0,t.needsUpdate=!0}return t},getHoverColorByMaterial:function(e){var t=void 0!==e.opacity?e.opacity:this.hoverMaterialDefaultParams.opacity;if(t=s.MaterialUtil.getHoverOpacity(t),!e.hasOwnProperty("color"))return{rgbaColor:[this.hoverMaterial.color.r,this.hoverMaterial.color.g,this.hoverMaterial.color.b,t],transparent:!0};var i=e.color.clone();return{rgbaColor:[i.r,i.g,i.b,t],transparent:!0}},setSelectionColor:function(e,t){var i=this.selectionMaterial.color,r=this.selectionMaterial.opacity;t=void 0==t?r:t,"0x"+i.getHexString()==e&&r==t||(this.selectionMaterial.color.setHex(e),t&&(this.selectionMaterial.opacity=t),this.selectionMaterial.needsUpdate=!0)},getSelectionMaterial:function(){return this.selectionMaterial.clone()},getModelIdByUserId:function(e){var t,i=this.modelManager.filterHelper.distributeId(e),r=i.modelId,n=i.objectId;return r?(t=r,e=n):this.modelManager.modelCollection.some(function(i){if(i.isUserIdExist(e))return t=i.id,!0}),t},setBlinkComponentsById:function(e,t,i){if(e&&0!==e.length){for(var r={},n=e.length-1;n>=0;n--){var a=e[n];t=t||this.getModelIdByUserId(a),r[t]||(this.blinkComponentIdsMap[t]={},r[t]=!0),this.filter.isComponentActive(a,t)&&(this.blinkComponentIdsMap[t]=this.blinkComponentIdsMap[t]||{},this.blinkComponentIdsMap[t][a]=i||{})}this.modelManager.blinkManager.applyBlink(t)}},addBlinkComponentsById:function(e,t,i){if(e&&e.length){for(var r=!1,n=e.length-1;n>=0;n--){var a=e[n];t=t||this.getModelIdByUserId(a),this.blinkComponentIdsMap[t]&&this.blinkComponentIdsMap[t][a]||!this.filter.isComponentActive(a,t)||(this.blinkComponentIdsMap[t]=this.blinkComponentIdsMap[t]||{},r=!0),this.blinkComponentIdsMap[t]&&(this.blinkComponentIdsMap[t][a]=i||{})}r&&this.modelManager.blinkManager.applyBlink(t)}},clearBlinkComponentsById:function(e,t){if(e&&e.length){for(var i=!1,r=0,n=e.length;r<n;++r){var a=e[r];t=t||this.getModelIdByUserId(a),this.blinkComponentIdsMap[t]&&this.blinkComponentIdsMap[t][a]&&(this.blinkComponentIdsMap[t]=this.blinkComponentIdsMap[t]||{},delete this.blinkComponentIdsMap[t][a],i=!0)}i&&this.modelManager.blinkManager.applyBlink(t)}},clearAllBlinkComponents:function(e){var t=this,i=!1,r=this.blinkComponentIds;if(s.Utils.isOwnEmptyObject(r),e){var n=this.blinkComponentIdsMap[e];s.Utils.isOwnEmptyObject(n)||(i=!0,this.blinkComponentIdsMap[e]={})}else i=!0,Object.keys(this.blinkComponentIdsMap).forEach(function(e){return t.blinkComponentIdsMap[e]=[]});i&&this.modelManager.blinkManager.clearBlink(e)},getBlinkComponents:function(e){var t=this;if(e)return Object.keys(this.blinkComponentIdsMap[e]||{});var i=[];return Object.keys(this.blinkComponentIdsMap).forEach(function(e){return i=i.concat(t.blinkComponentIdsMap[e])}),i},getBlinkComponentsIdMap:function(e){return this.modelManager.blinkManager.getBlinkEnabled()?e?this.blinkComponentIdsMap[e]||{}:this.blinkComponentIdsMap:null},getBlinkMaterial:function(e,t){return s.MaterialUtil.getBlinkMaterial(e,this.modelManager.blinkManager.getBlinkColor(t))}},s.TimeConstants={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5},function(){function e(e){var t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}function t(t,i){i=s.JulianDate.addSeconds(t,m,i);var r=s.JulianDate.totalDays(i)-v;return i=s.JulianDate.addSeconds(i,e(r),i)}function i(e,t,i,a,o,u,c){if(i<0&&(i=-i,o+=Math.PI),i<0||i>Math.PI)throw new Error("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");var h=e*(1-t),d=a-o,f=o,p=n(u-a,t);if("Hyperbolic"===r(t,0)&&Math.abs(s.Math.negativePiToPi(p))>=Math.acos(-1/t))throw new Error("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");l(d,i,f,E);var m=h*(1+t),v=Math.cos(p),g=Math.sin(p),y=1+t*v;if(y<=s.Math.Epsilon10)throw new Error("elements cannot be converted to cartesian");var M=m/y;return s.Utils.defined(c)?(c.x=M*v,c.y=M*g,c.z=0):c=new THREE.Vector3(M*v,M*g,0),c.applyMatrix3(E)}function r(e,t){if(e<0)throw new Error("eccentricity cannot be negative.");return e<=t?"Circular":e<1-t?"Elliptical":e<=1+t?"Parabolic":"Hyperbolic"}function n(e,t){if(t<0||t>=1)throw new Error("eccentricity out of range.");return o(a(e,t),t)}function a(e,t){if(t<0||t>=1)throw new Error("eccentricity out of range.");var i=Math.floor(e/s.Math.TWO_PI);e-=i*s.Math.TWO_PI;var r,n=e+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e)),a=Number.MAX_VALUE;for(r=0;r<b&&Math.abs(a-n)>x;++r){a=n;n=a-(a-t*Math.sin(a)-e)/(1-t*Math.cos(a))}if(r>=b)throw new Error("Kepler equation did not converge");return a=n+i*s.Math.TWO_PI}function o(e,t){if(t<0||t>=1)throw new Error("eccentricity out of range.");var i=Math.floor(e/s.Math.TWO_PI);e-=i*s.Math.TWO_PI;var r=Math.cos(e)-t,n=Math.sin(e)*Math.sqrt(1-t*t),a=Math.atan2(n,r);return a=s.Math.zeroToTwoPi(a),e<0&&(a-=s.Math.TWO_PI),a+=i*s.Math.TWO_PI}function l(e,t,i,r){if(t<0||t>Math.PI)throw new Error("inclination out of range");var n=Math.cos(e),a=Math.sin(e),o=Math.cos(t),l=Math.sin(t),u=Math.cos(i),c=Math.sin(i);return s.Utils.defined(r)||(r=new THREE.Matrix3),r.set(u*n-c*a*o,-u*a-c*n*o,c*l,c*n+u*a*o,-c*a+u*n*o,-u*l,a*l,n*l,o)}function u(e,r){f||(f=new s.JulianDate(0,0,s.TimeStandard.TAI)),t(e,f),d||(d=new s.JulianDate(2451545,0,s.TimeStandard.TAI));var n=f.dayNumber-d.dayNumber+(f.secondsOfDay-d.secondsOfDay)/s.TimeConstants.SECONDS_PER_DAY,a=n/(10*s.TimeConstants.DAYS_PER_JULIAN_CENTURY),o=.3595362*a,l=I+P*Math.cos(C*o)+z*Math.sin(C*o)+D*Math.cos(S*o)+j*Math.sin(S*o)+N*Math.cos(A*o)+V*Math.sin(A*o)+_*Math.cos(k*o)+W*Math.sin(k*o)+H*Math.cos(R*o)+Y*Math.sin(R*o)+F*Math.cos(B*o)+Z*Math.sin(B*o)+U*Math.cos(L*o)+Q*Math.sin(L*o)+G*Math.cos(O*o)+X*Math.sin(O*o),u=T+w*a+ne*Math.cos(J*o)+de*Math.sin(J*o)+ae*Math.cos(K*o)+fe*Math.sin(K*o)+oe*Math.cos(q*o)+pe*Math.sin(q*o)+se*Math.cos($*o)+me*Math.sin($*o)+le*Math.cos(ee*o)+ve*Math.sin(ee*o)+ue*Math.cos(te*o)+ge*Math.sin(te*o)+ce*Math.cos(ie*o)+ye*Math.sin(ie*o)+he*Math.cos(re*o)+Me*Math.sin(re*o);return i(l,.0167086342-.0004203654*a,469.97289*M*a,102.93734808*y+11612.3529*M*a,174.87317577*y-8679.27034*M*a,u,r)}function c(e,r){t(e,f);var n=f.dayNumber-d.dayNumber+(f.secondsOfDay-d.secondsOfDay)/s.TimeConstants.SECONDS_PER_DAY,a=n/s.TimeConstants.DAYS_PER_JULIAN_CENTURY,o=a*a,l=o*a,u=l*a,c=383397.7725+.004*a,h=.055545526-1.6e-8*a,p=5.15668983*y,m=-8e-5*a+.02966*o-42e-6*l-1.3e-7*u,v=83.35324312*y,E=14643420.2669*a-38.2702*o-.045047*l+21301e-8*u,b=125.04455501*y,x=-6967919.3631*a+6.3602*o+.007625*l-3586e-8*u,I=218.31664563*y,T=1732559343.4847*a-6.391*o+.006588*l-3169e-8*u,w=297.85019547*y+M*(1602961601.209*a-6.3706*o+.006593*l-3169e-8*u),C=93.27209062*y+M*(1739527262.8478*a-12.7512*o-.001037*l+417e-8*u),S=134.96340251*y+M*(1717915923.2178*a+31.8792*o+.051635*l-2447e-7*u),A=357.52910918*y+M*(129596581.0481*a-.5532*o+136e-6*l-1149e-8*u),k=310.17137918*y-M*(6967051.436*a+6.2068*o+.007618*l-3219e-8*u),R=2*w,B=4*w,L=6*w,O=2*S,P=3*S,D=4*S,N=2*C;c+=3400.4*Math.cos(R)-635.6*Math.cos(R-S)-235.6*Math.cos(S)+218.1*Math.cos(R-A)+181*Math.cos(R+S),h+=.014216*Math.cos(R-S)+.008551*Math.cos(R-O)-.001383*Math.cos(S)+.001356*Math.cos(R+S)-.001147*Math.cos(B-P)-914e-6*Math.cos(B-O)+869e-6*Math.cos(R-A-S)-627e-6*Math.cos(R)-394e-6*Math.cos(B-D)+282e-6*Math.cos(R-A-O)-279e-6*Math.cos(w-S)-236e-6*Math.cos(O)+231e-6*Math.cos(B)+229e-6*Math.cos(L-D)-201e-6*Math.cos(O-N),m+=486.26*Math.cos(R-N)-40.13*Math.cos(R)+37.51*Math.cos(N)+25.73*Math.cos(O-N)+19.97*Math.cos(R-A-N),E+=-55609*Math.sin(R-S)-34711*Math.sin(R-O)-9792*Math.sin(S)+9385*Math.sin(B-P)+7505*Math.sin(B-O)+5318*Math.sin(R+S)+3484*Math.sin(B-D)-3417*Math.sin(R-A-S)-2530*Math.sin(L-D)-2376*Math.sin(R)-2075*Math.sin(R-P)-1883*Math.sin(O)-1736*Math.sin(L-5*S)+1626*Math.sin(A)-1370*Math.sin(L-P),x+=-5392*Math.sin(R-N)-540*Math.sin(A)-441*Math.sin(R)+423*Math.sin(N)-288*Math.sin(O-N),T+=-3332.9*Math.sin(R)+1197.4*Math.sin(R-S)-662.5*Math.sin(A)+396.3*Math.sin(S)-218*Math.sin(R-A);var _=2*k,H=3*k;m+=46.997*Math.cos(k)*a-.614*Math.cos(R-N+k)*a+.614*Math.cos(R-N-k)*a-.0297*Math.cos(_)*o-.0335*Math.cos(k)*o+.0012*Math.cos(R-N+_)*o-16e-5*Math.cos(k)*l+4e-5*Math.cos(H)*l+4e-5*Math.cos(_)*l
;var F=2.116*Math.sin(k)*a-.111*Math.sin(R-N-k)*a-.0015*Math.sin(k)*o;return E+=F,T+=F,x+=-520.77*Math.sin(k)*a+13.66*Math.sin(R-N+k)*a+1.12*Math.sin(R-k)*a-1.06*Math.sin(N-k)*a+.66*Math.sin(_)*o+.371*Math.sin(k)*o-.035*Math.sin(R-N+_)*o-.015*Math.sin(R-N+k)*o+.0014*Math.sin(k)*l-.0011*Math.sin(H)*l-9e-4*Math.sin(_)*l,c*=g,i(c,h,p+m*M,v+E*M,b+x*M,I+T*M,r)}function h(e,t){return t=c(e,t),t.multiplyScalar(Ee)}var d,f,p,m=32.184,v=2451545,g=1e3,y=s.Math.RADIANS_PER_DEGREE,M=s.Math.RADIANS_PER_ARCSECOND,E=new THREE.Matrix3,b=50,x=s.Math.EPSILON8,I=149598022260.7121,T=100.46645683*y,w=1295977422.83429*M,C=16002,S=21863,A=32004,k=10931,R=14529,B=16368,L=15318,O=32794,P=64e-7*14959787e4,D=-2273887.624,N=927506.794,_=14959787e4*-8e-7,H=32e-7*14959787e4,F=-613351.267,U=284235.953,G=-164557.657,z=-2243968.05,j=-688150.202,V=1017265.516,W=807828.498,Y=14e-7*14959787e4,Z=359034.888,Q=14959787e4*-28e-7,X=329115.314,J=10,K=16002,q=21863,$=10931,ee=1473,te=32004,ie=4387,re=73,ne=-325e-7,ae=-322e-7,oe=1e-7*-79,se=232*1e-7,le=1e-7*-52,ue=97e-7,ce=55e-7,he=-41e-7,de=-105e-7,fe=-137e-7,pe=258e-7,me=35e-7,ve=1e-7*-116,ge=-88e-7,ye=-112e-7,Me=-8e-6,Ee=-.01215058143522694,be=new THREE.Vector3,xe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"computeSunPositionInEarthInertialFrame",value:function(e,t){return s.Utils.defined(e)||(e=s.JulianDate.now()),s.Utils.defined(t)||(t=new THREE.Vector3),p||(p=new THREE.Matrix3,p.set(1.0000000000000002,5.619723173785822e-16,4.690511510146299e-19,-5.154129427414611e-16,.9174820620691819,-.39777715593191376,-2.23970096136568e-16,.39777715593191376,.9174820620691819)),be=u(e,be),t.copy(be),t.negate(),h(e,be),t.sub(be),t.applyMatrix3(p),t}}]),e}();s.Simon1994PlanetaryPositions=xe}(),function(){function e(e,t,i){var r=t/s.TimeConstants.SECONDS_PER_DAY|0;return e+=r,t-=s.TimeConstants.SECONDS_PER_DAY*r,t<0&&(e--,t+=s.TimeConstants.SECONDS_PER_DAY),i.dayNumber=e,i.secondsOfDay=t,i}function t(e,t){return l.compare(e.julianDate,t.julianDate)}function i(e){n||(n=new o),n.julianDate=e;var i=l.leapSeconds,r=s.Utils.binarySearch(i,n,t);r<0&&(r=~r),r>=i.length&&(r=i.length-1);var a=i[r].offset;if(r>0){l.secondsDifference(i[r].julianDate,e)>a&&(r--,a=i[r].offset)}l.addSeconds(e,a,e)}function r(e,t,i,r,n,a,o){var l=(t-14)/12|0,u=e+4800+l,c=(1461*u/4|0)+(367*(t-2-12*l)/12|0)-(3*((u+100)/100|0)/4|0)+i-32075;(r-=12)<0&&(r+=24);var h=a+(r*s.TimeConstants.SECONDS_PER_HOUR+n*s.TimeConstants.SECONDS_PER_MINUTE+o*s.TimeConstants.SECONDS_PER_MILLISECOND);return h>=43200&&(c-=1),[c,h]}var n,a={UTC:0,TAI:1},o=function e(t,i){_classCallCheck(this,e),this.julianDate=t,this.offset=i},l=function(){function o(t,r,n){_classCallCheck(this,o),this.dayNumber=void 0,this.secondsOfDay=void 0,t=s.Utils.defaultValue(t,0),r=s.Utils.defaultValue(r,0),n=s.Utils.defaultValue(n,a.UTC);var l=0|t;r+=(t-l)*s.TimeConstants.SECONDS_PER_DAY,e(l,r,this),n===a.UTC&&i(this)}return _createClass(o,null,[{key:"compare",value:function(e,t){if(!s.Utils.defined(e))throw new Error("left is required.");if(!s.Utils.defined(t))throw new Error("right is required.");var i=e.dayNumber-t.dayNumber;return 0!==i?i:e.secondsOfDay-t.secondsOfDay}},{key:"secondsDifference",value:function(e,t){if(!s.Utils.defined(e))throw new Error("left is required.");if(!s.Utils.defined(t))throw new Error("right is required.");return(e.dayNumber-t.dayNumber)*s.TimeConstants.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)}},{key:"addSeconds",value:function(t,i,r){if(!s.Utils.defined(t))throw new Error("julianDate is required.");if(!s.Utils.defined(i))throw new Error("seconds is required.");if(!s.Utils.defined(r))throw new Error("result is required.");return e(t.dayNumber,t.secondsOfDay+i,r)}},{key:"fromDate",value:function(t,n){if(!(t instanceof Date)||isNaN(t.getTime()))throw new Error("date must be a valid JavaScript Date.");var l=r(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return s.Utils.defined(n)?(e(l[0],l[1],n),i(n),n):new o(l[0],l[1],a.UTC)}},{key:"now",value:function(e){return o.fromDate(new Date,e)}},{key:"computeTaiMinusUtc",value:function(e){n.julianDate=e;var i=o.leapSeconds,r=s.Utils.binarySearch(i,n,t);return r<0&&(r=~r,--r<0&&(r=0)),i[r].offset}},{key:"totalDays",value:function(e){if(!s.Utils.defined(e))throw new Error("julianDate is required.");return e.dayNumber+e.secondsOfDay/s.TimeConstants.SECONDS_PER_DAY}}]),o}();l.leapSeconds=[new o(new l(2441317,43210,a.TAI),10),new o(new l(2441499,43211,a.TAI),11),new o(new l(2441683,43212,a.TAI),12),new o(new l(2442048,43213,a.TAI),13),new o(new l(2442413,43214,a.TAI),14),new o(new l(2442778,43215,a.TAI),15),new o(new l(2443144,43216,a.TAI),16),new o(new l(2443509,43217,a.TAI),17),new o(new l(2443874,43218,a.TAI),18),new o(new l(2444239,43219,a.TAI),19),new o(new l(2444786,43220,a.TAI),20),new o(new l(2445151,43221,a.TAI),21),new o(new l(2445516,43222,a.TAI),22),new o(new l(2446247,43223,a.TAI),23),new o(new l(2447161,43224,a.TAI),24),new o(new l(2447892,43225,a.TAI),25),new o(new l(2448257,43226,a.TAI),26),new o(new l(2448804,43227,a.TAI),27),new o(new l(2449169,43228,a.TAI),28),new o(new l(2449534,43229,a.TAI),29),new o(new l(2450083,43230,a.TAI),30),new o(new l(2450630,43231,a.TAI),31),new o(new l(2451179,43232,a.TAI),32),new o(new l(2453736,43233,a.TAI),33),new o(new l(2454832,43234,a.TAI),34),new o(new l(2456109,43235,a.TAI),35),new o(new l(2457204,43236,a.TAI),36),new o(new l(2457754,43237,a.TAI),37)],s.TimeStandard=a,s.LeapSecond=o,s.JulianDate=l}(),s.Viewer=function(e){this._options=s.Utils.defaultValue(e,{}),this._initEarth=s.Utils.defaultValue(this._options.setupEarth,!1),this._earthResource=this._options.earthResource,this.globalRendering=this._initEarth,this._demOptions=s.Utils.defaultValue(this._options.demOptions,{});var t={lon:116.40016,lat:39.91645,height:100};this._baseGeoCoordinates=s.Utils.defaultValue(this._options.initialGeoCoordinates,t),this._staticResourcesHost=s.Utils.defaultValue(this._options.staticResourcesHost,"../../resources"),this._dampingOpts=s.Utils.defaultValue(this._options.damping,{}),this.domElement=null,this.camera=null,this.gisMode=s.Utils.defaultValue(this._options.gisMode,!1),this.callbacks={},this.tmpBox=new THREE.Box3,this.enableCameraNearFar=!0,this.currentHomeView=s.EnumStandardView.ISO,this.initialView=s.EnumStandardView.ISO,this.modelManager=new s.ModelManager(this),this.editorManager=new s.EditorManager,this.viewshedManager=new s.ViewshedManager(this),s.GroundPrimitiveManager.createInstance(this),s.GIS.ApproximateTerrainHeights._viewer=this,this.isRecalculationPlanes=!1,this.calculationPlanesBind=this.calculationPlanes.bind(this),this.addRenderFinishedCallback(this.calculationPlanesBind),this.transitionAnimationState=!0,this.animator=new s.CameraAnimator,this.animator.setDuration(1e3),this.IBLManager=new s.IBLManager(this),this.TextureManager=new s.TextureManager(this),this.rendererManager=new s.RendererManager(this),this.terrainOperationManager=new s.TerrainOperationManager(this),this.refleRefraManager=new s.RefleRefraManager(this),this.scissorViewportManager=new s.ScissorViewportManager(this),this.cameraStateWithFrustum=!1,this.filterHelper=this.modelManager.getFilterHelper(),this.ground=null,this.basePointPositionOnLonLat=null,this.virtualEarthComplete=!0,this._setupEarth(!0),this.minimumFPS=4,s.EnableStorage=this._options.enableStorage,window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB||(s.EnableStorage=!1)},s.Viewer.prototype={constructor:s.Viewer,addCallbacks:function(e,t){var i=this.callbacks[e];i||(i=[],this.callbacks[e]=i),-1===i.indexOf(t)&&i.push(t)},removeCallbacks:function(e,t){var i=this.callbacks[e];if(i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}},removeAllCallbacks:function(){for(var e in this.callbacks)for(var t=this.callbacks[e],i=0,r=t.length;i<r;i++)t.splice(0,1);for(var e in this.callbacks)delete this.callbacks[e];this.callbacks={}},onCallbacks:function(e){var t=this.callbacks[e];if(t)for(var i=0;i<t.length;i++)t[i]&&t[i]()},addRenderCallback:function(e){this.addCallbacks(s.EnumRenderCallbackType.RENDER,e)},removeRenderCallback:function(e){this.removeCallbacks(s.EnumRenderCallbackType.RENDER,e)},onRenderCallback:function(){this.onCallbacks(s.EnumRenderCallbackType.RENDER)},addRenderFinishedCallback:function(e){this.addCallbacks(s.EnumRenderCallbackType.FINISH_RENDER,e)},removeRenderFinishedCallback:function(e){this.removeCallbacks(s.EnumRenderCallbackType.FINISH_RENDER,e)},onRenderFinishedCallback:function(){this.onCallbacks(s.EnumRenderCallbackType.FINISH_RENDER)},destroy:function(){this.removeAllCallbacks(),this.refleRefraManager.dispose(),this.scissorViewportManager.dispose(),this.terrainOperationManager.dispose(),this.heightLimitManager&&this.heightLimitManager.dispose(),this.terrainOperationManager=null,this.refleRefraManager=null,this.scissorViewportManager=null,this.renderSettings.canvas=null,this.renderSettings.context=null,this.renderSettings=null,this.rendererManager.destroy(),this.rendererManager=null,this.cameraControl.destroy(),this.cameraControl=null,this.camera=null,this.defaultCamera=null,this.viewshedManager.destroy(),this.viewshedManager=null,this.filterHelper=null,this.editorManager.destroy(),this.modelManager.destroy(),this.modelManager=null,this.editorManager=null,this.domElement=null,this.callbacks=null,this.tmpBox=null,this.calculationPlanesBind=null,this.animator=null,this.IBLManager=null,this._options=null,this.TextureManager.destroy(),this.TextureManager=null,s.GIS.ApproximateTerrainHeights._viewer=null,s.GroundPrimitiveManager.destroyInstance()},init:function(e){console.log("Web3D: "+s.Version),s.GlobalData.IsMobile=!this.isDesktop();var t=this,i=s.GlobalData.maxDrawCacheNum,r={alpha:!0,preserveDrawingBuffer:!0,antialias:!0,maxDrawCacheNum:i,stencil:!0,logarithmicDepthBuffer:!1,xrCompatible:!0};s.GlobalData.EnableLogarithmicDepthBuffer&&(r.logarithmicDepthBuffer=!0);var n;try{n=document.createElement("canvas");var a=n.getContext("webgl",r)||n.getContext("experimental-webgl",r);a||(r.antialias=!1),r.context=a}catch(e){return!1}this.domElement=e,s.GeomUtil.initializeUnitInstances(),r.canvas=n,this.renderSettings=r;var o=e.offsetWidth,l=e.offsetHeight,u={width:o,height:l,fov:45,near:.1,far:20*s.GlobalData.SceneSize};return this.camera=this.defaultCamera=new s.Camera(s.CAMERATYPE.PERSPECTIVE,u),this.cameraControl=new s.CameraControl(this,this.getScene(),this.camera,this.domElement,function(e){t.render(e)},this._dampingOpts),s.GroundPrimitiveManager.getInstance().setSize(o,l),this.terrainOperationManager.setSize(o,l),this.setEditorDefault(),this.getScene().lightManager.initCSM(this),this.modelManager.onUpdateViewer=function(){t.render(!0)},this.editorManager.registerDomEventListeners(this.domElement),!0},render:function(e){var t=this.getRenderer();t&&t.vr&&t.vr.enabled||this.rendererManager.render(e)},resize:function(e,t){this.camera&&this.getRenderer()&&(this.camera.setSize(e,t),this.camera.updateProjectionMatrix(),this.rendererManager.setSize(e,t),s.GroundPrimitiveManager.getInstance().setSize(e,t),this.terrainOperationManager.setSize(e,t),this.modelManager.updateMaterialsValue("viewportSize",new THREE.Vector2(e,t)),this.onCallbacks("resize"),this.render())},resizeByFrustum:function(e,t){this.camera&&this.getRenderer()&&(this.camera.updateProjectionMatrixByFrustum=!0,this.camera.setSizeByFrustum(e,t),this.render(),this.camera.updateProjectionMatrixByFrustum=!1)},calculateNearFar:function(e){if(this.enableCameraNearFar){var t=this.getScene(),i=t.getBoundingBoxWorld();if(i){var r=this.camera,n=this.tmpBox;if(n.copy(i),s.GlobalData.EnableGisMap){var a=t.calculateGisMapBox(r);n.union(a)}var o=this.getCurrentEditor();if(o.name===s.EditorMode.THIRDPERSONWALK&&o.prepared){var l=o.object.box;n.union(l)}if(4==s.GlobalData.LightPreset&&t.lightManager.shadowBox){var u=t.getShadowBoxWorld();n.union(u)}if(n.applyMatrix4(t.getMatrixGlobal()),e&&e.fillClipPlane&&t.fillClipPlane){var c=t.fillClipPlane.getFillClipPlaneBoundingBox();n.union(c)}var h=this.globalRendering?.1:void 0;r.calculateNearFar(n,h)}}},resetSelectionColor:function(e,t){this.modelManager.sceneState.setSelectionColor(e,t)},calculateMinDistance:function(e,t){function i(e,t,i,o,s,l){r.fromBufferAttribute(t,i),n.fromBufferAttribute(t,o),a.fromBufferAttribute(t,s),l&&(r.applyMatrix4(l),n.applyMatrix4(l),a.applyMatrix4(l)),e.push(r),e.push(n),e.push(a)}var r=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3,o=this.modelManager.getMinDistanceObjects(e,t);if(!o)return-1;var l=[],u={start:null,end:null,minDistance:Number.POSITIVE_INFINITY};for(var c in o)l.push(o[c]);if(l[0].length<1||l[1].length<1)return-1;var h=l[0],d=l[1],f=h.length,p=d.length,m=null,v=Number.POSITIVE_INFINITY;if(f>1||p>1){m={};for(var g=0;g<f;g++)for(var y=h[g],M=0;M<p;M++){var E=d[M],b=function(e,t){for(var i=0,r=0,n=0;n<3;n++){var a=e.min.getComponent(n),o=e.max.getComponent(n),s=t.min.getComponent(n),l=t.max.getComponent(n),u=0;a>l?u=a-l:o<s&&(u=s-o),i+=u*u;var c=Math.max(l,o)-Math.min(a,s);r+=c*c}return{minDis:Math.sqrt(i),maxDis:Math.sqrt(r)}}(y.boundingBox,d[M].boundingBox);v=v<b.maxDis?v:b.maxDis,m[g+"_"+M]=b}}for(var g=0;g<f;g++)for(var y=h[g],M=0;M<p;M++){if(m){var x=m[g+"_"+M].minDis;if(x>v||x>u.minDistance)continue}var E=d[M],I=function(e,t,r){for(var n,a,o,l={start:null,end:null,minDistance:r},u=e.mesh,c=e.indexInfo,h=e.matrix,d=u.geometry,f=d.attributes.position,p=c?c.indexStart:0,m=d.getIndex().array,v=c?c.indexStart+c.indexCount:m.length,g=t.mesh,y=t.indexInfo,M=t.matrix,E=p,b=v;E<b;E+=3){n=m[E],a=m[E+1],o=m[E+2];var x=[];i(x,f,n,a,o,h);var I=s.Utils.minDistanceBetweenTriToMesh(x,g,y,M);I.minDistance<l.minDistance&&(l.minDistance=I.minDistance,l.start=I.start,l.end=I.end)}return l}(y,E,u.minDistance);if(I.minDistance<u.minDistance&&(u.minDistance=I.minDistance,u.start=I.start,u.end=I.end),0==u.minDistance)return u}return m=null,u},registerDomEventListeners:function(){this.domElement&&this.editorManager.registerDomEventListeners(this.domElement)},unregisterDomEventListeners:function(){this.domElement&&this.editorManager.unregisterDomEventListeners(this.domElement)},registerEventListener:function(e,t){this.modelManager.addEventListener(e,t)},unregisterEventListener:function(e,t){this.modelManager.removeEventListener(e,t)},load:function(e){var t=this,i=this.getModelManager();return i.load(e,function(){t.rendererManager.setupRenderer(t.renderSettings)},function(r){i.updateFilterManager(),i.getFilter().calculateVisibleComponentsBbox(),i.setDrawableModel(!0),t.camera.dirty||e.loadConfig&&!1===e.loadConfig.zoomAll?t.render():(t.goToInitialView(),t.zoomAll()),r.materialManager&&r.materialManager.delayUpdateTexturePkgMapping(void 0,function(){i.setRenderStateChanged(!0),t.render()})})},_setupEarth:function(e){var t=this;if(this.globeEarth||!this._initEarth)return void this.modelManager.dispatchEvent({type:s.EVENTS.ON_EARTH_ANIMATION_COMPLETE});this.virtualEarthComplete=!1,e=s.Utils.defaultValue(e,!0);var i={_baseGeoCoordinates:this._baseGeoCoordinates,earthResource:this._earthResource},r=this.globeEarth=new s.VirtualEarth(this,i);r.setupEarth().then(function(){var i={destination:t._baseGeoCoordinates,globe:r,changeToWorkSpace:!0};t.cameraControl.zoomToHeight(i,r).then(function(){e&&t.showWorkSpaceScene()})}).catch(function(){t.showWorkSpaceScene(),console.log("can not load texture, setup earth failed")})},unload:function(e){var t=this;this.getModelManager().unload(e,function(){t.zoomAll(),t.render()})},unloadAll:function(){this.getModelManager().unloadAll(),this.render()},showScene:function(e,t){var i=this;this.getModelManager().setModelVisibility(e,t,function(){i.render()})},showWorkSpaceScene:function(){var e=this;this.globalRendering=!1,this.getScene().changeToWorkSpaceScene(),this.globeEarth&&(this.globeEarth.destroy(),this.globeEarth=null,this._initEarth=!1);var t=this.transitionAnimationState;this.transitionAnimationState=!1,this.setStandardView(this.initialView,null,null,function(){e.transitionAnimationState=t,e.virtualEarthComplete=!0,e.zoomAll(),e.modelManager.dispatchEvent({type:s.EVENTS.ON_EARTH_ANIMATION_COMPLETE}),e.setRenderStateChanged(!0),e.render()})},isEarthComplete:function(){return this.virtualEarthComplete},setModelShellVisible:function(e,t){this.modelManager.setModelShellVisibility(e,t),this.setRenderStateChanged(!0),this.render()},clearAll:function(){this.getScene().clearAll()},restore:function(){this.getFilter().clear(),this.getScene().disableClipPlanes(),this.modelManager.dispatchEvent({type:s.EVENTS.ON_VIEWER_RESTORED})},getScene:function(){return this.modelManager.scene},getCapsScene:function(){return this.modelManager.capsScene},getEditorManager:function(){return this.editorManager},getUserdataByUserId:function(e,t){var i=this.modelManager.getNodeInfosByUserId(e,t);return i&&i instanceof Array?i[0].userData:null},getFilter:function(){return this.modelManager.getFilter()},getCurrentEditorName:function(){return this.editorManager.getCurrentEditorName()},getCurrentEditor:function(){return this.editorManager.getCurrentEditor()},setEditorMode:function(e){this.editorManager.setEditorMode(this,e)},setEditorDefault:function(){this.setEditorMode(s.EditorMode.PICK)},setPickMode:function(){console.warn("CLOUD.Viewer.setPickMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.PICK)},setRectPickMode:function(){console.warn("CLOUD.Viewer.setRectPickMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.PICK_BY_RECT)},setOrbitMode:function(){console.warn("CLOUD.Viewer.setOrbitMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.ORBIT)},setZoomMode:function(){console.warn("CLOUD.Viewer.setZoomMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.ZOOM)},setRectZoomMode:function(){console.warn("CLOUD.Viewer.setRectZoomMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.ZOOM_BY_RECT)},setPanMode:function(){console.warn("CLOUD.Viewer.setPanMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.PAN)},setFlyMode:function(){console.warn("CLOUD.Viewer.setFlyMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.FLY)},setMeasureMode:function(){console.warn("CLOUD.Viewer.setMeasureMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.MEASURE)},setClipPlanesMode:function(){console.warn("CLOUD.Viewer.setClipPlanesMode() has been deprecated. Use CLOUD.Viewer.setEditorMode(name) instead."),this.setEditorMode(s.EditorMode.CLIP_BY_BOX)},getBoundingBoxWorld:function(){return this.getScene().getBoundingBoxWorld()},getBoundingBox:function(){return this.getScene().getBoundingBox()},zoomIn:function(e){void 0===e&&(e=.1),e<0&&(e=0),this.cameraControl.zoom(e)},zoomOut:function(e){void 0===e&&(e=.1),e>0?e*=-1:e=0,this.cameraControl.zoom(e)},zoomAll:function(e,t){var i=this.getScene().getBoundingBox();s.Utils.isDefined(i)&&this._zoomToLocalBBox(i,e,t)},zoomToBuilding:function(e,t){this.zoomAll(e,t)},zoomToSelection:function(e,t,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=this.getScene(),o=this.modelManager.sceneState,s=this.getBoundingBoxByIds(o.getSelectionSet(r),r);if(s.isEmpty()&&(s=a.getBoundingBox()),1==this.getTransitionAnimationState()){var l=this.animator.getDuration();this.animator.setDuration(n),this.animator.setStandardView(void 0,this,s,e,void 0,"[object Function]"===Object.prototype.toString.call(i)?i:void 0),this.animator.setDuration(l)}else this._zoomToLocalBBox(s,e,t)},_zoomToLocalBBox:function(e,t,i,r){this.camera.zoomToBBox(e,t,i,r),this.cameraControl.update(!0,!0),this.cameraControl.dirtyCamera(!0)},zoomToBBox:function(e,t,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=new THREE.Box3;if(e?(a.copy(e),a.applyMatrix4(this.getScene().getMatrixGlobal())):a.copy(this.getScene().getBoundingBox()),1==this.getTransitionAnimationState()){var o=this.animator.getDuration();this.animator.setDuration(n),this.animator.setStandardView(void 0,this,a,t,void 0,"[object Function]"===Object.prototype.toString.call(r)?r:void 0),this.animator.setDuration(o)}else this._zoomToLocalBBox(a,t,i)},zoomToBBoxByDirection:function(e,t,i,r){if(!t)return void this.zoomToBBox(e,i,r);if(t&&e){var n=e.clone(),a=n.getCenter().clone().add(t);n.applyMatrix4(this.getScene().getMatrixGlobal()),a.applyMatrix4(this.getScene().getMatrixGlobal());var o=a.clone().sub(n.getCenter());o.length()>1e-4?(o.normalize(),viewer.camera.realUp.copy(THREE.Object3D.DefaultUp),this._zoomToLocalBBox(n,i,r,o)):this._zoomToLocalBBox(n,i,r)}},zoomToBBoxWithOuterBox:function(e,t,i,r){if(!t)return void this.zoomToBBox(e,i,r);if(t&&e){var n=e.clone(),a=t.getCenter();n.applyMatrix4(this.getScene().getMatrixGlobal()),a.applyMatrix4(this.getScene().getMatrixGlobal());var o=a.clone().sub(n.getCenter());o.length()>1e-4?(o.normalize(),this.camera.realUp.copy(THREE.Object3D.DefaultUp),this._zoomToLocalBBox(n,i,r,o)):this._zoomToLocalBBox(n,i,r)}},getObjectsInBox:function(e){var t=new THREE.Box3;return t.copy(e),t.applyMatrix4(this.getScene().getMatrixGlobal()),s.PickUtil.getObjectsInBox(this.getScene(),t,this.modelManager,this)},setStandardView:function(e,t,i,r){var n,a=this.camera;if(n=this.getScene().getBoundingBox(),s.Utils.isDefined(n))if(this.transitionAnimationState)this.animator.setStandardView(e,this,n,t,i,r);else{a.setStandardView(e,n);this.camera.zoomToBBox(n,t);this.cameraControl.update(!0,!0),r&&r()}},getLineSelectRange:function(){return s.GlobalData.LineSelectRange},setLineSelectRange:function(e){s.GlobalData.LineSelectRange=e},_setStandardView:function(e,t){var i=this.camera,r=this.getScene().getBoundingBox();i.setStandardView(e,r),i.zoomToBBox(r,t)},setStandardViewWithBox:function(e,t,i,r){if(t?t.applyMatrix4(this.getScene().getMatrixGlobal()):t=this.getScene().getBoundingBox(),this.transitionAnimationState)this.animator.setStandardView(e,this,t,i);else{var n=this.camera;n.setStandardView(e,t),n.zoomToBBox(t,i,r),this.cameraControl.update(!0,!0)}},setTopView:function(e,t,i){this.setStandardViewWithBox(s.EnumStandardView.ISO,e,t,i)},setInitialViewType:function(e){console.warn("CLOUD.Viewer.setInitialViewType() has been deprecated. Use CLOUD.Viewer.setInitialView() instead."),this.setInitialView(e)},setInitialView:function(e){this.initialView=e,this._setStandardView(e)},goToInitialView:function(e){this.setStandardView(this.initialView,e,null)},flyToLngLat:function(e){var t=s.Utils.defaultValue(e,{});return this.cameraControl.flyToLngLat(t)},setHomeViewType:function(e){console.warn("CLOUD.Viewer.setHomeViewType() has been deprecated. Use CLOUD.Viewer.setHomeView() instead."),this.setHomeView(e)},setHomeView:function(e){this.currentHomeView=e,this._setStandardView(e)},getHomeView:function(){return this.currentHomeView},goToHomeView:function(e){this.setStandardView(this.currentHomeView,e,null)},rotateByAxis:function(e,t,i){var r=2*Math.PI/60/60*e;if(t&&"x"!=t){if("y"!=t)return void console.warn("Illegal rotation axis for Viewer.rotateByAxis().");this.cameraControl.handleRotation(0,-r,i)}else this.cameraControl.handleRotation(-r,0,i);this.cameraControl.update(!0)},setImageResPath:function(e){s.GlobalData.TextureResRoot=e},setLightIntensityFactor:function(e){s.GlobalData.LightIntensityFactor=e},setLimitFrameTime:function(e){s.GlobalData.IncrementRender&&(e<=0&&(e=30),s.GlobalData.LimitFrameTime=e)},limitFrameRate:function(e){s.GlobalData.IncrementRender&&(e<=0&&(e=4),this.minimumFPS=e,s.GlobalData.LimitFrameTime=1e3/e)},transformCamera:function(e){return s.CameraUtil.transformCamera(e,this.modelManager.scene)},getCamera:function(){var e=this.getScene(),t=e.getMatrixGlobal(),i=this.cameraControl.getCamera(),r=this.cameraControl.getCameraName(),n=new s.CameraInfo(r,i.position,i.target,i.realUp||i.up);if(n=s.Camera.drawingToWorld(n,t),this.cameraStateWithFrustum)var a=i.near*Math.tan(.5*THREE.Math.DEG2RAD*i.fov)/i.zoom,o=2*a,l=i.aspect*o;var u=null;return u=i.isPerspective?new s.PerspectiveCameraInfo(n.position,n.target,n.up,i.fov,i.aspect,i.near,i.far,i.zoom,void 0,l,o):new s.OrthographicCameraInfo(n.position,n.target,n.up,i.left,i.right,i.top,i.bottom,i.near,i.far,i.zoom,void 0,l,o),u=s.Camera.nearFarDrawingToWorld(u,t),JSON.stringify(u)},setCameraStateWithFrustum:function(e){this.cameraStateWithFrustum=e},setCamera:function(e,t,i,r){this.camera.dirty=!0;var n=this,a=s.CameraUtil.parseCameraInfo(e);if(null===a)console.log("Invalid camera info string. Fail to set camera.");else if(this.switchToCamera(a.name)){var o=this.getScene(),l=o.getMatrixGlobal(),u=s.Camera.worldToDrawing(a,l);if(u.name=a.name,u.zoom=a.zoom,r){var c=new THREE.Vector3(u.position.x,u.position.y,u.position.z),h=new THREE.Vector3(u.target.x,u.target.y,u.target.z),d=new THREE.Vector3(h.distanceTo(c),0,0),f=h.clone().sub(c).normalize(),p=new THREE.Vector3(u.up.x,u.up.y,u.up.z);p.normalize();var m=new THREE.Vector3(u.zoom,0,0);return this.camera.setZoom(m.x),this.camera.LookAt(h,f,p,d.x),void(i&&i())}if(this.transitionAnimationState){var v={position:this.camera.position.clone(),target:this.camera.target.clone(),up:this.camera.realUp.clone()||this.camera.up.clone(),zoom:this.camera.zoom};this.animator.active(v,u,this,function(e){n.cameraControl.update(!0,!0)},function(){a.frustumWidth&&a.frustumHeight&&n.resizeByFrustum(a.frustumWidth,a.frustumHeight),i&&i()})}else{"orth"===a.name&&n.camera.setZoom(a.zoom);var g=new THREE.Vector3;g.subVectors(u.target,u.position),this.camera.LookAt(u.target,g,u.up),t&&this.cameraControl.updateCamera(),a.frustumWidth&&a.frustumHeight&&(n.cameraControl.update(!0,!0),n.resizeByFrustum(a.frustumWidth,a.frustumHeight)),i&&i()}}},setCameraMinimumElevation:function(e){if(null!=e){this.camera.minimumElevation=e,e>0?this.cameraControl.updateMinPitch(0):this.cameraControl.updateMinPitch(-Math.PI/2);var t=JSON.parse(this.getCamera());e>t.position.z&&(t.position.z=e,t=JSON.stringify(t),this.setCamera(t,!0,null,!1))}else this.camera.minimumElevation=null,this.cameraControl.updateMinPitch(-Math.PI/2)},getRenderBufferScreenShot:function(e,t){var i=this.getRenderer().domElement,r=i.toDataURL("image/png"),n=i.width,a=i.height,o=window.devicePixelRatio||1,s=n/o,l=a/o;if(!s||!l)return t?(t(r),null):r;var u,c,h=0,d=0;if(s>l||n/a<s/l?(u=s,c=a/n*s,d=l/2-c/2):(c=l,u=n/a*l,h=s/2-u/2),t){var f=new Image;return f.onload=function(){var i=document.createElement("canvas"),r=i.getContext("2d");i.width=s,i.height=l,e&&(r.fillStyle=e,r.fillRect(0,0,s,l)),r.drawImage(f,h,d,u,c);var n=i.toDataURL("image/png");t(n)},f.src=r,null}var f=new Image;f.src=r;var p=document.createElement("canvas"),m=p.getContext("2d");return p.width=s,p.height=l,e&&(m.fillStyle=e,m.fillRect(0,0,s,l)),m.drawImage(f,h,d,u,c),p.toDataURL("image/png")},screenShot:function(e,t,i){var r=this,n=function(e,t,i){var n=r.getRenderer().domElement,a=n.toDataURL("image/png"),o=n.width,s=n.height,l=(window.devicePixelRatio,e),u=t;if(!l||!u)return i?(i(a),null):a;var c,h,d=0,f=0;if(l>u||o/s<l/u?(c=l,h=s/o*l,f=u/2-h/2):(h=u,c=o/s*u,d=l/2-c/2),i){var p=new Image;return p.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=l,e.height=u,t.drawImage(p,d,f,c,h);var r=e.toDataURL("image/png");i(r)},p.src=a,null}}(e,t,i);return this.render(),n},canvas2image:function(e,t){var i,r=this;return t?(this.getRenderBufferScreenShot(e,function(e){t(e),r.render()}),null):(i=this.getRenderBufferScreenShot(e),this.render(),i)},lockAxisZ:function(e,t){var i=this.cameraControl;if(i){var r=i.getZenith(),n=this.getBoundingBox().getCenter().clone();if(e&&void 0!==t||(t=null),t){var a=t[0],o=t[1];r>o?i.handleRotation(0,o-r,n):r<a&&i.handleRotation(0,a-r,n),this.render()}this.cameraControl.lockAxisZ(e),this.cameraControl.setLockAxisZRange(t)}},isLockedAxisZ:function(){return this.cameraControl.isLockedAxisZ()},enableTranslucentByDClick:function(e){s.GlobalData.EnableDemolishByDClick=e},enableHitDetection:function(e){s.GlobalData.EnableHitDetection=e},rotateCamera:function(e){this.cameraControl.processRotate(e),this.cameraControl.update()},setRotationCenter:function(e){this.rotationCenter=new THREE.Vector3(e.x,e.y,e.z)},clearRotationCenter:function(){this.rotationCenter=void 0},getRotationCenter:function(){return this.rotationCenter},getActiveCameraInfo:function(){var e={};e.up=new THREE.Vector3,e.dir=new THREE.Vector3;var t=this.camera,i=t.getWorldDirection();return e.up.copy(t.realUp||t.up),e.dir.copy(i),e},calculationPlanes:function(){if(this.isRecalculationPlanes){this.isRecalculationPlanes=!1;var e=this.getScene(),t=this.getBoundingBoxByIds();t.isEmpty()&&(t=e.getBoundingBox()),s.ClipPlaneManager.getInstance(e).calculationPlanes(t.getSize(),t.getCenter()),this.render()}},recalculationPlanes:function(){this.isRecalculationPlanes=!0},setOctantDepth:function(e){s.GlobalData.OctantDepth=e},resizePool:function(e){s.GlobalData.maxObjectNumInPool=e,this.modelManager.updateSceneRenderable(),this.render()},setCategoriesToHighPriority:function(e,t){var i=0==t?"inner":"outer";this.modelManager.setCategoriesToHighPriority(e,i)},clearCategoriesFromHighPriority:function(e){var t=0==e?"inner":"outer";this.modelManager.clearCategoriesFromHighPriority(t)},clearAllCategoriesFromHighPriority:function(){this.modelManager.clearAllCategoriesFromHighPriority()},isolate:function(e,t){this.getFilter().isolate(e,t)},setIsolateMaterial:function(e){this.getFilter().setIsolateMaterial(e)},resetIsolateMaterial:function(){this.getFilter().resetIsolateMaterial()},setOrbitButton:function(e){var t=this.editorManager._getEditorByName(this,s.EditorMode.ORBIT),i=this.editorManager._getEditorByName(this,s.EditorMode.PICK),r={};"left"===e?r={ORBIT:THREE.MOUSE.LEFT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT}:"right"===e&&(r={ORBIT:THREE.MOUSE.RIGHT,PAN2:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.LEFT}),t&&t.updateButtons(r),i&&i.updateButtons(r)},showPickedInformation:function(e){s.UIHelper.showPickedInformation(e)},setOrbitEnabled:function(e){s.EditorConfig.NoRotate=!0!==e},getOrbitEnabled:function(){return!s.EditorConfig.NoRotate},setSelectPadCallback:function(e){var t=this.editorManager.getCurrentEditor();t&&t.selectPad&&(t.selectPad.callback=e)},setDeviceMobile:function(e){s.GlobalData.IsMobile=e||!1},setPointRotateMode:function(e){s.EditorConfig.RotatePivotMode=e},worldToDrawing:function(e){return this.cameraControl?this.getScene().worldToDrawing(e):(console.log("camera is not initialized!!!"),null)},drawingToWorld:function(e){return this.cameraControl?this.getScene().drawingToWorld(e):(console.log("camera is not initialized!!!"),null)},worldToCanvas:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),null;var i=t.getContainerDimensions();if(!i)return null;var r=t.getCamera(),n=this.getScene(),a=n.worldToDrawing(e);return s.CameraUtil.drawingToCanvas(r,a,i.width,i.height)},intersectReferencePlane:function(){s.CameraUtil.intersectReferencePlane(this.camera,this.getScene())},canvasToWorld:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),null;var i=t.getContainerDimensions();if(!i)return null;var r=t.getCamera(),n=this.getScene(),a=s.CameraUtil.canvasToDrawing(r,e,i.width,i.height),o=n.drawingToWorld(a);return{x:o.x,y:o.y,z:o.z}},worldToClient:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),null;var i=t.getContainerDimensions();if(!i)return null;var r=t.getCamera(),n=this.getScene(),a=n.worldToDrawing(e),o=s.CameraUtil.drawingToCanvas(r,a,i.width,i.height);return o?(o.x+=i.left,o.y+=i.top,o):null},worldPointsToClient:function(e,t){var i=this.cameraControl
;if(!i)return console.log("camera is not initialized!!!"),null;var r=i.getContainerDimensions();if(!r)return null;var n=i.getCamera(),a=this.getScene(),o=a.worldToDrawing(e),l=a.worldToDrawing(t),u=s.CameraUtil.drawingPointsToCanvas(n,o,l,r.width,r.height);return u?(u.start.x+=r.left,u.start.y+=r.top,u.end.x+=r.left,u.end.y+=r.top,u):null},clientToWorld:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),null;var i=t.getContainerDimensions();if(!i)return null;var r={x:e.x,y:e.y,z:e.z};r.x-=i.left,r.y-=i.top;var n=t.getCamera(),a=this.getScene(),r=s.CameraUtil.canvasToDrawing(n,r,i.width,i.height),o=a.drawingToWorld(r);return{x:o.x,y:o.y,z:o.z}},insideCamera:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),!1;var i=this.getScene(),r=i.worldToDrawing(e);return t.getFrustum().containsPoint(r)},locateToPointWithParallelEye:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),!1;var i=this.getScene(),r=i.worldToDrawing(e);t.flyToPointWithParallelEye(r)},locateToPoint:function(e){var t=this.cameraControl;if(!t)return console.log("camera is not initialized!!!"),!1;var i=this.getScene(),r=i.worldToDrawing(e);t.flyToPoint(r)},enableHover:function(e){e||(this.modelManager.clearHover(),this.render()),s.GlobalData.Hover=e},enableMouseMovePick:function(e){s.GlobalData.MouseMovePick=e},getObjectsByClientCoordinates:function(e){return new s.IntersectHelper(this).getObjectsByClientCoordinates(e)},getIBLManager:function(){return this.IBLManager},loadEnvMap:function(e){for(var t=["posx.hdr","negx.hdr","posy.hdr","negy.hdr","posz.hdr","negz.hdr"],i=[],r=0;r<6;++r)i.push("/"+e+"/"+t[r]);var n=this;(new THREE.HDRCubeTextureLoader).load(THREE.FloatType,i,function(e){n.environmentCubeMap=e,n.modelManager.updateMaterialsValue("envMap",e),n.setRenderStateChanged(!0),n.render()})},setEnvMapIntensity:function(e){this.modelManager.updateMaterialsValue("envMapIntensity",e),this.setRenderStateChanged(!0),this.render()},closeEnvMap:function(){this.modelManager.updateMaterialsValue("envMap",null),this.setRenderStateChanged(!0),this.render()},isSupportSSAO:function(){return!s.GlobalData.IncrementRender},isSSAOEnabled:function(){return s.GlobalData.SSAO},enableSSAO:function(e){return 0!=this.isSupportSSAO()&&(s.GlobalData.SSAO==e||(s.GlobalData.SSAO=e,this.setRenderStateChanged(!0),this.render(),!0))},switchNewStyleMaterial:function(e){this.modelManager.switchNewStyleMaterial(e),this.setRenderStateChanged(!0),this.render()},enableColorWithoutLight:function(e){this.modelManager.enableColorWithoutLight(e),this.setRenderStateChanged(!0),this.render()},createGround:function(e){var t=new s.Ground(e);return this.ground=t,t},removeGround:function(){this.ground&&(this.ground.remove(),this.ground=null)},addPlane:function(e,t,i,r){var n=new THREE.Vector3;n.addVectors(new THREE.Vector3(e.x,e.y,e.z),new THREE.Vector3(t.x,t.y,t.z)),n.multiplyScalar(.5);var a=new THREE.PlaneBufferGeometry(t.x-e.x,t.y-e.y),o=new THREE.Mesh(a,new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,depthTest:!0}));o.position.copy(n),o.renderOrder=10,this.getScene().getOrCreateObjectGroup(s.ObjectGroupType.CUSTOMPLANE,{globalSpace:!0}).add(o),o.updateMatrixWorld(!0);var l=this,u=new THREE.TextureLoader;return u.setCrossOrigin("anonymous"),u.load(i,function(e){o.material.map=e,o.material.needsUpdate=!0,l.setRenderStateChanged(!0),r&&r()}),o},removePlane:function(e){var t=this.getScene(),i=t.getObjectGroup(s.ObjectGroupType.CUSTOMPLANE);i&&i.remove(e)},clearPlane:function(){var e=this.getScene(),t=e.getObjectGroup(s.ObjectGroupType.CUSTOMPLANE);t&&t.clear()},enableTextureMapping:function(e){s.GlobalData.EnableTextureMapping=e},enableLightmap:function(e){s.GlobalData.EnableLightmap!=e&&(s.GlobalData.EnableLightmap=e)},setLightmapIntensity:function(e){s.GlobalData.LightmapIntensity!=e&&(s.GlobalData.LightmapIntensity=e)},setReverseWheelDirection:function(e){s.EditorConfig.ReverseWheelDirection=!!e},getReverseWheelDirection:function(){return s.EditorConfig.ReverseWheelDirection},setMovementSpeedRate:function(e){void 0!==e&&(s.EditorConfig.MovementSpeedRate=e)},getMovementSpeedRate:function(){return s.EditorConfig.MovementSpeedRate},moveTo:function(e,t,i){var r=this.editorManager.editor;r&&r.moveTo(e,t,i)},rotateTo:function(e){var t=this.editorManager.editor;t&&t.rotateTo(e)},enableOcclusionTranslucent:function(e){s.GlobalData.OcclusionTranslucentEnabled=!!e},setOcclusionOpacity:function(e){s.GlobalData.OcclusionOpacity=e},setOcclusionDistanceToCamera:function(e){s.GlobalData.OcclusionDistanceToCamera=e},fitAndRotateBySelection:function(){this.cameraControl&&this.cameraControl.fitAndRotateBySelection()},setRoamingWalkHeight:function(e,t,i){if(!(e instanceof Array))return void console.log("elevations is not arry");var r=this.cameraControl;if(!r)return console.log("camera is not initialized!!!"),!1;if(t<=0&&(t=1750),void 0===i&&(i=!0),r.setCameraHeight(e,t),i){var n=this.editorManager.getCurrentEditor();n&&n.name===s.EditorMode.WALK&&n.update&&r.flyOnWorld()}},setRoamingWalkAbsoluteHeight:function(e,t){var i=this.cameraControl;if(!i)return console.log("camera is not initialized!!!"),!1;if(void 0===t&&(t=!0),i.setCameraAbsoluteHeight(e),t){var r=this.editorManager.getCurrentEditor();r&&r.name===s.EditorMode.WALK&&r.update&&i.flyOnWorld()}},cameraToWorld:function(e){return this.camera?s.Camera.drawingToWorld(e,this.getScene().getMatrixGlobal()):null},cameraToDrawing:function(e){return this.camera?s.Camera.worldToDrawing(e,this.getScene().getMatrixGlobal()):null},clearSelection:function(e){this.modelManager.sceneState.clearSelection(e)},addToSelection:function(e,t){var i=this,r=function(e,t){i.modelManager.sceneState.addSelection(t,e.id)};this.filterHelper.executeIds(e,r,t)},removeFromSelection:function(e,t){var i=this,r=function(e,t){i.modelManager.sceneState.removeSelection(t,e.id)};this.filterHelper.executeIds(e,r,t)},setSelection:function(e,t){var i=this,r=function(e,t){i.modelManager.sceneState.setSelection(t,e.id)};this.filterHelper.executeIds(e,r,t)},getSelection:function(e){return this.modelManager.sceneState.getSelection(e,e)},getSelectionWithModelId:function(e){return this.modelManager.sceneState.getSelectionWithModelId(e)},setSelectionColor:function(e){this.modelManager.sceneState.setSelectionColor(e)},pickByPoint:function(e,t){var i=this.cameraControl;if(!1===i.enabled)return!1;var r,n=new THREE.Vector2(e.x,e.y),a=i.getIntersectContext(n);r=t?i.intersector.pickGlobe(a):i.intersector.pick(a);var o=this.getScene();if(r){o.intersectToWorld(r,this);var s={};return s.faceIndex=r.faceIndex,s.meshId=r.userId,s.worldPosition=r.worldPosition,s.worldBoundingBox=r.worldBoundingBox,s}return null},pickByPointWithNormal:function(e){var t=this.getScene(),i=this.cameraControl;if(!1===i.enabled)return null;var r=new THREE.Vector2(e.x,e.y),n=i.getIntersectContext(r),a=i.intersector.pick(n);if(!a)return null;t.intersectToWorld(a,this),a.cx=r.x,a.cy=r.y;var o=[];o.push(a);var s=t.getMatrixGlobal(),l=a.face.normal.clone(),u=a.worldPosition.clone(),c=new THREE.Ray(u,l);c.applyMatrix4(s);var h=i.intersector.getIntersectByRay(n,c);return h&&(t.intersectToWorld(h,this),o.push(h)),o},toDefaultOrthographicCamera:function(e){this.switchToCamera("orth"),(e||void 0===e)&&this.render()},toDefaultPerspectiveCamera:function(e){this.switchToCamera("persp"),(e||void 0===e)&&this.render()},getCameraNameList:function(){return["pesp","orth"].concat(this.modelManager.getCameraNameList())},switchToCamera:function(e){var t=!0;if("persp"===e)this.camera=this.defaultCamera,this.camera.toPerspective();else if("orth"===e)this.camera=this.defaultCamera,this.camera.toOrthographic();else{var i=this.modelManager.getCamera(e);i?this.camera=i:(console.log("Fail to switch because not found camera '"+e+"'"),t=!1)}return t&&this.cameraControl.setCamera(this.camera),t},getNumOfElements:function(e){return this.modelManager.getNumOfElements(e)},getNumOfRenderables:function(e){return this.modelManager.getNumOfRenderables(e)},getNumOfTriangles:function(e){return this.modelManager.getNumOfTriangles(e)},getNumOfVertices:function(e){return this.modelManager.getNumOfVertices(e)},setLightPreset:function(e){s.GlobalData.LightPreset=e,this.getScene().lightPreset(),this.setRenderStateChanged(!0)},getLightPreset:function(){return s.GlobalData.LightPreset},setAmbientLightIntensity:function(e){var t=this.getScene().ambientLight;t&&(t.intensity=e,this.setRenderStateChanged(!0))},getAmbientLightIntensity:function(){var e=this.getScene().ambientLight;return e?e.intensity:void 0},setWalkHeightLocked:function(e){var t=this.editorManager.getCurrentEditor();t&&t.name===s.EditorMode.WALK&&t.setHeightLocked(e)},setWalkLookMousePressed:function(e){var t=this.editorManager.getCurrentEditor();t&&t.name===s.EditorMode.WALK&&t.setDragLook(e)},setWalkSpeedRate:function(e){var t=this.editorManager.getCurrentEditor();t&&(t.name===s.EditorMode.WALK||s.EditorMode.THIRDPERSONWALK)&&(s.EditorConfig.WalkSpeedRate=e)},getWalkSpeedRate:function(){return s.EditorConfig.WalkSpeedRate},setDrawingStyle:function(e){s.GlobalData.DrawingStyle=e,this.setRenderStateChanged(!0)},getWireframeColor:function(){var e=this.modelManager,t=void 0;return e.traverseModels(void 0,function(e){var i=e.wireframeManager;if(i)return t=i.getWireframeColor(),!0}),t||s.MaterialUtil.DefaultWireframeColor},setWireframeColor:function(e){this.modelManager.traverseModels(function(t){var i=t.wireframeManager;i&&i.setWireframeColor(new THREE.Color(e.red/255,e.green/255,e.blue/255),e.alpha)}),this.setRenderStateChanged(!0)},restoreWireframeColor:function(){this.modelManager.traverseModels(function(e){var t=e.wireframeManager;t&&t.restoreWireframeColor()}),this.setRenderStateChanged(!0)},setInstanceMode:function(e){if(!s.GlobalData.Instance===e){if(s.GlobalData.Instance=e,e){var t=this.getScene().getOrCreateObjectGroup(s.ObjectGroupType.INSTANCEGEOMETRY,{globalSpace:!0});t.visible=!0}else{var t=this.getScene().getOrCreateObjectGroup(s.ObjectGroupType.INSTANCEGEOMETRY,{globalSpace:!0});t.visible=!1}this.setRenderStateChanged(!0)}},setTransitionAnimationState:function(e){this.transitionAnimationState=e},getTransitionAnimationState:function(){return this.transitionAnimationState},clipPoint:function(e){var t=this.getRenderer();if(!t)return!1;var i=t.clippingPlanes;if(i&&i.length>0)for(var r=0;r<i.length;++r){var n=i[r],a=n.normal;if(e.dot(a)<-n.constant)return!0}return!1},getExplosionExtent:function(e){return this.modelManager.explosionManager.getExplosionExtent(e)},setExplosionExtent:function(e,t){s.GlobalData.EnableExplosion&&this.modelManager.explosionManager.setExplosionExtent(e,t)},setFloorExplosion:function(e,t,i,r){s.GlobalData.EnableExplosion&&this.modelManager.explosionManager.setFloorExplosion(e,t,i,r)},getFloorExplosionExtent:function(e){return this.modelManager.explosionManager.getFloorExplosionExtent(e)},getFloorExplosionDirection:function(e){return this.modelManager.explosionManager.getFloorExplosionDirection(e)},getFloorExplosionList:function(e){return this.modelManager.explosionManager.getFloorExplosionList(e)},setFloorInfos:function(e,t){this.modelManager.explosionManager.setFloorInfos(e,t)},getFloorInfos:function(e){return this.modelManager.explosionManager.getFloorInfos(e)},setExposureShift:function(e){s.GlobalData.ToneMapping=1;var t=e>0?-.4*e+.5:-4*e+.5;this.modelManager.updateMaterialsValue("shift",t),this.setRenderStateChanged(!0)},setRenderStateChanged:function(e){this.modelManager&&this.modelManager.setRenderStateChanged(e)},isDesktop:function(){return s.Utils.isDesktop()},getComponentInfoByUserId:function(e,t){return this.modelManager.getComponentInfoByUserId(e,t)},getBoundingBoxByIds:function(e,t){var i=this.modelManager.getBoundingBoxByIds(e,t);return i.isEmpty()||i.applyMatrix4(this.getScene().getMatrixGlobal()),i},convertAnnotationsToV3:function(e){return s.Compatibility.convertAnnotationsToV3(this,e)},loadMpkOnDemand:function(e,t,i){var r=this;this.modelManager.getLoadOnDemandDirector().loadMpkOnDemandByConditionsWithDelay(e,function(){r.getRenderer()&&r.getRenderer().clear(!0,!0,!0)},t,i)},getBoundingBoxOnDemand:function(){return this.modelManager.hasLoadOnDemandDirector()?this.modelManager.getLoadOnDemandDirector().getBoundingBoxOnDemand():null},updateGlowEffect:function(e,t){var i=this;if(i.rendererManager&&i.rendererManager.renderer&&i.rendererManager.renderer instanceof s.BatchedRenderer&&null!=i.rendererManager.renderer.composer){i.rendererManager.renderer.composer.updateGlowEffect(e,t)}},setGlowEffectById:function(e,t,i){var r=this;if(r.rendererManager&&r.rendererManager.renderer&&r.rendererManager.renderer instanceof s.BatchedRenderer){null==r.rendererManager.renderer.composer&&r.rendererManager.renderer._createComposer();var n=r.rendererManager.renderer.composer;if(null==t||0==t.length)return;null!=i.isGis&&1==i.isGis?n.isGis=!0:n.isGis=!1,"body"==i.type&&n.setGlowEffectById(e,t,i),"outline"==i.type&&null!=n.highlightoutlinePass&&n.highlightoutlinePass.setHighLightOutlineById(e,t,i)}},removeGlowEffectById:function(e,t){this.rendererManager.renderer.composer&&(s.GlobalData.GlowCount>0&&this.rendererManager.renderer.composer.removeGlowEffectById(e,t),s.GlobalData.HighLightOutlineCount>0&&null!=this.rendererManager.renderer.composer.highlightoutlinePass&&this.rendererManager.renderer.composer.highlightoutlinePass.removeHighLightOutlineById(e,t))},snowOpt:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;if(null==e)return i.snowEffectOpt();i.snowEffectOpt(e)}},rainOpt:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;if(null==e)return i.rainEffectOpt();i.rainEffectOpt(e)}},fogOpt:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;if(null==e)return i.fogEffectOpt();i.fogEffectOpt(e)}},skylineOpt:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;if(null==e)return i.skylineOpt();i.skylineOpt(e)}},getSkyline3D:function(){return s.GroundPrimitiveManager.getInstance().getSkyline3D()},updateDemMaterialsSide:function(){var e,t=this.modelManager.modelCollection;t.traverse(function(t){t.isDemLayer&&(e=t.tileManager)}),e&&e.updateMaterialsSide()},addRingScanEffect:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;s.GlobalData.ScanRingCount++;var r=i.addRingScanEffect(e);return t.render(),r}console.warn("请在场景加载成功后,添加环状扫描特效.")},deleteRingScanEffect:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer&&null!=t.rendererManager.renderer.composer){t.rendererManager.renderer.composer.removeRingScanEffect(e)&&s.GlobalData.ScanRingCount--,t.render()}},ssaoOpt:function(e){var t=this;if(t.rendererManager&&t.rendererManager.renderer&&t.rendererManager.renderer instanceof s.BatchedRenderer){null==t.rendererManager.renderer.composer&&t.rendererManager.renderer._createComposer();var i=t.rendererManager.renderer.composer;if(null==e)return i.ssaoEffectOpt();i.ssaoEffectOpt(e)}},createAreaInfo:function(e,t){var i=new s.AreaInfo(e);return i.checkRoomBoundary(t)?i:null},createAreaInfoWithHoles:function(e,t,i){var r=new s.AreaInfo(e);return r.checkRoomBoundaryWithHoles(t,i)?r:null},enableBlinkComponents:function(e){this.modelManager.blinkManager.isBlinkPermited()||(this.modelManager.blinkManager.enableBlink(e),this.render())},setBlinkComponentsById:function(e,t,i){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.sceneState.setBlinkComponentsById(e,t,i)},addBlinkComponentsById:function(e,t,i){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.sceneState.addBlinkComponentsById(e,t,i)},clearBlinkComponentsById:function(e,t){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.sceneState.clearBlinkComponentsById(e,t)},clearAllBlinkComponents:function(e){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.sceneState.clearAllBlinkComponents(e)},getBlinkComponents:function(e){return this.modelManager.blinkManager.isBlinkPermited()?null:this.modelManager.sceneState.getBlinkComponents(e)},setBlinkColor:function(e,t){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.blinkManager.setBlinkColor(e.color,e.opacity,t)},setBlinkIntervalTime:function(e,t){this.modelManager.blinkManager.isBlinkPermited()||this.modelManager.blinkManager.setBlinkIntervalTime(e,t)},enableSnap:function(e){this.editorManager.getToolByName("pickByRect").enableSnap(e)},pickToPoint:function(e,t){return this.editorManager.editor.pickHelper.pickToPoint(e,t)},getViewportSize:function(){return this.rendererManager.getRendererSize()},getRenderer:function(){return this.rendererManager.getRenderer()},getModelManager:function(){return this.modelManager},getReceivingPlane:function(){return this.getScene().getReceivingPlane()},enableShadow:function(e){var t=e?4:3;t!=s.GlobalData.LightPreset&&(this.setLightPreset(t),this.enableShadowForObjects(e))},enableShadowForObjects:function(e){var t=this.getScene();e?t.lightManager.shadowLightNum++:t.lightManager.shadowLightNum--;var i=this.getRenderer();if(i.shadowMap.needsUpdate=!0,(!(t.lightManager.shadowLightNum>0)||e)&&s.GlobalData.EnableShadowMap!=e){s.GlobalData.EnableShadowMap=e,i.shadowMap.enabled=e,i.shadowMap.type=THREE.PCFSoftShadowMap,i.shadowMap.autoUpdate=!1,i.shadowMap.renderSingleSided=!1;for(var r=this.getScene().getObjectGroups(),n=0;n<r.length;n++){var a=t.getObjectGroupType(r[n].name);if(a.groupType!=s.ObjectGroupType.IBLCUBE){var o=!1,l=!1,u=void 0;a.databagId?u=this.modelManager.getModel(a.databagId):a.groupType==s.GlobalData.TilePlaneGroupName?u=this.modelManager.getModel(s.ObjectGroupType.TILEGROUP):a.groupType==s.ObjectGroupType.EXTERNALCOMPONENTMANAGER?u=this.modelManager.getModel("ExternalComponent"):a.groupType==s.ObjectGroupType.EXTRUDEBODYMANAGER?u=this.modelManager.getModel(s.ObjectGroupType.EXTRUDEBODYMANAGER):a.groupType==s.ObjectGroupType.RECEIVESHADOWPLANE&&(l=!0),u&&(o=u.castShadow,l=u.receiveShadow),this.traverseGroupEnableShadow(r[n],o,l)}}}},traverseGroupEnableShadow:function(e,t,i){var r=this;!function(e){if(e instanceof THREE.Mesh){var n=e.material;if(n instanceof Array){var a;if("PhongLightingMaterial"==n[0].type)return;e.castShadow=t,e.receiveShadow=i;for(var o=0;o<n.length;o++)n[o]&&(n[o].needsUpdate=!0,a=n[o].defines);s.GlobalData.EnableShadowMap&&a&&a.hasOwnProperty("USE_INSTANCE")&&(e.customDepthMaterial=r.getInstanceDepthMaterial())}else{if("PhongLightingMaterial"==n.type)return;e.castShadow=t,e.receiveShadow=i,n.needsUpdate=!0;var a=n.defines;s.GlobalData.EnableShadowMap&&a&&a.hasOwnProperty("USE_INSTANCE")&&(e.customDepthMaterial=r.getInstanceDepthMaterial())}}}(e);for(var n=e.children,a=0,o=n.length;a<o;a++)this.traverseGroupEnableShadow(n[a],t,i)},getInstanceDepthMaterial:function(){return this.modelManager.getInstanceDepthMaterial()},updateShadowMap:function(){if(s.GlobalData.EnableShadowMap){this.getRenderer().shadowMap.needsUpdate=!0}},enableVR:function(e){this.rendererManager.enableVR(e)},enableDamping:function(e){e=s.Utils.defaultValue(e,!1),e?this.cameraControl.enableDamping():this.cameraControl.disableDamping()},setDampingFactor:function(e){e=s.Utils.defaultValue(e,10),e>=10&&(e=10),e<=1&&(e=1),e=11-e,this.cameraControl.dynamicDampingFactor(e/10)},calcShadowDirection:function(e,t){var i=s.JulianDate.fromDate(t),r=s.GIS.Transforms.computeTemeToPseudoFixedMatrix(i),n=s.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(i);n.applyMatrix3(r);var a=s.Tile.TileMath.fromDegrees(e[0],e[1],0),o=s.GIS.Transforms.eastNorthUpToFixedFrame(a);o.getInverse(o);var l=new THREE.Vector4(n.x,n.y,n.z,1);l.applyMatrix4(o);var u=new THREE.Vector3;return u.set(l.x,l.y,l.z),u.normalize(),u=this.worldToDrawing(u),u.normalize(),u},getMaterialsByComponentId:function(e,t){var i=this.getModelManager().getModel(e),r=i.getFilter()._getOverrideMaterialById(t);if(r)return[r];for(var n=i.getNodeInfosByUserId(t),a={},o=0,s=n.length;o<s;o++){var l=n[o].materialId;if(!a[l]){var u=i.getMaterialByMaterialId(l);u&&(a[l]=u.clone(),a[l].name=a[l].name.toString())}}return Object.values(a)},cloneModel:function(e,t){var i=this.getModelManager().getModel(e);return s.Utils.isDefined(i)?i.clone({modelId:t}):(console.log("can not find model with id "+e),null)},getHeightLimitManager:function(){return this.heightLimitManager||(this.heightLimitManager=new s.HeightLimitManager(this)),this.heightLimitManager},enableEmbeddedView:function(e){null!=this.scissorViewportManager&&(e?this.scissorViewportManager.show():this.scissorViewportManager.hide())},setEmbeddedView:function(e){null!=this.scissorViewportManager&&this.scissorViewportManager.effectOpt(e)}}}();